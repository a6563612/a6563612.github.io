{"version":3,"file":"app.js","mappings":"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","sources":["webpack://my-vue3-project/./src/stores/theme.js","webpack://my-vue3-project/./src/composables/useVersionCheck.js","webpack://my-vue3-project/./src/App.vue","webpack://my-vue3-project/./src/App.vue?7ccd","webpack://my-vue3-project/./src/assets/HomePageItems.js","webpack://my-vue3-project/./src/components/login-dialog.vue","webpack://my-vue3-project/./src/components/login-dialog.vue?ebfb","webpack://my-vue3-project/./src/components/Home/language-selecter.vue","webpack://my-vue3-project/./src/components/Home/language-selecter.vue?da2a","webpack://my-vue3-project/./src/utils/loadGoogleMaps.js","webpack://my-vue3-project/./src/components/Home/PunchClock.vue","webpack://my-vue3-project/./src/components/Home/PunchClock.vue?e3a5","webpack://my-vue3-project/./src/components/Home/HeaderOption.vue","webpack://my-vue3-project/./src/components/Home/HeaderOption.vue?20a0","webpack://my-vue3-project/./src/components/Home/RecursiveMenuItem.vue","webpack://my-vue3-project/./src/components/Home/RecursiveMenuItem.vue?ddbe","webpack://my-vue3-project/./src/components/Home/CustomMenubar.vue","webpack://my-vue3-project/./src/components/Home/CustomMenubar.vue?3fdb","webpack://my-vue3-project/./src/assets/HomePageItems/menuFilter.js","webpack://my-vue3-project/./src/ViewportInfo.vue","webpack://my-vue3-project/./src/ViewportInfo.vue?fe28","webpack://my-vue3-project/./src/components/Home/HomeMenu.vue","webpack://my-vue3-project/./src/components/Home/HomeMenu.vue?58be","webpack://my-vue3-project/./src/components/Home/PageList.vue","webpack://my-vue3-project/./src/components/Home/PageList.vue?6d60","webpack://my-vue3-project/./src/service/FinanceService.js","webpack://my-vue3-project/./src/service/WorkflowService.js","webpack://my-vue3-project/./src/service/ReferenceDataService.js","webpack://my-vue3-project/./src/components/Common/Tree/Tree-Employee.vue","webpack://my-vue3-project/./src/components/Common/Tree/Tree-Employee.vue?1371","webpack://my-vue3-project/./src/components/WorkFlow/Common/Custom_List_Insert_Notify.vue","webpack://my-vue3-project/./src/components/WorkFlow/Common/Custom_List_Insert_Notify.vue?2eda","webpack://my-vue3-project/./src/service/FormService.js","webpack://my-vue3-project/./src/stores/employee.js","webpack://my-vue3-project/./src/components/Common/IdToName/Employee-IdToName.vue","webpack://my-vue3-project/./src/components/Common/IdToName/Employee-IdToName.vue?7a85","webpack://my-vue3-project/./src/stores/dept.js","webpack://my-vue3-project/./src/components/Common/IdToName/Dept-IdToName.vue","webpack://my-vue3-project/./src/components/Common/IdToName/Dept-IdToName.vue?eb4c","webpack://my-vue3-project/./src/stores/title.js","webpack://my-vue3-project/./src/components/Common/IdToName/Title-IdToName.vue","webpack://my-vue3-project/./src/components/Common/IdToName/Title-IdToName.vue?245c","webpack://my-vue3-project/./src/components/WorkFlow/WF/Descending_Approval_Node.vue","webpack://my-vue3-project/./src/components/WorkFlow/WF/Descending_Approval_Node.vue?2c94","webpack://my-vue3-project/./src/configs/documentConfigs.js","webpack://my-vue3-project/./src/stores/area.js","webpack://my-vue3-project/./src/stores/role.js","webpack://my-vue3-project/./src/stores/IdToName.js","webpack://my-vue3-project/./src/components/Common/IdToName/Area-IdToName.vue","webpack://my-vue3-project/./src/components/Common/IdToName/Area-IdToName.vue?d280","webpack://my-vue3-project/./src/components/WorkFlow/HR/CardReissue/CorrectionForm.vue","webpack://my-vue3-project/./src/components/WorkFlow/HR/CardReissue/CorrectionForm.vue?4f8d","webpack://my-vue3-project/./src/components/WorkFlow/HR/LeaveRequestForm/LeaveRequestForm.vue","webpack://my-vue3-project/./src/components/WorkFlow/HR/LeaveRequestForm/LeaveRequestForm.vue?a8c1","webpack://my-vue3-project/./src/components/WorkFlow/Utils/supervisorUtils.js","webpack://my-vue3-project/./src/components/WorkFlow/HR/OvertimeRequestForm/OvertimeRequestForm.vue","webpack://my-vue3-project/./src/components/WorkFlow/HR/OvertimeRequestForm/OvertimeRequestForm.vue?9382","webpack://my-vue3-project/./src/components/WorkFlow/HR/CancelLeave/LeaveCancellationForm.vue","webpack://my-vue3-project/./src/components/WorkFlow/HR/CancelLeave/LeaveCancellationForm.vue?8541","webpack://my-vue3-project/./src/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue","webpack://my-vue3-project/./src/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue?da03","webpack://my-vue3-project/./src/components/AttendanceRecord/AttendanceRecord.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/AttendanceRecord.vue?824d","webpack://my-vue3-project/./src/components/Home/custom-marquee.vue","webpack://my-vue3-project/./src/components/Home/custom-marquee.vue?d55e","webpack://my-vue3-project/./src/service/EventsAndStatisticsService.js","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Department.vue","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Department.vue?ca0d","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Area.vue","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Area.vue?fb1f","webpack://my-vue3-project/./src/eventBus.js","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/MAC_Form_Detail.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/MAC_Form_Detail.vue?0d49","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/Fill_Mac_Form.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/Fill_Mac_Form.vue?c9db","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/MacForm.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/MACForm/MacForm.vue?b880","webpack://my-vue3-project/./src/components/Home/View/SlidePanel.vue","webpack://my-vue3-project/./src/components/Home/View/SlidePanel.vue?c020","webpack://my-vue3-project/./src/components/Home/View/HomePage.vue","webpack://my-vue3-project/./src/components/Home/View/HomePage.vue?4810","webpack://my-vue3-project/./src/components/Home/PersonalInformation.vue","webpack://my-vue3-project/./src/components/Home/PersonalInformation.vue?b673","webpack://my-vue3-project/./src/components/Home/DAEHistory.vue","webpack://my-vue3-project/./src/components/Home/DAEHistory.vue?b9ca","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Title.vue","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Title.vue?a5ae","webpack://my-vue3-project/./src/components/Registration/employee-registration.vue","webpack://my-vue3-project/./src/components/Registration/employee-registration.vue?5b0c","webpack://my-vue3-project/./src/components/Registration/userManagement.vue","webpack://my-vue3-project/./src/components/Registration/userManagement.vue?987f","webpack://my-vue3-project/./src/components/Chart/orgChart.vue","webpack://my-vue3-project/./src/components/Chart/orgChart.vue?aed9","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarBasic.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarBasic.vue?7886","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarHorizontal.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarHorizontal.vue?436c","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarStacked.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarStacked.vue?adf1","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarVertical.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_BarVertical.vue?cc08","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Combo.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Combo.vue?4eb7","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Doughnut.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Doughnut.vue?2f78","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Line.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Line.vue?7b9c","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_LineMultiAxis.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_LineMultiAxis.vue?717d","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_LineStyle.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_LineStyle.vue?fdd2","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Pie.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Pie.vue?12a8","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_PolarArea.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_PolarArea.vue?1849","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Radar.vue","webpack://my-vue3-project/./src/components/Chart/PrimeChart/PC_Radar.vue?cd70","webpack://my-vue3-project/./src/components/Chart/PrimeChart.vue","webpack://my-vue3-project/./src/components/Home/editDptFuncList_Form.vue","webpack://my-vue3-project/./src/components/Home/editDptFuncList_Form.vue?64a6","webpack://my-vue3-project/./src/service/MailService.js","webpack://my-vue3-project/./src/components/Mail/securityMail_checkBox.vue","webpack://my-vue3-project/./src/components/Mail/securityMail_checkBox.vue?5ba6","webpack://my-vue3-project/./src/components/Mail/securityMail_transfer.vue","webpack://my-vue3-project/./src/components/Mail/securityMail_transfer.vue?690a","webpack://my-vue3-project/./src/components/Mail/View/GroupsDialog.vue","webpack://my-vue3-project/./src/components/Mail/View/GroupsDialog.vue?973c","webpack://my-vue3-project/./src/components/Mail/SecurityMail.vue","webpack://my-vue3-project/./src/components/Mail/SecurityMail.vue?a6b2","webpack://my-vue3-project/./src/components/Home/BulletinBoard.vue","webpack://my-vue3-project/./src/components/Home/BulletinBoard.vue?b659","webpack://my-vue3-project/./src/components/login_delay.vue","webpack://my-vue3-project/./src/components/login_delay.vue?43fb","webpack://my-vue3-project/./src/components/vLogin.vue","webpack://my-vue3-project/./src/components/vLogin.vue?9ce2","webpack://my-vue3-project/./src/components/Home/PanelMenu.vue","webpack://my-vue3-project/./src/components/Home/PanelMenu.vue?9616","webpack://my-vue3-project/./src/components/Home/View/editDptFuncList.vue","webpack://my-vue3-project/./src/components/Home/View/editDptFuncList.vue?3dbc","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/List_ComputerInventory.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/List_ComputerInventory.vue?dfa4","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/Fill_ComputerInventory.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/Fill_ComputerInventory.vue?ebc3","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/ComputerInventory.vue","webpack://my-vue3-project/./src/components/EventsAndStatistics/ComputerInventory/ComputerInventory.vue?0fcd","webpack://my-vue3-project/./src/components/Administration/Dpt_System/FormsManagement.vue","webpack://my-vue3-project/./src/components/Administration/Dpt_System/FormsManagement.vue?bc66","webpack://my-vue3-project/./src/components/Administration/Dpt_System/ProcessDefinitionManagement.vue","webpack://my-vue3-project/./src/components/Administration/Dpt_System/ProcessDefinitionManagement.vue?fa1d","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Role.vue","webpack://my-vue3-project/./src/components/Common/TreeSelect-getData/TreeSelect-Role.vue?91a0","webpack://my-vue3-project/./src/components/Administration/Dpt_System/ProcessStepDefinitionManagement.vue","webpack://my-vue3-project/./src/components/Administration/Dpt_System/ProcessStepDefinitionManagement.vue?d24f","webpack://my-vue3-project/./src/components/Administration/Dpt_System/Dpt_System.vue","webpack://my-vue3-project/./src/components/EIP_Login.vue","webpack://my-vue3-project/./src/components/EIP_Login.vue?036e","webpack://my-vue3-project/./src/utils/SalaryDataManager.js","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_A.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_A.vue?5aca","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_B.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_B.vue?1d4d","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/initBlockCTable.js","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_C.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_C.vue?73b0","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_AnnualLeave.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_AnnualLeave.vue?ddc3","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_InsuranceCompany.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/block/Block_InsuranceCompany.vue?318a","webpack://my-vue3-project/./src/service/ExternalService.js","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalaryInfo.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalaryInfo.vue?e3ee","webpack://my-vue3-project/./src/components/AttendanceRecord/Horizontal-User-List-Block.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/Horizontal-User-List-Block.vue?abdd","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/ReportFunctionsDialog.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/ReportFunctionsDialog.vue?6004","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalarySlip.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalarySlip.vue?3bef","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalaryStructure.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/SalaryStructure.vue?510b","webpack://my-vue3-project/./src/components/Finance/MealAllowanceSummary.vue","webpack://my-vue3-project/./src/components/Finance/MealAllowanceSummary.vue?5bd3","webpack://my-vue3-project/./src/service/SpecialLeaveService.js","webpack://my-vue3-project/./src/components/Finance/AnnualLeaveSummary.vue","webpack://my-vue3-project/./src/components/Finance/AnnualLeaveSummary.vue?6cc7","webpack://my-vue3-project/./src/components/Finance/OvertimePageInfo.vue","webpack://my-vue3-project/./src/components/Finance/OvertimePageInfo.vue?51a0","webpack://my-vue3-project/./src/components/Finance/LeavePageInfo.vue","webpack://my-vue3-project/./src/components/Finance/LeavePageInfo.vue?dab1","webpack://my-vue3-project/./src/components/SystemManagement/sys_MacForm.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_ComputerInventory.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_UserTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_UserTable.vue?a8a6","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_EmployeeTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_EmployeeTable.vue?07bf","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_PermissionTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_PermissionTable.vue?fc1a","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_TitleTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_TitleTable.vue?acd6","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_RoleTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_RoleTable.vue?bd1b","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_DepartmentTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_DepartmentTable.vue?31df","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_AreaTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_AreaTable.vue?f43e","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_RoleTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_RoleTable.vue?c258","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_RelEIPUserRole_JOIN_WF_Role.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_RelEIPUserRole_JOIN_WF_Role.vue?f4d7","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_Rel_UserRole.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_Rel_UserRole.vue?91ec","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_AuditEventsTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/DAE_AuditEventsTable.vue?1582","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_WorkflowFormTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_WorkflowFormTable.vue?27b9","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentTypeTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentTypeTable.vue?7cde","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalWorkflowTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalWorkflowTable.vue?4535","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalStepTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalStepTable.vue?0173","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ParallelGroupTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ParallelGroupTable.vue?a467","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_CountersignGroupTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_CountersignGroupTable.vue?f6c5","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentTable.vue?5052","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalRecordTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ApprovalRecordTable.vue?d69c","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_StepInsertionTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_StepInsertionTable.vue?030c","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_NotificationLogTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_NotificationLogTable.vue?9444","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentNotificationRecipientTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentNotificationRecipientTable.vue?b20e","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentNotificationTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_DocumentNotificationTable.vue?ebac","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_CountersignGroupMemberTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_CountersignGroupMemberTable.vue?1130","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ParallelGroupMemberTable.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Table/WF_ParallelGroupMemberTable.vue?fa8a","webpack://my-vue3-project/./src/components/SystemManagement/sys_AttendanceRecord.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_AttendanceRecord.vue?fb70","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Management.vue","webpack://my-vue3-project/./src/components/SystemManagement/sys_DAE_Data_Management.vue?9785","webpack://my-vue3-project/./src/components/WorkFlow/WF/List_Related_WF_Form.vue","webpack://my-vue3-project/./src/components/WorkFlow/WF/List_Related_WF_Form.vue?963c","webpack://my-vue3-project/./src/components/SystemManagement/sys_WF_Management.vue","webpack://my-vue3-project/./src/components/DynamicForm/FieldPreview.vue","webpack://my-vue3-project/./src/components/DynamicForm/FieldPreview.vue?52e9","webpack://my-vue3-project/./src/components/DynamicForm/FieldEditorDialog.vue","webpack://my-vue3-project/./src/components/DynamicForm/FieldEditorDialog.vue?0040","webpack://my-vue3-project/./src/components/DynamicForm/FormTemplateDialog.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormTemplateDialog.vue?354d","webpack://my-vue3-project/./src/components/DynamicForm/FormPreviewDialog.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormPreviewDialog.vue?e7fc","webpack://my-vue3-project/./src/components/DynamicForm/FormResponseDialog.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormResponseDialog.vue?5683","webpack://my-vue3-project/./src/components/DynamicForm/FormAnalyticsDialog.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormAnalyticsDialog.vue?843c","webpack://my-vue3-project/./src/components/DynamicForm/FormTemplateManagement.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormTemplateManagement.vue?31ce","webpack://my-vue3-project/./src/components/DynamicForm/FormBuilder.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormBuilder.vue?dbd4","webpack://my-vue3-project/./src/components/DynamicForm/FormDesigner.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormDesigner.vue?2ef2","webpack://my-vue3-project/./src/components/SystemManagement/DeviceManagement/DeviceDialog.vue","webpack://my-vue3-project/./src/components/SystemManagement/DeviceManagement/DeviceDialog.vue?64ea","webpack://my-vue3-project/./src/service/SystemManagementService.js","webpack://my-vue3-project/./src/components/SystemManagement/DeviceManagement/DeviceManagement.vue","webpack://my-vue3-project/./src/components/SystemManagement/DeviceManagement/DeviceManagement.vue?8d1e","webpack://my-vue3-project/./src/components/SystemManagement/HostManagement/HostDialog.vue","webpack://my-vue3-project/./src/components/SystemManagement/HostManagement/HostDialog.vue?4cdb","webpack://my-vue3-project/./src/components/SystemManagement/HostManagement/HostManagement.vue","webpack://my-vue3-project/./src/components/SystemManagement/HostManagement/HostManagement.vue?fb41","webpack://my-vue3-project/./src/components/SystemManagement/DeviceHostManagement.vue","webpack://my-vue3-project/./src/components/SystemManagement/DeviceHostManagement.vue?a5d8","webpack://my-vue3-project/./src/service/CRMService.js","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/PerformanceManagement/PerformanceReport.vue","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/PerformanceManagement/PerformanceReport.vue?3108","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/PerformanceManagement/PersonalGoals.vue","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/PerformanceManagement/PersonalGoals.vue?1246","webpack://my-vue3-project/./src/components/GeneralManager/AnnualPerformanceSection.vue","webpack://my-vue3-project/./src/components/GeneralManager/AnnualPerformanceSection.vue?70e1","webpack://my-vue3-project/./src/components/GeneralManager/CumulativePerformanceSection.vue","webpack://my-vue3-project/./src/components/GeneralManager/CumulativePerformanceSection.vue?98aa","webpack://my-vue3-project/./src/components/GeneralManager/PerformanceDashboard.vue","webpack://my-vue3-project/./src/components/GeneralManager/PerformanceDashboard.vue?55af","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/FillCustomerForm.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/FillCustomerForm.vue?1aab","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/OrderSummaryDialog.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/OrderSummaryDialog.vue?e562","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/ListCustomerInfo.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/ListCustomerInfo.vue?6f57","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerInfo/CustomerInfo.vue","webpack://my-vue3-project/./src/components/CustomerInfo/useSalesEmployeeData.js","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/Fill_CustomerTracking.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/Fill_CustomerTracking.vue?e748","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/List_CustomerTracking.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/List_CustomerTracking.vue?48f3","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/CustomerTracking.vue","webpack://my-vue3-project/./src/components/CustomerInfo/CustomerTracking/CustomerTracking.vue?8419","webpack://my-vue3-project/./src/service/SalesService.js","webpack://my-vue3-project/./src/components/Sales/SalesQuery.vue","webpack://my-vue3-project/./src/components/Sales/SalesQuery.vue?d4e1","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/ColdCallingReport.vue","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/ColdCallingReport.vue?e6ac","webpack://my-vue3-project/./src/utils/eventBus.js","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/FillCustomerReport.vue","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/FillCustomerReport.vue?e6b2","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/ListCustomerReport.vue","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/ListCustomerReport.vue?f9ee","webpack://my-vue3-project/./src/components/DomesticSalesRepresentative/ColdCalling/CustomerReport.vue","webpack://my-vue3-project/./src/configs/caseProgressOptions.js","webpack://my-vue3-project/./src/configs/systemTypeOptions.js","webpack://my-vue3-project/./src/components/CasePage/Fill_CaseTracking.vue","webpack://my-vue3-project/./src/components/CasePage/Fill_CaseTracking.vue?33fb","webpack://my-vue3-project/./src/components/CasePage/List_CaseTracking.vue","webpack://my-vue3-project/./src/components/CasePage/List_CaseTracking.vue?a626","webpack://my-vue3-project/./src/components/CasePage/CaseTracking.vue","webpack://my-vue3-project/./src/components/CasePage/CaseTracking.vue?64ab","webpack://my-vue3-project/./src/components/AttendanceRecord/PersonalLeave.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/PersonalLeave.vue?b9b9","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/PersonalAttendanceRecord.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/PersonalAttendanceRecord.vue?afbb","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/DailyAttendanceRecord.vue","webpack://my-vue3-project/./src/components/AttendanceRecord/SalarySlip/DailyAttendanceRecord.vue?2ec6","webpack://my-vue3-project/./src/components/WorkFlow/HR/LeaveRequestForm/Layout/Layout_LeaveRequestForm.vue","webpack://my-vue3-project/./src/router/index.js","webpack://my-vue3-project/./src/locales/zh-TW.js","webpack://my-vue3-project/./src/locales/en-US.js","webpack://my-vue3-project/./src/service/LoginService.js","webpack://my-vue3-project/./src/service/FileService.js","webpack://my-vue3-project/./src/service/UpdateService.js","webpack://my-vue3-project/./src/main.js","webpack://my-vue3-project/./src/onlineHubService.js","webpack://my-vue3-project/./src/router/axiosInstance.js","webpack://my-vue3-project/./src/service/DynamicFormService.js","webpack://my-vue3-project/./src/service/EIPService.js","webpack://my-vue3-project/./src/service/PresenceService.js","webpack://my-vue3-project/./src/stores/auth.js","webpack://my-vue3-project/./src/stores/user.js","webpack://my-vue3-project/./src/components/DynamicForm/FormFillPage.vue","webpack://my-vue3-project/./src/components/DynamicForm/FormFillPage.vue?8816","webpack://my-vue3-project/webpack/bootstrap","webpack://my-vue3-project/webpack/runtime/chunk loaded","webpack://my-vue3-project/webpack/runtime/compat get default export","webpack://my-vue3-project/webpack/runtime/create fake namespace object","webpack://my-vue3-project/webpack/runtime/define property getters","webpack://my-vue3-project/webpack/runtime/ensure chunk","webpack://my-vue3-project/webpack/runtime/get javascript chunk filename","webpack://my-vue3-project/webpack/runtime/get mini-css chunk filename","webpack://my-vue3-project/webpack/runtime/global","webpack://my-vue3-project/webpack/runtime/hasOwnProperty shorthand","webpack://my-vue3-project/webpack/runtime/load script","webpack://my-vue3-project/webpack/runtime/make namespace object","webpack://my-vue3-project/webpack/runtime/publicPath","webpack://my-vue3-project/webpack/runtime/jsonp chunk loading","webpack://my-vue3-project/webpack/startup"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref, watch } from 'vue'\r\n\r\nexport const useThemeStore = defineStore('theme', () => {\r\n  // 'light'  'dark'\r\n  const currentTheme = ref('light')\r\n  \r\n  //  localStorage \r\n  const savedTheme = localStorage.getItem('app-theme')\r\n  if (savedTheme && ['light', 'dark'].includes(savedTheme)) {\r\n    currentTheme.value = savedTheme\r\n  } else {\r\n    // \r\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches\r\n    currentTheme.value = prefersDark ? 'dark' : 'light'\r\n  }\r\n\r\n  // \r\n  const toggleTheme = () => {\r\n    currentTheme.value = currentTheme.value === 'light' ? 'dark' : 'light'\r\n  }\r\n\r\n  // \r\n  const setTheme = (theme) => {\r\n    if (['light', 'dark'].includes(theme)) {\r\n      currentTheme.value = theme\r\n    }\r\n  }\r\n\r\n  //  DOM\r\n  const applyTheme = () => {\r\n    const root = document.documentElement\r\n    \r\n    if (currentTheme.value === 'dark') {\r\n      root.classList.add('dark-theme')\r\n      root.classList.remove('light-theme')\r\n    } else {\r\n      root.classList.add('light-theme')\r\n      root.classList.remove('dark-theme')\r\n    }\r\n    \r\n    //  data  CSS \r\n    root.setAttribute('data-theme', currentTheme.value)\r\n  }\r\n\r\n  // \r\n  watch(currentTheme, (newTheme) => {\r\n    applyTheme()\r\n    localStorage.setItem('app-theme', newTheme)\r\n    console.log(`: ${newTheme}`)\r\n  }, { immediate: true })\r\n\r\n  // \r\n  const isDark = () => currentTheme.value === 'dark'\r\n  const isLight = () => currentTheme.value === 'light'\r\n\r\n  return {\r\n    currentTheme,\r\n    toggleTheme,\r\n    setTheme,\r\n    applyTheme,\r\n    isDark,\r\n    isLight\r\n  }\r\n})","// src/composables/useVersionCheck.js\r\n// import { ElNotification } from 'element-plus'\r\nimport 'element-plus/es/components/notification/style/css' // \r\n\r\n/**\r\n * @param {string} currentVersion\r\n * @param {{ interval?: number }} [opts]\r\n * @returns {Function} cleanup\r\n */\r\nexport function useVersionCheck(currentVersion, opts = {}) {\r\n  const interval = typeof opts.interval === 'number' ? opts.interval : 30000\r\n  let notified = false\r\n  let timer = null\r\n  let ctrl = null\r\n\r\n  async function check(force = false) {\r\n    if (notified) return\r\n    if (!force && document.visibilityState !== 'visible') return\r\n\r\n    try {\r\n      // \r\n      ctrl?.abort()\r\n      ctrl = new AbortController()\r\n\r\n      const res = await fetch('/version.json', {\r\n        cache: 'no-store',\r\n        signal: ctrl.signal\r\n      })\r\n      if (!res.ok) return\r\n\r\n      const data = await res.json()\r\n      const next = data && data.version\r\n      if (!next) return\r\n      console.log(\"currentVersion:\",currentVersion,\"notified:\",notified);\r\n      // if (next !== currentVersion && !notified) {\r\n      //   notified = true\r\n      //   ElNotification({\r\n      //     title: '',\r\n      //     message: '',\r\n      //     duration: 0,\r\n      //     onClick: () => {\r\n      //       if ('serviceWorker' in navigator) {\r\n      //         navigator.serviceWorker.getRegistration()\r\n      //           .then(reg => {\r\n      //             if (reg && reg.waiting) {\r\n      //               reg.waiting.postMessage({ type: 'SKIP_WAITING' })\r\n      //             }\r\n      //           })\r\n      //           .finally(() => window.location.reload())\r\n      //       } else {\r\n      //         window.location.reload()\r\n      //       }\r\n      //     }\r\n      //   })\r\n      // }\r\n    } catch {\r\n      /*  /  abort */\r\n    }\r\n  }\r\n\r\n  const onFocus = () => check(true)\r\n  const onVisible = () => document.visibilityState === 'visible' && check(true)\r\n\r\n  timer = setInterval(check, interval)\r\n  check(true) // \r\n  window.addEventListener('focus', onFocus)\r\n  document.addEventListener('visibilitychange', onVisible)\r\n\r\n  return () => {\r\n    if (timer) clearInterval(timer)\r\n    window.removeEventListener('focus', onFocus)\r\n    document.removeEventListener('visibilitychange', onVisible)\r\n    ctrl?.abort()\r\n  }\r\n}\r\n","<template>\r\n  <Toast  :pt=\"{\r\n                closeButton: {\r\n                    autofocus: false\r\n                }\r\n            }\"/>  \r\n  <router-view/>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted,onUnmounted } from 'vue';\r\nimport { useAuthStore } from './stores/auth';\r\nimport { useThemeStore } from './stores/theme';\r\nimport VueCookies from 'vue-cookies';\r\nimport { useVersionCheck } from '@/composables/useVersionCheck.js'\r\n\r\nconst appVersion = process.env.VUE_APP_VERSION || 'dev'\r\nuseVersionCheck(appVersion, { interval: 30000 })\r\n\r\nconst stopVersionCheck = useVersionCheck(appVersion, { interval: 30000 })\r\nconst authStore = useAuthStore();\r\nconst themeStore = useThemeStore();\r\n\r\nonMounted(async () => {\r\n  // \r\n  themeStore.applyTheme();\r\n  //  Cookie  userId  key\r\n  const userId = VueCookies.get('userId');\r\n  if (userId && !authStore.isLogin) {\r\n    try {\r\n      //  API authStore  autoLogin \r\n      //  Cookie \r\n      await authStore.autoLogin(); // autoLogin  store \r\n    } catch (error) {\r\n      console.error(':', error);\r\n      // \r\n    }\r\n  }\r\n});\r\n\r\nonUnmounted(() => stopVersionCheck?.())\r\n</script>\r\n\r\n<style> \r\n/*  */\r\n.p-dropdown-panel {\r\n  z-index: 99999 !important;\r\n}\r\n\r\n/*  */\r\nhtml {\r\n  overflow-y: scroll; /*  */\r\n  scrollbar-gutter: stable; /*  */\r\n}\r\n\r\nbody {\r\n  /*  body  */\r\n  min-height: 100vh;\r\n}\r\n\r\n/*  teleport  body  */\r\nbody > .modern-submenu {\r\n  position: fixed !important;\r\n  contain: layout style paint;\r\n  will-change: transform, opacity;\r\n}\r\n\r\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1d8b76f4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import router from '@/router';\r\n\r\nexport function createHomeMenuItems() {\r\n  return [\r\n    { label: '', icon: 'pi pi-chart-bar', value: 'Board' ,requiredRoles: ['RO9999'],items:\r\n      [\r\n        {\r\n          label: \"\",\r\n          icon: \"pi pi-file\",\r\n          value: \"PerformanceInfo\",\r\n          items:\r\n          [\r\n            {\r\n              label: \"\",\r\n              icon: \"pi pi-file\",\r\n              value: \"PerformanceDashboard\",\r\n              command: () => router.push({ name: 'PerformanceDashboard' })\r\n            },\r\n          ]\r\n        },\r\n      ]\r\n    },\r\n    { label: '', icon: 'pi pi-chart-bar', value: 'EmployeeManagement' ,items:\r\n      [\r\n\r\n      ]\r\n    },\r\n    {\r\n      label: \"\",\r\n      icon: \"pi pi-file\",\r\n      value: \"Workflow\",\r\n      items: [\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-megaphone\",\r\n        //   value: \"Announcement\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-file\",\r\n        //       value: \"AnnouncementRelease\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-file\",\r\n        //       value: \"AnnouncementChange\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        {\r\n          label: \"\",\r\n          icon: \"pi pi-folder\",\r\n          value: \"HumanResources\",\r\n          items: [\r\n            {\r\n              label: \"\",\r\n              icon: \"pi pi-file\",\r\n              value: \"CorrectionForm\",\r\n              command: () => router.push({ name: 'CorrectionForm' })\r\n            },\r\n            // {\r\n            //   label: \"\",\r\n            //   icon: \"pi pi-file\",\r\n            //   value: \"EmployeeOut\"\r\n            // },\r\n            // {\r\n            //   label: \"\",\r\n            //   icon: \"pi pi-file\",\r\n            //   value: \"EmployeeAdd\"\r\n            // },\r\n            // {\r\n            //   label: \"\",\r\n            //   icon: \"pi pi-file\",\r\n            //   value: \"EmployeeSalaryAdjustment\"\r\n            // },\r\n            {\r\n              label: \"\",\r\n              icon: \"pi pi-file\",\r\n              value: \"OvertimeRequestForm\",\r\n              command: () => router.push({ name: 'OvertimeRequestForm' })\r\n            },\r\n            {\r\n              label: \"\",\r\n              icon: \"pi pi-file\",\r\n              value: \"LeaveRequestForm\",\r\n              command: () => router.push({ name: 'LeaveRequestForm' })\r\n            },\r\n            {\r\n              label: \"\",\r\n              icon: \"pi pi-file\",\r\n              value: \"LeaveCancellationForm\",\r\n              command: () => router.push({ name: 'LeaveCancellationForm' })\r\n            }\r\n          ]\r\n        },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-book\",\r\n        //   value: \"LoanManagement\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-desktop\",\r\n        //       value: \"EquipmentLoan\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-wrench\",\r\n        //   value: \"CustomerService\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-support\",\r\n        //       value: \"SupportTicket\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-trash\",\r\n        //       value: \"DefectiveScrap\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-chart-bar\",\r\n        //       value: \"ServiceSatisfactionSurvey\"\r\n        //     },\r\n        //     {\r\n        //       label: \"()\",\r\n        //       icon: \"pi pi-tools\",\r\n        //       value: \"CustomerEquipmentRepair\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-exclamation-triangle\",\r\n        //       value: \"RepairRequest\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-cog\",\r\n        //   value: \"ProductDevelopment\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"BOM\",\r\n        //       icon: \"pi pi-table\",\r\n        //       value: \"BOMChange\"\r\n        //     },\r\n        //     {\r\n        //       label: \"ECN\",\r\n        //       icon: \"pi pi-pencil\",\r\n        //       value: \"ECNNotice\"\r\n        //     },\r\n        //     {\r\n        //       label: \"ECR\",\r\n        //       icon: \"pi pi-file-edit\",\r\n        //       value: \"ECRRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"IC\",\r\n        //       icon: \"pi pi-id-card\",\r\n        //       value: \"ICCardRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"SCK\",\r\n        //       icon: \"pi pi-inbox\",\r\n        //       value: \"SCKRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-hashtag\",\r\n        //       value: \"SerialNumberRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-search\",\r\n        //       value: \"CustomerSpecReview\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-stop\",\r\n        //       value: \"ProductDiscontinue\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-folder-open\",\r\n        //       value: \"ProductDataRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-check\",\r\n        //       value: \"SubstituteMaterialApproval\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-box\",\r\n        //       value: \"NewProductTrial\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-briefcase\",\r\n        //   value: \"Administration\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-dollar\",\r\n        //       value: \"ExpenseReimbursement\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-print\",\r\n        //       value: \"PrintingRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-user\",\r\n        //       value: \"BusinessCardRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-trash\",\r\n        //       value: \"EquipmentScrap\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-tools\",\r\n        //       value: \"EquipmentRepair\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-briefcase\",\r\n        //   value: \"BusinessEngineering\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-shopping-cart\",\r\n        //       value: \"PurchaseOrder\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-sitemap\",\r\n        //       value: \"ProductProtocolRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-clipboard\",\r\n        //       value: \"TestReportWarranty\"\r\n        //     },\r\n        //     {\r\n        //       label: \"2.5\",\r\n        //       icon: \"pi pi-cloud\",\r\n        //       value: \"CloudContractChange\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-dollar\",\r\n        //   value: \"Account\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-money-bill\",\r\n        //       value: \"AccountPaymentRequest\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-users\",\r\n        //   value: \"EmployeeZone\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-comments\",\r\n        //       value: \"EmployeeFeedback\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-shield\",\r\n        //   value: \"SafetyOffice\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-exclamation-triangle\",\r\n        //       value: \"IncidentReport\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-file\",\r\n        //       value: \"MinorIncidentRecord\"\r\n        //     },\r\n        //     {\r\n        //       label: \"\",\r\n        //       icon: \"pi pi-flag\",\r\n        //       value: \"WorkInjuryReport\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-desktop\",\r\n        //   value: \"IT\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"VPN\",\r\n        //       icon: \"pi pi-key\",\r\n        //       value: \"VPNRequest\"\r\n        //     },\r\n        //     {\r\n        //       label: \"&\",\r\n        //       icon: \"pi pi-user-plus\",\r\n        //       value: \"SystemAccountChange\"\r\n        //     }\r\n        //   ]\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-credit-card\",\r\n        //   value: \"CardForms\"\r\n        // },\r\n        // {\r\n        //   label: \"\",\r\n        //   icon: \"pi pi-envelope\",\r\n        //   value: \"E-Documents\",\r\n        //   items: [\r\n        //     {\r\n        //       label: \"()\",\r\n        //       icon: \"pi pi-file\",\r\n        //       value: \"E-DocumentOrder\"\r\n        //     },\r\n        //     {\r\n        //       label: \"()\",\r\n        //       icon: \"pi pi-file\",\r\n        //       value: \"E-DocumentLetter\"\r\n        //     },\r\n        //     {\r\n        //       label: \"()\",\r\n        //       icon: \"pi pi-calendar\",\r\n        //       value: \"E-DocumentMeetingNotice\"\r\n        //     }\r\n        //   ]\r\n        // }\r\n      ]\r\n    },\r\n    // { label: '', icon: 'pi pi-chart-bar', value: 'DocumentGuidance' ,items:\r\n    //   [\r\n\r\n    //   ]\r\n    // },\r\n    // { label: '', icon: 'pi pi-chart-bar', value: 'ChingHangInformation' ,items:\r\n    //   [\r\n\r\n    //   ]\r\n    // },\r\n\r\n    { label: '', icon: 'pi pi-chart-bar', value: 'EventsAndStatistics' ,items:\r\n    [\r\n      {label: '', icon: 'pi pi-money-bill', value: 'Lunch' },\r\n      {label: 'MAC',icon: 'pi pi-desktop',value: 'MACForm',\r\n      command: () => router.push({ name: 'MacForm' })},\r\n      {label: '',icon: 'pi pi-desktop',value: 'ComputerInventory',\r\n        command: () => router.push({ name: 'ComputerInventory' })},\r\n    ]},\r\n    { \r\n        label: '', icon: 'pi pi-briefcase', value: 'Administration', items:[\r\n        { label: '', icon: 'pi pi-wrench', value: 'System' },\r\n\r\n      ],\r\n    },\r\n    { label: '', icon: 'pi pi-cog', value: 'RD', items:[\r\n      { label: '', icon: 'pi pi-pencil', value: 'ProductPlanning'},\r\n      { label: '', icon: 'pi pi-desktop', value: 'Hardware' },\r\n      { label: '', icon: 'pi pi-code', value: 'Software'},\r\n      { label: '', icon: 'pi pi-heart', value: 'Biotechnology'},\r\n      { label: '', icon: 'pi pi-shield', value: 'QualityAssurance'},\r\n    ] },\r\n    { label: '', icon: 'pi pi-wrench', value: 'Manufacturing', items:[\r\n      { label: '', icon: 'pi pi-sync', value: 'ProductionControl'},\r\n      { label: '', icon: 'pi pi-shopping-cart', value: 'Purchasing' },\r\n      { label: '', icon: 'pi pi-users', value: 'Outsourcing'},\r\n      { label: '', icon: 'pi pi-box', value: 'Warehouse'},\r\n      { label: '', icon: 'pi pi-sliders-h', value: 'ProductionLine'},\r\n      { label: '', icon: 'pi pi-wrench', value: 'Maintenance'},\r\n      { label: '', icon: 'pi pi-check-square', value: 'QualityControl'},\r\n    ] },\r\n    { label: '', icon: 'pi pi-map', value: 'DomesticBusiness', items:[\r\n      { label: '', icon: 'pi pi-globe', value: 'AllBusinessArea', items:[\r\n        { label: '', icon: 'pi pi-chart-line', value: 'Operations'},\r\n        { label: '', icon: 'pi pi-cog', value: 'Engineering'},\r\n        { label: '', icon: 'pi pi-box', value: 'ProductApplication'},\r\n        { label: '', icon: 'pi pi-code', value: 'EngineeringSoftware'},\r\n        { label: '', icon: 'pi pi-comments', value: 'CustomerService'},\r\n      ]},\r\n      { label: '', icon: 'pi pi-map-marker', value: 'RegionalBusiness',items:[\r\n        { label: '', icon: 'pi pi-money-bill', value: 'Sales'},\r\n        { label: '', icon: 'pi pi-cog', value: 'Engineering'},\r\n      ] },\r\n      { label: '', icon: 'pi pi-map-marker', value: 'CustomerCategory',items:[\r\n        { label: '', icon: 'pi pi-map-marker', value: 'CustomerInfo', command: () =>{ \r\n          router.push({ name: 'CustomerInfo' });\r\n        }},\r\n        // { label: '', icon: 'pi pi-map-marker', value: 'CustomerTracking', command: () =>{ \r\n        //   router.push({ name: 'CustomerTracking' });\r\n        // }},\r\n      ]},\r\n      { label: '', icon: 'pi pi-map-marker', value: 'CaseCategory',items:[\r\n        { label: '', icon: 'pi pi-map-marker', value: 'CaseTracking', command: () =>{ \r\n          router.push({ name: 'CaseTracking' });\r\n        }},\r\n      ]},\r\n      { label: '', icon: 'pi pi-map-marker', value: 'PerformanceManagement',items:[\r\n        { label: '', icon: 'pi pi-map-marker', value: 'PerformanceDashboard', command: () =>{ \r\n          router.push({ name: 'PerformanceDashboard' });  \r\n        }},\r\n        { label: '', icon: 'pi pi-map-marker', value: 'PerformanceReport', command: () =>{ \r\n          router.push({ name: 'PerformanceReport' });  \r\n        }},\r\n        { label: '', icon: 'pi pi-map-marker', value: 'PersonalGoals', command: () =>{ \r\n          router.push({ name: 'PersonalGoals' });  \r\n        }},\r\n      ]},\r\n      { label: '', icon: 'pi pi-map-marker', value: 'ColdCallingManagement',items:[\r\n        { label: '', icon: 'pi pi-map-marker', value: 'ColdCallingReport', command: () =>{ \r\n          router.push({ name: 'ColdCallingReport' }); \r\n        }},\r\n        { label: '', icon: 'pi pi-map-marker', value: 'CustomerReport', command: () =>{ \r\n          router.push({ name: 'CustomerReport' }); \r\n        }},\r\n      ]},\r\n      \r\n    ] },\r\n    { label: '', icon: 'pi pi-chart-bar', value: 'ChingHangInformation' ,items:\r\n      [\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-shopping-cart', \r\n          value: 'SalesInfo',\r\n          items: [\r\n            { \r\n              label: '', \r\n              icon: 'pi pi-search', \r\n              value: 'SalesQuery',\r\n              command: () => router.push('/SalesQuery')\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    { label: '', icon: 'pi pi-dollar',  requiredRoles: ['RO0013'], value: 'Finance', items:[\r\n      { label: '', icon: 'pi pi-users', value: 'HR'},\r\n      { label: '', icon: 'pi pi-inbox', value: 'GeneralAffairs' },\r\n      { label: '', icon: 'pi pi-calculator', value: 'Accounting', items:[\r\n        {\r\n          label:'',\r\n          icon:'pi pi-calculator', \r\n          value:'Salary', \r\n            command: () =>{ \r\n              // MenubarClick({ label:'', value:'SalaryStructure'})\r\n              router.push({ name: 'SalaryStructure' });\r\n            }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-calendar', \r\n          value: 'AttendanceRecord', \r\n          command: () => {\r\n            // MenubarClick({ label: '', value: 'SalarySlip' });\r\n            router.push({ name: 'SalarySlip' });\r\n          }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-calendar', \r\n          value: 'DailyAttendanceRecord', \r\n          command: () => {\r\n            router.push({ name: 'DailyAttendanceRecord' });\r\n          }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-chart-bar', \r\n          value: 'MealAllowanceSummary', \r\n          command: () => {\r\n            router.push({ name: 'MealAllowanceSummary' });\r\n          }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-calendar-times', \r\n          value: 'AnnualLeaveSummary', \r\n          command: () => {\r\n            router.push({ name: 'AnnualLeaveSummary' });\r\n          }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-clock', \r\n          value: 'OvertimePageInfo', \r\n          command: () => {\r\n            router.push({ name: 'OvertimePageInfo' });\r\n          }\r\n        },\r\n        { \r\n          label: '', \r\n          icon: 'pi pi-calendar-times', \r\n          value: 'LeavePageInfo', \r\n          command: () => {\r\n            router.push({ name: 'LeavePageInfo' });\r\n          }\r\n        },\r\n\r\n      ] \r\n      },\r\n      { label: '', icon: 'pi pi-wallet', value: 'Finance'},\r\n    ] },\r\n    { label: '', icon: 'pi pi-shield', value: 'OccupationalSafety', items:[\r\n      { label: '', icon: 'pi pi-map-marker', value: 'NorthArea'},\r\n      { label: '', icon: 'pi pi-map-marker', value: 'CentralArea' },\r\n      { label: '', icon: 'pi pi-map-marker', value: 'SouthArea'},\r\n    ] },\r\n    { \r\n      label: '', icon: 'pi pi-briefcase', value: 'Others', items:[\r\n    ],\r\n    },\r\n    { label: '', icon: 'pi pi-map', value: 'SystemManagement', requiredRoles: ['RO0000'], items:[\r\n      { \r\n        label: '', icon: 'pi pi-globe', value: 'MACForm' ,items:[\r\n        { label: 'MAC', icon: 'pi pi-globe', value: 'MACForm' ,command: () => router.push({ name: 'sys_MacForm', params: { sys: 'true' } })},\r\n        { label: '', icon: 'pi pi-map-marker', value: 'ComputerInventory',command: () => router.push({ name: 'sys_ComputerInventory', params: { sys: 'true' }  })},\r\n        { label: '/', icon: 'pi pi-server', value: 'DeviceHostManagement', command: () => router.push({ name: 'DeviceHostManagement', params: { sys: 'true' } })},\r\n        ],\r\n      },\r\n      { \r\n        label: '', icon: 'pi pi-map', value: 'DAE_Management', requiredRoles: ['RO0000'], items:[\r\n            { label: '', icon: '', value: 'sys_DAE_Data_Management',command: () => router.push({ name: 'sys_DAE_Data_Management', params: { sys: 'true' }  })},\r\n        ],\r\n      },  \r\n      { \r\n        label: '', icon: 'pi pi-map', value: 'WF_Management', requiredRoles: ['RO0000'], items:[\r\n        { label: '', icon: '', value: 'sys_WF_Management',command: () => router.push({ name: 'sys_WF_Management', params: { sys: 'true' }  })},\r\n        ],\r\n      },\r\n      { \r\n        label: '', icon: 'pi pi-file-edit', value: 'FormTemplate_Management', requiredRoles: ['RO0000'], items:[\r\n        { label: '', icon: 'pi pi-file-edit', value: 'FormTemplateManagement',command: () => router.push({ name: 'FormTemplateManagement', params: { sys: 'true' }  })},\r\n        ],\r\n      },\r\n\r\n    ] },\r\n  ]\r\n}","<template>\r\n  <Dialog\r\n    v-if=\"localVisible\"\r\n    v-model:visible=\"localVisible\"\r\n    pt:root:class=\"!border-0 !bg-transparent\" \r\n    pt:mask:class=\"backdrop-blur-sm\"\r\n    modal\r\n  >\r\n    <template #container=\"{ closeCallback }\">\r\n      <div class=\"flex flex-column px-5 py-5 gap-4\" style=\"border-radius: 12px; background-image: radial-gradient(circle at left top, var(--p-sky-800), var(--p-teal-300), var(--p-cyan-900))\">\r\n        <div class=\"inline-flex flex-column gap-2\">\r\n          <svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" class=\"block mx-auto\">\r\n            <image href=\"@/assets/logo/DAE.png\" x=\"0\" y=\"0\" width=\"120\" height=\"120\" />\r\n          </svg>\r\n          <label for=\"userId\" class=\"text-primary-50 font-semibold\"></label>\r\n          <InputText \r\n            id=\"userId\" \r\n            v-model=\"userId\" \r\n            class=\"bg-white-alpha-20 border-none p-3 text-primary-50 w-20rem\"\r\n            @keyup.enter=\"login_JWT(closeCallback)\"\r\n            v-focus\r\n          ></InputText>\r\n        </div>\r\n        <div class=\"inline-flex flex-column gap-2\">\r\n          <label for=\"password\" class=\"text-primary-50 font-semibold\"></label>\r\n          <InputText \r\n            id=\"password\" \r\n            v-model=\"password\" \r\n            class=\"bg-white-alpha-20 border-none p-3 text-primary-50 w-20rem\"\r\n            type=\"password\"\r\n            @keyup.enter=\"login_JWT(closeCallback)\"\r\n          ></InputText>\r\n        </div>\r\n        <label for=\"userId\" class=\"text-primary-50 font-semibold\">(Enter)</label>\r\n        <div class=\"flex align-items-center gap-3\">\r\n          <Button label=\"\" @click=\"login_JWT(closeCallback)\" text class=\"p-3 w-full text-primary-50 border-1 border-white-alpha-30 hover:bg-white-alpha-10\"></Button>\r\n          <Button label=\"\" @click=\"closeCallback\" text class=\"p-3 w-full text-primary-50 border-1 border-white-alpha-30 hover:bg-white-alpha-10\"></Button>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </Dialog>\r\n  <Toast />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, nextTick, onBeforeUnmount, watch, computed, defineProps, defineEmits } from \"vue\";\r\nimport Dialog from 'primevue/dialog';\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport Toast from 'primevue/toast';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport EIPService from '../service/EIPService.js';\r\nimport { useUserStore } from '../stores/user.js';\r\nimport VueCookies from 'vue-cookies';\r\n\r\n//  prop  visible  v-model \r\nconst props = defineProps({\r\n  visible: { type: Boolean, default: false }\r\n});\r\nconst emit = defineEmits([\"update:visible\", \"login-success\"]);\r\nconst localVisible = computed({\r\n  get: () => props.visible,\r\n  set: (val) => emit(\"update:visible\", val)\r\n});\r\n\r\nconst userStore = useUserStore();\r\nconst userId = ref(\"\");\r\nconst password = ref(\"\");\r\nconst userName = ref(\"\");\r\nconst departmentId = ref(\"\");\r\nconst departmentName = ref(\"\");\r\nconst dpt_title_Id = ref(\"\");\r\nconst login_failed = ref(false);\r\nconst toast = useToast();\r\nlet refreshIntervalId;\r\n\r\n//  userStore  userId \r\nwatch(\r\n  () => userStore.userId,\r\n  (newUserId) => {\r\n    if (!newUserId) {\r\n      userId.value = null;\r\n    }\r\n  }\r\n);\r\n\r\n//  Cookie \r\nconst getLoginCookie = () => {\r\n  const cookieUserId = VueCookies.get('userId');\r\n  const cookieUserName = VueCookies.get('userName');\r\n  const cookieDeptId = VueCookies.get('departmentId');\r\n  const cookieDeptName = VueCookies.get('departmentName');\r\n  const cookieDptTitleId = VueCookies.get('dpt_title_Id');\r\n  \r\n  if (cookieUserId) {\r\n    userId.value = cookieUserId;\r\n    userStore.setUserInfo(\r\n      cookieUserName,\r\n      cookieDeptId,\r\n      cookieDeptName,\r\n      cookieUserId,\r\n      cookieDptTitleId\r\n    );\r\n  }\r\n  userName.value = VueCookies.get('userName') || userName.value;\r\n  departmentId.value = VueCookies.get('departmentId') || departmentId.value;\r\n  departmentName.value = VueCookies.get('departmentName') || departmentName.value;\r\n  dpt_title_Id.value = VueCookies.get('dpt_title_Id') || dpt_title_Id.value;\r\n  userStore.checkCookies();\r\n  // console.log(\"getLoginCookie:\", userId.value, userName.value, departmentId.value, departmentName.value, dpt_title_Id.value);\r\n};\r\n\r\nconst login_JWT = async (closeCallback) => {\r\n  try {\r\n    const userCredentials = {\r\n      userId: userId.value,\r\n      userPwd: password.value\r\n    };\r\n    console.log(\"userCredentials:\", userCredentials);\r\n    const loginMsg = await EIPService.login_JWT(userCredentials);\r\n    await nextTick();\r\n    userName.value = userStore.userName;\r\n    dpt_title_Id.value = userStore.userDeptName + ' ' + userStore.dpt_title_Id;\r\n    userStore.checkCookies();\r\n    if (loginMsg === 'Login Success') {\r\n      //  cookie \r\n      const cookieUserName = VueCookies.get('userName');\r\n      const cookieDeptId = VueCookies.get('departmentId');\r\n      const cookieDeptName = VueCookies.get('departmentName');\r\n      const cookieUserId = VueCookies.get('userId');\r\n      const cookieDptTitleId = VueCookies.get('dpt_title_Id');\r\n      \r\n      //  store  ( store)\r\n      userStore.setUserInfo(cookieUserName, cookieDeptId, cookieDeptName, cookieUserId, cookieDptTitleId);\r\n      \r\n      toast.add({\r\n        severity: 'success',\r\n        summary: 'Success',\r\n        detail: '!',\r\n        life: 3000\r\n      });\r\n      closeCallback();\r\n      emit(\"login-success\");\r\n    } else {\r\n      console.error('Error logging');\r\n      login_failed.value = true;\r\n      toast.add({\r\n        severity: 'error',\r\n        summary: 'Error',\r\n        detail: '!',\r\n        life: 3000\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error('Error logging in:', error);\r\n    login_failed.value = true;\r\n    toast.add({\r\n      severity: 'error',\r\n      summary: 'Error',\r\n      detail: '!',\r\n      life: 3000\r\n    });\r\n  }\r\n};\r\n\r\nconst stopTokenRefresh = () => {\r\n  if (refreshIntervalId) {\r\n    clearInterval(refreshIntervalId);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  getLoginCookie();\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  stopTokenRefresh();\r\n});\r\n</script>\r\n","import script from \"./login-dialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./login-dialog.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"language-selecter\" style=\"display: flex; align-items: center;\">\r\n      <div>\r\n        <el-select\r\n          v-model=\"currentLocale\"\r\n          placeholder=\"Select a Language\"\r\n          popper-class=\"custom-select-popper\"\r\n          style=\"width: 100px\"\r\n          :teleported=\"false\"\r\n        >\r\n          <el-option\r\n            v-for=\"option in languageOptions\"\r\n            :key=\"option.code\"\r\n            :label=\"option.label\"\r\n            :value=\"option.code\"\r\n          >\r\n            <!--  -->\r\n            <template #default>\r\n              <div class=\"flex items-center\">\r\n                <img :src=\"option.img\" alt=\"\" style=\"width:20px; margin-right:5px;\" />\r\n                <span>{{ option.label }}</span>\r\n              </div>\r\n            </template>\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, watch } from 'vue';\r\n  import { useI18n } from 'vue-i18n';\r\n  \r\n  //  Element Plus  el-select / el-option\r\n  \r\n  const { locale } = useI18n();\r\n  const currentLocale = ref(locale.value);\r\n  \r\n  onMounted(() => {\r\n    const savedLocale = localStorage.getItem('locale');\r\n    if (savedLocale) {\r\n      locale.value = savedLocale;\r\n      currentLocale.value = savedLocale;\r\n    }\r\n  });\r\n  \r\n  const languageOptions = [\r\n    {\r\n      code: 'zh-TW',\r\n      label: '',\r\n      img: 'https://primefaces.org/cdn/primevue/images/flag/flag_tw.png'\r\n    },\r\n    {\r\n      code: 'en-US',\r\n      label: 'English',\r\n      img: 'https://primefaces.org/cdn/primevue/images/flag/flag_us.png'\r\n    }\r\n  ];\r\n  \r\n  watch(currentLocale, (newLocale) => {\r\n    locale.value = newLocale;\r\n    console.log('locale changed:', newLocale)\r\n    localStorage.setItem('locale', newLocale);\r\n  });\r\n  </script>\r\n  ","import script from \"./language-selecter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./language-selecter.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","// utils/loadGoogleMaps.js\r\n// import EIPService from '@/service/EIPService'; //  EIPService\r\nimport { ElMessage } from 'element-plus'; //  ElMessage\r\n\r\nexport function loadGoogleMaps(key) {\r\n  if (window.google && window.google.maps) {\r\n    return Promise.resolve(window.google.maps);\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    const script = document.createElement('script');\r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${key}&libraries=places`;\r\n    script.async = true;\r\n    script.onload  = () => resolve(window.google.maps);\r\n    script.onerror = () => reject(new Error('Google Maps '));\r\n    document.head.appendChild(script);\r\n  });\r\n}\r\n\r\nexport async function punchWithGeolocation(type, userId, coords) {\r\n  try {\r\n    const payload = {\r\n      type,\r\n      latitude: coords.latitude,\r\n      longitude: coords.longitude,\r\n      address: '',\r\n      timestamp: new Date(Date.now() + 8 * 3600 * 1000).toISOString(),\r\n      timeZoneId: 'Asia/Taipei',\r\n      timeZoneName: 'Taiwan Standard Time',\r\n      dstOffset: 0,\r\n      rawOffset: 8 * 3600\r\n    };\r\n    \r\n    console.log(\"punch payload:\", payload);\r\n\r\n    // // const response = await EIPService.punch(userId, payload);\r\n    // if (response.status !== 200) {\r\n    //   const errBody = await response.text();\r\n    //   throw new Error(` (status ${response.status}): ${errBody}`);\r\n    // }\r\n\r\n    // console.log(response.data);\r\n    ElMessage.success(` `);\r\n  } catch (err) {\r\n    console.error('Punch Error:', err);\r\n    ElMessage.error(err.message || '');\r\n  }\r\n}\r\n","<template>\r\n  <div v-if=\"hasSysPermission\" class=\"punch-clock-container\">\r\n    <div class=\"punch-buttons\">\r\n      <el-button \r\n        @click=\"punchByGMA('In')\" \r\n        type=\"success\" \r\n        :disabled=\"loading\" \r\n        :loading=\"loading && currentAction === 'In'\"\r\n        size=\"default\"\r\n        class=\"punch-button punch-in\"\r\n      >\r\n        <div class=\"button-content\">\r\n          <el-icon class=\"button-icon\"><CaretTop /></el-icon>\r\n          <span class=\"button-text\"></span>\r\n          <span class=\"button-time\">{{ currentTime }}</span>\r\n        </div>\r\n      </el-button>\r\n      \r\n      <el-button \r\n        @click=\"punchByGMA('Out')\" \r\n        type=\"warning\" \r\n        :disabled=\"loading\" \r\n        :loading=\"loading && currentAction === 'Out'\"\r\n        size=\"default\"\r\n        class=\"punch-button punch-out\"\r\n      >\r\n        <div class=\"button-content\">\r\n          <el-icon class=\"button-icon\"><CaretBottom /></el-icon>\r\n          <span class=\"button-text\"></span>\r\n          <span class=\"button-time\">{{ currentTime }}</span>\r\n        </div>\r\n      </el-button>\r\n    </div>\r\n    \r\n    <div class=\"punch-status\" v-if=\"lastPunchInfo\">\r\n      <p class=\"status-text\">{{ lastPunchInfo }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\r\nimport { useUserStore } from \"../../stores/user\";\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport { CaretTop,  CaretBottom } from '@element-plus/icons-vue';\r\nimport { loadGoogleMaps, punchWithGeolocation } from '@/utils/loadGoogleMaps'; //  loadGoogleMaps  punchWithGeolocation\r\nimport {  ElMessage } from 'element-plus'\r\n\r\nconst GOOGLE_MAPS_API_KEY = process.env.VUE_APP_GOOGLE_MAPS_KEY; //  .env  Google Maps API Key\r\n\r\nconst loading = ref(false);\r\nconst currentAction = ref('');\r\nconst currentTime = ref('');\r\nconst lastPunchInfo = ref('');\r\nconst authStore = useAuthStore();\r\nconst userStore = useUserStore();\r\n\r\n// \r\nconst updateTime = () => {\r\n  const now = new Date();\r\n  currentTime.value = now.toLocaleTimeString('zh-TW', { \r\n    hour: '2-digit', \r\n    minute: '2-digit',\r\n    second: '2-digit'\r\n  });\r\n};\r\n\r\n// \r\nlet timeInterval = null;\r\n\r\nonMounted(() => {\r\n  updateTime();\r\n  timeInterval = setInterval(updateTime, 1000);\r\n});\r\n\r\nonUnmounted(() => {\r\n  if (timeInterval) {\r\n    clearInterval(timeInterval);\r\n  }\r\n});\r\n\r\nconst hasSysPermission = computed(() => {\r\n  return authStore.user.permissions?.includes('sys') || false;\r\n});\r\n\r\nasync function punchByGMA(type) {\r\n  loading.value = true;\r\n  currentAction.value = type;\r\n  try {\r\n    const googleMaps = await loadGoogleMaps(GOOGLE_MAPS_API_KEY);\r\n    const geocoder = new googleMaps.Geocoder();\r\n\r\n    const coords = await new Promise((resolve, reject) => {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          resolve(position.coords);\r\n        },\r\n        (error) => {\r\n          reject(error);\r\n        },\r\n        {\r\n          enableHighAccuracy: true, //  GPS\r\n          timeout: 10000,           //  10 \r\n          maximumAge: 0             // \r\n        }\r\n      );\r\n    });\r\n\r\n    //  Geocoding API  ()\r\n    let address = '';\r\n    try {\r\n      const latlng = { lat: coords.latitude, lng: coords.longitude };\r\n      const geocodeResponse = await geocoder.geocode({ location: latlng });\r\n      if (geocodeResponse && geocodeResponse.results && geocodeResponse.results[0]) {\r\n        address = geocodeResponse.results[0].formatted_address;\r\n      } else {\r\n        address = ' ()';\r\n      }\r\n    } catch (geocodeError) {\r\n      console.warn('Geocoding failed:', geocodeError);\r\n      address = ' (API )';\r\n    }\r\n\r\n    ElMessage.success(`${address}`); // \r\n    await punchWithGeolocation(type, userStore.userId, {\r\n      latitude: coords.latitude,\r\n      longitude: coords.longitude,\r\n      address: address\r\n    });\r\n\r\n    // \r\n    const now = new Date();\r\n    const timeString = now.toLocaleString('zh-TW');\r\n    lastPunchInfo.value = `${type === 'In' ? '' : ''} - ${timeString}`;\r\n    \r\n    ElMessage.success(`${type === 'In' ? '' : ''}`);\r\n\r\n  } catch (err) {\r\n    console.error('Punch Error:', err);\r\n    ElMessage.error(err.message || '');\r\n  } finally {\r\n    loading.value = false;\r\n    currentAction.value = '';\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.punch-clock-container {\r\n  width: 100%;\r\n  padding: 16px;\r\n  background: var(--background-color);\r\n  border-radius: 12px;\r\n  border: 1px solid var(--border-color);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.punch-buttons {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.punch-button {\r\n  width: 50%;\r\n  height: 80px !important;\r\n  border-radius: 16px !important;\r\n  font-size: 16px !important;\r\n  font-weight: 600 !important;\r\n  border: none !important;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;\r\n  transition: all 0.3s ease !important;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.punch-button:hover {\r\n  transform: translateY(-2px) !important;\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25) !important;\r\n}\r\n\r\n.punch-button:active {\r\n  transform: translateY(0) !important;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;\r\n}\r\n\r\n.punch-in {\r\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\r\n  border: none !important;\r\n}\r\n\r\n.punch-in:hover {\r\n  background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;\r\n}\r\n\r\n.punch-out {\r\n  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%) !important;\r\n  border: none !important;\r\n}\r\n\r\n.punch-out:hover {\r\n  background: linear-gradient(135deg, #d97706 0%, #b45309 100%) !important;\r\n}\r\n\r\n.button-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4px;\r\n  color: white;\r\n  width: 100%;\r\n}\r\n\r\n.button-icon {\r\n  font-size: 24px !important;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.button-text {\r\n  font-size: 18px;\r\n  font-weight: 700;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.button-time {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  opacity: 0.9;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.punch-status {\r\n  text-align: center;\r\n  padding: 12px;\r\n  background: var(--background-secondary);\r\n  border-radius: 8px;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.status-text {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  color: var(--text-secondary);\r\n  font-weight: 500;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .punch-clock-container {\r\n    padding: 20px;\r\n    margin: 0;\r\n  }\r\n  \r\n  .punch-button {\r\n    height: 90px !important;\r\n    font-size: 18px !important;\r\n  }\r\n  \r\n  .button-text {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .button-time {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .button-icon {\r\n    font-size: 28px !important;\r\n  }\r\n  \r\n  .punch-buttons {\r\n    gap: 20px;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 480px) {\r\n  .punch-button {\r\n    height: 100px !important;\r\n  }\r\n  \r\n  .button-text {\r\n    font-size: 22px;\r\n  }\r\n  \r\n  .button-time {\r\n    font-size: 18px;\r\n  }\r\n  \r\n  .button-icon {\r\n    font-size: 32px !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (hover: none) and (pointer: coarse) {\r\n  .punch-button {\r\n    height: 100px !important;\r\n  }\r\n  \r\n  .punch-button:hover {\r\n    transform: none !important;\r\n  }\r\n  \r\n  .punch-button:active {\r\n    transform: scale(0.98) !important;\r\n    transition: transform 0.1s ease !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n[data-theme=\"dark\"] .punch-clock-container {\r\n  background: var(--background-color);\r\n  border-color: var(--border-color);\r\n}\r\n\r\n[data-theme=\"dark\"] .punch-status {\r\n  background: var(--background-secondary);\r\n  border-color: var(--border-color);\r\n}\r\n\r\n[data-theme=\"dark\"] .punch-button {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\r\n}\r\n\r\n[data-theme=\"dark\"] .punch-button:hover {\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;\r\n}\r\n\r\n/* Loading  */\r\n.punch-button.is-loading {\r\n  pointer-events: none;\r\n}\r\n\r\n.punch-button.is-loading .button-content {\r\n  opacity: 0.7;\r\n}\r\n</style>","import script from \"./PunchClock.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PunchClock.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PunchClock.vue?vue&type=style&index=0&id=f89ffe42&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f89ffe42\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"user-info-top-right\">\r\n      <div class=\"user-info-container\">\r\n        <el-popover\r\n          v-if=\"userStore.userId\" \r\n          placement=\"bottom-end\"\r\n          :width=\"400\"\r\n          trigger=\"click\"\r\n          persistent\r\n          popper-class=\"fixed-popover\"\r\n          v-model:visible=\"popoverVisible\"\r\n        >\r\n        <template #reference>\r\n            <div\r\n                class=\"user-info-top-right flex items-center gap-2 px-3 py-2 rounded cursor-pointer\"\r\n                style=\"color: aliceblue;\"\r\n            >\r\n                <span\r\n                class=\"span-name\"\r\n                v-if=\"userStore.userId\"\r\n                >\r\n                {{ userName }}\r\n                </span>\r\n                <span v-else @click=\"openLoginDialog\"></span>\r\n                <el-icon class=\"dialogButton\" >\r\n                <component :is=\"popoverVisible ? 'ArrowUp' : 'ArrowDown'\" />\r\n                </el-icon>\r\n            </div>\r\n        </template>\r\n\r\n          <div class=\"flex flex-col gap-4\">\r\n            <div class=\"user-info flex items-center\">\r\n              <div class=\"pr-3 pl-2 pt-3\">\r\n\r\n                  <el-avatar \r\n                    :size=\"60\"\r\n                    :src=\"userStore.userAvatar || 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\"\r\n                  />\r\n              </div>\r\n              \r\n              <div class=\"flex flex-col gap-2\">\r\n                <div class=\"user-details flex items-center gap-2\">\r\n                  <span class=\"font-bold\" >{{ userName }}</span>\r\n                  <languageSelecter  style=\"margin-left: 7.2rem;\"></languageSelecter>\r\n                  <span class=\"text-gray-500 cursor-pointer\" v-if=\"!userName\" @click=\"openLoginDialog\"></span>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n            <el-divider  style=\"margin-top:0rem;margin-bottom: 0rem;\"/>\r\n            \r\n            <el-menu class=\"border-none\">\r\n                  <PunchClock />\r\n\r\n              <el-menu-item index=\"4\" @click =\"goPersonAttendance\">\r\n                <span>/</span>\r\n              </el-menu-item>\r\n              <!--  -  -->\r\n              <el-menu-item index=\"0\" v-if=\"permissions.includes('dev')\">\r\n                <div class=\"theme-switch-item\">\r\n                  <el-icon><Sunny /></el-icon>\r\n                  <span></span>\r\n                  <el-switch\r\n                    v-model=\"isDarkMode\"\r\n                    @change=\"handleThemeChange\"\r\n                    active-color=\"#1f2937\"\r\n                    inactive-color=\"#f59e0b\"\r\n                    size=\"small\"\r\n                    style=\"margin-left: auto; --el-switch-on-color: #1f2937; --el-switch-off-color: #f59e0b;\"\r\n                  >\r\n                    <template #active-action>\r\n                      <span style=\"font-size: 10px;\"></span>\r\n                    </template>\r\n                    <template #inactive-action>\r\n                      <span style=\"font-size: 12px;\"></span>\r\n                    </template>\r\n                  </el-switch>\r\n                </div>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"1\" @click=\"editPersonalInformantion\">\r\n                <el-icon><Setting /></el-icon>\r\n                <span></span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"2\">\r\n                <Badge\r\n                    value=\"0\"\r\n                    size=\"small\"\r\n                    severity=\"danger\"\r\n                    class=\"badge-top-right\"\r\n                  />\r\n                  <el-icon style=\"position: relative; top: 2px;\"><Message /></el-icon>\r\n                    <span></span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"3\" @click=\"handleLogout\">\r\n                <el-icon class=\"switchButton\" style=\"font-size:1rem\"><SwitchButton /></el-icon>\r\n                <span v-if=\" userStore.userName\"></span>\r\n              </el-menu-item>\r\n            </el-menu>\r\n          </div>\r\n        </el-popover>\r\n        <div v-else class=\"user-info-top-right flex items-center gap-2 px-3 py-2 rounded cursor-pointer\" style=\"height:3rem; background-color: rgba(255, 255, 255, 0.5);\" @click=\"goLogin\">\r\n        <i class=\"pi pi-user\"></i>\r\n        <span></span>\r\n      </div>\r\n      </div>\r\n    </div>\r\n    <!--  -->\r\n    <login-dialog v-model:visible=\"login_visible\" @login-success=\"handleLoginSuccess\" />\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, watch } from \"vue\";\r\n  import LoginDialog from \"../login-dialog.vue\";\r\n  import { useUserStore } from \"../../stores/user\";\r\n  import VueCookies from \"vue-cookies\";\r\n  import { useRouter } from 'vue-router';\r\n  import languageSelecter from '../Home/language-selecter.vue';\r\n  import Badge from 'primevue/badge';\r\n  import PunchClock from './PunchClock.vue'; //  PunchClock \r\n  import  {useAuthStore} from '@/stores/auth';\r\n  import { useThemeStore } from '@/stores/theme'; //  store\r\n  import { ElMessage } from 'element-plus';\r\n  const authStore = useAuthStore();\r\n  const permissions = authStore.user.permissions || [];\r\n  const router = useRouter();\r\n  const themeStore = useThemeStore();\r\n  \r\n  // \r\n  const isDarkMode = ref(themeStore.isDark());\r\n  \r\n  // \r\n  watch(() => themeStore.currentTheme, (newTheme) => {\r\n    isDarkMode.value = newTheme === 'dark';\r\n  });\r\n  \r\n  // \r\n  const handleThemeChange = (value) => {\r\n    themeStore.setTheme(value ? 'dark' : 'light');\r\n    ElMessage.success(`${value ? '' : ''}`);\r\n  };\r\n  \r\n\r\n  //  Element Plus  SettingMessageSwitchButton\r\n  const userStore = useUserStore();\r\n  const login_visible = ref(false);\r\n  const popoverVisible = ref(false);\r\n  \r\n  const goLogin=()=>{\r\n    router.push({ name: \"Login\" });\r\n  }\r\n\r\n  const editPersonalInformantion =()=>{\r\n    router.push({name:\"PersonalInformation\"})\r\n  }\r\n\r\n  const goPersonAttendance = () => {\r\n    router.push({ name: \"PersonalAttendanceRecord\"});\r\n    popoverVisible.value=false\r\n  }\r\n\r\n\r\n  //  computed userStore \r\n  const userName = computed(() => {\r\n    return userStore.userName || \"\";\r\n  });\r\n  \r\n  //  userStore.userName  popover \r\n  watch(() => userStore.userName, (newVal) => {\r\n    if (!newVal) {\r\n      login_visible.value = false;\r\n      popoverVisible.value = false;\r\n    }\r\n  });\r\n  \r\n  // \r\n  const openLoginDialog = () => {\r\n    login_visible.value = true;\r\n    popoverVisible.value = false; //  popover\r\n  };\r\n  \r\n  //  userStore  cookies\r\n  const handleLogout = async () => {\r\n    try {\r\n      //  SignalR  disconnect API\r\n      const { stopPresenceHub } = await import('../../service/PresenceService.js');\r\n      const { stopOnlineHub } = await import('../../../src/onlineHubService.js');\r\n      \r\n      await Promise.all([\r\n        stopPresenceHub(),\r\n        stopOnlineHub()\r\n      ]);\r\n      \r\n      console.log('SignalR ');\r\n    } catch (error) {\r\n      console.error(' SignalR :', error);\r\n    }\r\n    \r\n    // \r\n    userStore.clearUserInfo();\r\n    VueCookies.remove(\"userId\");\r\n    VueCookies.remove(\"userName\");\r\n    VueCookies.remove(\"departmentId\");\r\n    VueCookies.remove(\"departmentName\");\r\n    VueCookies.remove(\"dpt_title_Id\");\r\n    VueCookies.remove(\"titleId\");\r\n    VueCookies.remove(\"titleName\");\r\n    VueCookies.remove(\"email\");\r\n    \r\n    //  localStorage  auth \r\n    localStorage.removeItem('auth');\r\n    \r\n    popoverVisible.value = false;\r\n    goLogin();\r\n  };\r\n  \r\n  // \r\n  const handleLoginSuccess = () => {\r\n    login_visible.value = false;\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n \r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n  \r\n  .user-info-container {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    gap: 10px;\r\n    width: 2rem;\r\n  }\r\n\r\n  \r\n.badge-top-right {\r\n  position: absolute;\r\n  top: 1rem;\r\n  left: 4rem; \r\n  z-index: 10; \r\n  transform: translate(50%, -50%); \r\n}\r\n\r\n.dialogButton{\r\n    margin-left: auto; \r\n    font-size: 1.2rem; \r\n    display: flex; \r\n}\r\n\r\n/* #region media screen*/\r\n\r\n@media (max-width: 2560px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.3rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1920px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.3rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1536px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.1rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1366px) {\r\n\r\n}\r\n\r\n@media (max-width: 1300px){\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n  .span-name{\r\n    font-size:1.2rem; \r\n    font-family: 'Microsoft JhengHei', 'PingFang TC', 'Helvetica Neue', sans-serif;\r\n  }\r\n}\r\n\r\n@media (max-width: 1280px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n  \r\n}\r\n\r\n\r\n@media (max-width: 1180px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 820px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0rem;\r\n    right: -1rem;\r\n    z-index: 9999;\r\n  }\r\n  .span-name{\r\n    font-size:0.8rem; \r\n    font-family: 'Microsoft JhengHei', 'PingFang TC', 'Helvetica Neue', sans-serif;\r\n  }\r\n  .dialogButton{\r\n    margin-left: -0.5rem; \r\n    font-size: 0.5rem; \r\n    \r\n    display: flex; \r\n  }\r\n}\r\n\r\n\r\n\r\n/* #endregion */\r\n\r\n/*  */\r\n.theme-switch-item {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  gap: 8px;\r\n}\r\n\r\n.theme-switch-item .el-switch {\r\n  margin-left: auto;\r\n}\r\n\r\n  </style>\r\n  ","import script from \"./HeaderOption.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HeaderOption.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HeaderOption.vue?vue&type=style&index=0&id=2f36833f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2f36833f\"]])\n\nexport default __exports__","<template>\r\n  <div \r\n    class=\"modern-menu-item\" \r\n    ref=\"itemRef\" \r\n    @mouseenter=\"openSubmenu\" \r\n    @mouseleave=\"closeSubmenu\"\r\n    :class=\"{ 'has-children': hasChildren, 'is-active': isOpen }\"\r\n  >\r\n    <!--  -->\r\n    <div \r\n      class=\"menu-content\" \r\n      @click=\"handleItemClick\"\r\n      @keydown.enter=\"handleItemClick\"\r\n      @keydown.space.prevent=\"handleItemClick\"\r\n      tabindex=\"0\"\r\n      role=\"menuitem\"\r\n      :aria-expanded=\"hasChildren ? isOpen : undefined\"\r\n      :aria-haspopup=\"hasChildren\"\r\n    >\r\n      <span class=\"menu-text\">{{ item.label }}</span>\r\n      <el-icon \r\n        v-if=\"hasChildren\" \r\n        class=\"menu-arrow\"\r\n      >\r\n        <component :is=\"arrowIconComponent\" />\r\n      </el-icon>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <teleport to=\"body\" v-if=\"isOpen && hasChildren\">\r\n      <div \r\n        class=\"modern-submenu teleport-menu\" \r\n        :style=\"submenuPosition\" \r\n        @click.stop\r\n        role=\"menu\"\r\n      >\r\n        <RecursiveMenuItem\r\n          v-for=\"(child, idx) in item.items\"\r\n          :key=\"child.value + '_' + idx\"\r\n          :item=\"child\"\r\n          :activeKey=\"activeChildValue\"          \r\n          :level=\"level + 1\"\r\n          @update:activeKey=\"val => activeChildValue = val\"\r\n          @item-click=\"onChildItemClick\"\r\n          class=\"submenu-item\"\r\n        />\r\n      </div>\r\n    </teleport>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, nextTick } from 'vue'\r\nimport { DArrowRight, ArrowDownBold, ArrowRightBold, ArrowDown } from '@element-plus/icons-vue'\r\n\r\n//  props\r\nconst props = defineProps({\r\n  item: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  //  item \r\n  //  activeKey === item.value\r\n  activeKey: {\r\n    type: String,\r\n    default: null\r\n  },\r\n  level: {           // \r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\nconst emit = defineEmits(['item-click', 'update:activeKey'])\r\n\r\n// DOM \r\nconst itemRef = ref(null)\r\n//  activeChildValue\r\nconst activeChildValue = ref(null)\r\n\r\n// \r\nconst hasChildren = computed(() => {\r\n  return props.item.items && props.item.items.length > 0\r\n})\r\n\r\n// \r\nconst isOpen = computed(() => props.activeKey === currentKey)\r\n\r\n//  key activeKey \r\nconst currentKey = props.item.value || props.item.label\r\n\r\n//  ()\r\nconst submenuPosition = ref({})\r\n\r\n\r\n\r\n// /\r\n\r\nfunction openSubmenu() {\r\n  if (hasChildren.value) {\r\n    emit('update:activeKey', currentKey)\r\n    nextTick(() => {\r\n      setSubmenuPosition()\r\n      // \r\n      setTimeout(() => {\r\n        adjustSubmenuPosition()\r\n      }, 100)\r\n    })\r\n  }\r\n}\r\n\r\nfunction closeSubmenu() {\r\n  if (hasChildren.value) {\r\n      // \r\n      // \r\n      // \r\n      if (!itemRef.value.contains(document.activeElement) && !document.querySelector('.teleport-menu:hover')) {\r\n        emit('update:activeKey', null)\r\n      }\r\n\r\n  }\r\n}\r\n\r\nfunction setSubmenuPosition() {\r\n  if (!itemRef.value) return\r\n  const rect = itemRef.value.getBoundingClientRect()\r\n  const viewportWidth = window.innerWidth\r\n  const viewportHeight = window.innerHeight\r\n  \r\n  // \r\n  const submenuWidth = Math.max(200, rect.width * 1.2)\r\n  const submenuHeight = Math.min(400, (props.item.items?.length || 1) * 50 + 20)\r\n  \r\n  // \r\n  const headerElement = document.querySelector('.modern-header-container')\r\n  const headerHeight = headerElement ? headerElement.offsetHeight : 0\r\n  const scrollY = window.scrollY || document.documentElement.scrollTop || 0\r\n  const scrollX = window.scrollX || document.documentElement.scrollLeft || 0\r\n  const minTopPosition = scrollY + headerHeight + 5\r\n\r\n  if (props.level === 0) {\r\n    // \r\n    let left = rect.left + scrollX\r\n    let top = rect.bottom + scrollY\r\n\r\n    // \r\n    if (rect.left + submenuWidth > viewportWidth) {\r\n      left = rect.right + scrollX - submenuWidth\r\n      // \r\n      left = Math.max(scrollX + 10, left)\r\n    }\r\n\r\n    // \r\n    if (rect.bottom + submenuHeight > scrollY + viewportHeight) {\r\n      top = rect.top + scrollY - submenuHeight\r\n      // \r\n      if (top < minTopPosition) {\r\n        top = minTopPosition\r\n      }\r\n    }\r\n\r\n    submenuPosition.value = {\r\n      position: 'fixed',\r\n      top: (top - scrollY) + 'px',\r\n      left: (left - scrollX) + 'px',\r\n      zIndex: 1000\r\n    }\r\n  } else {\r\n    // \r\n    let left = rect.right + scrollX\r\n    let top = rect.top + scrollY\r\n\r\n    // \r\n    if (rect.right + submenuWidth > viewportWidth) {\r\n      left = rect.left + scrollX - submenuWidth + 10\r\n      // \r\n      left = Math.max(scrollX + 10, left)\r\n    }\r\n\r\n    // \r\n    if (rect.top + submenuHeight > scrollY + viewportHeight) {\r\n      const maxTop = scrollY + viewportHeight - submenuHeight\r\n      top = Math.max(minTopPosition, Math.min(top, maxTop))\r\n    }\r\n\r\n    // \r\n    if (top < minTopPosition) {\r\n      top = minTopPosition\r\n    }\r\n\r\n    submenuPosition.value = {\r\n      position: 'fixed',\r\n      top: (top - scrollY) + 'px',\r\n      left: (left - scrollX) + 'px',\r\n      zIndex: 1001\r\n    }\r\n  }\r\n}\r\n\r\nfunction adjustSubmenuPosition() {\r\n  if (!itemRef.value || !isOpen.value) return\r\n  \r\n  const submenuElements = document.querySelectorAll('.teleport-menu')\r\n  if (submenuElements.length === 0) return\r\n  \r\n  const submenuElement = submenuElements[submenuElements.length - 1]\r\n  if (!submenuElement) return\r\n  \r\n  const rect = itemRef.value.getBoundingClientRect()\r\n  const submenuRect = submenuElement.getBoundingClientRect()\r\n  const viewportWidth = window.innerWidth\r\n  const viewportHeight = window.innerHeight\r\n  \r\n  const headerElement = document.querySelector('.modern-header-container')\r\n  const headerHeight = headerElement ? headerElement.offsetHeight : 80\r\n  // const scrollY = window.scrollY || document.documentElement.scrollTop || 0\r\n  // const scrollX = window.scrollX || document.documentElement.scrollLeft || 0\r\n  // const minTopPosition = scrollY + headerHeight + 5\r\n  \r\n  //  fixed \r\n  let left = rect.left\r\n  let top = rect.bottom\r\n  let needsUpdate = false\r\n  \r\n  if (props.level === 0) {\r\n    // \r\n    if (rect.bottom + submenuRect.height > viewportHeight) {\r\n      top = rect.top - submenuRect.height\r\n      if (top < headerHeight + 5) {\r\n        top = headerHeight + 5\r\n      }\r\n      needsUpdate = true\r\n    }\r\n    \r\n    // \r\n    if (rect.left + submenuRect.width > viewportWidth) {\r\n      left = rect.right - submenuRect.width\r\n      left = Math.max(10, left) // \r\n      needsUpdate = true\r\n    }\r\n    \r\n    submenuPosition.value = {\r\n      position: 'fixed',\r\n      top: top + 'px',\r\n      left: left + 'px',\r\n      zIndex: 1000\r\n    }\r\n  } else {\r\n    // \r\n    left = rect.right\r\n    top = rect.top\r\n    \r\n    if (rect.right + submenuRect.width > viewportWidth) {\r\n      left = rect.left - submenuRect.width + 10\r\n      left = Math.max(10, left)\r\n      needsUpdate = true\r\n    }\r\n    \r\n    if (rect.top + submenuRect.height > viewportHeight) {\r\n      top = viewportHeight - submenuRect.height\r\n      if (top < headerHeight + 5) {\r\n        top = headerHeight + 5\r\n      }\r\n      // eslint-disable-next-line \r\n      needsUpdate = true\r\n    }\r\n    \r\n    submenuPosition.value = {\r\n      position: 'fixed',\r\n      top: top + 'px',\r\n      left: left + 'px',\r\n      zIndex: 1001\r\n    }\r\n  }\r\n}\r\n\r\nconst arrowIconComponent = computed(() => {\r\n  if (props.level === 0) {\r\n    // \r\n    return isOpen.value ? ArrowDownBold : ArrowDown\r\n  } else {\r\n    // \r\n    return isOpen.value ? ArrowRightBold : DArrowRight\r\n  }\r\n})\r\n\r\n// \r\nfunction onChildItemClick(childItem) {\r\n  emit('item-click', childItem)\r\n  // \r\n  emit('update:activeKey', null)\r\n  // \r\n  activeChildValue.value = null\r\n}\r\n\r\nfunction handleItemClick(event) {\r\n  // \r\n  event?.stopPropagation()\r\n  \r\n  // \r\n  const target = event?.currentTarget\r\n  if (target) {\r\n    target.classList.add('clicking')\r\n    setTimeout(() => {\r\n      target.classList.remove('clicking')\r\n    }, 150)\r\n  }\r\n  \r\n  if (!hasChildren.value) {\r\n    // \r\n    try {\r\n      if (props.item.command && typeof props.item.command === 'function') {\r\n        props.item.command()\r\n      }\r\n      emit('item-click', props.item)\r\n      // \r\n      emit('update:activeKey', null)\r\n      // \r\n      activeChildValue.value = null\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  } else {\r\n    // \r\n    const newActiveKey = isOpen.value ? null : currentKey\r\n    emit('update:activeKey', newActiveKey)\r\n    // \r\n    if (isOpen.value) {\r\n      activeChildValue.value = null\r\n    }\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n.modern-menu-item {\r\n  position: relative;\r\n  user-select: none;\r\n}\r\n\r\n.menu-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0.75rem 0.3rem;\r\n  background: rgba(34, 197, 94, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  border: 2px solid transparent;\r\n  backdrop-filter: blur(10px);\r\n  white-space: nowrap;\r\n  min-width: fit-content;\r\n}\r\n\r\n.menu-content:hover {\r\n  background: rgba(34, 197, 94, 0.2);\r\n  border-color: rgba(34, 197, 94, 0.3);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);\r\n}\r\n\r\n.menu-content:focus {\r\n  outline: none;\r\n  border-color: rgba(34, 197, 94, 0.5);\r\n  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);\r\n}\r\n\r\n.menu-content.clicking {\r\n  transform: scale(0.98);\r\n  background: rgba(34, 197, 94, 0.3);\r\n}\r\n\r\n.menu-text {\r\n  color: #f0fdf4;\r\n  font-weight: 500;\r\n  font-size: 1.2rem;\r\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.menu-arrow {\r\n  color: #bbf7d0;\r\n  margin-left: 0.5rem;\r\n  transition: all 0.3s ease;\r\n  font-size: 1.2rem;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n/*  */\r\n.modern-submenu {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\r\n  border: 1px solid rgba(0, 0, 0, 0.08);\r\n  padding: 0.5rem;\r\n  min-width: 200px;\r\n  max-width: 300px;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(20px);\r\n  animation: submenuSlideIn 0.2s ease-out;\r\n  /*  */\r\n  position: fixed !important;\r\n  contain: layout style paint;\r\n}\r\n\r\n@keyframes submenuSlideIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-8px) scale(0.95);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0) scale(1);\r\n  }\r\n}\r\n\r\n/*  */\r\n.submenu-item .menu-content {\r\n  background: transparent;\r\n  color: #333;\r\n  padding: 0.6rem 0.8rem;\r\n  border-radius: 6px;\r\n}\r\n\r\n.submenu-item .menu-text {\r\n  color: #333;\r\n  font-size: 1rem;\r\n  text-shadow: none;\r\n}\r\n\r\n.submenu-item .menu-arrow {\r\n  color: #666;\r\n}\r\n\r\n.submenu-item .menu-content:hover {\r\n  background: #f0fdf4;\r\n  color: #166534;\r\n}\r\n\r\n.submenu-item .menu-content:hover .menu-text {\r\n  color: #166534;\r\n}\r\n\r\n.submenu-item .menu-content:hover .menu-arrow {\r\n  color: #166534;\r\n}\r\n\r\n/*  */\r\n.modern-menu-item.is-active > .menu-content {\r\n  background: rgba(34, 197, 94, 0.25);\r\n  border-color: rgba(34, 197, 94, 0.4);\r\n  box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1920px) {\r\n  .menu-text {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.5rem 0.3rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 1366px) {\r\n  .menu-text {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.45rem 0.35rem;\r\n  }\r\n  \r\n  .menu-arrow {\r\n    font-size: 0.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 1280px) {\r\n  .menu-text {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.45rem 0.35rem;\r\n  }\r\n  \r\n  .menu-arrow {\r\n    font-size: 0.6rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 1024px) {\r\n  .menu-text {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.45rem 0.5rem;\r\n    border-radius: 6px;\r\n  }\r\n  \r\n  .modern-submenu {\r\n    min-width: 180px;\r\n    border-radius: 8px;\r\n  }\r\n}\r\n\r\n@media (max-width: 820px) {\r\n  .menu-text {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.45rem 0.5rem;\r\n    border-radius: 6px;\r\n  }\r\n  \r\n  .modern-submenu {\r\n    min-width: 180px;\r\n    border-radius: 8px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .menu-text {\r\n    font-size: 0.75rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.25rem 0.3rem;\r\n  }\r\n  \r\n  .menu-arrow {\r\n    font-size: 0.6rem;\r\n    margin-left: 0.3rem;\r\n  }\r\n  \r\n  .modern-submenu {\r\n    min-width: 160px;\r\n    padding: 0.4rem;\r\n  }\r\n  \r\n  .submenu-item .menu-content {\r\n    padding: 0.5rem 0.6rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .menu-text {\r\n    font-size:0.65rem;\r\n  }\r\n  \r\n  .menu-content {\r\n    padding: 0.2rem 0.3rem;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  .modern-submenu {\r\n    min-width: 140px;\r\n    border-radius: 6px;\r\n  }\r\n\r\n  .submenu-item .menu-text {\r\n    color: #333;\r\n    font-size: 0.7rem;\r\n    text-shadow: none;\r\n  }\r\n  \r\n}\r\n\r\n/*  -  */\r\n@media (prefers-contrast: high) {\r\n  .menu-content {\r\n    border: 2px solid #22c55e;\r\n    background: rgba(0, 0, 0, 0.8);\r\n  }\r\n  \r\n  .menu-text {\r\n    color: #22c55e;\r\n  }\r\n  \r\n  .menu-arrow {\r\n    color: #22c55e;\r\n  }\r\n  \r\n  .modern-submenu {\r\n    border: 2px solid #22c55e;\r\n    background: #fff;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (prefers-reduced-motion: reduce) {\r\n  .menu-content,\r\n  .menu-arrow,\r\n  .modern-submenu {\r\n    transition: none;\r\n    animation: none;\r\n  }\r\n  \r\n  .menu-content:hover {\r\n    transform: none;\r\n  }\r\n}\r\n\r\n\r\n\r\n</style>\r\n","import script from \"./RecursiveMenuItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RecursiveMenuItem.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RecursiveMenuItem.vue?vue&type=style&index=0&id=39d8b5c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-39d8b5c0\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n     \r\n      class=\"custom-menubar \r\n      w-[140%] \r\n      max-2560:w-[120%] \r\n      max-1920:w-[85%] \r\n      max-1745:ml-[0rem] \r\n      max-1536:w-[82%] \r\n      max-1366:w-[70%] \r\n      max-1280:w-[80%] \r\n      max-1280:ml-[-3rem] \r\n      max-1180:w-[75%] \r\n      max-820:w-full\r\n      max-600:w-full \r\n      max-430:w-full \r\n      max-375:w-[120%] \r\n      flex items-center flex-nowrap relative gap-2 z-9999\"  ref=\"menubar\">\r\n      <!--  -->\r\n      <button \r\n      v-if=\"!isMobile\"\r\n      class=\"\r\n          arrow-btn left arrow\r\n          max-600:ml-[-3rem]\r\n          max-700:ml-[-3rem]\r\n          max-768:ml-[-2rem]\r\n          max-820:ml-[-2rem] \r\n          max-960:ml-[-1rem] \r\n          max-1097:ml-[-2rem]\r\n          max-1180:ml-[-1rem]\r\n          max-1280:ml-[0rem]\r\n          max-1366:ml-[-1rem]\r\n          max-1536:ml-[-2rem]\r\n          max-1745:ml-[2rem]\r\n          max-1920:ml-[0rem]\r\n        \" \r\n        @click=\"scrollLeft\"\r\n      >\r\n        <i  \r\n        class=\"pi pi-chevron-left arrow\r\n        max-820:text-[0.5rem]\r\n        max-768:ml-[0rem]\r\n        \"\r\n        \r\n        ></i>\r\n      </button>\r\n      <!--  -->\r\n      <button \r\n       v-if=\"!isMobile\"\r\n      class=\"\r\n          arrow-btn right arrow\r\n          max-600:ml-[0rem]\r\n          max-768:ml-[0rem]\r\n          max-820:ml-[0rem] max-820:mr-[-1rem]\r\n          max-960:ml-[0rem] \r\n          max-970:ml-[0rem] max-965:mr-[-2rem]\r\n          max-1097:ml-[0rem]\r\n          max-1120:ml-[1rem]\r\n          max-1180:ml-[0rem]\r\n          max-1280:ml-[0rem]\r\n          max-1366:ml-[0rem]\r\n          max-1536:ml-[0rem]\r\n          max-1745:ml-[2rem]\r\n          max-1920:ml-[1rem]\r\n      \" \r\n      @click=\"scrollRight\"\r\n      >\r\n        <i class=\"pi pi-chevron-right arrow\"></i>\r\n      </button>\r\n        <!--  -->\r\n        <div class=\"menu-items-container\" ref=\"scrollContainer\">\r\n            <RecursiveMenuItem\r\n            v-for=\"(item, idx) in props.model\"\r\n            :key=\"item.value+ '_' + idx\"\r\n            :item=\"item\"\r\n            :activeKey=\"activeTopLevelValue\"     \r\n            @update:activeKey=\"val => activeTopLevelValue = val\"\r\n            @item-click=\"onItemClick\"            \r\n        />\r\n      </div>\r\n      \r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref,defineEmits,defineProps,onMounted,onBeforeUnmount,onUnmounted  } from 'vue'\r\n  import RecursiveMenuItem from './RecursiveMenuItem.vue'\r\n  \r\n  const props = defineProps({\r\n    model: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  })\r\n\r\n  \r\nconst isMobile = ref(window.innerWidth <= 768);\r\n\r\n\r\n\r\n  const emit = defineEmits(['item-click'])\r\n  const menubar = ref(null)\r\n  const scrollContainer = ref(null)\r\n\r\n  const activeTopLevelValue = ref(null)\r\n\r\n  const onItemClick = (item) => {\r\n    emit('item-click', item)\r\n  }\r\n  \r\n  const scrollLeft = () => {\r\n  if (scrollContainer.value) {\r\n    scrollContainer.value.scrollBy({ left: -500, behavior: 'smooth' })\r\n  }\r\n}\r\n\r\nconst scrollRight = () => {\r\n  if (scrollContainer.value) {\r\n    scrollContainer.value.scrollBy({ left: 500, behavior: 'smooth' })\r\n  }\r\n}\r\n\r\n// function handleClickOutside(e) {\r\n//   //  e.target  Teleport \r\n//   if (e.target.closest('.teleport-menu')) {\r\n//     return;\r\n//   }\r\n//   activeTopLevelValue.value = null;\r\n// }\r\n\r\nfunction updateIsMobile() {\r\n  isMobile.value = window.innerWidth <= 768;\r\n}\r\n\r\nfunction handleMouseMove(e) {\r\n  //  (activeTopLevelValue )\r\n  if (activeTopLevelValue.value) {\r\n    // \r\n    const isInsideMenubar = menubar.value && menubar.value.contains(e.target);\r\n    const isInsideTeleportMenu = e.target.closest('.teleport-menu');\r\n\r\n    if (!isInsideMenubar && !isInsideTeleportMenu) {\r\n      activeTopLevelValue.value = null;\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleWheel() {\r\n  // \r\n  activeTopLevelValue.value = null;\r\n\r\n}\r\nonMounted(() => {\r\n  document.addEventListener('mousemove', handleMouseMove)\r\n  document.addEventListener('wheel', handleWheel)\r\n  window.addEventListener('resize', updateIsMobile);\r\n\r\n})\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', updateIsMobile);\r\n});\r\n\r\nonBeforeUnmount(() => { \r\n  document.removeEventListener('mousemove', handleMouseMove)\r\n  document.removeEventListener('wheel', handleWheel)\r\n})\r\n\r\n\r\n\r\n  </script>\r\n  \r\n  <style scoped>\r\n\r\n  .menu-items-container {\r\n    display: flex;\r\n    overflow-x: auto;\r\n    scroll-behavior: smooth;\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\r\n  }\r\n  .menu-items-container::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n\r\n  /* #region media screen*/\r\n\r\n@media (max-width: 2560px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.3rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1920px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.3rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1536px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: 0.1rem;\r\n    right: 0rem;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1366px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1280px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n  \r\n}\r\n\r\n\r\n@media (max-width: 1180px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 820px) {\r\n  .user-info-top-right {\r\n    position: fixed;\r\n    top: -0.3%;\r\n    right: 0%;\r\n    z-index: 9999;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .arrow{\r\n    font-size: 0.5rem;\r\n  }\r\n  .menu-items-container {\r\n    display: flex;\r\n    overflow-x: auto;\r\n    scroll-behavior: smooth;\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\r\n    margin-left: -3rem;\r\n    padding-right: 2rem;\r\n  }\r\n}\r\n\r\n\r\n/* #endregion */\r\n  </style>\r\n  ","import script from \"./CustomMenubar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomMenubar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CustomMenubar.vue?vue&type=style&index=0&id=5b62855b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b62855b\"]])\n\nexport default __exports__","// menuFilter.js\r\nexport function filterMenuByRoles(menuItems, userRoles) {\r\n    return menuItems\r\n      .filter(item => {\r\n        //  requiredRoles \r\n        if (!item.requiredRoles) return true;\r\n        // \r\n        return item.requiredRoles.some(r => userRoles.includes(r));\r\n      })\r\n      .map(item => {\r\n        const copy = { ...item };\r\n        if (copy.items) {\r\n          copy.items = filterMenuByRoles(copy.items, userRoles);\r\n        }\r\n        return copy;\r\n      });\r\n  }\r\n  ","<template>\r\n    <!--  -->\r\n    <div class=\"viewport-info\">{{ size }}</div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, onBeforeUnmount } from 'vue'\r\n  \r\n  /* 1.  */\r\n  const size = ref(`${window.innerWidth}  ${window.innerHeight}`)\r\n  \r\n  /* 2.  */\r\n  const update = () => {\r\n    size.value = `${window.innerWidth}  ${window.innerHeight}`\r\n  }\r\n  \r\n  /* 3.  */\r\n  onMounted(() => addEventListener('resize', update, { passive: true }))\r\n  onBeforeUnmount(() => removeEventListener('resize', update))\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .viewport-info {\r\n    position: fixed;\r\n    bottom: 8px;\r\n    right: 8px;\r\n    background: #000;\r\n    color: #0f0;\r\n    padding: 4px 6px;\r\n    font: 12px/1 monospace;\r\n    border-radius: 4px;\r\n    z-index: 99999;\r\n  }\r\n  </style>\r\n  ","import script from \"./ViewportInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ViewportInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ViewportInfo.vue?vue&type=style&index=0&id=7330f884&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7330f884\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"sticky-menu-container relative px-4\">\r\n    <svg\r\n      @click=\"goHome\"\r\n      viewBox=\"0 0 20 20\"\r\n      class=\"\r\n        w-16 h-16\r\n        max-600:w-[20px] max-600:h-[20px]\r\n        max-820:w-[20px] max-820:h-[20px]\r\n        max-1180:w-[30px] max-1180:h-[30px]\r\n        max-1280:w-[40px] max-1280:h-[40px]\r\n        max-1300:w-[45px] max-1300:h-[45px]\r\n        max-1366:w-[55px] max-1366:h-[55px]\r\n        max-1536:w-[60px] max-1536:h-[60px] max-1536:ml-[-1rem]\r\n        max-1920:w-[70px] max-1920:h-[70px]\r\n      \"\r\n    >\r\n      <image\r\n        href=\"@/assets/logo/DAE.png\"\r\n        class=\"w-full h-full cursor-pointer\"\r\n        x=\"0\" y=\"0\"\r\n      />\r\n    </svg>\r\n\r\n\r\n    <div class=\"Menubar-Container\">\r\n      <CustomMenubar :model=\"HomePageItems\" />\r\n    </div>\r\n  </div>\r\n  <div  v-if=\"permissions.includes('dev')\">\r\n\r\n    <ViewportInfo></ViewportInfo>\r\n    <div class=\"online-person\" @click=\"showOnlineUsersDialog\">\r\n      <span id=\"onlineCount\">0</span>\r\n      <span class=\"click-hint\"></span>\r\n    </div>\r\n  </div>\r\n    \r\n    <div> \r\n      <HeaderOption />\r\n\r\n    </div>\r\n\r\n  <!--  IP  Dialog --> \r\n  <el-dialog\r\n    v-model=\"onlineUsersDialogVisible\"\r\n    title=\" IP \"\r\n    :width=\"dialogWidth\"\r\n    :close-on-click-modal=\"true\"\r\n    :close-on-press-escape=\"true\"\r\n    center\r\n    class=\"online-users-dialog\"\r\n  >\r\n    <div class=\"online-users-content\">\r\n      <div class=\"dialog-header\">\r\n        <div class=\"header-title\">\r\n          <el-icon><Monitor /></el-icon>\r\n          <span></span>\r\n        </div>\r\n        <el-button \r\n          type=\"primary\" \r\n          :size=\"isMobile ? 'small' : 'default'\"\r\n          @click=\"refreshOnlineUsers\"\r\n          :loading=\"loadingOnlineUsers\"\r\n          class=\"refresh-btn\"\r\n        >\r\n          <el-icon><Refresh /></el-icon>\r\n          <span v-if=\"!isMobile\"></span>\r\n        </el-button>\r\n      </div>\r\n      \r\n      <div class=\"users-list\" v-loading=\"loadingOnlineUsers\">\r\n        <div v-if=\"onlineUsers.length === 0\" class=\"no-data\">\r\n          <el-empty description=\"\" />\r\n        </div>\r\n        <div v-else>\r\n          <div \r\n            v-for=\"(user, index) in onlineUsers\" \r\n            :key=\"index\"\r\n            class=\"user-item\"\r\n            :class=\"{ 'mobile-user-item': isMobile }\"\r\n          >\r\n            <div class=\"user-info\">\r\n              <el-avatar :size=\"isMobile ? 32 : 40\" class=\"user-avatar\" :class=\"{ 'unregistered-avatar': !user.isRegistered }\">\r\n                <el-icon><User /></el-icon>\r\n              </el-avatar>\r\n              <div class=\"user-details\">\r\n                <div class=\"user-name\" :class=\"{ 'unregistered-text': !user.isRegistered }\">\r\n                  {{ user.userName || '' }}\r\n                  <el-tag v-if=\"!user.isRegistered\" type=\"warning\" size=\"small\" style=\"margin-left: 8px;\">\r\n                    \r\n                  </el-tag>\r\n                </div>\r\n                <div class=\"user-id\">\r\n                  <el-icon><User /></el-icon>\r\n                  ID: {{ user.userId }}\r\n                </div>\r\n                <!--  -->\r\n                <div v-if=\"isMobile\" class=\"mobile-user-info\">\r\n                  <div class=\"user-department-mobile\">\r\n                    <el-icon><OfficeBuilding /></el-icon>\r\n                    {{ user.departmentName }}\r\n                  </div>\r\n                  <div class=\"user-ip-mobile\">\r\n                    <el-icon><Location /></el-icon>\r\n                    {{ user.ip }}\r\n                  </div>\r\n                  <div class=\"user-time-mobile\">\r\n                    <el-icon><Clock /></el-icon>\r\n                    {{ formatTime(user.connectTime) }}\r\n                  </div>\r\n                  <div class=\"user-roles-mobile\" v-if=\"user.roleNames && user.roleNames.length > 0 && user.isRegistered\">\r\n                    <el-tag \r\n                      v-for=\"roleName in user.roleNames.slice(0, 2)\" \r\n                      :key=\"roleName\" \r\n                      size=\"small\" \r\n                      type=\"info\"\r\n                      style=\"margin-right: 4px;\"\r\n                    >\r\n                      {{ roleName }}\r\n                    </el-tag>\r\n                    <span v-if=\"user.roleNames.length > 2\" class=\"more-roles\">+{{ user.roleNames.length - 2 }}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <div v-else class=\"desktop-user-info\">\r\n                  <div class=\"user-department\">\r\n                    <el-icon><OfficeBuilding /></el-icon>\r\n                    {{ user.departmentName }} - {{ user.titleName }}\r\n                  </div>\r\n                  <div class=\"user-ip\">\r\n                    <el-icon><Location /></el-icon>\r\n                    IP: {{ user.ip }}\r\n                  </div>\r\n                  <div class=\"user-time\">\r\n                    <el-icon><Clock /></el-icon>\r\n                    : {{ formatTime(user.connectTime) }}\r\n                  </div>\r\n                  <div class=\"user-connection\" v-if=\"!user.isRegistered\">\r\n                    <el-icon><Connection /></el-icon>\r\n                    ID: {{ user.connectionId }}\r\n                  </div>\r\n                  <div class=\"user-roles\" v-if=\"user.roleNames && user.roleNames.length > 0 && user.isRegistered\">\r\n                    <el-icon><Key /></el-icon>\r\n                    : \r\n                    <el-tag \r\n                      v-for=\"roleName in user.roleNames\" \r\n                      :key=\"roleName\" \r\n                      size=\"small\" \r\n                      type=\"info\"\r\n                      style=\"margin-left: 5px;\"\r\n                    >\r\n                      {{ roleName }}\r\n                    </el-tag>\r\n                  </div>\r\n                  <div class=\"user-permissions\" v-if=\"user.permissions && user.permissions.length > 0 && user.isRegistered\">\r\n                    <el-icon><Lock /></el-icon>\r\n                    : {{ user.permissions.slice(0, 3).join(', ') }}\r\n                    <span v-if=\"user.permissions.length > 3\"> {{ user.permissions.length }} </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"user-status\">\r\n              <el-tag :type=\"user.isRegistered ? 'success' : 'warning'\" size=\"small\">\r\n                <el-icon><CircleCheck /></el-icon>\r\n                {{ user.isRegistered ? '' : '' }}\r\n              </el-tag>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <span class=\"footer-info\">\r\n          \r\n          : {{ onlineUsers.length }} \r\n        </span>\r\n        <el-button @click=\"onlineUsersDialogVisible = false\"></el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script setup>\r\nimport { defineProps, computed, defineEmits, onMounted,onUnmounted,ref } from 'vue';\r\nimport { createHomeMenuItems } from '../../assets/HomePageItems';\r\nimport HeaderOption from './HeaderOption.vue';\r\nimport { useRouter } from 'vue-router';\r\nimport CustomMenubar from './CustomMenubar.vue';\r\nimport { filterMenuByRoles } from '@/assets/HomePageItems/menuFilter';\r\nimport  {useAuthStore} from '@/stores/auth';\r\nimport ViewportInfo from '@/ViewportInfo'\r\nimport EIPService from '@/service/EIPService.js'\r\nimport { ElMessage } from 'element-plus';\r\nimport { \r\n  Monitor, \r\n  Refresh, \r\n  User, \r\n  Location, \r\n  Clock, \r\n  CircleCheck,\r\n  OfficeBuilding,\r\n  Key,\r\n  Lock,\r\n  Connection\r\n} from '@element-plus/icons-vue';\r\nimport { initOnlineHub, stopOnlineHub } from \"../../../src/onlineHubService.js\";\r\nimport { initPresenceHub, stopPresenceHub } from \"../../../src/service/PresenceService.js\";\r\n\r\nconst authStore = useAuthStore();\r\nconst permissions = authStore.user.permissions || [];\r\nconst router = useRouter();\r\n\r\n// Dialog \r\nconst onlineUsersDialogVisible = ref(false);\r\nconst loadingOnlineUsers = ref(false);\r\nconst onlineUsers = ref([]);\r\n\r\n//  Dialog \r\nconst dialogWidth = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    const width = window.innerWidth;\r\n    if (width <= 480) return '95%';  // \r\n    if (width <= 768) return '90%';  // \r\n    if (width <= 1024) return '80%'; // \r\n    return '600px';                  // \r\n  }\r\n  return '600px';\r\n});\r\n\r\n// \r\nconst isMobile = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    return window.innerWidth <= 768;\r\n  }\r\n  return false;\r\n});\r\n\r\n//  Dialog\r\nconst showOnlineUsersDialog = async () => {\r\n  onlineUsersDialogVisible.value = true;\r\n  await fetchOnlineUsers();\r\n};\r\n\r\n// \r\nconst fetchOnlineUsers = async () => {\r\n  loadingOnlineUsers.value = true;\r\n  try {\r\n    //  API \r\n    const [memoryResponse, dbResponse] = await Promise.all([\r\n      EIPService.getOnlineUsers().catch(() => ({ data: { success: false, users: [] } })),\r\n      EIPService.getPresenceOnlineUsers().catch(() => ({ data: { success: false, connections: [] } }))\r\n    ]);\r\n    \r\n    const allUsers = [];\r\n    \r\n    // OnlineHub\r\n    if (memoryResponse.data && memoryResponse.data.success) {\r\n      const memoryUsers = memoryResponse.data.users\r\n        .filter(user => {\r\n          // \r\n          return user.userId !== \"\" && \r\n                 user.userName !== \"\" &&\r\n                 user.userId !== \"\" &&\r\n                 user.userName !== \"\";\r\n        })\r\n        .map(user => ({\r\n          userName: user.userName || '',\r\n          userId: user.userId,\r\n          ip: user.ipAddress || 'IP',\r\n          connectTime: new Date(user.connectedAt), // \r\n          departmentName: user.departmentName || '',\r\n          titleName: user.titleName || '',\r\n          email: user.email || '',\r\n          roles: user.roles || [],\r\n          roleNames: user.roleNames || [],\r\n          permissions: user.permissions || [],\r\n          onlineDuration: user.onlineDuration,\r\n          isRegistered: user.isRegistered || false,\r\n          connectionId: user.connectionId,\r\n          source: 'memory', // \r\n          dataType: user.isRegistered ? 'registered' : 'basic'\r\n        }));\r\n      allUsers.push(...memoryUsers);\r\n    }\r\n    \r\n    // PresenceHub\r\n    if (dbResponse.data && dbResponse.data.success) {\r\n      const dbUsers = dbResponse.data.connections.map(conn => ({\r\n        userName: conn.userName || '',\r\n        userId: conn.userId,\r\n        ip: conn.ip || 'IP',\r\n        connectTime: new Date(conn.connectedAt), // \r\n        departmentName: '',\r\n        titleName: '',\r\n        email: '',\r\n        roles: [],\r\n        roleNames: [],\r\n        permissions: [],\r\n        onlineDuration: conn.durationSeconds ? `${Math.floor(conn.durationSeconds / 60)} ` : '',\r\n        isRegistered: true,\r\n        connectionId: conn.connectionId,\r\n        source: 'database', // \r\n        dataType: 'persistent',\r\n        lastSeen: new Date(conn.lastSeen), // \r\n        serverId: conn.serverId\r\n      }));\r\n      allUsers.push(...dbUsers);\r\n    }\r\n    \r\n    //  connectionId \r\n    const uniqueUsers = [];\r\n    const seenConnectionIds = new Set();\r\n    \r\n    // \r\n    allUsers.filter(user => user.source === 'memory').forEach(user => {\r\n      uniqueUsers.push(user);\r\n      seenConnectionIds.add(user.connectionId);\r\n    });\r\n    \r\n    // \r\n    allUsers.filter(user => user.source === 'database' && !seenConnectionIds.has(user.connectionId)).forEach(user => {\r\n      uniqueUsers.push(user);\r\n    });\r\n    \r\n    onlineUsers.value = uniqueUsers.sort((a, b) => {\r\n      // \r\n      if (a.isRegistered !== b.isRegistered) {\r\n        return b.isRegistered - a.isRegistered;\r\n      }\r\n      return new Date(b.connectTime) - new Date(a.connectTime);\r\n    });\r\n    \r\n    // const memoryCount = memoryResponse.data?.totalCount || 0;\r\n    // const dbCount = dbResponse.data?.totalCount || 0;\r\n    // const registeredCount = memoryResponse.data?.registeredUserCount || 0;\r\n    // const basicConnectionCount = memoryResponse.data?.basicConnectionCount || 0;\r\n    \r\n    // \r\n    const onlineCountElement = document.getElementById(\"onlineCount\");\r\n    if (onlineCountElement) {\r\n      onlineCountElement.innerText = onlineUsers.value.length;\r\n    }\r\n    \r\n    ElMessage.success(` ${onlineUsers.value.length} `);\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message));\r\n    onlineUsers.value = [];\r\n  } finally {\r\n    loadingOnlineUsers.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst refreshOnlineUsers = async () => {\r\n  await fetchOnlineUsers();\r\n};\r\n\r\n// \r\nconst formatTime = (time) => {\r\n  if (!time) return '-';\r\n  try {\r\n    const date = new Date(time);\r\n    // (UTC+8)\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const hours = String(date.getHours()).padStart(2, '0');\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n    const seconds = String(date.getSeconds()).padStart(2, '0');\r\n    \r\n    return `${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;\r\n  } catch (error) {\r\n    return time.toString();\r\n  }\r\n};\r\n\r\n//  props  HomeMenu Items\r\nconst props = defineProps({\r\n  loginUser: String,\r\n  loginDpt: String,\r\n  loginId: String,\r\n  loginTitle: String\r\n});\r\n\r\nconst emit = defineEmits(['menu-selected']);\r\n\r\n//  props  Menu Items\r\nconst HomePageItems = computed(() => {\r\n  //  menu \r\n  const raw = createHomeMenuItems(props, val => emit('menu-selected', val));\r\n  // \r\n  \r\n  return filterMenuByRoles(raw, authStore.user.roles);\r\n});\r\n\r\n//  LOGO \r\nconst goHome = () => {\r\n  router.push({ name: 'List_WF_Personal' });\r\n};\r\nconst onlineCount = ref(0);\r\n\r\n// \r\nconst handleRegisteredUsersUpdate = (event) => {\r\n  const { count } = event.detail;\r\n  onlineCount.value = count;\r\n  // console.log(':', count);\r\n};\r\n\r\nonMounted(async () => {\r\n  //  Hub\r\n  await Promise.all([\r\n    initOnlineHub(),\r\n    initPresenceHub()\r\n  ]);\r\n  \r\n  // \r\n  window.addEventListener('registeredUsersUpdated', handleRegisteredUsersUpdate);\r\n});\r\n\r\nonUnmounted(() => {\r\n  //  Hub\r\n  stopOnlineHub();\r\n  stopPresenceHub();\r\n  \r\n  // \r\n  window.removeEventListener('registeredUsersUpdated', handleRegisteredUsersUpdate);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n.Menubar-Container {\r\n    position: fixed;\r\n    left: 7rem;\r\n    z-index: 9999;\r\n    width: 103%;\r\n    color: #f8f9fa; /*  */\r\n    font-weight: 600;\r\n    font-family: 'Roboto', 'Arial', sans-serif;\r\n    letter-spacing: 0.08rem; /*  */\r\n    line-height: 1;\r\n    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n    margin: 0; /*  */ \r\n}\r\n\r\n\r\n\r\n::v-deep .p-menubar-item-label {\r\n  font-size: 0.8rem !important; /*  */\r\n}\r\n\r\n/*  Menubar  */\r\n::v-deep .p-menubar .p-menuitem {\r\n  /*  */\r\n  padding: 0.4rem 0.4rem !important;\r\n  /*  */\r\n  margin-right: 0.3rem !important;\r\n  /*  */\r\n  min-width: auto !important;\r\n}\r\n::v-deep .p-menubar-item-icon {\r\n  font-size: 0.8rem !important; /*  */\r\n}\r\n\r\n.p-menubar-item-icon {\r\n  font-size: 0.8rem !important;\r\n}\r\n\r\n.submenu-wide .p-submenu-list {\r\n    min-width: 5rem;\r\n}\r\n\r\n.submenu-wide .p-menuitem-text {\r\n    white-space: nowrap;\r\n}\r\n\r\n\r\n\r\n/* #region media screen*/\r\n\r\n@media (max-width: 2560px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2.5rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1920px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 3rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n}\r\n\r\n@media (max-width: 1745px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1536px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2.5rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1366px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1280px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n    .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 105%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n@media (max-width: 1180px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2rem;\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n\r\n  \r\n}\r\n\r\n@media (max-width: 1100px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 2rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n  .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 110%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 820px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 0.4rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n    .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 75%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 0.5rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n  .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 80%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n@media (max-width: 500px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 0.5rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.75rem 1.5rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n  .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 55%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n@media (max-width: 375px) {\r\n  .sticky-menu-container {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 9999; /*  */\r\n    height: 0.4rem;\r\n    /*  */\r\n    background: linear-gradient(135deg, #cfffd5, #4a4a4a);\r\n    padding: 0.8rem 1rem;\r\n    display: flex;\r\n    align-items: center; /*  */\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /*  */\r\n  }\r\n  .Menubar-Container {\r\n      position: fixed;\r\n      left: 8rem;\r\n      z-index: 9999;\r\n      width: 55%;\r\n      color: #f8f9fa; /*  */\r\n      font-weight: 600;\r\n      font-family: 'Roboto', 'Arial', sans-serif;\r\n      letter-spacing: 0.08rem; /*  */\r\n      line-height: 1;\r\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n      margin: 0; /*  */ \r\n  }\r\n}\r\n\r\n\r\n\r\n/* #endregion */\r\n\r\n/*  */\r\n.online-person {\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.online-person:hover {\r\n  background-color: rgba(0, 0, 0, 0.9);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.click-hint {\r\n  font-size: 12px;\r\n  opacity: 0.8;\r\n  margin-left: 5px;\r\n}\r\n\r\n/* Dialog  */\r\n.online-users-content {\r\n  max-height: 500px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.dialog-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.dialog-header span {\r\n  font-weight: 600;\r\n  margin-left: 8px;\r\n}\r\n\r\n.users-list {\r\n  min-height: 200px;\r\n}\r\n\r\n.user-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n  border: 1px solid #e9ecef;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.user-item:hover {\r\n  background-color: #e3f2fd;\r\n  border-color: #2196f3;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n}\r\n\r\n.user-avatar {\r\n  margin-right: 15px;\r\n  background-color: #409eff;\r\n}\r\n\r\n.user-details {\r\n  flex: 1;\r\n}\r\n\r\n.user-name {\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  margin-bottom: 0.8rem;\r\n}\r\n\r\n.user-id, .user-department, .user-ip, .user-time, .user-roles, .user-permissions {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-bottom: 3px;\r\n}\r\n\r\n.user-id .el-icon, .user-department .el-icon, .user-ip .el-icon, \r\n.user-time .el-icon, .user-roles .el-icon, .user-permissions .el-icon {\r\n  margin-right: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.user-roles {\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.user-permissions {\r\n  font-size: 13px;\r\n  color: #909399;\r\n}\r\n\r\n.user-status {\r\n  margin-left: 15px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.footer-info {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 40px 0;\r\n}\r\n\r\n\r\n  .IP-btn {\r\n    position: fixed;\r\n    bottom: 2rem;\r\n    right: 1rem;\r\n    background: #75fff8;\r\n    padding: 4px 6px;\r\n    font: 12px/1 monospace;\r\n    border-radius: 4px;\r\n    z-index: 99999;\r\n  }\r\n\r\n  .online-person{\r\n        position: fixed;\r\n    bottom: 3.5rem;\r\n    right: 1rem;\r\n    color: white;\r\n    background: #183bc9;\r\n    padding: 4px 6px;\r\n    font: 12px/1 monospace;\r\n    border-radius: 4px;\r\n    z-index: 99999;\r\n  }\r\n\r\n/*  */\r\n.unregistered-avatar {\r\n  opacity: 0.7;\r\n  border: 2px dashed #f56c6c !important;\r\n  background-color: #fef0f0 !important;\r\n}\r\n\r\n.unregistered-text {\r\n  color: #909399 !important;\r\n  font-style: italic;\r\n}\r\n\r\n.user-connection {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n}\r\n\r\n.user-connection .el-icon {\r\n  margin-right: 4px;\r\n}\r\n\r\n/*  Dialog RWD  */\r\n@media (max-width: 768px) {\r\n  /* Dialog  */\r\n  .online-users-dialog :deep(.el-dialog) {\r\n    margin: 5vh auto !important;\r\n    max-height: 90vh !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__body) {\r\n    padding: 15px !important;\r\n    max-height: 70vh !important;\r\n    overflow-y: auto !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__header) {\r\n    padding: 15px 20px 10px !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__footer) {\r\n    padding: 10px 20px 15px !important;\r\n  }\r\n  \r\n  /* Dialog  */\r\n  .online-users-dialog :deep(.el-dialog__title) {\r\n    font-size: 16px !important;\r\n  }\r\n  \r\n  /*  */\r\n  .online-users-content {\r\n    max-height: none !important;\r\n  }\r\n  \r\n  /* Header  */\r\n  .dialog-header {\r\n    flex-direction: row !important;\r\n    align-items: center !important;\r\n    justify-content: space-between !important;\r\n    gap: 10px !important;\r\n    margin-bottom: 15px !important;\r\n    flex-wrap: wrap !important;\r\n  }\r\n  \r\n  .header-title {\r\n    display: flex !important;\r\n    align-items: center !important;\r\n    gap: 8px !important;\r\n    flex: 1 !important;\r\n    min-width: 0 !important;\r\n  }\r\n  \r\n  .header-title span {\r\n    margin-left: 0 !important;\r\n    font-size: 14px !important;\r\n    white-space: nowrap !important;\r\n    overflow: hidden !important;\r\n    text-overflow: ellipsis !important;\r\n  }\r\n  \r\n  .refresh-btn {\r\n    flex-shrink: 0 !important;\r\n    min-width: 32px !important;\r\n    padding: 8px !important;\r\n  }\r\n  \r\n  /*  */\r\n  .user-item {\r\n    flex-direction: column !important;\r\n    align-items: flex-start !important;\r\n    padding: 12px !important;\r\n    margin-bottom: 8px !important;\r\n  }\r\n  \r\n  .user-info {\r\n    width: 100% !important;\r\n    margin-bottom: 8px !important;\r\n  }\r\n  \r\n  .user-avatar {\r\n    margin-right: 10px !important;\r\n  }\r\n  \r\n  .user-details {\r\n    flex: 1 !important;\r\n    min-width: 0 !important;\r\n  }\r\n  \r\n  .user-name {\r\n    font-size: 14px !important;\r\n    margin-bottom: 0.5rem !important;\r\n  }\r\n  \r\n  .user-id, .user-department, .user-ip, .user-time, \r\n  .user-roles, .user-permissions, .user-connection {\r\n    font-size: 12px !important;\r\n    margin-bottom: 2px !important;\r\n    flex-wrap: wrap !important;\r\n  }\r\n  \r\n  /*  */\r\n  .mobile-user-info {\r\n    width: 100% !important;\r\n  }\r\n  \r\n  .user-department-mobile, .user-ip-mobile, .user-time-mobile {\r\n    display: flex !important;\r\n    align-items: center !important;\r\n    font-size: 11px !important;\r\n    color: #606266 !important;\r\n    margin-bottom: 3px !important;\r\n  }\r\n  \r\n  .user-department-mobile .el-icon, \r\n  .user-ip-mobile .el-icon, \r\n  .user-time-mobile .el-icon {\r\n    margin-right: 4px !important;\r\n    font-size: 11px !important;\r\n  }\r\n  \r\n  .user-roles-mobile {\r\n    margin-top: 4px !important;\r\n    display: flex !important;\r\n    align-items: center !important;\r\n    flex-wrap: wrap !important;\r\n  }\r\n  \r\n  .more-roles {\r\n    font-size: 10px !important;\r\n    color: #909399 !important;\r\n    margin-left: 4px !important;\r\n  }\r\n  \r\n  .mobile-user-item {\r\n    background-color: #fafafa !important;\r\n    border: 1px solid #f0f0f0 !important;\r\n  }\r\n  \r\n  .user-status {\r\n    margin-left: 0 !important;\r\n    align-self: flex-end !important;\r\n  }\r\n  \r\n  /* Footer  */\r\n  .dialog-footer {\r\n    flex-direction: column !important;\r\n    gap: 10px !important;\r\n    align-items: center !important;\r\n  }\r\n  \r\n  .footer-info {\r\n    font-size: 12px !important;\r\n    text-align: center !important;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  /*  */\r\n  .online-users-dialog :deep(.el-dialog) {\r\n    margin: 2vh auto !important;\r\n    max-height: 96vh !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__body) {\r\n    padding: 10px !important;\r\n    max-height: 75vh !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__header) {\r\n    padding: 10px 15px 5px !important;\r\n  }\r\n  \r\n  .online-users-dialog :deep(.el-dialog__title) {\r\n    font-size: 14px !important;\r\n  }\r\n  \r\n  .user-item {\r\n    padding: 10px !important;\r\n  }\r\n  \r\n  .user-avatar {\r\n    margin-right: 8px !important;\r\n  }\r\n  \r\n  .user-name {\r\n    font-size: 13px !important;\r\n  }\r\n  \r\n  .user-id, .user-department, .user-ip, .user-time, \r\n  .user-roles, .user-permissions, .user-connection {\r\n    font-size: 11px !important;\r\n  }\r\n}\r\n\r\n</style>","import script from \"./HomeMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeMenu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeMenu.vue?vue&type=style&index=0&id=55250e70&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-55250e70\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"card flex justify-center\">\r\n    <Listbox\r\n      v-model=\"selectedURL\"\r\n      :options=\"pageListOptions\"\r\n      optionLabel=\"label\"\r\n      optionGroupLabel=\"code\"\r\n      optionGroupChildren=\"items\"\r\n      :optionValue=\"item => item\"\r\n      class=\"w-full h-full\"\r\n      listStyle=\"min-height: 5rem; max-height: 30rem; min-width: 10rem; max-width: 100%\"\r\n      @change=\"linkToURL\"\r\n    >\r\n      <template #optiongroup=\"slotProps\">\r\n        <div class=\"flex justify-center items-center custom-group-label\">\r\n           <div>{{ slotProps.option.label }}</div>\r\n          </div>\r\n      </template>\r\n    </Listbox>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, defineProps, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport Listbox from 'primevue/listbox'\r\nimport PageListData from '../../assets/PageListItems.json'\r\n\r\n/** \r\n *  selectedKey  defineProps\r\n *  props\r\n */\r\nconst props = defineProps({\r\n  selectedKey: {\r\n    type: String,\r\n    default: null\r\n  }\r\n})\r\n\r\n// \r\nconst selectedURL = ref(null)\r\n\r\n/** \r\n *  ( PageListData.json ) \r\n *  props.selectedKey  options\r\n */\r\nconst pageListOptions = computed(() => {\r\n  if (props.selectedKey && PageListData[props.selectedKey]) {\r\n    return PageListData[props.selectedKey]\r\n  }\r\n  return PageListData['MyFavorites']\r\n})\r\n\r\n//  Router \r\nconst router = useRouter()\r\n\r\n/**\r\n * \r\n */\r\nconst linkToURL = (item) => {\r\n  if (!item?.value) return\r\n  // console.log(item.value.path);  \r\n  //  item.value  path  name\r\n  // : { \"label\": \"\", \"value\": { \"path\": \"/userRegistration\" } }\r\n  //     { \"label\": \"\", \"value\": { \"name\": \"userRegistration\" } }\r\n\r\n  if (item.value.path) {\r\n    router.push(item.value.path)\r\n  } else if (item.value.name) {\r\n    router.push({ name: item.value.name })\r\n  }\r\n}\r\n\r\n//  ()\r\nonMounted(() => {\r\n  selectedURL.value = pageListOptions.value[0] || null\r\n})\r\n</script>\r\n<style scoped>\r\n\r\n.custom-group-label {\r\n  font-size: 1.6rem; /*  */\r\n  color: #6c757d; /*  */\r\n  font-weight: 600; /*  */\r\n  font-family: 'Roboto', 'Arial', sans-serif; /*  */\r\n  letter-spacing: 0.05rem; /*  */\r\n  line-height: 1.5; /*  */\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); /*  */\r\n}\r\n</style>\r\n","import script from \"./PageList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PageList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PageList.vue?vue&type=style&index=0&id=d73fa4d4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d73fa4d4\"]])\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setFinanceAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'Finance'; \r\n\r\nexport default {\r\n\r\n  //  emp_id  API \r\n  getSalarySlips_Eid_Date(Eid, Date) {\r\n    return api().get(`/${controllerPath}/getSalarySlips-Eid-Date`, {\r\n      params: { Eid, Date }\r\n    });\r\n  },\r\n  \r\n  getLeaveRecord(userId,month){\r\n    return api().get(`/${controllerPath}/getLeaveRecord`, {\r\n      params: { userId, month }\r\n    });\r\n  },\r\n\r\n\r\n  // \r\n  getPersonalLeaveRecords(params) {\r\n    return api().get(`/${controllerPath}/getPersonalLeaveRecords`, {\r\n      params: params\r\n    });\r\n  },\r\n\r\n  // \r\n  getPersonalOvertimeRecords(params) {\r\n    return api().get(`/${controllerPath}/getPersonalOvertimeRecords`, {\r\n      params: params\r\n    });\r\n  },\r\n\r\n  // \r\n  getMealAllowanceSummary(params) {\r\n    return api().get(`/${controllerPath}/getMealAllowanceSummary`, {\r\n      params: params\r\n    });\r\n  },\r\n\r\n  // \r\n  getMealAllowanceDetails(params) {\r\n    return api().get(`/${controllerPath}/getMealAllowanceDetails`, {\r\n      params: params\r\n    });\r\n  },\r\n\r\n  // \r\n  getAnnualLeaveSummary(params = {}) {\r\n    return api().get(`/${controllerPath}/getAnnualLeaveSummary`, { params });\r\n  },\r\n\r\n  //  ()\r\n  // getEmployeeLeaveDetails(params) {\r\n  //   return api().get(`/${controllerPath}/getEmployeeLeaveDetails`, {\r\n  //     params: params\r\n  //   });\r\n  // },\r\n\r\n\r\n\r\n  //  emp_id  API \r\n  getSalaryStructureWithEmpId(empId) {\r\n    return api().get(`/${controllerPath}/getSalaryStructureWithEmpId/${empId}`);\r\n  },\r\n\r\n\r\n  postSalarySlip(loginUser,data) {\r\n    return api().post(`/${controllerPath}/SalarySlips/${loginUser}`, data);\r\n  },\r\n\r\n  // \r\n  decryptAllSalarySlips() {\r\n    return api().post('/SalaryDecryption/DecryptAllSalarySlips');\r\n  },\r\n\r\n  \r\n  postSalaryStructures(loginUser,data) {\r\n    return api().post(`/${controllerPath}/SalaryStructures/${loginUser}`, data);\r\n  },\r\n  \r\n\r\n  //// API\r\n  // \r\n  encryptSalaryStructure() {\r\n    return api().post(`/${controllerPath}/encrypt-salary-structure`);\r\n  },\r\n\r\n  // \r\n  encryptSalarySlip() {\r\n    return api().post(`/${controllerPath}/encrypt-salary-slip`);\r\n  },\r\n\r\n\r\n\r\n    /***** API *****/\r\n  downloadInternalAttendanceMonthly(month,userId) {\r\n    return api().get(`${controllerPath}/downloadInternalAttendanceMonthly/${month}/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadExternalAttendanceMonthly(month,userId) {\r\n    return api().get(`${controllerPath}/downloadExternalAttendanceMonthly/${month}/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadCompanySalaryMonthly(month,userId) {\r\n    return api().get(`${controllerPath}/downloadCompanySalaryMonthly/${month}/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadEmployeeSalaryMonthly(month,userId) {\r\n    return api().get(`${controllerPath}/downloadEmployeeSalaryMonthly/${month}/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  \r\n  checkHasSalaryData_Before_download(month,userId) {\r\n    return api().get(`${controllerPath}/checkHasSalaryData_Before_download/${month}/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n  /***** END *****/\r\n\r\n\r\n  /***** API *****/\r\n  downloadInternalAttendanceMonthlyOP(month) {\r\n    return api().get(`${controllerPath}/downloadInternalAttendanceMonthlyOP/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadExternalAttendanceMonthlyOP(month) {\r\n    return api().get(`${controllerPath}/downloadExternalAttendanceMonthlyOP/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadCompanySalaryMonthlyOP(month) {\r\n    return api().get(`${controllerPath}/downloadCompanySalaryMonthlyOP/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  downloadEmployeeSalaryMonthlyOP(month) {\r\n    return api().get(`${controllerPath}/OP_DownloadEmployeeSalaryMonthly/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n  \r\n  /***** END *****/\r\n\r\n\r\n  getAllAttendanceRecords(month) {\r\n    return api().get(`${controllerPath}/getAllAttendanceRecords/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  getAttendanceRecord(month, employId) {\r\n    return api().get(`${controllerPath}/getAttendanceRecord`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      params: { month, employId }\r\n    });\r\n  },\r\n\r\n  getCompanyLaborRate() {\r\n    return api().get(`${controllerPath}/CompanyLaborRate`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  putCompanyLaborRate(loginUser, data) {\r\n    return api().put(`${controllerPath}/CompanyLaborRate/${loginUser}`, data);\r\n  },\r\n\r\n  getCustomerTrackingData() {\r\n    return api().get(`${controllerPath}/customerTracking`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  //  API\r\n  // \r\n  getTyphoonLeaveRecords(params) {\r\n    return api().get(`${controllerPath}/typhoon-leave`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  createTyphoonLeaveRecord(data) {\r\n    return api().post(`${controllerPath}/typhoon-leave`, data, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  updateTyphoonLeaveRecord(id, data) {\r\n    return api().put(`${controllerPath}/typhoon-leave/${id}`, data, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  deleteTyphoonLeaveRecord(id) {\r\n    return api().delete(`${controllerPath}/typhoon-leave/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  getCardCorrectionRecords(empId, date) {\r\n    return api().get(`${controllerPath}/getCardCorrectionRecords`, {\r\n      params: { empId, date },\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // API\r\n  // \r\n  getOvertimePageInfo(params) {\r\n    return api().get(`${controllerPath}/getOvertimePageInfo`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  getEmployeeOvertimeDetails(params) {\r\n    return api().get(`${controllerPath}/getEmployeeOvertimeDetails`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // Excel\r\n  exportOvertimeData(params) {\r\n    return api().get(`${controllerPath}/exportOvertimeData`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  // \r\n  getLeavePageInfo(params) {\r\n    return api().get(`${controllerPath}/getLeavePageInfo`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n\r\n  // \r\n  getEmployeeLeaveDetails(params) {\r\n    return api().get(`${controllerPath}/getEmployeeLeaveDetails`, {\r\n      params: params,\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n  },\r\n};\r\n","let axiosInstance;\r\n\r\nexport function setWorkflowAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\n\r\n// Controller Path for WorkflowController\r\nconst workflowControllerPath = 'Workflow';\r\n// Controller Path for ReferenceDataController\r\nconst referenceDataControllerPath = 'ReferenceData';\r\n\r\nexport default {\r\n  // #region WorkflowController API\r\n  // #region \r\n      getAllEnums(){\r\n        return api().get(`${workflowControllerPath}/AllEnums`, {\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n      },\r\n\r\n      /**  */\r\n      getEnum_NotificationTiming() {\r\n        return api().get(`${workflowControllerPath}/NotificationTiming`, {\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n      },\r\n\r\n      /**  */\r\n      getEnum_ApprovalStatus() {\r\n        return api().get(`${workflowControllerPath}/ApprovalStatus`, {\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n      },\r\n\r\n      /**  */\r\n      getEnum_ApprovalAction() {\r\n        return api().get(`${workflowControllerPath}/ApprovalAction`, {\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n      },\r\n\r\n      /**  */\r\n      getEnum_StepTypeEnum() {\r\n        return api().get(`${workflowControllerPath}/StepTypeEnum`, {\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n      },\r\n\r\n  // #endregion\r\n\r\n\r\n\r\n  getApprovalSteps(docID) {\r\n    return api().get(`${workflowControllerPath}/approvalStep/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getApprovalRecord(docID){\r\n    return api().get(`${workflowControllerPath}/approvalRecord/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  SimulateProcess_CR(formData) {\r\n    return api().post(`${workflowControllerPath}/SimulateProcess/CR`,formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getAllForms() {\r\n    return api().get(`${workflowControllerPath}/forms`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // #region \r\n\r\n  getAllDocuments() {\r\n    return api().get(`${workflowControllerPath}/documents`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getUserRelatedDocuments(userId) {\r\n    return api().get(`${workflowControllerPath}/related-documents/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  \r\n  getNewUserRelatedDocuments(userId) {\r\n    return api().get(`${workflowControllerPath}/new-related-documents/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getUserPendingDocuments(userId) {\r\n    return api().get(`${workflowControllerPath}/pending-documents/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getUserApprovedDocuments(userId) {\r\n    return api().get(`${workflowControllerPath}/approved-documents/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getUserVoidedDocuments(userId) {\r\n    return api().get(`${workflowControllerPath}/voided-documents/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getInProgressDocuments() {\r\n    return api().get(`${workflowControllerPath}/in-progress-documents`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getCompletedDocuments() {\r\n    return api().get(`${workflowControllerPath}/completed-documents`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n\r\n  // #endregion\r\n\r\n\r\n\r\n  /**\r\n   * \r\n   * @param {Object} formData {id, serialId, formName, created_at}\r\n   */\r\n  createForm(formData) {\r\n    return api().post(`${workflowControllerPath}/forms`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  resubmitForm(formData) {\r\n    return api().put(`${workflowControllerPath}/resubmit`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  resubmitWithAttachments(formData) {\r\n    return api().post(`${workflowControllerPath}/resubmitWithAttachments`, formData, {});\r\n  },\r\n\r\n  voidDocument(docID){\r\n    return api().put(`${workflowControllerPath}/void/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  SaveAndApproval(formData) {\r\n    return api().post(`${workflowControllerPath}/SaveAndApproval`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  submitApproval(formData) {\r\n    return api().post(`${workflowControllerPath}/approvals`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  submitRejection(formData) {\r\n    return api().post(`${workflowControllerPath}/reject`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {Object} resubmitDto {DocumentID, ReSubmitter, FormData}\r\n   */\r\n  resubmitDocument(resubmitDto) {\r\n    return api().post(`${workflowControllerPath}/resubmit`, resubmitDto, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   */\r\n  getFormById(formId) {\r\n    return api().get(`${workflowControllerPath}/forms/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   * @param {Object} formData {serialId, formName...}\r\n   */\r\n  updateForm(formId, formData) {\r\n    return api().put(`${workflowControllerPath}/forms/${formId}`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   */\r\n  deleteForm(formId) {\r\n    return api().delete(`${workflowControllerPath}/forms/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // -----------------------------------------------------\r\n  // 2) ProcessDefinition API\r\n  // -----------------------------------------------------\r\n  /**\r\n   * \r\n   * @param {Object} definition {Id?, Name, Description, CreatedAt, Status}\r\n   */\r\n  ProcessDefinition(definition) {\r\n    return api().post(`${workflowControllerPath}/ProcessDefinition`, definition, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getAllProcessDefinitions() {\r\n    return api().get(`${workflowControllerPath}/processDefinitions`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} definitionId ID\r\n   */\r\n  getProcessDefinitionById(definitionId) {\r\n    return api().get(`${workflowControllerPath}/processDefinitions/${definitionId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} definitionId ID\r\n   * @param {Object} definitionData {Name, Description, Status...}\r\n   */\r\n  updateProcessDefinition(definitionId, definitionData) {\r\n    return api().put(`${workflowControllerPath}/processDefinitions/${definitionId}`, definitionData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} definitionId ID\r\n   */\r\n  deleteProcessDefinition(definitionId) {\r\n    return api().delete(`${workflowControllerPath}/processDefinitions/${definitionId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // -----------------------------------------------------\r\n  // 3) ProcessStepDefinition API\r\n  // -----------------------------------------------------\r\n  /**\r\n   * \r\n   * @param {Object} stepDefinition {ProcessDefinitionId, StepOrder, StepName, Role, ActionType, NextStepIfApproved, NextStepIfRejected...}\r\n   */\r\n  addProcessStepDefinition(stepDefinition) {\r\n    return api().post(`${workflowControllerPath}/addProcessStepDefinition`, stepDefinition, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} definitionId ID\r\n   */\r\n  getStepsByDefinition(definitionId) {\r\n    return api().get(`${workflowControllerPath}/processDefinitions/${definitionId}/steps`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} stepId ID\r\n   */\r\n  getProcessStepDefinitionById(stepId) {\r\n    return api().get(`${workflowControllerPath}/processStepDefinition/${stepId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} stepId ID\r\n   * @param {Object} stepData {StepOrder, StepName, Role, ActionType, ...}\r\n   */\r\n  updateProcessStepDefinition(stepId, stepData) {\r\n    return api().put(`${workflowControllerPath}/processStepDefinition/${stepId}`, stepData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} stepId ID\r\n   */\r\n  deleteProcessStepDefinition(stepId) {\r\n    return api().delete(`${workflowControllerPath}/processStepDefinition/${stepId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // -----------------------------------------------------\r\n  // 4)  API\r\n  // -----------------------------------------------------\r\n  /**\r\n   * ()\r\n   * @param {Object} request {FormId, FormType, ProcessDefinitionId, Initiator}\r\n   */\r\n  startProcess(request) {\r\n    return api().post(`${workflowControllerPath}/startProcess`, request, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} userId\r\n   */\r\n  getPendingForms(userId) {\r\n    return api().get(`${workflowControllerPath}/pending`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      params: { userId }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * ()\r\n   * @param {Object} approveRequest {StepInstanceId, IsApproved, Comments}\r\n   */\r\n  approveForm(approveRequest) {\r\n    return api().post(`${workflowControllerPath}/approve`, approveRequest, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {Object} addSignRequest {ProcessInstanceId, StepInstanceId, NewApprover, Comments}\r\n   */\r\n  addSign(addSignRequest) {\r\n    return api().post(`${workflowControllerPath}/addsign`, addSignRequest, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {Object} reassignRequest {StepInstanceId, NewApprover}\r\n   */\r\n  reassignSign(reassignRequest) {\r\n    return api().post(`${workflowControllerPath}/reassign`, reassignRequest, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   */\r\n  getFormProcess(formId) {\r\n    return api().get(`${workflowControllerPath}/process/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId\r\n   */\r\n  getApprovalHistory(formId) {\r\n    return api().get(`${workflowControllerPath}/history/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // -----------------------------------------------------\r\n  // 5) API (/)\r\n  // -----------------------------------------------------\r\n  /**\r\n   * \r\n   * @param {string} month\r\n   * @param {string} employId\r\n   */\r\n  getAttendanceRecord(month, employId) {\r\n    return api().get(`${workflowControllerPath}/getAttendanceRecord`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      params: { month, employId }\r\n    });\r\n  },\r\n\r\n  /**\r\n   *  ( Excel)\r\n   * @param {string} month\r\n   */\r\n  getAllAttendanceRecords(month) {\r\n    return api().get(`${workflowControllerPath}/downloadAttendance/${month}`, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n\r\n  /**\r\n   *  user profile (: /api/Workflow/getTbl_users_profile)\r\n   */\r\n  getTbl_users_profile() {\r\n    return api().get(`${workflowControllerPath}/getTbl_users_profile`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // \r\n  getDocumentPermissions(docID, userID) {\r\n    return api().get(\r\n      `${workflowControllerPath}/documents/${docID}/${userID}/permissions`,\r\n      {\r\n        headers: { 'Content-Type': 'application/json' }\r\n      }\r\n    )\r\n  },\r\n\r\n  // #endregion WorkflowController API\r\n\r\n  // #region ReferenceDataController API\r\n  /**\r\n   * \r\n   */\r\n  getWorkflowForms() {\r\n    return api().get(`${referenceDataControllerPath}/WorkflowForm`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDocumentTypes() {\r\n    return api().get(`${referenceDataControllerPath}/DocumentType`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getApprovalWorkflows() {\r\n    return api().get(`${referenceDataControllerPath}/ApprovalWorkflow`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getApprovalSteps_ReferenceData() {\r\n    return api().get(`${referenceDataControllerPath}/ApprovalStep`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getParallelGroups() {\r\n    return api().get(`${referenceDataControllerPath}/ParallelGroup`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getCountersignGroups() {\r\n    return api().get(`${referenceDataControllerPath}/CountersignGroup`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDocuments() {\r\n    return api().get(`${referenceDataControllerPath}/Document`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getApprovalRecords() {\r\n    return api().get(`${referenceDataControllerPath}/ApprovalRecord`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getStepInsertions() {\r\n    return api().get(`${referenceDataControllerPath}/StepInsertion`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getNotificationLogs() {\r\n    return api().get(`${referenceDataControllerPath}/NotificationLog`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDocumentNotificationRecipients() {\r\n    return api().get(`${referenceDataControllerPath}/DocumentNotificationRecipient`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDocumentNotifications() {\r\n    return api().get(`${referenceDataControllerPath}/DocumentNotification`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getCountersignGroupMembers() {\r\n    return api().get(`${referenceDataControllerPath}/CountersignGroupMember`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getParallelGroupMembers() {\r\n    return api().get(`${referenceDataControllerPath}/ParallelGroupMember`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  // #endregion ReferenceDataController API\r\n};\r\n","let axiosInstance;\r\n\r\nexport function setReferenceDataAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'ReferenceData';\r\n\r\nexport default {\r\n\r\n  // #region GET\r\n\r\n  getDAE_RelEIPUserRole_JOIN_WF_RolesData(){\r\n        return api().get(`${controllerPath}/rel-eip-user-roleJOIN-WFRoles`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getRelUserRole(){\r\n    return api().get(`${controllerPath}/rel-user-role`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getWF_RoleData(){\r\n    return api().get(`${controllerPath}/WF_Role`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getAreaData() {\r\n    return api().get(`${controllerPath}/areas`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getEmployeeData(){\r\n    return api().get(`${controllerPath}/employees`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getEmployeeDataByEmpID(EmpID){\r\n    return api().get(`${controllerPath}/employees/${EmpID}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n\r\n  getTitleData() {\r\n    return api().get(`${controllerPath}/titles`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getDepartmentData() {\r\n    return api().get(`${controllerPath}/departments`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getRoleData() {\r\n    return api().get(`${controllerPath}/roles`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getUserData() {\r\n    return api().get(`${controllerPath}/users`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getPermissionData() {\r\n    return api().get(`${controllerPath}/permissions`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getFormsData() {\r\n    return api().get(`${controllerPath}/forms`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  getApprovalProcessAll() {\r\n    return api().get(`${controllerPath}/approval-process/all`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n\r\n  //#endregion \r\n\r\n\r\n\r\n  // #region POST\r\n\r\n  addUserWFRoleData (userId,roleId) {\r\n    return api().post(`${controllerPath}/userWFRole/${userId}/${roleId}`,  {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addEmployeeData (EmpData) {\r\n    return api().post(`${controllerPath}/employee`,EmpData,  {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addWF_RoleData (wfRoleData) {\r\n    return api().post(`${controllerPath}/WF_Role`, wfRoleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addUser (userData) {\r\n    return api().post(`${controllerPath}/user`, userData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addPermission (permissionData) {\r\n    return api().post(`${controllerPath}/permission`, permissionData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addRole (roleData) {\r\n    return api().post(`${controllerPath}/role`, roleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addTitleData (titleData) {\r\n    return api().post(`${controllerPath}/title`, titleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addDepartment (departmentData) {\r\n    return api().post(`${controllerPath}/department`, departmentData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  addArea (areaData) {\r\n    return api().post(`${controllerPath}/area`, areaData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  // #endregion\r\n\r\n  // #region PUT\r\n  updateUserRoleData (userRoleData) {\r\n    console.log(userRoleData);\r\n    return api().put(`${controllerPath}/userWFRole`, userRoleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  \r\n  updateEmployeeData (empData) {\r\n    return api().put(`${controllerPath}/employee`, empData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updateWF_RoleData (wfRoleData) {\r\n    return api().put(`${controllerPath}/WF_Role`, wfRoleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  updateUser (userData) {\r\n    return api().put(`${controllerPath}/user`, userData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updatePermission (permissionData) {\r\n    return api().put(`${controllerPath}/permission`, permissionData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updateRole (roleData) {\r\n    return api().put(`${controllerPath}/role`, roleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updateTitleData (titleData) {\r\n    return api().put(`${controllerPath}/title`, titleData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updateDepartment (departmentData) {\r\n    return api().put(`${controllerPath}/department`, departmentData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  updateArea (areaData) {\r\n    return api().put(`${controllerPath}/area`, areaData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  // #endregion\r\n\r\n  // #region DELETE\r\n  deleteUserWFRoleData (userId, roleId) {\r\n    return api().delete(`${controllerPath}/userWFRole/${userId}/${roleId}`, {\r\n      \r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteWF_RoleData (id) {\r\n    return api().delete(`${controllerPath}/WF_Role/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteEmployeeData (id) {\r\n    return api().delete(`${controllerPath}/employee/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  deleteUser (id) {\r\n    return api().delete(`${controllerPath}/user/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deletePermission (id) {\r\n    return api().delete(`${controllerPath}/permission/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteRole (id) {\r\n    return api().delete(`${controllerPath}/role/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteTitleData (id) {\r\n    return api().delete(`${controllerPath}/title/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteDepartment (id) {\r\n    return api().delete(`${controllerPath}/department/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteArea (id) {\r\n    return api().delete(`${controllerPath}/area/${id}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  // #endregion\r\n};\r\n","<template>\r\n  <div style=\"display: flex; align-items: start;\">\r\n    <el-tree\r\n      ref=\"treeRef\"\r\n      :data=\"treeData\"\r\n      :props=\"treeProps\"\r\n      node-key=\"value\"\r\n      show-checkbox\r\n      check-strictly\r\n      default-expand-all\r\n      :expand-on-click-node=\"false\"\r\n      :check-on-click-node=\"false\"\r\n      :default-checked-keys=\"internalValueArray\"\r\n      @node-click=\"handleNodeClick\"\r\n      @check-change=\"onCheckChange\"\r\n      :filter-node-method=\"filterNodes\"\r\n      :style=\"{ height: 'calc(100vh - 100px)', overflow: 'auto' }\"\r\n    >\r\n      <template #default=\"{ node, data }\">\r\n        <div\r\n          :style=\"{\r\n            backgroundColor: data.isGroup ? 'transparent' : '#f0fff0',\r\n            width: '100%',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            padding: '4px 8px'\r\n          }\"\r\n        >\r\n          <span\r\n            class=\"el-tree-node__expand-icon\"\r\n            @click.stop=\"node.expanded = !node.expanded\"\r\n          />\r\n          <span\r\n            class=\"el-tree-node__checkbox-wrapper\"\r\n            :style=\"{ backgroundColor: data.isGroup ? 'transparent' : '#f0fff0' }\"\r\n          />\r\n          <span class=\"el-tree-node__label\">{{ data.label }}</span>\r\n        </div>\r\n      </template>\r\n    </el-tree>\r\n\r\n    <el-button\r\n      v-if=\"props.hasCancel\"\r\n      type=\"text\"\r\n      @click=\"clearSelection\"\r\n      style=\"margin-left: 10px; align-self: flex-start;\"\r\n    >\r\n      <el-icon><Close/></el-icon>\r\n    </el-button>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"js\" setup>\r\nimport { ref, defineProps, defineEmits, onMounted, watch } from 'vue'\r\nimport ReferenceDataService from '@/service/ReferenceDataService'\r\nimport { Close } from '@element-plus/icons-vue'\r\n\r\nconst props = defineProps({\r\n  modelValue: { type: Array, default: () => [] },\r\n  hasCancel:  { type: Boolean, default: false },\r\n  returnType: { type: String, default: 'id' },\r\n  groupBy:    { \r\n    type: String, \r\n    default: 'Department', \r\n    validator: v => ['Department','Title'].includes(v) \r\n  }\r\n})\r\nconst emit = defineEmits(['update:modelValue','change'])\r\n\r\nconst treeRef = ref(null)\r\nconst internalValueArray = ref([])\r\nconst treeData = ref([])\r\n\r\nconst treeProps = {\r\n  children: 'children',\r\n  label:    'label',\r\n  disabled: 'disabled'\r\n}\r\n\r\n//  props.groupBy  treeData\r\nwatch([() => props.groupBy], () => {\r\n  treeData.value = buildTree()\r\n})\r\n\r\n//  build\r\nonMounted(async () => {\r\n  const [eRes, dRes, tRes] = await Promise.all([\r\n    ReferenceDataService.getEmployeeData(),\r\n    ReferenceDataService.getDepartmentData(),\r\n    ReferenceDataService.getTitleData()\r\n  ])\r\n  console.log(\"eRes.data:\",eRes.data)\r\n    //  id\r\n    const excludedIds = ['mis', 'TW0004'];\r\n\r\n    flatEmployees.value = eRes.data\r\n      // 1)  Emp_status\r\n      .filter(e => e.emp_status === 'Active')\r\n      // 2)  id \r\n      .filter(e => !excludedIds.includes(String(e.id).trim()));\r\n  flatDepartments.value = dRes.data\r\n  flatTitles.value      = tRes.data\r\n  treeData.value        = buildTree()\r\n})\r\n\r\nconst flatEmployees   = ref([])\r\nconst flatDepartments = ref([])\r\nconst flatTitles      = ref([])\r\n\r\n// \r\nfunction sortTree(nodes){\r\n  nodes.sort((a,b)=> (a.sortId||0)-(b.sortId||0))\r\n  nodes.forEach(n=>n.children && sortTree(n.children))\r\n}\r\nfunction pruneEmptyGroups(nodes){\r\n  return nodes\r\n    .map(n=>({\r\n      ...n,\r\n      children: n.children ? pruneEmptyGroups(n.children) : []\r\n    }))\r\n    .filter(n=> n.isGroup ? n.children.length>0 : true)\r\n}\r\n\r\n//  props.groupBy  build tree\r\nfunction buildTree(){\r\n  if(props.groupBy==='Department'){\r\n    // 1.  lookup\r\n    const lookup = {}\r\n    flatDepartments.value.forEach(d=>{\r\n      lookup[d.id] = {\r\n        label:    d.name,\r\n        value:    d.id,\r\n        sortId:   d.sortId,\r\n        disabled: true,\r\n        isGroup:  true,\r\n        children: []\r\n      }\r\n    })\r\n    // 2. \r\n    const roots = []\r\n    flatDepartments.value.forEach(d=>{\r\n      const node = lookup[d.id]\r\n      if(d.p_dpt_id && d.p_dpt_id!=='-1' && lookup[d.p_dpt_id]){\r\n        lookup[d.p_dpt_id].children.push(node)\r\n      } else {\r\n        roots.push(node)\r\n      }\r\n    })\r\n    // 3. \r\n    flatEmployees.value.forEach(e=>{\r\n      const parent = lookup[e.dpt_id]\r\n      if(parent){\r\n        parent.children.push({\r\n          label:    e.name,\r\n          value:    props.returnType==='name'?e.name:e.id,\r\n          sortId:   0,\r\n          disabled: false,\r\n          isGroup:  false\r\n        })\r\n      }\r\n    })\r\n    sortTree(roots)\r\n    return pruneEmptyGroups(roots)\r\n  } else {\r\n    // ===== Title  =====\r\n    // 1.  Title  name \r\n    const groups = {}\r\n    flatTitles.value.forEach(t => {\r\n      if (!groups[t.name]) {\r\n        groups[t.name] = []\r\n      }\r\n      groups[t.name].push(t)\r\n    })\r\n\r\n    // 2.  Title  sortId \r\n    Object.values(groups).forEach(arr =>\r\n      arr.sort((a, b) => (a.sortId || 0) - (b.sortId || 0))\r\n    )\r\n\r\n    // 3. Name  Description  \r\n    const tree = Object.keys(groups).map(name => {\r\n      // Title Name\r\n      const nameNode = {\r\n        label:    name,\r\n        value:    name,\r\n        sortId:   groups[name][0].sortId,\r\n        disabled: true,\r\n        isGroup:  true,\r\n        children: []\r\n      }\r\n      //  Title \r\n      groups[name].forEach(t => {\r\n        // Description \r\n        const descNode = {\r\n          label:    t.description,\r\n          value:    t.id + '_desc',   // or t.description\r\n          sortId:   t.sortId,\r\n          disabled: true,\r\n          isGroup:  true,\r\n          children: []\r\n        }\r\n        // 3.  Title id  description \r\n        flatEmployees.value.forEach(emp => {\r\n          if (emp.title_id === t.id) {\r\n            descNode.children.push({\r\n              label:    emp.name,\r\n              value:    props.returnType === 'name' ? emp.name : emp.id,\r\n              sortId:   0,\r\n              disabled: false,\r\n              isGroup:  false\r\n            })\r\n          }\r\n        })\r\n        //  description\r\n        if (descNode.children.length) {\r\n          // \r\n          // descNode.children.sort((a,b)=>  )\r\n          nameNode.children.push(descNode)\r\n        }\r\n      })\r\n      return nameNode\r\n    })\r\n\r\n    // 4. \r\n    sortTree(tree)\r\n    return pruneEmptyGroups(tree)\r\n  }\r\n}\r\n\r\n// /\r\nfunction handleNodeClick(data, nodeComp){\r\n  if(data.isGroup){\r\n    nodeComp.expanded = !nodeComp.expanded\r\n  } else {\r\n    const checked = internalValueArray.value.includes(data.value)\r\n    treeRef.value.setChecked(data.value, !checked)\r\n  }\r\n}\r\n\r\n// watch  internalValueArray\r\nwatch(() => props.modelValue, empArr => {\r\n  internalValueArray.value = empArr.map(emp => emp.id)\r\n  if (treeRef.value) {\r\n    treeRef.value.setCheckedKeys(internalValueArray.value)\r\n  }\r\n}, { immediate: true })\r\n\r\n// \r\nfunction onCheckChange() {\r\n  // 1)  key id\r\n  const checkedIds = treeRef.value.getCheckedKeys(true)\r\n  internalValueArray.value = checkedIds\r\n\r\n  // 2)  flatEmployees \r\n  const selectedEmps = flatEmployees.value.filter(emp =>\r\n    checkedIds.includes(emp.id)\r\n  )\r\n\r\n  console.log(selectedEmps);\r\n\r\n  // 3)  emit \r\n  emit('update:modelValue', selectedEmps)\r\n  emit('change', selectedEmps)\r\n}\r\n\r\n// \r\nfunction filterNodes(val, data){\r\n  return data.label.toLowerCase().includes(val.toLowerCase())\r\n}\r\n\r\n// \r\nfunction clearSelection(){\r\n  internalValueArray.value = []\r\n  treeRef.value.setCheckedKeys([])\r\n  emit('update:modelValue', [])\r\n  emit('change', [])\r\n}\r\n</script>\r\n","import script from \"./Tree-Employee.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./Tree-Employee.vue?vue&type=script&lang=js&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <el-card class=\"card\" :body-style=\"{ padding: '1rem' }\">\r\n      <template #header>\r\n        <div class=\"header-wrap\">\r\n          <!--  -->\r\n          <!-- <div class=\"selected-label\">\r\n            <span>\r\n              \r\n              <template v-if=\"mode==='insert'\">()</template>\r\n              <template v-else-if=\"mode==='notify'\">()</template>\r\n            </span>\r\n          </div> -->\r\n          <!--  -->\r\n          <div class=\"group-controls\">\r\n            <!--  -->\r\n            <div class=\"control-item\">\r\n              <div class=\"control-label\"></div>\r\n              <el-popover placement=\"bottom\" trigger=\"click\" width=\"220\">\r\n                <TreeEmployee v-model=\"internalList\" groupBy=\"Department\" />\r\n                <template #reference>\r\n                  <el-button size=\"mini\" icon=\"el-icon-s-cooperation\" circle />\r\n                </template>\r\n              </el-popover>\r\n            </div>\r\n            <!--  -->\r\n            <div class=\"control-item\">\r\n              <div class=\"control-label\"></div>\r\n              <el-popover placement=\"bottom\" trigger=\"click\" width=\"220\">\r\n                <TreeEmployee v-model=\"internalList\" groupBy=\"Title\" />\r\n                <template #reference>\r\n                  <el-button size=\"mini\" icon=\"el-icon-s-custom\" circle />\r\n                </template>\r\n              </el-popover>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <!--  -->\r\n      <p v-for=\"emp in internalList\" :key=\"emp.id\">{{ emp.name }}</p>\r\n      <p v-if=\"internalList.length === 0\"></p>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { computed,defineProps,defineEmits } from 'vue'\r\nimport TreeEmployee from '@/components/Common/Tree/Tree-Employee.vue'\r\nconst props = defineProps({\r\n  modelValue: { type: Array, default: () => [] },\r\n  mode:       { type: String, default: 'insert', validator: v => ['insert','notify'].includes(v) }\r\n})\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\n// \r\nconst internalList = computed({\r\n  get: () => props.modelValue,\r\n  set: v => emit('update:modelValue', v)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 10px;\r\n}\r\n.item:nth-child(1) { grid-area: 1 / 1 / 2 / 2; }\r\n.item:nth-child(2) { grid-area: 1 / 2 / 2 / 3; }\r\n.item:nth-child(3) { grid-area: 1 / 3 / 2 / 4; }\r\n\r\n.card{\r\n  width: 55rem;\r\n}\r\n.group-controls {\r\n  display: flex;\r\n  gap: 1.5rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .card{\r\n    width: 18rem;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Custom_List_Insert_Notify.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Custom_List_Insert_Notify.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Custom_List_Insert_Notify.vue?vue&type=style&index=0&id=cb6da07c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cb6da07c\"]])\n\nexport default __exports__","\r\nlet axiosInstance;\r\n\r\nexport function setFormAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\n\r\n// Controller Path\r\nconst controllerPath = 'Form';\r\n\r\nexport default {\r\n\r\n\r\n  createForm(formData) {\r\n      return api().post(`${controllerPath}/documents`, formData, {\r\n    });\r\n  },\r\n\r\n  SaveAndApproval(docID, payload) {\r\n    return api().put(`${controllerPath}/SaveAndApproval/${docID}`, payload);\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   */\r\n  getFormById(formId) {\r\n    return api().get(`${controllerPath}/documents/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   * @param {Object} formData {serialId, formName...}\r\n   */\r\n  updateForm(formId, formData) {\r\n    return api().put(`${controllerPath}/documents/${formId}`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formId ID\r\n   */\r\n  deleteForm(formId) {\r\n    return api().delete(`${controllerPath}/documents/${formId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  deleteFormByDocID(docType,docID) {\r\n    return api().delete(`${controllerPath}/document/${docType}/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  \r\n\r\n  getDocDetail(docType,docID){\r\n    return api().get(`${controllerPath}/document-detail/${docType}/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  \r\n  getDocsByCR_Id(userId){\r\n    return api().get(`${controllerPath}/documents/CR/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getDocTypes(){\r\n    return api().get(`${controllerPath}/documentTypes`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n\r\n  deleteAllDocument() {\r\n    return api().delete(`${controllerPath}/ALLdocument`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n  \r\n  getDocumentFiles(docType,docID) {\r\n    return api().get(`${controllerPath}/files/${docType}/${docID}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getCompletedDocuments(userId) {\r\n    return api().get(`${controllerPath}/documents/Completed/${userId}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  getLeaveTypeRules() {\r\n    return api().get(`${controllerPath}/leave-type-rules`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} userId ID\r\n   * @param {number} year \r\n   */\r\n  getUserLeaveRecords(userId, year) {\r\n    return api().get(`${controllerPath}/user-leave-records/${userId}/${year}`, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n\r\n};\r\n","import { defineStore } from 'pinia';\r\nimport ReferenceDataService from '../service/ReferenceDataService';\r\n\r\nexport const useEmployeeStore = defineStore('employee', {\r\n  state: () => ({\r\n    //  { id, name, ... }\r\n    employees: [],\r\n  }),\r\n  actions: {\r\n    // \r\n    async fetchEmployeeData() {\r\n      try {\r\n        const res = await ReferenceDataService.getEmployeeData();\r\n        if (res && res.data) {\r\n          this.employees = res.data;\r\n        }\r\n        // console.log(\"employee.js => fetchEmployeeData \\n \",res);\r\n      } catch (error) {\r\n        console.error('Error fetching employee data:', error);\r\n      }\r\n    },\r\n    //  id  fetch \r\n    async getEmployeeName(id) {\r\n      if (!this.employees.length) {\r\n        try {\r\n          \r\n          const res = await ReferenceDataService.getEmployeeData();\r\n          if (res && res.data) {\r\n            this.employees = res.data;\r\n          }\r\n          // console.log(\"getEmployeeName:\", res);\r\n        } catch (error) {\r\n          console.error('Error fetching employee data:', error);\r\n        }\r\n      }\r\n      const employee = this.employees.find(item => item.id === id);\r\n      return employee ? employee.name : '';\r\n    },\r\n    \r\n    //  id  id fetch \r\n    async getEmployeeArea(id) {\r\n      if (!this.employees.length) {\r\n        try {\r\n          \r\n          const res = await ReferenceDataService.getEmployeeData();\r\n          if (res && res.data) {\r\n            this.employees = res.data;\r\n          }\r\n          // console.log(\"getEmployeeName:\", res);\r\n        } catch (error) {\r\n          console.error('Error fetching employee data:', error);\r\n        }\r\n      }\r\n      const employee = this.employees.find(item => item.id === id);\r\n      return employee ? employee.area_id : '';\r\n    },\r\n  },\r\n  //  persist \r\n  persist: true,\r\n});\r\n","<template>\r\n  <span>{{ employeeName }}</span>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineProps, watch } from 'vue'\r\nimport { useEmployeeStore } from '../../../stores/employee.js'\r\n\r\nconst props = defineProps({\r\n  employeeId: {\r\n    type: [String, Number],\r\n    default: ''\r\n  }\r\n})\r\n\r\nconst employeeName = ref('')\r\nconst employeeStore = useEmployeeStore()\r\n\r\nconst fetchEmployeeName = async (id) => {\r\n  // console.log('fetchEmployeeName called with:', id)\r\n  if (id) {\r\n    const result = await employeeStore.getEmployeeName(id)\r\n    // console.log('Fetched employee name:', result, 'for id:', id)\r\n    employeeName.value = result\r\n  } else {\r\n    employeeName.value = ''\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchEmployeeName(props.employeeId)\r\n})\r\n\r\nwatch(() => props.employeeId, (newVal) => {\r\n  // console.log('employeeId changed:', newVal)\r\n  fetchEmployeeName(newVal)\r\n})\r\n</script>\r\n","import script from \"./Employee-IdToName.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Employee-IdToName.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from 'pinia';\r\nimport ReferenceDataService from '../../src/service/ReferenceDataService';\r\n\r\nexport const useDeptStore = defineStore('department', {\r\n  state: () => ({\r\n    //  { id, name }\r\n    departments: [],\r\n  }),\r\n  actions: {\r\n    // \r\n    async fetchDepartmentData() {\r\n      try {\r\n        const res = await ReferenceDataService.getDepartmentData();\r\n        if (res && res.data) {\r\n          this.departments = res.data;\r\n        }\r\n        // console.log(res);\r\n      } catch (error) {\r\n        console.error('Error fetching department data:', error);\r\n      }\r\n    },\r\n    \r\n    //  id  fetch \r\n    async getDepartmentName(id) {\r\n      //  departments \r\n      if (!this.departments.length) {\r\n        try {\r\n          const res = await ReferenceDataService.getDepartmentData();\r\n          if (res && res.data) {\r\n            this.departments = res.data;\r\n          }\r\n          // console.log(res);\r\n        } catch (error) {\r\n          console.error('Error fetching department data:', error);\r\n        }\r\n      }\r\n      //  id \r\n      const dept = this.departments.find(item => item.id === id);\r\n      return dept ? dept.name : '';\r\n    },\r\n  },\r\n  //  persist\r\n  persist: true,\r\n});\r\n","<template>\r\n  <span>{{ deptName }}</span>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineProps, watch } from 'vue'\r\nimport { useDeptStore } from '../../../stores/dept.js'\r\n\r\nconst props = defineProps({\r\n  deptId: {\r\n    type: [String, Number],\r\n    default: ''\r\n  },\r\n  mode: {\r\n    type: String,\r\n    deault: 'Name'\r\n  }\r\n})\r\n\r\nconst deptName = ref('')\r\nconst dept = useDeptStore()\r\n\r\nconst fetchDeptName = async (deptId) => {\r\n  if (deptId) {\r\n    deptName.value = await dept.getDepartmentName(deptId)\r\n  } else {\r\n    deptName.value = ''\r\n  }\r\n}\r\n\r\n\r\nonMounted(() => {\r\n    fetchDeptName(props.deptId)\r\n\r\n})\r\n\r\nwatch(() => props.deptId, (newVal) => {\r\n  fetchDeptName(newVal)\r\n})\r\n</script>\r\n","import script from \"./Dept-IdToName.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Dept-IdToName.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from 'pinia';\r\nimport ReferenceDataService from '../../src/service/ReferenceDataService';\r\n\r\nexport const useTitleStore = defineStore('title', {\r\n  state: () => ({\r\n    //  { id, name }\r\n    titles: [],\r\n  }),\r\n  actions: {\r\n    // \r\n    async fetchTitleData() {\r\n      try {\r\n        const res = await ReferenceDataService.getTitleData();\r\n        if (res && res.data) {\r\n          this.titles = res.data;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching title data:', error);\r\n      }\r\n    },\r\n    //  id \r\n    async getTitleName(id) {\r\n      // \r\n      if (!this.titles.length) {\r\n        try {\r\n          const res = await ReferenceDataService.getTitleData();\r\n          if (res && res.data) {\r\n            this.titles = res.data;\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching title data:', error);\r\n        }\r\n      }\r\n      const title = this.titles.find(item => item.id === id);\r\n      return title ? title.name : '';\r\n    },\r\n\r\n    //  id \r\n    async getTitleDescription(id) {\r\n      if (!this.titles.length) {\r\n        try {\r\n          const res = await ReferenceDataService.getTitleData();\r\n          // console.log(\"getTitleDescription:\",res.data);\r\n          if (res && res.data) {\r\n            this.titles = res.data;\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching title data:', error);\r\n        }\r\n      }\r\n      const title = this.titles.find(item => item.id === id);\r\n      // console.log(title);\r\n      return title ? title.description : '';\r\n    },\r\n  },\r\n  persist: true,\r\n});\r\n","<template>\r\n  <span>{{ titleName }}</span>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineProps, watch } from 'vue'\r\nimport { useTitleStore } from '@/stores/title.js'\r\n\r\n//  props mode \r\nconst props = defineProps({\r\n  titleId: {\r\n    type: [String, Number],\r\n    default: ''\r\n  },\r\n  mode: {\r\n    type: String,\r\n    default: 'Name' //  'Name' mode \r\n  }\r\n})\r\n\r\nconst titleName = ref('')\r\nconst title = useTitleStore()\r\n\r\n// \r\nconst fetchTitleName = async (titleId) => {\r\n\r\n  if (titleId) {\r\n    titleName.value = await title.getTitleName(titleId)\r\n  } else {\r\n    titleName.value = ''\r\n  }\r\n}\r\n\r\n\r\n\r\n// \r\nconst fetchTitleDescription = async (titleId) => {\r\n  if (titleId) {\r\n    titleName.value = await title.getTitleDescription(titleId)\r\n  } else {\r\n    titleName.value = ''\r\n  }\r\n}\r\n\r\n//  mode \r\nconst updateTitle = async () => {\r\n  if (props.mode === 'Description') {\r\n    await fetchTitleDescription(props.titleId)\r\n  } else {\r\n    await fetchTitleName(props.titleId)\r\n  }\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  updateTitle()\r\n})\r\n\r\n//  titleId \r\nwatch(() => props.titleId, () => {\r\n  updateTitle()\r\n})\r\n\r\n//  mode \r\nwatch(() => props.mode, () => {\r\n  updateTitle()\r\n})\r\n</script>","import script from \"./Title-IdToName.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Title-IdToName.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"flow-wrapper\" >\r\n    <div class=\"form-flow\">\r\n          <ProgressSpinner v-if=\"loading\" style=\"width: 50px; height: 50px\" strokeWidth=\"5\" fill=\"transparent\"\r\n          animationDuration=\"1s\" aria-label=\"Custom ProgressSpinner\" />\r\n      <div\r\n        v-for=\"(step, index) in groupedSteps\"\r\n        :key=\"index\"\r\n        class=\"step-section\"\r\n      >\r\n        <div class=\"step-header\">\r\n          <!-- <span class=\"step-order\">{{ step.viewOrder }}</span> -->\r\n          <div class=\"step-divider\"></div>\r\n        </div>\r\n\r\n        <Card\r\n          class=\"nested-card\"\r\n          :style=\"{\r\n              backgroundColor: getCardBackgroundColor(step)\r\n            }\"\r\n        >\r\n          <!--  -->\r\n          <div style=\"font-size: 0.8em; color: gray; padding: 0.5rem 1rem;\">\r\n            stepID: {{ step.stepID }} | CurrentStepID.value: {{ currentStepID.value }} | Match: {{ step.stepID === currentStepID.value }}\r\n          </div>\r\n\r\n        <template #title>\r\n          <div\r\n            :style=\"{color: getTitleColor(step)}\">\r\n          <span class=\"mr-2\" v-if=\"step.stepTypeDescription\" >\r\n\r\n                <!--  -->\r\n                <el-icon v-if=\"step.stepType === 0\">\r\n                    <Document />\r\n                </el-icon>\r\n\r\n                <!--  -->\r\n                <el-icon v-else-if=\"step.stepType === 5\">\r\n                    <CirclePlusFilled />\r\n                </el-icon>\r\n                <!--  -->\r\n                <el-icon v-else-if=\"step.stepType === 8\">\r\n                    <RefreshLeft />\r\n                </el-icon>\r\n                <!--  -->\r\n                <el-icon v-else-if=\"step.stepType === 9\">\r\n                    <Edit />\r\n                </el-icon>\r\n                <!--  step.stepType === 99  PrimeIcons  -->\r\n                <i v-else-if=\"step.stepType === 99\" class=\"pi pi-flag\"></i>\r\n                <!--  step.stepType === 6  PrimeIcons  megaphone  -->\r\n                <i v-else-if=\"step.stepType === 6\" class=\"pi pi-megaphone\"></i>\r\n                <!--  -->\r\n                <i v-else-if=\"step.isVirtualNode\" class=\"pi pi-hourglass\"></i>\r\n                <!--  step.stepStatus === ''  Element Plus  EditPen  -->\r\n                <el-icon v-else-if=\"step.stepStatus === ''\"><EditPen /></el-icon>\r\n                <el-icon v-else-if=\"step.stepStatus === ''\"><Finished /></el-icon>\r\n                <!--  step.stepType === 1  step.stepStatus !== ''  PrimeIcons  -->\r\n                <el-icon v-else-if=\"step.stepType === 1 && step.stepStatus !== ''\" ><Finished /></el-icon>\r\n            </span>\r\n            <span \r\n              v-if=\"step.stepTypeDescription == ''\"   \r\n            >\r\n              {{ step.stepStatus }}\r\n            </span>\r\n            <span v-else>\r\n              {{ step.stepTypeDescription }}\r\n            </span>\r\n          </div>\r\n\r\n          </template>\r\n          <template #subtitle>\r\n            <i v-if=\"step.actionDate\" class=\"pi pi-clock p-mr-2 mr-2\"></i>\r\n            <span style=\"font-size: 1rem;\" >{{ step.actionDate ? formatDate(step.actionDate) : '' }}</span>\r\n          </template>\r\n\r\n          <!--  -->\r\n        <template #content >\r\n          <div         \r\n            v-for=\"(user, uidx) in step.users\"\r\n            :key=\"uidx\"\r\n            class=\"user-block\"\r\n          >\r\n            <!--  -->\r\n            <div class=\"user-line\">\r\n              <i v-if=\"user.userID\" class=\"pi pi-user icon\"></i>\r\n              <span class=\"dept\">\r\n                <DeptIdToName :dept-id=\"user.userDeptID\" />\r\n              </span>\r\n              <span class=\"title\">\r\n                <TitleIdToName :title-id=\"user.userTitleID\" mode=\"Description\" />\r\n              </span>\r\n              <span class=\"name\">\r\n                <EmployeeIdToName :employee-id=\"user.userID\" />\r\n              </span>\r\n              <span>\r\n\r\n                <el-icon style=\"font-size:1.2rem\" v-if=\"user.userStepStatus ==='' \">\r\n                  <CircleCheckFilled />\r\n                </el-icon>\r\n              </span>\r\n            </div>\r\n\r\n            <!--  user  comment  -->\r\n            <div v-if=\"user.comment\" class=\"user-comment\">\r\n              <el-icon style=\"font-size: 1.2rem\" ><ChatLineRound /></el-icon>\r\n              <!--  ID -->\r\n              {{ user.comment }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n          <template #footer>\r\n            <div\r\n              v-for=\"(cmt, idx) in step.comments\"\r\n              :key=\"idx\"\r\n              class=\"comment-line\"\r\n            >\r\n            <el-icon><ChatLineRound /></el-icon>\r\n              <EmployeeIdToName :employee-id=\"cmt.userID\" />{{ cmt.comment }}\r\n            </div>\r\n          </template>\r\n\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport WorkflowService from '@/service/WorkflowService'\r\nimport { ref, computed, onMounted,defineProps } from \"vue\";\r\nimport Card from 'primevue/card';\r\nimport EmployeeIdToName from '@/components/Common/IdToName/Employee-IdToName'\r\nimport DeptIdToName from '@/components/Common/IdToName/Dept-IdToName'\r\nimport TitleIdToName from '@/components/Common/IdToName/Title-IdToName.vue';\r\nimport ProgressSpinner  from 'primevue/progressspinner'\r\n\r\nconst props = defineProps({\r\n  visible: Boolean,\r\n  docId: {\r\n    type: [String, Number],\r\n    required: true\r\n  }\r\n})\r\n\r\nconst approvalProcessData = ref([]);\r\nconst currentStepID = ref(null);\r\nconst loading = ref(true);\r\nconst stepTypeEnum = ref();\r\n\r\nconst stepTypeMap = computed(() => {\r\n  return stepTypeEnum.value?.reduce((map, item) => {\r\n    map[item.value] = item.description;\r\n    return map;\r\n  }, {}) || {};\r\n});\r\n\r\n\r\nconst getDocWorkflowDetail = async (docID) => {\r\n  loading.value = true;\r\n  try {\r\n    const res = await WorkflowService.getApprovalSteps(docID);\r\n    console.log('API :', res.data);\r\n    \r\n    // \r\n    let dataArray = res.data || [];\r\n    \r\n    // \r\n    if (!Array.isArray(dataArray)) {\r\n      if (typeof dataArray === 'object') {\r\n        dataArray = Object.values(dataArray);\r\n      } else {\r\n        dataArray = [];\r\n      }\r\n    }\r\n    \r\n    // \r\n    const sorted = dataArray.sort((a, b) => {\r\n      const aOrder = a.viewOrder || a.stepOrder || 0;\r\n      const bOrder = b.viewOrder || b.stepOrder || 0;\r\n      return aOrder - bOrder;\r\n    });\r\n    \r\n    // \r\n    approvalProcessData.value = sorted;\r\n    currentStepID.value = sorted[0]?.currentStepID ?? null;\r\n    console.log(':', approvalProcessData.value);\r\n  } catch (err) {\r\n    console.error('', err);\r\n    approvalProcessData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\nfunction getStepTypeDescription(stepType) {\r\n  return stepTypeMap.value[Number(stepType)] || '';\r\n}\r\n\r\n// \r\nfunction getCardBackgroundColor(step) {\r\n  // \r\n  if (step.hasVirtualNodeInFlow) {\r\n    return step.isVirtualNode ? '#e8f5e9' : 'white';\r\n  }\r\n  // \r\n  return step.currentStepID == step.stepID ? '#e8f5e9' : 'white';\r\n}\r\n\r\n// \r\nfunction getTitleColor(step) {\r\n  // \r\n  if (step.hasVirtualNodeInFlow) {\r\n    return step.isVirtualNode ? '#2E7D32' : undefined;\r\n  }\r\n  // \r\n  return step.currentStepID == step.stepID ? '#2E7D32' : undefined;\r\n}\r\n\r\nconst fetchWF_Enum = async () => {\r\n  const res = await WorkflowService.getEnum_StepTypeEnum();\r\n  stepTypeEnum.value = res.data;\r\n};\r\n\r\nconst groupedSteps = computed(() => {\r\n  const grouped = [];\r\n  const processedSteps = new Set();\r\n  let hasVirtualNode = false;\r\n  \r\n  approvalProcessData.value.forEach((step) => {\r\n    // \r\n    if (processedSteps.has(step.stepID)) {\r\n      return;\r\n    }\r\n    \r\n    // isSameStep = true\r\n    if (step.isSameStep && step.sameStepOrderAt) {\r\n      //  sameStepOrderAt \r\n      const sameSteps = approvalProcessData.value.filter(s => \r\n        s.sameStepOrderAt === step.sameStepOrderAt && s.isSameStep\r\n      );\r\n      \r\n      // \r\n      const mergedStep = {\r\n        ...step,\r\n        stepTypeDescription: getStepTypeDescription(step.stepType || 0),\r\n        users: sameSteps.map(s => ({\r\n          userID: s.userID || '',\r\n          userDeptID: s.userDeptID || '',\r\n          userTitleID: s.userTitleID || '',\r\n          userStepStatus: s.stepStatus || s.status || '',\r\n          userStepTypeDescription: getStepTypeDescription(s.stepType || 0),\r\n          comment: s.comment || '',\r\n          action: s.action || ''\r\n        }))\r\n      };\r\n      \r\n      grouped.push(mergedStep);\r\n      \r\n      // \r\n      sameSteps.forEach(s => processedSteps.add(s.stepID));\r\n    } else {\r\n      // \r\n      const singleStep = {\r\n        ...step,\r\n        stepTypeDescription: getStepTypeDescription(step.stepType || 0),\r\n        users: [{\r\n          userID: step.userID || '',\r\n          userDeptID: step.userDeptID || '',\r\n          userTitleID: step.userTitleID || '',\r\n          userStepStatus: step.stepStatus || step.status || '',\r\n          userStepTypeDescription: getStepTypeDescription(step.stepType || 0),\r\n          comment: step.comment || '',\r\n          action: step.action || ''\r\n        }]\r\n      };\r\n      \r\n      grouped.push(singleStep);\r\n      processedSteps.add(step.stepID);\r\n    }\r\n    \r\n    // stepType = 8\r\n    if (step.stepType === 8 && step.stepStatus === '') {\r\n      // stepType = 0  roleID = \"INITIATOR\"\r\n      const initiatorStep = approvalProcessData.value.find(s => \r\n        s.stepType === 0 || s.roleID === 'INITIATOR'\r\n      );\r\n      \r\n      const virtualNode = {\r\n        stepID: `virtual-${step.stepID}`,\r\n        stepType: 'virtual',\r\n        stepTypeDescription: '',\r\n        stepStatus: '',\r\n        workflowID: step.workflowID,\r\n        workflowName: step.workflowName,\r\n        stepOrder: step.stepOrder + 0.5, // \r\n        viewOrder: step.viewOrder + 0.5,\r\n        documentID: step.documentID,\r\n        documentTypeName: step.documentTypeName,\r\n        isVirtualNode: true, // \r\n        users: [{\r\n          userID: initiatorStep?.userID || '',\r\n          userDeptID: initiatorStep?.userDeptID || '',\r\n          userTitleID: initiatorStep?.userTitleID || '',\r\n          userStepStatus: '',\r\n          userStepTypeDescription: '',\r\n          comment: '',\r\n          action: ''\r\n        }]\r\n      };\r\n      \r\n      grouped.push(virtualNode);\r\n      hasVirtualNode = true;\r\n    }\r\n  });\r\n  \r\n  // \r\n  grouped.forEach(step => {\r\n    step.hasVirtualNodeInFlow = hasVirtualNode;\r\n  });\r\n  \r\n  return grouped;\r\n});\r\n\r\n\r\n// \r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  const date = new Date(dateString);\r\n  return `${date.getFullYear()}/${String(date.getMonth() + 1).padStart(2, '0')}/${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\r\n};\r\n\r\nonMounted(async () => {\r\n  await fetchWF_Enum();\r\n  await getDocWorkflowDetail(props.docId);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.flow-wrapper {\r\n  width: 100%;\r\n  max-width: 100%;\r\n  margin: 1.5rem auto;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f0 100%); /*  */\r\n  padding: 1.5rem;\r\n  border-radius: 12px;\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12); /*  */\r\n}\r\n\r\n.form-flow {\r\n  width: 100%;\r\n}\r\n\r\n\r\n/*  */\r\n.step-section {\r\n  width: 100%;\r\n  margin-bottom: 0.25rem; /*  */\r\n}\r\n\r\n/*  +  */\r\n.step-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 0.25rem;\r\n}\r\n.step-order {\r\n  font-size: 2.5rem; /*  */\r\n  font-weight: 900; /*  */\r\n  color: #1a3c34; /*  */\r\n  margin-right: 1rem;\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); /*  */\r\n}\r\n.step-divider {\r\n  flex: 1;\r\n  border-top: 4px solid #00a896; /*  */\r\n  border-radius: 2px; /*  */\r\n  margin:1rem;\r\n}\r\n\r\n/*  */\r\n.nested-card {\r\n  width: 100% !important;\r\n  max-width: 100% !important;\r\n  overflow: hidden;\r\n  border: 2px solid #00a896; /*  */\r\n  border-radius: 10px;\r\n  background-color: #ffffff; /*  */\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease; /*  */\r\n}\r\n\r\n/*  PrimeVue Card  */\r\n.nested-card .p-card {\r\n  width: 100% !important;\r\n  max-width: 100% !important;\r\n}\r\n\r\n.nested-card .p-card-body {\r\n  width: 100% !important;\r\n}\r\n.nested-card:hover {\r\n  transform: translateY(-4px); /*  */\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /*  */\r\n}\r\n\r\n/*  PrimeVue  */\r\n.p-card-title {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  color: #1a3c34;\r\n  padding: 1rem 1rem 0;\r\n}\r\n.p-card-subtitle {\r\n  font-size: 1.1rem;\r\n  color: #627d77;\r\n  padding: 0 1rem;\r\n}\r\n.p-card-content {\r\n  padding: 1.5rem; /*  */\r\n  font-size: 1rem;\r\n  line-height: 1.6;\r\n  color: #34495e;\r\n}\r\n.p-card-footer {\r\n  padding: 1rem 1.5rem;\r\n  background-color: #f8fafc;\r\n  border-top: 1px solid #e0e6e8;\r\n}\r\n\r\n.user-line {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;  /*  */\r\n  /*  margin-top/bottom  */\r\n}\r\n\r\n/* Icon  15rem */\r\n.user-line .icon {\r\n\r\n  margin-right: 0rem;  /* icon  */\r\n  flex-shrink: 0;\r\n}\r\n\r\n/*   120px */\r\n.user-line .dept {\r\n  width: 4.5rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/*   200px */\r\n.user-line .title {\r\n  width: 7rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/*   */\r\n.user-line .name {\r\n  width: 3rem;\r\n}\r\n\r\n\r\n@media (max-width: 768px) {\r\n  .flow-wrapper {\r\n    margin: 0.5rem auto;\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .user-line .icon {\r\n    margin-left: 2rem;\r\n    margin-right: 0rem;  /* icon  */\r\n    flex-shrink: 0;\r\n  }\r\n  /*   RWD */\r\n  .user-line .dept {\r\n    width: 3rem;\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  /*  RWD */\r\n  .user-line .title {\r\n    width: 5rem;\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  /*  RWD */\r\n  .user-line .name {\r\n    width: 3rem;\r\n  }\r\n\r\n}\r\n\r\n</style>","import script from \"./Descending_Approval_Node.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Descending_Approval_Node.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Descending_Approval_Node.vue?vue&type=style&index=0&id=b608751c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b608751c\"]])\n\nexport default __exports__","export const documentConfigs = {\r\n  CR: {\r\n    component: 'CorrectionForm', //  Vue \r\n    fields: [\r\n      {label:'',prop:'applyAt',type:'date'},\r\n      {label:'', prop: 'correctionDate', type: 'date' },\r\n      {label:'' ,prop: 'correctionTime', type:'time'},\r\n      {label:'' ,prop: 'applierName', type:'text'},\r\n      {label:'' ,prop: 'applierDptName', type:'text'},\r\n      {label:'' ,prop: 'supervisorName', type:'text'},\r\n      {label:'', prop: 'reason', type: 'textarea' },\r\n    ],\r\n  },\r\n  LR: { // \r\n    component: 'LeaveRequestForm', //  Vue \r\n    fields: [\r\n      { label: '', prop: 'applyDate', type: 'date' },\r\n      { label: '', prop: 'leaveType', type: 'text' },\r\n      { label: '', prop: 'applicantDept', type: 'text' },\r\n      { label: '', prop: 'applicantName', type: 'text' },\r\n      { label: '', prop: 'leaveDateTimeRange', type: 'datetimerange' },\r\n      { label: '', prop: 'agentEmployeeName', type: 'text' },\r\n      { label: '', prop: 'reason', type: 'textarea' },\r\n    ],\r\n  },\r\n  OR: { // \r\n    component: 'OvertimeRequestForm', //  Vue \r\n    fields: [\r\n      { label: '', prop: 'documentId', type: 'text' },\r\n      { label: '/', prop: 'applicantTitleId', type: 'text' }, //  prop \r\n      { label: '', prop: 'applierDptName', type: 'text' }, //  prop \r\n      { label: '', prop: 'isPreOvertime', type: 'boolean' },\r\n      { label: '', prop: 'overtimePersonnel', type: 'array',\r\n        children: [\r\n          { label: '', prop: 'personnelName', type: 'text' },\r\n          { label: '', prop: 'overtimeDateTimeRange', type: 'datetimerange' },\r\n          { label: '', prop: 'overtimeHours', type: 'text' }, // \r\n          { label: '', prop: 'overtimeContent', type: 'textarea' },\r\n          { label: '', prop: 'mealAllowance', type: 'number' },\r\n          { label: '', prop: 'actualOvertime', type: 'text', condition: { prop: 'isPreOvertime', value: false } },\r\n          { label: '', prop: 'actualOvertimeDate', type: 'date', condition: { prop: 'isPreOvertime', value: false } },\r\n          { label: '', prop: 'actualOvertimeTimeRange', type: 'datetimerange', condition: { prop: 'isPreOvertime', value: false } }, //  prop \r\n          { label: '', prop: 'actualOvertimeHours', type: 'text', condition: { prop: 'isPreOvertime', value: false } }, // \r\n          { label: '', prop: 'actualOvertimeContent', type: 'textarea', condition: { prop: 'isPreOvertime', value: false } },\r\n        ]\r\n      },\r\n      { label: '', prop: 'supervisorName', type: 'text' },\r\n    ],\r\n  },\r\n  LC: { // \r\n    component: 'LeaveCancellationForm', //  Vue \r\n    fields: [\r\n      { label: '', prop: 'applyDate', type: 'date' },\r\n      { label: '', prop: 'applierName', type: 'text' },\r\n      { label: '', prop: 'supervisor', type: 'text' },\r\n      { label: '', prop: 'selectedDocument', type: 'text' },\r\n    ],\r\n  },\r\n};","import { defineStore } from 'pinia';\r\nimport ReferenceDataService from '../../src/service/ReferenceDataService';\r\n\r\nexport const useAreaStore = defineStore('area', {\r\n  state: () => ({\r\n    //  { id, name }\r\n    areas: [],\r\n    regions:[],\r\n  }),\r\n  actions: {\r\n    // \r\n    async fetchAreaData() {\r\n      try {\r\n        const res = await ReferenceDataService.getAreaData();\r\n        if (res && res.data) {\r\n          this.areas = res.data;\r\n        }\r\n        console.log(res);\r\n      } catch (error) {\r\n        console.error('Error fetching area data:', error);\r\n      }\r\n    },\r\n    //  id  fetch \r\n    async getAreaName(id) {\r\n      //  areas \r\n      if (!this.areas.length) {\r\n        \r\n        try {\r\n          const res = await ReferenceDataService.getAreaData();\r\n          if (res && res.data) {\r\n            this.areas = res.data;\r\n          }\r\n          console.log(\"getAreaName:\",res);\r\n        } catch (error) {\r\n          console.error('Error fetching area data:', error);\r\n        }\r\n      }\r\n      const area = this.areas.find(item => item.id === id);\r\n      // console.log(\"area:\",area);\r\n      return area ? area.area  : '';\r\n    },\r\n\r\n    async getAreaRegion(id) {\r\n      //  areas \r\n      if (!this.areas.length) {\r\n        \r\n        try {\r\n          const res = await ReferenceDataService.getAreaData();\r\n          if (res && res.data) {\r\n            this.areas = res.data;\r\n          }\r\n          // console.log(\"getAreaName:\",res);\r\n        } catch (error) {\r\n          console.error('Error fetching area data:', error);\r\n        }\r\n      }\r\n      \r\n      const area = this.areas.find(item => item.id === id);\r\n      // console.log(\"getAreaRegion:\",area);\r\n      // console.log(\"area:\",area);\r\n      return area ? area.region  : '';\r\n    },\r\n\r\n    async getAreaDistrict(id) {\r\n      //  areas \r\n      if (!this.areas.length) {\r\n        \r\n        try {\r\n          const res = await ReferenceDataService.getAreaData();\r\n          if (res && res.data) {\r\n            this.areas = res.data;\r\n          }\r\n          // console.log(\"getAreaName:\",res);\r\n        } catch (error) {\r\n          console.error('Error fetching area data:', error);\r\n        }\r\n      }\r\n      \r\n      const area = this.areas.find(item => item.id === id);\r\n      // console.log(\"getAreaRegion:\",area);\r\n      // console.log(\"area:\",area);\r\n      return area ? area.district  : '';\r\n    },\r\n  },\r\n  //  persist localStorage \r\n  persist: true,\r\n});\r\n","import { defineStore } from 'pinia';\r\nimport ReferenceDataService from '../../src/service/ReferenceDataService';\r\n\r\nexport const useRoleStore = defineStore('role', {\r\n  state: () => ({\r\n    //  { id, sort_id, name, created_at, remark, area_id, dpt_id }\r\n    roles: [],\r\n  }),\r\n  actions: {\r\n    // \r\n    async fetchRoleData() {\r\n      try {\r\n        const res = await ReferenceDataService.getRoleData();\r\n        console.log(res);\r\n        if (res && res.data) {\r\n          this.roles = res.data;\r\n        }\r\n        console.log('Roles data:', res);\r\n      } catch (error) {\r\n        console.error('Error fetching role data:', error);\r\n      }\r\n    },\r\n    //  id \r\n    getRoleName(id) {\r\n      const role = this.roles.find(item => item.id === id);\r\n      return role ? role.name : '';\r\n    },\r\n  },\r\n  //  persist\r\n  persist: true,\r\n});\r\n","// src/stores/idToName.js\r\nimport { useAreaStore } from './area';\r\nimport { useDeptStore } from './dept';\r\nimport { useTitleStore } from './title';\r\nimport { useEmployeeStore } from './employee';\r\nimport { useRoleStore } from './role';\r\n\r\nexport async function getAreaName(id) {\r\n  const areaStore = useAreaStore();\r\n  return areaStore.getAreaName(id);\r\n}\r\n\r\nexport async function getDepartmentName(id) {\r\n  const deptStore = useDeptStore();\r\n  return deptStore.getDepartmentName(id);\r\n}\r\n\r\nexport async function getEmployeeName(id) {\r\n  const employeeStore = useEmployeeStore();\r\n  return employeeStore.getEmployeeName(id);\r\n}\r\n\r\nexport async function getTitleName(id) {\r\n  const titleStore = useTitleStore();\r\n  return titleStore.getTitleName(id);\r\n}\r\n\r\nexport async function getRoleName(id) {\r\n  const roleStore = useRoleStore();\r\n  return roleStore.getRoleName(id);\r\n}\r\n\r\n//  default export\r\nexport default {\r\n  getAreaName,\r\n  getDepartmentName,\r\n  getEmployeeName,\r\n  getTitleName,\r\n  getRoleName\r\n};\r\n","<template>\r\n    <span>{{ areaName }}</span>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, defineProps, watch } from 'vue'\r\n  import { useAreaStore } from '../../../stores/area.js'\r\n  \r\n  const props = defineProps({\r\n    areaId: {\r\n      type: [String, Number],\r\n      default: ''\r\n    }\r\n  })\r\n  \r\n  const areaName = ref('')\r\n  const areaStore = useAreaStore()\r\n  \r\n  const fetchAreaName = async (id) => {\r\n    // console.log('fetchAreaName called with:', id)\r\n    if (id) {\r\n      const result = await areaStore.getAreaRegion(id)\r\n      // console.log('Fetched area name:', result, 'for id:', id)\r\n      areaName.value = result\r\n      //  console.log(\"id:\",id)\r\n      //  console.log(\"areaName.value:\",areaName.value)\r\n\r\n    } else {\r\n      areaName.value = ''\r\n    }\r\n  }\r\n  \r\n  onMounted(() => {\r\n    fetchAreaName(props.areaId)\r\n  })\r\n  \r\n  watch(() => props.areaId, (newVal) => {\r\n    // console.log('areaId changed:', newVal)\r\n    fetchAreaName(newVal)\r\n  })\r\n  </script>\r\n  ","import script from \"./Area-IdToName.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Area-IdToName.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"container\" style=\"margin: 0 auto;\">\r\n    <el-form\r\n      ref=\"applyFormRef\"\r\n      class=\"workflow-form invoice\"\r\n      :style=\"formStyle\"\r\n      :model=\"applyForm\"\r\n      :rules=\"rules\"\r\n      label-width=\"8rem\"\r\n      status-icon\r\n    >\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"applyDate\" class=\"form-item-responsive\">\r\n        <el-date-picker\r\n          v-model=\"applyForm.applyDate\"\r\n          type=\"date\"\r\n          placeholder=\"\"\r\n          style=\"width: 100%;\"\r\n          disabled=\"true\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"correctionDate\" class=\"form-item-responsive\">\r\n        <el-date-picker\r\n          v-model=\"applyForm.correctionDate\"\r\n          type=\"date\"\r\n          placeholder=\"\"\r\n          style=\"width: 100%;\"\r\n          :disabled=\"isDisabled\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"correctionTime\" class=\"form-item-responsive\">\r\n        <el-time-picker\r\n          v-model=\"applyForm.correctionTime\"\r\n          format=\"HH:mm\"\r\n          value-format=\"HH:mm\"\r\n          placeholder=\"\"\r\n          :disabled=\"isDisabled\"\r\n          style=\"width: 100%;\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <!-- / -->\r\n      <el-form-item label=\"\" prop=\"correctionType\" class=\"form-item-responsive\">\r\n        <el-radio-group  v-model=\"applyForm.correctionType\" :disabled=\"isDisabled\" >\r\n          <el-radio  label=\"\" value=\"ClockIn\" border/>\r\n          <el-radio  label=\"\" value=\"ClockOut\" border/>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item prop=\"employeeId\" style=\"display: None;\" class=\"form-item-responsive\">\r\n        <el-input v-model=\"applyForm.employeeId\" :disabled=\"isDisabled\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"\" prop=\"employeeName\" class=\"form-item-responsive\">\r\n        <template v-if=\"mode === 'WF'\">\r\n          <span>{{ applyForm.employeeName }}</span>\r\n        </template>\r\n        <template v-else>\r\n          <el-autocomplete\r\n            v-model=\"applyForm.employeeName\"\r\n            :fetch-suggestions=\"querySearchEmployee\"\r\n            placeholder=\"\"\r\n            @select=\"onEmployeeSelect\"\r\n            style=\"width: 100%;\"\r\n            clearable\r\n            :trigger-on-focus=\"false\"\r\n            :disabled=\"isDisabled\"\r\n          />\r\n        </template>\r\n      </el-form-item>\r\n\r\n      <!-- / -->\r\n      <el-form-item label=\"/\" class=\"form-item-responsive\">\r\n        <div class=\"flex items-center gap-2\">\r\n          <AreaIdToName :areaId=\"employeeArea\"></AreaIdToName>\r\n          <TitleIdToName mode=\"Description\" :titleId=\"employeeTitle\"></TitleIdToName>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"employeeDpt\" class=\"form-item-responsive\">\r\n        <DeptIdToName :deptId=\"applyForm.employeeDpt\" />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"applierName\" v-if=\"!mode==='WF'\" class=\"form-item-responsive\">\r\n        <el-input v-model=\"applyForm.applierName\" :disabled=\"isDisabled\"/>\r\n      </el-form-item>\r\n\r\n      <!--  () -->\r\n      <el-form-item label=\"\" prop=\"supervisor\" class=\"form-item-responsive\">\r\n        <template v-if=\"mode === 'WF'\">\r\n          <label> {{ applyForm.supervisor }}</label>\r\n        </template>\r\n        <template v-else>\r\n          <label>{{ applyForm.supervisor }}</label>\r\n          <!-- <el-input v-model=\"applyForm.supervisor\" :disabled=\"isDisabled\" /> -->\r\n        </template>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"reason\" class=\"form-item-responsive\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          v-model=\"applyForm.reason\"\r\n          placeholder=\"\"\r\n          :rows=\"3\"\r\n          :disabled=\"isDisabled\"\r\n        />\r\n      </el-form-item>\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"inserPersonList\" class=\"form-item-responsive countersign-section\" v-if=\"false\">\r\n        <div class=\"countersign-container\">\r\n          <div class=\"countersign-tags\">\r\n            <el-tag\r\n              v-for=\"emp in applyForm.inserPersonList\"\r\n              :key=\"emp.id\"\r\n              type=\"success\"\r\n              closable\r\n              @close=\"removeCountersigner(emp.id)\"\r\n              class=\"countersign-tag\"\r\n            >\r\n              <el-icon class=\"countersign-icon\"><User /></el-icon>\r\n              {{ emp.name }}\r\n            </el-tag>\r\n            \r\n            <el-button\r\n              type=\"success\"\r\n              plain\r\n              class=\"countersign-add-btn\"\r\n              size=\"small\"\r\n              @click=\"isInsertDialogVisible = true\"\r\n              :disabled=\"isDisabled\"\r\n            >\r\n              <el-icon><Plus /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n          \r\n          <div v-if=\"applyForm.inserPersonList.length === 0\" class=\"countersign-empty\">\r\n            <el-text type=\"info\" size=\"small\"></el-text>\r\n          </div>\r\n        </div>\r\n\r\n        <el-dialog\r\n          v-model=\"isInsertDialogVisible\"\r\n          title=\"\"\r\n          width=\"480px\"\r\n          top=\"15vh\"\r\n          @close=\"isInsertDialogVisible=false\"\r\n          class=\"countersign-dialog\"\r\n        >\r\n          <div class=\"countersign-dialog-content\">\r\n            <el-alert\r\n              title=\"\"\r\n              type=\"info\"\r\n              :closable=\"false\"\r\n              show-icon\r\n              class=\"countersign-alert\"\r\n            >\r\n              \r\n            </el-alert>\r\n            \r\n            <Custom_List_Insert_Notify\r\n              v-model=\"applyForm.inserPersonList\"\r\n              mode=\"insert\"\r\n              @change=\"validateCountersigners\"\r\n            />\r\n          </div>\r\n          <template #footer>\r\n            <el-button @click=\"isInsertDialogVisible=false\"></el-button>\r\n            <el-button type=\"primary\" @click=\"confirmCountersigners\"></el-button>\r\n          </template>\r\n        </el-dialog>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"notificationTiming\" v-if=\"false\" class=\"form-item-responsive\">\r\n        <el-radio-group v-model=\"notificationTiming\" fill=\"#FFBF00\" :disabled=\"isDisabled\">\r\n          <el-radio-button label=\"\"    :value=\"0\" />\r\n          <el-radio-button label=\"\" :value=\"1\" />\r\n          <el-radio-button label=\"\" :value=\"3\" />\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"notificationList\" v-if=\"false\" class=\"form-item-responsive\">\r\n        <div class=\"flex gap-2\">\r\n          <!--  -->\r\n          <el-tag\r\n            v-for=\"emp in applyForm.notificationList\"\r\n            :key=\"emp.id\"\r\n            type=\"warning\"\r\n            closable\r\n            @close=\"handleNotifyClose(emp)\"\r\n            :disable-transitions=\"false\"\r\n            :class=\"{ 'is-disabled': notificationTiming === 0 || mode === 'WF' }\"\r\n          >\r\n            {{ emp.name }}\r\n          </el-tag>\r\n\r\n          <!-- +   -->\r\n          <el-button\r\n            size=\"small\" \r\n            class=\"button-new-tag button-new-tag--warning\"\r\n            @click=\"isNotifyDialogVisible = true\"\r\n            :disabled=\"notificationTiming === 0 || mode === 'WF'\"\r\n          >+ </el-button>\r\n        </div>\r\n\r\n        <el-dialog\r\n          v-model=\"isNotifyDialogVisible\"\r\n          title=\"\"\r\n          width=\"60%\"\r\n          @close=\"isNotifyDialogVisible = false\"\r\n        >\r\n          <Custom_List_Insert_Notify\r\n            v-model=\"applyForm.notificationList\"\r\n            mode=\"notify\"\r\n          />\r\n          <template #footer>\r\n            <el-button @click=\"isNotifyDialogVisible = false\"></el-button>\r\n            <el-button type=\"primary\" @click=\"isNotifyDialogVisible = false\"></el-button>\r\n          </template>\r\n        </el-dialog>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item  v-if=\"mode === 'create'\">\r\n\r\n        <el-button  type=\"success\" @click=\"SimulateProcess_CR(applyFormRef)\" :disabled=\"isDisabled\">\r\n          \r\n        </el-button>\r\n\r\n        <el-button @click=\"resetForm(applyFormRef)\" :disabled=\"isDisabled\">\r\n          \r\n        </el-button>\r\n       \r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted,  watch, defineEmits, defineProps, defineExpose, computed } from \"vue\";\r\nimport useIdToName from '@/stores/IdToName.js';\r\nimport { useUserStore } from \"../../../../stores/user.js\";\r\nimport { useDeptStore } from \"../../../../stores/dept.js\";\r\nimport \"../../../../css/form/workflow-form.css\";\r\nimport FormService from '@/service/FormService.js'\r\nimport { ElMessageBox, ElMessage, ElAutocomplete } from 'element-plus'\r\nimport { useEmployeeStore } from '@/stores/employee.js'\r\nimport DeptIdToName from '@/components/Common/IdToName/Dept-IdToName'\r\nimport AreaIdToName from '@/components/Common/IdToName/Area-IdToName.vue'\r\nimport TitleIdToName from '@/components/Common/IdToName/Title-IdToName.vue'\r\nimport Custom_List_Insert_Notify from '@/components/WorkFlow/Common/Custom_List_Insert_Notify'\r\nimport '@/css/button/wf-button.css'\r\nimport { useWindowSize } from '@vueuse/core'\r\nimport { User, Plus } from '@element-plus/icons-vue'\r\n\r\nconst emit = defineEmits(['form-submitted', 'form-reset']);\r\n\r\nconst props = defineProps({\r\n  mode: {\r\n    type: String,\r\n    default: 'create' // 'create' for new form, 'WF' for workflow view\r\n  },\r\n  WF_Form_Data: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  WF_canEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n});\r\n\r\n\r\nconst userStore = useUserStore();\r\nconst deptStore = useDeptStore();\r\nconst employeeStore = useEmployeeStore();\r\nconst applyFormRef = ref(null);\r\nconst dptManagerId = ref();\r\nconst dptManagerName = ref();\r\nconst employeeData = ref([]);\r\nconst employeeArea = ref();\r\nconst employeeTitle = ref();\r\nconst isInsertDialogVisible = ref(false);\r\nconst isNotifyDialogVisible = ref(false);\r\nconst notificationTiming = ref(0);\r\nconst correctionTime = ref();\r\nconst { width } = useWindowSize();\r\nconst formStyle = computed(() => {\r\n  if (width.value <= 768) {\r\n    return {\r\n      width: '80%', /*  50% */\r\n      maxWidth: '100%',\r\n      margin: '1rem auto',\r\n    };\r\n  } else {\r\n    return {\r\n      width: '35rem',\r\n      maxWidth: '40rem',\r\n      margin: '4rem',\r\n    };\r\n  }\r\n});\r\n\r\nconst isDisabled = computed(() => {\r\n  return props.mode === 'WF' && !props.WF_canEdit;\r\n});\r\n\r\nconst applyForm = ref({\r\n  applyDate: new Date(),\r\n  correctionDate: \"\",\r\n  startHour: null,\r\n  startMinute: null,\r\n  correctionTime,\r\n  employeeId: '',\r\n  employeeName: '',\r\n  employeeDpt: '',\r\n  supervisor: \"\",\r\n  reason: \"\",\r\n  applierId: userStore.userId,\r\n  applierName: userStore.userName,\r\n  inserPersonList: [],\r\n  notificationList: [],\r\n  correctionType: 'ClockIn'\r\n});\r\n\r\nconst rules = {\r\n  correctionDate: [\r\n    {\r\n      required: true,\r\n      message: \"\",\r\n      trigger: \"change\"\r\n    },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (!value) {\r\n          return callback(new Error(\"\"));\r\n        }\r\n        const selected = new Date(value);\r\n        const yesterday = new Date();\r\n        yesterday.setHours(0, 0, 0, 0);\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        if (selected > new Date(yesterday.getTime() + 86400000 - 1)) {\r\n          return callback(new Error(\"()\"));\r\n        }\r\n        callback();\r\n      },\r\n      trigger: \"change\"\r\n    }\r\n  ],\r\ncorrectionTime: [\r\n    { required: true, message: \"\", trigger: \"change\" },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (!value) {\r\n          callback(new Error(\"\"));\r\n        } else if (!/^([01]\\d|2[0-3]):([0-5]\\d)$/.test(value)) {\r\n          callback(new Error(\" (HH:mm)\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n      trigger: \"blur\"\r\n    }\r\n  ],\r\n  reason: [\r\n    { required: true, message: \"\", trigger: \"blur\" }\r\n  ],\r\n  employeeId: [\r\n    { required: true, message: '', trigger: 'change' },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (value === '' || value === null) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      }, trigger: 'change'\r\n    }\r\n  ],\r\n  employeeName: [\r\n    { required: true, message: '', trigger: 'change' },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (value === '' || value === null) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      }, trigger: 'change'\r\n    }\r\n  ],\r\n  correctionType: [\r\n    { required: true, message: \"\", trigger: \"change\" }\r\n  ]\r\n};\r\n\r\nfunction formatLocalDate(date) {\r\n  const y = date.getFullYear();\r\n  const m = String(date.getMonth() + 1).padStart(2, '0');\r\n  const d = String(date.getDate()).padStart(2, '0');\r\n  return `${y}-${m}-${d}`;\r\n}\r\n\r\nconst SimulateProcess_CR = async (formRef) => {\r\n  const startTime = applyForm.value.correctionTime;\r\n  formRef.validate(async (valid, fields) => {\r\n    if (!valid) {\r\n      const fieldLabels = {\r\n        applyDate: '',\r\n        correctionDate: '',\r\n        correctionTime: '(:)',\r\n        employeeId: '',\r\n        employeeName: '',\r\n        department: '',\r\n        applierName: '',\r\n        supervisor: '',\r\n        reason: ''\r\n      };\r\n\r\n      const firstKey = Object.keys(fields)[0];\r\n      const firstErr = fields[firstKey][0].message;\r\n      const label = fieldLabels[firstKey] || firstKey;\r\n      ElMessage.error(`${label}${firstErr}`);\r\n      return false;\r\n    }\r\n\r\n    const formData = {\r\n      applyDate: applyForm.value.applyDate.toISOString().split(\"T\")[0],\r\n      correctionDate: formatLocalDate(applyForm.value.correctionDate),\r\n      startTime: startTime,\r\n      employeeId: applyForm.value.employeeId,\r\n      employeeName: applyForm.value.employeeName,\r\n      department: applyForm.value.employeeDpt,\r\n      supervisorId: dptManagerId.value,\r\n      supervisorName: applyForm.value.supervisor,\r\n      reason: applyForm.value.reason,\r\n      correctionType: applyForm.value.correctionType\r\n    };\r\n\r\n    const confirmContent =\r\n      `<br/>` +\r\n      `${applyForm.value.applyDate.toISOString().split(\"T\")[0]}<br/>` +\r\n      `${formatLocalDate(applyForm.value.correctionDate)}<br/>` +\r\n      `${startTime}<br/>` +\r\n      `${applyForm.value.correctionType}<br/>` +\r\n      `${applyForm.value.employeeName}<br/>` +\r\n      `${userStore.userDeptName}<br/>` +\r\n      `${applyForm.value.applierName}<br/>` +\r\n      `${applyForm.value.supervisor}<br/>` +\r\n      `${applyForm.value.reason}`;\r\n\r\n    ElMessageBox.confirm(\r\n      confirmContent,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        dangerouslyUseHTMLString: true\r\n      }\r\n    )\r\n      .then(async () => {\r\n        const requestBodyToSubmit = new FormData();\r\n        requestBodyToSubmit.append('DocumentTypeID', \"CR\");\r\n        requestBodyToSubmit.append('CreatorID', applyForm.value.employeeId);\r\n        requestBodyToSubmit.append('CreatorSupervisorID', dptManagerId.value);\r\n        requestBodyToSubmit.append('FormData', JSON.stringify(formData)); // FormData  JSON \r\n\r\n        const insertIds = applyForm.value.inserPersonList.map(e => e.id);\r\n        if (insertIds.length > 0) {\r\n          requestBodyToSubmit.append('InsertSignerIds', JSON.stringify(insertIds));\r\n        }\r\n\r\n        const notification = {\r\n          NotificationTiming: notificationTiming.value,\r\n          NotifierIds: applyForm.value.notificationList.map(e => e.id)\r\n        };\r\n        requestBodyToSubmit.append('Notification', JSON.stringify(notification));\r\n\r\n        try {\r\n          console.log(\"createForm:\", requestBodyToSubmit);\r\n          const createFormResponse = await FormService.createForm(requestBodyToSubmit);\r\n          applyFormRef.value.resetFields();\r\n          ElMessage.success(\"!\");\r\n          emit('form-submitted', createFormResponse.data.documentID);\r\n        } catch (error) {\r\n          console.error(\":\", error);\r\n          ElMessage.error(\"!\");\r\n        }\r\n      })\r\n      .catch(() => {\r\n        ElMessage.info(\"\");\r\n      });\r\n  });\r\n};\r\n\r\n// \r\nconst removeCountersigner = (empId) => {\r\n  applyForm.value.inserPersonList = applyForm.value.inserPersonList.filter(e => e.id !== empId);\r\n  ElMessage.success('');\r\n};\r\n\r\nconst validateCountersigners = () => {\r\n  // \r\n  const uniqueList = [];\r\n  const seenIds = new Set();\r\n  \r\n  applyForm.value.inserPersonList.forEach(emp => {\r\n    if (!seenIds.has(emp.id)) {\r\n      seenIds.add(emp.id);\r\n      uniqueList.push(emp);\r\n    }\r\n  });\r\n  \r\n  if (uniqueList.length !== applyForm.value.inserPersonList.length) {\r\n    applyForm.value.inserPersonList = uniqueList;\r\n    ElMessage.warning('');\r\n  }\r\n  \r\n  // \r\n  const currentUserId = userStore.userId;\r\n  const filteredList = applyForm.value.inserPersonList.filter(emp => emp.id !== currentUserId);\r\n  \r\n  if (filteredList.length !== applyForm.value.inserPersonList.length) {\r\n    applyForm.value.inserPersonList = filteredList;\r\n    ElMessage.warning('');\r\n  }\r\n};\r\n\r\nconst confirmCountersigners = () => {\r\n  validateCountersigners();\r\n  isInsertDialogVisible.value = false;\r\n  \r\n  if (applyForm.value.inserPersonList.length > 0) {\r\n    ElMessage.success(` ${applyForm.value.inserPersonList.length} `);\r\n  }\r\n};\r\n\r\nfunction handleNotifyClose(emp) {\r\n  if (notificationTiming.value === 0) return\r\n  applyForm.value.notificationList =\r\n    applyForm.value.notificationList.filter(e => e.id !== emp.id)\r\n}\r\n\r\nconst resetForm = (formRef) => {\r\n  formRef.resetFields();\r\n  applyForm.value.startMinute = null;\r\n  emit('form-reset');\r\n};\r\n\r\nconst querySearchEmployee = (queryString, callback) => {\r\n  const results = employeeData.value\r\n    .filter(emp => emp.name.includes(queryString))\r\n    .map(emp => ({ value: emp.name, raw: emp }));\r\n  callback(results);\r\n};\r\n\r\nconst onEmployeeSelect = async (item) => {\r\n  await handleEmployeeSelect(item);\r\n  await getSupervisor(item);\r\n  await getEmployeeAreaAndTitle(item);\r\n};\r\n\r\nconst handleEmployeeSelect = async (item) => {\r\n  applyForm.value.employeeName = item.value;\r\n  applyForm.value.employeeId = item.raw.id;\r\n};\r\n\r\nconst getEmployeeAreaAndTitle = async (empData) => {\r\n  employeeArea.value = empData.raw.area_id;\r\n  employeeTitle.value = empData.raw.title_id;\r\n  // console.log('getEmployeeAreaAndTitle: ', empData.raw.area_id)\r\n};\r\n\r\n\r\nconst getSupervisor = async (empData) => {\r\n\r\n\r\n  await deptStore.fetchDepartmentData();\r\n\r\n  // \r\n  const emp_dept = deptStore.departments\r\n    .find(d => d.id === empData.raw.dpt_id);\r\n\r\n  applyForm.value.employeeDpt = emp_dept ? emp_dept.id : '';\r\n  if (!emp_dept) {\r\n    dptManagerName.value = '';\r\n    applyForm.value.supervisor = '';\r\n    return;\r\n  }\r\n\r\n  \r\n  // \r\n\r\n      // : \r\n      if(empData.raw.id === 'TW0005'){\r\n        dptManagerId.value = 'vincent';\r\n        dptManagerName.value =  ''\r\n\r\n        applyForm.value.supervisor =dptManagerName.value\r\n        return\r\n      }\r\n\r\n  let managerId = emp_dept.manager_id?.trim() || '';\r\n\r\n  if (managerId === applyForm.value.employeeId) {\r\n    let parentId = emp_dept.p_dpt_id;\r\n    while (parentId && parentId !== '-1') {\r\n      const parentDept = deptStore.departments\r\n        .find(d => d.id === parentId);\r\n      if (!parentDept) break;\r\n\r\n      const parentManager = parentDept.manager_id?.trim();\r\n      if (parentManager && parentManager !== applyForm.value.employeeId) {\r\n        managerId = parentManager;\r\n        break;\r\n      }\r\n      parentId = parentDept.p_dpt_id;\r\n    }\r\n  }\r\n\r\n  dptManagerId.value = managerId;\r\n  dptManagerName.value = managerId\r\n    ? await useIdToName.getEmployeeName(managerId)\r\n    : '';\r\n  \r\n\r\n  applyForm.value.supervisor = dptManagerName.value;\r\n};\r\n\r\nconst getEmployeeData = async () => {\r\n  await employeeStore.fetchEmployeeData();\r\n\r\n  const filtered = employeeStore.employees.filter(e =>\r\n    e.emp_status !== 'Inactive' &&\r\n    e.id !== 'mis' &&\r\n    e.id !== 'vincent'\r\n  );\r\n  employeeData.value = filtered;\r\n};\r\n\r\nwatch(notificationTiming, val => {\r\n  if (val === 0) {\r\n    applyForm.value.notificationList = []\r\n  }\r\n})\r\n\r\nwatch(() => props.WF_Form_Data, async (newVal) => {\r\n  // console.log(\" watch(() => props.WF_Form_Data: \",newVal);\r\n  if (newVal && Object.keys(newVal).length > 0) {\r\n    applyForm.value.applyDate = newVal.applyAt ? new Date(newVal.applyAt) : new Date();\r\n    applyForm.value.correctionDate = newVal.correctionDate ? new Date(newVal.correctionDate) : \"\";\r\n    applyForm.value.correctionTime = newVal.correctionTime\r\n    applyForm.value.employeeId = newVal.applierId || '';\r\n    applyForm.value.employeeName = newVal.applierName || '';\r\n    applyForm.value.supervisor = newVal.supervisorName || '';\r\n    applyForm.value.reason = newVal.reason || '';\r\n    applyForm.value.correctionType = newVal.correctionType || 'ClockIn';\r\n\r\n    if (props.mode === 'WF' && newVal.applierId) {\r\n      if (employeeData.value.length === 0) {\r\n        await getEmployeeData();\r\n      }\r\n      const employee = employeeData.value.find(e => e.id === newVal.applierId);\r\n      if (employee) {\r\n        await getSupervisor({ raw: employee });\r\n        await getEmployeeAreaAndTitle({ raw: employee });\r\n      }\r\n    }\r\n  }\r\n}, { immediate: true });\r\n\r\nfunction getResubmitData() {\r\n  const startTime = applyForm.value.correctionTime; // \"13:45:30\"\r\n  const [hh, mm /*, ss*/] = startTime.split(':');\r\n  const formattedTime = `${hh}:${mm}`;   \r\n  return {\r\n    correctionDate: applyForm.value.correctionDate,\r\n    startTime: formattedTime,\r\n    correctionType: applyForm.value.correctionType,\r\n    reason: applyForm.value.reason\r\n  };\r\n}\r\n\r\ndefineExpose({\r\n  getResubmitData,\r\n  applyFormRef //  applyFormRef\r\n});\r\n\r\nonMounted(async () => {\r\n  await getEmployeeData();\r\n  if (props.mode !== 'WF') {\r\n    employeeArea.value = '';\r\n    employeeTitle.value = '';\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.workflow-form {\r\n  /*  el-form  style  */\r\n  width: 25rem;\r\n  max-width: 700px;\r\n  margin: 4rem auto; /*  margin  auto  */\r\n  font-size: 1rem; /*  1rem  */\r\n}\r\n\r\n.form-item-responsive {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n\r\n.el-form-item__label {\r\n  text-align: left !important;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .item1 {\r\n    width: 100%;\r\n  }\r\n  .workflow-form {\r\n    width: 100%;\r\n    margin: 1rem auto; /*  margin  auto  */\r\n  }\r\n  \r\n  .form-item-responsive {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  .form-item-responsive .el-form-item__label {\r\n    width: 100% !important;\r\n    text-align: left;\r\n    margin-bottom: 5px;\r\n  }\r\n  .form-item-responsive .el-form-item__content {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n\r\n::v-deep .el-form-item__label {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;  \r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n::v-deep .el-form-item__content {\r\n  font-size: 1.2rem;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n\r\n\r\n/*  */\r\n.countersign-section {\r\n  margin: 1rem 0;\r\n  padding: 1rem;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border-radius: 8px;\r\n  border: 1px solid #dee2e6;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.countersign-container {\r\n  width: 100%;\r\n}\r\n\r\n.countersign-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  align-items: center;\r\n  min-height: 32px;\r\n}\r\n\r\n.countersign-tag {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 4px 8px;\r\n  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\r\n  border: none;\r\n  border-radius: 16px;\r\n  color: white;\r\n  font-weight: 500;\r\n  box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-tag:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4);\r\n}\r\n\r\n.countersign-icon {\r\n  font-size: 14px;\r\n}\r\n\r\n.countersign-add-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 6px 12px;\r\n  border: 2px dashed #28a745;\r\n  border-radius: 16px;\r\n  background: transparent;\r\n  color: #28a745;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-add-btn:hover:not(:disabled) {\r\n  background: #28a745;\r\n  color: white;\r\n  border-style: solid;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);\r\n}\r\n\r\n.countersign-add-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.countersign-empty {\r\n  padding: 8px 0;\r\n  text-align: center;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.countersign-dialog {\r\n  border-radius: 12px;\r\n}\r\n\r\n.countersign-dialog .el-dialog {\r\n  width: 480px !important;\r\n  max-width: 90vw;\r\n}\r\n\r\n.countersign-dialog-content {\r\n  padding: 16px 0;\r\n}\r\n\r\n/*  */\r\n.countersign-dialog .el-form-item {\r\n  margin-bottom: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-checkbox-group .el-checkbox {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-radio-group .el-radio {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-alert {\r\n  margin-bottom: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .countersign-section {\r\n    margin: 0.5rem 0;\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .countersign-tags {\r\n    gap: 6px;\r\n  }\r\n  \r\n  .countersign-tag {\r\n    font-size: 12px;\r\n    padding: 3px 6px;\r\n  }\r\n  \r\n  .countersign-add-btn {\r\n    font-size: 12px;\r\n    padding: 4px 8px;\r\n  }\r\n}\r\n\r\n/*  scoped */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.2rem;\r\n}\r\n.el-select-dropdown__item {\r\n  font-size: 1.2rem;\r\n}\r\n.el-date-table td .cell {\r\n  font-size: 1.2rem;\r\n}\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.2rem;\r\n}\r\n.editable-span {\r\n  font-size: 1.2rem;\r\n}\r\n.el-form-item__label {\r\n  text-align: right !important;\r\n  font-size: 1.2rem; \r\n}\r\n\r\n\r\n</style>","import script from \"./CorrectionForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CorrectionForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CorrectionForm.vue?vue&type=style&index=0&id=244b5fd0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-244b5fd0\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\" :class=\"{ 'layout-margin': props.layout }\">\r\n    <div class=\"leave-form-grid\">\r\n      <div class=\"form-section\">\r\n        <div class=\"item1\">\r\n      <div \r\n        style=\"margin-top:4rem;margin-left:3rem;margin-bottom:-2rem;\" \r\n        v-if=\"mode === 'create' \"\r\n      >\r\n        <el-text style=\"font-size:1.7rem\" type=\"warning\" class=\"mx-1\"> <br/></el-text>\r\n      </div>\r\n      <el-config-provider :locale=\"zhTw\">\r\n        <el-form\r\n          ref=\"applyFormRef\"\r\n          class=\"workflow-form invoice\"\r\n          :style=\"formStyle\"\r\n          :model=\"applyForm\"\r\n          :rules=\"rules\"\r\n          label-width=\"10rem\"\r\n          status-icon\r\n        >\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"applyDate\" class=\"form-item-responsive\" >\r\n          <el-date-picker\r\n            v-model=\"applyForm.applyDate\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            style=\"width: 100%;font-size: 1.2rem; \"\r\n            :disabled=\"true\"\r\n            \r\n          />\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"leaveType\" class=\"form-item-responsive\">\r\n          <el-select v-model=\"applyForm.leaveType\" placeholder=\"\" style=\"width: 10rem;font-size:1.2rem\" :disabled=\"isDisabled\">\r\n            <el-option label=\"\" value=\"AnnualLeave\" />\r\n            <el-option label=\"\" value=\"SickLeave\" />\r\n            <el-option label=\"\" value=\"PersonalLeave\" />\r\n            <el-option label=\"\" value=\"MenstrualLeave\" />\r\n            <el-option label=\"\" value=\"OfficialLeave\" />\r\n            <el-option label=\"\" value=\"WorkInjuryLeave\" />\r\n            <el-option label=\"\" value=\"FamilyCareLeave\" />\r\n            <el-option label=\"\" value=\"MarriageLeave\" />\r\n            <el-option label=\"\" value=\"MaternityLeave\" />\r\n            <el-option label=\"\" value=\"PrenatalCheckupLeave\" />\r\n            <el-option label=\"\" value=\"PaternityLeave\" />\r\n            <el-option label=\"\" value=\"FuneralLeave\" />\r\n            <el-option label=\"\" value=\"JobSeekingLeave\" />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" class=\"form-item-responsive\">\r\n          <DeptIdToName v-if=\"mode === 'create'\" :deptId=\"userStore.userDeptId\" style=\"font-size:1.2rem\"/>\r\n          <DeptIdToName v-else-if=\"mode === 'WF'\" :deptId=\"applyForm.applicantDept\" style=\"font-size:1.2rem\"/>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" class=\"form-item-responsive\">\r\n          <span v-if=\"mode === 'create'\"  style=\"font-size:1.2rem\">{{ userStore.userName }}</span>\r\n          <span v-else-if=\"mode === 'WF'\"  style=\"font-size:1.2rem\" >{{ applyForm.applicantName }}</span>\r\n        </el-form-item>\r\n\r\n        <!--  (-) -->\r\n        <el-form-item  prop=\"leaveDateTimeRange\" class=\"form-item-responsive \">\r\n          <template #label>\r\n            <label> </label>\r\n          </template>\r\n          <el-date-picker\r\n            v-model=\"applyForm.leaveDateTimeRange\"\r\n            type=\"datetimerange\"\r\n            range-separator=\"\"\r\n            start-placeholder=\"\"\r\n            end-placeholder=\"\"\r\n            :default-time=\"defaultTime\"\r\n            format=\"YYYY-MM-DD HH:mm\"\r\n            :disabled=\"isDisabled\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <!--  (:hour) -->\r\n        <el-form-item label=\"\" class=\"form-item-responsive\">\r\n          <span v-if=\"!isEditingLeaveHours\" @dblclick=\"enableLeaveHoursEdit\" class=\"editable-span\">{{ formattedLeaveHours }}</span>\r\n          <el-input\r\n            v-else\r\n            v-model.number=\"manualLeaveMinutes\"\r\n            @blur=\"disableLeaveHoursEdit\"\r\n            @keyup.enter=\"disableLeaveHoursEdit\"\r\n            size=\"small\"\r\n            style=\"width: 8rem;\"\r\n            :disabled=\"isDisabled\"\r\n          >\r\n            <template #append></template>\r\n          </el-input>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"agentEmployeeName\" class=\"form-item-responsive\">\r\n          <el-autocomplete\r\n            v-if=\"mode === 'create' || editAgentEmployeeName === true\"\r\n            v-model=\"applyForm.agentEmployeeName\"\r\n            :fetch-suggestions=\"querySearchEmployee\"\r\n            placeholder=\"\"\r\n            @select=\"onEmployeeSelect\"\r\n            style=\"width: 100%;font-size:1.2rem\"\r\n            clearable\r\n            :trigger-on-focus=\"false\"\r\n            :disabled=\"isDisabled\"\r\n          />\r\n          <EmployeeIdToName v-else-if=\"mode === 'WF'\" :employeeId=\"applyForm.agentEmployeeId\" />\r\n\r\n        </el-form-item>\r\n        \r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"reason\" class=\"form-item-responsive\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"applyForm.reason\"\r\n            placeholder=\"\"\r\n            style=\"font-size:1.2rem\"\r\n            :rows=\"3\"\r\n            :disabled=\"isDisabled\"\r\n          />\r\n        </el-form-item>\r\n\r\n\r\n        <!--  -->\r\n        <el-form-item class=\"form-item-responsive attachment-item\" prop=\"attachments\">\r\n          <template #label>\r\n            <div\r\n              class=\"el-upload__tip\"\r\n              v-if=\"mode === 'create'\"\r\n              style=\"text-align: right; \"\r\n            >\r\n              <el-text class=\"\" style=\"font-size:1.2rem\">\r\n                \r\n                <span v-if=\"isAttachmentRequired\" style=\"color: red;\">*</span>\r\n                <br/>\r\n              </el-text>\r\n              <el-text class=\"\" style=\"font-size:1.2rem\">()</el-text>\r\n              \r\n            </div>\r\n          </template>\r\n          <div class=\"upload-container\">\r\n            <el-upload\r\n              multiple\r\n              class=\"upload-demo\"\r\n              action=\"#\"\r\n              list-type=\"picture\"\r\n              :on-change=\"handleFileChange\"\r\n              :on-remove=\"handleFileRemove\"\r\n              :on-preview=\"handlePicturePreview\"\r\n              :file-list=\"applyForm.attachments\"\r\n              :auto-upload=\"false\"\r\n              :disabled=\"isDisabled\"\r\n              accept=\"image/*,application/pdf\"\r\n            >\r\n              <template #default>\r\n                <el-button v-if=\"mode === 'create'\" @click=\"showMobileUploadOptions\">\r\n                  <el-icon><Plus /></el-icon>\r\n                </el-button>\r\n                <el-button v-else :disabled=\"isDisabled\">\r\n                  <el-icon><Plus /></el-icon>\r\n                </el-button>\r\n              </template>\r\n            </el-upload>\r\n          </div>\r\n            <el-dialog\r\n              v-model=\"dialogVisible\"\r\n              :close-on-click-modal=\"true\"\r\n              :show-close=\"true\"\r\n            >\r\n              <img :src=\"dialogImageUrl\" alt=\"Preview\" class=\"preview-img\" />\r\n            </el-dialog>\r\n          <!--  input  -->\r\n          <input type=\"file\" ref=\"cameraInputRef\" accept=\"image/*,application/pdf\" capture=\"camera\" style=\"display: none;\" @change=\"handleHiddenFileInputChange\" />\r\n          <input type=\"file\" ref=\"galleryInputRef\" accept=\"image/*,application/pdf\" style=\"display: none;\" @change=\"handleHiddenFileInputChange\" />\r\n          <!-- QR Code  -->\r\n          <el-dialog\r\n            v-model=\"isScanningQrCode\"\r\n            title=\" QR Code\"\r\n            :close-on-click-modal=\"false\"\r\n            :show-close=\"true\"\r\n            @close=\"stopQrCodeScanner\"\r\n            width=\"80%\"\r\n            top=\"5vh\"\r\n          >\r\n            <div id=\"qr-code-reader\" style=\"width: 100%;\"></div>\r\n          </el-dialog>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"insertSignerList\" class=\"form-item-responsive countersign-section\" style=\"margin-top: 2rem;\" v-if=\"false\">\r\n          <div class=\"countersign-container\">\r\n            <div class=\"countersign-tags\">\r\n              <el-tag\r\n                v-for=\"emp in applyForm.insertSignerList\"\r\n                :key=\"emp.id\"\r\n                type=\"success\"\r\n                :closable=\"mode === 'create'\"\r\n                @close=\"removeCountersigner(emp.id)\"\r\n                class=\"countersign-tag\"\r\n              >\r\n                <el-icon class=\"countersign-icon\"><User /></el-icon>\r\n                {{ emp.name }}\r\n              </el-tag>\r\n              \r\n              <el-button\r\n                v-if=\"mode === 'create'\"\r\n                type=\"success\"\r\n                plain\r\n                class=\"countersign-add-btn\"\r\n                size=\"small\"\r\n                @click=\"isInsertDialogVisible = true\"\r\n                :disabled=\"isDisabled\"\r\n              >\r\n                <el-icon><Plus /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n            \r\n            <div v-if=\"applyForm.insertSignerList.length === 0\" class=\"countersign-empty\">\r\n              <el-text type=\"info\" size=\"small\"></el-text>\r\n            </div>\r\n          </div>\r\n\r\n          <el-dialog\r\n            v-model=\"isInsertDialogVisible\"\r\n            title=\"\"\r\n            width=\"480px\"\r\n            top=\"15vh\"\r\n            @close=\"isInsertDialogVisible=false\"\r\n            class=\"countersign-dialog\"\r\n          >\r\n            <div class=\"countersign-dialog-content\">\r\n              <el-alert\r\n                title=\"\"\r\n                type=\"info\"\r\n                :closable=\"false\"\r\n                show-icon\r\n                class=\"countersign-alert\"\r\n              >\r\n                \r\n              </el-alert>\r\n              \r\n              <Custom_List_Insert_Notify\r\n                v-model=\"applyForm.insertSignerList\"\r\n                mode=\"insert\"\r\n                @change=\"validateCountersigners\"\r\n              />\r\n            </div>\r\n            <template #footer>\r\n              <el-button @click=\"isInsertDialogVisible=false\"></el-button>\r\n              <el-button type=\"primary\" @click=\"confirmCountersigners\"></el-button>\r\n            </template>\r\n          </el-dialog>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item v-if=\"mode === 'create'\">\r\n          <el-button type=\"success\" @click=\"submitLeaveForm(applyFormRef)\" :disabled=\"isDisabled\">\r\n            \r\n          </el-button>\r\n          <el-button @click=\"resetForm(applyFormRef)\" :disabled=\"isDisabled\">\r\n            \r\n          </el-button>\r\n        </el-form-item>\r\n\r\n\r\n        </el-form>\r\n      </el-config-provider>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"leave-info-section\" v-if=\"mode === 'create'\">\r\n        <div class=\"leave-info-header\">\r\n          <h3></h3>\r\n        </div>\r\n        <el-collapse v-model=\"activeName\" accordion class=\"leave-info-collapse\">\r\n          <el-collapse-item \r\n            v-for=\"(info, key) in leaveTypeInfo\" \r\n            :key=\"key\"\r\n            :title=\"info.title\" \r\n            :name=\"key\"\r\n            v-show=\"key !== 'AnnualLeave'\"\r\n          >\r\n            <div class=\"leave-info-content\">\r\n              <div class=\"info-row\">\r\n                <span class=\"info-label\"></span>\r\n                <span class=\"info-value\">{{ info.regulation }}</span>\r\n              </div>\r\n              <div class=\"info-row\">\r\n                <span class=\"info-label\"></span>\r\n                <span class=\"info-value\">{{ info.salary }}</span>\r\n              </div>\r\n              <div class=\"info-row\">\r\n                <span class=\"info-label\"></span>\r\n                <span class=\"info-value\">{{ info.legal }}</span>\r\n              </div>\r\n            </div>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch, nextTick } from \"vue\"; //  watch, nextTick\r\nimport { useUserStore } from \"../../../../stores/user.js\";\r\nimport { useDeptStore } from \"../../../../stores/dept.js\";\r\nimport { useEmployeeStore } from '@/stores/employee.js';\r\nimport useIdToName from '@/stores/IdToName.js';\r\nimport FormService from '@/service/FormService.js';\r\nimport { ElMessageBox, ElMessage, ElAutocomplete, ElUpload, ElConfigProvider, ElDialog, ElInput } from 'element-plus';\r\nimport { Plus, User } from '@element-plus/icons-vue';\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs';\r\nimport DeptIdToName from '@/components/Common/IdToName/Dept-IdToName';\r\nimport EmployeeIdToName from '@/components/Common/IdToName/Employee-IdToName';\r\nimport { useWindowSize } from '@vueuse/core';\r\nimport { Html5QrcodeScanner } from \"html5-qrcode\"; //  html5-qrcode\r\nimport \"../../../../css/form/workflow-form.css\";\r\nimport '@/css/button/wf-button.css';\r\nimport Custom_List_Insert_Notify from '@/components/WorkFlow/Common/Custom_List_Insert_Notify';\r\n\r\nconst emit = defineEmits(['form-submitted', 'form-reset']);\r\n\r\nconst props = defineProps({\r\n  mode: {\r\n    type: String,\r\n    default: 'create' // 'create' for new form, 'WF' for workflow view\r\n  },\r\n  WF_Form_Data: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  WF_canEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  layout: {\r\n    type:Boolean,\r\n    defailt: false\r\n  },\r\n});\r\n\r\nconst userStore = useUserStore();\r\nconst deptStore = useDeptStore();\r\nconst employeeStore = useEmployeeStore();\r\nconst applyFormRef = ref(null);\r\nconst dptManagerId = ref();\r\nconst dptManagerName = ref();\r\nconst employeeData = ref([]);\r\nconst { width } = useWindowSize(); // \r\nconst isMobile = computed(() => width.value <= 768); //  ()\r\nconst editAgentEmployeeName = ref(false);\r\nconst originalAgentEmployeeName = ref(''); // \r\nconst originalAgentEmployeeId = ref(''); //  ID\r\nconst cameraInputRef = ref(null); //  input\r\nconst galleryInputRef = ref(null); //  input\r\n\r\n\r\n\r\n\r\nconst formStyle = computed(() => {\r\n  if (width.value <= 768) {\r\n    return {\r\n      width: '80%',\r\n      maxWidth: '100%',\r\n      margin: '1rem auto',\r\n    };\r\n  } else {\r\n    //  WF  1rem\r\n    const marginValue = props.mode === 'WF' ? '3rem 3rem 3rem 1rem' : '3rem';\r\n    return {\r\n      width: '35rem',\r\n      maxWidth: '40rem',\r\n      margin: marginValue,\r\n    };\r\n  }\r\n});\r\n\r\nconst isDisabled = computed(() => {\r\n  return props.mode === 'WF' && !props.WF_canEdit;\r\n});\r\n\r\n// const isShow = computed(() => {\r\n//   return props.mode === 'WF' && !props.WF_canEdit;\r\n// });\r\n\r\nconst applyForm = ref({\r\n  applyDate: new Date(),\r\n  leaveType: '',\r\n  applicantDept: userStore.userDeptId, //  userStore  userDeptId\r\n  applicantName: userStore.userName,\r\n  leaveDateTimeRange: [], // [startDateTime, endDateTime]\r\n  leaveHours: 0, // \r\n  agentEmployeeId: '', \r\n  agentEmployeeName: '',\r\n  reason: '',\r\n  attachments: [], // \r\n  insertSignerList: [] // \r\n});\r\n\r\n// \r\nconst isInsertDialogVisible = ref(false);\r\n\r\nconst isEditingLeaveHours = ref(false); // \r\nconst manualLeaveMinutes = ref(0); // \r\nconst actualLeaveMinutes = ref(0); //  ()\r\n\r\n// \r\nconst exemptLeaveTypes = ['AnnualLeave', 'PersonalLeave', 'MenstrualLeave', 'JobSeekingLeave', 'OfficialLeave','WorkInjuryLeave']\r\n\r\n// \r\nconst isAttachmentRequired = computed(() => {\r\n  return applyForm.value.leaveType && !exemptLeaveTypes.includes(applyForm.value.leaveType)\r\n})\r\n\r\n\r\nconst validateAgent = (rule, value, callback) => {\r\n  const id = applyForm.value.agentEmployeeId;\r\n  if (!value || !value.trim()) {\r\n    return callback(new Error(''));\r\n  }\r\n  if (!id) {\r\n    return callback(new Error(''));\r\n  }\r\n  const emp = employeeData.value.find(e => e.id === id);\r\n  if (!emp || emp.name !== value) {\r\n    return callback(new Error(''));\r\n  }\r\n  return callback();\r\n};\r\n\r\n\r\nconst rules = computed(() => ({\r\n  leaveType: [\r\n    { required: true, message: \"\", trigger: \"change\" }\r\n  ],\r\n  leaveDateTimeRange: [\r\n    { required: true, message: \"\", trigger: \"change\" }\r\n  ],\r\n  agentEmployeeId: [\r\n    { required: true, message: '', trigger: 'change' },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        if (value === '' || value === null) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      }, trigger: 'change'\r\n    }\r\n  ],\r\n  agentEmployeeName: [\r\n    { required: true, message: '', trigger: ['change', 'blur'] },\r\n    { validator: validateAgent, trigger: ['change', 'blur'] },\r\n  ],\r\n  attachments: [\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        // \r\n        if (!isAttachmentRequired.value) {\r\n          return callback();\r\n        }\r\n        // \r\n        if (!value || value.length === 0) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      },\r\n      trigger: ['change', 'blur']\r\n    }\r\n  ]\r\n}));\r\n\r\n// \r\nconst defaultTime = [\r\n  new Date(2000, 1, 1, 8, 30, 0), //  8:30\r\n  new Date(2000, 2, 1, 17, 30, 0), //  17:30\r\n];\r\n\r\nconst leaveHoursInMinutes = computed(() => {\r\n  const [startDateTime, endDateTime] = applyForm.value.leaveDateTimeRange;\r\n\r\n  if (!startDateTime || !endDateTime) {\r\n    return 0;\r\n  }\r\n\r\n  let totalEffectiveMinutes = 0;\r\n  const workPeriods = [\r\n    { start: { hours: 8, minutes: 30 }, end: { hours: 12, minutes: 30 } },\r\n    { start: { hours: 13, minutes: 30 }, end: { hours: 17, minutes: 30 } }\r\n  ];\r\n\r\n  let currentDay = new Date(startDateTime);\r\n  currentDay.setHours(0, 0, 0, 0); // \r\n\r\n  const endDay = new Date(endDateTime);\r\n  endDay.setHours(0, 0, 0, 0); // \r\n\r\n  while (currentDay.getTime() <= endDay.getTime()) {\r\n    const dayOfWeek = currentDay.getDay(); // 0 = , 6 = \r\n    if (dayOfWeek !== 0 && dayOfWeek !== 6) { // \r\n      for (const period of workPeriods) {\r\n        const periodStart = new Date(currentDay.getFullYear(), currentDay.getMonth(), currentDay.getDate(), period.start.hours, period.start.minutes, 0);\r\n        const periodEnd = new Date(currentDay.getFullYear(), currentDay.getMonth(), currentDay.getDate(), period.end.hours, period.end.minutes, 0);\r\n\r\n        const effectiveStart = new Date(Math.max(startDateTime.getTime(), periodStart.getTime()));\r\n        const effectiveEnd = new Date(Math.min(endDateTime.getTime(), periodEnd.getTime()));\r\n\r\n        if (effectiveStart < effectiveEnd) {\r\n          totalEffectiveMinutes += (effectiveEnd.getTime() - effectiveStart.getTime()) / (1000 * 60);\r\n        }\r\n      }\r\n    }\r\n    currentDay.setDate(currentDay.getDate() + 1); // \r\n  }\r\n\r\n  return Math.floor(totalEffectiveMinutes);\r\n});\r\n\r\nconst formattedLeaveHours = computed(() => {\r\n  const totalMinutes = actualLeaveMinutes.value;\r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n  return `${hours}  ${minutes} `;\r\n});\r\n\r\n//  leaveDateTimeRange  actualLeaveMinutes\r\nwatch(leaveHoursInMinutes, (newVal) => {\r\n  if (!isEditingLeaveHours.value) { // \r\n    actualLeaveMinutes.value = newVal;\r\n    applyForm.value.leaveHours = newVal / 60;\r\n    applyForm.value.leaveMinutes = newVal;\r\n  }\r\n}, { immediate: true }); // \r\n\r\n// \r\nconst enableLeaveHoursEdit = () => {\r\n  if (isDisabled.value) return; // \r\n  isEditingLeaveHours.value = true;\r\n  manualLeaveMinutes.value = actualLeaveMinutes.value; // \r\n  nextTick(() => {\r\n    //  input  ref\r\n    // : document.querySelector('.editable-input').focus();\r\n  });\r\n};\r\n\r\n// \r\nconst disableLeaveHoursEdit = () => {\r\n  isEditingLeaveHours.value = false;\r\n  manualLeaveMinutes.value = Math.round(Number(manualLeaveMinutes.value) || 0) \r\n  actualLeaveMinutes.value = manualLeaveMinutes.value;\r\n  applyForm.value.leaveHours = manualLeaveMinutes.value / 60;\r\n  applyForm.value.leaveMinutes = manualLeaveMinutes.value;\r\n};\r\n\r\nfunction formatLocalDate(date) {\r\n  const y = date.getFullYear();\r\n  const m = String(date.getMonth() + 1).padStart(2, '0');\r\n  const d = String(date.getDate()).padStart(2, '0');\r\n  return `${y}-${m}-${d}`;\r\n}\r\n\r\n\r\n// \r\nconst removeCountersigner = (empId) => {\r\n  applyForm.value.insertSignerList = applyForm.value.insertSignerList.filter(e => e.id !== empId);\r\n  ElMessage.success('');\r\n};\r\n\r\nconst validateCountersigners = () => {\r\n  // \r\n  const uniqueList = [];\r\n  const seenIds = new Set();\r\n  \r\n  applyForm.value.insertSignerList.forEach(emp => {\r\n    if (!seenIds.has(emp.id)) {\r\n      seenIds.add(emp.id);\r\n      uniqueList.push(emp);\r\n    }\r\n  });\r\n  \r\n  if (uniqueList.length !== applyForm.value.insertSignerList.length) {\r\n    applyForm.value.insertSignerList = uniqueList;\r\n    ElMessage.warning('');\r\n  }\r\n  \r\n  // \r\n  const currentUserId = userStore.userId;\r\n  const filteredList = applyForm.value.insertSignerList.filter(emp => emp.id !== currentUserId);\r\n  \r\n  if (filteredList.length !== applyForm.value.insertSignerList.length) {\r\n    applyForm.value.insertSignerList = filteredList;\r\n    ElMessage.warning('');\r\n  }\r\n};\r\n\r\nconst confirmCountersigners = () => {\r\n  validateCountersigners();\r\n  isInsertDialogVisible.value = false;\r\n  \r\n  if (applyForm.value.insertSignerList.length > 0) {\r\n    ElMessage.success(` ${applyForm.value.insertSignerList.length} `);\r\n  }\r\n};\r\n\r\nconst submitLeaveForm = async (formRef) => {\r\n  formRef.validate(async (valid, fields) => {\r\n    if (!valid) {\r\n      const fieldLabels = {\r\n        leaveType: '',\r\n        leaveDateTimeRange: '',\r\n        agentEmployeeName: '',\r\n        reason: '',\r\n        attachments: ''\r\n      };\r\n\r\n      const firstKey = Object.keys(fields)[0];\r\n      const firstErr = fields[firstKey][0].message;\r\n      const label = fieldLabels[firstKey] || firstKey;\r\n      ElMessage.error(`${label}${firstErr}`);\r\n      return false;\r\n    }\r\n\r\n\r\n\r\n    const minutes = actualLeaveMinutes.value \r\n    const hours   = roundTo(minutes / 60, 2)    \r\n\r\n\r\n    const formData = {\r\n      applyDate: applyForm.value.applyDate.toISOString().split(\"T\")[0],\r\n      leaveType: applyForm.value.leaveType,\r\n      applicantDept: userStore.userDeptId, //  userStore  userDeptId\r\n      applicantId: userStore.userId, // ID\r\n      applicantName: userStore.userName,\r\n      leaveStartDate: formatLocalDate(applyForm.value.leaveDateTimeRange[0]),\r\n      leaveEndDate: formatLocalDate(applyForm.value.leaveDateTimeRange[1]),\r\n      leaveStartTime: applyForm.value.leaveDateTimeRange[0].toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }),\r\n      leaveEndTime: applyForm.value.leaveDateTimeRange[1].toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }),\r\n      leaveHours: hours,    \r\n      leaveMinutes: minutes, // \r\n      agentEmployeeId: applyForm.value.agentEmployeeId,\r\n      agentEmployeeName: applyForm.value.agentEmployeeName,\r\n      reason: applyForm.value.reason,\r\n      attachments: applyForm.value.attachments.map(file => file.raw) // \r\n    };\r\n\r\n    console.log(formData);\r\n\r\n    // \r\n    const leaveTypeMap = {\r\n      'AnnualLeave': '',\r\n      'SickLeave': '',\r\n      'PersonalLeave': '',\r\n      'MenstrualLeave': '',\r\n      'OfficialLeave': '',\r\n      'WorkInjuryLeave': '',\r\n      'FamilyCareLeave': '',\r\n      'MarriageLeave': '',\r\n      'MaternityLeave': '',\r\n      'PrenatalCheckupLeave': '',\r\n      'PaternityLeave': '',\r\n      'FuneralLeave': '',\r\n      'JobSeekingLeave': ''\r\n    };\r\n\r\n    const confirmContent =\r\n      `<br/>` +\r\n      `${formData.applyDate}<br/>` +\r\n      `${leaveTypeMap[formData.leaveType] || formData.leaveType}<br/>` +\r\n      `ID${formData.applicantId}<br/>` + // ID\r\n      `${formData.applicantName}<br/>` +\r\n      `${formData.leaveStartDate} ${formData.leaveStartTime}  ${formData.leaveEndDate} ${formData.leaveEndTime}<br/>` +\r\n      `${formattedLeaveHours.value}<br/>` + // \r\n      `${formData.agentEmployeeName}<br/>` +\r\n      `${formData.reason}`;\r\n\r\n    ElMessageBox.confirm(\r\n      confirmContent,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        dangerouslyUseHTMLString: true\r\n      }\r\n    )\r\n    .then(async () => {\r\n      const requestBodyToSubmit = new FormData();\r\n      requestBodyToSubmit.append('DocumentTypeID', \"LR\");\r\n      requestBodyToSubmit.append('CreatorID', userStore.userId);\r\n      requestBodyToSubmit.append('CreatorSupervisorID', dptManagerId.value);\r\n      requestBodyToSubmit.append('FormData', JSON.stringify(formData)); // FormData  JSON \r\n      \r\n      // \r\n      const insertSignerIds = applyForm.value.insertSignerList?.map(person => person.id) || [];\r\n      requestBodyToSubmit.append('InsertSignerIds', JSON.stringify(insertSignerIds));\r\n\r\n      // \r\n      applyForm.value.attachments.forEach((file) => {\r\n        requestBodyToSubmit.append(`Attachments`, file.raw); //  File  FormData\r\n      });\r\n\r\n      try {\r\n        console.log(\"createForm:\", requestBodyToSubmit);\r\n        const createFormResponse = await FormService.createForm(requestBodyToSubmit); //  FormData \r\n        applyFormRef.value.resetFields();\r\n        ElMessage.success(\"!\");\r\n        emit('form-submitted', createFormResponse.data.documentID);\r\n      } catch (error) {\r\n        console.error(\":\", error);\r\n        ElMessage.error(\"!\");\r\n      }\r\n    })\r\n    .catch(() => {\r\n      ElMessage.info(\"\");\r\n    });\r\n  });\r\n};\r\n\r\n\r\nconst resetForm = (formRef) => {\r\n  formRef.resetFields();\r\n  applyForm.value.attachments = []; // \r\n  emit('form-reset');\r\n};\r\n\r\nconst querySearchEmployee = (queryString, callback) => {\r\n  const results = employeeData.value\r\n    .filter(emp => emp.name.includes(queryString))\r\n    .map(emp => ({ value: emp.name, raw: emp }));\r\n  callback(results);\r\n};\r\n\r\nconst onEmployeeSelect = async (item) => {\r\n  applyForm.value.agentEmployeeName = item.value;\r\n  applyForm.value.agentEmployeeId = item.raw.id;\r\n  // \r\n};\r\n\r\n\r\nconst dialogImageUrl = ref('');\r\nconst dialogVisible = ref(false);\r\n\r\nconst handleFileChange = (file, fileList) => {\r\n  const allowedTypes = ['image/jpeg', 'image/png', 'image/tiff', 'application/pdf'];\r\n  const isAllowedType = allowedTypes.includes(file.raw.type);\r\n\r\n  if (!isAllowedType) {\r\n    ElMessage.warning(' JPG, JPEG, PNG, TIFF, PDF !');\r\n    // \r\n    const newFileList = fileList.filter(f => f.uid !== file.uid);\r\n    applyForm.value.attachments = newFileList;\r\n    return false; //  Element Plus \r\n  }\r\n  applyForm.value.attachments = fileList;\r\n  \r\n  // \r\n  if (applyFormRef.value) {\r\n    applyFormRef.value.validateField('attachments');\r\n  }\r\n};\r\n\r\nconst handleFileRemove = (file, fileList) => {\r\n  applyForm.value.attachments = fileList;\r\n  \r\n  // \r\n  if (applyFormRef.value) {\r\n    applyFormRef.value.validateField('attachments');\r\n  }\r\n};\r\n\r\nconst handlePicturePreview = (file) => {\r\n  const { raw, name, url } = file;\r\n  const mime = raw?.type || '';\r\n  const ext = (name?.split('.').pop() || '').toLowerCase();\r\n\r\n  // \r\n  const isImage =\r\n    mime.startsWith('image/') ||\r\n    url.startsWith('data:image') ||\r\n    ['jpg','jpeg','png','gif','bmp','webp','tiff'].includes(ext);\r\n\r\n  // PDF \r\n  const isPdf =\r\n    mime === 'application/pdf' ||\r\n    ext === 'pdf' ||\r\n    url.startsWith('data:application/pdf');\r\n\r\n  if (isImage) {\r\n    dialogImageUrl.value = url;\r\n    dialogVisible.value = true;\r\n    return;\r\n  }\r\n\r\n  if (isPdf) {\r\n    // --- 1.  data-URLbase64 ---\r\n    if (url.startsWith('data:application/pdf;base64,')) {\r\n      const base64 = url.split(',')[1];\r\n      const bytes = atob(base64);\r\n      const len = bytes.length;\r\n      const arr = new Uint8Array(len);\r\n      for (let i = 0; i < len; i++) arr[i] = bytes.charCodeAt(i);\r\n      const blob = new Blob([arr], { type: 'application/pdf' });\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      window.open(blobUrl, '_blank');\r\n      setTimeout(() => URL.revokeObjectURL(blobUrl), 60_000);\r\n      return;\r\n    }\r\n\r\n    // --- 2.  Blobel-upload upload  ---\r\n    if (raw instanceof Blob) {\r\n      const blobUrl = URL.createObjectURL(raw);\r\n      window.open(blobUrl, '_blank');\r\n      setTimeout(() => URL.revokeObjectURL(blobUrl), 60_000);\r\n      return;\r\n    }\r\n\r\n    // --- 3.  URLhttp(s) ---\r\n    window.open(url, '_blank');\r\n    return;\r\n  }\r\n\r\n  ElMessage.warning('');\r\n};\r\n//  input \r\nconst handleHiddenFileInputChange = (event) => {\r\n  const files = event.target.files;\r\n  if (!files || files.length === 0) {\r\n    return;\r\n  }\r\n  const newFile = files[0];\r\n\r\n  //  ElUploadFile \r\n  const elFile = {\r\n    name: newFile.name,\r\n    raw: newFile,\r\n    size: newFile.size,\r\n    status: 'ready',\r\n    uid: Date.now() + Math.random(), //  ID\r\n    url: URL.createObjectURL(newFile) //  URL\r\n  };\r\n\r\n  // \r\n  const updatedFileList = [...applyForm.value.attachments, elFile];\r\n\r\n  //  handleFileChange  ()\r\n  handleFileChange(elFile, updatedFileList);\r\n\r\n  //  input  change \r\n  event.target.value = '';\r\n};\r\n\r\nconst getEmployeeData = async () => {\r\n  await employeeStore.fetchEmployeeData();\r\n  const filtered = employeeStore.employees.filter(e =>\r\n    e.emp_status !== 'Inactive' &&\r\n    e.id !== 'mis' &&\r\n    e.id !== 'vincent'\r\n  );\r\n  employeeData.value = filtered;\r\n};\r\n\r\n\r\n\r\nconst getSupervisor = async () => {\r\n  await deptStore.fetchDepartmentData();\r\n  const userDept = deptStore.departments.find(d => d.id === userStore.userDeptId);\r\n  if (userDept) {\r\n    let managerId = userDept.manager_id?.trim() || '';\r\n\r\n    // : \r\n    if (userStore.userId === 'TW0005') {\r\n      dptManagerId.value = 'vincent';\r\n      dptManagerName.value = '';\r\n      return;\r\n    }\r\n\r\n    if (managerId === userStore.userId) {\r\n      let parentId = userDept.p_dpt_id;\r\n      while (parentId && parentId !== '-1') {\r\n        const parentDept = deptStore.departments.find(d => d.id === parentId);\r\n        if (!parentDept) break;\r\n\r\n        const parentManager = parentDept.manager_id?.trim();\r\n        if (parentManager && parentManager !== userStore.userId) {\r\n          managerId = parentManager;\r\n          break;\r\n        }\r\n        parentId = parentDept.p_dpt_id;\r\n      }\r\n    }\r\n    dptManagerId.value = managerId;\r\n    dptManagerName.value = managerId ? await useIdToName.getEmployeeName(managerId) : '';\r\n  }\r\n};\r\n\r\nwatch(() => props.WF_Form_Data, async (newVal) => {\r\n  // console.log(\"watch: \",newVal)\r\n  if (newVal && Object.keys(newVal).length > 0) {\r\n    applyForm.value.applyDate = newVal.applyAt ? new Date(newVal.applyAt) : new Date();\r\n    applyForm.value.leaveType = newVal.leaveType || '';\r\n    applyForm.value.applicantDept = newVal.applierDptId || ''; //  applierDptId\r\n    applyForm.value.applicantName = newVal.applicantName || '';\r\n    \r\n    // \r\n    if (newVal.leaveStartDate && newVal.leaveEndDate && newVal.leaveStartTime && newVal.leaveEndTime) {\r\n      const startDateTime = new Date(`${newVal.leaveStartDate.split('T')[0]}T${newVal.leaveStartTime}`);\r\n      const endDateTime = new Date(`${newVal.leaveEndDate.split('T')[0]}T${newVal.leaveEndTime}`);\r\n      // \r\n      if (isNaN(startDateTime.getTime()) || isNaN(endDateTime.getTime())) {\r\n        applyForm.value.leaveDateTimeRange = [];\r\n      } else {\r\n        applyForm.value.leaveDateTimeRange = [startDateTime, endDateTime];\r\n      }\r\n    } else {\r\n      applyForm.value.leaveDateTimeRange = [];\r\n    }\r\n\r\n    applyForm.value.leaveHours = newVal.leaveHours || 0;\r\n    applyForm.value.leaveMinutes = newVal.leaveMinutes || 0;\r\n    actualLeaveMinutes.value = newVal.leaveMinutes || 0; //  actualLeaveMinutes\r\n    manualLeaveMinutes.value = newVal.leaveMinutes || 0; // \r\n    applyForm.value.agentEmployeeId = newVal.agentEmployeeId || '';\r\n    applyForm.value.agentEmployeeName = newVal.agentEmployeeName || '';\r\n    originalAgentEmployeeName.value = newVal.agentEmployeeName || ''; // \r\n    originalAgentEmployeeId.value = newVal.agentEmployeeId || ''; //  ID\r\n    applyForm.value.reason = newVal.reason || '';\r\n    \r\n    // \r\n    if (newVal.attachments && Array.isArray(newVal.attachments)) {\r\n      applyForm.value.attachments = newVal.attachments.map(attachment => {\r\n        //  Base64 \r\n        if (attachment.dataUri && attachment.fileName) {\r\n          return {\r\n            name: attachment.fileName,\r\n            url: attachment.dataUri, //  dataUri  URL\r\n            raw: attachment // \r\n          };\r\n        } else {\r\n          // \r\n          const applyDate = new Date(newVal.applyAt);\r\n          const year = applyDate.getFullYear();\r\n          const month = String(applyDate.getMonth() + 1).padStart(2, '0');\r\n          const day = String(applyDate.getDate()).padStart(2, '0');\r\n          const formattedDate = `${year}-${month}-${day}`;\r\n          const documentID = newVal.id; //  newVal.id ID\r\n          const fileName = attachment.fileName; //  fileName \r\n          const url = `/files/attached/${formattedDate}/${documentID}/${fileName}`; //  URL\r\n          return {\r\n            name: fileName,\r\n            url: url,\r\n            raw: attachment // \r\n          };\r\n        }\r\n      });\r\n    } else {\r\n      applyForm.value.attachments = [];\r\n    }\r\n\r\n\r\n  if (props.mode === 'WF' && newVal.applicantId) {\r\n    if (employeeData.value.length === 0) {\r\n      await getEmployeeData();\r\n    }\r\n        const employee = employeeData.value.find(e => e.id === newVal.applicantId);\r\n        if (employee) {\r\n          // LeaveRequestForm  supervisor  getSupervisor\r\n          //  getEmployeeAreaAndTitle\r\n        }\r\n    }\r\n  }\r\n}, { immediate: true });\r\n\r\nfunction getResubmitData() {\r\n  return {\r\n    applyDate: applyForm.value.applyDate.toISOString().split(\"T\")[0],\r\n    leaveType: applyForm.value.leaveType,\r\n    applicantDept: applyForm.value.applicantDept,\r\n    applicantId: userStore.userId,\r\n    applicantName: userStore.userName,\r\n    leaveStartDate: formatLocalDate(applyForm.value.leaveDateTimeRange[0]),\r\n    leaveEndDate: formatLocalDate(applyForm.value.leaveDateTimeRange[1]),\r\n    leaveStartTime: applyForm.value.leaveDateTimeRange[0].toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }),\r\n    leaveEndTime: applyForm.value.leaveDateTimeRange[1].toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }),\r\n    leaveHours: actualLeaveMinutes.value / 60,\r\n    leaveMinutes: actualLeaveMinutes.value,\r\n    agentEmployeeId: applyForm.value.agentEmployeeId,\r\n    agentEmployeeName: applyForm.value.agentEmployeeName,\r\n    reason: applyForm.value.reason,\r\n    attachments: applyForm.value.attachments.map(file => file.raw)\r\n  };\r\n}\r\n\r\ndefineExpose({\r\n  getResubmitData,\r\n  applyFormRef //  applyFormRef\r\n});\r\n \r\n const isScanningQrCode = ref(false); //  QR Code \r\nconst qrCodeScanner = ref(null); //  Html5QrcodeScanner \r\n\r\n// \r\nconst activeName = ref('')\r\n\r\n// \r\nconst leaveTypeInfo = ref({\r\n  SickLeave: {\r\n    title: '',\r\n    regulation: '1.1302.213.214.',\r\n    salary: '130',\r\n    legal: '43451521'\r\n  },\r\n  PersonalLeave: {\r\n    title: '',\r\n    regulation: '14',\r\n    salary: '',\r\n    legal: '437'\r\n  },\r\n  MenstrualLeave: {\r\n    title: '',\r\n    regulation: '13()',\r\n    salary: '',\r\n    legal: '1421'\r\n  },\r\n  OfficialLeave: {\r\n    title: '',\r\n    regulation: '',\r\n    salary: '()',\r\n    legal: '89'\r\n  },\r\n  WorkInjuryLeave: {\r\n    title: '',\r\n    regulation: '',\r\n    salary: '()',\r\n    legal: '5969'\r\n  },\r\n  FamilyCareLeave: {\r\n    title: '',\r\n    regulation: '7',\r\n    salary: '',\r\n    legal: '20217'\r\n  },\r\n  MarriageLeave: {\r\n    title: '',\r\n    regulation: '',\r\n    salary: '()',\r\n    legal: '4329'\r\n  },\r\n  MaternityLeave: {\r\n    title: '',\r\n    regulation: '1.82.343.2314.25',\r\n    salary: '1.266',\r\n    legal: '152150'\r\n  },\r\n  PrenatalCheckupLeave: {\r\n    title: '',\r\n    regulation: '7',\r\n    salary: '',\r\n    legal: '1521'\r\n  },\r\n  PaternityLeave: {\r\n    title: '',\r\n    regulation: '7(15)',\r\n    salary: '',\r\n    legal: '1521'\r\n  },\r\n  FuneralLeave: {\r\n    title: '',\r\n    regulation: '1.82.()63.()()3',\r\n    salary: '()',\r\n    legal: '4339'\r\n  },\r\n  JobSeekingLeave: {\r\n    title: '',\r\n    regulation: '',\r\n    salary: '',\r\n    legal: ''\r\n  }\r\n})\r\n\r\nfunction roundTo(value, decimals = 2) {\r\n  const p = 10 ** decimals\r\n  return Math.round((value + Number.EPSILON) * p) / p\r\n}\r\n\r\n// \r\nwatch(() => applyForm.value.leaveType, (newLeaveType) => {\r\n  if (newLeaveType && newLeaveType !== 'AnnualLeave' && leaveTypeInfo.value[newLeaveType]) {\r\n    activeName.value = newLeaveType\r\n  } else {\r\n    activeName.value = ''\r\n  }\r\n  \r\n  // \r\n  if (applyFormRef.value) {\r\n    nextTick(() => {\r\n      applyFormRef.value.validateField('attachments');\r\n    });\r\n  }\r\n})\r\n\r\nconst showMobileUploadOptions = () => {\r\n  if (isMobile.value) {\r\n    ElMessageBox.alert('', '', {\r\n      confirmButtonText: '',\r\n      showCancelButton: true,\r\n      cancelButtonText: '',\r\n      showClose: false,\r\n      closeOnClickModal: false,\r\n      callback: (action) => {\r\n        if (action === 'confirm') {\r\n          cameraInputRef.value.click(); // \r\n        } else if (action === 'cancel') {\r\n          galleryInputRef.value.click(); // \r\n        } else if (action === 'close') { //  X \r\n          // \r\n        }\r\n      },\r\n      //  QR Code\r\n      // Element Plus  ElMessageBox.alert \r\n      //  QR Code\r\n      //  ElMessageBox \r\n      //  ElDialog \r\n      //  QR Code\r\n    }).then(() => {\r\n      //  QR Code \r\n      //  ElMessageBox.alert  API \r\n      // \r\n    });\r\n    //  ElMessageBox  QR Code \r\n    //  ElMessageBox \r\n    ElMessageBox.confirm(' QR Code', '', {\r\n      confirmButtonText: ' QR Code',\r\n      showCancelButton: false,\r\n      showClose: false,\r\n      type: 'info',\r\n      center: true,\r\n    })\r\n    .then(() => {\r\n      startQrCodeScanner(); //  QR Code \r\n    })\r\n    .catch(() => {\r\n      // \r\n    });\r\n\r\n  } else {\r\n    // Element Plus \r\n    //  el-upload \r\n  }\r\n};\r\n\r\nconst startQrCodeScanner = () => {\r\n  isScanningQrCode.value = true;\r\n  nextTick(() => {\r\n    const qrCodeRegionId = \"qr-code-reader\";\r\n    qrCodeScanner.value = new Html5QrcodeScanner(\r\n      qrCodeRegionId,\r\n      { fps: 10, qrbox: { width: 250, height: 250 } },\r\n      /* verbose= */ false\r\n    );\r\n\r\n    qrCodeScanner.value.render(\r\n      (decodedText, decodedResult) => {\r\n        // \r\n        console.log(`QR Code result: ${decodedText}`, decodedResult);\r\n        applyForm.value.reason = decodedText; // \r\n        ElMessage.success('QR Code ');\r\n        stopQrCodeScanner(); // \r\n      },\r\n      (errorMessage) => {\r\n        //  QR Code\r\n        console.warn(`QR Code Scan Error: ${errorMessage}`); // \r\n      }\r\n    );\r\n  });\r\n};\r\n\r\nconst stopQrCodeScanner = () => {\r\n  if (qrCodeScanner.value) {\r\n    qrCodeScanner.value.clear().then(() => {\r\n      isScanningQrCode.value = false;\r\n      qrCodeScanner.value = null;\r\n    }).catch(error => {\r\n      console.error(\"Failed to clear html5QrcodeScanner. \", error);\r\n      isScanningQrCode.value = false;\r\n      qrCodeScanner.value = null;\r\n    });\r\n  }\r\n};\r\n\r\n onMounted(async () => {\r\n   await getEmployeeData();\r\n   await getSupervisor();\r\n });\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.leave-form-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 700px;\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  max-width: 1400px;\r\n}\r\n\r\n.form-section {\r\n  min-width: 0;\r\n}\r\n\r\n.leave-info-section {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  height: fit-content;\r\n  position: sticky;\r\n  margin-top: 3rem;\r\n  overflow: visible;\r\n}\r\n\r\n.leave-info-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.leave-info-header h3 {\r\n  margin: 0;\r\n  color: #409eff;\r\n  font-size: 1.3rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.leave-info-collapse {\r\n  border: none;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  */\r\n.leave-info-collapse :deep(.el-collapse-item__header) {\r\n  padding-left:1rem;\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.leave-info-collapse :deep(.el-collapse-item__arrow) {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.leave-info-collapse :deep(.el-collapse-item__content) {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  */\r\n.leave-info-collapse :deep(.el-collapse-item__header) {\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.leave-info-collapse :deep(.el-collapse-item__wrap) {\r\n  position: relative;\r\n  z-index: 0;\r\n  transform-origin: top center;\r\n  overflow: visible;\r\n}\r\n\r\n.leave-info-collapse :deep(.el-collapse-item__content) {\r\n  position: relative;\r\n  transform-origin: top center;\r\n  background: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  margin-top: 4px;\r\n}\r\n  \r\n.leave-info-collapse :deep(.el-collapse-item) {\r\n  position: relative;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.leave-info-content {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  border-left: 4px solid #409eff;\r\n}\r\n\r\n.info-row {\r\n  margin-bottom: 0.8rem;\r\n  line-height: 1.6;\r\n    font-size:1.2rem;\r\n}\r\n\r\n.info-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.info-label {\r\n  font-weight: 600;\r\n  color: #303133;\r\n  display: inline-block;\r\n  min-width: 80px;\r\n  font-size:1.2rem;\r\n}\r\n\r\n.info-value {\r\n  color: #606266;\r\n  word-break: break-word;\r\n  font-size:1.2rem;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1200px) {\r\n  .leave-form-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .leave-info-section {\r\n    position: static;\r\n    order: -1;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .leave-form-grid {\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .leave-info-section {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .leave-info-header h3 {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .info-label {\r\n    min-width: 70px;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .info-value {\r\n    font-size: 0.9rem;\r\n  }\r\n}\r\n\r\n\r\n.form-item-responsive {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  font-size:1.2rem; /*  1.2rem */\r\n}\r\n\r\n/*  el-form-item  */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-select  */\r\n.el-select-dropdown__item {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-date-picker  */\r\n.el-date-table td .cell {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-autocomplete  */\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  span  */\r\n.editable-span {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.el-form-item__label {\r\n  text-align: right !important; /*  */\r\n  font-size: 1.2rem; /*  label  1.2rem */\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  /* 1.  */\r\n  .workflow-table {\r\n    width: 100% !important;\r\n  }\r\n\r\n  /* 2.  row  span  */\r\n  .workflow-table .el-table__body-wrapper td .doc-type,\r\n  .workflow-table .el-table__body-wrapper td .doc-id-title,\r\n  .workflow-table .el-table__body-wrapper td .doc-id,\r\n  .workflow-table .el-table__body-wrapper td .dept-name,\r\n  .workflow-table .el-table__body-wrapper td .creator-name,\r\n  .workflow-table .el-table__body-wrapper td .created-date,\r\n  .workflow-table .el-table__body-wrapper td .status-name {\r\n    display: block;\r\n    margin: 0.25rem 0;\r\n  }\r\n\r\n  /* 3.  */\r\n  .workflow-table .el-table__header th:nth-child(n+2) {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.leave-date-time-item {\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n.leave-date-time-item .el-form-item__label {\r\n  width: 80% !important;\r\n  text-align: left;\r\n  margin-bottom: 5px;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n\r\n}\r\n\r\n.leave-date-time-item .el-form-item__content {\r\n  width: 80%;\r\n    font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n\r\n}\r\n\r\n.attachment-item .el-form-item__content {\r\n  display: flex;\r\n  flex-direction: column; /*  */\r\n  align-items: flex-start;\r\n  width: 100%; /*  */\r\n}\r\n\r\n.upload-container {\r\n  display: flex;\r\n  align-items: center; /*  */\r\n  gap: 10px; /*  */\r\n  flex-wrap: wrap; /*  */\r\n  cursor: pointer; /*  */\r\n}\r\n\r\n/*  */\r\n.el-upload-list__item-thumbnail {\r\n  max-width: 100% !important; /*  */\r\n  height: auto !important;\r\n  display: block; /*  */\r\n}\r\n\r\n/*  */\r\n.el-upload-list--picture .el-upload-list__item {\r\n  width: auto !important; /*  */\r\n  max-width: 100% !important; /*  */\r\n  height: auto !important;\r\n  box-sizing: border-box; /*  padding  border  */\r\n  display: flex; /*  flexbox  */\r\n  align-items: center; /*  */\r\n  justify-content: space-between; /*  */\r\n}\r\n\r\n/*  el-upload  */\r\n.el-upload {\r\n  max-width: 100%;\r\n}\r\n\r\n::v-deep .el-form-item__label {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;  \r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n\r\n::v-deep .el-form-item__content {\r\n  font-size: 1.2rem;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n\r\n\r\n@media (max-width: 768px) {\r\n  .attachment-item .el-form-item__content {\r\n    flex-direction: column; /*  */\r\n    align-items: flex-start;\r\n  }\r\n  .upload-container {\r\n    flex-direction: column; /*  */\r\n    align-items: flex-start;\r\n  }\r\n}\r\n\r\n/*  */\r\n.el-upload-list__item-name {\r\n  flex-grow: 1; /*  */\r\n  margin-right: 10px; /*  */\r\n  overflow: hidden; /*  */\r\n  text-overflow: ellipsis; /*  */\r\n  white-space: nowrap; /*  */\r\n}\r\n\r\n\r\n/*  scoped */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.2rem;\r\n}\r\n.el-select-dropdown__item {\r\n  font-size: 1.2rem;\r\n}\r\n.el-date-table td .cell {\r\n  font-size: 1.2rem;\r\n}\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.2rem;\r\n}\r\n.editable-span {\r\n  font-size: 1.2rem;\r\n}\r\n.el-form-item__label {\r\n  text-align: right !important;\r\n  font-size: 1.2rem; \r\n}\r\n\r\n/*  */\r\n.countersign-section {\r\n  margin: 1rem 0;\r\n  padding: 1rem;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border-radius: 8px;\r\n  border: 1px solid #dee2e6;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.countersign-container {\r\n  width: 100%;\r\n}\r\n\r\n.countersign-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  align-items: center;\r\n  min-height: 32px;\r\n}\r\n\r\n.countersign-tag {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 4px 8px;\r\n  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\r\n  border: none;\r\n  border-radius: 16px;\r\n  color: white;\r\n  font-weight: 500;\r\n  box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-tag:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4);\r\n}\r\n\r\n.countersign-icon {\r\n  font-size: 14px;\r\n}\r\n\r\n.countersign-add-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 6px 12px;\r\n  border: 2px dashed #28a745;\r\n  border-radius: 16px;\r\n  background: transparent;\r\n  color: #28a745;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-add-btn:hover:not(:disabled) {\r\n  background: #28a745;\r\n  color: white;\r\n  border-style: solid;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);\r\n}\r\n\r\n.countersign-add-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.countersign-empty {\r\n  padding: 8px 0;\r\n  text-align: center;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.countersign-dialog {\r\n  border-radius: 12px;\r\n}\r\n\r\n.countersign-dialog .el-dialog {\r\n  width: 480px !important;\r\n  max-width: 90vw;\r\n}\r\n\r\n.countersign-dialog-content {\r\n  padding: 16px 0;\r\n}\r\n\r\n/*  */\r\n.countersign-dialog .el-form-item {\r\n  margin-bottom: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-checkbox-group .el-checkbox {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-radio-group .el-radio {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-alert {\r\n  margin-bottom: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .countersign-section {\r\n    margin: 0.5rem 0;\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .countersign-tags {\r\n    gap: 6px;\r\n  }\r\n  \r\n  .countersign-tag {\r\n    font-size: 12px;\r\n    padding: 3px 6px;\r\n  }\r\n  \r\n  .countersign-add-btn {\r\n    font-size: 12px;\r\n    padding: 4px 8px;\r\n  }\r\n}\r\n\r\n\r\n</style>\r\n\r\n\r\n","import script from \"./LeaveRequestForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LeaveRequestForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LeaveRequestForm.vue?vue&type=style&index=0&id=26009c44&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-26009c44\"]])\n\nexport default __exports__","import { ref } from 'vue';\r\nimport useIdToName from '@/stores/IdToName.js';\r\nimport { useDeptStore } from '@/stores/dept.js';\r\n\r\nexport async function getSupervisor(employeeId, departmentId) {\r\n  const deptStore = useDeptStore();\r\n  await deptStore.fetchDepartmentData();\r\n\r\n  const emp_dept = deptStore.departments.find(d => d.id === departmentId);\r\n\r\n  let dptManagerId = ref('');\r\n  let dptManagerName = ref('');\r\n\r\n  if (!emp_dept) {\r\n    dptManagerName.value = '';\r\n    dptManagerId.value = '';\r\n    return { supervisorId: dptManagerId.value, supervisorName: dptManagerName.value };\r\n  }\r\n\r\n  // : \r\n  if (employeeId === 'TW0005') {\r\n    dptManagerId.value = 'vincent';\r\n    dptManagerName.value = '';\r\n    return { supervisorId: dptManagerId.value, supervisorName: dptManagerName.value };\r\n  }\r\n\r\n  let managerId = emp_dept.manager_id?.trim() || '';\r\n\r\n  if (managerId === employeeId) {\r\n    let parentId = emp_dept.p_dpt_id;\r\n    while (parentId && parentId !== '-1') {\r\n      const parentDept = deptStore.departments.find(d => d.id === parentId);\r\n      if (!parentDept) break;\r\n\r\n      const parentManager = parentDept.manager_id?.trim();\r\n      if (parentManager && parentManager !== employeeId) {\r\n        managerId = parentManager;\r\n        break;\r\n      }\r\n      parentId = parentDept.p_dpt_id;\r\n    }\r\n  }\r\n\r\n  dptManagerId.value = managerId;\r\n  dptManagerName.value = managerId\r\n    ? await useIdToName.getEmployeeName(managerId)\r\n    : '';\r\n\r\n  return { supervisorId: dptManagerId.value, supervisorName: dptManagerName.value };\r\n}","<template>\r\n  <div class=\"container\">\r\n    <div class=\"item1\">\r\n      <el-config-provider :locale=\"zhTw\">\r\n        <el-form\r\n          ref=\"overtimeFormRef\"\r\n          class=\"workflow-form invoice\"\r\n          :style=\"formStyle\"\r\n          :model=\"overtimeForm\"\r\n          :rules=\"rules\"\r\n          label-width=\"9rem\"\r\n          status-icon\r\n          label-position=\"left\"\r\n        >\r\n          <div class=\"applier-info-fields\">\r\n            <!-- / -->\r\n            <el-form-item label-position=\"center\" label=\"/\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\">\r\n              <span v-if=\"mode === 'create'\">{{ titleName }} / {{ areaName }}</span>\r\n              <span style=\"font-size:1.2rem;font-weight: bold; \"  v-else-if=\"mode === 'WF'\">{{ titleName }} / {{ areaName }}</span>\r\n            </el-form-item>\r\n            \r\n            <!--  -->\r\n            <el-form-item label-position=\"center\"  label=\"\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\">\r\n              <span v-if=\"mode === 'create'\">{{ userStore.userDeptName }}</span>\r\n              <span style=\"font-size:1.2rem;font-weight: bold; width:11rem;\"  v-else-if=\"mode === 'WF'\">{{  applierDeptName }}</span>\r\n            </el-form-item>\r\n          </div>\r\n          \r\n\r\n          <!--  -->\r\n          <div v-for=\"(item, index) in overtimeForm.overtimePersonnel\" :key=\"index\" class=\"overtime-personnel-block\" >\r\n            <div class=\"overtime-personnel-header\">\r\n              <el-divider  content-position=\"left\" v-if=\"mode === 'create'\">\r\n                <el-button style=\"margin-right:0.5rem\" size=\"small\" type=\"danger\" :icon=\"Minus\" circle @click=\"removeOvertimePersonnel(index)\" v-if=\"overtimeForm.overtimePersonnel.length > 1\" />\r\n                <span style=\"font-weight: bold;font-size:1rem;background-color:darkseagreen;padding:0.3rem 1rem 0.5rem 1rem;text-align: center;border-radius: 10px 100px / 120px;\"> {{ item.personnelName || (index + 1) }} </span>\r\n                <!--  -  canAmend  true  -->\r\n                <el-button \r\n                  v-if=\"props.canAmend\" \r\n                  style=\"margin-left:1rem\" \r\n                  size=\"small\" \r\n                  type=\"primary\" \r\n                  @click=\"copyExpectedToActualData\"\r\n                  title=\"\"\r\n                >\r\n                  \r\n                </el-button>\r\n              </el-divider>\r\n            </div>\r\n            <!-- WF  -->\r\n            <div v-if=\"isWFMode\" class=\"overtime-personnel-fields-wf\">\r\n              <!--  -  -->\r\n              <div class=\"personnel-name-row\">\r\n                <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.personnelName`\" label-width=\"6rem\" class=\"personnel-name-item\">\r\n                  <div style=\"display: flex; align-items: center; gap: 1rem;\">\r\n                    <!--  span autocomplete -->\r\n                    <span \r\n                      v-if=\"!props.WF_canEdit\" \r\n                      style=\"font-size:1.5rem;font-weight: bold;background-color:antiquewhite;width: 8rem;\"\r\n                    >\r\n                      {{ item.personnelName || ` ${index + 1}` }}\r\n                    </span>\r\n                    <el-autocomplete\r\n                      v-else\r\n                      v-model=\"item.personnelName\"\r\n                      :fetch-suggestions=\"querySearchEmployee\"\r\n                      placeholder=\"\"\r\n                      @select=\"(selectedItem) => onEmployeeSelect(selectedItem, index)\"\r\n                      clearable\r\n                      :trigger-on-focus=\"false\"\r\n                      :disabled=\"isDisabled\"\r\n                      style=\"width: 12rem;\"\r\n                    />\r\n                    <!-- WF  -->\r\n                    <el-button \r\n                      v-if=\"props.WF_canEdit && overtimeForm.overtimePersonnel.length > 1\" \r\n                      size=\"small\" \r\n                      type=\"danger\" \r\n                      :icon=\"Minus\" \r\n                      circle \r\n                      @click=\"removeOvertimePersonnel(index)\"\r\n                      title=\"\"\r\n                    />\r\n                    <!--  -  canAmend  true  -->\r\n                    <el-button \r\n                      v-if=\"props.canAmend\" \r\n                      size=\"small\" \r\n                      type=\"primary\" \r\n                      @click=\"copyExpectedToActualData\"\r\n                      title=\"\"\r\n                    >\r\n                      \r\n                    </el-button>\r\n                  </div>\r\n                </el-form-item>\r\n              </div>\r\n\r\n              <!--  -->\r\n              <div class=\"fields-grid\">\r\n                <!--  -->\r\n                <div class=\"grid-row\">\r\n                  <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.overtimeDateTimeRange`\" label-width=\"6.5rem\"  class=\"grid-item expected\">\r\n                    <!--  span -->\r\n                    <span v-if=\"!props.WF_canEdit\" class=\"readonly-datetime\">\r\n                      {{ formatDateTimeRange(item.overtimeDateTimeRange) }}\r\n                    </span>\r\n                    <el-date-picker\r\n                      v-else\r\n                      v-model=\"item.overtimeDateTimeRange\"\r\n                      type=\"datetimerange\"\r\n                      range-separator=\"~\"\r\n                      start-placeholder=\"\"\r\n                      end-placeholder=\"\"\r\n                      :value-format=\"isWFMode ? '' : 'YYYY-MM-DD HH:mm'\"\r\n                      style=\"width: 100%;font-size:0.5rem\"\r\n                      format=\"YYYY/MM/DD HH:mm\"\r\n                      @change=\"onOvertimeDateTimeRangeChange(item)\"\r\n                      :disabled=\"isDisabled\"\r\n                    />\r\n                    </el-form-item>\r\n                  \r\n                  <el-form-item \r\n                      v-if=\"props.isShowActualField\" \r\n                      label=\"\"  \r\n                      label-width=\"6.5rem\"  \r\n                      :prop=\"`overtimePersonnel.${index}.actualOvertimeDateTimeRange`\" \r\n                      label-class=\"actual-label\" \r\n                      class=\"grid-item expected actual\"\r\n                  >\r\n                    <!--  canAmend  false  span -->\r\n                    <span v-if=\"!props.canAmend\" class=\"readonly-datetime\">\r\n                      {{ formatDateTimeRange(item.actualOvertimeDateTimeRange) }}\r\n                    </span>\r\n                    <el-date-picker\r\n                      v-else\r\n                      :key=\"`actual-datetime-${index}-${forceRerenderKey}`\"\r\n                      v-model=\"item.actualOvertimeDateTimeRange\"\r\n                      type=\"datetimerange\"\r\n                      range-separator=\"\"\r\n                      start-placeholder=\"\"\r\n                      end-placeholder=\"\"\r\n                      value-format=\"YYYY-MM-DD HH:mm\"\r\n                      style=\"width: 100%;\"\r\n                      format=\"YYYY/MM/DD HH:mm\"\r\n                      @change=\"onActualOvertimeDateTimeRangeChange(item)\"\r\n                      :disabled=\"isActualOvertimeDisabled\"\r\n                      class=\"actual-datetime-picker\"\r\n                      :data-personnel-index=\"index\"\r\n                    />\r\n                  </el-form-item>\r\n                </div>\r\n\r\n                <!--  -->\r\n                <div class=\"grid-row\">\r\n                  <el-form-item label=\"\" label-width=\"6.5rem\" class=\"grid-item expected\">\r\n                    <!--  span -->\r\n                    <div v-if=\"!props.WF_canEdit\" class=\"readonly-content\">\r\n                      {{ formattedOvertimeHours(item) }}\r\n                    </div>\r\n                    <div v-else-if=\"!item.isEditingOvertimeHours\">\r\n                      <span @dblclick=\"enableOvertimeHoursEdit(item)\" class=\"readonly-content\" style=\"cursor: pointer;\">\r\n                        {{ formattedOvertimeHours(item) }}\r\n                      </span>\r\n                      <el-text class=\"mx-1\" type=\"info\" style=\"font-size: 0.8rem;\">()</el-text>\r\n                    </div>\r\n                    <el-input\r\n                      v-else\r\n                      v-model.number=\"item.manualOvertimeMinutes\"\r\n                      @blur=\"disableOvertimeHoursEdit(item)\"\r\n                      @keyup.enter=\"disableOvertimeHoursEdit(item)\"\r\n                      size=\"small\"\r\n                      :disabled=\"isDisabled\"\r\n                    >\r\n                      <template #append><el-text style=\"font-size:1rem\"></el-text></template>\r\n                    </el-input>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"props.isShowActualField\" label-width=\"6.5rem\" label=\"\" label-class=\"actual-label\" class=\"grid-item actual expected\">\r\n                      <span v-if=\"!item.isEditingActualOvertimeHours\" @dblclick=\"enableActualOvertimeHoursEdit(item)\" class=\"readonly-content\">\r\n                        {{ formattedActualOvertimeHours(item) }}\r\n                      </span>\r\n                    <el-input\r\n                      v-else\r\n                      v-model.number=\"item.manualActualOvertimeMinutes\"\r\n                      @blur=\"disableActualOvertimeHoursEdit(item)\"\r\n                      @keyup.enter=\"disableActualOvertimeHoursEdit(item)\"\r\n                      size=\"small\"\r\n                      :disabled=\"isActualOvertimeDisabled\"\r\n                    >\r\n                      <template #append><el-text style=\"font-size:1rem\"></el-text></template>\r\n                    </el-input>\r\n                  </el-form-item>\r\n                </div>\r\n\r\n                <!--  -->\r\n                <div class=\"grid-row\">\r\n                  <el-form-item label=\"\" label-width=\"6.5rem\" :prop=\"`overtimePersonnel.${index}.overtimeContent`\" class=\"grid-item expected\">\r\n                    <!--  span -->\r\n                    <span v-if=\"!props.WF_canEdit\" class=\"readonly-content\">\r\n                      {{ item.overtimeContent || '()' }}\r\n                    </span>\r\n                    <el-input\r\n                      v-else\r\n                      type=\"textarea\"\r\n                      v-model=\"item.overtimeContent\"\r\n                      placeholder=\"\"\r\n                      :rows=\"2\"\r\n                      :disabled=\"isDisabled\"\r\n                    />\r\n                  </el-form-item>\r\n\r\n                  <el-form-item \r\n                    v-if=\"props.isShowActualField\" \r\n                      label=\"\" \r\n                      label-width=\"6.5rem\" \r\n                      :prop=\"`overtimePersonnel.${index}.actualOvertimeContent`\" \r\n                      label-class=\"actual-label\"\r\n                      class=\"grid-item actual expected\"\r\n                  >\r\n                    <!--  WF  canAmend  false  span -->\r\n                    <span v-if=\"props.mode === 'WF' && !props.canAmend\" class=\"readonly-content\">\r\n                      {{ item.actualOvertimeContent || '()' }}\r\n                    </span>\r\n                    <el-input\r\n                      v-else\r\n                      type=\"textarea\"\r\n                      v-model=\"item.actualOvertimeContent\"\r\n                      placeholder=\"\"\r\n                      :rows=\"2\"\r\n                      :disabled=\"isActualOvertimeDisabled\"\r\n                    />\r\n                  </el-form-item>\r\n                </div>\r\n\r\n                <!--  -->\r\n                <div class=\"grid-row\">\r\n                  <el-form-item label=\"\" label-width=\"6.5rem\" :prop=\"`overtimePersonnel.${index}.mealAllowance`\" class=\"grid-item expected\">\r\n                    <!--  span -->\r\n                    <span v-if=\"!props.WF_canEdit\" class=\"readonly-amount\">\r\n                      {{ formatAmount(item.mealAllowance) }}\r\n                    </span>\r\n                    <el-input \r\n                      v-else\r\n                      class=\"no-spin\" \r\n                      type=\"number\" \r\n                      min=\"0\" \r\n                      v-model.number=\"item.mealAllowance\" \r\n                      placeholder=\"\" \r\n                      :disabled=\"isDisabled\"\r\n                    >\r\n                      <template #prepend>NT$</template>\r\n                    </el-input>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"props.isShowActualField\" label-width=\"6.5rem\" label=\"\" :prop=\"`overtimePersonnel.${index}.actualMealAllowance`\" label-class=\"actual-label\" class=\"grid-item actual expected\">\r\n                    <!--  WF  canAmend  false  span -->\r\n                    <span v-if=\"props.mode === 'WF' && !props.canAmend\" class=\"readonly-amount\">\r\n                      {{ formatAmount(item.actualMealAllowance) }}\r\n                    </span>\r\n                    <el-input \r\n                      v-else\r\n                      class=\"no-spin\" \r\n                      type=\"number\" \r\n                      min=\"0\" \r\n                      v-model.number=\"item.actualMealAllowance\" \r\n                      placeholder=\"\" \r\n                      :disabled=\"isActualOvertimeDisabled\"\r\n                    >\r\n                      <template #prepend>NT$</template>\r\n                    </el-input>\r\n                  </el-form-item>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!--  WF  -->\r\n            <div v-else class=\"overtime-personnel-fields\"  :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\">\r\n              <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.personnelName`\" label-width=\"6rem\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\"  class=\"overtime-personnel-name-item\">\r\n                <el-autocomplete\r\n                  v-model=\"item.personnelName\"\r\n                  :fetch-suggestions=\"querySearchEmployee\"\r\n                  placeholder=\"\"\r\n                  @select=\"(selectedItem) => onEmployeeSelect(selectedItem, index)\"\r\n                  clearable\r\n                  :trigger-on-focus=\"false\"\r\n                  :disabled=\"isDisabled\"\r\n                  :style=\"{ 'margin-left': isWFMode ? '3rem' : '0rem' }\"\r\n            />\r\n              </el-form-item>\r\n              <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.overtimeDateTimeRange`\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" class=\"overtime-datetime-range-item\">\r\n                <el-date-picker\r\n                  v-model=\"item.overtimeDateTimeRange\"\r\n                  type=\"datetimerange\"\r\n                  range-separator=\"\"\r\n                  start-placeholder=\"\"\r\n                  end-placeholder=\"\"\r\n                  :value-format=\"isWFMode ? '' : 'YYYY-MM-DD HH:mm'\"\r\n                  style=\"width: 14rem;\"\r\n                  format=\"YYYY/MM/DD HH:mm\"\r\n                  @change=\"onOvertimeDateTimeRangeChange(item)\"\r\n                  :disabled=\"isDisabled\"\r\n                  :style=\"{ 'margin-left': isWFMode ? '3rem' : '0rem' }\"             />\r\n              </el-form-item>\r\n\r\n              <!--  -->\r\n              <el-form-item label=\"\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" >\r\n                <div v-if=\"!item.isEditingOvertimeHours\" >\r\n                  <div @dblclick=\"enableOvertimeHoursEdit(item)\" class=\"readonly-content\">{{ formattedOvertimeHours(item) }}</div>\r\n                  <el-text class=\"mx-1\" type=\"info\" v-if=\"props.mode==='create'\" >()</el-text>\r\n                </div>\r\n                <el-input\r\n                  v-else\r\n                  v-model.number=\"item.manualOvertimeMinutes\"\r\n                  @blur=\"disableOvertimeHoursEdit(item)\"\r\n                  @keyup.enter=\"disableOvertimeHoursEdit(item)\"\r\n                  size=\"small\"\r\n                  :disabled=\"isDisabled\"\r\n   \r\n                  :style=\"{ 'margin-left': isWFMode ? '3rem' : '0rem' }\"             >\r\n                  <template #append ><el-text style=\"font-size:1rem\"></el-text></template>\r\n                </el-input>\r\n              </el-form-item>\r\n\r\n              <!--  -->\r\n              <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.overtimeContent`\"   label-width=\"6.5rem\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" class=\"overtime-content-item\">\r\n                <div style=\"width:15rem;\">\r\n\r\n                  <el-input\r\n                  type=\"textarea\"\r\n                  v-model=\"item.overtimeContent\"\r\n                  placeholder=\"\"\r\n                  :rows=\"2\"\r\n                  :disabled=\"isDisabled\"\r\n                  />\r\n                </div>\r\n              </el-form-item>\r\n\r\n              <!--  -->\r\n              <el-form-item label=\"\" :prop=\"`overtimePersonnel.${index}.mealAllowance`\"  label-width=\"6rem\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" class=\"meal-allowance-item\">\r\n                  <el-input  class=\"no-spin\" type=\"number\" min=\"0\"  v-model.number=\"item.mealAllowance\" placeholder=\"\" :disabled=\"isDisabled\">\r\n                  <template #prepend>NT$</template>\r\n                </el-input>\r\n              </el-form-item>\r\n\r\n              <!--  (canAmend === true ) -->\r\n              <template v-if=\"props.isShowActualField\">\r\n                <el-form-item :label=\"``\" :prop=\"`overtimePersonnel.${index}.actualOvertimeDateTimeRange`\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" label-class=\"actual-label\" class=\"overtime-datetime-range-item expected\">\r\n                  <el-date-picker\r\n                    v-model=\"item.actualOvertimeDateTimeRange\"\r\n                    type=\"datetimerange\"\r\n                    range-separator=\"\"\r\n                    start-placeholder=\"\"\r\n                    end-placeholder=\"\"\r\n                    value-format=\"YYYY-MM-DD HH:mm\"\r\n                    style=\"width: 14rem;\"\r\n                    format=\"YYYY/MM/DD HH:mm\"\r\n                    @change=\"onActualOvertimeDateTimeRangeChange(item)\"\r\n                    :disabled=\"isActualOvertimeDisabled\"\r\n                  />\r\n                </el-form-item>\r\n\r\n                <el-form-item :label=\"``\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" label-class=\"actual-label\">\r\n                  <div v-if=\"!item.isEditingActualOvertimeHours\" >\r\n                    <span @dblclick=\"enableActualOvertimeHoursEdit(item)\" class=\"readonly-content\">{{ formattedActualOvertimeHours(item) }}</span>\r\n                    <el-text class=\"mx-1\" type=\"info\"  >()</el-text>\r\n                  </div>\r\n                  <el-input\r\n                    v-else\r\n                    v-model.number=\"item.manualActualOvertimeMinutes\"\r\n                    @blur=\"disableActualOvertimeHoursEdit(item)\"\r\n                    @keyup.enter=\"disableActualOvertimeHoursEdit(item)\"\r\n                    size=\"small\"\r\n                    style=\"width: 8rem;\"\r\n                    :disabled=\"isActualOvertimeDisabled\"\r\n                  >\r\n                    <template #append ><el-text style=\"font-size:1rem\"></el-text></template>\r\n                  </el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item :label=\"``\" :prop=\"`overtimePersonnel.${index}.actualOvertimeContent`\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" label-class=\"actual-label\">\r\n                  <el-input\r\n                    type=\"textarea\"\r\n                    v-model=\"item.actualOvertimeContent\"\r\n                    placeholder=\"\"\r\n                    :rows=\"3\"\r\n                    :disabled=\"isActualOvertimeDisabled\"\r\n                  />\r\n                </el-form-item>\r\n\r\n                <!--  -->\r\n                <el-form-item :label=\"``\" :prop=\"`overtimePersonnel.${index}.actualMealAllowance`\" label-width=\"6rem\" :class=\"{'form-item-responsive': !isWFMode, 'form-item-vertical': isWFMode}\" label-class=\"actual-label\" class=\"actual-meal-allowance-item\">\r\n                  <el-input \r\n                    class=\"no-spin\" \r\n                    type=\"number\" \r\n                    min=\"0\" \r\n                    v-model.number=\"item.actualMealAllowance\" \r\n                    placeholder=\"\" \r\n                    :disabled=\"isActualOvertimeDisabled\"\r\n                    :style=\"{ 'margin-left': isWFMode ? '3rem' : '0rem' }\"\r\n                  >\r\n                    <template #prepend>NT$</template>\r\n                  </el-input>\r\n                </el-form-item>\r\n              </template>\r\n            </div>\r\n          </div>\r\n            <div class=\"button-group\">\r\n              <el-button \r\n                class=\"mb-3\" \r\n                size=\"large\" \r\n                type=\"warning\" \r\n                :icon=\"Plus\" \r\n                circle \r\n                @click=\"addOvertimePersonnel\" \r\n                :disabled=\"isDisabled\"\r\n                v-if=\"mode === 'create' || (mode === 'WF' && props.WF_canEdit)\"\r\n                title=\"\"\r\n              />\r\n            </div>\r\n\r\n\r\n\r\n          <!--  -->\r\n           <el-form-item label=\"\" prop=\"insertSignerList\" class=\"form-item-responsive countersign-section\" v-if=\"false\">\r\n             <div class=\"countersign-container\">\r\n               <div class=\"countersign-tags\">\r\n                 <el-tag\r\n                   v-for=\"emp in overtimeForm.insertSignerList\"\r\n                   :key=\"emp.id\"\r\n                   type=\"success\"\r\n                   closable\r\n                   @close=\"removeCountersigner(emp.id)\"\r\n                   class=\"countersign-tag\"\r\n                 >\r\n                   <el-icon class=\"countersign-icon\"><User /></el-icon>\r\n                   {{ emp.name }}\r\n                 </el-tag>\r\n                 \r\n                 <el-button\r\n                   type=\"success\"\r\n                   plain\r\n                   class=\"countersign-add-btn\"\r\n                   size=\"small\"\r\n                   @click=\"isInsertDialogVisible = true\"\r\n                   :disabled=\"isDisabled\"\r\n                 >\r\n                   <el-icon><Plus /></el-icon>\r\n                   \r\n                 </el-button>\r\n               </div>\r\n               \r\n               <div v-if=\"overtimeForm.insertSignerList.length === 0\" class=\"countersign-empty\">\r\n                 <el-text type=\"info\" size=\"small\"></el-text>\r\n               </div>\r\n             </div>\r\n\r\n             <el-dialog\r\n               v-model=\"isInsertDialogVisible\"\r\n               title=\"\"\r\n               width=\"480px\"\r\n               top=\"15vh\"\r\n               @close=\"isInsertDialogVisible=false\"\r\n               class=\"countersign-dialog\"\r\n             >\r\n               <div class=\"countersign-dialog-content\">\r\n                 <el-alert\r\n                   title=\"\"\r\n                   type=\"info\"\r\n                   :closable=\"false\"\r\n                   show-icon\r\n                   class=\"countersign-alert\"\r\n                 >\r\n                   \r\n                 </el-alert>\r\n                 \r\n                 <Custom_List_Insert_Notify\r\n                   v-model=\"overtimeForm.insertSignerList\"\r\n                   mode=\"insert\"\r\n                   @change=\"validateCountersigners\"\r\n                 />\r\n               </div>\r\n               <template #footer>\r\n                 <el-button @click=\"isInsertDialogVisible=false\"></el-button>\r\n                 <el-button type=\"primary\" @click=\"confirmCountersigners\"></el-button>\r\n               </template>\r\n             </el-dialog>\r\n           </el-form-item>\r\n\r\n           <!--  -->\r\n           <div class=\"submit-btn-group\" v-if=\"mode === 'create'\">\r\n\r\n               <el-button type=\"success\" @click=\"submitOvertimeForm(overtimeFormRef)\" :disabled=\"isDisabled\">\r\n                 \r\n                </el-button>\r\n                <el-button @click=\"resetForm(overtimeFormRef)\" :disabled=\"isDisabled\">\r\n                  \r\n                </el-button>\r\n      \r\n            </div>\r\n        </el-form>\r\n      </el-config-provider>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted, defineExpose, nextTick,defineProps } from \"vue\";\r\nimport { useUserStore } from \"../../../../stores/user.js\";\r\nimport { useAuthStore } from \"../../../../stores/auth.js\"; //  useAuthStore\r\nimport { useEmployeeStore } from '@/stores/employee.js'; //  useEmployeeStore\r\nimport useIdToName from '@/stores/IdToName.js';\r\nimport FormService from '@/service/FormService.js';\r\nimport { getSupervisor } from '../../Utils/supervisorUtils.js'; //  getSupervisor\r\nimport { ElMessage, ElMessageBox, ElForm, ElFormItem, ElInput, ElDatePicker, ElButton, ElConfigProvider, ElDivider, ElAutocomplete } from 'element-plus';\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs';\r\nimport { useWindowSize } from '@vueuse/core';\r\nimport { Plus, Minus, User } from '@element-plus/icons-vue'; //  Plus  Minus \r\nimport \"../../../../css/form/workflow-form.css\";\r\nimport '@/css/button/wf-button.css';\r\nimport Custom_List_Insert_Notify from '@/components/WorkFlow/Common/Custom_List_Insert_Notify';\r\nconst emit = defineEmits(['form-submitted', 'form-reset']);\r\n\r\nconst userStore = useUserStore();\r\nconst authStore = useAuthStore(); //  authStore\r\nconst employeeStore = useEmployeeStore(); //  employeeStore\r\nconst overtimeFormRef = ref(null);\r\nconst dptManagerId = ref(); //  dptManagerId\r\nconst dptManagerName = ref(); //  dptManagerName\r\nconst employeeData = ref([]); //  employeeData\r\nconst { width } = useWindowSize(); // \r\n\r\n//  key\r\nconst forceRerenderKey = ref(0);\r\n\r\n\r\nconst props = defineProps({\r\n  mode: {\r\n    type: String,\r\n    default: 'create' // 'create' for new form, 'WF' for workflow view\r\n  },\r\n  WF_Form_Data: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  WF_canEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  canAmend: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  layout: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  isShowActualField:{\r\n    type:Boolean,\r\n    default:false\r\n  }\r\n});\r\n\r\nconst isWFMode = computed(() => props.mode === 'WF');\r\n\r\nconst isDisabled = computed(() => {\r\n  return props.mode === 'WF' && !props.WF_canEdit;\r\n});\r\n\r\n// \r\nconst isActualOvertimeDisabled = computed(() => {\r\n  return props.mode === 'WF' && !props.canAmend;\r\n});\r\n\r\nconst formStyle = computed(() => {\r\n  if (width.value <= 768) {\r\n    return {\r\n      width: '80%',\r\n      maxWidth: '100%',\r\n      margin: '1rem auto',\r\n      padding: '0rem'\r\n    };\r\n  } else if(isWFMode.value) {\r\n    \r\n    return {\r\n      width: '35rem',\r\n      maxWidth: '35rem',\r\n      margin: '1rem auto',\r\n      padding: '0rem'\r\n    };\r\n  } else {\r\n    return {\r\n      width: '105%',\r\n      maxWidth: '105%',\r\n      margin: '3rem',\r\n      padding: '1rem 1rem',\r\n    };\r\n  }\r\n});\r\n\r\n\r\n\r\nconst titleName = ref('');\r\nconst areaName = ref('');\r\n\r\nconst actualStartTime = ref('');\r\nconst actualEndTime = ref('');\r\n\r\nconst createOvertimePersonnel = () => {\r\n  //  8:30  17:30\r\n  const today = new Date();\r\n  const startTime = new Date(today);\r\n  startTime.setHours(8, 30, 0, 0); // 8:30 \r\n  \r\n  const endTime = new Date(today);\r\n  endTime.setHours(17, 30, 0, 0); // 17:30 \r\n  \r\n  return {\r\n    id: Date.now() + Math.random(), // ID\r\n    personnelId: '', // ID\r\n    personnelName: '', // \r\n    overtimeDateTimeRange: [startTime, endTime], //  8:30-17:30\r\n    overtimeContent: '',\r\n    mealAllowance: 0,\r\n    isEditingOvertimeHours: false,\r\n    manualOvertimeMinutes: null, //  null\r\n    // \r\n    actualOvertimeDate: null,\r\n    actualOvertimeDateTimeRange: [],\r\n    actualOvertimeHours: 0,\r\n    actualOvertimeMinutes: 0,\r\n    actualOvertimeContent: '',\r\n    actualMealAllowance: 0, // \r\n    actualStartTime: '',\r\n    actualEndTime: '',\r\n    isEditingActualOvertimeHours: false,\r\n    manualActualOvertimeMinutes: 0,\r\n  };\r\n};\r\n\r\nconst overtimeForm = ref({\r\n  isPreOvertime: true, //  isPreOvertime \r\n  insertSignerList: [], // \r\n  overtimePersonnel: [createOvertimePersonnel()], // \r\n  actualOvertimeDate: null,\r\n  actualOvertimeDateTimeRange: [],\r\n  actualOvertimeHours: 0,\r\n  actualOvertimeMinutes: 0,\r\n  actualOvertimeContent: '',\r\n  // remark: '', // \r\n  applicantTitleId: '', // \r\n  applierName: '', // \r\n});\r\n\r\n// \r\nconst isInsertDialogVisible = ref(false);\r\n\r\n\r\n\r\nconst toDate = (v) => {\r\n  if (!v) return null;\r\n  if (v instanceof Date) return isNaN(v.getTime()) ? null : v;\r\n  if (typeof v === 'string') {\r\n    //  \"YYYY-MM-DD HH:mm\"  ISO \r\n    const s = v.includes('T') ? v : v.replace(' ', 'T');\r\n    const d = new Date(s);\r\n    return isNaN(d.getTime()) ? null : d;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst pad2 = (n) => String(n).padStart(2, '0');\r\n\r\n//  \"YYYY-MM-DD\"\r\nconst toLocalISODate = (v) => {\r\n  const d = toDate(v);\r\n  if (!d) return null;\r\n  const y = d.getFullYear();\r\n  const m = pad2(d.getMonth() + 1);\r\n  const day = pad2(d.getDate());\r\n  return `${y}-${m}-${day}`;\r\n};\r\n\r\n\r\n//  \"YYYY-MM-DD HH:mm\"\r\nconst toLocalYYYYMMDD_HHmm = (v) => {\r\n  const d = new Date(v);\r\n  if (isNaN(d)) return null;\r\n  const pad2 = (n) => String(n).padStart(2, '0');\r\n  const y = d.getFullYear();\r\n  const m = pad2(d.getMonth() + 1);\r\n  const day = pad2(d.getDate());\r\n  const hh = pad2(d.getHours());\r\n  const mm = pad2(d.getMinutes());\r\n  return `${y}-${m}-${day} ${hh}:${mm}`;\r\n};\r\n\r\n\r\n\r\n//  \"HH:mm\"\r\nconst toHHmm = (v) => {\r\n  const d = toDate(v);\r\n  if (!d) return null;\r\n  return `${pad2(d.getHours())}:${pad2(d.getMinutes())}`;\r\n};\r\n\r\n\r\nconst rules = computed(() => {\r\n  //  canAmend === false  '*'\r\n  const isReadOnlyMode = isWFMode.value && !props.canAmend;\r\n  \r\n  const personnelRules = overtimeForm.value.overtimePersonnel.reduce((acc, _, index) => {\r\n    //  required: true\r\n    acc[`overtimePersonnel.${index}.personnelName`] = [{ \r\n      required: !isReadOnlyMode, \r\n      message: \"\", \r\n      trigger: \"change\" \r\n    }];\r\n    acc[`overtimePersonnel.${index}.overtimeDateTimeRange`] = [\r\n      {\r\n        required: !isReadOnlyMode,\r\n        validator: (rule, value, callback) => {\r\n          // \r\n          if (isReadOnlyMode) {\r\n            return callback();\r\n          }\r\n          const item = overtimeForm.value.overtimePersonnel[index];\r\n          if (!item.overtimeDateTimeRange || item.overtimeDateTimeRange.length !== 2 || !item.overtimeDateTimeRange[0] || !item.overtimeDateTimeRange[1]) {\r\n            return callback(new Error('/'));\r\n          }\r\n          callback();\r\n        },\r\n        trigger: \"change\",\r\n      },\r\n    ];\r\n    acc[`overtimePersonnel.${index}.overtimeContent`] = [{ \r\n      required: !isReadOnlyMode, \r\n      message: \"\", \r\n      trigger: \"blur\" \r\n    }];\r\n    acc[`overtimePersonnel.${index}.mealAllowance`] = [\r\n      { validator: (rule, value, callback) => {\r\n        if (value === null || value === undefined || value === '') {\r\n          return callback();\r\n        }\r\n        if (isNaN(value) || value < 0) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      }, trigger: 'blur' },\r\n    ];\r\n    acc[`overtimePersonnel.${index}.manualOvertimeMinutes`] = [\r\n      { validator: (rule, value, callback) => {\r\n        const item = overtimeForm.value.overtimePersonnel[index];\r\n        if (item.isEditingOvertimeHours && (value === null || value === undefined || value === '')) {\r\n          return callback(new Error(''));\r\n        }\r\n        if (item.isEditingOvertimeHours && (isNaN(value) || value < 0)) {\r\n          return callback(new Error(''));\r\n        }\r\n        callback();\r\n      }, trigger: 'blur' },\r\n    ];\r\n    \r\n    // \r\n    if (overtimeForm.value.isPreOvertime === false) {\r\n      acc[`overtimePersonnel.${index}.actualOvertimeDateTimeRange`] = [\r\n        {\r\n          required: !isReadOnlyMode,\r\n          validator: (rule, value, callback) => {\r\n            // \r\n            if (isReadOnlyMode) {\r\n              return callback();\r\n            }\r\n            const item = overtimeForm.value.overtimePersonnel[index];\r\n            if (!item.actualOvertimeDateTimeRange || item.actualOvertimeDateTimeRange.length !== 2 || !item.actualOvertimeDateTimeRange[0] || !item.actualOvertimeDateTimeRange[1]) {\r\n              return callback(new Error('/'));\r\n            }\r\n            callback();\r\n          },\r\n          trigger: \"change\",\r\n        },\r\n      ];\r\n      acc[`overtimePersonnel.${index}.actualOvertimeContent`] = [{ \r\n        required: !isReadOnlyMode, \r\n        message: \"\", \r\n        trigger: \"blur\" \r\n      }];\r\n    }\r\n    \r\n    return acc;\r\n  }, {});\r\n\r\n  const baseRules = {\r\n    isPreOvertime: [{ \r\n      required: !isReadOnlyMode, \r\n      message: \"\", \r\n      trigger: \"change\" \r\n    }],\r\n    ...personnelRules,\r\n  };\r\n\r\n  if (overtimeForm.value.isPreOvertime === false) {\r\n    return {\r\n      ...baseRules,\r\n      actualOvertime: [{ \r\n        required: !isReadOnlyMode, \r\n        message: \"\", \r\n        trigger: \"blur\" \r\n      }],\r\n      actualOvertimeDate: [{ \r\n        required: !isReadOnlyMode, \r\n        message: \"\", \r\n        trigger: \"change\" \r\n      }],\r\n      actualOvertimeTimeRange: [\r\n        {\r\n          required: !isReadOnlyMode,\r\n          validator: (rule, value, callback) => {\r\n            // \r\n            if (isReadOnlyMode) {\r\n              return callback();\r\n            }\r\n            if (!actualStartTime.value || !actualEndTime.value) {\r\n              return callback(new Error(''));\r\n            }\r\n            callback();\r\n          },\r\n          trigger: \"change\",\r\n        },\r\n      ],\r\n      actualOvertimeContent: [{ \r\n        required: !isReadOnlyMode, \r\n        message: \"\", \r\n        trigger: \"blur\" \r\n      }],\r\n      // remark: [{ required: true, message: \"\", trigger: \"blur\" }], // \r\n    };\r\n  }\r\n  return baseRules;\r\n});\r\n\r\nconst calculateOvertimeMinutes = (personnel) => {\r\n  const range = personnel.overtimeDateTimeRange;\r\n  if (!range || range.length !== 2 || !range[0] || !range[1]) return 0;\r\n\r\n  const start = new Date(range[0]);\r\n  const end   = new Date(range[1]);\r\n  if (isNaN(start) || isNaN(end) || end <= start) return 0;\r\n\r\n  let total = (end - start) / (1000 * 60);\r\n\r\n  if (start.toDateString() === end.toDateString()) {\r\n    const lunchStart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 12, 0, 0);\r\n    const lunchEnd   = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 13, 0, 0);\r\n\r\n    const overlapMs = Math.max(\r\n      0,\r\n      Math.min(end.getTime(), lunchEnd.getTime()) - Math.max(start.getTime(), lunchStart.getTime())\r\n    );\r\n    const overlapMin = Math.floor(overlapMs / (1000 * 60));\r\n    total -= overlapMin;\r\n  }\r\n\r\n  return Math.max(0, Math.floor(total));\r\n};\r\n\r\n\r\nconst formattedOvertimeHours = (personnel) => {\r\n  // \r\n  // \r\n  let totalMinutes;\r\n  if (personnel.manualOvertimeMinutes !== null && personnel.manualOvertimeMinutes !== undefined && !personnel.isEditingOvertimeHours) {\r\n    totalMinutes = personnel.manualOvertimeMinutes;\r\n  } else {\r\n    totalMinutes = calculateOvertimeMinutes(personnel);\r\n  }\r\n  \r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n  return `${hours}  ${minutes} `;\r\n};\r\n\r\n// \r\nconst calculateActualOvertimeMinutes = (personnel) => {\r\n  const range = personnel.actualOvertimeDateTimeRange;\r\n  if (!range || range.length !== 2 || !range[0] || !range[1]) return 0;\r\n\r\n  const start = new Date(range[0]);\r\n  const end   = new Date(range[1]);\r\n  if (isNaN(start) || isNaN(end) || end <= start) return 0;\r\n\r\n  // \r\n  let total = (end - start) / (1000 * 60);\r\n\r\n  //  12:0013:00 \r\n  if (start.toDateString() === end.toDateString()) {\r\n    const lunchStart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 12, 0, 0);\r\n    const lunchEnd   = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 13, 0, 0);\r\n\r\n    //  0\r\n    const overlapMs = Math.max(\r\n      0,\r\n      Math.min(end.getTime(), lunchEnd.getTime()) - Math.max(start.getTime(), lunchStart.getTime())\r\n    );\r\n    const overlapMin = Math.floor(overlapMs / (1000 * 60));\r\n\r\n    total -= overlapMin;\r\n  }\r\n\r\n  return Math.max(0, Math.floor(total));\r\n};\r\n// \r\nconst formattedActualOvertimeHours = (personnel) => {\r\n  const totalMinutes = personnel.isEditingActualOvertimeHours ? personnel.manualActualOvertimeMinutes : calculateActualOvertimeMinutes(personnel);\r\n  const hours = Math.floor(totalMinutes / 60);\r\n  const minutes = totalMinutes % 60;\r\n  return `${hours}  ${minutes} `;\r\n};\r\n\r\n// \r\nconst formatDateTimeRange = (dateTimeRange) => {\r\n  if (!dateTimeRange || !Array.isArray(dateTimeRange) || dateTimeRange.length !== 2) {\r\n    return '';\r\n  }\r\n  \r\n  const [startDate, endDate] = dateTimeRange;\r\n  if (!startDate || !endDate) {\r\n    return '';\r\n  }\r\n  \r\n  const formatDateTime = (date) => {\r\n    const d = new Date(date);\r\n    if (isNaN(d.getTime())) return '';\r\n    \r\n    const year = d.getFullYear();\r\n    const month = String(d.getMonth() + 1).padStart(2, '0');\r\n    const day = String(d.getDate()).padStart(2, '0');\r\n    const hours = String(d.getHours()).padStart(2, '0');\r\n    const minutes = String(d.getMinutes()).padStart(2, '0');\r\n    \r\n    return `${year}/${month}/${day} ${hours}:${minutes}`;\r\n  };\r\n  \r\n  return `${formatDateTime(startDate)} - ${formatDateTime(endDate)}`;\r\n};\r\n\r\n// \r\nconst formatAmount = (amount) => {\r\n  if (amount === null || amount === undefined || amount === '') {\r\n    return 'NT$ 0';\r\n  }\r\n  \r\n  const numAmount = Number(amount);\r\n  if (isNaN(numAmount)) {\r\n    return 'NT$ 0';\r\n  }\r\n  \r\n  return `NT$ ${numAmount.toLocaleString()}`;\r\n};\r\n\r\n\r\n// \r\nconst enableOvertimeHoursEdit = (personnel) => {\r\n  personnel.isEditingOvertimeHours = true;\r\n  // \r\n  if (personnel.manualOvertimeMinutes === null || personnel.manualOvertimeMinutes === undefined) {\r\n    personnel.manualOvertimeMinutes = calculateOvertimeMinutes(personnel);\r\n  }\r\n  nextTick(() => {\r\n    //  input  ref\r\n    // : document.querySelector('.editable-input').focus();\r\n  });\r\n};\r\n\r\n// \r\nconst disableOvertimeHoursEdit = (personnel) => {\r\n  personnel.isEditingOvertimeHours = false;\r\n  //  manualOvertimeMinutes  actualOvertimeMinutes\r\n  // formattedOvertimeHours  isEditingOvertimeHours \r\n};\r\n\r\n// /\r\nconst onOvertimeDateTimeRangeChange = (item) => {\r\n  // \r\n  // \r\n  if (!item.isEditingOvertimeHours) {\r\n    item.manualOvertimeMinutes = calculateOvertimeMinutes(item);\r\n  }\r\n};\r\n\r\n// /\r\nconst onActualOvertimeDateTimeRangeChange = (item) => {\r\n  // \r\n  if (!item.isEditingActualOvertimeHours) {\r\n    item.manualActualOvertimeMinutes = calculateActualOvertimeMinutes(item);\r\n  }\r\n};\r\n\r\n//  overtimeDateTimeRange\r\n//  overtimeDateTimeRange  manualOvertimeMinutes\r\nwatch(\r\n  () => overtimeForm.value.overtimePersonnel,\r\n  () => {\r\n    //  onOvertimeDateTimeRangeChange \r\n  },\r\n  { deep: true, immediate: true }\r\n);\r\n\r\n//  actualOvertimeDateTimeRange\r\nwatch([() => overtimeForm.value.actualOvertimeDate, actualStartTime, actualEndTime], ([newDate, newStartTime, newEndTime]) => {\r\n  if (newDate && newStartTime && newEndTime) {\r\n    const start = new Date(`${newDate.toISOString().split('T')[0]}T${newStartTime}`);\r\n    const end = new Date(`${newDate.toISOString().split('T')[0]}T${newEndTime}`);\r\n    overtimeForm.value.actualOvertimeDateTimeRange = [start, end];\r\n  } else {\r\n    overtimeForm.value.actualOvertimeDateTimeRange = [];\r\n  }\r\n  //  actualActualOvertimeMinutes, overtimeForm.value.actualOvertimeHours, overtimeForm.value.actualOvertimeMinutes\r\n  //  computed \r\n}, { immediate: true });\r\n\r\n\r\nconst querySearchEmployee = (queryString, callback) => {\r\n  const results = employeeData.value\r\n    .filter(emp => emp.name.includes(queryString))\r\n    .map(emp => ({ value: emp.name, raw: emp }));\r\n  callback(results);\r\n};\r\n\r\nconst onEmployeeSelect = (item, index) => {\r\n  overtimeForm.value.overtimePersonnel[index].personnelName = item.value;\r\n  overtimeForm.value.overtimePersonnel[index].personnelId = item.raw.id;\r\n};\r\n\r\nconst getEmployeeData = async () => {\r\n  await employeeStore.fetchEmployeeData();\r\n  const filtered = employeeStore.employees.filter(e =>\r\n    e.emp_status !== 'Inactive' &&\r\n    e.id !== 'mis' &&\r\n    e.id !== 'vincent'\r\n  );\r\n  employeeData.value = filtered;\r\n};\r\n\r\n// // \r\n// const disableOvertimeHoursEdit = (personnel) => {\r\n//   personnel.isEditingOvertimeHours = false;\r\n//   // \r\n//   //  manualOvertimeMinutes  actualOvertimeMinutes\r\n//   // formattedOvertimeHours  isEditingOvertimeHours \r\n// };\r\n\r\n// \r\nconst addOvertimePersonnel = () => {\r\n  overtimeForm.value.overtimePersonnel.push(createOvertimePersonnel());\r\n  // console.log(':', overtimeForm.value.overtimePersonnel);\r\n};\r\n\r\n// \r\nconst removeOvertimePersonnel = (index) => {\r\n  if (overtimeForm.value.overtimePersonnel.length > 1) {\r\n    overtimeForm.value.overtimePersonnel.splice(index, 1);\r\n  } else {\r\n    ElMessage.warning(\"\");\r\n  }\r\n};\r\n\r\n// \r\nconst enableActualOvertimeHoursEdit = (personnel) => {\r\n  personnel.isEditingActualOvertimeHours = true;\r\n  personnel.manualActualOvertimeMinutes = calculateActualOvertimeMinutes(personnel);\r\n  nextTick(() => {\r\n    //  input  ref\r\n    // : document.querySelector('.editable-input').focus();\r\n  });\r\n};\r\n\r\n// \r\nconst disableActualOvertimeHoursEdit = (personnel) => {\r\n  personnel.isEditingActualOvertimeHours = false;\r\n};\r\n\r\n\r\n\r\n// \r\nconst copyExpectedToActualData = () => {\r\n  console.log(' ');\r\n  console.log(' :', overtimeForm.value.overtimePersonnel);\r\n  \r\n  overtimeForm.value.overtimePersonnel.forEach((personnel, index) => {\r\n    console.log(`  ${index + 1}: ${personnel.personnelName}`);\r\n    console.log(` :`, personnel.overtimeDateTimeRange);\r\n    console.log(` :`, personnel.actualOvertimeDateTimeRange);\r\n    \r\n    //  -  DateTimePicker \r\n    if (personnel.overtimeDateTimeRange?.length === 2) {\r\n      //   value-format \r\n      const newActualRange = personnel.overtimeDateTimeRange.map(toLocalYYYYMMDD_HHmm);\r\n      //  reactivity\r\n      personnel.actualOvertimeDateTimeRange = [...newActualRange];\r\n    }\r\n    \r\n    // \r\n    if (personnel.manualOvertimeMinutes !== undefined && personnel.manualOvertimeMinutes !== null) {\r\n      personnel.manualActualOvertimeMinutes = personnel.manualOvertimeMinutes;\r\n      console.log(` : ${personnel.manualOvertimeMinutes} `);\r\n    }\r\n    \r\n    // \r\n    if (personnel.overtimeContent) {\r\n      personnel.actualOvertimeContent = personnel.overtimeContent;\r\n      console.log(` : ${personnel.overtimeContent}`);\r\n    }\r\n    \r\n    // \r\n    if (personnel.mealAllowance !== undefined && personnel.mealAllowance !== null) {\r\n      personnel.actualMealAllowance = personnel.mealAllowance;\r\n      console.log(` : ${personnel.mealAllowance}`);\r\n    }\r\n  });\r\n  \r\n  console.log(' :', overtimeForm.value.overtimePersonnel);\r\n  \r\n  // \r\n  nextTick(() => {\r\n    console.log(' :', overtimeForm.value.overtimePersonnel);\r\n    \r\n    // \r\n    if (overtimeFormRef.value) {\r\n      overtimeFormRef.value.validate(() => {});\r\n    }\r\n  });\r\n};\r\n\r\n// \r\nconst removeCountersigner = (empId) => {\r\n  overtimeForm.value.insertSignerList = overtimeForm.value.insertSignerList.filter(e => e.id !== empId);\r\n  ElMessage.success('');\r\n};\r\n\r\nconst validateCountersigners = () => {\r\n  // \r\n  const uniqueList = [];\r\n  const seenIds = new Set();\r\n  \r\n  overtimeForm.value.insertSignerList.forEach(emp => {\r\n    if (!seenIds.has(emp.id)) {\r\n      seenIds.add(emp.id);\r\n      uniqueList.push(emp);\r\n    }\r\n  });\r\n  \r\n  if (uniqueList.length !== overtimeForm.value.insertSignerList.length) {\r\n    overtimeForm.value.insertSignerList = uniqueList;\r\n    ElMessage.warning('');\r\n  }\r\n  \r\n  // \r\n  const currentUserId = userStore.userId;\r\n  const filteredList = overtimeForm.value.insertSignerList.filter(emp => emp.id !== currentUserId);\r\n  \r\n  if (filteredList.length !== overtimeForm.value.insertSignerList.length) {\r\n    overtimeForm.value.insertSignerList = filteredList;\r\n    ElMessage.warning('');\r\n  }\r\n};\r\n\r\nconst confirmCountersigners = () => {\r\n  validateCountersigners();\r\n  isInsertDialogVisible.value = false;\r\n  \r\n  if (overtimeForm.value.insertSignerList.length > 0) {\r\n    ElMessage.success(` ${overtimeForm.value.insertSignerList.length} `);\r\n  }\r\n};\r\n\r\nconst submitOvertimeForm = async (formRef) => {\r\n  formRef.validate(async (valid, fields) => {\r\n    if (!valid) {\r\n      const fieldLabels = {\r\n        isPreOvertime: '',\r\n        actualOvertime: '',\r\n        actualOvertimeDate: '',\r\n        actualOvertimeTimeRange: '',\r\n        actualOvertimeContent: '',\r\n        remark: '',\r\n      };\r\n\r\n      for (const key in fields) {\r\n        if (key.startsWith('overtimePersonnel.')) {\r\n          const parts = key.split('.');\r\n          const index = parseInt(parts[1]);\r\n          const fieldName = parts[2];\r\n          const labelMap = {\r\n            personnelName: '',\r\n            overtimeDate: '',\r\n            overtimeTimeRange: '',\r\n            overtimeContent: '',\r\n            mealAllowance: '',\r\n            actualOvertime: '',\r\n            actualOvertimeDateTimeRange: '',\r\n            actualOvertimeContent: '',\r\n          };\r\n          const label = labelMap[fieldName] || fieldName;\r\n          ElMessage.error(\r\n            ` ${index + 1} ${label}${fields[key][0].message}`\r\n          );\r\n          return false;\r\n        }\r\n      }\r\n\r\n      const firstKey = Object.keys(fields)[0];\r\n      const firstErr = fields[firstKey][0].message;\r\n      const label = fieldLabels[firstKey] || firstKey;\r\n      ElMessage.error(`${label}${firstErr}`);\r\n      return false;\r\n    }\r\n    // \r\n    copyExpectedToActualData();\r\n\r\n    const formData = {\r\n      applierName: userStore.userName,\r\n      isPreOvertime: overtimeForm.value.isPreOvertime,\r\n      supervisorId: dptManagerId.value,\r\n      supervisorName: dptManagerName.value,\r\n\r\n      overtimePersonnel: overtimeForm.value.overtimePersonnel.map((p) => {\r\n        // \r\n        const formattedRange = (p.overtimeDateTimeRange || []).map((dt) =>\r\n          toLocalYYYYMMDD_HHmm(dt)\r\n        );\r\n\r\n        return {\r\n          personnelId: p.personnelId,\r\n          personnelName: p.personnelName,\r\n          overtimeDateTimeRange: formattedRange,\r\n\r\n          overtimeHours: Math.floor(p.manualOvertimeMinutes / 60),\r\n          overtimeMinutes: p.manualOvertimeMinutes % 60,\r\n          overtimeContent: p.overtimeContent,\r\n          mealAllowance: p.mealAllowance,\r\n\r\n          //  substring\r\n          actualOvertime: p.actualOvertime,\r\n          actualOvertimeDate: toLocalISODate(p.actualOvertimeDateTimeRange?.[0]),\r\n          actualOvertimeStartTime: toHHmm(p.actualOvertimeDateTimeRange?.[0]),\r\n          actualOvertimeEndTime: toHHmm(p.actualOvertimeDateTimeRange?.[1]),\r\n          actualOvertimeHours: p.isEditingActualOvertimeHours\r\n            ? Math.floor(p.manualActualOvertimeMinutes / 60)\r\n            : Math.floor(calculateActualOvertimeMinutes(p) / 60),\r\n          actualOvertimeMinutes: p.isEditingActualOvertimeHours\r\n            ? p.manualActualOvertimeMinutes % 60\r\n            : calculateActualOvertimeMinutes(p) % 60,\r\n          actualOvertimeContent: p.actualOvertimeContent,\r\n          actualMealAllowance: p.actualMealAllowance,\r\n        };\r\n      }),\r\n      // remark: overtimeForm.value.remark,\r\n    };\r\n\r\n    // console.log(formData);\r\n\r\n    let confirmContent =\r\n      `<br/>` +\r\n      `/${titleName.value} / ${areaName.value}<br/>` +\r\n      `${userStore.userDeptName}<br/>` +\r\n      `${formData.isPreOvertime ? '' : ''}<br/>`;\r\n\r\n    formData.overtimePersonnel.forEach((p, index) => {\r\n      confirmContent +=\r\n        `<br/> ${index + 1}<br/>` +\r\n        `${p.personnelName || ''}<br/>` +\r\n        `${formattedOvertimeHours(\r\n          overtimeForm.value.overtimePersonnel[index]\r\n        )}<br/>` +\r\n        `${p.overtimeContent || ''}<br/>` +\r\n        `NT$${p.mealAllowance || 0}<br/>`;\r\n\r\n      if (formData.isPreOvertime === false) {\r\n        confirmContent +=\r\n          `${p.actualOvertime || ''}<br/>` +\r\n          `${p.actualOvertimeStartTime || ''}  ${\r\n            p.actualOvertimeEndTime || ''\r\n          }<br/>` +\r\n          `${formattedActualOvertimeHours(\r\n            overtimeForm.value.overtimePersonnel[index]\r\n          )}<br/>` +\r\n          `${p.actualOvertimeContent || ''}<br/>` +\r\n          `NT$${p.actualMealAllowance || 0}<br/>`;\r\n      }\r\n    });\r\n\r\n    ElMessageBox.confirm(confirmContent, '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      dangerouslyUseHTMLString: true,\r\n    })\r\n      .then(async () => {\r\n        const requestBodyToSubmit = new FormData();\r\n        requestBodyToSubmit.append('DocumentTypeID', 'OR');\r\n        requestBodyToSubmit.append('CreatorID', userStore.userId);\r\n        \r\n        // \r\n        const insertSignerIds = overtimeForm.value.insertSignerList?.map(person => person.id) || [];\r\n        requestBodyToSubmit.append('InsertSignerIds', JSON.stringify(insertSignerIds));\r\n        \r\n        requestBodyToSubmit.append(\r\n          'CreatorSupervisorID',\r\n          dptManagerId.value || ''\r\n        );\r\n        requestBodyToSubmit.append('FormData', JSON.stringify(formData));\r\n\r\n        try {\r\n          // console.log('createForm:', requestBodyToSubmit);\r\n          const createFormResponse = await FormService.createForm(\r\n            requestBodyToSubmit\r\n          );\r\n          resetForm(formRef);\r\n          ElMessage.success('!');\r\n          emit('form-submitted', createFormResponse.data.documentID);\r\n        } catch (error) {\r\n          console.error(':', error);\r\n          ElMessage.error('!');\r\n        }\r\n      })\r\n      .catch(() => {\r\n        ElMessage.info('');\r\n      });\r\n  });\r\n};\r\nconst SaveAndApprovalForm = async () => {\r\n  console.log(' SaveAndApprovalForm ');\r\n  try {\r\n    // 1. \r\n    console.log(' ...');\r\n    const isValid = await new Promise((resolve) => {\r\n      overtimeFormRef.value.validate((valid) => {\r\n        console.log(' :', valid);\r\n        resolve(valid);\r\n      });\r\n    });\r\n\r\n    if (!isValid) {\r\n      console.error(' ');\r\n      ElMessage.error('');\r\n      return false;\r\n    }\r\n\r\n    console.log(' ...');\r\n\r\n\r\n    const payload = {\r\n      approverID: userStore.userId,\r\n      formData: JSON.stringify(getResubmitData())\r\n    };\r\n\r\n    // console.log(\"props.WF_Form_Data.id:\",props.WF_Form_Data.id,\"payload:\",payload)\r\n    await FormService.SaveAndApproval(\r\n      props.WF_Form_Data.id, //  ID \r\n      payload\r\n    );\r\n    ElMessage.success('');\r\n      return true; // \r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n    return false; // \r\n  }\r\n};\r\n\r\n\r\n\r\nconst resetForm = (formRef) => {\r\n  formRef.resetFields();\r\n  overtimeForm.value.isPreOvertime = true;\r\n  overtimeForm.value.overtimePersonnel = [createOvertimePersonnel()]; // \r\n};\r\n\r\nconst applierDeptName = ref(\"\");\r\nconst initializeFormDataForWFMode = (newVal) => {\r\n  if (newVal && Object.keys(newVal).length > 0) {\r\n    overtimeForm.value.documentId = newVal.documentId || '';\r\n    overtimeForm.value.isPreOvertime = newVal.isPreOvertime;\r\n    overtimeForm.value.applicantTitleId = newVal.applicantTitleId || '';\r\n    overtimeForm.value.applierName = newVal.applierName || '';\r\n\r\n    let overtimePersonnelData = [];\r\n    if (newVal.overtimePersonnel) {\r\n      try {\r\n        if (typeof newVal.overtimePersonnel === 'string') {\r\n          overtimePersonnelData = JSON.parse(newVal.overtimePersonnel);\r\n        } else if (Array.isArray(newVal.overtimePersonnel)) {\r\n          overtimePersonnelData = newVal.overtimePersonnel;\r\n        }\r\n        // console.log(\"overtimePersonnelData:\", overtimePersonnelData);\r\n\r\n        if (Array.isArray(overtimePersonnelData) && overtimePersonnelData.length > 0) {\r\n          overtimeForm.value.overtimePersonnel = overtimePersonnelData.map(p => {\r\n            //  overtimeDateTimeRange\r\n            const formatDateTime = (dateStr) => {\r\n              if (!dateStr) return null;\r\n              //  \"YYYY-MM-DD HH:mm\"  \"YYYY-MM-DDTHH:mm:00\"\r\n              const formatted = dateStr.replace(' ', 'T') + ':00';\r\n              const date = new Date(formatted);\r\n              // console.log(`Parsing date: ${dateStr} -> ${formatted} -> ${date}`);\r\n              return isNaN(date.getTime()) ? null : date;\r\n            };\r\n\r\n            return {\r\n              id: p.id || Date.now() + Math.random(),\r\n              personnelId: p.personnelId || '',\r\n              personnelName: p.personnelName || '',\r\n              overtimeDateTimeRange: p.overtimeDateTimeRange \r\n                ? p.overtimeDateTimeRange.map(formatDateTime).filter(date => date !== null)\r\n                : [],\r\n              overtimeContent: p.overtimeContent || '',\r\n              mealAllowance: p.mealAllowance || 0,\r\n              isEditingOvertimeHours: false,\r\n              manualOvertimeMinutes: (p.overtimeHours * 60) + (p.overtimeMinutes || 0),\r\n              actualOvertime: p.actualOvertime || '',\r\n              actualOvertimeDateTimeRange: (p.actualOvertimeDate && p.actualOvertimeStartTime && p.actualOvertimeEndTime)\r\n                ? [\r\n                    new Date(`${p.actualOvertimeDate}T${p.actualOvertimeStartTime}:00`),\r\n                    new Date(`${p.actualOvertimeDate}T${p.actualOvertimeEndTime}:00`)\r\n                  ].filter(date => !isNaN(date.getTime()))\r\n                : [],\r\n              actualOvertimeHours: p.actualOvertimeHours || 0,\r\n              actualOvertimeMinutes: p.actualOvertimeMinutes || 0,\r\n              actualOvertimeContent: p.actualOvertimeContent || '',\r\n              actualMealAllowance: p.actualMealAllowance || 0, // \r\n              isEditingActualOvertimeHours: false,\r\n              manualActualOvertimeMinutes: ((p.actualOvertimeHours || 0) * 60) + (p.actualOvertimeMinutes || 0),\r\n            };\r\n          });\r\n        } else {\r\n          overtimeForm.value.overtimePersonnel = [createOvertimePersonnel()];\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error parsing overtimePersonnel:\", error);\r\n        overtimeForm.value.overtimePersonnel = [createOvertimePersonnel()];\r\n      }\r\n    } else {\r\n      overtimeForm.value.overtimePersonnel = [createOvertimePersonnel()];\r\n    }\r\n\r\n    if (newVal.titleName) titleName.value = newVal.titleName;\r\n    if (newVal.applierDptName) applierDeptName.value = newVal.applierDptName;\r\n    if (newVal.applierAreaName) areaName.value = newVal.applierAreaName;\r\n    dptManagerName.value = newVal.supervisorName || '';\r\n\r\n    nextTick(() => {\r\n      console.log(\"After nextTick - overtimeForm.overtimePersonnel:\", JSON.stringify(overtimeForm.value.overtimePersonnel, (key, value) => {\r\n        if (value instanceof Date) return value.toISOString();\r\n        return value;\r\n      }));\r\n      overtimeFormRef.value?.validateField('overtimePersonnel');\r\n    });\r\n  }\r\n};\r\n\r\nwatch(\r\n  () => props.WF_Form_Data,\r\n  (newVal) => {\r\n    initializeFormDataForWFMode(newVal);\r\n    if (props.canAmend) {\r\n      nextTick(() => copyExpectedToActualData());\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\n// ===== getResubmitData =====\r\nfunction getResubmitData() {\r\n  return {\r\n    documentId: overtimeForm.value.documentId,\r\n    isPreOvertime: overtimeForm.value.isPreOvertime,\r\n    overtimePersonnel: overtimeForm.value.overtimePersonnel.map((p) => ({\r\n      personnelId: p.personnelId,\r\n      personnelName: p.personnelName,\r\n      //  Date  \"YYYY-MM-DD HH:mm\"\r\n      overtimeDateTimeRange: (p.overtimeDateTimeRange || []).map((dt) =>\r\n        toLocalYYYYMMDD_HHmm(dt)\r\n      ),\r\n      overtimeHours: Math.floor(p.manualOvertimeMinutes / 60),\r\n      overtimeMinutes: p.manualOvertimeMinutes % 60,\r\n      overtimeContent: p.overtimeContent,\r\n      mealAllowance: p.mealAllowance,\r\n      actualOvertime: p.actualOvertime,\r\n      //  substring \r\n      actualOvertimeDate: toLocalISODate(p.actualOvertimeDateTimeRange?.[0]),\r\n      actualOvertimeStartTime: toHHmm(p.actualOvertimeDateTimeRange?.[0]),\r\n      actualOvertimeEndTime: toHHmm(p.actualOvertimeDateTimeRange?.[1]),\r\n      actualOvertimeHours: p.isEditingActualOvertimeHours\r\n        ? Math.floor(p.manualActualOvertimeMinutes / 60)\r\n        : Math.floor(calculateActualOvertimeMinutes(p) / 60),\r\n      actualOvertimeMinutes: p.isEditingActualOvertimeHours\r\n        ? p.manualActualOvertimeMinutes % 60\r\n        : calculateActualOvertimeMinutes(p) % 60,\r\n      actualOvertimeContent: p.actualOvertimeContent,\r\n      actualMealAllowance: p.actualMealAllowance,\r\n    })),\r\n  };\r\n}\r\n\r\n\r\nonMounted(async () => {\r\n  \r\n  // console.log(\"OvertimeRequestForm mounted. Mode:\", props.mode);\r\n  // console.log(\"Inititl WF_Form_Data:\", props.WF_Form_Data);\r\n  await getEmployeeData(); //  getEmployeeData\r\n  if (props.mode === 'create') {\r\n    titleName.value = authStore.user.titleName; //  authStore  titleName\r\n    const userAreaId = authStore.user.areaInfo.id; //  authStore  areaInfo.id\r\n    areaName.value = await useIdToName.getAreaName(userAreaId || ''); //  userAreaId\r\n    const { supervisorId, supervisorName } = await getSupervisor(userStore.userId, userStore.userDeptId); //  getSupervisor\r\n    dptManagerId.value = supervisorId;\r\n    dptManagerName.value = supervisorName;\r\n  } else if (props.mode === 'WF') {\r\n    //  WF \r\n    initializeFormDataForWFMode(props.WF_Form_Data);\r\n  }\r\n\r\n  // \r\n  actualStartTime.value = '08:30';\r\n  actualEndTime.value = '17:30';\r\n\r\n});\r\n\r\ndefineExpose({\r\n  titleName,\r\n  areaName,\r\n  overtimeFormRef, //  overtimeFormRef\r\n  getResubmitData, //  getResubmitData\r\n  SaveAndApprovalForm, //  SaveAndApprovalForm \r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n/* =====  ===== */\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.form-item-content-responsive {\r\n  margin-left: 5rem;\r\n}\r\n\r\n/* .overtime-personnel-block {\r\n  border: 1px solid #dcdfe6;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n  background-color: #f9f9f9;\r\n} */\r\n\r\n.button-group {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* ===== WF  ===== */\r\n.overtime-personnel-fields-wf {\r\n  margin: 1rem 0;\r\n  padding: 1rem;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 8px;\r\n  background-color: #fafafa;\r\n}\r\n\r\n.personnel-name-row {\r\n  text-align: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.personnel-name-item {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.personnel-name-item .el-form-item__label {\r\n  font-weight: bold;\r\n  color: #409eff;\r\n}\r\n\r\n.fields-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.grid-row {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n  align-items: start;\r\n}\r\n\r\n.grid-row:has(.grid-item:only-child) {\r\n  grid-template-columns: 1fr;\r\n}\r\n\r\n.grid-item {\r\n  margin-bottom: 0;\r\n}\r\n\r\n/* =====  ===== */\r\n.grid-item.expected .el-form-item__label {\r\n  color: #67c23a;\r\n  font-weight: 500;\r\n}\r\n\r\n.grid-item.actual .el-form-item__label {\r\n  color: #e6a23c;\r\n  font-weight: 500;\r\n}\r\n\r\n.grid-item.actual .el-form-item__label.actual-label {\r\n  color: rgb(13, 13, 171) !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* =====  ===== */\r\n.grid-item .el-date-editor,\r\n.grid-item .el-input,\r\n.grid-item .el-textarea {\r\n  width: 100%;\r\n}\r\n\r\n::v-deep .expected .el-form-item__label {\r\n  font-size: 0.9rem !important;\r\n  font-weight: bold;\r\n}\r\n\r\n::v-deep .grid-item .readonly-content {\r\n  display: block;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* =====  ===== */\r\n.readonly-datetime {\r\n  display: inline-block;\r\n  padding: 2px 4px;\r\n  background-color: #f5f7fa;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  color: #606266;\r\n  font-size: 0.8rem;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.readonly-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 2px 4px;\r\n  background-color: #f5f7fa;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  color: #606266;\r\n  font-size: 0.9rem;\r\n  box-sizing: border-box;\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n}\r\n\r\n.readonly-amount {\r\n  display: inline-block;\r\n  padding: 8px 12px;\r\n  background-color: #f5f7fa;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  color: #606266;\r\n  font-size: 0.9rem;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n  font-weight: 500;\r\n}\r\n\r\n/* =====  ===== */\r\n.form-item-responsive {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: start;\r\n  font-size: 1.1rem;\r\n  padding: 0rem;\r\n}\r\n\r\n.form-item-vertical {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n::v-deep .form-item-responsive .el-form-item__content {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n/* ===== Element Plus  ===== */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.el-select-dropdown__item {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.el-date-table td .cell {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/* =====  ===== */\r\n.el-form-item__label {\r\n  text-align: right !important;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n::v-deep .el-form-item__label {\r\n  font-size: 1.1rem;\r\n  font-weight: bold;\r\n  font-family: 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', Arial, sans-serif;\r\n}\r\n\r\n/* =====  ===== */\r\n::v-deep .actual-label {\r\n  color: rgb(13, 13, 171) !important;\r\n}\r\n\r\n::v-deep .el-form-item .actual-label {\r\n  color: rgb(13, 13, 171) !important;\r\n}\r\n\r\n::v-deep .grid-item .el-form-item .actual-label {\r\n  color: rgb(13, 13, 171) !important;\r\n}\r\n\r\n::v-deep .el-form-item__label[class*=\"actual-label\"] {\r\n  color: rgb(13, 13, 171) !important;\r\n}\r\n\r\n::v-deep [class*=\"actual-label\"] {\r\n  color: rgb(13, 13, 171) !important;\r\n}\r\n\r\n/* =====  ===== */\r\n::v-deep .no-spin input::-webkit-outer-spin-button,\r\n::v-deep .no-spin input::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\n::v-deep .no-spin input[type=\"number\"] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n/* =====  ===== */\r\n.attachment-item .el-form-item__content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 100%;\r\n}\r\n\r\n.upload-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n  cursor: pointer;\r\n}\r\n\r\n.el-upload-list__item-thumbnail {\r\n  max-width: 100% !important;\r\n  height: auto !important;\r\n  display: block;\r\n}\r\n\r\n.el-upload-list--picture .el-upload-list__item {\r\n  width: auto !important;\r\n  max-width: 100% !important;\r\n  height: auto !important;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.el-upload {\r\n  max-width: 100%;\r\n}\r\n\r\n.el-upload-list__item-name {\r\n  flex-grow: 1;\r\n  margin-right: 10px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* =====  ===== */\r\n.leave-date-time-item {\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-family: 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', Arial, sans-serif;\r\n}\r\n\r\n.leave-date-time-item .el-form-item__label {\r\n  width: 80% !important;\r\n  text-align: left;\r\n  margin-bottom: 5px;\r\n  font-family: 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', Arial, sans-serif;\r\n}\r\n\r\n/* =====  ===== */\r\n@media (min-width: 769px) {\r\n  .overtime-personnel-block {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .overtime-personnel-header {\r\n    width: 100%;\r\n  }\r\n\r\n  .applier-info-fields {\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: center;\r\n  }\r\n\r\n  .submit-btn-group {\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n\r\n  .overtime-personnel-fields {\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: space-between;\r\n    padding: 0 0rem;\r\n    overflow-x: auto;\r\n  }\r\n\r\n  .overtime-personnel-fields .el-form-item {\r\n    margin-bottom: 1rem;\r\n    margin-right: 1rem;\r\n  }\r\n\r\n  .overtime-personnel-fields .el-form-item:last-child {\r\n    margin-right: 0;\r\n  }\r\n\r\n  .overtime-personnel-fields .overtime-personnel-name-item {\r\n    flex: 1.3;\r\n    min-width: 15rem;\r\n  }\r\n\r\n  .overtime-personnel-fields .overtime-datetime-range-item {\r\n    flex: 2.2;\r\n    min-width: 10rem;\r\n  }\r\n\r\n  .overtime-personnel-fields .overtime-content-item {\r\n    flex: 1.5;\r\n    min-width: 10rem;\r\n  }\r\n\r\n  .overtime-personnel-fields .meal-allowance-item {\r\n    flex: 1.5;\r\n    min-width: 12rem;\r\n  }\r\n\r\n  .overtime-personnel-block .el-form-item__label {\r\n    width: 10rem !important;\r\n    text-align: right;\r\n  }\r\n}\r\n\r\n/* =====  ===== */\r\n@media (max-width: 768px) {\r\n  .item1 {\r\n    width: 100%;\r\n  }\r\n  \r\n  .workflow-form {\r\n    width: 100%;\r\n  }\r\n  \r\n  .form-item-responsive {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    font-family: 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', Arial, sans-serif;\r\n  }\r\n  \r\n  .form-item-responsive .el-form-item__label {\r\n    font-family: 'PingFang TC', 'Microsoft JhengHei', 'Helvetica Neue', Arial, sans-serif;\r\n    width: 100% !important;\r\n    text-align: left;\r\n    margin-bottom: 5px;\r\n  }\r\n\r\n  .grid-row {\r\n    grid-template-columns: 1fr !important;\r\n    gap: 0.5rem;\r\n  }\r\n\r\n  .overtime-personnel-fields-wf {\r\n    padding: 0.5rem;\r\n    margin: 0.5rem 0;\r\n  }\r\n\r\n  .fields-grid {\r\n    gap: 0.5rem;\r\n  }\r\n\r\n  .attachment-item .el-form-item__content {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .upload-container {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n}\r\n\r\n/*  */\r\n.countersign-section {\r\n  margin: 1rem 0;\r\n  padding: 1rem;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border-radius: 8px;\r\n  border: 1px solid #dee2e6;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.countersign-container {\r\n  width: 100%;\r\n}\r\n\r\n.countersign-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  align-items: center;\r\n  min-height: 32px;\r\n}\r\n\r\n.countersign-tag {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 4px 8px;\r\n  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\r\n  border: none;\r\n  border-radius: 16px;\r\n  color: white;\r\n  font-weight: 500;\r\n  box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-tag:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4);\r\n}\r\n\r\n.countersign-icon {\r\n  font-size: 14px;\r\n}\r\n\r\n.countersign-add-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 6px 12px;\r\n  border: 2px dashed #28a745;\r\n  border-radius: 16px;\r\n  background: transparent;\r\n  color: #28a745;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countersign-add-btn:hover:not(:disabled) {\r\n  background: #28a745;\r\n  color: white;\r\n  border-style: solid;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);\r\n}\r\n\r\n.countersign-add-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.countersign-empty {\r\n  padding: 8px 0;\r\n  text-align: center;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.countersign-dialog {\r\n  border-radius: 12px;\r\n}\r\n\r\n.countersign-dialog .el-dialog {\r\n  width: 480px !important;\r\n  max-width: 90vw;\r\n}\r\n\r\n.countersign-dialog-content {\r\n  padding: 16px 0;\r\n}\r\n\r\n/*  */\r\n.countersign-dialog .el-form-item {\r\n  margin-bottom: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-checkbox-group .el-checkbox {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-dialog .el-radio-group .el-radio {\r\n  margin-bottom: 8px !important;\r\n  margin-right: 12px !important;\r\n}\r\n\r\n.countersign-alert {\r\n  margin-bottom: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .countersign-section {\r\n    margin: 0.5rem 0;\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .countersign-tags {\r\n    gap: 6px;\r\n  }\r\n  \r\n  .countersign-tag {\r\n    font-size: 12px;\r\n    padding: 3px 6px;\r\n  }\r\n  \r\n  .countersign-add-btn {\r\n    font-size: 12px;\r\n    padding: 4px 8px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./OvertimeRequestForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OvertimeRequestForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OvertimeRequestForm.vue?vue&type=style&index=0&id=171286ad&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-171286ad\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\" style=\"margin: 0 auto;\">\r\n    <el-form\r\n      ref=\"applyFormRef\"\r\n      class=\"workflow-form invoice\"\r\n      :style=\"formStyle\"\r\n      :model=\"applyForm\"\r\n      :rules=\"rules\"\r\n      label-width=\"9rem\"\r\n      status-icon\r\n    >\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"applyDate\" class=\"form-item-responsive\">\r\n        <el-date-picker\r\n          v-model=\"applyForm.applyDate\"\r\n          type=\"date\"\r\n          placeholder=\"\"\r\n          style=\"width: 100%;\"\r\n          disabled=\"true\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <!-- / -->\r\n      <el-form-item label=\"/\" class=\"form-item-responsive\">\r\n        <div class=\"flex items-center gap-2\">\r\n          <AreaIdToName :areaId=\"currentUserAreaId\"></AreaIdToName>\r\n          <TitleIdToName mode=\"Description\" :titleId=\"currentUserTitleId\"></TitleIdToName>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"applierName\" class=\"form-item-responsive\">\r\n        <template v-if=\"mode === 'WF'\">\r\n          <label>{{ applyForm.applierName }}</label>\r\n        </template>\r\n        <template v-else>\r\n          <el-input v-model=\"applyForm.applierName\" disabled />\r\n        </template>\r\n      </el-form-item>\r\n\r\n      <!--  () -->\r\n      <el-form-item label=\"\" prop=\"supervisor\" class=\"form-item-responsive\">\r\n        <template v-if=\"mode === 'WF'\">\r\n          <label>{{ applyForm.supervisor }}</label>\r\n        </template>\r\n        <template v-else>\r\n          <label>{{ applyForm.supervisor }}</label>\r\n        </template>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"selectedDocument\" class=\"form-item-responsive\">\r\n        <template v-if=\"mode === 'WF'\">\r\n          <label>{{ applyForm.selectedDocument }}</label>\r\n        </template>\r\n        <template v-else>\r\n          <el-select\r\n            v-model=\"applyForm.selectedDocument\"\r\n            placeholder=\"\"\r\n            style=\"width: 100%;\"\r\n            :disabled=\"isDisabled\"\r\n            @change=\"onDocumentSelect\"\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"doc in completedDocuments\"\r\n              :key=\"doc.documentID\"\r\n              :label=\"doc.documentID\"\r\n              :value=\"doc.documentID\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item v-if=\"mode === 'create'\">\r\n        <el-button type=\"success\" @click=\"submitForm(applyFormRef)\" :disabled=\"isDisabled\">\r\n          \r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- Detail_Related_WF_Dialog -->\r\n    <Detail_Related_WF_Dialog\r\n      v-model:visible=\"isDialogVisible\"\r\n      :doc=\"selectedDocumentObject\"\r\n      @close=\"onDialogClose\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { useWindowSize } from '@vueuse/core'\r\nimport { useUserStore } from '@/stores/user'\r\nimport useIdToName from '@/stores/IdToName'\r\nimport { useDeptStore } from '@/stores/dept'\r\nimport { useEmployeeStore } from '@/stores/employee'\r\nimport FormService from '@/service/FormService'\r\nimport AreaIdToName from '@/components/Common/IdToName/Area-IdToName.vue'\r\nimport TitleIdToName from '@/components/Common/IdToName/Title-IdToName.vue'\r\nimport Detail_Related_WF_Dialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  mode: {\r\n    type: String,\r\n    default: 'create' // 'create' | 'WF'\r\n  },\r\n  WF_Form_Data: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  WF_canEdit: {\r\n    type: Boolean,\r\n    default: true\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['form-submitted', 'form-reset', 'update:WF_Form_Data'])\r\n\r\n// Stores\r\nconst userStore = useUserStore()\r\nconst deptStore = useDeptStore()\r\nconst employeeStore = useEmployeeStore()\r\n\r\n// Refs\r\nconst applyFormRef = ref(null)\r\nconst completedDocuments = ref([])\r\nconst isDialogVisible = ref(false)\r\nconst selectedDocumentObject = ref(null)\r\nconst dptManagerId = ref('')\r\nconst dptManagerName = ref('')\r\nconst pendingDocumentSelection = ref(null)\r\nconst currentUserAreaId = ref('')\r\nconst currentUserTitleId = ref('')\r\n\r\n// Computed\r\nconst { width } = useWindowSize()\r\nconst formStyle = computed(() => {\r\n  if (width.value <= 768) {\r\n    return {\r\n      width: '80%',\r\n      maxWidth: '100%',\r\n      margin: '1rem auto',\r\n    }\r\n  } else {\r\n    return {\r\n      width: '35rem',\r\n      maxWidth: '40rem',\r\n      margin: '4rem',\r\n    }\r\n  }\r\n})\r\n\r\nconst isDisabled = computed(() => {\r\n  return props.mode === 'WF' && !props.WF_canEdit\r\n})\r\n\r\n// Form data\r\nconst applyForm = ref({\r\n  applyDate: new Date(),\r\n  applierName: userStore.userName,\r\n  supervisor: '',\r\n  selectedDocument: ''\r\n})\r\n\r\n// Validation rules\r\nconst rules = {\r\n  selectedDocument: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ]\r\n}\r\n\r\n// Methods\r\nconst getSupervisor = async () => {\r\n  await deptStore.fetchDepartmentData()\r\n  \r\n  const userDept = deptStore.departments.find(d => d.id === userStore.userDeptId)\r\n  if (!userDept) {\r\n    dptManagerName.value = ''\r\n    applyForm.value.supervisor = ''\r\n    return\r\n  }\r\n\r\n  // : \r\n  if (userStore.userId === 'TW0005') {\r\n    dptManagerId.value = 'vincent'\r\n    dptManagerName.value = ''\r\n    applyForm.value.supervisor = dptManagerName.value\r\n    return\r\n  }\r\n\r\n  let managerId = userDept.manager_id?.trim() || ''\r\n\r\n  if (managerId === userStore.userId) {\r\n    let parentId = userDept.p_dpt_id\r\n    while (parentId && parentId !== '-1') {\r\n      const parentDept = deptStore.departments.find(d => d.id === parentId)\r\n      if (!parentDept) break\r\n\r\n      const parentManager = parentDept.manager_id?.trim()\r\n      if (parentManager && parentManager !== userStore.userId) {\r\n        managerId = parentManager\r\n        break\r\n      }\r\n      parentId = parentDept.p_dpt_id\r\n    }\r\n  }\r\n\r\n  dptManagerId.value = managerId\r\n  dptManagerName.value = managerId ? await useIdToName.getEmployeeName(managerId) : ''\r\n  applyForm.value.supervisor = dptManagerName.value\r\n}\r\n\r\nconst getCurrentUserInfo = async () => {\r\n  try {\r\n    await employeeStore.fetchEmployeeData()\r\n    const currentUser = employeeStore.employees.find(emp => emp.id === userStore.userId)\r\n    if (currentUser) {\r\n      currentUserAreaId.value = currentUser.area_id || ''\r\n      currentUserTitleId.value = currentUser.title_id || ''\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst getCompletedDocuments = async () => {\r\n  try {\r\n    //  ID \r\n    const response = await FormService.getCompletedDocuments(userStore.userId)\r\n    const documentIds = response.data || []\r\n    \r\n    //  ID \r\n    completedDocuments.value = documentIds.map(id => ({\r\n      documentID: id,\r\n      documentTypeID: id.substring(0, 2), // \r\n      createdDate: new Date().toISOString() // \r\n    }))\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst onDocumentSelect = (documentId) => {\r\n  if (documentId) {\r\n    // \r\n    const selectedDoc = completedDocuments.value.find(doc => doc.documentID === documentId)\r\n    if (selectedDoc) {\r\n      selectedDocumentObject.value = selectedDoc\r\n      isDialogVisible.value = true\r\n      pendingDocumentSelection.value = documentId\r\n    }\r\n  }\r\n}\r\n\r\nconst onDialogClose = () => {\r\n  isDialogVisible.value = false\r\n  \r\n  // \r\n  ElMessageBox.confirm(\r\n    '?',\r\n    '',\r\n    {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'question'\r\n    }\r\n  ).then(() => {\r\n    // \"\"\r\n    applyForm.value.selectedDocument = pendingDocumentSelection.value\r\n  }).catch(() => {\r\n    // \"\"\r\n    applyForm.value.selectedDocument = ''\r\n    pendingDocumentSelection.value = null\r\n  })\r\n}\r\n\r\nconst submitForm = async (formRef) => {\r\n  formRef.validate(async (valid, fields) => {\r\n    if (!valid) {\r\n      const fieldLabels = {\r\n        selectedDocument: ''\r\n      }\r\n      \r\n      const firstKey = Object.keys(fields)[0]\r\n      const firstErr = fields[firstKey][0].message\r\n      const label = fieldLabels[firstKey] || firstKey\r\n      ElMessage.error(`${label}${firstErr}`)\r\n      return false\r\n    }\r\n\r\n    const formData = {\r\n      applyDate: applyForm.value.applyDate.toISOString().split(\"T\")[0],\r\n      applierName: applyForm.value.applierName,\r\n      supervisorId: dptManagerId.value,\r\n      supervisorName: applyForm.value.supervisor,\r\n      selectedDocument: applyForm.value.selectedDocument\r\n    }\r\n\r\n    const confirmContent = \r\n      `<br/>` +\r\n      `${applyForm.value.applyDate.toISOString().split(\"T\")[0]}<br/>` +\r\n      `${applyForm.value.applierName}<br/>` +\r\n      `${applyForm.value.supervisor}<br/>` +\r\n      `${applyForm.value.selectedDocument}`\r\n\r\n    ElMessageBox.confirm(\r\n      confirmContent,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        dangerouslyUseHTMLString: true\r\n      }\r\n    ).then(async () => {\r\n      const requestBodyToSubmit = new FormData()\r\n      requestBodyToSubmit.append('DocumentTypeID', \"LC\")\r\n      requestBodyToSubmit.append('CreatorID', userStore.userId)\r\n      requestBodyToSubmit.append('CreatorSupervisorID', dptManagerId.value)\r\n      requestBodyToSubmit.append('FormData', JSON.stringify(formData))\r\n\r\n      const notification = {\r\n        NotificationTiming: 0,\r\n        NotifierIds: []\r\n      }\r\n      requestBodyToSubmit.append('Notification', JSON.stringify(notification))\r\n\r\n      try {\r\n        console.log(\"createForm:\", requestBodyToSubmit)\r\n        const createFormResponse = await FormService.createForm(requestBodyToSubmit)\r\n        applyFormRef.value.resetFields()\r\n        ElMessage.success(\"!\")\r\n        emit('form-submitted', createFormResponse.data.documentID)\r\n      } catch (error) {\r\n        console.error(\":\", error)\r\n        ElMessage.error(\"!\")\r\n      }\r\n    }).catch(() => {\r\n      ElMessage.info(\"\")\r\n    })\r\n  })\r\n}\r\n\r\n// Watch for WF mode data\r\nwatch(() => props.WF_Form_Data, async (newVal) => {\r\n  if (newVal && Object.keys(newVal).length > 0) {\r\n    applyForm.value.applyDate = newVal.applyDate ? new Date(newVal.applyDate) : new Date()\r\n    applyForm.value.applierName = newVal.applierName || newVal.applicantName || ''\r\n    applyForm.value.supervisor = newVal.supervisorName || newVal.supervisor || ''\r\n    applyForm.value.selectedDocument = newVal.selectedDocument || ''\r\n  }\r\n}, { immediate: true })\r\n\r\nfunction getResubmitData() {\r\n  return {\r\n    applyDate: applyForm.value.applyDate.toISOString().split(\"T\")[0],\r\n    applierName: applyForm.value.applierName,\r\n    supervisorName: applyForm.value.supervisor,\r\n    selectedDocument: applyForm.value.selectedDocument\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  getResubmitData,\r\n  applyFormRef\r\n})\r\n\r\nonMounted(async () => {\r\n  await getCurrentUserInfo()\r\n  await getSupervisor()\r\n  if (props.mode !== 'WF') {\r\n    await getCompletedDocuments()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.workflow-form {\r\n  width: 25rem;\r\n  max-width: 700px;\r\n  margin: 4rem auto;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.form-item-responsive {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n\r\n.el-form-item__label {\r\n  text-align: left !important;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .workflow-form {\r\n    width: 90%;\r\n    margin: 1rem auto;\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .form-item-responsive {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .el-form-item__label {\r\n    width: 100% !important;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n}\r\n\r\n.form-item-responsive {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  font-size: 1.2rem; /*  1.2rem */\r\n}\r\n\r\n/*  el-form-item  */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-select  */\r\n.el-select-dropdown__item {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-date-picker  */\r\n.el-date-table td .cell {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n/*  el-autocomplete  */\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n::v-deep .el-form-item__label {\r\n  text-align: left !important;\r\n  font-size: 1.2rem !important; /*  label  1.2rem */\r\n  font-weight: bold;\r\n  color: #333;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n::v-deep .el-form-item__content {\r\n  font-size: 1.2rem;\r\n  font-family: 'PingFang TC','Microsoft JhengHei','Helvetica Neue',Arial,sans-serif;\r\n}\r\n\r\n/* scoped */\r\n.el-form-item .el-input__wrapper,\r\n.el-form-item .el-select__wrapper,\r\n.el-form-item .el-textarea__inner,\r\n.el-form-item .el-date-editor,\r\n.el-form-item .el-autocomplete {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.el-select-dropdown__item {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.el-date-table td .cell {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.el-autocomplete-suggestion li {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n::v-deep .el-form-item__label {\r\n  text-align: left !important;\r\n  font-size: 1.2rem !important; \r\n}\r\n</style>","import script from \"./LeaveCancellationForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LeaveCancellationForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LeaveCancellationForm.vue?vue&type=style&index=0&id=61b305e9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61b305e9\"]])\n\nexport default __exports__","<template>\r\n    <el-dialog\r\n        :style=\"{\r\n            border: '13px solid transparent',\r\n            borderImage: 'linear-gradient(45deg, #409EFF, #67C23A) 1',\r\n            boxShadow: '0 8px 16px rgba(0, 0, 0, 13)'\r\n          }\"\r\n    \r\n      style=\"text-align:center;\"\r\n      :model-value=\"visible\"\r\n      :width=\"dialogWidth\"\r\n      v-loading=\"isLoading\"\r\n      :lock-scroll=\"false\"  \r\n      @close=\"handleClose\"\r\n      destroy-on-close  \r\n      ref=\"dialogBody\"\r\n      top=\"3vh\"\r\n    >\r\n      <div class=\"dialog-content-wrapper\" v-if=\"doc\">\r\n          <p>\r\n            <el-text class=\"responsive-text\"></el-text>\r\n            <el-text class=\"responsive-text\" style=\"background-color:gold;\" >{{ doc.documentID }}</el-text>\r\n          </p>\r\n          <p>\r\n            <el-text class=\"responsive-text\" ></el-text>\r\n            <el-text class=\"responsive-text\"\r\n              :style=\"{\r\n                backgroundColor: formModel.currentStepName === '' ? 'red' : 'mediumturquoise'\r\n              }\">\r\n              {{ formModel.currentStepName }}\r\n            </el-text>\r\n          </p>\r\n\r\n\r\n        <el-form ref=\"formRef\" :model=\"WF_Form_Data\" >\r\n\r\n          <!--  -->\r\n          <!-- <DynamicFormRenderer :fields=\"currentFields\" v-model=\"formModel\" :canEdit=\"true\" /> -->\r\n          <component\r\n            :is=\"dynamicFormComponent\"\r\n            ref=\"dynamicFormRef\"\r\n            :WF_Form_Data=\"WF_Form_Data\"\r\n            @update:WF_Form_Data=\"val => WF_Form_Data = val\"\r\n            mode=\"WF\"\r\n            :WF_canEdit=\"canEdit\"\r\n            :canAmend=\"canAmend\"\r\n            :isShowActualField=\"isShowActualField\"\r\n          />\r\n          <!--  -->\r\n          <slot :name=\"`custom-fields-${doc?.documentTypeID}`\" :formModel=\"WF_Form_Data\"></slot>\r\n\r\n        </el-form>\r\n\r\n        <!--  -->\r\n        <el-dialog\r\n          v-model=\"isNotifyDialogVisible\"\r\n          title=\"\"\r\n          width=\"60%\"\r\n          top=\"0vh\"\r\n          @close=\"isNotifyDialogVisible = false\"\r\n        >\r\n          <Custom_List_Insert_Notify\r\n            v-model=\"formModel.notificationList\"\r\n            mode=\"notify\"\r\n          />\r\n          <template #footer>\r\n            <el-button @click=\"isNotifyDialogVisible = false\"></el-button>\r\n            <el-button type=\"primary\" @click=\"isNotifyDialogVisible = false\"></el-button>\r\n          </template>\r\n        </el-dialog>\r\n\r\n        <!--  -->\r\n        <el-dialog\r\n          class=\"insert_notify_dialog\"\r\n          v-model=\"isInsertSignerDialogVisible\"\r\n          title=\"\"\r\n          top=\"0vh\"\r\n          @close=\"isInsertSignerDialogVisible = false\"\r\n        >\r\n          <Custom_List_Insert_Notify\r\n            v-model=\"formModel.signerList\"\r\n            mode=\"insert\"\r\n          />\r\n          <template #footer>\r\n            <el-button @click=\"isInsertSignerDialogVisible = false\"></el-button>\r\n            <el-button type=\"primary\" @click=\"isInsertSignerDialogVisible = false\"></el-button>\r\n          </template>\r\n        </el-dialog>\r\n\r\n        <Descending_Approval_Node v-if=\"showNode\" :docId=\"doc.documentID\" :visible=\"visible\"></Descending_Approval_Node>\r\n          <div class=\"tooltip-container\">\r\n            <Button\r\n              severity=\"secondary\" \r\n              icon=\"pi pi-times\"\r\n              class=\"p-button-rounded p-button-text p-button-lg\"\r\n              @click=\"handleClose\"\r\n              raised\r\n            ></Button>\r\n            <span class=\"tooltip-text\"></span>\r\n          </div>\r\n      </div> \r\n\r\n      <!-- // -->\r\n      <div v-if=\"isShowApprovalGroup\" :class=\"['fixed-button-group', `position-${buttonGroupPosition}`]\">\r\n        <div class=\"fixed-content-wrapper\">\r\n          \r\n          <!-- 1)  &   -->\r\n          <div class=\"signer-notify-group\">\r\n            <!--  -->\r\n            <div class=\"insertion-column\" v-if=\"canInsertSigner\">\r\n              <el-form-item label=\"\">\r\n                <div class=\"flex gap-2\">\r\n                  <el-tag\r\n                    v-for=\"emp in formModel.signerList\"\r\n                    :key=\"emp.id\"\r\n                    closable\r\n                    @close=\"removeSigner(emp.id)\"\r\n                  >{{ emp.name }}</el-tag>\r\n                  <el-button size=\"small\" class=\"button-new-tag button-new-tag--primary\"\r\n                            @click=\"isInsertSignerDialogVisible = true\">\r\n                    + \r\n                  </el-button>\r\n                </div>\r\n              </el-form-item>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"notification-column\" v-if=\"canNotify\">\r\n              <el-form-item label=\"\">\r\n                <div class=\"flex gap-2\">\r\n                  <el-tag\r\n                    v-for=\"emp in formModel.notificationList\"\r\n                    :key=\"emp.id\"\r\n                    type=\"warning\"\r\n                    closable\r\n                    @close=\"removeNotifier(emp.id)\"\r\n                  >{{ emp.name }}</el-tag>\r\n                  <el-button size=\"small\" class=\"button-new-tag button-new-tag--warning\"\r\n                            @click=\"isNotifyDialogVisible = true\">\r\n                    + \r\n                  </el-button>\r\n                </div>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 2)   -->\r\n          <div class=\"comment-wrapper\">\r\n            <el-form-item label=\"\" prop=\"comment\" class=\"vertical-label-item\" v-if=\"canApprove\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                v-model=\"formModel.comment\"\r\n                placeholder=\"\"\r\n                :rows=\"4\"\r\n                class=\"comment-textarea\"\r\n              />\r\n            </el-form-item>\r\n          </div>\r\n\r\n          <!-- 3)  -->\r\n          <hr class=\"section-divider\" v-if=\"canApprove\" /> \r\n\r\n          <!-- 4)  -->\r\n          <div class=\"approval-buttons-wrapper\">\r\n            <slot :name=\"`custom-actions-${doc?.documentTypeID}`\" :formModel=\"formModel\"></slot>\r\n            <el-button v-if=\"canAmend\"    type=\"warning\"    @click=\"handleSaveAndApproval\"    size=\"large\" round plain></el-button>\r\n            <el-button v-if=\"canResubmit\"   type=\"warning\"    @click=\"handleResubmit\"    size=\"large\" round plain></el-button>\r\n            <el-button v-if=\"canApprove\" type=\"success\" @click=\"handleApprove\" size=\"large\" :loading=\"isSubmitting\" :disabled=\"isSubmitting\" round plain ></el-button>\r\n            <el-button v-if=\"canReject\"  type=\"danger\"  @click=\"handleReject\"  size=\"large\" round plain></el-button>\r\n            <el-button v-if=\"canVoid\"    type=\"info\"    @click=\"handleVoid\"    size=\"large\" round plain></el-button>\r\n          </div>\r\n        \r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, defineProps, defineEmits, computed, onMounted, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport WorkflowService from '@/service/WorkflowService'\r\nimport { useUserStore } from '@/stores/user.js'\r\nimport Custom_List_Insert_Notify from '@/components/WorkFlow/Common/Custom_List_Insert_Notify'\r\nimport '@/css/button/wf-button.css'\r\nimport FormService from '@/service/FormService'\r\nimport Descending_Approval_Node from './Descending_Approval_Node.vue'\r\nimport { documentConfigs } from '@/configs/documentConfigs.js'\r\nimport { useWindowSize } from '@vueuse/core'\r\nimport  Button  from 'primevue/button'\r\n\r\n\r\n// import Workflow Form\r\nimport CorrectionForm from '@/components/WorkFlow/HR/CardReissue/CorrectionForm.vue'\r\nimport LeaveRequestForm from '@/components/WorkFlow/HR/LeaveRequestForm/LeaveRequestForm.vue' \r\nimport OvertimeRequestForm from '@/components/WorkFlow/HR/OvertimeRequestForm/OvertimeRequestForm.vue'\r\nimport LeaveCancellationForm from '@/components/WorkFlow/HR/CancelLeave/LeaveCancellationForm.vue'\r\n\r\nconst isSubmitting = ref(false);\r\nconst canApprove = ref(false);\r\nconst canReject = ref(false);\r\nconst canInsertSigner = ref(false);\r\nconst canNotify = ref(false);\r\nconst canVoid = ref(false);\r\nconst canResubmit = ref(false);\r\nconst canAmend = ref(true);\r\nconst isLoading = ref(false);\r\nconst canEdit = ref(false);\r\nconst dynamicFormRef = ref(null); //  dynamicFormRef\r\nconst showNode =ref(true);\r\nconst dialogBody = ref(null);\r\nconst props = defineProps({\r\n  visible: Boolean,\r\n  doc: Object,\r\n  buttonGroupPosition: { //  prop\r\n    type: String,\r\n    default: 'window', //  'window'\r\n    validator: (value) => ['window', 'dialog'].includes(value) //  'window'  'dialog'\r\n  }\r\n})\r\n\r\n// \r\nconst formComponents = {\r\n  CorrectionForm: CorrectionForm,\r\n  LeaveRequestForm: LeaveRequestForm,\r\n  OvertimeRequestForm : OvertimeRequestForm,\r\n  LeaveCancellationForm: LeaveCancellationForm,\r\n};\r\n\r\nconst dynamicFormComponent = computed(() => {\r\n  const componentName = documentConfigs[props.doc?.documentTypeID]?.component;\r\n  return componentName ? formComponents[componentName] : null;\r\n});\r\n\r\nconst { width } = useWindowSize();\r\nconst dialogWidth = computed(() => {\r\n  return width.value <= 768 ? '23rem' : '40rem';\r\n});\r\n \r\n // \r\n async function remountNode() {\r\n   showNode.value = false;\r\n   //  microtask  trueVue \r\n   await nextTick();\r\n   showNode.value = true;\r\n }\r\n\r\nconst currentFields = computed(() => documentConfigs[props.doc?.documentTypeID]?.fields || [])\r\nconst isShowApprovalGroup = computed(() =>\r\n  (\r\n    canInsertSigner.value ||\r\n    canNotify.value ||\r\n    canApprove.value ||\r\n    canReject.value ||\r\n    canVoid.value ||\r\n    canResubmit.value ||\r\n    canAmend.value\r\n  )\r\n);\r\n\r\n// \r\nconst workflowSteps = ref([]);\r\n\r\n// \r\nconst isShowActualField = computed(() => {\r\n  if(canAmend.value){\r\n    return true;\r\n  }\r\n  \r\n  if (!workflowSteps.value.length || !props.doc?.documentID) {\r\n    return false;\r\n  }\r\n\r\n  // \r\n  const currentStepIndex = workflowSteps.value.findIndex(step => \r\n    step.stepID === step.currentStepID\r\n  );\r\n\r\n  if (currentStepIndex === -1) {\r\n    return false;\r\n  }\r\n\r\n  //  canAmendByApplicant === true \r\n  const amendableSteps = workflowSteps.value.filter(step => \r\n    step.canAmendByApplicant === true\r\n  );\r\n\r\n  if (amendableSteps.length === 0) {\r\n    return false;\r\n  }\r\n\r\n  //  canAmendByApplicant === true \r\n  const lastAmendableStepIndex = workflowSteps.value.findIndex(step => \r\n    step.stepID === amendableSteps[amendableSteps.length - 1].stepID\r\n  );\r\n\r\n  // \r\n  return currentStepIndex > lastAmendableStepIndex;\r\n});\r\n\r\nconst emit = defineEmits(['update:visible', 'refreshList', 'close'])\r\n\r\nconst userStore = useUserStore()\r\n\r\n// \r\nconst formModel = ref({\r\n  comment: '',\r\n  notificationTiming: 2,\r\n  notificationList: [],\r\n  signerList: [],\r\n  currentStepName: '',\r\n})\r\n\r\n//  formModel \r\nwatch(() => props.doc, doc => {\r\n  if (!doc) return;\r\n  const config = documentConfigs[doc.documentTypeID];\r\n  if (config && config.fields) {\r\n    config.fields.forEach(f => {\r\n      if (!(f.prop in formModel.value)) {\r\n        formModel.value[f.prop] = null; // \r\n      }\r\n    });\r\n  }\r\n}, { immediate: true });\r\n\r\nconst isNotifyDialogVisible = ref(false)\r\nconst isInsertSignerDialogVisible = ref(false)\r\nconst formRef = ref(null)\r\n\r\n\r\n// \r\nfunction handleClose() {\r\n  emit('update:visible', false)\r\n  emit('close')\r\n}\r\n\r\n// \r\nfunction removeSigner(id) {\r\n  formModel.value.signerList = formModel.value.signerList.filter(e => e.id !== id)\r\n}\r\nfunction removeNotifier(id) {\r\n  formModel.value.notificationList = formModel.value.notificationList.filter(e => e.id !== id)\r\n}\r\n\r\n// build DTO\r\nfunction buildSubmitDto() {\r\n  // const actionValue = actionItem ? actionItem.value : 0\r\n  return {\r\n    documentID: props.doc.documentID,\r\n    // action: actionValue,\r\n    approverID: userStore.userId,\r\n    comment: formModel.value.comment,\r\n    insertSignerIds: formModel.value.signerList.map(e => e.id),\r\n    notification: {\r\n      notificationTiming: formModel.value.notificationTiming,\r\n      notifierIds: formModel.value.notificationList.map(e => e.id)\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nasync function handleApprove() {\r\n  try {\r\n    isSubmitting.value=true;\r\n    const dto = buildSubmitDto();\r\n    await WorkflowService.submitApproval(dto);\r\n    ElMessage.success('');\r\n    emit('refreshList'); // \r\n    handleClose(); //  dialog\r\n  } catch {\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n// \r\nasync function handleSaveAndApproval(){\r\n  try {\r\n    // \r\n    if (dynamicFormRef.value && typeof dynamicFormRef.value.SaveAndApprovalForm === 'function') {\r\n      //  SaveAndApprovalForm \r\n      const result = await dynamicFormRef.value.SaveAndApprovalForm();\r\n      \r\n      //  true\r\n      if (result === true) {\r\n        ElMessage.success('');\r\n        emit('refreshList'); // \r\n        handleClose(); //  dialog\r\n      } else {\r\n        //  false \r\n        // \r\n        return;\r\n      }\r\n    } else {\r\n      //  SaveAndApprovalForm \r\n      const dto = buildSubmitDto();\r\n      await WorkflowService.submitApproval(dto);\r\n      ElMessage.success('');\r\n      emit('refreshList'); // \r\n      handleClose(); //  dialog\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n// \r\nasync function handleReject() {\r\n  if (!formModel.value.comment.trim()) {\r\n    return ElMessage.warning('')\r\n  }\r\n  try {\r\n    const rejectDto = {\r\n      DocumentID: props.doc.documentID,\r\n      RejecterID: userStore.userId,\r\n      Comment: formModel.value.comment\r\n    };\r\n    var res = await WorkflowService.submitRejection(rejectDto);\r\n    if(res){\r\n      ElMessage.success('');\r\n      emit('refreshList'); // \r\n      handleClose(); //  dialog\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n//  ()\r\nasync function handleVoid() {\r\n  try {\r\n      var res = await WorkflowService.voidDocument(props.doc.documentID);\r\n      if(res){\r\n        ElMessage.success('');\r\n        emit('refreshList'); // \r\n        handleClose(); //  dialog\r\n      }\r\n  } catch {\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n\r\n\r\nasync function handleResubmit() {\r\n  //  getResubmitData \r\n  if (typeof dynamicFormRef.value.getResubmitData === 'function') {\r\n    // \r\n    const formDataWithAttachments = dynamicFormRef.value.getResubmitData();\r\n\r\n\r\n    const requestBodyToResubmit = new FormData();\r\n    requestBodyToResubmit.append('DocumentID', props.doc.documentID); //  props  DocumentID\r\n    requestBodyToResubmit.append('ReSubmitter', userStore.userId);\r\n\r\n    //  JSON \r\n    const formDataWithoutAttachments = { ...formDataWithAttachments };\r\n    delete formDataWithoutAttachments.attachments; // \r\n    requestBodyToResubmit.append('ResubmittedFormData', JSON.stringify(formDataWithoutAttachments));\r\n\r\n    // \r\n    if (formDataWithAttachments.attachments && Array.isArray(formDataWithAttachments.attachments)) {\r\n      formDataWithAttachments.attachments.forEach((file) => {\r\n        //  file.raw  File  Blob \r\n        if (file instanceof File || file instanceof Blob) { //  file  File/Blob\r\n          requestBodyToResubmit.append(`Attachments`, file);\r\n        } else if (file.raw instanceof File || file.raw instanceof Blob) { //  file.raw \r\n          requestBodyToResubmit.append(`Attachments`, file.raw);\r\n        }\r\n      });\r\n    }\r\n    \r\n\r\n    try {\r\n      for (const [key, val] of requestBodyToResubmit.entries()) {\r\n        console.log(key, val);\r\n      }\r\n      const response = await WorkflowService.resubmitWithAttachments(requestBodyToResubmit);\r\n      if (response) {\r\n        ElMessage.success('!');\r\n        emit('refreshList'); // \r\n        handleClose(); //  dialog\r\n      }\r\n    } catch (err) {\r\n      console.error('', err);\r\n      ElMessage.error('!');\r\n    }\r\n  } else {\r\n    ElMessage.warning('  ');\r\n  }\r\n}\r\n\r\n// watch(formModel.value, (newVal) => {\r\n//   console.log('formModel.value updated:', newVal);\r\n// }, { deep: true });\r\n\r\nconst WF_Form_Data = ref();\r\n\r\n\r\nwatch(\r\n  () => props.visible,\r\n  async (open) => {\r\n    if (open) {\r\n      await fetchDetail();\r\n      await remountNode();\r\n    } else {\r\n      //  dialog \r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nasync function fetchDetail() {\r\n  if (!props.doc) {\r\n    return;\r\n  }\r\n\r\n  isLoading.value = true;\r\n\r\n  try {\r\n    // 1.  formModel.value \r\n    formModel.value.comment = '';\r\n    formModel.value.signerList = [];\r\n    formModel.value.notificationList = [];\r\n\r\n    // 2.  WF_Form_Data\r\n    WF_Form_Data.value = {};\r\n\r\n    // 3.  API \r\n    const detailRes = await FormService.getDocDetail(\r\n      props.doc.documentTypeID,\r\n      props.doc.documentID\r\n    );\r\n    const data = detailRes.data;\r\n    console.log('fetch Detail:', data);\r\n\r\n    // 3.  API \r\n    const filesRes = await FormService.getDocumentFiles(\r\n      props.doc.documentTypeID,\r\n      props.doc.documentID\r\n    );\r\n\r\n    const files = filesRes.data;\r\n    console.log('fetch files: ', files);\r\n\r\n    // 4.  data  WF_Form_Data\r\n    WF_Form_Data.value = data;\r\n    //  WF_Form_Data.attachments\r\n    WF_Form_Data.value.attachments = files;\r\n\r\n    // 5. \r\n    const permRes = await WorkflowService.getDocumentPermissions(\r\n      props.doc.documentID,\r\n      userStore.userId\r\n    );\r\n    const perms = permRes.data;\r\n    console.log('perms:', perms);\r\n    if (perms) {\r\n      canApprove.value = perms.canApprove;\r\n      canReject.value = perms.canReject;\r\n      canInsertSigner.value = perms.canInsertSigner;\r\n      canNotify.value = perms.canNotify;\r\n      canVoid.value = perms.canVoid;\r\n      canResubmit.value = perms.canResubmit;\r\n      canEdit.value = perms.canEdit;\r\n      canAmend.value = perms.canAmend;\r\n    }\r\n\r\n    // 6.  - \r\n    try {\r\n      const workflowRes = await WorkflowService.getApprovalSteps(props.doc.documentID);\r\n      console.log('API:', workflowRes.data);\r\n      \r\n      // \r\n      let dataArray = workflowRes.data || [];\r\n      if (!Array.isArray(dataArray)) {\r\n        if (typeof dataArray === 'object') {\r\n          dataArray = Object.values(dataArray);\r\n        } else {\r\n          dataArray = [];\r\n        }\r\n      }\r\n      \r\n      // \r\n      const sorted = dataArray.sort((a, b) => {\r\n        const aOrder = a.viewOrder || a.stepOrder || 0;\r\n        const bOrder = b.viewOrder || b.stepOrder || 0;\r\n        return aOrder - bOrder;\r\n      });\r\n      \r\n      workflowSteps.value = sorted;\r\n      console.log(':', workflowSteps.value);\r\n    } catch (error) {\r\n      console.error(':', error);\r\n      workflowSteps.value = [];\r\n    }\r\n\r\n    // 7.  data  formModel mapDataToFormModel\r\n    mapDataToFormModel(data, formModel.value, currentFields.value);\r\n\r\n    formModel.value.currentStepName = data.currentStepName; \r\n\r\n    // console.log(\"formModel: \",formModel.value);\r\n    // console.log(\"isShowActualField: \", isShowActualField.value);\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n}\r\n\r\n\r\n\r\n//  API \r\nfunction mapDataToFormModel(data, formModel, fields) {\r\n  fields.forEach(f => {\r\n    if (f.prop === 'applyDate' && data.applyAt) {\r\n      formModel[f.prop] = new Date(data.applyAt);\r\n    } else if (f.prop === 'leaveDateTimeRange' && data.leaveStartDate && data.leaveEndDate && data.leaveStartTime && data.leaveEndTime) {\r\n      const startDateTime = new Date(`${data.leaveStartDate}T${data.leaveStartTime}`);\r\n      const endDateTime = new Date(`${data.leaveEndDate}T${data.leaveEndTime}`);\r\n      if (!isNaN(startDateTime.getTime()) && !isNaN(endDateTime.getTime())) {\r\n        formModel[f.prop] = [startDateTime, endDateTime];\r\n      } else {\r\n        formModel[f.prop] = [];\r\n      }\r\n    } else if (data[f.prop] !== undefined) { // \r\n      formModel[f.prop] = data[f.prop];\r\n    }\r\n  });\r\n}\r\n\r\nonMounted(() => {\r\n  if (props.visible) {\r\n    fetchDetail();\r\n  }\r\n});\r\n</script>\r\n<style scoped>\r\n/* ::v-deep or /deep/  scoped  Teleported DOM */\r\n:deep(.border-block-style.el-dialog) {\r\n  border-left: 4px groove #999;\r\n  border-right:4px groove #999;\r\n}\r\n\r\n.fixed-button-group {\r\n  display: flex;\r\n  flex-direction: column; /*  */\r\n  align-items: center; /*  */\r\n  gap: 20px; /* // */\r\n  background-color: white; /*  */\r\n  padding: 10px 20px; /*  */\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /*  */\r\n  border-radius: 8px; /*  */\r\n}\r\n\r\n.position-window {\r\n  position: fixed; /*  */\r\n  bottom: 5%; /*  5% */\r\n  left: 50%; /*  */\r\n  transform: translateX(-50%); /*  */\r\n  z-index: 2001; /*  el-dialog  (el-dialog  z-index  2000) */\r\n}\r\n.position-dialog {\r\n  position: sticky;\r\n  bottom: 1rem;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 10;\r\n\r\n  /*  */\r\n  background-color: #ffffff;\r\n  padding: 1rem;\r\n  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);\r\n\r\n  /*  */\r\n  border: 1px solid #e0e0e0;\r\n  border-top: 4px solid #3bd9f8;\r\n\r\n  /*  */\r\n  border-radius: 6px;\r\n}\r\n/*  el-dialog__body  sticky  */\r\n:deep(.el-dialog__body) {\r\n  max-height: calc(90vh - 250px); /*  */\r\n  overflow-y: auto; /*  */\r\n  padding-bottom: 150px; /*  */\r\n}\r\n\r\n.fixed-content-wrapper {\r\n  width: 100%; /*  */\r\n}\r\n\r\n.signer-notify-comment-group {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr; /*  */\r\n  gap: 20px; /*  */\r\n  border-top: 1px solid #eee;     /* */\r\n  border-bottom: 1px solid #eee;     /* */\r\n  padding-top: 10px;\r\n  padding-left: 5px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.signer-notify-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 3px; /*  */\r\n  padding-right: 10px; /*  */\r\n  border-right: 1px solid #eee;  /*  */\r\n}\r\n\r\n/*  -  Descending_Approval_Node.vue  */\r\n.dialog-content-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n\r\n/*  */\r\n.dialog-content-wrapper .el-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n/*  */\r\n.dialog-content-wrapper p {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0.5rem 0;\r\n}\r\n\r\n.vertical-label-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n.vertical-label-item .el-form-item__content {\r\n  margin-top: 0.5em; /* label  textarea  */\r\n}\r\n\r\n.comment-textarea .el-textarea__inner {\r\n  width: 100%;       /*  */\r\n  max-width: 25rem;  /*  */\r\n}\r\n/*  .comment-textarea  */\r\n.comment-textarea {\r\n  width: 34rem;\r\n}\r\n\r\n/*    */\r\n.signer-notify-group {\r\n  display: flex;\r\n  gap: 10px;           /*  */\r\n  width: 100%;\r\n}\r\n\r\n.insertion-column,\r\n.notification-column {\r\n  flex: 1;             /*  */\r\n}\r\n\r\n/*  */\r\n.comment-wrapper {\r\n  margin-top: 16px;\r\n  width: 100%;\r\n}\r\n\r\n/*  */\r\n.section-divider {\r\n  width: 100%;\r\n  border: none;\r\n  border-top: 1px solid #e0e0e0;\r\n  margin: 16px 0;\r\n}\r\n\r\n/*  */\r\n.approval-buttons-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.insert_notify_dialog{\r\n    width: 30%\r\n}\r\n/* textarea  */\r\n.comment-textarea .el-textarea__inner {\r\n  width: 100%;\r\n  max-width: none;\r\n}\r\n\r\n.responsive-text {\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.tooltip-container {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.tooltip-text {\r\n  visibility: hidden;\r\n  background-color: #555;\r\n  color: #fff;\r\n  text-align: center;\r\n  border-radius: 6px;\r\n  padding: 5px;\r\n  position: absolute;\r\n  z-index: 1;\r\n  bottom: 125%; /*  */\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n  display: flex; /* flex */\r\n  flex-direction: row; /*  */\r\n  white-space: nowrap; /*  */\r\n}\r\n\r\n.tooltip-container:hover .tooltip-text {\r\n  visibility: visible;\r\n  opacity: 1;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .responsive-text {\r\n    font-size: 1.3rem;\r\n  }\r\n\r\n  .comment-textarea {\r\n    width: 17.5rem;\r\n  }\r\n\r\n  .insert_notify_dialog{\r\n    width: 100%\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Detail_Related_WF_Dialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Detail_Related_WF_Dialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Detail_Related_WF_Dialog.vue?vue&type=style&index=0&id=70f386ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-70f386ea\"]])\n\nexport default __exports__","<template>\r\n            <div class=\"parent\" >\r\n                <!--  -->\r\n                <div\r\n                  class=\"div1\"\r\n                  style=\"width:30rem; display: flex; flex-direction: column; align-items: center; margin-top:-0.5rem\"\r\n                >\r\n                  <!-- Title  -->\r\n                  <div class=\"title-section\" style=\"display: flex; align-items: center;\">\r\n                    <!--  -->\r\n                    <h2 class=\"table-title\" style=\"font-size:1.2rem; margin-bottom:-1rem\">\r\n                      {{ $t('attendanceRecords') }}\r\n                    </h2>\r\n                  </div>\r\n                  <div class=\"sub-title\" style=\"display: flex; align-items: center;\">\r\n                    <!--  icon -->\r\n                    <i\r\n                      class=\"pi pi-chevron-left\"\r\n                      style=\"cursor: pointer; margin-right: 10px; font-size: 1rem;margin-top: 1 rem;\"\r\n                      @click=\"getPreviousMonth\"\r\n                    ></i>\r\n                  <!-- SubTitle  -->\r\n                  <span class=\"sub-title\" style=\"margin: 0; margin-top: -0rem;\">\r\n                    {{ $t('employeeName') }}:\r\n                    <span style=\"padding-right: 1rem;font-size:1.5rem\"  class=\"highlight \">{{ employeeName }}</span>\r\n                    {{ $t('attendanceDate') }}:\r\n                    <span style=\"font-size:1.5rem\" class=\"attendance-date\">{{ attendanceDate }}</span>\r\n                  </span>\r\n                    <!--  icon -->\r\n                    <i\r\n                      class=\"pi pi-chevron-right\"\r\n                      :style=\"{\r\n                        cursor: 'pointer',\r\n                        marginLeft: '10px',\r\n                        marginTop: '0rem',\r\n                        fontSize: '1rem',\r\n                        visibility: canShowNextMonth ? 'visible' : 'hidden'\r\n                      }\"\r\n                      @click=\"getNextMonth\"\r\n                    ></i>\r\n                  </div>\r\n                  <!--  -->\r\n                  <div style=\"width:100%; overflow-x:auto; margin-top:10px;\">\r\n                    <DataTable :value=\"mergedAttendanceRecords\" style=\"width:100%;\">\r\n                      <Column field=\"\" :header=\"$t('Date')\" style=\"width:120px;\"></Column>\r\n                      <Column field=\"\" :header=\"$t('ClockIn')\" style=\"width:100px;\"></Column>\r\n                      <Column field=\"\" :header=\"$t('ClockOut')\" style=\"width:100px;\"></Column>\r\n                      <Column v-if=\"!personalMode && !sysMode\" header=\"\" style=\"width:150px;\">\r\n                    <template #body=\"slotProps\">\r\n                      <div>\r\n                      <!--  -->\r\n                      <template v-if=\"isOvertime(slotProps.data)\">\r\n                        <span \r\n                          class=\"custom-tag custom-tag-warning clickable-tag\" \r\n                          style=\"margin-right:5px; cursor: pointer;\" \r\n                          @click=\"openOvertimeDetail(slotProps.data[''])\"\r\n                          :title=\"''\"\r\n                        >\r\n                          \r\n                        </span>\r\n                      </template>\r\n                        <!--  description  description -->\r\n                      <template v-if=\" getHolidayDescription(slotProps.data)\">\r\n                        <span class=\"custom-tag custom-tag-success\" >\r\n                          {{ getHolidayDescription(slotProps.data) }}\r\n                        </span>\r\n                      </template>\r\n                      \r\n                      <!--  -->\r\n                      <template v-for=\"(leaveRecord, index) in getLeaveRecordsForDate(slotProps.data[''])\" :key=\"`leave-${index}`\">\r\n                        <span \r\n                          :class=\"leaveRecord.leaveTypeName === '' ? 'custom-tag clickable-tag' : 'custom-tag custom-tag-success clickable-tag'\"\r\n                          :style=\"leaveRecord.leaveTypeName === '' ? \r\n                            'margin-right:5px; cursor: pointer; background-color: #D8BFD8; color: #6B46C1; border-color: #D8BFD8;' : \r\n                            'margin-right:5px; cursor: pointer;'\"\r\n                          @click=\"openLeaveDetailByRecord(leaveRecord)\"\r\n                          :title=\"` (${leaveRecord.documentId})`\"\r\n                        >\r\n                          {{ leaveRecord.leaveTypeName }}\r\n                        </span>\r\n                      </template>\r\n                      <!--  -->\r\n                      <template v-if=\"getTyphoonLeaveForDate(slotProps.data[''])\">\r\n                        <span \r\n                          class=\"custom-tag clickable-tag\" \r\n                          style=\"margin-right:5px; background-color: #5CADAD; color: white; border-color: #5CADAD; cursor: pointer;\" \r\n                          @click=\"openTyphoonLeaveDetail()\"\r\n                          :title=\"''\"\r\n                        >\r\n                          {{ getTyphoonLeaveForDate(slotProps.data['']) }}\r\n                        </span>\r\n                      </template>\r\n                      <!--  -->\r\n                      <template v-if=\"getCardCorrectionForDate(slotProps.data[''])\">\r\n                        <template v-for=\"(correctionRecord, index) in getCardCorrectionRecordsForDate(slotProps.data[''])\" :key=\"`correction-${index}`\">\r\n                          <span \r\n                            class=\"custom-tag clickable-tag\" \r\n                            style=\"margin-right:5px; background-color: #FFAD86; color: white; border-color: #FFAD86; cursor: pointer;\" \r\n                            @click=\"openCardCorrectionDetail(slotProps.data[''], correctionRecord.documentId)\"\r\n                            :title=\"` (${correctionRecord.documentId})`\"\r\n                          >\r\n                            {{ getCorrectionDisplayText(correctionRecord) }}\r\n                          </span>\r\n                        </template>\r\n                      </template>\r\n                      <!--  -->\r\n                      <template v-if=\"isAbsent(slotProps.data)\">\r\n                        <span class=\"custom-tag custom-tag-inverse\" style=\"margin-right:5px;\">\r\n                          {{ $t('absenteeism') }}\r\n                        </span>\r\n                      </template>\r\n                      <template v-else>\r\n                        <span\r\n                          v-if=\"getDelay(slotProps.data) > 0\"\r\n                          class=\"custom-tag p-tag-rounded\"\r\n                          :class=\"{\r\n                            'custom-tag custom-tag-warn': getStatus(slotProps.data) === 'warn',\r\n                            'custom-tag custom-tag-danger': getStatus(slotProps.data) === 'danger'\r\n                          }\"\r\n                          style=\"margin-right:5px;\"\r\n                        >\r\n                          {{ getStatusText(slotProps.data) }}\r\n                        </span>\r\n                      </template>\r\n                      </div>\r\n                    </template>\r\n                  </Column>\r\n                      \r\n                    </DataTable>\r\n                  </div>\r\n                </div>\r\n                  \r\n                  <!--  -->\r\n                  <div v-if=\"!personalMode\" style=\"margin-top:5rem;margin-left:1rem\" class=\"stats-card div2\" >\r\n                    <!--  loading  click  -->\r\n                      <!-- -->\r\n                      <span class=\"stats-title\">{{ $t('attendanceStatistics') }}</span>\r\n                        <!--  -->\r\n                        <div class=\"stats-section\">\r\n                          <h3 class=\"section-title\">{{ $t('lateWithinThreeMinutes') }}</h3>\r\n                          <p class=\"stats-summary\">{{ $t('records') }}{{ lateRecords.length }}</p>\r\n                          <ul class=\"stats-list\">\r\n                            <li v-for=\"record in lateRecords\" :key=\"record.\" class=\"stats-item\">\r\n                              <span class=\"date\">{{ record. }}</span>\r\n                              <span class=\"info\">{{ $t('totalMinutesLate') }} {{ getDelay(record) }} {{$t('minutes')}}</span>\r\n                            </li>\r\n                          </ul>\r\n                          <div v-if=\"lateRecords.length > 3\" class=\"extra-info\">\r\n                            <p>{{ $t('accumulatedMinutesAfterFourth') }}<strong>{{ lateExtraTotal }}</strong> {{$t('minutes')}}</p>\r\n                          </div>\r\n                        </div>\r\n                      \r\n                      <div class=\"stats-section\">\r\n                        <h3 class=\"section-title\">{{ $t('lateBeyondThreeMinutes') }}</h3>\r\n                        <p class=\"stats-summary\">{{ $t('records') }}{{ lateRecordsOver.length }}</p>\r\n                        <ul class=\"stats-list\">\r\n                          <li v-for=\"record in lateRecordsOver\" :key=\"record. + '-over'\" class=\"stats-item\">\r\n                            <span class=\"date\">{{ record. }}</span>\r\n                            <span class=\"info\">{{ $t('totalMinutesLate') }} {{ getDelay(record) }} {{$t('minutes')}}</span>\r\n                          </li>\r\n                        </ul>\r\n                      </div>\r\n                      \r\n                      <div class=\"stats-total\">\r\n                        <p>{{ $t('totalMinutesLate') }} <strong>{{ lateTotal }}</strong> {{$t('minutes')}}</p>\r\n                      </div>\r\n                  </div>\r\n            </div>\r\n\r\n      <!-- Detail Dialog  -->\r\n      <Detail_Related_WF_Dialog\r\n        v-if=\"isDialogVisible && selectedDoc\"\r\n        v-model:visible=\"isDialogVisible\"\r\n        :doc=\"selectedDoc\"\r\n        buttonGroupPosition=\"dialog\"\r\n        @refreshList=\"refreshList\"\r\n      />\r\n\r\n      <!--  -->\r\n      <el-dialog\r\n        v-model=\"isTyphoonLeaveDialogVisible\"\r\n        :title=\"`${attendanceDate} `\"\r\n        width=\"700px\"\r\n        :close-on-click-modal=\"false\"\r\n      >\r\n        <div v-if=\"typhoonLeaveRecords.length === 0\" class=\"no-records\">\r\n          <p style=\"text-align: center; color: #999; padding: 20px;\">\r\n            \r\n          </p>\r\n        </div>\r\n        <div v-else>\r\n          <el-table :data=\"typhoonLeaveRecords\" border style=\"width: 100%\">\r\n            <el-table-column prop=\"leaveDate\" label=\"\" width=\"120\">\r\n              <template #default=\"scope\">\r\n                {{ formatTyphoonLeaveDate(scope.row.leaveDate) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"startTime\" label=\"\" width=\"100\">\r\n              <template #default=\"scope\">\r\n                {{ scope.row.startTime || '' }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"endTime\" label=\"\" width=\"100\">\r\n              <template #default=\"scope\">\r\n                {{ scope.row.endTime || '' }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"hours\" label=\"\" width=\"80\">\r\n              <template #default=\"scope\">\r\n                {{ scope.row.hours || '8' }} \r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"createdBy\" label=\"\" width=\"100\">\r\n              <template #default=\"scope\">\r\n                {{ scope.row.createdBy }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"createdAt\" label=\"\">\r\n              <template #default=\"scope\">\r\n                {{ formatDateTime(scope.row.createdAt) }}\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"isTyphoonLeaveDialogVisible = false\"></el-button>\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n      \r\n      <!--  -->\r\n      <div v-if=\"false\" style=\"position: fixed; top: 10px; right: 10px; background: white; padding: 10px; border: 1px solid #ccc; z-index: 9999;\">\r\n        <p>isDialogVisible: {{ isDialogVisible }}</p>\r\n        <p>selectedDoc: {{ selectedDoc }}</p>\r\n        <p>leaveRecords length: {{ leaveRecords.length }}</p>\r\n        <p>overtimeRecords length: {{ overtimeRecords.length }}</p>\r\n        <p>typhoonLeaveRecords length: {{ typhoonLeaveRecords.length }}</p>\r\n        <p>cardCorrectionRecords length: {{ cardCorrectionRecords.length }}</p>\r\n        <p>attendanceDate: {{ attendanceDate }}</p>\r\n      </div>\r\n</template>\r\n\r\n<script setup>\r\n/* ---------------------------------------------\r\n *  1. \r\n * --------------------------------------------- */\r\nimport { ref, computed, defineProps,watch,defineEmits, nextTick } from 'vue';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport FinanceService from '../../service/FinanceService';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { ElMessageBox } from 'element-plus'; //  Element Plus \r\nimport Detail_Related_WF_Dialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\n\r\n// import H_UserListBlock from './Horizontal-User-List-Block.vue';\r\nconst { t } = useI18n();\r\n\r\n/**  **/\r\n\r\nconst props = defineProps({\r\n  editMode: { \r\n    type: Boolean, \r\n    default: false \r\n  },\r\n  selectedUser: {\r\n    type: Object,\r\n    default: null\r\n  },\r\n  personalMode:{\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n\r\n\r\n// (2-4) \r\nconst holidays = ref([]);\r\nconst workdays = ref([]);\r\nconst TaiwanCalendarYear = ref(new Date().getFullYear());\r\n\r\n// (2-5) \r\nconst attendanceRecords = ref([]);\r\nconst employeeName = ref('');\r\nconst employeeId = ref('');\r\nconst errorMessage = ref('');\r\nconst attendanceDate = ref(''); //  (YYYY-MM)\r\n\r\n// \r\nconst dataReady = ref(false)\r\n\r\n// \r\nconst mergedAttendanceRecords = computed(() => {\r\n  //  dataReady \r\n  // \r\n  const records = [...attendanceRecords.value]\r\n  \r\n  // \r\n  overtimeRecords.value.forEach(overtimeRecord => {\r\n    if (overtimeRecord.actualOvertimeDate) {\r\n      const actualDate = new Date(overtimeRecord.actualOvertimeDate)\r\n      const monthDay = `${(actualDate.getMonth() + 1).toString().padStart(2, '0')}/${actualDate.getDate().toString().padStart(2, '0')}`\r\n      const dayNames = ['', '', '', '', '', '', '']\r\n      const dayName = dayNames[actualDate.getDay()]\r\n      const dateStr = `${monthDay} (${dayName})`\r\n      \r\n      // \r\n      const existingRecord = records.find(record => record[''] === dateStr)\r\n      \r\n      if (!existingRecord) {\r\n        // \r\n        records.push({\r\n          '': dateStr,\r\n          '': '', // \r\n          '': '',\r\n          '': '',\r\n          '': '',\r\n          '': '',\r\n          '': '',\r\n          '_isOvertimeOnly': true // \r\n        })\r\n        //console.log(`[DEBUG] : ${dateStr}`)\r\n      }\r\n    }\r\n  })\r\n  \r\n  // \r\n  return records.sort((a, b) => {\r\n    const dateA = a[''].match(/(\\d{2}\\/\\d{2})/)?.[1] || ''\r\n    const dateB = b[''].match(/(\\d{2}\\/\\d{2})/)?.[1] || ''\r\n    return dateA.localeCompare(dateB)\r\n  })\r\n})\r\n\r\n\r\n/* ---------------------------------------------\r\n *  3.  (computed)\r\n * --------------------------------------------- */\r\n\r\n\r\n// (3-2) \r\nconst lateRecords = computed(() =>\r\n  attendanceRecords.value.filter((row) => {\r\n    const delay = getDelay(row);\r\n    if (delay === null || delay <= 0 || delay > 3) {\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const isOvertimeRecord = isOvertime(row);\r\n    const isWeekend = row[''].includes('()') || row[''].includes('()');\r\n    \r\n    // \r\n    if (isOvertimeRecord && isWeekend) {\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const leaveType = getLeaveTypeForDate(row['']);\r\n    if (leaveType) {\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const hasTyphoonLeave = getTyphoonLeaveForDate(row['']);\r\n    if (hasTyphoonLeave) {\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  })\r\n);\r\nconst lateRecordsOver = computed(() =>\r\n  attendanceRecords.value.filter((row) => {\r\n    const delay = getDelay(row);\r\n    if (delay === null || delay <= 3) {\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const isOvertimeRecord = isOvertime(row);\r\n    const isWeekend = row[''].includes('()') || row[''].includes('()');\r\n    \r\n    // \r\n    if (isOvertimeRecord && isWeekend) {\r\n      console.log(`: ${row['']} ( ${delay} )`);\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const leaveType = getLeaveTypeForDate(row['']);\r\n    if (leaveType) {\r\n      console.log(`: ${row['']} (: ${leaveType},  ${delay} )`);\r\n      return false;\r\n    }\r\n    \r\n    // \r\n    const hasTyphoonLeave = getTyphoonLeaveForDate(row['']);\r\n    if (hasTyphoonLeave) {\r\n      console.log(`: ${row['']} ( ${delay} )`);\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  })\r\n);\r\nconst lateTotal = computed(() =>\r\n  lateRecordsOver.value.reduce((sum, row) => sum + (getDelay(row) || 0), 0)\r\n);\r\nconst lateExtraTotal = computed(() => {\r\n  if (lateRecords.value.length <= 3) return 0;\r\n  return lateRecords.value.slice(3).reduce((sum, row) => sum + (getDelay(row) || 0), 0);\r\n});\r\n\r\n// (3-3)  ( 1 )\r\nconst maxAllowedAttendanceDate = computed(() => {\r\n  const now = new Date();\r\n  now.setMonth(now.getMonth() - 1);\r\n  return formatDate(now);\r\n});\r\n\r\n// (3-4) \r\nconst canShowNextMonth = computed(() => {\r\n  return attendanceDate.value <= maxAllowedAttendanceDate.value;\r\n});\r\n\r\n\r\n\r\n\r\n\r\nasync function getData(empId) {\r\n  errorMessage.value = '';\r\n  //  dataReady \r\n  \r\n  const now = new Date();\r\n  if(props.personalMode){\r\n    //\r\n    now.setMonth(now.getMonth());\r\n  }else{\r\n    //\r\n    now.setMonth(now.getMonth()-1);\r\n  }\r\n\r\n  const year = now.getFullYear();\r\n  let monthNumber = now.getMonth() + 1;\r\n  monthNumber = monthNumber < 10 ? '0' + monthNumber : monthNumber;\r\n  attendanceDate.value = `${year}-${monthNumber}`;\r\n  \r\n  try {\r\n    // //console.log(\" attendanceDate.value = `${year}-${monthNumber}`\",attendanceDate.value,empId);\r\n    const response = await FinanceService.getAttendanceRecord(attendanceDate.value, empId);\r\n\r\n    attendanceRecords.value = response.data;\r\n    \r\n    // \r\n    await Promise.all([\r\n      fetchLeaveRecords(),\r\n      fetchOvertimeRecords(),\r\n      getTyphoonLeave(),\r\n      fetchCardCorrectionRecords()\r\n    ]);\r\n    \r\n    //  true\r\n    dataReady.value = true;\r\n  } catch (error) {\r\n    console.error('', error);\r\n    errorMessage.value = '';\r\n    dataReady.value = true; //  true\r\n  }\r\n}\r\n\r\n// (4-3) \r\nasync function getPreviousMonth() {\r\n  const [yearStr, monthStr] = attendanceDate.value.split('-');\r\n  const year = parseInt(yearStr);\r\n  const month = parseInt(monthStr);\r\n  const date = new Date(year, month - 1, 1);\r\n  date.setMonth(date.getMonth() - 1);\r\n  const targetDate = formatDate(date);\r\n\r\n  if (props.editMode) {\r\n    ElMessageBox.confirm(\r\n      '',\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning'\r\n      }\r\n    )\r\n      .then(async () => {\r\n        // \r\n        // \r\n        attendanceDate.value = targetDate;\r\n        TaiwanCalendarYear.value = date.getFullYear();\r\n        \r\n        //  nextTick  DOM \r\n        await nextTick();\r\n        \r\n        try {\r\n          getTaiwanCalendar(TaiwanCalendarYear.value);\r\n          \r\n          const response = await FinanceService.getAttendanceRecord(attendanceDate.value, employeeId.value);\r\n          attendanceRecords.value = response.data;\r\n          \r\n          // \r\n          await Promise.all([\r\n            fetchLeaveRecords(),\r\n            fetchOvertimeRecords(),\r\n            getTyphoonLeave(),\r\n            fetchCardCorrectionRecords()\r\n          ]);\r\n          \r\n          //  true\r\n          dataReady.value = true;\r\n        } catch (error) {\r\n          console.error('', error);\r\n          errorMessage.value = '';\r\n          dataReady.value = true; //  true\r\n        }\r\n      })\r\n      .catch(() => {\r\n        // \r\n      });\r\n  } else {\r\n    // \r\n    attendanceDate.value = targetDate;\r\n    TaiwanCalendarYear.value = date.getFullYear();\r\n    \r\n    //  nextTick  DOM \r\n    await nextTick();\r\n    \r\n    try {\r\n      getTaiwanCalendar(TaiwanCalendarYear.value);\r\n      //console.log(\"getPreviousMonth request: \",attendanceDate.value,employeeId.value);\r\n      const response = await FinanceService.getAttendanceRecord(attendanceDate.value, employeeId.value);\r\n      attendanceRecords.value = response.data;\r\n      \r\n      // \r\n      await Promise.all([\r\n        fetchLeaveRecords(),\r\n        fetchOvertimeRecords(),\r\n        getTyphoonLeave(),\r\n        fetchCardCorrectionRecords()\r\n      ]);\r\n      \r\n      //  true\r\n      dataReady.value = true;\r\n    } catch (error) {\r\n      console.error('', error);\r\n      errorMessage.value = '';\r\n      dataReady.value = true; //  true\r\n    }\r\n  }\r\n}\r\n\r\n// (4-4) \r\n// \r\nasync function getNextMonth() {\r\n  const [yearStr, monthStr] = attendanceDate.value.split('-');\r\n  const year = parseInt(yearStr);\r\n  const month = parseInt(monthStr);\r\n  const date = new Date(year, month - 1, 1);\r\n  date.setMonth(date.getMonth() + 1);\r\n  const targetDate = formatDate(date);\r\n\r\n  if (props.editMode) {\r\n    ElMessageBox.confirm(\r\n      '',\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning'\r\n      }\r\n    )\r\n      .then(async () => {\r\n        // \r\n        // \r\n        attendanceDate.value = targetDate;\r\n        TaiwanCalendarYear.value = date.getFullYear();\r\n        \r\n        //  nextTick  DOM \r\n        await nextTick();\r\n        \r\n        try {\r\n          getTaiwanCalendar(TaiwanCalendarYear.value);\r\n          const response = await FinanceService.getAttendanceRecord(attendanceDate.value, employeeId.value);\r\n          attendanceRecords.value = response.data;\r\n          \r\n          // \r\n          await Promise.all([\r\n            fetchLeaveRecords(),\r\n            fetchOvertimeRecords(),\r\n            getTyphoonLeave(),\r\n            fetchCardCorrectionRecords()\r\n          ]);\r\n          \r\n          //  true\r\n          dataReady.value = true;\r\n        } catch (error) {\r\n          console.error('', error);\r\n          errorMessage.value = '';\r\n          dataReady.value = true; //  true\r\n        }\r\n      })\r\n      .catch(() => {\r\n        // \r\n      });\r\n  } else {\r\n    // \r\n    attendanceDate.value = targetDate;\r\n    TaiwanCalendarYear.value = date.getFullYear();\r\n    \r\n    //  nextTick  DOM \r\n    await nextTick();\r\n    \r\n    try {\r\n      getTaiwanCalendar(TaiwanCalendarYear.value);\r\n              //console.log(\"getNextMonth request: \",attendanceDate.value,employeeId.value);\r\n      const response = await FinanceService.getAttendanceRecord(attendanceDate.value, employeeId.value);\r\n      attendanceRecords.value = response.data;\r\n      \r\n      // \r\n      await Promise.all([\r\n        fetchLeaveRecords(),\r\n        fetchOvertimeRecords(),\r\n        getTyphoonLeave(),\r\n        fetchCardCorrectionRecords()\r\n      ]);\r\n      \r\n      //  true\r\n      dataReady.value = true;\r\n    } catch (error) {\r\n      console.error('', error);\r\n      errorMessage.value = '';\r\n      dataReady.value = true; //  true\r\n    }\r\n  }\r\n}\r\n\r\n// (4-5)  (/)\r\nconst getTaiwanCalendar = async (year) => {\r\n  const response = await fetch(`https://cdn.jsdelivr.net/gh/ruyut/TaiwanCalendar/data/${year}.json`);\r\n  const data = await response.json();\r\n  //  \"yyyyMMdd\"  \"MM/dd\"\r\n  data.forEach(item => {\r\n    if (item.date && item.date.length === 8) {\r\n      const month = item.date.slice(4, 6);\r\n      const day = item.date.slice(6, 8);\r\n      item.date = `${month}/${day}`;\r\n    }\r\n  });\r\n  //  isHoliday  true\r\n  holidays.value = data.filter(item => item.isHoliday === true);\r\n  //  description  \"\" \r\n  workdays.value = data.filter(item => item.description.includes(''));\r\n};\r\n\r\n\r\n/* ---------------------------------------------\r\n *  5.  (UI )\r\n * --------------------------------------------- */\r\n// (5-1) \r\n\r\n\r\n// (5-2)  (Excel)\r\n\r\n\r\n/* ---------------------------------------------\r\n *  6. /\r\n * --------------------------------------------- */\r\n// (6-1)  Date  YYYY-MM\r\nfunction formatDate(date) {\r\n  const year = date.getFullYear();\r\n  let month = date.getMonth() + 1;\r\n  month = month < 10 ? '0' + month : month;\r\n  return `${year}-${month}`;\r\n}\r\n\r\n\r\n// (6-3)  ( ActualOvertimeDate )\r\nfunction isOvertime(row) {\r\n  const dateStr = row[''];\r\n  \r\n  //console.log(`[DEBUG] isOvertime : ${dateStr}, overtimeRecords : ${overtimeRecords.value.length}`);\r\n  \r\n  //  true\r\n  if (row._isOvertimeOnly) {\r\n    //console.log(`[DEBUG] : ${dateStr}`);\r\n    return true;\r\n  }\r\n  \r\n  //  (ActualOvertimeDate)\r\n  return hasActualOvertimeForDate(dateStr);\r\n}\r\n\r\n//  ( ActualOvertimeDate)\r\nfunction hasActualOvertimeForDate(dateStr) {\r\n  //console.log(`[DEBUG] hasActualOvertimeForDate : ${dateStr}`);\r\n  //console.log(`[DEBUG] overtimeRecords.value:`, overtimeRecords.value);\r\n  \r\n  // \r\n  let targetMonthDay = null;\r\n  \r\n  //  \"06/08 ()\"  \"06/08\"\r\n  const monthDayMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n  if (monthDayMatch) {\r\n    targetMonthDay = monthDayMatch[1]; // : \"06/08\"\r\n  }\r\n  \r\n  //console.log(`[DEBUG] : ${targetMonthDay}`);\r\n  \r\n  if (!targetMonthDay) {\r\n    //console.log(`[DEBUG] : ${dateStr}`);\r\n    return false;\r\n  }\r\n  \r\n  //  ActualOvertimeDate\r\n  for (const record of overtimeRecords.value) {\r\n    // console.log(`[DEBUG] :`, {\r\n    //   personnelId: record.personnelId,\r\n    //   personnelName: record.personnelName,\r\n    //   actualOvertimeDate: record.actualOvertimeDate\r\n    // });\r\n    \r\n    if (record.actualOvertimeDate) {\r\n      //  \"2025-06-08T00:00:00\"  \"06/08\"\r\n      const actualDate = new Date(record.actualOvertimeDate);\r\n      const actualMonthDay = `${(actualDate.getMonth() + 1).toString().padStart(2, '0')}/${actualDate.getDate().toString().padStart(2, '0')}`;\r\n      \r\n      //console.log(`[DEBUG] : ${actualMonthDay} vs ${targetMonthDay}`);\r\n      \r\n      if (actualMonthDay === targetMonthDay) {\r\n        //console.log(`: ${targetMonthDay} - : ${record.personnelName} (${record.personnelId})`);\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  \r\n  //console.log(`[DEBUG]  - : ${targetMonthDay}`);\r\n  return false;\r\n}\r\n\r\n// (6-4) \r\nfunction getHolidayDescription(row) {\r\n  const dateStr = row[''];\r\n  const holidayItem = holidays.value.find(item => dateStr.startsWith(item.date));\r\n  // //console.log(holidays);\r\n  if (holidayItem && holidayItem.description) {\r\n    return t(`holiday.${holidayItem.description}`, holidayItem.description);\r\n  }\r\n  return '';\r\n}\r\n\r\n// (6-5) \r\nfunction isAbsent(row) {\r\n  if (!row[''] && !row['']) {\r\n    const dateStr = row[''];\r\n\r\n    //  () => \r\n    if (dateStr.includes('()') || dateStr.includes('()')) return false;\r\n    const datePart = dateStr.split(' ')[0];\r\n    const [monthStr, dayStr] = datePart.split('/');\r\n    const today = new Date();\r\n    const rowDate = new Date(today.getFullYear(), parseInt(monthStr, 10) - 1, parseInt(dayStr, 10));\r\n    if (rowDate > today) return false;\r\n    const isHoliday = holidays.value.some(item => dateStr.startsWith(item.date));\r\n    if (isHoliday) return false;\r\n    \r\n    //  => \r\n    const hasTyphoonLeave = getTyphoonLeaveForDate(dateStr);\r\n    if (hasTyphoonLeave) return false;\r\n    \r\n    //  => \r\n    const leaveType = getLeaveTypeForDate(dateStr);\r\n    if (leaveType === '') return false;\r\n    \r\n    //  => \r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n// (6-6) \r\nfunction getDelay(row) {\r\n  if (!row['']) return null;\r\n  const parts = row[''].split(':');\r\n  \r\n  // \r\n  const isOvertimeRecord = isOvertime(row);\r\n  const isWeekend = row[''].includes('()') || row[''].includes('()');\r\n  if (isOvertimeRecord && isWeekend) return 0;\r\n  \r\n  if (parts.length < 2) return null;\r\n  \r\n  const checkInMinutes = parseInt(parts[0], 10) * 60 + parseInt(parts[1], 10);\r\n  \r\n  // \r\n  const startThreshold = 12 * 60 + 30; // 12:30 => 750 \r\n  const endThreshold = 13 * 60 + 30;   // 13:30 => 810 \r\n  const earlyStandard = 8 * 60 + 30;     // 8:30  => 510 \r\n  \r\n  if (checkInMinutes < startThreshold) {\r\n    // 12:30 8:30 \r\n    return checkInMinutes - earlyStandard;\r\n  } else if (checkInMinutes <= endThreshold) {\r\n    //  12:30  13:30 13:30\r\n    return 0;\r\n  } else {\r\n    //  13:30 13:30 \r\n    return checkInMinutes - endThreshold;\r\n  }\r\n}\r\n\r\n// (6-7) \r\nfunction getStatus(row) {\r\n  if (isAbsent(row)) {\r\n    return 'warn'\r\n  }\r\n  const delay = getDelay(row);\r\n  if (delay <= 0) return '';\r\n  if (delay <= 3) return 'warn';\r\n  return 'danger';\r\n}\r\n\r\n// (6-8) \r\nfunction getStatusText(row) {\r\n  if (isAbsent(row)) return '';\r\n  const delay = getDelay(row);\r\n  if (delay <= 0) return '';\r\n  return t('lateText', { delay });\r\n}\r\n\r\n// \r\nconst leaveRecords = ref([])\r\n// \r\nconst overtimeRecords = ref([])\r\n// \r\nconst typhoonLeaveRecords = ref([])\r\n// \r\nconst cardCorrectionRecords = ref([])\r\n\r\n// Dialog \r\nconst selectedDoc = ref(null) //  Detail_Related_WF_Dialog \r\nconst isDialogVisible = ref(false) //  Detail_Related_WF_Dialog \r\n\r\n// \r\nconst isTyphoonLeaveDialogVisible = ref(false) // \r\n\r\nwatch(\r\n  () => props.selectedUser,\r\n  async (newVal) => {\r\n    if (props.personalMode) {\r\n      //  store  userId  userName\r\n      employeeId.value = newVal.userId;\r\n      employeeName.value = newVal.userName;\r\n      await getData(employeeId.value);\r\n    } else if (newVal && newVal.namE_FIRST) {\r\n      employeeId.value = newVal.emploY_ID;\r\n      employeeName.value = newVal.namE_FIRST;\r\n      await getData(employeeId.value);\r\n    }\r\n    \r\n    // \r\n    // //console.log(':', newVal);\r\n    await fetchLeaveRecords();\r\n    await fetchOvertimeRecords();\r\n    await getTyphoonLeave();\r\n    await fetchCardCorrectionRecords();\r\n  },\r\n  { immediate: true }\r\n)\r\nconst emit = defineEmits(['attendanceDate', 'updateAttendanceDate' , 'lateTotal'])\r\n\r\n\r\nwatch(\r\n  () => attendanceDate.value,\r\n  (newVal) => {\r\n    emit('attendanceDate', newVal)\r\n  }\r\n)\r\n\r\nconst totalLate = computed(() => lateTotal.value + lateExtraTotal.value)\r\n\r\n// \r\nwatch(totalLate, (newTotal) => {\r\n  \r\n  emit('lateTotal', newTotal)\r\n})\r\n\r\n// \r\nfunction getLeaveRecordsForDate(dateStr) {\r\n  //console.log(' getLeaveRecordsForDate :', dateStr, ':', leaveRecords.value.length);\r\n  \r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1]; // : \"2025/07/02\"\r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}/${shortDateMatch[1]}`; // : \"2025/07/31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (!targetDate) {\r\n    //console.log(':', dateStr);\r\n    return [];\r\n  }\r\n  \r\n  //console.log(':', targetDate);\r\n  \r\n  const matchedRecords = [];\r\n  \r\n  // \r\n  for (const record of leaveRecords.value) {\r\n    try {\r\n      // \r\n      let startDate = null;\r\n      let endDate = null;\r\n      \r\n      if (record.leaveStartDate) {\r\n        //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n        const startDateStr = typeof record.leaveStartDate === 'string' \r\n          ? record.leaveStartDate \r\n          : record.leaveStartDate.toString();\r\n        startDate = startDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n      }\r\n      \r\n      if (record.leaveEndDate) {\r\n        //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n        const endDateStr = typeof record.leaveEndDate === 'string' \r\n          ? record.leaveEndDate \r\n          : record.leaveEndDate.toString();\r\n        endDate = endDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n      }\r\n      \r\n      // \r\n      if (!startDate || !endDate) {\r\n        //console.log(`: startDate=${startDate}, endDate=${endDate}`);\r\n        continue;\r\n      }\r\n      \r\n      //console.log(`: ${targetDate}  ${startDate}  ${endDate} `);\r\n      \r\n      // \r\n      if (startDate <= targetDate && targetDate <= endDate) {\r\n        const leaveTypeName = getLeaveTypeName(record.leaveType);\r\n        //console.log(` : ${targetDate} - ${leaveTypeName}`);\r\n        matchedRecords.push({\r\n          ...record,\r\n          leaveTypeName: leaveTypeName,\r\n          documentId: record.leaveRequestID || record.id || 'Unknown'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error, record);\r\n      continue;\r\n    }\r\n  }\r\n  \r\n  //console.log(':', matchedRecords);\r\n  return matchedRecords;\r\n}\r\n\r\n// // \r\n// function getLeaveTypesForDate(dateStr) {\r\n//   //console.log(' getLeaveTypesForDate :', dateStr, ':', leaveRecords.value.length);\r\n  \r\n//   let targetDate = null;\r\n  \r\n//   // \r\n//   if (dateStr.includes('/')) {\r\n//     // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n//     const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n//     if (fullDateMatch) {\r\n//       targetDate = fullDateMatch[1]; // : \"2025/07/02\"\r\n//     } else {\r\n//       // 2: \"07/31 ()\" - \r\n//       const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n//       if (shortDateMatch) {\r\n//         const [year] = attendanceDate.value.split('-');\r\n//         targetDate = `${year}/${shortDateMatch[1]}`; // : \"2025/07/31\"\r\n//       }\r\n//     }\r\n//   }\r\n  \r\n//   if (!targetDate) {\r\n//     //console.log(':', dateStr);\r\n//     return [];\r\n//   }\r\n  \r\n//   //console.log(':', targetDate);\r\n  \r\n//   const leaveTypes = [];\r\n  \r\n//   // \r\n//   for (const record of leaveRecords.value) {\r\n//     try {\r\n//       // \r\n//       let startDate = null;\r\n//       let endDate = null;\r\n      \r\n//       if (record.leaveStartDate) {\r\n//         //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n//         const startDateStr = typeof record.leaveStartDate === 'string' \r\n//           ? record.leaveStartDate \r\n//           : record.leaveStartDate.toString();\r\n//         startDate = startDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n//       }\r\n      \r\n//       if (record.leaveEndDate) {\r\n//         //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n//         const endDateStr = typeof record.leaveEndDate === 'string' \r\n//           ? record.leaveEndDate \r\n//           : record.leaveEndDate.toString();\r\n//         endDate = endDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n//       }\r\n      \r\n//       // \r\n//       if (!startDate || !endDate) {\r\n//         //console.log(`: startDate=${startDate}, endDate=${endDate}`);\r\n//         continue;\r\n//       }\r\n      \r\n//       //console.log(`: ${targetDate}  ${startDate}  ${endDate} `);\r\n      \r\n//       // \r\n//       if (startDate <= targetDate && targetDate <= endDate) {\r\n//         const leaveTypeName = getLeaveTypeName(record.leaveType);\r\n//         //console.log(` : ${targetDate} - ${leaveTypeName}`);\r\n//         leaveTypes.push(leaveTypeName);\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(':', error, record);\r\n//       continue;\r\n//     }\r\n//   }\r\n  \r\n//   //console.log(':', leaveTypes);\r\n//   return leaveTypes;\r\n// }\r\n\r\n// \r\nfunction getLeaveTypeForDate(dateStr) {\r\n  //console.log(' getLeaveTypeForDate :', dateStr, ':', leaveRecords.value.length);\r\n  \r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1]; // : \"2025/07/02\"\r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}/${shortDateMatch[1]}`; // : \"2025/07/31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (!targetDate) {\r\n    //console.log(':', dateStr);\r\n    return null;\r\n  }\r\n  \r\n  //console.log(':', targetDate);\r\n  \r\n  // \r\n  for (const record of leaveRecords.value) {\r\n    try {\r\n      // \r\n      let startDate = null;\r\n      let endDate = null;\r\n      \r\n      if (record.leaveStartDate) {\r\n        //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n        const startDateStr = typeof record.leaveStartDate === 'string' \r\n          ? record.leaveStartDate \r\n          : record.leaveStartDate.toString();\r\n        startDate = startDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n      }\r\n      \r\n      if (record.leaveEndDate) {\r\n        //  ISO  \"2025-07-02T00:00:00\"  \"2025-07-02\"\r\n        const endDateStr = typeof record.leaveEndDate === 'string' \r\n          ? record.leaveEndDate \r\n          : record.leaveEndDate.toString();\r\n        endDate = endDateStr.substring(0, 10).replace(/-/g, '/'); // \"2025-07-02\" -> \"2025/07/02\"\r\n      }\r\n      \r\n      // \r\n      if (!startDate || !endDate) {\r\n        //console.log(`: startDate=${startDate}, endDate=${endDate}`);\r\n        continue;\r\n      }\r\n      \r\n      //console.log(`: ${targetDate}  ${startDate}  ${endDate} `);\r\n      \r\n      // \r\n      if (startDate <= targetDate && targetDate <= endDate) {\r\n        //console.log(` : ${targetDate} - ${record.leaveType}`);\r\n        return getLeaveTypeName(record.leaveType);\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error, record);\r\n      continue;\r\n    }\r\n  }\r\n  \r\n  //console.log(':', targetDate);\r\n  return null;\r\n}\r\n\r\n// \r\nfunction getLeaveTypeName(leaveType) {\r\n  const leaveTypeNames = {\r\n    'AnnualLeave': '',\r\n    'SickLeave': '',\r\n    'PersonalLeave': '',\r\n    'MaternityLeave': '',\r\n    'PaternityLeave': '',\r\n    'FamilyCareLeave': '',\r\n    'MenstrualLeave': '',\r\n    'BereavementLeave': '',\r\n    'MarriageLeave': '',\r\n    'OfficialLeave': '',\r\n    'CompensatoryLeave': '',\r\n    'PregnancyCheckupLeave': '',\r\n    'VaccinationLeave': '',\r\n    'InjuryLeave': '',\r\n    'JobSeekingLeave': ''\r\n  };\r\n  return leaveTypeNames[leaveType] || leaveType;\r\n}\r\n\r\n// \r\nasync function fetchOvertimeRecords() {\r\n  //console.log('[DEBUG] fetchOvertimeRecords ')\r\n  \r\n  try {\r\n    //  attendanceDate \r\n    if (!attendanceDate.value) {\r\n      //console.log('[DEBUG] attendanceDate ')\r\n      overtimeRecords.value = []\r\n      return\r\n    }\r\n    \r\n    //console.log('[DEBUG] attendanceDate:', attendanceDate.value)\r\n    //console.log('[DEBUG]  2025-06:', attendanceDate.value)\r\n    \r\n    // \r\n    if (!props.selectedUser) {\r\n      //console.log('[DEBUG] ')\r\n      overtimeRecords.value = []\r\n      return\r\n    }\r\n    \r\n    //console.log('[DEBUG] selectedUser:', props.selectedUser)\r\n    //console.log('[DEBUG] personalMode:', props.personalMode)\r\n    \r\n    const [year, month] = attendanceDate.value.split('-')\r\n    const startDate = `${year}-${month}-01`\r\n    const lastDay = new Date(year, month, 0).getDate()\r\n    const endDate = `${year}-${month}-${lastDay.toString().padStart(2, '0')}`\r\n    \r\n    // ID\r\n    const userId = props.personalMode ? props.selectedUser.userId : props.selectedUser.emploY_ID\r\n    \r\n    const params = {\r\n      userId: userId,\r\n      page: 1,\r\n      pageSize: 1000,\r\n      startDate: startDate,\r\n      endDate: endDate\r\n    }\r\n    \r\n    //console.log('[DEBUG] :', params)\r\n    const response = await FinanceService.getPersonalOvertimeRecords(params)\r\n    //console.log('[DEBUG] API :', response)\r\n    //console.log('[DEBUG] response.data:', response.data)\r\n    \r\n    if (response.data && response.data.success) {\r\n      overtimeRecords.value = response.data.records || []\r\n      //console.log('[DEBUG]  - :', overtimeRecords.value.length)\r\n      //console.log('[DEBUG] :', overtimeRecords.value)\r\n    } else {\r\n      overtimeRecords.value = []\r\n      //console.log('[DEBUG]  - success:', response.data?.success, 'message:', response.data?.message)\r\n      //console.log('[DEBUG]  response.data:', response.data)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    overtimeRecords.value = []\r\n  }\r\n}\r\n\r\n\r\n// \r\nasync function fetchLeaveRecords() {\r\n  try {\r\n    //  attendanceDate \r\n    if (!attendanceDate.value) {\r\n      //console.log('attendanceDate ')\r\n      leaveRecords.value = []\r\n      return\r\n    }\r\n    \r\n    const [year, month] = attendanceDate.value.split('-')\r\n    const startDate = `${year}-${month}-01`\r\n    const lastDay = new Date(year, month, 0).getDate()\r\n    const endDate = `${year}-${month}-${lastDay.toString().padStart(2, '0')}`\r\n    \r\n    // \r\n    if (!props.selectedUser) {\r\n      //console.log('[AttendanceRecord] ')\r\n      leaveRecords.value = []\r\n      return\r\n    }\r\n    \r\n    // ID\r\n    const userId = props.personalMode ? props.selectedUser.userId : props.selectedUser.emploY_ID\r\n    \r\n    const params = {\r\n      userId: userId,\r\n      page: 1,\r\n      pageSize: 1000,\r\n      startDate: startDate,\r\n      endDate: endDate,\r\n      leaveType: '' // \r\n    }\r\n    \r\n    //console.log('[AttendanceRecord] :', params)\r\n    const response = await FinanceService.getPersonalLeaveRecords(params)\r\n    //console.log('[AttendanceRecord] API:', response.data)\r\n    \r\n    if (response.data && response.data.success) {\r\n      leaveRecords.value = response.data.records || []\r\n      //console.log('[AttendanceRecord] :', leaveRecords.value)\r\n    } else if (response.data && Array.isArray(response.data)) {\r\n      // \r\n      leaveRecords.value = response.data\r\n      //console.log('[AttendanceRecord] ():', leaveRecords.value)\r\n    } else {\r\n      leaveRecords.value = []\r\n      //console.log('[AttendanceRecord] :', response.data?.message || '')\r\n    }\r\n  } catch (error) {\r\n    console.error('[AttendanceRecord] :', error)\r\n    leaveRecords.value = []\r\n  }\r\n}\r\n\r\n// \r\nasync function getTyphoonLeave() {\r\n  try {\r\n    //  attendanceDate \r\n    if (!attendanceDate.value) {\r\n      //console.log('[AttendanceRecord] attendanceDate ')\r\n      typhoonLeaveRecords.value = []\r\n      return\r\n    }\r\n    \r\n    const [year, month] = attendanceDate.value.split('-')\r\n    const startDate = `${year}-${month}-01`\r\n    const lastDay = new Date(year, month, 0).getDate()\r\n    const endDate = `${year}-${month}-${lastDay.toString().padStart(2, '0')}`\r\n    \r\n    // ID\r\n    const params = {\r\n      startDate: startDate,\r\n      endDate: endDate\r\n    }\r\n    \r\n    //console.log('[AttendanceRecord]  ():', params)\r\n    const response = await FinanceService.getTyphoonLeaveRecords(params)\r\n    \r\n    if (response.data && response.data.success) {\r\n      typhoonLeaveRecords.value = response.data.data || []\r\n      //console.log('[AttendanceRecord]  ():', typhoonLeaveRecords.value)\r\n    } else {\r\n      typhoonLeaveRecords.value = []\r\n      //console.log('[AttendanceRecord] :', response.data?.message || '')\r\n    }\r\n  } catch (error) {\r\n    console.error('[AttendanceRecord] :', error)\r\n    typhoonLeaveRecords.value = []\r\n  }\r\n}\r\n\r\n// \r\nfunction getTyphoonLeaveForDate(dateStr) {\r\n  //console.log('[AttendanceRecord] getTyphoonLeaveForDate :', dateStr);\r\n  //console.log('[AttendanceRecord] :', typhoonLeaveRecords.value);\r\n  \r\n  if (!typhoonLeaveRecords.value || typhoonLeaveRecords.value.length === 0) {\r\n    //console.log('[AttendanceRecord] ');\r\n    return null;\r\n  }\r\n  \r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1].replace(/\\//g, '-'); //  YYYY-MM-DD \r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}-${shortDateMatch[1].replace('/', '-')}`; // : \"2025-07-31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  //console.log('[AttendanceRecord] :', targetDate);\r\n  \r\n  if (!targetDate) return null;\r\n  \r\n  // \r\n  for (const record of typhoonLeaveRecords.value) {\r\n    //console.log('[AttendanceRecord] :', record);\r\n    \r\n    // \r\n    let typhoonDate = null;\r\n    if (record.leaveDate) {\r\n      typhoonDate = record.leaveDate.substring(0, 10);\r\n    } else if (record.date) {\r\n      typhoonDate = record.date.substring(0, 10);\r\n    } else if (record.Date) {\r\n      typhoonDate = record.Date.substring(0, 10);\r\n    } else if (record.typhoonDate) {\r\n      typhoonDate = record.typhoonDate.substring(0, 10);\r\n    }\r\n    \r\n    // //console.log('[AttendanceRecord] :', typhoonDate, ':', targetDate);\r\n    \r\n    if (typhoonDate === targetDate) {\r\n      // //console.log(`[AttendanceRecord] : ${targetDate}`);\r\n      return '';\r\n    }\r\n  }\r\n  \r\n  // //console.log('[AttendanceRecord] ');\r\n  return null;\r\n}\r\n\r\n// \r\nasync function fetchCardCorrectionRecords() {\r\n  try {\r\n    //  attendanceDate \r\n    if (!attendanceDate.value) {\r\n      //console.log('[AttendanceRecord] attendanceDate ')\r\n      cardCorrectionRecords.value = []\r\n      return\r\n    }\r\n    \r\n    // \r\n    if (!props.selectedUser) {\r\n      //console.log('[AttendanceRecord] ')\r\n      cardCorrectionRecords.value = []\r\n      return\r\n    }\r\n    \r\n    // ID\r\n    const userId = props.personalMode ? props.selectedUser.userId : props.selectedUser.emploY_ID\r\n    \r\n    //console.log('[AttendanceRecord] :', { empId: userId, date: attendanceDate.value })\r\n    const response = await FinanceService.getCardCorrectionRecords(userId, attendanceDate.value)\r\n    \r\n    // \r\n    if (response.data && Array.isArray(response.data)) {\r\n      cardCorrectionRecords.value = response.data\r\n      //console.log('[AttendanceRecord] :', cardCorrectionRecords.value)\r\n    } else {\r\n      cardCorrectionRecords.value = []\r\n      //console.log('[AttendanceRecord] :', response.data)\r\n    }\r\n  } catch (error) {\r\n    console.error('[AttendanceRecord] :', error)\r\n    cardCorrectionRecords.value = []\r\n  }\r\n}\r\n\r\n// \r\nfunction getCardCorrectionForDate(dateStr) {\r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1].replace(/\\//g, '-'); //  YYYY-MM-DD \r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}-${shortDateMatch[1].replace('/', '-')}`; // : \"2025-07-31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (!targetDate) return null;\r\n  \r\n  //  NewStatus \r\n  for (const record of cardCorrectionRecords.value) {\r\n    let newStatusDate = null;\r\n    \r\n    if (record.newStatus) {\r\n      //  NewStatus  (: \"2025/6/20  07:30:00\")\r\n      newStatusDate = parseNewStatusDate(record.newStatus);\r\n    }\r\n    \r\n    if (newStatusDate === targetDate) {\r\n      //console.log(`: ${targetDate} - DocumentID: ${record.documentId}, CorrectionType: ${record.correctionType}, NewStatus: ${record.newStatus}`);\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n\r\n// \r\nfunction getCardCorrectionRecordsForDate(dateStr) {\r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1].replace(/\\//g, '-'); //  YYYY-MM-DD \r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}-${shortDateMatch[1].replace('/', '-')}`; // : \"2025-07-31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (!targetDate) return [];\r\n  \r\n  // \r\n  const matchingRecords = [];\r\n  \r\n  for (const record of cardCorrectionRecords.value) {\r\n    let newStatusDate = null;\r\n    \r\n    if (record.newStatus) {\r\n      //  NewStatus  (: \"2025/6/20  07:30:00\")\r\n      newStatusDate = parseNewStatusDate(record.newStatus);\r\n    }\r\n    \r\n    if (newStatusDate === targetDate) {\r\n      matchingRecords.push(record);\r\n    }\r\n  }\r\n  \r\n  //  ()\r\n  matchingRecords.sort((a, b) => {\r\n    const timeA = a.newStatus || '';\r\n    const timeB = b.newStatus || '';\r\n    return timeA.localeCompare(timeB);\r\n  });\r\n  \r\n  return matchingRecords;\r\n}\r\n\r\n// \r\nfunction getCorrectionDisplayText(record) {\r\n  if (record.correctionType === 'ClockIn') {\r\n    return '()';\r\n  } else if (record.correctionType === 'ClockOut') {\r\n    return '()';\r\n  } else {\r\n    return record.correctionType ? `(${record.correctionType})` : '';\r\n  }\r\n}\r\n\r\n//  NewStatus \r\nfunction parseNewStatusDate(newStatusString) {\r\n  if (!newStatusString) return null;\r\n  \r\n  try {\r\n    // NewStatus : \"2025/6/20  07:30:00\", \"2025/8/20  04:57:26\", \"2025/8/5  11:40:32\"\r\n    //  (YYYY/M/D  YYYY/MM/DD)\r\n    const dateMatch = newStatusString.match(/(\\d{4}\\/\\d{1,2}\\/\\d{1,2})/);\r\n    \r\n    if (dateMatch) {\r\n      const datePart = dateMatch[1]; // : \"2025/6/20\"\r\n      \r\n      //  \"/\"  \"-\" \r\n      const parts = datePart.split('/');\r\n      if (parts.length === 3) {\r\n        const year = parts[0];\r\n        const month = parts[1].padStart(2, '0');\r\n        const day = parts[2].padStart(2, '0');\r\n        \r\n        const formattedDate = `${year}-${month}-${day}`; // : \"2025-06-20\"\r\n        //console.log(` NewStatus : \"${newStatusString}\" -> \"${formattedDate}\"`);\r\n        return formattedDate;\r\n      }\r\n    }\r\n    \r\n    console.warn(` NewStatus : \"${newStatusString}\"`);\r\n    return null;\r\n  } catch (error) {\r\n    console.error(` NewStatus : \"${newStatusString}\"`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Dialog \r\n// \r\nconst openLeaveDetailByRecord = (leaveRecord) => {\r\n  console.log('openLeaveDetailByRecord :', leaveRecord);\r\n  \r\n  const documentId = leaveRecord.documentId;\r\n  console.log('ID:', documentId);\r\n  \r\n  if (documentId && documentId !== 'Unknown') {\r\n    selectedDoc.value = { documentID: documentId, documentTypeID: 'LR' }; // LR: \r\n    isDialogVisible.value = true;\r\n    console.log('ID:', documentId);\r\n  } else {\r\n    console.log('ID');\r\n  }\r\n};\r\n\r\n// // \r\n// const openLeaveDetail = (dateStr) => {\r\n//   //console.log(':', dateStr);\r\n//   //console.log(':', leaveRecords.value);\r\n  \r\n//   const documentId = getLeaveDocumentIdForDate(dateStr);\r\n//   //console.log('ID:', documentId);\r\n//   if (documentId) {\r\n//     selectedDoc.value = { documentID: documentId, documentTypeID: 'LR' }; // LR: \r\n//     isDialogVisible.value = true;\r\n//     //console.log('DialogtrueselectedDoc:', selectedDoc.value);\r\n//   } else {\r\n//     //console.log('ID');\r\n//     // ID\r\n//     if (leaveRecords.value.length > 0 && leaveRecords.value[0].leaveRequestFormID && leaveRecords.value[0].leaveRequestFormID.length > 0) {\r\n//       const testDocId = leaveRecords.value[0].leaveRequestFormID[0];\r\n//       //console.log('ID:', testDocId);\r\n//       selectedDoc.value = { documentID: testDocId, documentTypeID: 'LR' };\r\n//       isDialogVisible.value = true;\r\n//     }\r\n//   }\r\n// };\r\n\r\n// \r\nconst openOvertimeDetail = (dateStr) => {\r\n  //console.log(':', dateStr);\r\n  //console.log(':', overtimeRecords.value);\r\n  \r\n  const documentId = getOvertimeDocumentIdForDate(dateStr);\r\n  //console.log('ID:', documentId);\r\n  \r\n  if (documentId) {\r\n    selectedDoc.value = { documentID: documentId, documentTypeID: 'OR' }; // OR: \r\n    isDialogVisible.value = true;\r\n    //console.log('DialogtrueselectedDoc:', selectedDoc.value);\r\n  } else {\r\n    //console.log('ID');\r\n    //  ActualOvertimeDate \r\n    const overtimeRecord = getOvertimeRecordForDate(dateStr);\r\n    if (overtimeRecord && overtimeRecord.overtimeRequestId) {\r\n      selectedDoc.value = { documentID: overtimeRecord.overtimeRequestId, documentTypeID: 'OR' };\r\n      isDialogVisible.value = true;\r\n      //console.log(' ActualOvertimeDate ID:', overtimeRecord.overtimeRequestId);\r\n    } else if (overtimeRecords.value.length > 0) {\r\n      // ID\r\n      const firstRecord = overtimeRecords.value[0];\r\n      if (firstRecord.overtimeRequestId) {\r\n        selectedDoc.value = { documentID: firstRecord.overtimeRequestId, documentTypeID: 'OR' };\r\n        isDialogVisible.value = true;\r\n        //console.log('ID:', firstRecord.overtimeRequestId);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// ID\r\n// eslint-disable-next-line no-unused-vars\r\nconst getLeaveDocumentIdForDate = (dateStr) => {\r\n  console.log('[AttendanceRecord] getLeaveDocumentIdForDate :', dateStr);\r\n  console.log('[AttendanceRecord]  leaveRecords:', leaveRecords.value);\r\n  \r\n  if (!dateStr) {\r\n    console.log('[AttendanceRecord] ');\r\n    return null;\r\n  }\r\n  \r\n  //  getLeaveRecordsForDate \r\n  const records = getLeaveRecordsForDate(dateStr);\r\n  if (records.length > 0) {\r\n    return records[0].documentId; //  documentId\r\n  }\r\n  \r\n  console.log('[AttendanceRecord] ');\r\n  return null;\r\n};\r\n\r\n//  ActualOvertimeDate \r\nconst getOvertimeRecordForDate = (dateStr) => {\r\n  let targetDate = null;\r\n  \r\n  // \r\n  if (dateStr.includes('/')) {\r\n    // 1: \"2025/07/02 ()\"  \"07/31 ()\"\r\n    const fullDateMatch = dateStr.match(/(\\d{4}\\/\\d{2}\\/\\d{2})/);\r\n    if (fullDateMatch) {\r\n      targetDate = fullDateMatch[1]; // : \"2025/07/02\"\r\n    } else {\r\n      // 2: \"07/31 ()\" - \r\n      const shortDateMatch = dateStr.match(/(\\d{2}\\/\\d{2})/);\r\n      if (shortDateMatch) {\r\n        const [year] = attendanceDate.value.split('-');\r\n        targetDate = `${year}/${shortDateMatch[1]}`; // : \"2025/07/31\"\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (!targetDate) return null;\r\n  \r\n  //  ActualOvertimeDate\r\n  for (const record of overtimeRecords.value) {\r\n    if (record.actualOvertimeDate) {\r\n      const actualOvertimeDate = record.actualOvertimeDate.substring(0, 10).replace(/-/g, '/');\r\n      if (actualOvertimeDate === targetDate) {\r\n        //console.log(` ActualOvertimeDate : ${targetDate}`, record);\r\n        return record;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return null;\r\n};\r\n\r\n// ID\r\nconst getOvertimeDocumentIdForDate = (dateStr) => {\r\n  //console.log('[AttendanceRecord] getOvertimeDocumentIdForDate :', dateStr);\r\n  //console.log('[AttendanceRecord]  overtimeRecords:', overtimeRecords.value);\r\n  \r\n  //  ActualOvertimeDate \r\n  const overtimeRecord = getOvertimeRecordForDate(dateStr);\r\n  if (overtimeRecord && overtimeRecord.overtimeRequestId) {\r\n    //console.log('[AttendanceRecord] DocumentID:', overtimeRecord.overtimeRequestId);\r\n    return overtimeRecord.overtimeRequestId;\r\n  }\r\n  \r\n  //console.log('[AttendanceRecord] DocumentID');\r\n  return null;\r\n};\r\n\r\n// \r\nconst openCardCorrectionDetail = (dateStr, specificDocumentId = null) => {\r\n  //console.log('[AttendanceRecord] :', dateStr, 'ID:', specificDocumentId);\r\n  //console.log('[AttendanceRecord] :', cardCorrectionRecords.value);\r\n  \r\n  let documentId = specificDocumentId;\r\n  \r\n  // ID\r\n  if (!documentId) {\r\n    documentId = getCardCorrectionDocumentIdForDate(dateStr);\r\n  }\r\n  \r\n  //console.log('[AttendanceRecord] ID:', documentId);\r\n  \r\n  if (documentId) {\r\n    selectedDoc.value = { documentID: documentId, documentTypeID: 'CR' }; // CR: \r\n    isDialogVisible.value = true;\r\n    //console.log('[AttendanceRecord] DialogtrueselectedDoc:', selectedDoc.value);\r\n  } else {\r\n    //console.log('[AttendanceRecord] ID');\r\n    // ID\r\n    const recordsForDate = getCardCorrectionRecordsForDate(dateStr);\r\n    if (recordsForDate.length > 0 && recordsForDate[0].documentId) {\r\n      const fallbackDocId = recordsForDate[0].documentId;\r\n      //console.log('[AttendanceRecord] ID:', fallbackDocId);\r\n      selectedDoc.value = { documentID: fallbackDocId, documentTypeID: 'CR' };\r\n      isDialogVisible.value = true;\r\n    }\r\n  }\r\n};\r\n\r\n// \r\nconst openTyphoonLeaveDetail = () => {\r\n  //console.log('[AttendanceRecord] ');\r\n  //console.log('[AttendanceRecord] :', typhoonLeaveRecords.value);\r\n  //console.log('[AttendanceRecord] :', attendanceDate.value);\r\n  \r\n  // \r\n  isTyphoonLeaveDialogVisible.value = true;\r\n};\r\n\r\n//  (YYYY-MM-DD)\r\nconst formatTyphoonLeaveDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return dateString;\r\n    \r\n    const year = date.getFullYear();\r\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n    const day = date.getDate().toString().padStart(2, '0');\r\n    \r\n    return `${year}-${month}-${day}`;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return dateString;\r\n  }\r\n};\r\n\r\n//  (YYYY-MM-DD HH:mm:ss)\r\nconst formatDateTime = (dateTimeString) => {\r\n  if (!dateTimeString) return '';\r\n  try {\r\n    const date = new Date(dateTimeString);\r\n    if (isNaN(date.getTime())) return dateTimeString;\r\n    \r\n    const year = date.getFullYear();\r\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n    const day = date.getDate().toString().padStart(2, '0');\r\n    const hours = date.getHours().toString().padStart(2, '0');\r\n    const minutes = date.getMinutes().toString().padStart(2, '0');\r\n    const seconds = date.getSeconds().toString().padStart(2, '0');\r\n    \r\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return dateTimeString;\r\n  }\r\n};\r\n\r\n// ID\r\nconst getCardCorrectionDocumentIdForDate = () => {\r\n  //console.log('[AttendanceRecord] getCardCorrectionDocumentIdForDate :', dateStr);\r\n  //console.log('[AttendanceRecord]  cardCorrectionRecords:', cardCorrectionRecords.value);\r\n  \r\n  // DocumentID\r\n  if (cardCorrectionRecords.value.length > 0) {\r\n    const firstRecord = cardCorrectionRecords.value[0];\r\n    //console.log('[AttendanceRecord] :', firstRecord);\r\n    \r\n    // \r\n    if (firstRecord.documentId) {\r\n      const documentId = firstRecord.documentId;\r\n      //console.log('[AttendanceRecord] DocumentID:', documentId);\r\n      return documentId;\r\n    }\r\n  }\r\n  \r\n  //console.log('[AttendanceRecord] DocumentID');\r\n  return null;\r\n};\r\n\r\n//  (Detail_Related_WF_Dialog )\r\nconst refreshList = () => {\r\n  // \r\n  fetchLeaveRecords();\r\n  fetchOvertimeRecords();\r\n  getTyphoonLeave();\r\n  fetchCardCorrectionRecords();\r\n};\r\n\r\n</script>\r\n<style scoped>\r\n  \r\n  .stats-card {\r\n    background-color: #f9f9f9; /*  */\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 8px;\r\n    width:11rem;\r\n    padding: 1rem;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  }\r\n  \r\n  .stats-title {\r\n    margin-bottom: 1rem;\r\n    font-weight: bold;\r\n    font-size: 1.2rem;\r\n    text-align: center;\r\n    color: #333;\r\n  }\r\n  \r\n  .stats-section {\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  .section-title {\r\n    font-size: 0.8rem;\r\n    margin-bottom: 0.5rem;\r\n    color: #555;\r\n    border-bottom: 1px solid #ddd;\r\n    padding-bottom: 0.3rem;\r\n  }\r\n  \r\n  .stats-summary {\r\n    font-weight: bold;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .stats-list {\r\n    list-style-type: none;\r\n    padding-left: 0;\r\n    margin: 0;\r\n  }\r\n  \r\n  .stats-item {\r\n    padding: 0.3rem 0;\r\n    border-bottom: 1px dashed #ddd;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .stats-item:last-child {\r\n    border-bottom: none;\r\n  }\r\n  \r\n  .date {\r\n    font-weight: 500;\r\n    color: #333;\r\n  }\r\n  \r\n  .info {\r\n    color: #666;\r\n  }\r\n  \r\n  .extra-info {\r\n    margin-top: 0.5rem;\r\n    font-style: italic;\r\n    color: #a94442; /*  danger  */\r\n  }\r\n    \r\n  .highlight {\r\n    font-size: 0.8em; /*  */\r\n    font-weight: bold; /*  */\r\n    color: #007bff; /*  */\r\n  }\r\n  .attendance-date {\r\n    font-size: 0.8em; /*  */\r\n    font-weight: bold; /*  */\r\n    color: #407539; /*  */\r\n    \r\n  }\r\n  .table-title{\r\n    font-size: 1em; /*  */\r\n    font-weight: bold; /*  */\r\n    color: #000000; /*  */\r\n  }\r\n  .stats-total {\r\n    border-top: 1px solid #ddd;\r\n    padding-top: 0.5rem;\r\n    font-size: 0.8rem;\r\n    font-weight: bold;\r\n    text-align: center;\r\n  }\r\n\r\n  .parent {\r\n    display: grid;\r\n    grid-template-columns: auto 50%; /*  50% */\r\n    gap: 0;\r\n  }\r\n\r\n  /* hover */\r\n  .clickable-tag {\r\n    transition: all 0.3s ease;\r\n    position: relative;\r\n  }\r\n\r\n  .clickable-tag:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n    opacity: 0.9;\r\n  }\r\n\r\n  /* hover */\r\n  .custom-tag-success.clickable-tag:hover {\r\n    filter: brightness(1.1);\r\n  }\r\n\r\n  .custom-tag-warning.clickable-tag:hover {\r\n    filter: brightness(1.1);\r\n  }\r\n\r\n  /* hover */\r\n  .clickable-tag[style*=\"#FFAD86\"]:hover {\r\n    background-color: #FF9966 !important;\r\n    border-color: #FF9966 !important;\r\n  }\r\n\r\n  /* hover */\r\n  .clickable-tag[style*=\"#5CADAD\"]:hover {\r\n    background-color: #4A9999 !important;\r\n    border-color: #4A9999 !important;\r\n  }\r\n\r\n  </style>\r\n","import script from \"./AttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AttendanceRecord.vue?vue&type=style&index=0&id=355de4d4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-355de4d4\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"marquee-container\">\r\n      <!--  X  -->\r\n      <!-- <el-icon class=\"close-button\" @click=\"handleClose\"><CloseBold /></el-icon> -->\r\n      <div class=\"marquee-content\">\r\n        <span\r\n          v-for=\"(msg, index) in messages\"\r\n          :key=\"index\"\r\n          class=\"marquee-item\"\r\n          @click=\"handleMessageClick(msg)\"\r\n        >\r\n          {{ msg.text }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineEmits } from 'vue'\r\nconst emit = defineEmits(['closeMarquee', 'messageClick'])\r\n\r\n// Demo \r\nconst messages = ref([\r\n  { \r\n    text: 'Mac Address(2025/04/29)', \r\n    details: ''\r\n  },\r\n])\r\n\r\n// \r\nfunction handleMessageClick(msg) {\r\n  emit('messageClick', msg)\r\n}\r\n\r\n//  X \r\n// function handleClose() {\r\n//   emit('closeMarquee', true)\r\n// }\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n.marquee-container {\r\n  position: relative;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  width: 100%;\r\n  height: 2.2rem;\r\n  background-color: #f5f5f5;\r\n  border: 1px solid #ddd;\r\n  padding: 5px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* X  */\r\n.close-button {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 10;\r\n  font-size: 1rem;\r\n}\r\n\r\n/*  */\r\n.marquee-content {\r\n  display: inline-block;\r\n  padding-left: 100%;\r\n  padding-top: 0.8rem;\r\n  animation: marquee 20s linear infinite;\r\n}\r\n\r\n/*  */\r\n@keyframes marquee {\r\n  from {\r\n    transform: translateX(0);\r\n  }\r\n  to {\r\n    transform: translateX(-100%);\r\n  }\r\n}\r\n\r\n/*  */\r\n.marquee-item {\r\n  display: inline-block;\r\n  margin-right: 50px;\r\n  font-size: 20px;\r\n  font-family: 'Microsoft JhengHei', sans-serif !important;\r\n  color: blue !important;\r\n}\r\n\r\n/*  */\r\n.marquee-container:hover .marquee-content {\r\n  animation-play-state: paused;\r\n}\r\n\r\n\r\n/* #region media screen*/\r\n\r\n@media (max-width: 2560px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1920px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1536px) {\r\n  \r\n  .toggle-side,\r\n  .marquee-toggle {\r\n    width: 1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n\r\n  .toggle-side:hover,\r\n  .marquee-toggle:hover {\r\n    width:  1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1366px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1280px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1180px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 820px) {\r\n\r\n}\r\n\r\n@media (max-width: 700px) {\r\n  .marquee-container {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 1.2rem;\r\n    padding: 0;        /*  padding */\r\n  }\r\n  .marquee-content {\r\n    padding-left: 100%;\r\n    padding-top: 0;    /*  top padding */\r\n  }\r\n  .marquee-item {\r\n    font-size: 0.8rem;\r\n    margin-right: 50px;\r\n  }\r\n}\r\n@media (max-width: 600px) {\r\n  .marquee-container {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 1.2rem;\r\n    padding: 0;       \r\n  }\r\n  .marquee-content {\r\n    padding-left: 100%;\r\n    padding-top: 0;    \r\n  }\r\n  .marquee-item {\r\n    font-size: 0.8rem;\r\n    margin-right: 50px;\r\n  }\r\n}\r\n\r\n@media (max-width: 430px) {\r\n  .marquee-container {\r\n    height: 0.8rem;\r\n    padding: 0;\r\n    line-height: 0.8rem;\r\n    overflow: hidden;\r\n    /*  display:flex inline  */\r\n  }\r\n  .marquee-content,\r\n  .marquee-item {\r\n    display: inline-block;\r\n    vertical-align: middle;  /*  baseline  middle */\r\n  }\r\n  .marquee-content {\r\n    padding-left: 100%;\r\n    padding-top: 0;\r\n  }\r\n  .marquee-item {\r\n    font-size: 0.6rem;\r\n    margin-right: 50px;\r\n  }\r\n}\r\n\r\n@media (max-width: 375px) {\r\n\r\n}\r\n\r\n/* #endregion */\r\n\r\n</style>","import script from \"./custom-marquee.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./custom-marquee.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./custom-marquee.vue?vue&type=style&index=0&id=4bce2790&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4bce2790\"]])\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setEventsAndStatisticsAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'EventsAndStatistics'; \r\n\r\nexport default {\r\n\r\n  //#region mac-address API\r\n\r\n  getMacAddress() {\r\n    return api().get(`${controllerPath}/mac-addresses`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  getMacAddressWithEmpId(empId) {\r\n    return api().get(`${controllerPath}/mac-addresses-WithEmpId/${empId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  GetMacAddressesWithListDpt(subDepartments) {\r\n    const params = new URLSearchParams();\r\n    subDepartments.forEach(dpt => params.append('dpt', dpt));\r\n    return api().get(`${controllerPath}/mac-addresses-WithListDpt`, {\r\n      params: params,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  //\r\n  GetMacAddressesWithDpt(dptId) {\r\n\r\n    return api().get(`${controllerPath}/mac-addresses-WithListDpt`, {\r\n      params: { dpt: dptId },\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  postMacAddress(data) {\r\n    return api().post(`${controllerPath}/mac-addresses`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  updateMacAddress(id, data) {\r\n    return api().put(`${controllerPath}/mac-addresses/${id}`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  deleteMacAddress(id) {\r\n    return api().delete(`${controllerPath}/mac-addresses/${id}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  updateMacFormRegistration(nanoId, payload) {\r\n    // console.log(\"nanoId:\", nanoId, \"payload:\", payload)\r\n    return api().patch(`${controllerPath}/mac-addresses/${nanoId}/registration`, payload, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  updateMacFormDisposal(nanoId, payload) {\r\n    // console.log(\"nanoId:\", nanoId, \"payload:\", payload)\r\n    return api().patch(`${controllerPath}/mac-addresses/${nanoId}/disposal`, payload, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n\r\n  //#endregion\r\n\r\n  //#region computer-inventory API\r\n  \r\n  //  computer inventory \r\n  getComputerInventorys() {\r\n    return api().get(`${controllerPath}/computer-inventory`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  \r\n  //  (dptName)  (empName) \r\n  getComputerInventoryWithDptNameAndEmpName(dptName, empName) {\r\n    return api().get(`${controllerPath}/computer-inventory-WithDptNameAndEmpName`, {\r\n      params: { dptName, empName },\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n\r\n  //  (dptName)  (empName) \r\n  getComputerInventoryWithDptFilter(dptId) {\r\n    return api().get(`${controllerPath}/computer-inventory-filter/${dptId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  \r\n\r\n  //  computer inventory \r\n  getComputerInventoryWithListDpt(userId, subDepartments) {\r\n    return api().get(\r\n      `${controllerPath}/computer-inventory-WithListDpt`,\r\n      {\r\n        params: {\r\n          userId,\r\n          dpt: subDepartments    // axios  array  dpt=xxx\r\n        },\r\n        //  querystring ?dpt=1&dpt=2  dpt[0]=1\r\n        paramsSerializer: params => {\r\n          const usp = new URLSearchParams();\r\n          usp.append('userId', params.userId);\r\n          params.dpt.forEach(d => usp.append('dpts', d));\r\n          return usp.toString();\r\n        },\r\n        headers: { 'Content-Type': 'application/json' }\r\n      }\r\n    );\r\n  },\r\n  //\r\n  getComputerInventoryWithDpt(dptId) {\r\n  \r\n      return api().get(`${controllerPath}/computer-inventory-WithListDpt`, {\r\n        params: { dpt: dptId },\r\n                headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n      });\r\n  },\r\n  \r\n  // \r\n  postComputerInventory(data) {\r\n    return api().post(`${controllerPath}/computer-inventory`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  \r\n  //  NanoId  computer inventory \r\n  deleteComputerInventory(nanoId) {\r\n    return api().delete(`${controllerPath}/computer-inventory/${nanoId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  \r\n  //  NanoId  computer inventory \r\n  updateComputerInventory(nanoId, data) {\r\n    // console.log(\"nanoId:\",nanoId,\"data:\",data)\r\n    return api().put(`${controllerPath}/computer-inventory/${nanoId}`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  \r\n  updateComputerInventoryDisposal(nanoId, payload) {\r\n    return api().patch(`${controllerPath}/computer-inventory/${nanoId}/disposal`, payload, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  //#endregion\r\n};\r\n","<template>\r\n  <div style=\"display: flex; align-items: center;\">\r\n    <el-tree-select\r\n      v-model=\"internalValue\"\r\n      :data=\"treeData\"\r\n      :render-after-expand=\"false\"\r\n      default-expand-all\r\n      :check-strictly=\"true\"\r\n      :multiple=\"props.multiMode\"\r\n      placeholder=\"\"\r\n      style=\"width: 210px\"\r\n      :size=\"resolvedSize\"\r\n      :filter-method=\"filterNodes\"  \r\n    />\r\n    <!--  hasCancel  true  -->\r\n    <el-button v-if=\"props.hasCancel\" type=\"text\" @click=\"clearSelection\" style=\"margin-left: 10px;\">\r\n      <el-icon><Close /></el-icon>\r\n    </el-button>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"js\" setup>\r\nimport { ref, watch, defineProps, defineEmits, onMounted, computed } from 'vue';\r\nimport ReferenceDataService from '../../../service/ReferenceDataService';\r\nimport { Close } from '@element-plus/icons-vue';  // \r\n\r\n//  props returnType  id\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: [String, Number, Array, Object],\r\n    default: null\r\n  },\r\n  size: {\r\n    type: String,\r\n    default: 'default'\r\n  },\r\n  multiMode: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  hasCancel: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  returnType: {\r\n    type: String,\r\n    default: 'id'\r\n  }\r\n});\r\n\r\nconst emit = defineEmits(['update:modelValue', 'change']);\r\n\r\n//  resolvedSize \r\nconst resolvedSize = computed(() => {\r\n  if (props.size === 'Middle' || props.size === 'middle') {\r\n    return 'default';\r\n  }\r\n  return props.size;\r\n});\r\n\r\n//  value multiMode \r\nconst internalValue = ref(props.multiMode ? (Array.isArray(props.modelValue) ? props.modelValue : []) : props.modelValue);\r\n\r\n\r\n// flatDepartments\r\nconst flatDepartments = ref([]);\r\n// treeData\r\nconst treeData = ref([]);\r\n\r\n//  sortId \r\nfunction buildTree(data) {\r\n  const tree = [];\r\n  const lookup = {};\r\n\r\n  data.forEach(item => {\r\n    lookup[item.id] = {\r\n      label: item.name,\r\n      //  returnType  \"name\"value  item.name id\r\n      value: props.returnType === 'name' ? item.name : item.id,\r\n      sortId: item.sortId || 0,\r\n      children: [],\r\n      ...item\r\n    };\r\n  });\r\n\r\n  data.forEach(item => {\r\n    const node = lookup[item.id];\r\n    if (item.p_dpt_id === \"-1\" || !lookup[item.p_dpt_id]) {\r\n      tree.push(node);\r\n    } else {\r\n      lookup[item.p_dpt_id].children.push(node);\r\n    }\r\n  });\r\n\r\n  //  sortId \r\n  function sortNodes(nodes) {\r\n    nodes.sort((a, b) => a.sortId - b.sortId);\r\n    nodes.forEach(node => {\r\n      if (node.children && node.children.length > 0) {\r\n        sortNodes(node.children);\r\n      }\r\n    });\r\n  }\r\n  sortNodes(tree);\r\n  return tree;\r\n}\r\n\r\n// \r\nconst fetchDepartmentData = async () => {\r\n  try {\r\n    const res = await ReferenceDataService.getDepartmentData();\r\n    flatDepartments.value = res.data;\r\n    treeData.value = buildTree(flatDepartments.value);\r\n  } catch (error) {\r\n    console.error(':', error);\r\n  }\r\n};\r\n\r\n// \r\nconst clearSelection = () => {\r\n  if (props.multiMode) {\r\n    internalValue.value = [];  // \r\n  } else {\r\n    internalValue.value = [];  //  null\r\n  }\r\n  emit('update:modelValue', internalValue.value);\r\n  emit('change', internalValue.value);  //  change \r\n};\r\n\r\n//  returnType  'name'  name  id \r\nconst filterNodes = (node, searchTerm) => {\r\n  if (props.returnType === 'name') {\r\n    return node.name && node.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n  } else {\r\n    return node.id && node.id.toString().toLowerCase().includes(searchTerm.toLowerCase());\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchDepartmentData();\r\n});\r\n\r\n\r\n//  internalValue \r\nwatch(internalValue, (newVal) => {\r\n  emit('update:modelValue', newVal);\r\n  emit('change', newVal);\r\n});\r\n\r\n//  props.modelValue \r\nwatch(() => props.modelValue, (newVal) => {\r\n  internalValue.value = props.multiMode ? (Array.isArray(newVal) ? newVal : []) : newVal;\r\n});\r\n</script>\r\n","import script from \"./TreeSelect-Department.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./TreeSelect-Department.vue?vue&type=script&lang=js&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <el-tree-select\r\n    v-model=\"internalValue\"\r\n    :data=\"treeData\"\r\n    :render-after-expand=\"false\"\r\n    default-expand-all\r\n    placeholder=\"\"\r\n    style=\"width: 200px\"\r\n  />\r\n</template>\r\n\r\n<script lang=\"js\" setup>\r\nimport { ref, watch, defineProps, defineEmits, onMounted } from 'vue'\r\nimport ReferenceDataService from '../../../service/ReferenceDataService'\r\n\r\n//  v-model  returnType \r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: [String, Number, Object],\r\n    default: ''\r\n  },\r\n  returnType: {\r\n    type: String,\r\n    default: 'id',\r\n    validator: value => ['id', 'name'].includes(value)\r\n  }\r\n})\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\n// \r\nconst internalValue = ref(props.modelValue)\r\nwatch(internalValue, (newVal) => {\r\n  emit('update:modelValue', newVal)\r\n})\r\nwatch(() => props.modelValue, (newVal) => {\r\n  internalValue.value = newVal\r\n})\r\n\r\n//  treeData\r\nconst flatData = ref([]) // \r\nconst treeData = ref([]) // \r\n\r\nfunction buildTree(data) {\r\n  const groups = {}\r\n  //  area \r\n  data.forEach(item => {\r\n    if (!groups[item.area]) {\r\n      groups[item.area] = []\r\n    }\r\n    groups[item.area].push(item)\r\n  })\r\n  \r\n  //  sortId  ()\r\n  for (const key in groups) {\r\n    groups[key].sort((a, b) => a.sortId - b.sortId)\r\n  }\r\n  \r\n  //  tree  sortId  sortId\r\n  const tree = Object.keys(groups).map(area => {\r\n    return {\r\n      label: area,          //  area\r\n      value: area,          //  area\r\n      sortId: groups[area][0].sortId, //  sortId \r\n      children: groups[area].map(item => ({\r\n        label: item.region, //  region\r\n        value: props.returnType === 'id' ? item.id : item.region, //  value\r\n        sortId: item.sortId\r\n      }))\r\n    }\r\n  })\r\n  \r\n  //  tree  sortId  ()\r\n  tree.sort((a, b) => a.sortId - b.sortId)\r\n  return tree\r\n}\r\n\r\n//  area \r\nconst fetchAreaData = async () => {\r\n  try {\r\n    const res = await ReferenceDataService.getAreaData()\r\n    flatData.value = res.data\r\n    treeData.value = buildTree(flatData.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchAreaData()\r\n})\r\n</script>","import script from \"./TreeSelect-Area.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./TreeSelect-Area.vue?vue&type=script&lang=js&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import mitt from 'mitt';\r\nconst emitter = mitt();\r\nexport default emitter;\r\n","<template>\r\n  <div>\r\n    <div style=\" max-width: 1000px; margin: 0 auto;\" :style=\"{ 'max-width': sysMode ? '200rem' : '80rem','margin-left': sysMode? '-25rem' : '0rem' }\">      \r\n      \r\n    <!-- #region -->\r\n    <div v-if=\"sysMode\" class=\"flex items-center mb-4\" style=\"gap: 1rem;\">\r\n      <el-select\r\n        v-model=\"searchField\"\r\n        placeholder=\"\"\r\n        style=\"width: 100px;\"\r\n      >\r\n        <el-option\r\n          v-for=\"opt in searchOptions\"\r\n          :key=\"opt.value\"\r\n          :label=\"opt.label\"\r\n          :value=\"opt.value\"\r\n        />\r\n      </el-select>\r\n      <el-input\r\n        v-model=\"searchKeyword\"\r\n        placeholder=\"\"\r\n        clearable\r\n        style=\"width: 200px;\"\r\n      />\r\n    </div>\r\n    <!-- endregion -->\r\n\r\n      <el-table class=\"workflow-form\" :data=\"searchedTableData\" style=\"width: 100%\">\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"departmentId\" :width=\"110\">\r\n          <template #header v-if=\"props.sysMode===true\">\r\n            <el-popover\r\n              placement=\"bottom-start\"\r\n              title=\"\"\r\n              :width=\"300\"\r\n              trigger=\"click\"\r\n              \r\n            >\r\n              <template #reference>\r\n                <span style=\"color: #409EFF; text-decoration: underline; cursor: pointer;\">\r\n                  \r\n                  <el-icon><Filter /></el-icon> <!--  -->\r\n                </span>\r\n              </template>\r\n              <TreeSelectDepartment\r\n                v-model=\"selectedDepartment\"\r\n     \r\n                :has-cancel=\"true\"\r\n                :multiMode=\"false\"\r\n                @change=\"handleDepartmentSelect\"\r\n              />\r\n            </el-popover>\r\n          </template>\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <TreeSelectDepartment return-type=\"name\" v-model=\"scope.row.departmentId\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.departmentId }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"userId\" :width=\"80\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <el-input v-model=\"scope.row.userId\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.userId }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"deviceName\" :width=\"120\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <el-input v-model=\"scope.row.deviceName\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.deviceName }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!-- Cable MAC Address  -->\r\n        <el-table-column label=\"MAC Address\" prop=\"cable_MacAddress\" :width=\"170\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <el-input v-model=\"scope.row.cable_MacAddress\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.cable_MacAddress }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!-- Wireless MAC Address  -->\r\n        <el-table-column label=\"MAC Address\" prop=\"wireless_MacAddress\" :width=\"170\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <el-input v-model=\"scope.row.wireless_MacAddress\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.wireless_MacAddress }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"area_id\" :width=\"100\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.isEditing\">\r\n              <TreeSelectArea v-model=\"scope.row.area_id\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ scope.row.area_id }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"createAt\" :width=\"180\">\r\n          <template #default=\"scope\">\r\n            {{ scope.row.createAt }}\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" prop=\"createBy\" :width=\"80\">\r\n          <template #default=\"scope\">\r\n            <EmployeeaIdToName :employee-id=\"scope.row.createBy\"/>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--  -->\r\n        <el-table-column v-if=\"authStore.user.managers.length > 0 || props.sysMode\" label=\"\" :width=\"140\">\r\n          <template #default=\"scope\">\r\n            <div style=\"text-align: center;\">\r\n              <el-button size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\">\r\n                {{ scope.row.isEditing ? '' : '' }}\r\n              </el-button>\r\n              <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n\r\n\r\n        <template v-if=\"props.sysMode === true\">\r\n  <!--  -->\r\n  <el-table-column label=\"\" prop=\"isRegistered\" :width=\"70\">\r\n    <template #default=\"scope\">\r\n      <el-checkbox \r\n        v-model=\"scope.row.isRegistered\" \r\n        @change=\"handleRegisteredChange(scope.row)\" />\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <el-table-column label=\"\" prop=\"registeredAt\" :width=\"100\">\r\n    <template #default=\"scope\">\r\n      {{ scope.row.registeredAt }}\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <el-table-column label=\"\" prop=\"registeredBy\" :width=\"70\">\r\n    <template #default=\"scope\">\r\n      {{ scope.row.registeredBy }}\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <!--  -->\r\n  <el-table-column label=\"\" prop=\"isDisposed\" :width=\"70\" :header-cell-style=\"{ textAlign: 'center' }\">\r\n    <template #default=\"scope\">\r\n      <el-checkbox \r\n        v-model=\"scope.row.isDisposed\" \r\n        @change=\"handleDisposedChange(scope.row)\" \r\n        style=\"display: block; margin: 0 auto;\" />\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <el-table-column label=\"\" prop=\"disposedAt\" :width=\"100\">\r\n    <template #default=\"scope\">\r\n      {{ scope.row.disposedAt }}\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <el-table-column label=\"\" prop=\"disposedBy\" :width=\"70\">\r\n    <template #default=\"scope\">\r\n      {{ scope.row.disposedBy }}\r\n    </template>\r\n  </el-table-column>\r\n\r\n  <el-table-column label=\"\" prop=\"remark\" :width=\"160\">\r\n    <template #default=\"scope\">\r\n      <div v-if=\"scope.row.isEditing\">\r\n        <el-input v-model=\"scope.row.remark\" size=\"small\" />\r\n      </div>\r\n      <div v-else>\r\n        {{ scope.row.remark }}\r\n      </div>\r\n    </template>\r\n  </el-table-column>\r\n</template>\r\n\r\n\r\n      </el-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineProps, computed } from \"vue\";\r\nimport EventsAndStatisticsService from \"../../../service/EventsAndStatisticsService\";\r\nimport TreeSelectDepartment from \"@/components/Common/TreeSelect-getData/TreeSelect-Department.vue\";\r\nimport TreeSelectArea from \"@/components/Common/TreeSelect-getData/TreeSelect-Area.vue\";\r\nimport EmployeeaIdToName from \"@/components/Common/IdToName/Employee-IdToName.vue\";\r\nimport { ElMessage } from 'element-plus';\r\nimport '../../../css/form/workflow-form.css';\r\nimport { useUserStore } from '@/stores/user';\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport emitter from '../../../../src/eventBus'; \r\nimport { useToast } from 'primevue/usetoast';\r\nimport { Filter } from '@element-plus/icons-vue';\r\n\r\n\r\nconst searchOptions = [\r\n  { label: '',             value: 'departmentId'      },\r\n  { label: '',         value: 'userId'            },\r\n  { label: '',         value: 'deviceName'        },\r\n  { label: ' MAC Address', value: 'cable_MacAddress'  },\r\n  { label: ' MAC Address', value: 'wireless_MacAddress'},\r\n  { label: '',             value: 'area_id'           },\r\n  { label: '',         value: 'createAt'          },\r\n  { label: '',         value: 'createBy'          },\r\n  { label: '',           value: 'isRegistered'      },\r\n  { label: '',         value: 'registeredAt'      },\r\n  { label: '',           value: 'registeredBy'      },\r\n  { label: '',           value: 'isDisposed'        },\r\n  { label: '',         value: 'disposedAt'        },\r\n  { label: '',           value: 'disposedBy'        },\r\n  { label: '',             value: 'remark'            },\r\n];\r\n\r\nconst searchField   = ref(searchOptions[0].value);\r\nconst searchKeyword = ref('');\r\nconst searchedTableData = computed(() => {\r\n  const kw = searchKeyword.value.trim().toLowerCase();\r\n  const field = searchField.value;\r\n  // /\r\n  if (!kw) return filteredTableData.value;\r\n  return filteredTableData.value.filter(item => {\r\n    const cell = item[field];\r\n    // null / undefined \r\n    if (cell == null) return false;\r\n    // \r\n    return String(cell).toLowerCase().includes(kw);\r\n  });\r\n});\r\n\r\n\r\n\r\nconst props = defineProps({\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\nconst toast = useToast();\r\nconst userStore = useUserStore();\r\nconst authStore = useAuthStore();\r\n\r\n// \r\nconst tableData = ref([]);\r\n// \r\nconst filteredTableData = ref([]);\r\n// \r\nconst selectedDepartment = ref(null);\r\n\r\nconst validateRow = (row) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!row.departmentId || row.departmentId.trim() === '') {\r\n      return reject('');\r\n    }\r\n    if (!row.userId || row.userId.trim() === '') {\r\n      return reject('');\r\n    }\r\n    if (!row.deviceName || row.deviceName.trim() === '') {\r\n      return reject('');\r\n    }\r\n    const macRegex = /^([0-9A-F]{2}-){5}[0-9A-F]{2}$/;\r\n    if (row.cable_MacAddress && row.cable_MacAddress.trim() !== '' && !macRegex.test(row.cable_MacAddress)) {\r\n      return reject(' MAC Address  (: 00-1A-2B-3C-4D-5E)');\r\n    }\r\n    if (row.wireless_MacAddress && row.wireless_MacAddress.trim() !== '' && !macRegex.test(row.wireless_MacAddress)) {\r\n      return reject(' MAC Address  (: 00-1A-2B-3C-4D-5E)');\r\n    }\r\n    if (!row.area_id || row.area_id.trim() === '') {\r\n      return reject('');\r\n    }\r\n    resolve();\r\n  });\r\n};\r\n\r\nfunction convertEmptyStringsToNull(obj) {\r\n  const result = { ...obj };\r\n  Object.keys(result).forEach((key) => {\r\n    if (typeof result[key] === 'string' && result[key].trim() === '') {\r\n      result[key] = null;\r\n    }\r\n    result.createAt = new Date(new Date().toLocaleString(\"en-US\", { timeZone: \"Asia/Taipei\" }))\r\n    result.updateAt = new Date(new Date().toLocaleString(\"en-US\", { timeZone: \"Asia/Taipei\" }))\r\n    result.updateBy = userStore.userId;\r\n  });\r\n  return result;\r\n}\r\n\r\n\r\n\r\n// \r\nconst handleDepartmentSelect = async(value) => {\r\n  if (value) {\r\n    //API\r\n    let response = await EventsAndStatisticsService.GetMacAddressesWithDpt(value);\r\n    if (Array.isArray(response.data)) {\r\n      filteredTableData.value = response.data.map(item => ({\r\n        ...item,\r\n        // \r\n        isRegistered: item.isRegistered === \"True\" || item.isRegistered === true,\r\n        isDisposed: item.isDisposed === \"True\" || item.isDisposed === true,\r\n        // \r\n        createAt: formatDateTime(item.createAt),\r\n        registeredAt: formatDateTime(item.registeredAt),\r\n        disposedAt: formatDateTime(item.disposedAt)\r\n      }));\r\n    } \r\n\r\n\r\n  } else {\r\n    // \r\n    filteredTableData.value = [...tableData.value];\r\n  }\r\n};\r\n\r\n// \r\nconst getMacAddress = async () => {\r\n  try {\r\n    if (authStore.user.roles.includes('RO0000')) {\r\n      await getAllMacAddress();\r\n    } else if (authStore.user.managers.length > 0) {\r\n      await getMacAddressesWithListDpt();\r\n    } else {\r\n      await getMacAddressWithEmpId();\r\n    }\r\n    // \r\n    filteredTableData.value = [...tableData.value];\r\n  } catch (error) {\r\n    console.error(\"MAC Address :\", error);\r\n  }\r\n};\r\n\r\n\r\n// \r\nconst handleRegisteredChange = async (row) => {\r\n  try {\r\n    const payload = {\r\n      newStatus: row.isRegistered,\r\n      userName: userStore.userName\r\n    };\r\n    let res = await EventsAndStatisticsService.updateMacFormRegistration(row.nanoId, payload);\r\n    if (res) {\r\n      toast.add({ severity: 'success', summary: ``, detail: '', life: 3000 });\r\n      const index = filteredTableData.value.findIndex(item => item.nanoId === row.nanoId);\r\n      if (index !== -1) {\r\n        //  res.data \r\n        const updatedRow = {\r\n          ...filteredTableData.value[index], // \r\n          ...res.data, // \r\n          createAt: formatDateTime(res.data.createAt || filteredTableData.value[index].createAt),\r\n          registeredAt: formatDateTime(res.data.registeredAt || filteredTableData.value[index].registeredAt),\r\n          disposedAt: formatDateTime(res.data.disposedAt || filteredTableData.value[index].disposedAt)\r\n        };\r\n        filteredTableData.value[index] = updatedRow;\r\n      }\r\n    } else {\r\n      toast.add({ severity: 'warn', summary: ``, detail: '', life: 3000 });\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    toast.add({ severity: 'error', summary: ``, detail: '', life: 3000 });\r\n  }\r\n};\r\n\r\nconst handleDisposedChange = async (row) => {\r\n  try {\r\n    const payload = {\r\n      newStatus: row.isDisposed,\r\n      userName: userStore.userName\r\n    };\r\n    let res = await EventsAndStatisticsService.updateMacFormDisposal(row.nanoId, payload);\r\n    if (res && res.data) {\r\n      toast.add({ severity: 'success', summary: ``, detail: '', life: 3000 });\r\n      const index = filteredTableData.value.findIndex(item => item.nanoId === row.nanoId);\r\n      if (index !== -1) {\r\n        //  res.data \r\n        const updatedRow = {\r\n          ...filteredTableData.value[index], // \r\n          ...res.data, // \r\n          createAt: formatDateTime(res.data.createAt || filteredTableData.value[index].createAt),\r\n          registeredAt: formatDateTime(res.data.registeredAt || filteredTableData.value[index].registeredAt),\r\n          disposedAt: formatDateTime(res.data.disposedAt || filteredTableData.value[index].disposedAt)\r\n        };\r\n        filteredTableData.value[index] = updatedRow;\r\n      }\r\n    } else {\r\n      toast.add({ severity: 'warn', summary: ``, detail: '', life: 3000 });\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    toast.add({ severity: 'error', summary: ``, detail: '', life: 3000 });\r\n  }\r\n};\r\n\r\n// \r\nconst handleEdit = async (index, row) => {\r\n  if (!row.isEditing) {\r\n    row.isEditing = true;\r\n  } else {\r\n    const updatedData = { ...row };\r\n    delete updatedData.isEditing;\r\n    const processedData = convertEmptyStringsToNull(updatedData);\r\n    try {\r\n      await validateRow(processedData);\r\n      await EventsAndStatisticsService.updateMacAddress(row.nanoId, processedData);\r\n      const tableIndex = filteredTableData.value.findIndex(item => item.nanoId === row.nanoId);\r\n      if (tableIndex !== -1) {\r\n        filteredTableData.value[tableIndex] = { ...processedData };\r\n      }\r\n      ElMessage.success(\"\");\r\n    } catch (error) {\r\n      console.error(\":\", error);\r\n      ElMessage.error(error);\r\n    }\r\n  }\r\n};\r\n\r\n// \r\nconst handleDelete = async (index, row) => {\r\n  try {\r\n    await EventsAndStatisticsService.deleteMacAddress(row.nanoId);\r\n    const deleteIndex = filteredTableData.value.findIndex(item => item.nanoId === row.nanoId);\r\n    if (deleteIndex !== -1) {\r\n      filteredTableData.value.splice(deleteIndex, 1); //  filteredTableData \r\n    }\r\n    ElMessage.success(\"\");\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error(\"\");\r\n  }\r\n};\r\nconst getMacAddressWithEmpId = async () => {\r\n  try {\r\n    const response = await EventsAndStatisticsService.getMacAddressWithEmpId(userStore.userId);\r\n    if (Array.isArray(response.data)) {\r\n      tableData.value = response.data.map(item => ({\r\n        ...item,\r\n        // \r\n        isRegistered: item.isRegistered === \"True\" || item.isRegistered === true,\r\n        isDisposed: item.isDisposed === \"True\" || item.isDisposed === true,\r\n        // \r\n        createAt: formatDateTime(item.createAt),\r\n        registeredAt: formatDateTime(item.registeredAt),\r\n        disposedAt: formatDateTime(item.disposedAt)\r\n      }));\r\n    } else {\r\n      tableData.value = [];\r\n    }\r\n  } catch (error) {\r\n    console.error(\"MAC Address :\", error);\r\n    tableData.value = [];\r\n  }\r\n};\r\n\r\nconst getMacAddressesWithListDpt = async () => {\r\n  try {\r\n    const response = await EventsAndStatisticsService.GetMacAddressesWithListDpt(authStore.user.subDepartments);\r\n    if (Array.isArray(response.data)) {\r\n      tableData.value = response.data.map(item => ({\r\n        ...item,\r\n        isRegistered: item.isRegistered === \"True\" || item.isRegistered === true,\r\n        isDisposed: item.isDisposed === \"True\" || item.isDisposed === true,\r\n        createAt: formatDateTime(item.createAt),\r\n        registeredAt: formatDateTime(item.registeredAt),\r\n        disposedAt: formatDateTime(item.disposedAt)\r\n      }));\r\n    } else {\r\n      tableData.value = [];\r\n    }\r\n  } catch (error) {\r\n    console.error(\"MAC Address :\", error);\r\n    tableData.value = [];\r\n  }\r\n};\r\n\r\nconst getAllMacAddress = async () => {\r\n  try {\r\n    const response = await EventsAndStatisticsService.getMacAddress();\r\n    if (Array.isArray(response.data)) {\r\n      tableData.value = response.data.map(item => ({\r\n        ...item,\r\n        createAt: formatDateTime(item.createAt),\r\n        registeredAt: formatDateTime(item.registeredAt),\r\n        disposedAt: formatDateTime(item.disposedAt)\r\n      }));\r\n    } else {\r\n      tableData.value = [];\r\n    }\r\n  } catch (error) {\r\n    console.error(\"MAC Address :\", error);\r\n  }\r\n};\r\nfunction formatDateTime(dateValue) {\r\n  if (!dateValue) {\r\n    return \"\"; //  dateValue  null  undefined\r\n  }\r\n  const date = new Date(dateValue);\r\n  if (isNaN(date.getTime())) {\r\n    return \"\"; //  dateValue \r\n  }\r\n  return date.toLocaleString(\"zh-TW\", { timeZone: \"Asia/Taipei\" }); // \r\n}\r\n\r\nonMounted(async () => {\r\n  await getMacAddress();\r\n\r\n  emitter.on('dataUpdated', async () => {\r\n    await getMacAddress();\r\n  });\r\n});\r\n</script>","import script from \"./MAC_Form_Detail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MAC_Form_Detail.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div style=\"font-size: 1.5rem;\">\r\n      <div></div>\r\n      <div>1. Windows  + R \"\"</div>\r\n      <div>2.\"\" \"cmd\" \"ipconfig /all\" Enter </div>\r\n      <div>3.Mac</div>\r\n    </div>\r\n    <el-form\r\n      ref=\"macFormRef\"\r\n      style=\"max-width: 600px;\"\r\n      :model=\"macForm\"\r\n      :rules=\"rules\"\r\n      label-width=\"9rem\"\r\n      class=\"workflow-form\"\r\n      :size=\"formSize\"\r\n      status-icon\r\n    >\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"DepartmentId\">\r\n        <TreeSelectDepartment  v-model=\"macForm.DepartmentId\" />\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"UserId\">\r\n        <el-input style=\"width: 200px\" v-model=\"macForm.UserId\" placeholder=\"\" />\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"DeviceName\">\r\n        <el-input style=\"width: 200px\" v-model=\"macForm.DeviceName\" placeholder=\"\" />\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"area_id\">\r\n        <TreeSelectArea returnType=\"name\" v-model=\"macForm.area_id\" />\r\n      </el-form-item>\r\n      \r\n      <!-- Cable MAC Address -->\r\n      <el-form-item label=\"MAC Address\" prop=\"Cable_MacAddress\">\r\n        <div class=\"mac-container\">\r\n          <template v-for=\"(value, index) in cableMacFields\" :key=\"'cable-' + index\">\r\n            <input\r\n              v-model=\"cableMacFields[index]\"\r\n              class=\"mac-input\"\r\n              type=\"text\"\r\n              maxlength=\"2\"\r\n              @input=\"formatInput($event, index, 'cable')\"\r\n              @keydown=\"handleKeydown($event, index, 'cable')\"\r\n              :disabled=\"checked_Cable_MacAddress\"\r\n            />\r\n            <span v-if=\"index < 5\" class=\"mac-separator\">-</span>\r\n          </template>\r\n        </div>\r\n      </el-form-item>\r\n      \r\n      <!-- Wireless MAC Address -->\r\n      <el-form-item label=\"MAC Address\" prop=\"Wireless_MacAddress\">\r\n        <div class=\"mac-container\">\r\n          <template v-for=\"(value, index) in wirelessMacFields\" :key=\"'wireless-' + index\">\r\n            <input\r\n              v-model=\"wirelessMacFields[index]\"\r\n              class=\"mac-input\"\r\n              type=\"text\"\r\n              maxlength=\"2\"\r\n              @input=\"formatInput($event, index, 'wireless')\"\r\n              @keydown=\"handleKeydown($event, index, 'wireless')\"\r\n              :disabled=\"checked_Wireless_MacAddress\"\r\n            />\r\n            <span v-if=\"index < 5\" class=\"mac-separator\">-</span>\r\n          </template>\r\n        </div>\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm(macFormRef)\"></el-button>\r\n        <el-button @click=\"resetForm(macFormRef)\"></el-button>\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item v-show=\"false\" label=\"\" prop=\"isRegistered\">\r\n        <el-checkbox \r\n          v-model=\"macForm.isRegistered\" \r\n          :true-label=\"'Y'\" \r\n          :false-label=\"'N'\">\r\n          \r\n        </el-checkbox>\r\n      </el-form-item>\r\n      \r\n      <!--  -->\r\n      <el-form-item v-show=\"false\" label=\"\" prop=\"isObsoleted\">\r\n        <el-checkbox \r\n          v-model=\"macForm.isObsoleted\" \r\n          :true-label=\"'Y'\" \r\n          :false-label=\"'N'\">\r\n          \r\n        </el-checkbox>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, watch, nextTick } from \"vue\";\r\nimport TreeSelectDepartment from \"@/components/Common/TreeSelect-getData/TreeSelect-Department.vue\";\r\nimport EventsAndStatisticsService from \"../../../service/EventsAndStatisticsService\";\r\nimport TreeSelectArea from \"@/components/Common/TreeSelect-getData/TreeSelect-Area\";\r\nimport { nanoid } from 'nanoid';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport '../../../css/form/workflow-form.css';\r\nimport { useUserStore } from '@/stores/user';\r\nimport emitter from '../../../../src/eventBus';  // \r\n\r\nconst userStore = useUserStore();\r\nconst toast = useToast();\r\nconst formSize = ref(\"default\");\r\nconst macFormRef = ref(null);\r\nconst anyCableFilled = () => cableMacFields.value.some(v => v.trim() !== '')\r\nconst anyWirelessFilled = () => wirelessMacFields.value.some(v => v.trim() !== '')\r\nconst macForm = reactive({\r\n  NanoId: \"\", \r\n  DepartmentId: \"\",\r\n  UserId: \"\",\r\n  DeviceName: \"\",\r\n  Cable_MacAddress: null,\r\n  Wireless_MacAddress: null,\r\n  isRegistered: false,\r\n  isObsoleted: false,  //  'N'\r\n  createAt: new Date(new Date().toLocaleString(\"en-US\", { timeZone: \"Asia/Taipei\" })),  // \r\n  createBy: userStore.userId,   //  userStore.userId \r\n  updateAt: null,               // \r\n  updateBy: null,               // \r\n  area_id: \"\"\r\n});\r\n\r\n\r\n\r\nconst checked_Cable_MacAddress = ref();\r\nconst checked_Wireless_MacAddress = ref();\r\n\r\n// Cable MAC Address 6 \r\nconst cableMacFields = ref([\"\", \"\", \"\", \"\", \"\", \"\"]);\r\n\r\n// Wireless MAC Address 6 \r\nconst wirelessMacFields = ref([\"\", \"\", \"\", \"\", \"\", \"\"]);\r\n\r\nwatch(\r\n  cableMacFields,\r\n  (newFields) => {\r\n    macForm.Cable_MacAddress = newFields.join(\"-\").toUpperCase();\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nwatch(\r\n  wirelessMacFields,\r\n  (newFields) => {\r\n    macForm.Wireless_MacAddress = newFields.join(\"-\").toUpperCase();\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nwatch(\r\n  [checked_Wireless_MacAddress, checked_Cable_MacAddress],\r\n  ([newWireless, newCable]) => {\r\n    if (newWireless) {\r\n      wirelessMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n    }\r\n    if (newCable) {\r\n      cableMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n    }\r\n  }\r\n);\r\n\r\nconst formatInput = (event, index, type) => {\r\n  let value = event.target.value.toUpperCase().replace(/[^0-9A-F]/g, \"\");\r\n  if (value.length > 2) {\r\n    value = value.slice(0, 2);\r\n  }\r\n  if (type === \"cable\") {\r\n    cableMacFields.value[index] = value;\r\n  } else if (type === \"wireless\") {\r\n    wirelessMacFields.value[index] = value;\r\n  }\r\n};\r\n\r\nconst handleKeydown = (event, index, type) => {\r\n  let fields = type === \"cable\" ? cableMacFields.value : wirelessMacFields.value;\r\n  if (event.key === \"Backspace\" && !fields[index] && index > 0) {\r\n    event.preventDefault();\r\n    if (type === \"cable\") {\r\n      cableMacFields.value[index - 1] = \"\";\r\n    } else if (type === \"wireless\") {\r\n      wirelessMacFields.value[index - 1] = \"\";\r\n    }\r\n    nextTick(() => {\r\n      event.target.previousElementSibling?.previousElementSibling?.focus();\r\n    });\r\n  }\r\n};\r\n\r\nconst rules = reactive({\r\n  DepartmentId: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n  UserId: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n  DeviceName: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n  Cable_MacAddress: [\r\n    { \r\n      validator: (rule, value, callback) => {\r\n        if (!anyCableFilled()) return callback();\r\n        if (checked_Cable_MacAddress.value) {\r\n          callback();\r\n        } else {\r\n           if (!(/^([0-9A-F]{2}-){5}[0-9A-F]{2}$/).test(value)) {\r\n            callback(new Error(\" MAC Address  (: 00-1A-2B-3C-4D-5E)\"));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      },\r\n      trigger: \"blur\"\r\n    }\r\n  ],\r\n  Wireless_MacAddress: [\r\n    { \r\n      validator: (rule, value, callback) => {\r\n        if (!anyWirelessFilled()) return callback()\r\n        if (checked_Wireless_MacAddress.value) {\r\n          callback();\r\n        } else {\r\n          if (!(/^([0-9A-F]{2}-){5}[0-9A-F]{2}$/).test(value)) {\r\n            callback(new Error(\" MAC Address  (: 00-1A-2B-3C-4D-5E)\"));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      },\r\n      trigger: \"blur\"\r\n    }\r\n  ],\r\n  isRegistered: false,\r\n  isObsoleted: false,\r\n  area_id: [{ required: true, message: \"\", trigger: \"blur\" }]\r\n});\r\n\r\nconst submitForm = async (formEl) => {\r\n  \r\n  if (!formEl) return;\r\n  if (!macForm.NanoId) {\r\n    macForm.NanoId = nanoid(10);\r\n  }\r\n  if (checked_Cable_MacAddress.value) {\r\n    macForm.Cable_MacAddress = '';\r\n  }\r\n  if (checked_Wireless_MacAddress.value) {\r\n    macForm.Wireless_MacAddress = '';\r\n  }\r\n  await formEl.validate((valid, fields) => {\r\n    if (valid) {\r\n      console.log(\"!\", macForm);\r\n      EventsAndStatisticsService.postMacAddress(macForm)\r\n        .then(() => {\r\n          toast.add({ severity: 'success', summary: 'Mac Address', detail: ``, life: 5000 });\r\n          formEl.resetFields();\r\n          cableMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n          wirelessMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n          macForm.NanoId = \"\"; //  NanoIdnanoId\r\n          emitter.emit('dataUpdated');          \r\n        })\r\n        .catch((error) => {\r\n          console.error(\"MAC Address :\", error);\r\n        });\r\n    } else {\r\n      console.log(\"!\", fields);\r\n    }\r\n  });\r\n};\r\n\r\nconst resetForm = (formEl) => {\r\n  if (!formEl) return;\r\n  formEl.resetFields();\r\n  cableMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n  wirelessMacFields.value = [\"\", \"\", \"\", \"\", \"\", \"\"];\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.demo-macForm {\r\n  border: 1px solid #ccc;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n}\r\n.mac-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n.mac-input {\r\n  width: 42px;\r\n  height: 42px;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  text-transform: uppercase;\r\n}\r\n.mac-separator {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  padding: 0 4px;\r\n}\r\n</style>","import script from \"./Fill_Mac_Form.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Fill_Mac_Form.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Fill_Mac_Form.vue?vue&type=style&index=0&id=41ca4d0e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-41ca4d0e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <div v-if=\"!props.sysMode\" style=\"width:45rem;\">\r\n      <Image alt=\"Image\" :src=\"require('@/assets/other/MacAddress.jpg')\" preview/>\r\n      <div style=\"width: 40rem\"></div>\r\n    </div>\r\n    <div>\r\n      <Fill_Mac_Form  v-if=\"!props.sysMode\" /> \r\n      <MAC_Form_Detail :sysMode=\"sysMode\" :style=\"!sysMode ?  {}:{ 'margin-left': '25rem' }\" />      \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\n\r\nimport MAC_Form_Detail from './MAC_Form_Detail.vue';\r\nimport Fill_Mac_Form from './Fill_Mac_Form.vue';\r\nimport Image from 'primevue/image';\r\nconst props = defineProps({\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-left: 4rem;\r\n  margin-top: 6rem;\r\n  margin-bottom: 5rem;\r\n}\r\n.item1 {\r\n  width: 500rem;\r\n}\r\n</style>","import script from \"./MacForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MacForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MacForm.vue?vue&type=style&index=0&id=290c9ebe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-290c9ebe\"]])\n\nexport default __exports__","<template>\r\n    <transition name=\"slide-panel\">\r\n      <div\r\n        v-if=\"props.drawerVisible\"\r\n        class=\"slide-panel flex flex-col\"\r\n        :style=\"{ width }\"\r\n        @keydown.esc=\"close()\"\r\n        tabindex=\"0\"\r\n      >\r\n        <!-- Header -->\r\n        <div class=\"flex items-center justify-between px-6 pt-4 shrink-0\">\r\n          <span class=\"inline-flex items-center gap-2\">\r\n            <!-- Logo SVG -->\r\n            <svg width=\"35\" height=\"40\" ></svg>\r\n            <span class=\"font-semibold text-2xl text-secondary\">DAE</span>\r\n          </span>\r\n          <button @click=\"close()\" class=\"p-2 rounded border\">\r\n            <i class=\"pi pi-times\"></i>\r\n          </button>\r\n        </div>\r\n  \r\n        <!-- Body: Expandable Menu -->\r\n        <div class=\"overflow-y-auto flex-1 p-4\">\r\n          <ul class=\"menu-list\">\r\n            <li v-for=\"(item, index) in menu\" :key=\"index\" class=\"menu-item\">\r\n              <div class=\"menu-title flex justify-between items-center cursor-pointer p-2\"\r\n                   @click=\"toggle(index)\">\r\n                <span>{{ item.title }}</span>\r\n                <i :class=\"['pi', item.open ? 'pi-chevron-down' : 'pi-chevron-right']\"></i>\r\n              </div>\r\n              <transition name=\"slide-toggle\">\r\n                <ul v-if=\"item.open\" class=\"submenu-list pl-4\">\r\n                  <li v-for=\"(sub, subIndex) in item.children\" :key=\"subIndex\" class=\"submenu-item p-2 cursor-pointer hover:bg-gray-100\">\r\n                    <span>{{ sub }}</span>\r\n                  </li>\r\n                </ul>\r\n              </transition>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { defineProps, defineEmits, reactive } from 'vue'\r\n  const props = defineProps({\r\n      drawerVisible: { type: Boolean, default: false },\r\n      width:   { type: String,  default: '300px' }\r\n    })\r\n  const emits = defineEmits(['update:visible'])\r\n  \r\n  // \r\n  function close() {\r\n    emits('update:visible', false)\r\n  }\r\n  \r\n  // \r\n  const menu = reactive([\r\n    { title: 'FAVORITES', open: false, children: ['Dashboard', 'Bookmarks'] },\r\n    { title: 'REPORTS', open: false, children: ['Revenue', 'Expenses'] },\r\n    { title: 'TEAM', open: false, children: ['Members', 'Roles'] }\r\n  ])\r\n  \r\n  // \r\n  function toggle(idx) {\r\n    menu[idx].open = !menu[idx].open\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .slide-panel {\r\n    position: fixed;\r\n    top: 0; left: 0;\r\n    height: 100vh;\r\n    background: #fff;\r\n    box-shadow: 2px 0 8px rgba(0,0,0,0.15);\r\n    overflow-y: auto;\r\n    z-index: 1000;\r\n    transform: translateX(0);\r\n  }\r\n  \r\n  /*  */\r\n  .slide-panel-enter-from, .slide-panel-leave-to { transform: translateX(-100%); }\r\n  .slide-panel-enter-to,   .slide-panel-leave-from { transform: translateX(0); }\r\n  .slide-panel-enter-active, .slide-panel-leave-active { transition: transform 0.5s ease; }\r\n  \r\n  /*  */\r\n  .slide-toggle-enter-active, .slide-toggle-leave-active {\r\n    transition: all 0.3s ease;\r\n  }\r\n  .slide-toggle-enter-from,\r\n  .slide-toggle-leave-to {\r\n    height: 0;\r\n    opacity: 0;\r\n  }\r\n  .slide-toggle-enter-to,\r\n  .slide-toggle-leave-from {\r\n    height: auto;\r\n    opacity: 1;\r\n  }\r\n  \r\n  .menu-list, .submenu-list {\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  \r\n  .menu-title:hover {\r\n    background: #f5f5f5;\r\n  }\r\n  </style>\r\n  ","import script from \"./SlidePanel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SlidePanel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SlidePanel.vue?vue&type=style&index=0&id=7510106d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7510106d\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"mode=='demo'\">\r\n    <Button class=\"change-mode\" @click=\"mode = mode==='demo' ? 'dev' : 'demo'\"></Button>\r\n    <attendanceRecord></attendanceRecord>\r\n  </div>\r\n  \r\n  <div v-else>\r\n    <!--  Header -->\r\n    <div class=\"header\" >\r\n      <HomeMenu/>\r\n      <CustomMarquee\r\n        v-if=\"isShowMarquee\"\r\n        @closeMarquee=\"handleCloseMarquee\"\r\n        @messageClick=\"handleMarqueeMessage\"\r\n      />\r\n    </div>\r\n    \r\n    <div class=\"wrapper\">\r\n      <!--  -->\r\n      <div >\r\n          <!--  -->\r\n          <div\r\n            class=\"side\"\r\n            style=\"background-color: #effff6;\"\r\n            :class=\"{ 'side-hidden': !isSideVisible, 'marquee-open': isShowMarquee }\"\r\n          >\r\n            <PageList />\r\n          </div>\r\n    \r\n          <!--  -->\r\n          <div :style=\"toggleContainerStyle\" v-if=\"false\">\r\n            <Button \r\n              v-if=\"permissions.includes('dev')\"\r\n              class=\"showDrawerToggle\"\r\n              :icon=\"isShowDrawer ? 'pi pi-bars' : 'pi pi-bars'\"   \r\n              @click=\"drawerVisible = true\" \r\n            ></Button>\r\n            <Button\r\n              class=\"marquee-toggle\"\r\n              :icon=\"isShowMarquee ? 'pi pi-eye-slash' : 'pi pi-eye'\"\r\n              @click=\"toggleMarquee\"\r\n            ></Button>\r\n            <Button\r\n              class=\"slider-toggle\"\r\n              :icon=\"isSideVisible ? 'pi pi-chevron-left' : 'pi pi-chevron-right'\"\r\n              @click=\"toggleSide\"\r\n            ></Button>\r\n          </div>\r\n          \r\n          <div class=\"card flex justify-center\">\r\n            <SlidePanel v-model:visible=\"drawerVisible\" width=\"280px\">\r\n\r\n            </SlidePanel>\r\n          </div>\r\n      </div>\r\n      \r\n      <!--  (body) margin-left -->\r\n      <div class=\"body\" :style=\"bodyStyle\">\r\n        <div class=\"flex justify-content-center\">\r\n          <div style=\"width:100%;\" >\r\n            <router-view />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--  Footer ... -->\r\n    <!-- <div class=\"footer\">\r\n      <div class=\"footer-left\">\r\n        <svg style=\"cursor: pointer;\" width=\"60\" height=\"40\" viewBox=\"0 0 80 80\" @click=\"goHome\">\r\n          <image href=\"@/assets/logo/DAE.png\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" />\r\n        </svg>\r\n        <label class=\"footer-links\">    </label>\r\n      </div>\r\n      <div class=\"footer-right\">\r\n           2024\r\n      </div>\r\n    </div> -->\r\n    \r\n    <!--  Dialog -->\r\n    <el-dialog v-model=\"marqueeDialogVisible\" title=\"\" width=\"400px\">\r\n      <div v-if=\"marqueeMessage\">\r\n        <p><strong></strong>{{ marqueeMessage.text }}</p>\r\n        <p><strong></strong>{{ marqueeMessage.details }}</p>\r\n      </div>\r\n      <template #footer>\r\n        <el-button @click=\"marqueeDialogVisible = false\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n    <el-dialog v-model=\"MacFormVisible\">\r\n      <MacForm></MacForm>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport VueCookies from 'vue-cookies'\r\nimport HomeMenu from '../HomeMenu.vue'\r\nimport PageList from '../PageList.vue'\r\nimport { useUserStore } from '@/stores/user'\r\nimport Button from 'primevue/button'\r\nimport attendanceRecord from '../../AttendanceRecord/AttendanceRecord.vue'\r\nimport CustomMarquee from '../custom-marquee.vue'\r\nimport MacForm from '../../EventsAndStatistics/MACForm/MacForm.vue'\r\nimport SlidePanel from './SlidePanel.vue'\r\nimport { useAuthStore } from '@/stores/auth.js'\r\nconst authStore = useAuthStore();\r\nconst permissions = authStore.user.permissions || [];\r\nconst isShowDrawer = ref(true)\r\nconst isShowMarquee = ref(true)\r\nfunction handleCloseMarquee() {\r\n  isShowMarquee.value = false\r\n  // console.log('', closeValue)\r\n}\r\nconst drawerVisible = ref(false);\r\nconst marqueeDialogVisible = ref(false)\r\nconst MacFormVisible = ref(false)\r\nconst marqueeMessage = ref(null)\r\nfunction handleMarqueeMessage(msg) {\r\n  if(msg.text === ('Mac Address')){\r\n    router.push({ name: 'MacForm' })\r\n  } else {\r\n    marqueeMessage.value = msg\r\n    marqueeDialogVisible.value = true\r\n  }\r\n}\r\n\r\n\r\n\r\nconst isMobile = ref(false)\r\n\r\nconst updateIsMobile = () => {\r\n  const width = window.innerWidth\r\n  const height = window.innerHeight\r\n  const aspectRatio = width / height\r\n\r\n  //  768  1\r\n  isMobile.value = width <= 768 && aspectRatio < 1\r\n}\r\n\r\nonMounted(() => {\r\n  updateIsMobile()\r\n  window.addEventListener('resize', updateIsMobile)\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', updateIsMobile)\r\n})\r\n\r\nconst router = useRouter()\r\nconst userStore = useUserStore()\r\n\r\nwatch(\r\n  () => userStore.userId,\r\n  (newUserId) => {\r\n    if (!newUserId) {\r\n      console.log('')\r\n    }\r\n  }\r\n)\r\n\r\nconst toggleMarquee = () => {\r\n  isShowMarquee.value = !isShowMarquee.value\r\n}\r\nconst isSideVisible = ref(false)\r\nconst toggleSide = () => {\r\n  isSideVisible.value = !isSideVisible.value\r\n}\r\n\r\nconst toggleContainerStyle = computed(() => {\r\n  return {\r\n    position: 'fixed',\r\n    top: isShowMarquee.value ? '10rem' : '7rem',\r\n    left: isSideVisible.value ? '200px' : '0px',\r\n    zIndex: 800,\r\n    transition: 'top 0.3s ease, left 0.3s ease',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '0.5rem'\r\n  }\r\n})\r\n\r\n//  bodyStyle computed \r\nconst bodyStyle = computed(() => {\r\n  return {\r\n    marginLeft: isSideVisible.value ? '200px' : '0px',\r\n    transition: 'margin-left 0.3s ease'\r\n  }\r\n})\r\n\r\nconst mode = ref('dev')\r\n\r\n\r\nonMounted(() => {\r\n  const intervalId = setInterval(() => {\r\n    if (!VueCookies.get('userId')) {\r\n      userStore.clearUserInfo()\r\n    }\r\n  }, 2000)\r\n  \r\n  onUnmounted(() => {\r\n    clearInterval(intervalId)\r\n  })\r\n})\r\n\r\nwatch(drawerVisible, v => console.log('drawerVisible=', v))\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n/* #region style*/\r\n\r\nhtml, body {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.wrapper {\r\n\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 0rem;\r\n  background-color: #f8f8f87d;\r\n  text-align: center;\r\n  border-bottom: 1px solid #ccc;\r\n  font-size: 1.5em;\r\n  line-height: 5%;\r\n  z-index: 888;\r\n}\r\n\r\n.change-mode {\r\n  position: fixed;\r\n  top: 5rem;\r\n  right: 2rem;\r\n  width: 4rem;\r\n  height: 2rem;\r\n  line-height: 5%;\r\n  z-index: 888;\r\n}\r\n\r\n.side {\r\n  position: fixed;\r\n  top: 3.5rem;\r\n  left: 0;\r\n  width: 200px;\r\n  height: calc(100vh - 3.5rem);\r\n  background-color: #ffffff;\r\n  border-right: 1px solid #000000;\r\n  overflow-y: auto;\r\n  z-index: 777;\r\n  transition: transform 0.3s ease, top 0.3s ease, height 0.3s ease;\r\n}\r\n\r\n.side.marquee-open {\r\n  top: 5.5rem;\r\n  height: calc(100vh - 6.5rem);\r\n}\r\n\r\n.side-hidden {\r\n  transform: translateX(-100%);\r\n}\r\n\r\n\r\n\r\n.slider-toggle,\r\n.marquee-toggle,\r\n.showDrawerToggle {\r\n  background-color: #d9ffe6;\r\n  border: 1px solid #ccc;\r\n  border-left: none;\r\n  border-radius: 0 4px 4px 0;\r\n  padding: 0.5rem;\r\n  transition: background 0.3s ease;\r\n}\r\n\r\n\r\n.showDrawerToggle:hover,\r\n.slider-toggle:hover,\r\n.marquee-toggle:hover {\r\n  background: linear-gradient(45deg, #e6e6e6, #d4d4d4);\r\n  cursor: pointer;\r\n}\r\n\r\n.slider-toggle .pi {\r\n  color: #333;\r\n}\r\n\r\n.footer {\r\n  position: relative;\r\n  z-index: 99999;\r\n  height: 5rem;\r\n  width: 100%;\r\n  background-color: #ffffff;\r\n  border-top: 1px solid #ccc;\r\n  font-size: 0.9em;\r\n  color: #666;\r\n  padding: 10px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.footer-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.footer-links {\r\n  white-space: nowrap;\r\n}\r\n\r\n.footer-right {\r\n  text-align: right;\r\n}\r\n\r\n.flex-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5rem;\r\n}\r\n\r\n.sticky-menu-container {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1;\r\n  background-color: #f8f8f8;\r\n  padding: 0.5rem 1rem;\r\n}\r\n\r\n/*#endregion */\r\n\r\n/* #region media screen*/\r\n\r\n@media (max-width: 2560px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1920px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1536px) {\r\n  .showDrawerToggle,\r\n  .slider-toggle,\r\n  .marquee-toggle {\r\n    width: 1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n\r\n  .showDrawerToggle:hover,\r\n  .slider-toggle:hover,\r\n  .marquee-toggle:hover {\r\n    width:  1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 1366px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1280px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 1180px) {\r\n\r\n}\r\n\r\n\r\n@media (max-width: 820px) {\r\n\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .showDrawerToggle,\r\n  .slider-toggle,\r\n  .marquee-toggle {\r\n    width: 1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n\r\n  .showDrawerToggle:hover,\r\n  .slider-toggle:hover,\r\n  .marquee-toggle:hover {\r\n    width:  1.8rem;          \r\n    aspect-ratio: 1 / 1;   /*  */\r\n  }\r\n}\r\n\r\n\r\n\r\n/* #endregion */\r\n\r\n\r\n</style>\r\n","import script from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=8efaef42&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8efaef42\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"personal-info-container\">\r\n    <!--  -->\r\n    <div class=\"background-decoration\">\r\n      <div class=\"decoration-circle circle-1\"></div>\r\n      <div class=\"decoration-circle circle-2\"></div>\r\n      <div class=\"decoration-circle circle-3\"></div>\r\n    </div>\r\n    \r\n    <!--  -->\r\n    <div class=\"main-card\">\r\n      <!--  -->\r\n      <div class=\"card-header\">\r\n        <div class=\"header-icon\">\r\n          <el-icon size=\"24\"><User /></el-icon>\r\n        </div>\r\n        <h1 class=\"header-title\"></h1>\r\n        <p class=\"header-subtitle\"></p>\r\n        <!--  -->\r\n        <div class=\"header-actions\">\r\n          <el-button \r\n            v-if=\"!isEditing && !isEditingPassword\" \r\n            type=\"primary\" \r\n            @click=\"startEditing\"\r\n            class=\"edit-main-btn\"\r\n            size=\"default\"\r\n          >\r\n            <el-icon><Edit /></el-icon>\r\n            \r\n          </el-button>\r\n          <div v-if=\"isEditing\" class=\"edit-actions\">\r\n            <el-button \r\n              type=\"success\" \r\n              @click=\"onSubmit\"\r\n              :loading=\"saving\"\r\n              size=\"default\"\r\n            >\r\n              <el-icon><Check /></el-icon>\r\n              \r\n            </el-button>\r\n            <el-button \r\n              @click=\"toggleEditMode\"\r\n              size=\"default\"\r\n            >\r\n              <el-icon><Close /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"form-content\">\r\n        <!--  -->\r\n        <div class=\"profile-image-section\">\r\n          <div class=\"profile-image-container\">\r\n            <div class=\"profile-image-wrapper\">\r\n              <el-avatar \r\n                :size=\"120\" \r\n                :src=\"profileImageUrl\" \r\n                class=\"profile-avatar\"\r\n                @error=\"handleAvatarError\"\r\n              >\r\n                <el-icon size=\"40\"><User /></el-icon>\r\n              </el-avatar>\r\n              <div v-if=\"isEditing\" class=\"profile-image-overlay\">\r\n                <el-button \r\n                  type=\"primary\" \r\n                  circle \r\n                  @click=\"triggerFileUpload\"\r\n                  class=\"upload-btn\"\r\n                  size=\"small\"\r\n                  :loading=\"uploadingImage\"\r\n                  :disabled=\"uploadingImage\"\r\n                >\r\n                  <el-icon><Edit /></el-icon>\r\n                </el-button>\r\n                <el-button \r\n                  v-if=\"form.profile_image\" \r\n                  type=\"danger\" \r\n                  circle \r\n                  @click=\"deleteProfileImage\"\r\n                  class=\"delete-btn\"\r\n                  size=\"small\"\r\n                  :loading=\"uploadingImage\"\r\n                  :disabled=\"uploadingImage\"\r\n                >\r\n                  <el-icon><Delete /></el-icon>\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n            <div class=\"profile-image-info\">\r\n              <h4 class=\"profile-name\">{{ form.name }}</h4>\r\n              <p class=\"profile-subtitle\"></p>\r\n            </div>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <input \r\n            ref=\"fileInput\"\r\n            type=\"file\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif\"\r\n            @change=\"handleFileSelect\"\r\n            style=\"display: none\"\r\n          />\r\n        </div>\r\n\r\n        <el-form\r\n          v-if=\"loaded\"\r\n          :model=\"form\"\r\n          ref=\"formRef\"\r\n          label-position=\"top\"\r\n          size=\"default\"\r\n          class=\"modern-form compact-form\"\r\n        >\r\n          <!--  -->\r\n          <div class=\"form-section\">\r\n            <div class=\"section-header\">\r\n              <el-icon class=\"section-icon\"><UserFilled /></el-icon>\r\n              <h3 class=\"section-title\"></h3>\r\n            </div>\r\n            \r\n            <div class=\"form-flex\">\r\n              <el-form-item prop=\"name\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><User /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-text class=\"readonly-text\">{{ form.name }}</el-text>\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"en_name\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <i class=\"pi pi-globe\"></i>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-text v-if=\"!isEditing\" class=\"readonly-text\">{{ form.en_name || '' }}</el-text>\r\n                <el-input \r\n                  v-else \r\n                  v-model=\"form.en_name\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  size=\"small\"\r\n                />\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"form-section\" v-if=\"!isEditingPassword\">\r\n            <div class=\"section-header\">\r\n              <el-icon class=\"section-icon\"><OfficeBuilding /></el-icon>\r\n              <h3 class=\"section-title\"></h3>\r\n            </div>\r\n            \r\n            <div class=\"form-flex\">\r\n              <el-form-item prop=\"area_id\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Location /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <Area-IdToName :area-id=\"form.area_id\" class=\"readonly-text\" />\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"dpt_id\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><OfficeBuilding /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <Dept-IdToName :dept-id=\"form.dpt_id\" class=\"readonly-text\" />\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"title_id\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Medal /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <Title-IdToName :title-id=\"form.title_id\" class=\"readonly-text\" />\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"form-section\" v-if=\"!isEditingPassword\">\r\n            <div class=\"section-header\">\r\n              <el-icon class=\"section-icon\"><Message /></el-icon>\r\n              <h3 class=\"section-title\"></h3>\r\n            </div>\r\n            \r\n            <div class=\"form-flex\">\r\n              <el-form-item prop=\"email\" :rules=\"[{ type: 'email', message: ' Email', trigger: 'blur' }]\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Message /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-text v-if=\"!isEditing\" class=\"readonly-text\">{{ form.email || '' }}</el-text>\r\n                <el-input \r\n                  v-else \r\n                  v-model=\"form.email\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  size=\"small\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"ext_group\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Phone /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-text v-if=\"!isEditing\" class=\"readonly-text\">{{ form.ext_group || '' }}</el-text>\r\n                <el-input \r\n                  v-else \r\n                  v-model=\"form.ext_group\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  size=\"small\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"ext_num\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Phone /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-text v-if=\"!isEditing\" class=\"readonly-text\">{{ form.ext_num || '' }}</el-text>\r\n                <el-input \r\n                  v-else \r\n                  v-model=\"form.ext_num\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  size=\"small\"\r\n                />\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"form-section\">\r\n            <div class=\"section-header\">\r\n              <el-icon class=\"section-icon\"><Lock /></el-icon>\r\n              <h3 class=\"section-title\"></h3>\r\n            </div>\r\n            \r\n            <div class=\"form-flex\">\r\n              <el-form-item prop=\"password\" class=\"form-item-modern password-field\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Key /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <div v-if=\"!isEditingPassword\" class=\"password-display\">\r\n                  <el-text class=\"readonly-text password-mask\"></el-text>\r\n                  <el-button type=\"primary\" link @click=\"toggleEditPasswordMode\" class=\"edit-btn\">\r\n                    <el-icon><Edit /></el-icon>\r\n                  </el-button>\r\n                </div>\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"new_password\" v-if=\"isEditingPassword\" :rules=\"newPasswordRules\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Lock /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-input \r\n                  v-model=\"form.new_password\" \r\n                  type=\"password\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  show-password\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item prop=\"confirm_new_password\" v-if=\"isEditingPassword\" :rules=\"confirmNewPasswordRules\" class=\"form-item-modern\">\r\n                <template #label>\r\n                  <div class=\"modern-label\">\r\n                    <el-icon><Lock /></el-icon>\r\n                    <span></span>\r\n                  </div>\r\n                </template>\r\n                <el-input \r\n                  v-model=\"form.confirm_new_password\" \r\n                  type=\"password\" \r\n                  placeholder=\"\"\r\n                  class=\"modern-input\"\r\n                  show-password\r\n                />\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"action-buttons\">\r\n            <div v-if=\"!isEditing && !isEditingPassword\" class=\"button-row\">\r\n              <el-button type=\"primary\" size=\"large\" @click=\"toggleEditMode\" class=\"action-btn primary-btn\">\r\n                <el-icon><Edit /></el-icon>\r\n                \r\n              </el-button>\r\n              <el-button type=\"warning\" size=\"large\" @click=\"toggleEditPasswordMode\" class=\"action-btn warning-btn\">\r\n                <el-icon><Key /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n            \r\n            <div v-if=\"isEditing && !isEditingPassword\" class=\"button-row\">\r\n              <el-button type=\"success\" size=\"large\" @click=\"onSubmit\" :loading=\"saving\" class=\"action-btn success-btn\">\r\n                <el-icon><Check /></el-icon>\r\n                \r\n              </el-button>\r\n              <el-button size=\"large\" @click=\"toggleEditMode\" :disabled=\"saving\" class=\"action-btn cancel-btn\">\r\n                <el-icon><Close /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n            \r\n            <div v-if=\"isEditingPassword\" class=\"button-row\">\r\n              <el-button type=\"success\" size=\"large\" @click=\"onPasswordSubmit\" :loading=\"saving\" class=\"action-btn success-btn\">\r\n                <el-icon><Check /></el-icon>\r\n                \r\n              </el-button>\r\n              <el-button size=\"large\" @click=\"cancelEditPasswordMode\" :disabled=\"saving\" class=\"action-btn cancel-btn\">\r\n                <el-icon><Close /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n          </div>\r\n      </el-form>\r\n\r\n      <div v-else class=\"loading-container\">\r\n        <div class=\"loading-content\">\r\n          <el-spin size=\"large\" />\r\n          <p class=\"loading-text\">...</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-card shadow=\"hover\" style=\"width:10rem; margin-top: 20px;\" v-if=\"false\">\r\n      <div class=\"header text-center\">\r\n        <Tag style=\"font-size:2rem; width:100%;\" severity=\"secondary\" value=\"\"></Tag>\r\n      </div>\r\n      \r\n      <div class=\"theme-settings\">\r\n        <div class=\"theme-switch-container\">\r\n          <div class=\"theme-info\">\r\n            <h4 class=\"theme-title\"></h4>\r\n            <p class=\"theme-description\"></p>\r\n          </div>\r\n          <div class=\"theme-control\">\r\n            <el-switch\r\n              v-model=\"isDarkMode\"\r\n              @change=\"handleThemeChange\"\r\n              active-color=\"#1f2937\"\r\n              inactive-color=\"#f59e0b\"\r\n              size=\"large\"\r\n              style=\"--el-switch-on-color: #1f2937; --el-switch-off-color: #f59e0b;\"\r\n            >\r\n              <template #active-action>\r\n                <span style=\"font-size: 14px;\"></span>\r\n              </template>\r\n              <template #inactive-action>\r\n                <span style=\"font-size: 16px;\"></span>\r\n              </template>\r\n            </el-switch>\r\n            <span class=\"theme-label\">{{ isDarkMode ? '' : '' }}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"theme-preview\">\r\n          <div class=\"preview-item light-preview\" :class=\"{ active: !isDarkMode }\">\r\n            <div class=\"preview-header\"></div>\r\n            <div class=\"preview-content\">\r\n              <div class=\"preview-line\"></div>\r\n              <div class=\"preview-line short\"></div>\r\n            </div>\r\n            <span class=\"preview-label\"></span>\r\n          </div>\r\n          <div class=\"preview-item dark-preview\" :class=\"{ active: isDarkMode }\">\r\n            <div class=\"preview-header\"></div>\r\n            <div class=\"preview-content\">\r\n              <div class=\"preview-line\"></div>\r\n              <div class=\"preview-line short\"></div>\r\n            </div>\r\n            <span class=\"preview-label\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, watch } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport EIPService from '@/service/EIPService'\r\nimport Tag from 'primevue/tag';\r\nimport {useUserStore} from '@/stores/user.js'\r\nimport { useThemeStore } from '@/stores/theme' //  store\r\nimport DeptIdToName from '@/components/Common/IdToName/Dept-IdToName.vue' //  Dept-IdToName\r\nimport TitleIdToName from '@/components/Common/IdToName/Title-IdToName.vue' //  Title-IdToName\r\nimport AreaIdToName from '@/components/Common/IdToName/Area-IdToName.vue' //  Area-IdToName\r\nimport { \r\n  User, \r\n  UserFilled, \r\n  Edit, \r\n  OfficeBuilding, \r\n  Location, \r\n  Medal, \r\n  Message, \r\n  Phone, \r\n  Lock, \r\n  Key, \r\n  Check, \r\n  Close,\r\n  Delete \r\n} from '@element-plus/icons-vue'\r\nimport 'primeicons/primeicons.css'\r\n\r\nconst userStore = useUserStore();\r\nconst themeStore = useThemeStore();\r\n\r\n// \r\nconst isDarkMode = ref(themeStore.isDark());\r\n\r\n// \r\nwatch(() => themeStore.currentTheme, (newTheme) => {\r\n  isDarkMode.value = newTheme === 'dark';\r\n});\r\n\r\n// \r\nconst handleThemeChange = (value) => {\r\n  themeStore.setTheme(value ? 'dark' : 'light');\r\n  ElMessage.success(`${value ? '' : ''}`);\r\n};\r\n\r\n\r\n// Form ref \r\nconst formRef = ref(null)\r\nconst fileInput = ref(null)\r\n\r\n// \r\nconst form = reactive({\r\n  id: '',\r\n  name: '',\r\n  en_name: '',\r\n  dpt_id: '',\r\n  title_id: '',\r\n  ext_group: '',\r\n  ext_num: '',\r\n  area_id: '',\r\n  email: '',\r\n  password: '', //  password_hash  password\r\n  new_password: '', // \r\n  confirm_new_password: '', // \r\n  profile_image: '' // \r\n})\r\n\r\n// \r\nconst profileImageUrl = ref('')\r\nconst uploadingImage = ref(false)\r\n\r\n\r\n// \r\nconst newPasswordRules = [\r\n  {\r\n    validator: (rule, value, callback) => {\r\n      if (isEditingPassword.value) {\r\n        if (!value) {\r\n          callback(new Error(''));\r\n        } else {\r\n          const regex = /^(?=.*[a-zA-Z])(?=.*\\d).{7,}$/;\r\n          if (!regex.test(value)) {\r\n            callback(new Error('7'));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n    trigger: 'blur'\r\n  }\r\n];\r\n\r\n// \r\nconst confirmNewPasswordRules = [\r\n  {\r\n    validator: (rule, value, callback) => {\r\n      if (isEditingPassword.value && form.new_password && value !== form.new_password) {\r\n        callback(new Error(''));\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n    trigger: 'blur'\r\n  }\r\n];\r\n\r\n// \r\nconst loaded = ref(false)\r\nconst saving = ref(false)\r\nconst isEditing = ref(false) // \r\nconst isEditingPassword = ref(false) // \r\nconst showPassword = ref(false) // /\r\nconst originalForm = ref({}) // \r\nconst originalPasswordForm = ref({ // \r\n  password: '',\r\n  new_password: '',\r\n  confirm_new_password: ''\r\n})\r\n\r\n// \r\nasync function loadData() {\r\n  try {\r\n    const res = await EIPService.getEmployeeDataByID(userStore.userId)\r\n    console.log(res.data);\r\n    // API  assign  form\r\n    Object.assign(form, res.data)\r\n    Object.assign(originalForm.value, res.data) // \r\n    // \r\n    originalPasswordForm.value.password = res.data.password;\r\n    originalPasswordForm.value.new_password = '';\r\n    originalPasswordForm.value.confirm_new_password = '';\r\n    \r\n    //  URL\r\n    updateProfileImageUrl();\r\n  } catch (err) {\r\n    console.error(err)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loaded.value = true\r\n  }\r\n}\r\n\r\n//  ()\r\nasync function onSubmit() {\r\n  // \r\n  formRef.value.validate(async valid => {\r\n    if (!valid) return;\r\n\r\n    saving.value = true;\r\n    try {\r\n      const dataToSave = { ...form };\r\n      // \r\n      delete dataToSave.password;\r\n      delete dataToSave.old_password;\r\n      delete dataToSave.new_password;\r\n      delete dataToSave.confirm_new_password;\r\n      delete dataToSave.emp_status;\r\n      delete dataToSave.dpt_id;\r\n      delete dataToSave.area_id;\r\n      delete dataToSave.id;\r\n      delete dataToSave.title_id;\r\n      delete dataToSave.name;\r\n      \r\n      console.log(\"dataToSave:\",dataToSave);\r\n      await EIPService.editEmployeeData(userStore.userId, dataToSave);\r\n      ElMessage.success('');\r\n      isEditing.value = false; // \r\n      loadData(); // \r\n    } catch (err) {\r\n      console.error(err);\r\n      const msg = err.response?.data?.error || err.message;\r\n      ElMessage.error('' + msg);\r\n    } finally {\r\n      saving.value = false;\r\n    }\r\n  });\r\n}\r\n\r\n//  ()\r\nasync function onPasswordSubmit() {\r\n  formRef.value.validate(async valid => {\r\n    if (!valid) return;\r\n\r\n    if (form.new_password !== form.confirm_new_password) {\r\n      //  validator \r\n      return;\r\n    }\r\n\r\n    saving.value = true;\r\n    try {\r\n      const dataToSave = {\r\n        newPassword: form.new_password\r\n      };\r\n      let res = await EIPService.editPassword(userStore.userId,dataToSave);\r\n      if(res.data){\r\n\r\n        ElMessage.success('');\r\n        isEditingPassword.value = false; // \r\n        // \r\n        form.new_password = '';\r\n        form.confirm_new_password = '';\r\n        form.password = '********'; // \r\n        showPassword.value = false; // \r\n        originalPasswordForm.value.password = '********'; // \r\n        loadData(); // \r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      const msg = err.response?.data?.error || err.message;\r\n      ElMessage.error('' + msg);\r\n    } finally {\r\n      saving.value = false;\r\n    }\r\n  });\r\n}\r\n\r\n// \r\nfunction startEditing() {\r\n  isEditing.value = true;\r\n  isEditingPassword.value = false; // \r\n}\r\n\r\n//  ()\r\nfunction toggleEditMode() {\r\n  if (isEditing.value) {\r\n    // \r\n    Object.assign(form, originalForm.value);\r\n    formRef.value.resetFields(); // \r\n  }\r\n  isEditing.value = !isEditing.value;\r\n  // \r\n  isEditingPassword.value = false;\r\n  form.new_password = '';\r\n  form.confirm_new_password = '';\r\n}\r\n\r\n// \r\nfunction toggleEditPasswordMode() {\r\n  isEditingPassword.value = true;\r\n  isEditing.value = false; // \r\n  // \r\n  form.new_password = '';\r\n  form.confirm_new_password = '';\r\n  formRef.value.resetFields(); // \r\n}\r\n\r\n// \r\nfunction cancelEditPasswordMode() {\r\n  isEditingPassword.value = false;\r\n  // \r\n  form.password = originalPasswordForm.value.password;\r\n  form.new_password = originalPasswordForm.value.new_password;\r\n  form.confirm_new_password = originalPasswordForm.value.confirm_new_password;\r\n  formRef.value.resetFields(); // \r\n}\r\n\r\n// \r\nfunction triggerFileUpload() {\r\n  fileInput.value.click();\r\n}\r\n\r\nfunction handleFileSelect(event) {\r\n  const file = event.target.files[0];\r\n  if (!file) return;\r\n\r\n  //  (1MB)\r\n  if (file.size > 1048576) {\r\n    ElMessage.error(' 1MB');\r\n    return;\r\n  }\r\n\r\n  // \r\n  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];\r\n  if (!allowedTypes.includes(file.type)) {\r\n    ElMessage.error(' JPGJPEGPNGGIF ');\r\n    return;\r\n  }\r\n\r\n  uploadProfileImage(file);\r\n}\r\n\r\nasync function uploadProfileImage(file) {\r\n  uploadingImage.value = true;\r\n  try {\r\n    const response = await EIPService.uploadProfileImage(userStore.userId, file);\r\n    \r\n    if (response.data && response.data.profileImageUrl) {\r\n      form.profile_image = response.data.profileImageUrl;\r\n      updateProfileImageUrl(); //  URL \r\n      ElMessage.success('');\r\n    } else {\r\n      throw new Error('');\r\n    }\r\n  } catch (error) {\r\n    console.error('Upload error:', error);\r\n    const errorMessage = error.response?.data?.message || error.message || '';\r\n    ElMessage.error(errorMessage);\r\n  } finally {\r\n    uploadingImage.value = false;\r\n    // \r\n    if (fileInput.value) {\r\n      fileInput.value.value = '';\r\n    }\r\n  }\r\n}\r\n\r\nasync function deleteProfileImage() {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    });\r\n\r\n    uploadingImage.value = true; // \r\n    const response = await EIPService.deleteProfileImage(userStore.userId);\r\n    \r\n    // \r\n    if (response.status === 200) {\r\n      form.profile_image = '';\r\n      profileImageUrl.value = '';\r\n      ElMessage.success('');\r\n    } else {\r\n      throw new Error('');\r\n    }\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error('Delete error:', error);\r\n      const errorMessage = error.response?.data?.message || error.message || '';\r\n      ElMessage.error(errorMessage);\r\n    }\r\n  } finally {\r\n    uploadingImage.value = false; // \r\n  }\r\n}\r\n\r\nfunction handleAvatarError() {\r\n  //  URL\r\n  profileImageUrl.value = '';\r\n}\r\n\r\nfunction updateProfileImageUrl() {\r\n  if (form.profile_image) {\r\n    //  URL\r\n    if (form.profile_image.startsWith('/')) {\r\n      profileImageUrl.value = form.profile_image;\r\n    } else {\r\n      profileImageUrl.value = '/' + form.profile_image;\r\n    }\r\n  } else {\r\n    profileImageUrl.value = '';\r\n  }\r\n}\r\n\r\n// \r\nonMounted(()=>{\r\n  loadData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n.personal-info-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  padding: 2rem;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/*  */\r\n.background-decoration {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n  z-index: 0;\r\n}\r\n\r\n.decoration-circle {\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  animation: float 6s ease-in-out infinite;\r\n}\r\n\r\n.circle-1 {\r\n  width: 200px;\r\n  height: 200px;\r\n  top: 10%;\r\n  left: 10%;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.circle-2 {\r\n  width: 150px;\r\n  height: 150px;\r\n  top: 60%;\r\n  right: 15%;\r\n  animation-delay: 2s;\r\n}\r\n\r\n.circle-3 {\r\n  width: 100px;\r\n  height: 100px;\r\n  bottom: 20%;\r\n  left: 20%;\r\n  animation-delay: 4s;\r\n}\r\n\r\n@keyframes float {\r\n  0%, 100% { transform: translateY(0px) rotate(0deg); }\r\n  50% { transform: translateY(-20px) rotate(180deg); }\r\n}\r\n\r\n/*  */\r\n.main-card {\r\n  position: relative;\r\n  z-index: 1;\r\n  max-width: 30rem;\r\n  margin: 0 auto;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  backdrop-filter: blur(20px);\r\n  border-radius: 24px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n/*  */\r\n.card-header {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  padding: 3rem 2rem;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n.header-icon {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 80px;\r\n  height: 80px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 50%;\r\n  margin-bottom: 1rem;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.header-title {\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin: 0 0 0.5rem 0;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.header-subtitle {\r\n  font-size: 1.1rem;\r\n  opacity: 0.9;\r\n  margin: 0;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n/*  */\r\n.form-content {\r\n  padding: 1.5rem;\r\n}\r\n\r\n/*  */\r\n.profile-image-section {\r\n  margin-bottom: 2rem;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.profile-image-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.profile-image-wrapper {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.profile-avatar {\r\n  border: 4px solid #6366f1;\r\n  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.profile-avatar:hover {\r\n  transform: scale(1.05);\r\n  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.3);\r\n}\r\n\r\n.profile-image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.profile-image-wrapper:hover .profile-image-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.upload-btn, .delete-btn {\r\n  background: rgba(255, 255, 255, 0.9) !important;\r\n  border: none !important;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.upload-btn:hover, .delete-btn:hover {\r\n  background: white !important;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.profile-image-info {\r\n  text-align: center;\r\n}\r\n\r\n.profile-name {\r\n  margin: 0 0 0.25rem 0;\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: #1f2937;\r\n}\r\n\r\n.profile-subtitle {\r\n  margin: 0;\r\n  font-size: 0.875rem;\r\n  color: #6b7280;\r\n}\r\n\r\n/*  */\r\n.compact-form {\r\n  --el-form-label-font-size: 14px;\r\n}\r\n\r\n/*  */\r\n.header-actions {\r\n  margin-top: 1rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.edit-main-btn {\r\n  padding: 0.5rem 1.5rem;\r\n  border-radius: 8px;\r\n  font-weight: 500;\r\n}\r\n\r\n.edit-actions {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/*  */\r\n.form-section {\r\n  margin-bottom: 1.5rem;\r\n  background: rgba(248, 250, 252, 0.8);\r\n  border-radius: 12px;\r\n  padding: 1rem;\r\n  border: 1px solid rgba(226, 232, 240, 0.8);\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 2px solid rgba(99, 102, 241, 0.1);\r\n}\r\n\r\n.section-icon {\r\n  margin-right: 0.5rem;\r\n  color: #6366f1;\r\n  font-size: 1rem;\r\n}\r\n\r\n.section-title {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #1e293b;\r\n}\r\n\r\n/*  */\r\n.form-flex {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n/*  */\r\n.form-item-modern {\r\n  margin-bottom: 0 !important;\r\n}\r\n\r\n.modern-label {\r\n  display: flex;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: #374151;\r\n  margin-bottom: 0.25rem;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.modern-label .el-icon {\r\n  margin-right: 0.375rem;\r\n  color: #6366f1;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.modern-label .pi {\r\n  margin-right: 0.375rem;\r\n  color: #6366f1;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n/*  */\r\n.readonly-text {\r\n  font-size: 0.875rem;\r\n  color: #1f2937;\r\n  font-weight: 500;\r\n  padding: 0.5rem 0.75rem;\r\n  background: white;\r\n  /* border: 1px solid #e5e7eb; */\r\n  border-radius: 8px;\r\n  min-height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n/*  */\r\n.password-display {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n}\r\n\r\n.password-display .readonly-text {\r\n  flex: 1;\r\n  width: auto;\r\n  margin-right: 0;\r\n}\r\n\r\n.password-mask {\r\n  font-family: monospace;\r\n  letter-spacing: 2px;\r\n  width: 100%;\r\n}\r\n\r\n.edit-btn {\r\n  opacity: 0;\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.password-display:hover .edit-btn {\r\n  opacity: 1;\r\n}\r\n\r\n/*  */\r\n.modern-input {\r\n  border-radius: 12px !important;\r\n}\r\n\r\n.modern-input :deep(.el-input__wrapper) {\r\n  border-radius: 12px;\r\n  border: 2px solid #e5e7eb;\r\n  transition: all 0.3s ease;\r\n  padding: 0.75rem 1rem;\r\n}\r\n\r\n.modern-input :deep(.el-input__wrapper:hover) {\r\n  border-color: #6366f1;\r\n}\r\n\r\n.modern-input :deep(.el-input__wrapper.is-focus) {\r\n  border-color: #6366f1;\r\n  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\r\n}\r\n\r\n/*  */\r\n.action-buttons {\r\n  margin-top: 2rem;\r\n  padding-top: 2rem;\r\n  border-top: 1px solid #e5e7eb;\r\n}\r\n\r\n.button-row {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.action-btn {\r\n  border-radius: 12px !important;\r\n  padding: 0.75rem 2rem !important;\r\n  font-weight: 600 !important;\r\n  transition: all 0.3s ease !important;\r\n  border: none !important;\r\n  min-width: 140px;\r\n}\r\n\r\n.primary-btn {\r\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;\r\n  color: white !important;\r\n}\r\n\r\n.primary-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3) !important;\r\n}\r\n\r\n.warning-btn {\r\n  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%) !important;\r\n  color: white !important;\r\n}\r\n\r\n.warning-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3) !important;\r\n}\r\n\r\n.success-btn {\r\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\r\n  color: white !important;\r\n}\r\n\r\n.success-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3) !important;\r\n}\r\n\r\n.cancel-btn {\r\n  background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%) !important;\r\n  color: white !important;\r\n}\r\n\r\n.cancel-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(107, 114, 128, 0.3) !important;\r\n}\r\n\r\n/*  */\r\n.loading-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 400px;\r\n  padding: 2rem;\r\n}\r\n\r\n.loading-content {\r\n  text-align: center;\r\n}\r\n\r\n.loading-text {\r\n  margin-top: 1rem;\r\n  font-size: 1.1rem;\r\n  color: #6b7280;\r\n  font-weight: 500;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .personal-info-container {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .main-card {\r\n    margin: 0;\r\n    border-radius: 16px;\r\n  }\r\n  \r\n  .card-header {\r\n    padding: 2rem 1rem;\r\n  }\r\n  \r\n  .header-title {\r\n    font-size: 2rem;\r\n  }\r\n  \r\n  .form-content {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .form-flex {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .button-row {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  \r\n  .action-btn {\r\n    width: 100%;\r\n    max-width: 300px;\r\n  }\r\n}\r\n\r\n/*  */\r\n.theme-settings {\r\n  padding: 20px 0;\r\n}\r\n\r\n.theme-switch-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background: var(--background-secondary);\r\n  border-radius: 12px;\r\n  border: 1px solid var(--border-color);\r\n  margin-bottom: 20px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.theme-switch-container:hover {\r\n  background: var(--background-tertiary);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.theme-info {\r\n  flex: 1;\r\n}\r\n\r\n.theme-title {\r\n  margin: 0 0 5px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.theme-description {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.theme-control {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.theme-label {\r\n  font-size: 12px;\r\n  color: var(--text-secondary);\r\n  font-weight: 500;\r\n  text-align: center;\r\n}\r\n\r\n/*  */\r\n.theme-preview {\r\n  display: flex;\r\n  gap: 15px;\r\n  justify-content: center;\r\n}\r\n\r\n.preview-item {\r\n  width: 80px;\r\n  height: 60px;\r\n  border-radius: 8px;\r\n  border: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.preview-item.active {\r\n  border-color: var(--primary-color);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.preview-item:hover {\r\n  transform: scale(1.02);\r\n}\r\n\r\n.light-preview {\r\n  background: #ffffff;\r\n}\r\n\r\n.light-preview .preview-header {\r\n  height: 15px;\r\n  background: #f8fafc;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.light-preview .preview-content {\r\n  padding: 8px;\r\n}\r\n\r\n.light-preview .preview-line {\r\n  height: 3px;\r\n  background: #cbd5e1;\r\n  margin-bottom: 4px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.light-preview .preview-line.short {\r\n  width: 60%;\r\n}\r\n\r\n.dark-preview {\r\n  background: #1e293b;\r\n}\r\n\r\n.dark-preview .preview-header {\r\n  height: 15px;\r\n  background: #334155;\r\n  border-bottom: 1px solid #475569;\r\n}\r\n\r\n.dark-preview .preview-content {\r\n  padding: 8px;\r\n}\r\n\r\n.dark-preview .preview-line {\r\n  height: 3px;\r\n  background: #64748b;\r\n  margin-bottom: 4px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.dark-preview .preview-line.short {\r\n  width: 60%;\r\n}\r\n\r\n.preview-label {\r\n  position: absolute;\r\n  bottom: 2px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  font-size: 10px;\r\n  color: var(--text-secondary);\r\n  font-weight: 500;\r\n}\r\n\r\n/*  */\r\n[data-theme=\"dark\"] .theme-switch-container {\r\n  background: var(--background-secondary);\r\n  border-color: var(--border-color);\r\n}\r\n\r\n[data-theme=\"dark\"] .theme-switch-container:hover {\r\n  background: var(--background-tertiary);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n[data-theme=\"dark\"] .light-preview {\r\n  border-color: #475569;\r\n}\r\n\r\n[data-theme=\"dark\"] .dark-preview {\r\n  border-color: #64748b;\r\n}\r\n</style>\r\n","import script from \"./PersonalInformation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalInformation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalInformation.vue?vue&type=style&index=0&id=ed92a468&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ed92a468\"]])\n\nexport default __exports__","<template>\r\n        <svg\r\n          viewBox=\"0 0 800 600\"\r\n          style=\"cursor: pointer; display: block; width: 100%; height: auto;\"\r\n          class=\"pt-5 pl-5 mr-2\"\r\n        >\r\n          <image\r\n            href=\"@/assets/picture/DAE_history.jpg\"\r\n            width=\"800\"\r\n            height=\"600\"\r\n            preserveAspectRatio=\"xMidYMid meet\"\r\n          />\r\n        </svg>\r\n      </template>\r\n      ","import { render } from \"./DAEHistory.vue?vue&type=template&id=47bf14a5\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <el-tree-select\r\n    v-model=\"internalValue\"\r\n    :data=\"treeData\"\r\n    :render-after-expand=\"false\"\r\n    default-expand-all\r\n    placeholder=\"\"\r\n    style=\"width: 200px\"\r\n    :size=\"resolvedSize\"\r\n  />\r\n</template>\r\n\r\n<script lang=\"js\" setup>\r\nimport { ref, watch, defineProps, defineEmits, onMounted, computed } from 'vue'\r\nimport ReferenceDataService from '../../../service/ReferenceDataService'\r\n\r\n//  props\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: [String, Number, Object],\r\n    default: ''\r\n  },\r\n  //  size \r\n  size: {\r\n    type: String,\r\n    default: 'medium' //  'default', 'small', 'large' \r\n  },\r\n  //  returnType \r\n  returnType: {\r\n    type: String,\r\n    default: 'id',\r\n    validator: value => ['id', 'description'].includes(value)\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\n// \r\nconst internalValue = ref(props.modelValue)\r\nwatch(internalValue, (newVal) => {\r\n  emit('update:modelValue', newVal)\r\n})\r\nwatch(() => props.modelValue, (newVal) => {\r\n  internalValue.value = newVal\r\n})\r\n\r\n//  size \"Middle\"  \"medium\"\r\nconst resolvedSize = computed(() => {\r\n  if (props.size === 'Middle' || props.size === 'middle') {\r\n    return 'medium'\r\n  }\r\n  return props.size\r\n})\r\n\r\n//  treeData\r\nconst flatData = ref([]) \r\nconst treeData = ref([])\r\n\r\n// \r\nfunction buildTree(data) {\r\n  const groups = {}\r\n  data.forEach((item) => {\r\n    if (!groups[item.name]) {\r\n      groups[item.name] = []\r\n    }\r\n    groups[item.name].push(item)\r\n  })\r\n  \r\n  //  sortId \r\n  for (const key in groups) {\r\n    groups[key].sort((a, b) => b.sortId - a.sortId)\r\n  }\r\n  \r\n  //  returnType  value \r\n  const tree = Object.keys(groups).map((groupName) => ({\r\n    label: groupName,\r\n    value: groupName,\r\n    sortId: groups[groupName][0].sortId,\r\n    children: groups[groupName].map((item) => ({\r\n      label: item.description,\r\n      value: props.returnType === 'id' ? item.id : item.description,\r\n      sortId: item.sortId\r\n    }))\r\n  }))\r\n  \r\n  //  sortId \r\n  tree.sort((a, b) => b.sortId - a.sortId)\r\n\r\n  return tree\r\n}\r\n\r\nconst fetchTitleData = async () => {\r\n  try {\r\n    const res = await ReferenceDataService.getTitleData()\r\n    flatData.value = res.data\r\n    treeData.value = buildTree(flatData.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchTitleData()\r\n})\r\n</script>\r\n","import script from \"./TreeSelect-Title.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./TreeSelect-Title.vue?vue&type=script&lang=js&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"card justify-center\" style=\"display: flex; justify-content: center; margin-left: -10rem; padding-top: 5%;\">\r\n    <div class=\"emp-form\" style=\"position: sticky; justify-content: center;\">\r\n      <div class=\"card flex\" style=\"gap: 0; align-items: center; flex-direction: row; margin-left:-2rem\">\r\n        <div class=\"select-button-wrapper\" style=\"display: flex; align-items: center;\">\r\n          <el-radio-group v-model=\"accountHead\">\r\n            <el-radio-button label=\"TW\" value=\"TW\"  size=\"large\"/>\r\n            <el-radio-button label=\"OP\" value=\"OP\"  size=\"large\"/>\r\n          </el-radio-group>\r\n        </div>\r\n        <FloatLabel variant=\"on\" class=\"float-label-wrapper\" style=\"flex: 0;\">\r\n          <InputText\r\n            v-model=\"accountTail\"\r\n            autocomplete=\"off\"\r\n            class=\"no-margin\"\r\n            :invalid=\"accountInvalid\"\r\n            @input=\"() => { isTouched_Account = true; }\"\r\n          />\r\n          <label></label>\r\n        </FloatLabel>\r\n        \r\n      </div>\r\n      <div class=\"card flex field-detail\" style=\"margin-left: -1rem;\">\r\n        <label v-if=\"accountInvalid\" style=\"color:darkgray;\">\r\n          ()\r\n        </label>\r\n        <label v-else style=\"color:darkgrey;\">\r\n          {{ accountHead ? ': ' + accountHead + accountTail : '' }}\r\n        </label>\r\n      </div>\r\n      <div class=\"card flex flex-wrap justify-center gap-4\">\r\n        <FloatLabel variant=\"on\">\r\n          <InputText v-model=\"name\" :invalid=\"userNameInvalid\" @input=\"() => { isTouched_Name = true; }\" autocomplete=\"off\" />\r\n          <label></label>\r\n        </FloatLabel>\r\n      </div>\r\n\r\n      <div class=\"card flex\" style=\"gap: 0;display: flex; flex-direction: row; align-items: center;\">\r\n        <!--  -->\r\n        <IftaLabel variant=\"in\" style=\"display: flex; flex-direction: row; align-items: center;\">\r\n          <InputText id=\"reg_mail\" style=\"width:16rem;\" v-model=\"email\" fluid placeholder=\": dae.davidlu@gmail.com\" />\r\n          <label for=\"reg_mail\"></label>\r\n          <label for=\"reg_mail\" :style=\"{ color: isMailValid ? 'black' : 'darkgrey', marginLeft: '5px' }\">\r\n            {{ isMailValidText }}\r\n          </label>\r\n        </IftaLabel>\r\n\r\n        <!-- mail server -->\r\n        <!-- <IftaLabel style=\"margin-left: -1px;\">\r\n          <InputText style=\"border-left: none; width: 5rem; border-radius: 0%;\" v-model=\"regMail_tailSection\" disabled placeholder=\"Disabled\" />\r\n        </IftaLabel> -->\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"card flex flex-wrap justify-center gap-4\">\r\n        <FloatLabel variant=\"on\" class=\"w-full md:w-14rem\">\r\n          <InputText v-model=\"extGroup\"/>\r\n          <label> (ext_group)</label>\r\n        </FloatLabel>\r\n        <FloatLabel variant=\"on\" class=\"w-full md:w-14rem\">\r\n          <InputText v-model=\"extNum\"/>\r\n          <label> (ext_num)</label>\r\n        </FloatLabel>\r\n      </div>\r\n\r\n      <div class=\"card flex flex-wrap justify-center\">\r\n        <TreeSelectArea v-model=\"selectedAreaId\"></TreeSelectArea>\r\n      </div>\r\n\r\n      <div class=\"card flex flex-wrap justify-center\">\r\n        <TreeSelectDepartment v-model=\"selectedDptId\"/>\r\n      </div>\r\n\r\n      <div class=\"card flex flex-wrap justify-center\">\r\n        <TreeSelectTitle v-model=\"selectedTitleId\"></TreeSelectTitle>\r\n      </div>\r\n\r\n      <el-button type=\"primary\" :loading=\"submitting\" @click=\"submit\" style=\"margin-left: 10rem; margin-top: 1rem;\"></el-button>\r\n    </div>\r\n  </div>\r\n  <Toast :baseZIndex=\"10001\" />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watchEffect, computed, inject, onMounted } from 'vue';\r\nimport InputText from 'primevue/inputtext';\r\nimport Toast from 'primevue/toast';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport FloatLabel from 'primevue/floatlabel';\r\nimport IftaLabel from 'primevue/iftalabel';\r\nimport EIPService from '../../service/EIPService';\r\n//  SelectButton \r\n// import SelectButton from 'primevue/selectbutton';\r\nimport TreeSelectDepartment from \"@/components/Common/TreeSelect-getData/TreeSelect-Department.vue\";\r\nimport TreeSelectTitle from \"@/components/Common/TreeSelect-getData/TreeSelect-Title.vue\";\r\nimport TreeSelectArea from \"@/components/Common/TreeSelect-getData/TreeSelect-Area.vue\";\r\n\r\ninject('$axios');\r\nconst submitting = ref(false);\r\nconst name = ref(\"\");\r\nconst accountTail = ref(\"\");\r\nconst email = ref(\"\");\r\nconst isTouched_Account = ref(false);\r\nconst isTouched_Name = ref(false);\r\n//  accountHead  'TW' 'OP'\r\nconst accountHead = ref('TW');\r\n//  accountHeadOptions \r\n// const accountHeadOptions = ref(['TW', 'OP']);\r\nconst dptsList = ref([]); // \r\nconst titlesList = ref([]);\r\nconst selectedDptId = ref(); // \r\nconst selectedTitleId = ref();\r\nconst selectedAreaId = ref();\r\nconst regMail_tailSection = ref();\r\n\r\n// (ext_group)  (ext_num)\r\nconst extGroup = ref(\"\");\r\nconst extNum = ref(\"\");\r\n\r\nconst userNameInvalid = computed(() => {\r\n  if (!isTouched_Name.value) {\r\n    return false;\r\n  }\r\n  return (!name.value);\r\n});\r\n\r\nconst accountInvalid = computed(() => {\r\n  if (!isTouched_Account.value) {\r\n    return false;\r\n  }\r\n  let userInput = accountTail.value || \"\";\r\n  const pattern = /^[0-9]{4}$/; // \r\n  return !(pattern.test(userInput) && userInput.length === 4);\r\n});\r\n\r\nconst submit_AccountValid = () => {\r\n  let userInput = accountTail.value || \"\";\r\n  const pattern = /^[0-9]{4}$/;\r\n  return (pattern.test(userInput) && userInput.length === 4);\r\n};\r\n\r\nconst getDptsList = async () => {\r\n  const response = await EIPService.getDptsList();\r\n  dptsList.value = response.data\r\n    .sort((a, b) => parseInt(a.dptsIndex) - parseInt(b.dptsIndex))\r\n    .map(item => ({\r\n      name: item.chName,\r\n      value: item.enName\r\n    }));\r\n};\r\n\r\nconst getTitlesList = async () => {\r\n  const response = await EIPService.getTitlesList();\r\n  titlesList.value = response.data\r\n    .filter(item => item.shortEnName !== 'GM')\r\n    .sort((a, b) => parseInt(a.dptsIndex) - parseInt(b.dptsIndex))\r\n    .map(item => ({\r\n      name: item.chName,\r\n      value: item.enName\r\n    }));\r\n  console.log(response.data);\r\n};\r\n\r\nonMounted(() => {\r\n  getDptsList();\r\n  getTitlesList();\r\n});\r\n\r\nconst toast = useToast();\r\n\r\nconst validField = () => {\r\n  let missingLabels = [];\r\n  if (!name.value) missingLabels.push(\"\");\r\n  if (!accountHead.value) missingLabels.push(\"\");\r\n  if (!accountTail.value) missingLabels.push(\"\");\r\n  if (!email.value) missingLabels.push(\"\");\r\n  if (!selectedTitleId.value || selectedTitleId.value === '') missingLabels.push(\"\");\r\n  if (!selectedDptId.value || selectedDptId.value === '') missingLabels.push(\"\");\r\n  // \r\n  if (missingLabels.length > 0) {\r\n    toast.add({\r\n      severity: 'warn',\r\n      summary: ` ${missingLabels.join('')} `,\r\n      detail: '',\r\n      life: 3000\r\n    });\r\n    return false;\r\n  }\r\n  // // \r\n  // const pattern = /^[A-Za-z0-9_]+$/;\r\n  // if (!(pattern.test(email.value))) {\r\n  //   toast.add({\r\n  //     severity: 'warn',\r\n  //     summary: ``,\r\n  //     detail: '',\r\n  //     life: 3000\r\n  //   });\r\n  //   return false;\r\n  // }\r\n  if (!submit_AccountValid()) {\r\n    toast.add({\r\n      severity: 'warn',\r\n      summary: ``,\r\n      detail: '',\r\n      life: 3000\r\n    });\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nconst isMailValidText = computed(() => {\r\n  const pattern = /^[A-Za-z0-9_]+$/;\r\n  return pattern.test(email.value) ? '' : \" ( '_', , )\";\r\n});\r\n\r\nwatchEffect(() => {});\r\n\r\nconst submit = async () => {\r\n  if (validField()) {\r\n    const regFormData = {\r\n      regName: name.value,\r\n      regAccount: accountHead.value + accountTail.value,\r\n      regEmail: email.value + regMail_tailSection.value,\r\n      regSelectedDpt: selectedDptId.value,\r\n      regSelectedTitle: selectedTitleId.value,\r\n      regExtGroup: extGroup.value, // \r\n      regExtNum: extNum.value,      // \r\n      regAreaId: selectedAreaId.value,\r\n    };\r\n    console.log(\":\", regFormData);\r\n    submitting.value = true;\r\n    \r\n    try {\r\n      const response = await EIPService.submitRegForm(regFormData);\r\n      console.log(\"response:\", response.data);\r\n      toast.add({\r\n        severity: 'success',\r\n        summary: '',\r\n        detail: '',\r\n        life: 3000\r\n      });\r\n      // \r\n      name.value = \"\";\r\n      accountTail.value = \"\";\r\n      email.value = \"\";\r\n      extGroup.value = \"\";\r\n      extNum.value = \"\";\r\n      selectedAreaId.value = null;\r\n      selectedDptId.value = null;\r\n      selectedTitleId.value = null;\r\n      //  isTouched \r\n      isTouched_Account.value = false;\r\n      isTouched_Name.value = false;\r\n    } catch (error) {\r\n      console.error(\":\", error);\r\n      let errorMessage = \"\";\r\n      //  Conflict \r\n      if (error.response && error.response.status === 409) {\r\n        errorMessage = \"!\";\r\n      } else if (error.response && error.response.data) {\r\n        errorMessage = error.response.data;\r\n      }\r\n      toast.add({\r\n        severity: 'error',\r\n        summary: '',\r\n        detail: errorMessage,\r\n        life: 3000\r\n      });\r\n    } finally {\r\n      submitting.value = false;\r\n    }\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.emp-form {\r\n  border: 1px solid #ccc; /*  */\r\n  padding: 20px;          /*  */\r\n  border-radius: 8px;     /*  */\r\n  background-color: #fff; /*  */\r\n}\r\n.no-margin {\r\n  margin: 0 !important;\r\n}\r\n.card {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  align-items: center;\r\n  gap: 0; /*  */\r\n}\r\n.select-button-wrapper,\r\n.float-label-wrapper {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.field-detail {\r\n  margin-top: -40px;\r\n  margin-left: 5px;\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import script from \"./employee-registration.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./employee-registration.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./employee-registration.vue?vue&type=style&index=0&id=6211804a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6211804a\"]])\n\nexport default __exports__","<template>\r\n    <h1></h1>\r\n    <div class=\"card\">\r\n      <DataTable\r\n        v-model:editingRows=\"editingRows\"\r\n        :value=\"users\"\r\n        editMode=\"row\"\r\n        dataKey=\"userId\"\r\n        @row-edit-save=\"onRowEditSave\"\r\n        :pt=\"{\r\n          table: { style: 'max-width: 300rem; min-width: 80rem' },\r\n          column: {\r\n            bodycell: ({ state }) => ({\r\n              style: state['d_editing'] && 'padding-top: 0.75rem; padding-bottom: 0.75rem'\r\n            })\r\n          }\r\n        }\"\r\n      >\r\n        <Column field=\"userId\" header=\"\" style=\"width: 10%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"userName\" header=\"\" style=\"width: 15%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"dptEnName\" header=\"\" style=\"width: 10%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"titleEnName\" header=\"\" style=\"width: 10%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"email\" header=\"\" style=\"width: 20%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"accountStatus\" header=\"\" style=\"width: 10%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <Select v-model=\"data[field]\" :options=\"statuses\" optionLabel=\"label\" optionValue=\"value\" placeholder=\"Select a Status\" fluid>\r\n              <template #option=\"slotProps\">\r\n                <Tag :value=\"slotProps.option.value\" :severity=\"getStatusLabel(slotProps.option.value)\" />\r\n              </template>\r\n            </Select>\r\n          </template>\r\n          <template #body=\"slotProps\">\r\n            <Tag :value=\"slotProps.data.accountStatus\" :severity=\"getStatusLabel(slotProps.data.accountStatus)\" />\r\n          </template>\r\n        </Column>\r\n  \r\n        <Column field=\"createdDate\" header=\"\" style=\"width: 15%\">\r\n        <template #body=\"{ data, field }\">\r\n          {{ formatDate(data[field]) }}\r\n        </template>\r\n      </Column>\r\n\r\n      <Column field=\"lastLoginTime\" header=\"\" style=\"width: 15%\">\r\n        <template #body=\"{ data, field }\">\r\n          {{ formatDate(data[field]) }}\r\n        </template>\r\n      </Column>\r\n  \r\n        <Column :rowEditor=\"true\" style=\"width: 10%; min-width: 8rem\" bodyStyle=\"text-align:center\"></Column>\r\n      </DataTable>\r\n    </div>\r\n\r\n    <Toast :baseZIndex=\"10001\" />\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue';\r\n  import InputText from 'primevue/inputtext';\r\n  import DataTable from 'primevue/datatable';\r\n  import Column from 'primevue/column';\r\n  import Select from 'primevue/select';\r\n  import Tag from 'primevue/tag';\r\n  import EIPService from '../../service/EIPService';\r\n  import { useToast } from 'primevue/usetoast';\r\n\r\n  // \r\n  const users = ref([]);\r\n  const editingRows = ref([]);\r\n  const statuses = ref([\r\n    { label: 'Active', value: 'Active' },\r\n    { label: 'Inactive', value: 'Inactive' }\r\n  ]);\r\n  \r\n  onMounted(async () => {\r\n    const response = await EIPService.getUsersList();\r\n    users.value = response.data;\r\n  });\r\n  const toast = useToast();\r\n  \r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'Active':\r\n        return 'success';\r\n      case 'Inactive':\r\n        return 'danger';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  \r\n  const formatDate = (dateString) => {\r\n    if (!dateString || dateString === '0001-01-01T00:00:00') {\r\n      return '';\r\n    }\r\n    return new Date(dateString).toLocaleString();\r\n  };\r\n  \r\n  const onRowEditSave = async (row) => {\r\n    const userData = row.newData;\r\n    try {\r\n      const response = await EIPService.updateUsers(userData);\r\n      const updatedUser = response.data;\r\n\r\n      const index = users.value.findIndex(user => user.userId === updatedUser.userId);\r\n      if (index !== -1) {\r\n        users.value[index] = updatedUser;\r\n        toast.add({\r\n          severity: 'warn',\r\n          summary: `\"${userData.userName}\" `,\r\n          detail: '',\r\n          life: 3000\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating user:', error);\r\n    }\r\n  };\r\n  \r\n\r\n  </script>\r\n  \r\n  <style>\r\n  .card {\r\n    padding: 20px;\r\n  }\r\n  </style>\r\n  ","import script from \"./userManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./userManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./userManagement.vue?vue&type=style&index=0&id=ffba7e4e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!--  -->\r\n  <div id=\"tree\" ref=\"tree\" class=\"chart-container\"></div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from 'vue'\r\nimport OrgChart from '@balkangraph/orgchart.js'\r\n\r\n// 1. orgData\r\nconst orgData = {\r\n  department: \"/\",\r\n  children: [\r\n    {\r\n      department: \"\",\r\n      person: \"\",\r\n      title:\"\",\r\n      children: [\r\n        {\r\n          department: \"\",\r\n          person: \"\",\r\n          person2:\"\",\r\n          title:\"\",\r\n          title2:\"\",\r\n          children: [{ department: \"\",person:\"\",title:\"\" }],\r\n        },\r\n        {\r\n          department: \"\",\r\n          children: [{ department: \"\" }],\r\n        },\r\n        {\r\n          department: \"\",\r\n          children: [\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n          ],\r\n        },\r\n        {\r\n          department: \"\",\r\n          children: [\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n          ],\r\n        },\r\n        {\r\n          department: \"\",\r\n          children: [\r\n            {\r\n              department: \"\",\r\n              children: [\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n              ],\r\n            },\r\n            {\r\n              department: \"\",\r\n              children: [\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n              ],\r\n            },\r\n            {\r\n              department: \"\",\r\n              children: [\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n                { department: \"\" },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          department: \"\",\r\n          children: [\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n            { department: \"\" },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n};\r\n\r\n// 2.  orgData \r\nlet globalId = 1;\r\nfunction flattenData(data, pid = null, output = []) {\r\n  const currentId = globalId++;\r\n  //  title  title \r\n  output.push({\r\n    id: currentId,\r\n    pid,\r\n    department: data.department,\r\n    title: data.title || \"\" ,\r\n    person: data.person\r\n  });\r\n  if (Array.isArray(data.children)) {\r\n    data.children.forEach(child => {\r\n      flattenData(child, currentId, output);\r\n    });\r\n  }\r\n  return output;\r\n}\r\nconst nodes = flattenData(orgData);\r\n\r\n// 3.  OrgChart\r\nonMounted(() => {\r\n  //  \"mery\"  ana\r\n  OrgChart.templates.ula = Object.assign({}, OrgChart.templates.ana);\r\n\r\nOrgChart.templates.ula.node = \r\n    `<rect x=\"0\" y=\"0\" height=\"{h}\" width=\"{w}\" fill=\"#ffffff\" stroke-width=\"1\" stroke=\"#aeaeae\"></rect>\r\n    <line x1=\"0\" y1=\"0\" x2=\"250\" y2=\"0\" stroke-width=\"2\" stroke=\"#039BE5\"></line>`;\r\n\r\nOrgChart.templates.ula.field_0 = \r\n    `<text data-width=\"200\" style=\"font-size: 30px;\" fill=\"#039BE5\" x=\"30\" y=\"55\">{val}</text>`;\r\nOrgChart.templates.ula.field_1 = \r\n    `<text data-width=\"145\" data-text-overflow=\"multiline\" style=\"font-size: 14px;\" fill=\"#afafaf\" x=\"100\" y=\"76\">{val}</text>`;\r\n\r\nOrgChart.templates.ula.img_0 = \r\n    `<clipPath id=\"{randId}\"><circle cx=\"50\" cy=\"60\" r=\"40\"></circle></clipPath>\r\n    <image preserveAspectRatio=\"xMidYMid slice\" clip-path=\"url(#{randId})\" xlink:href=\"{val}\" x=\"10\" y=\"20\" width=\"10\" height=\"10\"></image>`;\r\n\r\nOrgChart.templates.ula.menu = \r\n    `<g style=\"cursor:pointer;\" transform=\"matrix(1,0,0,1,225,12)\" data-ctrl-n-menu-id=\"{id}\">\r\n        <rect x=\"-4\" y=\"-10\" fill=\"#ffffff\" width=\"22\" height=\"22\"></rect>\r\n        <circle cx=\"0\" cy=\"0\" r=\"2\" fill=\"#039BE5\"></circle>\r\n        <circle cx=\"7\" cy=\"0\" r=\"2\" fill=\"#039BE5\"></circle>\r\n        <circle cx=\"14\" cy=\"0\" r=\"2\" fill=\"#039BE5\"></circle>\r\n    </g>`;\r\n\r\nOrgChart.templates.ula.nodeMenuButton = \r\n    `<g style=\"cursor:pointer;\" transform=\"matrix(1,0,0,1,225,105)\" data-ctrl-n-menu-id=\"{id}\">\r\n        <rect x=\"-4\" y=\"-10\" fill=\"#000000\" fill-opacity=\"0\" width=\"22\" height=\"22\"></rect>\r\n        <circle cx=\"0\" cy=\"0\" r=\"2\" fill=\"#AEAEAE\"></circle>\r\n        <circle cx=\"7\" cy=\"0\" r=\"2\" fill=\"#AEAEAE\"></circle>\r\n        <circle cx=\"14\" cy=\"0\" r=\"2\" fill=\"#AEAEAE\"></circle>\r\n    </g>`;\r\n\r\n  //  OrgChart template  \"mery\"\r\n  new OrgChart(document.getElementById(\"tree\"), {\r\n    template: \"ula\",\r\n    nodeBinding: {\r\n      field_0: \"department\",\r\n      field_1: \"person\",\r\n      field_2:\"title\"\r\n      //  img_0: \"img\"\r\n    },\r\n    nodes,\r\n    enableSearch: false,\r\n    nodeMouseClick: OrgChart.action.none\r\n  });\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.chart-container {\r\n  width: 100%;\r\n  height: 800px;\r\n  border: 1px solid #ccc;\r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\n</style>\r\n","import script from \"./orgChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./orgChart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./orgChart.vue?vue&type=style&index=0&id=f81541a6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f81541a6\"]])\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"bar\" :data=\"chartData\" :options=\"chartOptions\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n\r\nconst setChartData = () => {\r\n    return {\r\n        labels: ['Q1', 'Q2', 'Q3', 'Q4'],\r\n        datasets: [\r\n            {\r\n                label: 'Sales',\r\n                data: [540, 325, 702, 620],\r\n                backgroundColor: ['rgba(249, 115, 22, 0.2)', 'rgba(6, 182, 212, 0.2)', 'rgb(107, 114, 128, 0.2)', 'rgba(139, 92, 246 0.2)'],\r\n                borderColor: ['rgb(249, 115, 22)', 'rgb(6, 182, 212)', 'rgb(107, 114, 128)', 'rgb(139, 92, 246)'],\r\n                borderWidth: 1\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                beginAtZero: true,\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_BarBasic.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_BarBasic.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"bar\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\"  />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n\r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                label: 'My First dataset',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                borderColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                data: [65, 59, 80, 81, 56, 55, 40]\r\n            },\r\n            {\r\n                label: 'My Second dataset',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                data: [28, 48, 40, 19, 86, 27, 90]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        indexAxis: 'y',\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.8,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary,\r\n                    font: {\r\n                        weight: 500\r\n                    }\r\n                },\r\n                grid: {\r\n                    display: false,\r\n                    drawBorder: false\r\n                }\r\n            },\r\n            y: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder,\r\n                    drawBorder: false\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_BarHorizontal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_BarHorizontal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"bar\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n\r\nconst setChartData = () =>  {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                type: 'bar',\r\n                label: 'Dataset 1',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                data: [50, 25, 12, 48, 90, 76, 42]\r\n            },\r\n            {\r\n                type: 'bar',\r\n                label: 'Dataset 2',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                data: [21, 84, 24, 75, 37, 65, 34]\r\n            },\r\n            {\r\n                type: 'bar',\r\n                label: 'Dataset 3',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-orange-500'),\r\n                data: [41, 52, 24, 74, 23, 21, 32]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () =>  {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.8,\r\n        plugins: {\r\n            tooltips: {\r\n                mode: 'index',\r\n                intersect: false\r\n            },\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                stacked: true,\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                stacked: true,\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_BarStacked.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_BarStacked.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"bar\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\"  />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n\r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                label: 'My First dataset',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                borderColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                data: [65, 59, 80, 81, 56, 55, 40]\r\n            },\r\n            {\r\n                label: 'My Second dataset',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                data: [28, 48, 40, 19, 86, 27, 90]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.8,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary,\r\n                    font: {\r\n                        weight: 500\r\n                    }\r\n                },\r\n                grid: {\r\n                    display: false,\r\n                    drawBorder: false\r\n                }\r\n            },\r\n            y: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder,\r\n                    drawBorder: false\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_BarVertical.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_BarVertical.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"bar\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                type: 'line',\r\n                label: 'Dataset 1',\r\n                borderColor: documentStyle.getPropertyValue('--p-orange-500'),\r\n                borderWidth: 2,\r\n                fill: false,\r\n                tension: 0.4,\r\n                data: [50, 25, 12, 48, 56, 76, 42]\r\n            },\r\n            {\r\n                type: 'bar',\r\n                label: 'Dataset 2',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                data: [21, 84, 24, 75, 37, 65, 34],\r\n                borderColor: 'white',\r\n                borderWidth: 2\r\n            },\r\n            {\r\n                type: 'bar',\r\n                label: 'Dataset 3',\r\n                backgroundColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                data: [41, 52, 24, 74, 23, 21, 32]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.6,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_Combo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_Combo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card flex justify-center\">\r\n        <Chart type=\"doughnut\" :data=\"chartData\" :options=\"chartOptions\" class=\"w-full md:w-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref(null);\r\n\r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.body);\r\n\r\n    return {\r\n        labels: ['A', 'B', 'C'],\r\n        datasets: [\r\n            {\r\n                data: [540, 325, 702],\r\n                backgroundColor: [documentStyle.getPropertyValue('--p-cyan-500'), documentStyle.getPropertyValue('--p-orange-500'), documentStyle.getPropertyValue('--p-gray-500')],\r\n                hoverBackgroundColor: [documentStyle.getPropertyValue('--p-cyan-400'), documentStyle.getPropertyValue('--p-orange-400'), documentStyle.getPropertyValue('--p-gray-400')]\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n\r\n    return {\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    cutout: '60%',\r\n                    color: textColor\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n</script>\r\n","import script from \"./PC_Doughnut.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_Doughnut.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"line\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                label: 'First Dataset',\r\n                data: [65, 59, 80, 81, 56, 55, 40],\r\n                fill: false,\r\n                borderColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                tension: 0.4\r\n            },\r\n            {\r\n                label: 'Second Dataset',\r\n                data: [28, 48, 40, 19, 86, 27, 90],\r\n                fill: false,\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                tension: 0.4\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.6,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_Line.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_Line.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"line\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                label: 'Dataset 1',\r\n                fill: false,\r\n                borderColor: documentStyle.getPropertyValue('--p-cyan-500'),\r\n                yAxisID: 'y',\r\n                tension: 0.4,\r\n                data: [65, 59, 80, 81, 56, 55, 10]\r\n            },\r\n            {\r\n                label: 'Dataset 2',\r\n                fill: false,\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                yAxisID: 'y1',\r\n                tension: 0.4,\r\n                data: [28, 48, 40, 19, 86, 27, 90]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        stacked: false,\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.6,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                type: 'linear',\r\n                display: true,\r\n                position: 'left',\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y1: {\r\n                type: 'linear',\r\n                display: true,\r\n                position: 'right',\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    drawOnChartArea: false,\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_LineMultiAxis.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_LineMultiAxis.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card\">\r\n        <Chart type=\"line\" :data=\"chartData\" :options=\"chartOptions\" class=\"h-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\r\n        datasets: [\r\n            {\r\n                label: 'First Dataset',\r\n                data: [65, 59, 80, 81, 56, 55, 40],\r\n                fill: false,\r\n                tension: 0.4,\r\n                borderColor: documentStyle.getPropertyValue('--p-cyan-500')\r\n            },\r\n            {\r\n                label: 'Second Dataset',\r\n                data: [28, 48, 40, 19, 86, 27, 90],\r\n                fill: false,\r\n                borderDash: [5, 5],\r\n                tension: 0.4,\r\n                borderColor: documentStyle.getPropertyValue('--p-orange-500')\r\n            },\r\n            {\r\n                label: 'Third Dataset',\r\n                data: [12, 51, 62, 33, 21, 62, 45],\r\n                fill: true,\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-500'),\r\n                tension: 0.4,\r\n                backgroundColor: 'rgba(107, 114, 128, 0.2)'\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        maintainAspectRatio: false,\r\n        aspectRatio: 0.6,\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            },\r\n            y: {\r\n                ticks: {\r\n                    color: textColorSecondary\r\n                },\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_LineStyle.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_LineStyle.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card flex justify-center\">\r\n        <Chart type=\"pie\" :data=\"chartData\" :options=\"chartOptions\" class=\"w-full md:w-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n\r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.body);\r\n\r\n    return {\r\n        labels: ['A', 'B', 'C'],\r\n        datasets: [\r\n            {\r\n                data: [540, 325, 702],\r\n                backgroundColor: [documentStyle.getPropertyValue('--p-cyan-500'), documentStyle.getPropertyValue('--p-orange-500'), documentStyle.getPropertyValue('--p-gray-500')],\r\n                hoverBackgroundColor: [documentStyle.getPropertyValue('--p-cyan-400'), documentStyle.getPropertyValue('--p-orange-400'), documentStyle.getPropertyValue('--p-gray-400')]\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n\r\n    return {\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    usePointStyle: true,\r\n                    color: textColor\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n</script>\r\n","import script from \"./PC_Pie.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_Pie.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card flex justify-center\">\r\n        <Chart type=\"polarArea\" :data=\"chartData\" :options=\"chartOptions\" class=\"w-full md:w-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n\r\n    return {\r\n        datasets: [\r\n            {\r\n                data: [11, 16, 7, 3, 14],\r\n                backgroundColor: [\r\n                    documentStyle.getPropertyValue('--p-pink-500'),\r\n                    documentStyle.getPropertyValue('--p-gray-500'),\r\n                    documentStyle.getPropertyValue('--p-orange-500'),\r\n                    documentStyle.getPropertyValue('--p-purple-500'),\r\n                    documentStyle.getPropertyValue('--p-cyan-500')\r\n                ],\r\n                label: 'My dataset'\r\n            }\r\n        ],\r\n        labels: ['Pink', 'Gray', 'Orange', 'Purple', 'Cyan']\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const surfaceBorder = documentStyle.getPropertyValue('--p-content-border-color');\r\n\r\n    return {\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            r: {\r\n                grid: {\r\n                    color: surfaceBorder\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_PolarArea.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_PolarArea.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","\r\n<template>\r\n    <div class=\"card flex justify-center\">\r\n        <Chart type=\"radar\" :data=\"chartData\" :options=\"chartOptions\" class=\"w-full md:w-[30rem]\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport Chart from 'primevue/chart';\r\n\r\nonMounted(() => {\r\n    chartData.value = setChartData();\r\n    chartOptions.value = setChartOptions();\r\n});\r\n\r\nconst chartData = ref();\r\nconst chartOptions = ref();\r\n        \r\nconst setChartData = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n\r\n    return {\r\n        labels: ['Eating', 'Drinking', 'Sleeping', 'Designing', 'Coding', 'Cycling', 'Running'],\r\n        datasets: [\r\n            {\r\n                label: 'My First dataset',\r\n                borderColor: documentStyle.getPropertyValue('--p-gray-400'),\r\n                pointBackgroundColor: documentStyle.getPropertyValue('--p-gray-400'),\r\n                pointBorderColor: documentStyle.getPropertyValue('--p-gray-400'),\r\n                pointHoverBackgroundColor: textColor,\r\n                pointHoverBorderColor: documentStyle.getPropertyValue('--p-gray-400'),\r\n                data: [65, 59, 90, 81, 56, 55, 40]\r\n            },\r\n            {\r\n                label: 'My Second dataset',\r\n                borderColor: documentStyle.getPropertyValue('--p-pink-400'),\r\n                pointBackgroundColor: documentStyle.getPropertyValue('--p-pink-400'),\r\n                pointBorderColor: documentStyle.getPropertyValue('--p-pink-400'),\r\n                pointHoverBackgroundColor: textColor,\r\n                pointHoverBorderColor: documentStyle.getPropertyValue('--p-pink-400'),\r\n                data: [28, 48, 40, 19, 96, 27, 100]\r\n            }\r\n        ]\r\n    };\r\n};\r\nconst setChartOptions = () => {\r\n    const documentStyle = getComputedStyle(document.documentElement);\r\n    const textColor = documentStyle.getPropertyValue('--p-text-color');\r\n    const textColorSecondary = documentStyle.getPropertyValue('--p-text-muted-color');\r\n\r\n    return {\r\n        plugins: {\r\n            legend: {\r\n                labels: {\r\n                    color: textColor\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            r: {\r\n                grid: {\r\n                    color: textColorSecondary\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n</script>\r\n","import script from \"./PC_Radar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PC_Radar.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./PrimeChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PrimeChart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PrimeChart.vue?vue&type=style&index=0&id=4ed957c8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ed957c8\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"card\">\r\n      <DataTable\r\n        :value=\"products\"\r\n        editMode=\"cell\"\r\n        dataKey=\"id\"\r\n        @row-edit-save=\"onRowEditSave\"\r\n        :pt=\"{\r\n          table: { style: 'max-width: 100rem; min-width: 30rem' },\r\n          column: {\r\n            bodycell: ({ state }) => ({\r\n              style: state['d_editing'] && 'padding-top: 0.75rem; padding-bottom: 0.75rem'\r\n            })\r\n          }\r\n        }\"\r\n      >\r\n        <Column field=\"code\" header=\"\" style=\"width: 5%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"name\" header=\"()\" style=\"width: 8%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"URL_Side\" header=\"\" style=\"width: 5%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <Select v-model=\"data[field]\" :options=\"statuses\" optionLabel=\"label\" optionValue=\"value\" placeholder=\"Select a Status\" fluid>\r\n              <template #option=\"slotProps\">\r\n                <Tag :value=\"slotProps.option.value\" :severity=\"getStatusLabel(slotProps.option.value)\" />\r\n              </template>\r\n            </Select>\r\n          </template>\r\n          <template #body=\"slotProps\">\r\n            <Tag :value=\"slotProps.data.URL_Side\" :severity=\"getStatusLabel(slotProps.data.URL_Side)\" />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"route\" header=\"\" style=\"width: 20%\">\r\n          <template #body=\"{ data, field }\">\r\n            {{ (data[field]) }}\r\n          </template>\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" style=\"width: 100%\" fluid />\r\n          </template>\r\n        </Column>\r\n      </DataTable>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue';\r\n  import InputText from 'primevue/inputtext';\r\n  import DataTable from 'primevue/datatable';\r\n  import Column from 'primevue/column';\r\n  import Select from 'primevue/select';\r\n  import Tag from 'primevue/tag';\r\n  \r\n\r\n  const products = ref([]);\r\n  const statuses = [\r\n    { label: 'InSide', value: 'InSide' },\r\n    { label: 'OutSide', value: 'OutSide' },\r\n    { label: 'NULL', value: 'NULL' },\r\n  ];\r\n  \r\n  const mockData = [\r\n    { id: 1, code: 'A001', name: 'Product A', URL_Side: 'InSide', route: \"editDptFuncList\" },\r\n    { id: 2, code: 'B002', name: 'Product B', URL_Side: 'OutSide', route: \"http://192.168.1.133/sys/login/login.php\" },\r\n    { id: 3, code: 'C003', name: 'Product C', URL_Side: '', route: 30 },\r\n  ];\r\n  \r\n  // \r\n  onMounted(() => {\r\n    products.value = mockData;\r\n  });\r\n  \r\n\r\n  \r\n  // \r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'InSide':\r\n        return 'success';\r\n      case 'OutSide':\r\n        return 'info';\r\n      case '':\r\n        return 'danger';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  \r\n  // \r\n  const onRowEditSave = (event) => {\r\n    const { data } = event;\r\n    const index = products.value.findIndex((item) => item.id === data.id);\r\n    if (index !== -1) {\r\n      products.value[index] = { ...data };\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  .card {\r\n    padding: 20px;\r\n  }\r\n  </style>\r\n  ","import script from \"./editDptFuncList_Form.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editDptFuncList_Form.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./editDptFuncList_Form.vue?vue&type=style&index=0&id=14d86734&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setMailAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'Mail';\r\n\r\n\r\nexport default {\r\n  //\r\n  uploadFiles(formData) {\r\n    const url = `${controllerPath}/uploadFiles`;\r\n\r\n    console.log('Request uploadFiles URL:', url);\r\n\r\n    return api().post(`${controllerPath}/uploadFiles`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  //\r\n  getSecurityMailData() {\r\n    console.log(\"getSecurityMailData Path:\"+ controllerPath);\r\n    return api().get(`${controllerPath}/getSecurityMailData`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  updateSecurityMailDataWithId(securityMailData){\r\n    return api().put(`${controllerPath}/updateSecurityMailDataWithId`, securityMailData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  addSecurityMailData(securityMailData){\r\n    return api().post(`${controllerPath}/addSecurityMailData`, securityMailData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  deleteSecurityMailDataWithId(mailId){\r\n    return api().delete(`${controllerPath}/deleteSecurityMailDataWithId/${mailId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  //MailId\r\n  getLastSendId(){\r\n    return api().get(`${controllerPath}/getLastSendId/`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  //\r\n  updateSortId(bulkData){\r\n    return api().patch(`${controllerPath}/updateSortId/bulk`, bulkData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  \r\n  //\r\n  sendTestMailToLoginUser(userId){\r\n    return api().get(`${controllerPath}/sendTestMailToLoginUser/${userId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //Cron\r\n  get_Job_SecurityMail_Trigger_AlarmTime(){\r\n    return api().get(`${controllerPath}/get_Job_SecurityMail_Trigger_AlarmTime`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //Cron\r\n  updateSecurityMailCron(securityMailCronData){\r\n    return api().put(`${controllerPath}/updateSecurityMailCron`, securityMailCronData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //(/)\r\n  toggleSecurityMailIsScheduled(securityMailId){\r\n    return api().patch(`${controllerPath}/toggleSecurityMailIsScheduled/${securityMailId}`,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //service(ServiceController)\r\n  restartService(){\r\n    return api().get(`${controllerPath}/restartService`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n    \r\n  //Cron\r\n  getSendGroup_SendUser(){\r\n    return api().get(`${controllerPath}/getSendGroup_SendUser`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  //service(PowerShell)\r\n  restartService_usePowerShell(){\r\n    return api().get(`${controllerPath}/restartService_usePowerShell`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  //\r\n  getSendGroupId_WithMailId(mailId){\r\n    return api().get(`${controllerPath}/getSendGroupId_WithMailId/${mailId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  getUserData(){\r\n    return api().get(`${controllerPath}/getUserData`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  addSendGroup_SendUser(addData){\r\n    return api().post(`${controllerPath}/addSendGroup_SendUser`, addData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  updateSendGroup_SendUser(updateData){\r\n    return api().put(`${controllerPath}/updateSendGroup_SendUser`, updateData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  deleteSendGroup_SendUser(deleteData){\r\n    return api().delete(`${controllerPath}/deleteSendGroup_SendUser/${deleteData}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  updateGroupsOfMail(updateData){\r\n    return api().put(`${controllerPath}/updateGroupsOfMail`, updateData,{\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //8()\r\n  setDefaultSecurityMailCron(){\r\n    return api().get(`${controllerPath}/setDefaultSecurityMailCron`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  }\r\n};\r\n","<template>\r\n  \r\n<div style=\" display: flex;\r\n      align-items: start;\r\n      justify-content: center;\r\n      position: relative;\r\n    \">\r\n\r\n    <!-- Listbox -->\r\n    <div style=\"margin-left: -10rem;padding-left: 5rem;padding-right: 3rem;\">\r\n      <Listbox \r\n        v-model=\"selectedGroup\" \r\n        :options=\"groupsData\"\r\n        optionLabel=\"label\"\r\n        optionValue=\"sendGroupId\"\r\n        class=\"w-full md:w-14rem\"\r\n        placeholder=\"\"\r\n        listStyle=\"min-height:10rem;max-height:100rem\"\r\n        @change=\"handleGroupChange\"\r\n\r\n      />\r\n    </div>\r\n\r\n      \r\n\r\n    <!--  -->\r\n    <BlockUI  ref=\"ref_SecurityMail_CheckBox\"  :blocked=\"blocked_CheckBox\">\r\n        <Panel header=\"Basic\">\r\n    <div >\r\n          <!--  groupedData  -->\r\n          <div\r\n            v-for=\"(deptInfo, deptEnName) in groupedData\"\r\n            :key=\"deptEnName\"\r\n            style=\"margin-bottom: 1rem;\"\r\n          >\r\n            <!--  -->\r\n            <el-text tag=\"b\" style=\"display: block; margin-bottom: 0.5rem;\">\r\n              {{ deptInfo.departmentChName }}\r\n            </el-text>\r\n\r\n            <!-- el-select(key) -->\r\n            <el-select\r\n              v-model=\"selectedUsers[deptEnName]\"\r\n              multiple\r\n              :placeholder=\"' ' + deptInfo.departmentChName\"\r\n              style=\"width: 240px\"\r\n            >\r\n              <el-option\r\n                v-for=\"user in deptInfo.users\"\r\n                :key=\"user.userId\"\r\n                :label=\"user.userName\"\r\n                :value=\"user.userId\"\r\n              />\r\n            </el-select>\r\n          </div>\r\n        </div>\r\n      </Panel>\r\n    </BlockUI>\r\n    <OverlayPanel ref=\"op2\" dismissable>\r\n      <div style=\"padding: 10px;\">\r\n        <h4 style=\"margin-bottom: 15px;\">   {{ getGroupData() }} ? \r\n        </h4>\r\n  \r\n        <div class=\"p-d-flex p-jc-end\">\r\n          <Button\r\n            label=\"\"\r\n            icon=\"pi pi-check\"\r\n            @click=\"deleteSelectedGroup\"\r\n            class=\"p-button-rounded p-button-danger\"\r\n            style=\"margin-right: 10px;\"\r\n          />\r\n          <Button\r\n            label=\"\"\r\n            icon=\"pi pi-times\"\r\n            @click=\"closeDeleteGroupPopover\"\r\n            class=\"p-button-rounded p-button-secondary\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </OverlayPanel>\r\n    <div style=\"padding:1rem; padding-left: 8rem;\">\r\n      <div style=\"margin-bottom: 1rem;\">\r\n        <Button @click=\"() => { addMode = true; editMode = false; blocked_CheckBox = false; }\" label=\"\" severity=\"success\" text raised />\r\n        <Button \r\n          @click=\"checkSelectedGroup\" \r\n          label=\"\" severity=\"info\" text raised \r\n        />\r\n        <Button \r\n          @click=\"openDeleteGroupPopover($event)\" \r\n          label=\"\" severity=\"danger\" text raised \r\n          ref=\"ref2\"\r\n        />\r\n      </div>\r\n      <div style=\"margin-bottom: 2rem;\">\r\n        <Button label=\"\" severity=\"help\" v-if=\"addMode\" @click=\"submitAddGroupName\" text raised />\r\n        <Button label=\"\" severity=\"secondary\" v-if=\"addMode\" @click=\"() => { addMode = false; editMode = false; blocked_CheckBox = true }\" text raised />\r\n        <Button label=\"\" severity=\"help\" v-if=\"editMode\" @click=\"submitEditGroupName\" text raised />\r\n        <Button label=\"\" severity=\"secondary\" v-if=\"editMode\" @click=\"() => { addMode = false; editMode = false; blocked_CheckBox = true }\" text raised />\r\n      </div>\r\n      <div style=\"margin-bottom: 1rem;\" class=\"flex flex-column gap-2\">\r\n        <div v-if=\"addMode\">\r\n          <FloatLabel >\r\n            <label for=\"addGroupName\"></label>\r\n            <InputText id=\"addGroupName\" v-model=\"addGroupName\" aria-describedby=\"addGroupName-help\" :invalid=\"isInvalid(addGroupName)\" />\r\n            \r\n          </FloatLabel>\r\n          <div style=\"padding-top: 1rem;display: grid;   row-gap: 10px;\">\r\n            <InlineMessage v-if=\"isInvalid(addGroupName) || addGroupValidWarn\" severity=\"warn\"> '_'  '@' </InlineMessage>\r\n            <InlineMessage v-if=\"addGroupSelectNullWarn\" severity=\"warn\"></InlineMessage>\r\n            <InlineMessage v-if=\"addGroupInputNullWarn\" severity=\"warn\"></InlineMessage>\r\n            <InlineMessage v-if=\"addGroupError\" severity=\"error\">DeBug</InlineMessage>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <InlineMessage v-if=\"addGroupSuccess\" severity=\"success\"></InlineMessage>\r\n        </div>\r\n        <div v-if=\"editMode\">\r\n          <div class=\"flex flex-column gap-2\">\r\n              <label for=\"updateGroupName\"></label>\r\n              <InputText \r\n                id=\"updateGroupName\" \r\n                v-model=\"updateGroupName\" \r\n                aria-describedby=\"updateGroupName-help\" \r\n                :invalid=\"isInvalid(updateGroupName)\"  \r\n              />\r\n              <small id=\"updateGroupName-help\"> '_'  '@' </small>\r\n              <div style=\"padding-top: 1rem;display: grid;   row-gap: 10px;\">\r\n                \r\n                <InlineMessage v-if=\"isInvalid(updateGroupName) || updateGroupValidWarn\" severity=\"warn\"> '_'  '@'</InlineMessage>\r\n                <InlineMessage v-if=\"updateGroupInputNullWarn\" severity=\"warn\"></InlineMessage>\r\n                <InlineMessage v-if=\"updateGroupError\" severity=\"error\">DeBug</InlineMessage>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style=\" display: grid;   row-gap: 10px; \">           \r\n            <InlineMessage v-if=\"updateGroupSelectGroupWarn\" severity=\"warn\"></InlineMessage>\r\n            <InlineMessage v-if=\"updateGroupSelectNullWarn\" severity=\"warn\"></InlineMessage>\r\n            <InlineMessage v-if=\"updateGroupSuccess\" severity=\"success\"></InlineMessage>\r\n            <InlineMessage v-if=\"updateGroupAllContrast\" severity=\"contrast\"></InlineMessage>\r\n\r\n        </div>\r\n        <div style=\" display: grid;   row-gap: 10px; \">\r\n          <InlineMessage v-if=\"deleteGroupSelectGroupWarn\" severity=\"warn\"></InlineMessage>\r\n          <InlineMessage v-if=\"deleteGroupSuccess\" severity=\"success\"></InlineMessage>\r\n          <InlineMessage v-if=\"deleteGroupAllContrast\" severity=\"contrast\"></InlineMessage>\r\n\r\n        </div>\r\n    </div>\r\n    \r\n  </div>\r\n \r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { ElText } from 'element-plus'\r\nimport Listbox from 'primevue/listbox'\r\nimport MailService from \"../../service/MailService\" // \r\nimport  OverlayPanel  from 'primevue/overlaypanel';\r\nimport InputText from 'primevue/inputtext';\r\nimport BlockUI from 'primevue/blockui';\r\nimport FloatLabel from 'primevue/floatlabel';\r\nimport InlineMessage from 'primevue/inlinemessage';\r\n\r\n\r\nconst blocked_CheckBox = ref(true);\r\n\r\nconst addMode = ref(false);\r\nconst editMode = ref(false);\r\n\r\nconst addGroupSuccess = ref(false);\r\nconst updateGroupSuccess = ref(false);\r\nconst addGroupError = ref(false);\r\nconst updateGroupError = ref(false);\r\nconst addGroupValidWarn = ref(false);\r\nconst updateGroupValidWarn = ref(false);\r\nconst addGroupSelectNullWarn = ref(false);\r\nconst updateGroupSelectNullWarn = ref(false);\r\nconst addGroupInputNullWarn = ref(false);\r\nconst updateGroupInputNullWarn = ref(false);\r\nconst updateGroupSelectGroupWarn = ref(false);\r\nconst updateGroupAllContrast =ref(false);\r\nconst deleteGroupSuccess = ref(false);\r\nconst deleteGroupSelectGroupWarn = ref(false);\r\nconst deleteGroupAllContrast   = ref(false);\r\n\r\nconst op2= ref(null);\r\nconst addGroupName = ref('');\r\nconst updateGroupName =ref('');\r\nconst openDeleteGroupPopover = (event) => {\r\n  if(selectedGroup.value ===0){\r\n    deleteGroupAllContrast.value = true; // \r\n    setTimeout(() => {\r\n      deleteGroupAllContrast.value = false;\r\n    }, 5000);\r\n    return;\r\n  }\r\n  editMode.value = false;\r\n  addMode.value = false;\r\n  blocked_CheckBox.value = true;\r\n  if (selectedGroup.value && selectedGroup.value !== null ) {\r\n    op2.value.toggle(event);\r\n  }else{\r\n    deleteGroupSelectGroupWarn.value = true; // \r\n    setTimeout(() => {\r\n      deleteGroupSelectGroupWarn.value = false;\r\n    }, 5000);\r\n    return\r\n\r\n  }\r\n\r\n};\r\n\r\n//  _  @\r\nconst groupNamePattern = /^[\\u4E00-\\u9FFF\\u3040-\\u30FF\\u31F0-\\u31FFa-zA-Z0-9_@]+$/;\r\n\r\n// \r\nconst isInvalid = (value) => {\r\n  return (value && !groupNamePattern.test(value))\r\n}\r\n\r\nconst deleteSelectedGroup = () =>{\r\n  \r\n  if (selectedGroup.value && selectedGroup.value !== null ) {\r\n    //  groupsData  selectedGroup.value \r\n    const selectedGroupData = groupsData.value.find(group => group.sendGroupId === selectedGroup.value);\r\n\r\n\r\n    MailService.deleteSendGroup_SendUser(selectedGroupData.sendGroupId).then((response) => {\r\n      console.log(':', response.data)\r\n      initData();\r\n      closeDeleteGroupPopover();\r\n      deleteGroupSuccess.value = true; // \r\n      setTimeout(() => {\r\n        deleteGroupSuccess.value = false;\r\n      }, 5000);\r\n    }).catch((error) => {\r\n      console.error(':', error)\r\n    })\r\n  } \r\n}\r\nconst getGroupData = () => {\r\n  if (selectedGroup.value && selectedGroup.value !== null ) {\r\n    const selectedGroupData = groupsData.value.find(group => group.sendGroupId === selectedGroup.value);\r\n\r\n    return selectedGroupData.label; // \r\n  }return '';\r\n};\r\nconst checkSelectedGroup = () => {\r\n  if(selectedGroup.value ===0){\r\n    updateGroupAllContrast.value = true; // \r\n    setTimeout(() => {\r\n      updateGroupAllContrast.value = false;\r\n    }, 5000);\r\n    return;\r\n  }\r\n  if (selectedGroup.value) {\r\n    //  groupsData  selectedGroup.value \r\n    const selectedGroupData = groupsData.value.find(group => group.sendGroupId === selectedGroup.value);\r\n\r\n    if (selectedGroupData) {\r\n      //  label\r\n      updateGroupName.value = selectedGroupData.label;\r\n      editMode.value = true;\r\n      addMode.value = false;\r\n      blocked_CheckBox.value = false;\r\n    } else {\r\n      console.error(\"\");\r\n    }\r\n  } else {\r\n    console.log(\"DDD\");\r\n    updateGroupSelectGroupWarn.value = true; // \r\n    setTimeout(() => {\r\n      updateGroupSelectGroupWarn.value = false;\r\n    }, 10000);\r\n    return;\r\n  }\r\n};\r\n\r\nconst handleGroupChange = () => {\r\n  blocked_CheckBox.value = true;\r\n  editMode.value = false;\r\n  addMode.value = false;\r\n};\r\nconst submitAddGroupName = async () => {\r\n  // 1. \r\n  if (!addGroupName.value) {\r\n    addGroupInputNullWarn.value = true; // \r\n    setTimeout(() => {\r\n      addGroupInputNullWarn.value = false;\r\n    }, 3000);\r\n    return\r\n  }\r\n\r\n  // 2. \r\n  if (isInvalid(addGroupName.value)) {\r\n    addGroupValidWarn.value = true; // \r\n    setTimeout(() => {\r\n      addGroupValidWarn.value = false;\r\n    }, 3000);\r\n    return\r\n  }\r\n\r\n  // 3.  userIds\r\n  let allSelectedUserIds = []\r\n  for (const deptKey in selectedUsers.value) {\r\n    allSelectedUserIds = allSelectedUserIds.concat(selectedUsers.value[deptKey])\r\n  }\r\n\r\n  // 4. \r\n  if (allSelectedUserIds.length === 0) {\r\n    addGroupSelectNullWarn.value = true; // \r\n    setTimeout(() => {\r\n      addGroupSelectNullWarn.value = false;\r\n    }, 3000);\r\n    return\r\n  }\r\n\r\n  // 5. \r\n  const newAddData = {\r\n    SendUserId: JSON.stringify(allSelectedUserIds),\r\n    SendGroupName: addGroupName.value,\r\n  }\r\n\r\n  // 6. \r\n  try {\r\n    const response = await MailService.addSendGroup_SendUser(newAddData)\r\n    console.log(':', response.data)\r\n    if(response){\r\n      initData();\r\n      addGroupName.value = ''\r\n      addGroupSuccess.value = true; \r\n      blocked_CheckBox.value = true;\r\n      setTimeout(() => {\r\n        addGroupSuccess.value = false;\r\n      }, 3000);\r\n      addMode.value=false;\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    blocked_CheckBox.value = true;\r\n    addGroupError.value = true; \r\n      setTimeout(() => {\r\n        addGroupError.value = false;\r\n      }, 3000);\r\n  }\r\n}\r\n\r\nconst submitEditGroupName = async () => {\r\n  // 1. \r\n  if (!updateGroupName.value) {\r\n    updateGroupInputNullWarn.value = true; \r\n      setTimeout(() => {\r\n        updateGroupInputNullWarn.value = false;\r\n      }, 3000);\r\n    return\r\n  }\r\n\r\n  // 2. \r\n  if (isInvalid(updateGroupName.value)) {\r\n    updateGroupValidWarn.value = true; \r\n      setTimeout(() => {\r\n        updateGroupValidWarn.value = false;\r\n      }, 3000);\r\n    return\r\n  }\r\n\r\n  // 3.  userIds\r\n  let allSelectedUserIds = []\r\n  for (const deptKey in selectedUsers.value) {\r\n    allSelectedUserIds = allSelectedUserIds.concat(selectedUsers.value[deptKey])\r\n  }\r\n\r\n  // 4. \r\n  if (allSelectedUserIds.length === 0) {\r\n    updateGroupSelectNullWarn.value = true; \r\n      setTimeout(() => {\r\n        updateGroupSelectNullWarn.value = false;\r\n      }, 3000);\r\n    return\r\n  }\r\n\r\n  // 5. \r\n  const newUpdateData = {\r\n    SendGroupId: selectedGroup.value,\r\n    SendUserId: JSON.stringify(allSelectedUserIds),\r\n    SendGroupName: updateGroupName.value,\r\n  }\r\n\r\n  // 6. \r\n  try {\r\n    const response = await MailService.updateSendGroup_SendUser(newUpdateData)\r\n    if(response){\r\n      initData();\r\n      updateGroupName.value = ''\r\n      editMode.value=false;\r\n      addGroupSuccess.value = true;\r\n      blocked_CheckBox.value = true;\r\n      setTimeout(() => {\r\n        addGroupSuccess.value = false;\r\n      }, 3000);\r\n      addMode.value=false;\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    blocked_CheckBox.value = true;\r\n    updateGroupError.value = true; \r\n      setTimeout(() => {\r\n        updateGroupError.value = false;\r\n      }, 3000);\r\n  }\r\n}\r\n\r\nconst closeDeleteGroupPopover = () => {\r\n  op2.value.hide();  //  Popover\r\n  addGroupName.value = '';  // \r\n};\r\n\r\n\r\n// \r\nconst rawData = ref([])\r\n\r\n// Listbox  ID sendGroupId\r\nconst selectedGroup = ref(null)\r\n\r\n// Listbox  ( sendGroupId, label, sendUserId)\r\nconst groupsData = ref([])\r\n// \r\n//  { Design: { departmentEnName: 'Design', departmentChName: '', users: [...] }, Sales: {...} }\r\nconst groupedData = computed(() => {\r\n  return rawData.value.reduce((acc, cur) => {\r\n    const enName = cur.departmentEnName\r\n    const chName = cur.departmentChName\r\n    if (!acc[enName]) {\r\n      acc[enName] = {\r\n        departmentEnName: enName,\r\n        departmentChName: chName,\r\n        users: [],\r\n      }\r\n    }\r\n    acc[enName].users.push(cur)\r\n    return acc\r\n  }, {})\r\n})\r\n\r\nconst selectedUsers = ref({})\r\n\r\n// 1. Listbox \r\nconst getSendGroup_SendUser = async () => {\r\n  try {\r\n    const response = await MailService.getSendGroup_SendUser()\r\n    console.log(\":\", response.data)\r\n    //  sendUserId\r\n    groupsData.value = response.data.map(g => ({\r\n      sendGroupId: g.sendGroupId,\r\n      label: g.sendGroupName,\r\n      sendUserId: g.sendUserId,  // JSON  '[\"D0230\",\"D0199\",\"D0237\"]'\r\n    }))\r\n  } catch (error) {\r\n    console.error(\":\", error)\r\n  }\r\n}\r\n\r\n// 2. \r\nconst getUserData = async () => {\r\n  try {\r\n    const response = await MailService.getUserData()\r\n    console.log(\":\", response.data)\r\n    rawData.value = response.data\r\n  } catch (error) {\r\n    console.error(\":\", error)\r\n  }\r\n}\r\n\r\n//  Listbox  ID ->  selectedUsers\r\nwatch(\r\n  () => selectedGroup.value,\r\n  (newGroupId) => {\r\n    if (!newGroupId) {\r\n      // , \r\n      selectedUsers.value = {}\r\n      return\r\n    }\r\n    \r\n    // \r\n    const foundGroup = groupsData.value.find(g => g.sendGroupId === newGroupId)\r\n    if (!foundGroup) {\r\n      // \r\n      selectedUsers.value = {}\r\n      return\r\n    }\r\n\r\n    //  sendUserId (JSON \"[\\\"D0230\\\",\\\"D0199\\\"]\")\r\n    let userIds = []\r\n    try {\r\n      userIds = JSON.parse(foundGroup.sendUserId)\r\n    } catch (e) {\r\n      console.error(\"sendUserId :\", foundGroup.sendUserId, e)\r\n      userIds = []\r\n    }\r\n    \r\n    //  selectedUsers\r\n    selectedUsers.value = {}\r\n    \r\n    //  userIds  user  userId push  selectedUsers.value[]\r\n    userIds.forEach(uId => {\r\n      const user = rawData.value.find(item => item.userId === uId)\r\n      if (user) {\r\n        const dept = user.departmentEnName\r\n        if (!selectedUsers.value[dept]) {\r\n          selectedUsers.value[dept] = []\r\n        }\r\n        selectedUsers.value[dept].push(uId)\r\n      }\r\n    })\r\n  }\r\n)\r\n\r\n// \r\nonMounted(async () => {\r\n  initData();\r\n})\r\n\r\nconst initData = async () => {\r\n  await getSendGroup_SendUser() // \r\n  await getUserData()          //  user\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.block-ui-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 9999; /*  */\r\n}\r\n</style>\r\n","import script from \"./securityMail_checkBox.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./securityMail_checkBox.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./securityMail_checkBox.vue?vue&type=style&index=0&id=6ff2ab36&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6ff2ab36\"]])\n\nexport default __exports__","<template>\r\n  <h1 style=\"padding-bottom:2rem;font-size:20px\">{{ props.subject }}</h1>\r\n  <el-transfer\r\n    v-model=\"settedGroups\"\r\n    :data=\"groups\"\r\n    :titles=\"['', '']\"\r\n    @change=\"handleTransferChange\"\r\n\r\n  >\r\n    <template #left-empty>\r\n      <div class=\"addCard\" @click=\"handleAddClick\">\r\n        <i\r\n          class=\"pi pi-plus\"\r\n          style=\"height:100%; font-size: 3rem; color: rgb(156, 194, 238); cursor: pointer;\"\r\n          title=\"\"\r\n        ></i>\r\n      </div>\r\n    </template>\r\n    <template #right-empty>\r\n      <el-empty :image-size=\"60\" description=\"No data\" />\r\n    </template>\r\n  </el-transfer>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted, defineProps, onUnmounted,watch,defineEmits  } from 'vue';\r\nimport MailService from \"../../service/MailService\";\r\n\r\nconst handleTransferChange = () => {\r\n  // console.log(':', settedGroups.value);\r\n  const settedGroupsData ={\r\n    sendGroupId: JSON.stringify(settedGroups.value), //  JSON \r\n    mailId: props.mailId,\r\n  }\r\n  // console.log('settedGroupsData:', settedGroupsData);\r\n  MailService.updateGroupsOfMail(settedGroupsData);\r\n};\r\n\r\n\r\n\r\nconst props = defineProps({\r\n  mailId: {\r\n    type: Number,\r\n    required: true, // \r\n  },\r\n  subject: {\r\n    type: String,\r\n    required: true, // \r\n  },\r\n});\r\nconst emit = defineEmits(['switchTab']);\r\n\r\n// \r\nconst groups = ref([]); // Transfer \r\nconst settedGroups = ref([]); // Transfer \r\nconst handleAddClick = () => {\r\n  //  tab\r\n  emit('switchTab', '');\r\n};\r\n\r\n//  mailId \r\nasync function getSendGroupId_WithMailId(mailId) {\r\n  try {\r\n    const response = await MailService.getSendGroupId_WithMailId(mailId);\r\n\r\n    // console.log(\"response.data.sendGroupId:\", response.data);\r\n\r\n    settedGroups.value = response.data;  \r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n}\r\n\r\nconst getSendGroup_SendUser = async () => {\r\n  try {\r\n    const response = await MailService.getSendGroup_SendUser();\r\n    // console.log(\"getSendGroup_SendUser  response.data:\", response.data);\r\n    const sendGroupData = response.data.map(group => ({\r\n      key: group.sendGroupId,\r\n      label: group.sendGroupName,\r\n    }));\r\n\r\n    groups.value = sendGroupData;\r\n    // console.log(\"getSendGroup_SendUser  data.value:\", groups.value);\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n};\r\n//  mailId \r\nwatch(\r\n  () => props.mailId,\r\n  (newMailId) => {\r\n    \r\n    getSendGroupId_WithMailId(newMailId); //  mailId \r\n  },\r\n  { immediate: true } // \r\n);\r\n\r\n// \r\nonMounted( async() => {\r\n  getSendGroupId_WithMailId(props.mailId);\r\n  \r\n  await getSendGroup_SendUser();\r\n\r\n  console.log(\"subject\",props.subject);\r\n});\r\n\r\n\r\n// \r\nonUnmounted(() => {\r\n  groups.value = []; // \r\n  settedGroups.value = []; // \r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .addCard {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding-top:3.2rem;\r\n      margin-top:3rem;\r\n      height: 10rem;\r\n      width: 100%;\r\n      box-shadow: 0 4px 6px rgba(0,0,0,0.2); /* () */\r\n      position: relative;\r\n      flex: 1 1 25rem;    /* flex-grow: 1; flex-shrink: 1; flex-basis: 25rem; */\r\n      cursor: pointer;\r\n  }\r\n\r\n\r\n  .addCard .pi {\r\n      transition: transform 0.5s ease, color 0.3s ease;\r\n  }\r\n\r\n  .addCard .pi:hover {\r\n      color: rgb(156, 194, 238); /*  */\r\n      transform: scale(1.1); /*  */\r\n  }\r\n\r\n\r\n</style>","import script from \"./securityMail_transfer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./securityMail_transfer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./securityMail_transfer.vue?vue&type=style&index=0&id=27539b65&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-27539b65\"]])\n\nexport default __exports__","<template>\r\n  <el-tabs v-model=\"tab\" tab-position=\"left\" class=\"demo-tabs\">\r\n    <el-tab-pane label=\"\" name=\"\"></el-tab-pane>\r\n    <el-tab-pane label=\"\" name=\"\"></el-tab-pane>\r\n\r\n  </el-tabs>\r\n  \r\n  <div  style=\"padding-left: 5rem;margin-top: -5rem;\" >\r\n    <securityMail_transfer\r\n      v-if=\"tab === ''\"\r\n      :mailId=\"props.mailId\"\r\n      :subject=\"props.subject\"\r\n      @switchTab=\"handleSwitchTab\"\r\n\r\n    >\r\n    </securityMail_transfer>\r\n\r\n    <securityMail_checkBox\r\n\r\n      v-if=\"tab === ''\"\r\n      :mailId=\"props.mailId\">\r\n    </securityMail_checkBox>\r\n\r\n  </div>\r\n\r\n  <el-dialog\r\n        v-model=\"dialogVisible\"\r\n        title=\"\"\r\n        width=\"80rem\"\r\n        :before-close=\"handleClose\"\r\n        draggable\r\n  >\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n\r\n        </div>\r\n      </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps } from 'vue';\r\nimport securityMail_checkBox from '../securityMail_checkBox.vue';\r\nimport securityMail_transfer from '../securityMail_transfer.vue';\r\n\r\nconst props = defineProps({\r\n  mailId: {\r\n    type: Number,\r\n    required: true, // \r\n  },\r\n  subject:{\r\n    type: String,\r\n    required: true,\r\n  }\r\n});\r\n\r\nconst dialogVisible = ref(false);\r\nconst handleClose = (done) => {\r\n  console.log('Before close triggered');\r\n  done();\r\n};\r\n\r\nconst tab=ref('');\r\nconst handleSwitchTab = (newTab) => {\r\n  console.log(` tab: ${newTab}`);\r\n  tab.value = newTab;\r\n  console.log(`tab: ${tab.value}`);\r\n};\r\n\r\n</script>","import script from \"./GroupsDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GroupsDialog.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\r\n<!---->\r\n    <el-tour v-model=\"startTour\" type=\"primary\"  @change=\"onStepChange\">\r\n      <el-tour-step\r\n        :target=\"ref1?.$el\"\r\n        title=\"\"\r\n        description=\"\"\r\n      />\r\n      <el-tour-step\r\n        :target=\"ref2?.$el\"\r\n        title=\"\"\r\n        description=\"\"\r\n      />\r\n\r\n      <el-tour-step\r\n        :target=\"ref1?.$el\"\r\n        title=\"\"\r\n        description=\"\"\r\n      />\r\n      <el-tour-step\r\n        :target=\"ref3?.$el\"\r\n        title=\"\"\r\n        description=\"\"\r\n      />\r\n      <el-tour-step\r\n        :target=\"ref5?.$el\"\r\n        title=\"\"\r\n        description=\"8:00\"\r\n      />\r\n      <el-tour-step\r\n        :target=\"ref4?.$el\"\r\n        title=\"\"\r\n        description=\"\"\r\n      />\r\n    </el-tour>\r\n<!--(end)-->\r\n\r\n    <div class=\"wrapper\">\r\n      <el-divider content-position=\"center\" margin-top=\"20px\">\r\n      <el-button severity=\"info\"   @click=\"startTour = true\">\r\n        <el-icon><InfoFilled /></el-icon>&nbsp; \r\n      </el-button> \r\n   </el-divider>\r\n  \r\n      <div\r\n        style=\"\r\n          justify-content: center;\r\n          width: 90%;\r\n          border: 3px solid #757575;\r\n          box-shadow: 0 4px 6px rgba(0,0,0,0.2);\r\n          padding:10px;\r\n        \"\r\n        class=\"pt-2\"\r\n      >\r\n          <BlockUI  ref=\"ref1\"  :blocked=\"blocked\">\r\n              <Panel header=\"Basic\">\r\n\r\n                  <cron-element-plus\r\n                    v-model=\"SecurityMail_Trigger_Cron\"\r\n                    :button-props=\"{ type: 'secondary' }\"\r\n                  />\r\n                  <p class=\"text-lightest pt-2\" style=\"font-size: 25px;\">\r\n                    {{ CronExpression }}\r\n                  </p>\r\n                  <!--  -->\r\n              </Panel>\r\n          </BlockUI>\r\n\r\n                    \r\n          <div style=\"display: flex; align-items: center; margin: 0;\">\r\n          <!--  -->\r\n          <div style=\"flex: 1;\"></div>\r\n\r\n          <!--  blocked  -->\r\n          <div style=\"flex: 5; padding:1rem;padding-right:4rem;text-align: center;\">\r\n            <div  v-if=\"blocked === true\" >\r\n              <Button \r\n                severity=\"contrast\" \r\n                :disabled=\"startTour\"\r\n                ref=\"ref2\"\r\n                @click=\"handleButtonClick()\"\r\n                raised \r\n                >\r\n                \r\n              </Button>\r\n            </div>\r\n            <div v-else>\r\n                \r\n                <el-button \r\n                  style=\"height: 40px;\"\r\n                  class=\"mr-3\"\r\n                  ref=\"ref3\" \r\n                  type=\"primary\" \r\n                  :disabled=\"startTour || settingDefault\" \r\n                  :loading=\"updating\" \r\n                  @click=\"saveCronEdit()\">\r\n                 \r\n                </el-button>\r\n                <el-popover\r\n                    placement=\"top-start\"\r\n                    title=\"\"\r\n                    :width=\"200\"\r\n                    trigger=\"hover\"\r\n                    content=\"\"\r\n                >\r\n                    <template #reference>\r\n                      <Button  \r\n                          style=\"height: 40px;\"\r\n                          class=\"mr-3\"\r\n                          ref=\"ref5\"\r\n                          severity=\"warn\" \r\n                          :disabled=\"startTour\"\r\n                          :loading=\"settingDefault\" \r\n                          @click=\"SetDefaultSecurityMailCron()\">\r\n                          \r\n                      </Button>\r\n                      \r\n                  </template>\r\n                </el-popover>\r\n                <Button \r\n                  severity=\"secondary\"  \r\n                  ref=\"ref4\"\r\n                  :disabled=\"startTour\"\r\n                  @click=\"blocked=true\"\r\n                  raised \r\n                >\r\n                  \r\n                </Button>\r\n            </div>\r\n          </div>\r\n\r\n\r\n          <!-- () -->\r\n          <div v-if=\"false\" style=\"flex: 1; text-align: right;\">\r\n            <Button \r\n              severity=\"help\" \r\n              @click=\"sendTestMailToLoginUser\">\r\n              (to:\"{{userStore.userName}}\")\r\n            </Button>\r\n            <Button \r\n              severity=\"danger\" \r\n              @click=\"restartService\">\r\n              \r\n            </Button>\r\n          </div>\r\n          </div>\r\n      </div>\r\n\r\n\r\n\r\n      <div class=\"pt-6\">\r\n        <el-divider content-position=\"center\">\r\n          <el-icon style=\"background-color:mintcream ;font-size: 20px;color: #42b9a1 ;\"><star-filled /></el-icon>\r\n          <span style=\"background-color:mintcream ;font-size: 24px;font-weight: bold;  color: #42b983;\">{{ \"  \"+ selectedCity.name?selectedCity.name:'' +\"  \"}}</span>\r\n          <el-icon style=\"background-color:mintcream ;font-size: 20px;color: #42b9a1 ;\"><star-filled /></el-icon>\r\n        </el-divider>\r\n      </div>\r\n        \r\n      <!--------------------card------------------------>\r\n\r\n      <div v-if=\"selectedCity?.code === 'Security Mail'\" class=\"card-container mt-5\">\r\n        <VueDraggable\r\n          v-model=\"dragMails\"      \r\n          item-key=\"mailId\"          \r\n          @end=\"onDragEnd\"           \r\n          ghost-class=\"ghost\"\r\n          class=\"card-container mt-5\"\r\n        >\r\n            <div\r\n              class=\"card-item\"\r\n              v-for=\"(mail, index) in sortedMails\"\r\n              :key=\"index\"\r\n            >\r\n              <Card class=\"my-card\">\r\n              \r\n                <template #header>\r\n                  <el-button plain  @click=\"openElDialog(mail.mailId,mail.subject)\">\r\n                    \r\n                  </el-button>\r\n      \r\n\r\n                  <Badge\r\n                    v-if=\"isLastSendMail(mail)\"\r\n                    value=\"\"\r\n                    size=\"xlarge\"\r\n                    severity=\"warn\"\r\n                    class=\"badge-top-right\"\r\n                  />\r\n                  <Badge\r\n                  v-if=\"isNextSendMail(mail, sortedMails)\"\r\n                    value=\"\"\r\n                    size=\"xlarge\"\r\n                    severity=\"danger\"\r\n                    class=\"badge-top-right\"\r\n                  />\r\n                  <Tag \r\n                    :severity=\"mail.isScheduled?'success':'danger'\" \r\n                    :value=\"mail.isScheduled?'':''\" \r\n                    @click=\"toggleIsScheduled(mail)\"\r\n                    rounded\r\n                     style=\"cursor: pointer;\"\r\n                  ></Tag>\r\n                  <Checkbox\r\n                    :modelValue=\"mail.isScheduled\"\r\n                    @update:modelValue=\"() => toggleIsScheduled(mail)\"\r\n                    binary\r\n                  />\r\n\r\n\r\n                  <div class=\"flex gap-4 mt-1 mb-3 ml-5\" style=\"width:80%; \">\r\n                    <Button\r\n                      label=\"\"\r\n                      severity=\"secondary\"\r\n                      outlined\r\n                      class=\"w-full\"\r\n                      @click=\"deleteMail(mail,$event)\"\r\n                    />\r\n                    \r\n                    <Button\r\n                      label=\"\"\r\n                      class=\"w-full\"\r\n                      @click=\"openDialog(mail, '')\"\r\n                    />\r\n\r\n                  </div>\r\n                  <Image\r\n                    :src=\"getPreviewImage(mail.body).src\"\r\n                    alt=\"User Header\"\r\n                    width=\"250px\"\r\n                    :preview=\"getPreviewImage(mail.body).preview\"\r\n                  />\r\n                </template>\r\n\r\n                <template #title>\r\n                  <div class=\"Mail_Subject\">{{ mail.subject }}</div>\r\n                </template>\r\n\r\n                <template #content>\r\n                  <div class=\"card-content\">\r\n                    \r\n                    <!-- (1)  8rem -->\r\n                    <div v-if=\"!mail.showFullContent\" class=\"content truncated\">\r\n                      <!--  getTruncatedContent  -->\r\n                      <div v-html=\"mail.body\"></div>\r\n                    </div>\r\n\r\n                    <!-- (2)  -->\r\n                    <div v-else class=\"content expanded\">\r\n                      <div v-html=\"mail.fullBody\" class=\"content-images\"></div>\r\n                    </div>\r\n\r\n                    <!-- (3) Checkbox + SVG showFullContent -->\r\n                    <label class=\"container\">\r\n                      <input type=\"checkbox\" v-model=\"mail.showFullContent\" />\r\n                      <svg viewBox=\"0 0 512 512\" height=\"1em\" class=\"chevron-down\">\r\n                        <path\r\n                          d=\"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192\r\n                            c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7\r\n                            86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8\r\n                            0 45.3l192 192z\"\r\n                        />\r\n                      </svg>\r\n                    </label>\r\n                  </div>\r\n                </template>\r\n\r\n            \r\n              </Card>\r\n\r\n            </div>\r\n\r\n        </VueDraggable>\r\n        <div class=\"addSecurityMail\" @click=\"openDialog(null, '')\">\r\n              <div class=\"addCard\">\r\n                <i\r\n                  class=\"pi pi-plus\"\r\n                  style=\"font-size: 5rem; color: orange; cursor: pointer;\"\r\n                  title=\"\"\r\n                ></i>\r\n              </div>\r\n        </div>\r\n       \r\n      </div>\r\n  \r\n      <div \r\n        style=\"\r\n          position: fixed; /*  fixed */\r\n          top: 13rem;\r\n          right: 5%; /*  */\r\n          margin: 0;\r\n        \" \r\n      >\r\n        <Listbox \r\n        \r\n          v-model=\"selectedCity\" \r\n          :options=\"Mails\" \r\n          optionLabel=\"name\" \r\n          checkmark :highlightOnSelect=\"false\" \r\n          class=\"w-full md:w-56\" \r\n          \r\n        />\r\n\r\n       \r\n\r\n      </div>\r\n      <div \r\n        style=\"\r\n          position: absolute; /*  fixed */\r\n          top: 20rem;\r\n          right: 10%; /*  */\r\n          margin: 0;\r\n        \" \r\n      >\r\n         \r\n      </div>\r\n\r\n      <Dialog\r\n        :header=\"dialogHeader\"\r\n        v-model:visible=\"editDialogVisible\"\r\n        style=\"width: 50vw;height:40vw;\"\r\n        modal\r\n      >\r\n        <div class=\"field\">\r\n          <label for=\"subject\"></label>\r\n          <InputText\r\n            style=\"width: 100%\"\r\n            v-model=\"selectedMail.subject\"\r\n            :invalid=\"!selectedMail.subject\"\r\n            id=\"subject\"\r\n          />\r\n        </div>\r\n        <div class=\"field\">\r\n          <label for=\"body\"></label>\r\n          <Editor\r\n            v-model=\"selectedMail.body\"\r\n            editorStyle=\"height: 320px; width: 100%;\"\r\n          >\r\n  \r\n         </Editor>\r\n        </div>\r\n        <template #footer>\r\n          <Button\r\n            label=\"\"\r\n            @click=\"editDialogVisible = false\"\r\n            class=\"p-button-text\"\r\n          />\r\n          <div v-if=\"dialogHeader===''\">\r\n              <Button label=\"\" @click=\"saveMailEdits\" />\r\n          </div>\r\n          <div v-if=\"dialogHeader===''\">\r\n              <Button label=\"\" @click=\"addMailData\" />\r\n          </div>\r\n        </template>\r\n      </Dialog>\r\n\r\n            \r\n     <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      \r\n      width=\"80rem\"\r\n      :before-close=\"handleClose\"\r\n      draggable\r\n    >\r\n        <!--  mailId  -->\r\n        <GroupsDialog v-if=\"dialogVisible\" :mailId=\"currentMailId\" :subject=\"currentMailSubject\"></GroupsDialog>\r\n       <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n \r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n\r\n\r\n    </div>\r\n\r\n    <ConfirmPopup></ConfirmPopup>\r\n\r\n    <Toast/>\r\n\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, onMounted,watch } from \"vue\";\r\n  import GroupsDialog from \"./View/GroupsDialog.vue\";\r\n  import MailService from \"../../service/MailService\";\r\n  import Dialog from \"primevue/dialog\";\r\n  import Button from \"primevue/button\";\r\n  import Card from \"primevue/card\";\r\n  import Image from \"primevue/image\";\r\n  import InputText from \"primevue/inputtext\";\r\n  import Editor from \"primevue/editor\";\r\n  import Toast from 'primevue/toast';\r\n  import { useToast } from 'primevue/usetoast';\r\n  import Badge from 'primevue/badge';\r\n  import cronstrue from 'cronstrue/i18n';\r\n  import { useUserStore } from '@/stores/user';\r\n  import BlockUI from 'primevue/blockui';\r\n  import Checkbox from 'primevue/checkbox';\r\n  import { VueDraggable } from 'vue-draggable-plus'\r\n  import Tag from 'primevue/tag';\r\n  import ConfirmPopup from 'primevue/confirmpopup';\r\n  import Listbox from 'primevue/listbox';\r\n\r\n  const userStore = useUserStore();\r\n\r\n  import { useConfirm } from \"primevue/useconfirm\";\r\n\r\n\r\nconst confirm = useConfirm();\r\nconst toast = useToast();\r\nconst updating = ref(false);\r\nconst selectedCity = ref('Security Mail');\r\nconst Mails = ref([\r\n      { name: '', code: 'Security Mail' },\r\n      { name: '', code: 'Announcement' },\r\n      { name: '', code: 'Event Notice' },\r\n      { name: '', code: 'Emergency Notice' },\r\n      { name: '', code: 'Approval Notice' }\r\n    ])\r\n\r\nconst sendTestMailToLoginUser = async () => {\r\n  try {\r\n    const response = await MailService.sendTestMailToLoginUser(userStore.userId);\r\n    if (response.data === \"Ok\") {\r\n      getLastSendId();\r\n    }\r\n    console.log(response.data);\r\n  } catch (error) {\r\n    console.error('Error occurred while sending test mail:', error);\r\n    // \r\n  }\r\n}\r\n\r\n//  Dialog \r\nconst dialogVisible = ref(false);\r\n\r\n//  Dialog \r\nconst handleClose = (done) => {\r\n  // \r\n  console.log('Before close triggered');\r\n  done(); // \r\n};\r\n\r\nconst SetDefaultSecurityMailCron =async()=>{\r\n  settingDefault.value = true;\r\n  var response = await MailService.setDefaultSecurityMailCron();\r\n  if(response.data){\r\n    settingDefault.value = false;\r\n    toast.add({ severity: 'success', summary: '', detail: '', life: 3000 });\r\n    blocked.value = true;\r\n    SecurityMail_Trigger_Cron.value=await get_Job_SecurityMail_Trigger_AlarmTime();\r\n  }else{\r\n    settingDefault.value = false;\r\n    toast.add({ severity: 'error', summary: '', detail: '', life: 3000 });\r\n  }\r\n}\r\n\r\nconst restartService = async () => {\r\n  try {\r\n    const response = await MailService.restartService_usePowerShell();\r\n    console.log(response.data);\r\n  } catch (error) {\r\n    console.error('Error occurred while restarting service:', error);\r\n    // \r\n  }\r\n}\r\n\r\nconst SecurityMail_Trigger_Cron = ref('')\r\n\r\nconst currentMailId = ref(null); //  mailId\r\nconst currentMailSubject = ref(null); //  subject\r\n//  Dialog  mailId\r\nconst openElDialog = (mailId,subject) => {\r\n  currentMailId.value = mailId; //  mailId\r\n  currentMailSubject.value = subject; //  subject\r\n  dialogVisible.value = true; //  Dialog\r\n};\r\n\r\n// \r\nconst CronExpression = computed(() => {\r\n  try {\r\n    return cronstrue.toString(SecurityMail_Trigger_Cron.value, { locale: \"zh_TW\" });\r\n    \r\n  } catch (e) {\r\n    return ' Cron ' + e;\r\n  }\r\n});\r\n\r\n\r\nconst saveCronEdit =async () =>{\r\n  updating.value = true;\r\n  // alert(CronExpression.value);\r\n  // alert(SecurityMail_Trigger_Cron.value);\r\n  var response = await MailService.updateSecurityMailCron({\r\n    TriggerName:\"Job_SecurityMail_Trigger\",\r\n    CronExpression:SecurityMail_Trigger_Cron.value\r\n  });\r\n  if(response.data){\r\n    updating.value = false;\r\n    toast.add({ severity: 'success', summary: '', detail: '', life: 3000 });\r\n    blocked.value = true;\r\n  }else{\r\n    updating.value = false;\r\n    toast.add({ severity: 'error', summary: '', detail: '', life: 3000 });\r\n  }\r\n}\r\n\r\n\r\nconst blocked = ref(true);\r\n\r\n  //  Dialog /\r\n  const editDialogVisible = ref(false);\r\n  \r\n  //  Dialog \r\n  const dialogHeader = ref(\"\");\r\n  \r\n  // \r\n  const securityMails = ref([]);\r\n  \r\n  //  mail\r\n  const selectedMail = ref({\r\n    sortId: null,\r\n    subject: \"\",\r\n    body: \"\",\r\n  });\r\n  \r\n  //  sortId \r\n  const sortedMails = computed(() =>\r\n     \r\n    dragMails.value.slice().sort((a, b) => a.sortId - b.sortId)\r\n  );\r\n  \r\n  //  Dialog \r\n  function openDialog(mail, header) {\r\n    dialogHeader.value = header; //  Dialog \r\n    if (mail) {\r\n      selectedMail.value = { ...mail }; // \r\n      // console.log(selectedMail.value);\r\n    } else {\r\n      selectedMail.value = { sortId: null, subject: \"\", body: \"\" }; // \r\n    }\r\n    editDialogVisible.value = true; //  Dialog\r\n  }\r\n  \r\n  //\r\n  const deleteMail=async(mail,event)=>{\r\n    confirm.require({\r\n        target: event.currentTarget,\r\n        message: ` \"${mail.subject}\" ?` ,\r\n        icon: 'pi pi-info-circle',\r\n        rejectProps: {\r\n            label: 'Cancel',\r\n            severity: 'secondary',\r\n            outlined: true\r\n        },\r\n        acceptProps: {\r\n            label: 'Delete',\r\n            severity: 'danger'\r\n        },\r\n        accept: async() => {\r\n            const response = await MailService.deleteSecurityMailDataWithId(mail.mailId);\r\n            console.log(response.data);\r\n            await getSecurityMailData();\r\n            toast.add({ severity: 'success', summary: 'Success', detail: '', life: 3000 });\r\n        },\r\n        reject: () => {\r\n        }\r\n    });\r\n    \r\n  }\r\n\r\n  // \r\n  async function saveMailEdits() {\r\n    try {\r\n        await MailService.updateSecurityMailDataWithId({\r\n          mailId: selectedMail.value.mailId,\r\n          subject: selectedMail.value.subject,\r\n          body: selectedMail.value.body,\r\n        });\r\n      editDialogVisible.value = false;\r\n      await getSecurityMailData();\r\n    } catch (error) {\r\n      console.error(\":\", error);\r\n    }\r\n  }\r\n\r\n  async function addMailData() {\r\n    if(!selectedMail.value.subject){\r\n      toast.add({ severity: 'warn', summary: '', detail: '', life: 3000 });\r\n      return;\r\n    }\r\n    try {\r\n        await MailService.addSecurityMailData({\r\n          subject: selectedMail.value.subject,\r\n          body: selectedMail.value.body,\r\n        });\r\n      editDialogVisible.value = false;\r\n      await getSecurityMailData();\r\n    } catch (error) {\r\n      console.error(\":\", error);\r\n    }\r\n  }\r\n  \r\n\r\n  async function getSecurityMailData() {\r\n  try {\r\n    const response = await MailService.getSecurityMailData();\r\n\r\n    // \r\n    const mailData = response.data.map(mail => {\r\n      //  mail.body width=\"250px\"\r\n      const processedBody = mail.body.replace(\r\n        /<img([^>]+)>/gi,\r\n        (match, attributes) => {\r\n          //  width \r\n          if (/width=/.test(attributes)) {\r\n            return `<img ${attributes}>`;\r\n          }\r\n          //  width=\"250px\"\r\n          return `<img ${attributes} width=\"250px\">`;\r\n        }\r\n      );\r\n\r\n      return {\r\n        ...mail,\r\n        //  isScheduled \r\n        isScheduled: mail.isScheduled.toLowerCase() === 'true',\r\n        //  fullBody\r\n        fullBody: processedBody,\r\n      };\r\n    });\r\n\r\n    //  securityMails\r\n    securityMails.value = mailData;\r\n    dragMails.value = securityMails.value.slice();\r\n\r\n    // console.log(\":\", securityMails.value);\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n}\r\n\r\nconst settingDefault= ref(false);\r\n\r\n\r\nconst getPreviewImage = (body) => {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(body, \"text/html\");\r\n  const imgElement = doc.querySelector(\"img\");\r\n\r\n  // \r\n  const hasImage = !!imgElement?.src;\r\n  return {\r\n    src: hasImage ? imgElement.src : \"/no_image.jpg\",\r\n    preview: hasImage,\r\n  };\r\n};\r\nconst lastSendId = ref(null); //  lastSendId\r\n\r\n\r\nconst getLastSendId = async () => {\r\n  const response = await MailService.getLastSendId();\r\n\r\n  lastSendId.value = response.data; // \r\n};\r\n\r\n//  mail \r\nconst isLastSendMail = (mail) => {\r\n  // console.log(\"lastSendId.value\",lastSendId.value);\r\n  return mail.mailId === lastSendId.value;\r\n};\r\n\r\n\r\n\r\n//  sortId \r\nfunction onDragEnd() {\r\n  // 1.  dragMails (sortId = index)\r\n  dragMails.value.forEach((mail, index) => {\r\n    mail.sortId = index\r\n  })\r\n\r\n  // 2.  securityMails\r\n  securityMails.value = [...dragMails.value]\r\n\r\n  // console.log(':', dragMails.value)\r\n\r\n  // 3.  onReorder\r\n  onReorder({ value: dragMails.value })\r\n}\r\n  const onReorder = (e) => {\r\n    const newOrderArray = e.value; \r\n    // console.log(\"Reorder event triggered, new list =>\", newOrderArray)\r\n\r\n    // 1.  sortId = index + 1\r\n    newOrderArray.forEach((item, index) => {\r\n      item.sortId = index ;\r\n    });\r\n\r\n    // 2.  payload\r\n    const payload = {\r\n      items: newOrderArray.map((item) => ({\r\n        mailId: item.mailId,\r\n        sortId: item.sortId,\r\n      }))\r\n    };\r\n\r\n    // console.log(\" payload =>\", payload);\r\n\r\n    // 3.  API axios or  Service\r\n    MailService.updateSortId(payload)\r\n      .then((res) => {\r\n        console.log(\"\", res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"\", err);\r\n      });\r\n  };\r\n\r\nconst isNextSendMail = (mail, sortedMails) => {\r\n  // 1. \r\n  const lastSendMail = sortedMails.find(m => m.mailId === lastSendId.value)||'0' ;\r\n\r\n\r\n  //lastSendMail())  \r\n  if(lastSendMail===undefined){\r\n    return mail.sortId === '0';\r\n  }\r\n\r\n  if (!lastSendMail) {\r\n    return false;\r\n  }\r\n\r\n  // 2.  lastSendMail \r\n  const startIndex = sortedMails.indexOf(lastSendMail);\r\n  //  total=77\r\n  const total = sortedMails.length;\r\n\r\n  // 3.  lastSendMail isScheduled  true\r\n  for (let i = 1; i <= total; i++) {\r\n    // \r\n    const checkIndex = (startIndex + i) % total;\r\n    const candidate = sortedMails[checkIndex];\r\n\r\n    //  candidate  (isScheduled === true)\r\n    if (candidate && candidate.isScheduled === true) {\r\n      //  candidate  mailmail \r\n      return mail.mailId === candidate.mailId;\r\n    }\r\n  }\r\n\r\n  //  mail false\r\n  return false;\r\n};\r\n\r\n\r\n/*************** element plus tour ***************/ \r\nconst ref1 = ref();\r\nconst ref2 = ref();\r\nconst ref3 = ref();\r\nconst ref4 = ref();\r\nconst ref5 = ref();\r\nconst startTour = ref(false)\r\nconst currentStep = ref(0);   // \r\n\r\n\r\n// \r\nconst onStepChange = (stepIndex) => {\r\n  // console.log(`${stepIndex}`);\r\n\r\n  //  1 \r\n  if (stepIndex === 2 && blocked.value) {\r\n    const buttonElement = ref2.value.$el;\r\n      buttonElement.disabled = false;\r\n\r\n      buttonElement.click();\r\n  }\r\n  // if (stepIndex === 4) {\r\n  //   if (ref4.value?.$el) {\r\n  //     console.log(\" ref4 \");\r\n  //     const buttonElement = ref4.value.$el;\r\n\r\n  //     // \r\n  //     buttonElement.disabled = false; // \r\n  //     buttonElement.scrollIntoView({ behavior: \"smooth\", block: \"center\" }); // \r\n  //     buttonElement.click(); // \r\n  //   } else {\r\n  //     console.log(\"ref4  $el \");\r\n  //   }\r\n  // }\r\n};\r\n\r\n\r\nwatch(\r\n  startTour,\r\n  (newValue, oldValue) => {\r\n    console.log(`startTour : ${oldValue} -> ${newValue}`);\r\n    if (!newValue && oldValue) {\r\n      //  startTour  true  false \r\n      if (ref4.value?.$el) {\r\n        // console.log(\" ref4 \");\r\n        // console.log(ref4.value.$el);\r\n        const buttonElement = ref4.value.$el;\r\n        buttonElement.disabled = false;\r\n        buttonElement.click();\r\n      } \r\n    }\r\n  }\r\n  \r\n);\r\n\r\n\r\n\r\n//  selectedCity \r\nwatch(selectedCity, (newValue, oldValue) => {\r\n  if (!newValue || newValue.length === 0) {\r\n    // console.log(\"\");\r\n    selectedCity.value = oldValue; // \r\n  }\r\n});\r\n\r\n\r\n// \r\nconst handleButtonClick = () => {\r\n  // console.log(\"\");\r\n  blocked.value = false; // \r\n  setTimeout(() => {\r\n    currentStep.value = 2; //  2\r\n  }, 500); // \r\n};\r\n\r\n/*************** (END)  element plus tour ***************/ \r\n\r\n\r\n\r\nconst get_Job_SecurityMail_Trigger_AlarmTime =async()=>{\r\n  const response = await MailService.get_Job_SecurityMail_Trigger_AlarmTime();\r\n  return response.data;\r\n}\r\n\r\n\r\nconst dragMails = ref([]);\r\nonMounted(async () => {\r\n  //get\r\n  await getSecurityMailData();\r\n  await getLastSendId(); // \r\n\r\n  //getCron\r\n  SecurityMail_Trigger_Cron.value=await get_Job_SecurityMail_Trigger_AlarmTime();\r\n});\r\n\r\n\r\nfunction toggleIsScheduled(m) {\r\n  // 1. \r\n  m.isScheduled = !m.isScheduled\r\n\r\n  // 2.  API\r\n  //     axios \r\n  MailService.toggleSecurityMailIsScheduled(m.mailId)\r\n    .then(res => {\r\n      securityMails.value = res.data;\r\n    })\r\n    .catch(err => {\r\n      console.error('', err)\r\n    })\r\n\r\n  // console.log(` mailId=${m.mailId}  isScheduled  ${m.isScheduled}`);\r\n}\r\n\r\n</script>\r\n\r\n  \r\n<style scoped>\r\n  /*  5%  Footer  */\r\n  .wrapper {\r\n    margin-top:5%;\r\n    margin-bottom: 3%;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n  \r\n  /*  */\r\n  .card-container {\r\n    display: flex;\r\n    flex-wrap: wrap; /*  */\r\n    gap:1rem;       /*  */\r\n    justify-content: flex-start; /*  */\r\n  }\r\n  \r\n  .content-images img {\r\n    max-width: 250px !important; /*  */\r\n    height: auto !important;     /*  */\r\n  }\r\n  /* Card  */\r\n  .my-card {\r\n      flex: 1 1 25rem;    /* flex-grow: 1; flex-shrink: 1; flex-basis: 25rem; */\r\n      width: 20rem;   /*  */\r\n      border: 3px solid #757575;           \r\n      box-shadow: 0 4px 6px rgba(0,0,0,0.2); /* () */\r\n      padding:10px;\r\n    }\r\n  \r\n  .field {\r\n    margin-bottom: 1rem;\r\n  }\r\n\r\n  .custom-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    border: 1px solid #ddd; /*  */\r\n    padding: 5px; /*  */\r\n    background-color: #f9f9f9; /*  */\r\n  }\r\n\r\n\r\n  .my-card .pi-plus:hover {\r\n      color: darkorange;\r\n      transform: scale(1.1); /*  */\r\n      transition: 1.5s ease; /*  */\r\n\r\n  }\r\n\r\n  .addSecurityMail {\r\n      cursor: pointer; /*  */\r\n  }\r\n\r\n  .addSecurityMail:hover .pi {\r\n      color: darkorange; /*  */\r\n      transform: scale(1.1); /*  */\r\n      transition: color 1.5s ease, transform  1.5s ease; /*  */\r\n  }\r\n\r\n  .addCard {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      height: 20rem;\r\n      width: 20rem;\r\n      border: 3px solid #757575;           \r\n      box-shadow: 0 4px 6px rgba(0,0,0,0.2); /* () */\r\n      position: relative;\r\n      flex: 1 1 25rem;    /* flex-grow: 1; flex-shrink: 1; flex-basis: 25rem; */\r\n      padding:10px;\r\n  }\r\n\r\n\r\n  .addCard .pi {\r\n      transition: transform 0.5s ease, color 0.3s ease;\r\n  }\r\n\r\n  .addCard .pi:hover {\r\n      color: darkorange; /*  */\r\n      transform: scale(1.6); /*  */\r\n  }\r\n\r\n\r\n  \r\n  .Mail_Subject{\r\n    font-size: 1.5rem; /*  */\r\n    color: #6c757d; /*  */\r\n    font-weight: 600; /*  */\r\n    font-family: 'Roboto', 'Arial', sans-serif; /*  */\r\n    letter-spacing: 0.05rem; /*  */\r\n    line-height: 1.5; /*  */\r\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); /*  */\r\n  }\r\n\r\n\r\n  /*  */\r\n.content.truncated {\r\n  /*  8rem */\r\n  max-height: 8rem; \r\n  overflow: hidden;\r\n\r\n  /*  */\r\n  /*  overflow: auto; */\r\n}\r\n\r\n/*  */\r\n.content.expanded {\r\n  /*  auto */\r\n  max-height: none; \r\n  overflow: visible; \r\n}\r\n\r\n/*  */\r\n.container {\r\n  --color: #a5a5b0;\r\n  --size: 28px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  font-size: var(--size);\r\n  user-select: none;\r\n  fill: var(--color);\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.container .chevron-down {\r\n  margin-left: 0.5rem;       \r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.container input:checked ~ .chevron-down {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.container input {\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n/* ------ Animation ------ */\r\n@keyframes keyframes-rotate {\r\n  0% {\r\n    transform: rotate(0deg);\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    transform: rotate(-180deg);\r\n  }\r\n}\r\n\r\n@keyframes keyframes-return {\r\n  0% {\r\n    transform: rotate(-180deg);\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    transform: rotate(0deg);\r\n  }\r\n}\r\n/* ---------------------------------------- */\r\n/* (A) Transition: .fold            */\r\n/* ---------------------------------------- */\r\n\r\n/* & */\r\n.fold-enter-active,\r\n.fold-leave-active {\r\n  /*  0.5s~1s */\r\n  transition: max-height 0.6s ease-in-out, opacity 0.6s ease-in-out;\r\n}\r\n\r\n/*  */\r\n.fold-enter,      /*  */\r\n.fold-leave-to {  /*  */\r\n  max-height: 0;  \r\n  opacity: 0;\r\n  overflow: hidden; /*  */\r\n}\r\n\r\n/*  */\r\n.fold-enter-to,   /*  */\r\n.fold-leave {     /*  */\r\n  /*  999px  */\r\n  max-height: 500px; \r\n  opacity: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n/* ---------------------------------------- */\r\n/* (B)                   */\r\n/* ---------------------------------------- */\r\n.content {\r\n  margin: 0.5rem 0;\r\n}\r\n\r\n\r\n/* ---------------------------------------- */\r\n/* (C) Checkbox + SVG                  */\r\n/* ---------------------------------------- */\r\n.container {\r\n  --color: #a5a5b0;\r\n  --size: 28px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  font-size: var(--size);\r\n  user-select: none;\r\n  fill: var(--color);\r\n\r\n  /*  margin, padding  */\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.container .chevron-down {\r\n  margin-left: 0.5rem;       \r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n/* Checkbox  180  */\r\n.container input:checked ~ .chevron-down {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n/*  checkbox  */\r\n.container input {\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n\r\n\r\n\r\n.card-item {\r\n  position: relative; \r\n}\r\n.badge-top-right {\r\n  position: absolute;\r\n  top: 0rem;\r\n  left: 5rem; \r\n  z-index: 10; \r\n  transform: translate(50%, -50%); \r\n}\r\n\r\n.vue-js-cron {\r\n  font-family: 'Microsoft YaHei', sans-serif;\r\n  color: #333;\r\n  background-color: #f9f9f9;\r\n  border-radius: 4px;\r\n}\r\n.vue-js-cron select {\r\n  padding: 5px 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\n  </style>\r\n  ","import script from \"./SecurityMail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SecurityMail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SecurityMail.vue?vue&type=style&index=0&id=5e34c6df&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5e34c6df\"]])\n\nexport default __exports__","<template>\r\n\r\n  \r\n    <div class=\"card\">\r\n      <DataTable\r\n        :value=\"products\"\r\n        editMode=\"cell\"\r\n        dataKey=\"id\"\r\n        @row-edit-save=\"onRowEditSave\"\r\n        :pt=\"{\r\n          table: { style: 'max-width: 100rem; min-width: 30rem' },\r\n          column: {\r\n            bodycell: ({ state }) => ({\r\n              style: state['d_editing'] && 'padding-top: 0.75rem; padding-bottom: 0.75rem'\r\n            })\r\n          }\r\n        }\"\r\n      >\r\n        <Column field=\"code\" header=\"\" style=\"width: 5%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"name\" header=\"()\" style=\"width: 8%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" fluid />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"URL_Side\" header=\"\" style=\"width: 5%\">\r\n          <template #editor=\"{ data, field }\">\r\n            <Select v-model=\"data[field]\" :options=\"statuses\" optionLabel=\"label\" optionValue=\"value\" placeholder=\"Select a Status\" fluid>\r\n              <template #option=\"slotProps\">\r\n                <Tag :value=\"slotProps.option.value\" :severity=\"getStatusLabel(slotProps.option.value)\" />\r\n              </template>\r\n            </Select>\r\n          </template>\r\n          <template #body=\"slotProps\">\r\n            <Tag :value=\"slotProps.data.URL_Side\" :severity=\"getStatusLabel(slotProps.data.URL_Side)\" />\r\n          </template>\r\n        </Column>\r\n        <Column field=\"route\" header=\"\" style=\"width: 20%\">\r\n          <template #body=\"{ data, field }\">\r\n            {{ (data[field]) }}\r\n          </template>\r\n          <template #editor=\"{ data, field }\">\r\n            <InputText v-model=\"data[field]\" style=\"width: 100%\" fluid />\r\n          </template>\r\n        </Column>\r\n      </DataTable>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue';\r\n  import InputText from 'primevue/inputtext';\r\n//   import IftaLabel from 'primevue/iftalabel';\r\n  import DataTable from 'primevue/datatable';\r\n  import Column from 'primevue/column';\r\n  import Select from 'primevue/select';\r\n  import Tag from 'primevue/tag';\r\n  \r\n// \r\n//   const value = ref('');\r\n  const products = ref([]);\r\n  const statuses = [\r\n    { label: 'InSide', value: 'InSide' },\r\n    { label: 'OutSide', value: 'OutSide' },\r\n    { label: 'NULL', value: 'NULL' },\r\n  ];\r\n  \r\n  // \r\n  const mockData = [\r\n    { id: 1, code: 'A001', name: 'Product A', URL_Side: 'InSide', route: \"editDptFuncList\" },\r\n    { id: 2, code: 'B002', name: 'Product B', URL_Side: 'OutSide', route: \"http://192.168.1.133/sys/login/login.php\" },\r\n    { id: 3, code: 'C003', name: 'Product C', URL_Side: '', route: 30 },\r\n  ];\r\n  \r\n  // \r\n  onMounted(() => {\r\n    products.value = mockData;\r\n  });\r\n  \r\n\r\n  \r\n  // \r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'InSide':\r\n        return 'success';\r\n      case 'OutSide':\r\n        return 'info';\r\n      case '':\r\n        return 'danger';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  \r\n  // \r\n  const onRowEditSave = (event) => {\r\n    const { data } = event;\r\n    const index = products.value.findIndex((item) => item.id === data.id);\r\n    if (index !== -1) {\r\n      products.value[index] = { ...data };\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  .card {\r\n    padding: 20px;\r\n  }\r\n  </style>\r\n  ","import script from \"./BulletinBoard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BulletinBoard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BulletinBoard.vue?vue&type=style&index=0&id=61b4a850&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"card justify-center\" style=\"display: flex; flex-direction: column; align-items: center; padding-top: 10%;\">\r\n      <div style=\"font-size: 3rem; text-align: center;\">\r\n        <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 3rem; color: orange;\"></i>\r\n        {{ login_delay }}\r\n      </div>\r\n      <button @click=\"sendNotification\" style=\"margin-top: 20px; padding: 10px 20px;\">\r\n        \r\n      </button>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref,onMounted } from \"vue\";\r\n  \r\n  const login_delay = ref(\"\");\r\n  const DDD =ref(\"DDD\");\r\n  function sendNotification() {\r\n    //  Notifications API\r\n    if (!(\"Notification\" in window)) {\r\n      //alert(\"\");\r\n      return;\r\n    }\r\n    \r\n    // \r\n    if (Notification.permission === \"granted\") {\r\n        //alert(\"\");\r\n      new Notification(\"\", {\r\n        body: DDD.value,\r\n        icon: \"https://example.com/icon.png\"  // \r\n      });\r\n    } \r\n    // \r\n    else if (Notification.permission !== \"denied\") {\r\n        //alert(\")\");\r\n      Notification.requestPermission().then(permission => {\r\n        \r\n        if (permission === \"granted\") {\r\n          new Notification(\"\", {\r\n            body: login_delay.value,\r\n            icon: \"https://example.com/icon.png\"\r\n          });\r\n        }\r\n      });\r\n    }else{\r\n        // alert(Notification.permission);\r\n    }\r\n  }\r\n\r\n  onMounted(() => {\r\n  // \r\n  sendNotification();\r\n});\r\n  </script>\r\n  ","import script from \"./login_delay.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./login_delay.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"user-info-top-right\">\r\n    <div class=\"user-info-container\">\r\n      <div v-if=\"isLogin\" class=\"tag-container\">\r\n        <!--  -->\r\n        <span>{{ userName }}</span>\r\n      </div>\r\n      <div>\r\n        <Button\r\n          v-if=\"!isLogin\"\r\n          label=\"\"\r\n          icon=\"pi pi-user\"\r\n          @click=\"openLoginDialog\"\r\n        />\r\n        <Button\r\n          v-if=\"isLogin\"\r\n          label=\"\"\r\n          icon=\"pi pi-user\"\r\n          @click=\"logout\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <!--  v-model:login_visible  login-dialog  login-success  -->\r\n    <LoginDialog v-model:login_visible=\"login_visible\" @login-success=\"handleLoginSuccess\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from \"vue\";\r\nimport Button from \"primevue/button\";\r\nimport LoginDialog from \"./login-dialog.vue\";\r\nimport { useUserStore } from \"../stores/user.js\";\r\nimport VueCookies from \"vue-cookies\";\r\n\r\nconst userStore = useUserStore();\r\nconst login_visible = ref(false);\r\n\r\n//  VueCookies  store \r\nconst isLogin = computed(() => {\r\n  return !!VueCookies.get(\"userId\") || !!userStore.userId;\r\n});\r\n\r\n// \r\nconst userName = computed(() => {\r\n  return VueCookies.get(\"userName\") || userStore.userName || \"\";\r\n});\r\n\r\n// \r\nconst openLoginDialog = () => {\r\n  login_visible.value = true;\r\n};\r\n\r\n//  Cookies\r\nconst logout = async () => {\r\n  try {\r\n    //  SignalR  disconnect API\r\n    const { stopPresenceHub } = await import('../service/PresenceService.js');\r\n    const { stopOnlineHub } = await import('../onlineHubService.js');\r\n    \r\n    await Promise.all([\r\n      stopPresenceHub(),\r\n      stopOnlineHub()\r\n    ]);\r\n    \r\n    console.log('SignalR ');\r\n  } catch (error) {\r\n    console.error(' SignalR :', error);\r\n  }\r\n  \r\n  // \r\n  userStore.clearUserInfo();\r\n  VueCookies.remove(\"userId\");\r\n  VueCookies.remove(\"userName\");\r\n  VueCookies.remove(\"departmentId\");\r\n  VueCookies.remove(\"departmentName\");\r\n  VueCookies.remove(\"dpt_title_Id\");\r\n  VueCookies.remove(\"titleId\");\r\n  VueCookies.remove(\"titleName\");\r\n  VueCookies.remove(\"email\");\r\n  \r\n  //  localStorage  auth \r\n  localStorage.removeItem('auth');\r\n};\r\n\r\n// \r\nconst handleLoginSuccess = () => {\r\n  login_visible.value = false;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-info-top-right {\r\n  position: fixed; /*  */\r\n  top: 0.3rem;\r\n  right: 10px;\r\n  z-index: 9999;\r\n}\r\n.user-info-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.tag-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n</style>\r\n","import script from \"./vLogin.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./vLogin.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./vLogin.vue?vue&type=style&index=0&id=4a526273&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4a526273\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"panel-menu-container no-scale\">\r\n        <PanelMenu\r\n          :model=\"pageListMenu\"\r\n          class=\"panel-menu\"\r\n          style=\"height: 100%;\"\r\n        />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport PanelMenu from 'primevue/panelmenu';\r\nimport PageListData from '../../assets/PageListItems.json';\r\nimport { useRouter } from 'vue-router';\r\n\r\n// Vue Router\r\nconst router = useRouter();\r\n\r\n// \r\nconst translationMap = {\r\n    MyFavorites: '',\r\n    SystemManagement: '',\r\n    EventsAndStatistics: '',\r\n    ResearchAndDevelopment: '',\r\n    Electronics: '',\r\n    ProdTech: '',\r\n    Warehouse: '',\r\n    MultiDepartment: '',\r\n    Administration: '',\r\n    Sales: '',\r\n    Purchasing: '',\r\n    ProductionControl: '',\r\n    PlantOperations: '',\r\n    QualityAssurance: ''\r\n};\r\n\r\n// \r\nconst linkToURL = (item) => {\r\n    if (!item) return;\r\n    const urlSide = item.URL_Side;\r\n    if (urlSide === \"InSide\") {\r\n        router.push({ name: item.Layout || 'Home' }); //  Home\r\n    } else if (urlSide === \"OutSide\") {\r\n        window.open(item.URL, '_blank'); // \r\n    }\r\n};\r\n\r\n//  PageListData  PanelMenu \r\nconst pageListMenu = computed(() => {\r\n    return Object.keys(PageListData).map(key => {\r\n        //  key\r\n        const translatedLabel = translationMap[key] || key;\r\n\r\n        //  PanelMenu \r\n        const groups = PageListData[key].map(group => ({\r\n            label: group.label, // \r\n            items: group.items.map(subItem => ({\r\n                ...subItem,\r\n                command: () => linkToURL(subItem) // \r\n            }))\r\n        }));\r\n\r\n        // \r\n        return {\r\n            label: translatedLabel, // \r\n            items: groups\r\n        };\r\n    });\r\n});\r\n</script>\r\n\r\n<style>\r\n.panel-menu-container {\r\n    width: 20%;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 10%;\r\n    max-height: 100%;\r\n    overflow-y: auto;\r\n    background-color: white;\r\n    border: 1px solid #ddd;\r\n    padding: 0.5rem;\r\n    box-shadow: 0 4px 8px rgba(114, 93, 142, 0.1);\r\n    font-size: 18px; /*  */\r\n}\r\n\r\n.panel-menu {\r\n    width: 100%;\r\n    font-size: 16px; /* PanelMenu  */\r\n}\r\n\r\n.panel-menu .p-panelmenu-header {\r\n    font-size: 16px; /*  PanelMenu  */\r\n}\r\n\r\n.panel-menu .p-menuitem-text {\r\n    font-size: 18p6; /*  */\r\n}\r\n\r\n/*  */\r\n.no-scale {\r\n    transform-origin: top left;\r\n    transform: scale(1);\r\n}\r\n</style>\r\n","import script from \"./PanelMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PanelMenu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PanelMenu.vue?vue&type=style&index=0&id=1e89e428&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div style=\"padding-right:17%;padding-bottom: 4%;\" class=\"flex justify-content-end\">\r\n      <vLogin></vLogin>\r\n    </div>\r\n\r\n    <div style=\"width:15%; height: 100%; position: fixed; left: 20rem; top: 0;\">\r\n      <PanelMenu\r\n        :loginUser=\"login_user\"\r\n        :loginDpt=\"login_dpt\"\r\n        :loginId=\"login_id\"\r\n        :loginTitle=\"login_title\"\r\n        :selectedKey=\"selectedMenuKey\"\r\n      >\r\n      </PanelMenu>\r\n    </div>\r\n\r\n    <!-- Center and move edit form to the bottom -->\r\n    <div \r\n      style=\"position: fixed; top: 30%; left: 50%; transform: translate(-50%, 0);\"\r\n      class=\"edit-form-container\"\r\n    >\r\n      <editDptFuncList_Form></editDptFuncList_Form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport vLogin from '../../vLogin.vue';\r\nimport VueCookies from 'vue-cookies'\r\nimport PanelMenu from '../PanelMenu.vue';\r\nimport editDptFuncList_Form from '../editDptFuncList_Form.vue';\r\n\r\nconst login_user = ref('')\r\nconst login_dpt = ref('')\r\nconst login_id = ref('')\r\nconst login_title = ref('')\r\nconst selectedMenuKey = ref();\r\n\r\n\r\nconst getLoginCookie = () => {\r\n  const userName = VueCookies.get('userName')\r\n  const userDept = VueCookies.get('userDept')\r\n  const userAccount = VueCookies.get('userAccount')\r\n  const userTitle = VueCookies.get('userTitle')\r\n\r\n\r\n  login_user.value = userName || '()'\r\n  login_dpt.value = userDept || '()'\r\n  login_id.value = userAccount || '()'\r\n  login_title.value = userTitle || '()'\r\n\r\n}\r\n\r\nconst checkCookieChange = () => {\r\n  if (!VueCookies.get('userAccount')) {\r\n    login_dpt.value = '()'\r\n    login_id.value = '()'\r\n    login_user.value = '()'\r\n    login_title.value = '()'\r\n\r\n  } else {\r\n    login_user.value = VueCookies.get('userName')\r\n    login_dpt.value = VueCookies.get('userDept')\r\n    login_id.value = VueCookies.get('userAccount')\r\n    login_title.value = VueCookies.get('userTitle')\r\n\r\n  }\r\n}\r\n\r\n//  cookie \r\nonMounted(() => {\r\n  getLoginCookie()\r\n  // localStorage.clear()\r\n  const intervalId = setInterval(checkCookieChange, 2000)\r\n  onUnmounted(() => {\r\n    clearInterval(intervalId)\r\n  })\r\n})\r\n</script>\r\n<style scoped>\r\n\r\n\r\n</style>","import script from \"./editDptFuncList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editDptFuncList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div :style=\"{ 'max-width': sysMode ? '200rem' : '80rem' }\">\r\n    <!-- #region -->\r\n    <div v-if=\"sysMode\" class=\"flex items-center mb-4\" style=\"gap: 1rem;\">\r\n      <el-select\r\n        v-model=\"searchField\"\r\n        placeholder=\"\"\r\n        style=\"width: 100px;\"\r\n      >\r\n        <el-option\r\n          v-for=\"opt in searchOptions\"\r\n          :key=\"opt.value\"\r\n          :label=\"opt.label\"\r\n          :value=\"opt.value\"\r\n        />\r\n      </el-select>\r\n      <el-input\r\n        v-model=\"searchKeyword\"\r\n        placeholder=\"\"\r\n        clearable\r\n        style=\"width: 200px;\"\r\n      />\r\n    </div>\r\n    <!-- endregion -->\r\n\r\n    <div>\r\n      <el-table :data=\"searchedTableData\" style=\"width: 100%\" class=\"workflow-form\">\r\n\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"areaName\" :width=\"100\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <TreeSelectArea return-type=\"name\" v-model=\"scope.row.areaName\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.areaName }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"departmentName\" :width=\"110\">\r\n            <template #header v-if=\"props.sysMode===true\">\r\n            <el-popover placement=\"bottom-start\" title=\"\" :width=\"300\" trigger=\"click\">\r\n              <template #reference>\r\n                <span style=\"color: #409EFF; text-decoration: underline; cursor: pointer;\">\r\n                   <el-icon><Filter /></el-icon>\r\n                </span>\r\n              </template>\r\n              <TreeSelectDepartment\r\n                v-model=\"selectedDepartment\"\r\n              \r\n                :has-cancel=\"true\"\r\n                :multiMode=\"false\"\r\n                @change=\"handleDepartmentSelect\"\r\n              />\r\n            </el-popover>\r\n          </template>\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <TreeSelectDepartment return-type=\"name\" v-model=\"scope.row.departmentName\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.departmentName }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"titleName\" :width=\"100\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <TreeSelectTitle return-type=\"name\" v-model=\"scope.row.titleName\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.titleName }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"UserName\" :width=\"70\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.userName\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.userName }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"DeviceName\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-select v-model=\"scope.row.deviceName\" size=\"small\">\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                </el-select>\r\n              </div>\r\n              <div v-else>{{ scope.row.deviceName }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"ComputerAsset\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-select v-model=\"scope.row.computerAsset\" size=\"small\">\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                </el-select>\r\n              </div>\r\n              <div v-else>{{ scope.row.computerAsset }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"ScreenSize\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.screenSize\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.screenSize }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"ScreenAsset\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-select v-model=\"scope.row.screenAsset\" size=\"small\">\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                </el-select>\r\n              </div>\r\n              <div v-else>{{ scope.row.screenAsset }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"OS\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-select v-model=\"scope.row.os\" size=\"small\">\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                </el-select>\r\n              </div>\r\n              <div v-else>{{ scope.row.os }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"OS\" prop=\"OS_Version\" :width=\"150\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.oS_Version\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.oS_Version }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!-- Office -->\r\n          <el-table-column label=\"Office\" prop=\"Office_Version\" :width=\"130\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.office_Version\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.office_Version }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!-- Office -->\r\n          <el-table-column label=\"Office\" prop=\"Office_Asset\" :width=\"90\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-select v-model=\"scope.row.office_Asset\" size=\"small\">\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                  <el-option label=\"\" value=\"\" />\r\n                </el-select>\r\n              </div>\r\n              <div v-else>{{ scope.row.office_Asset }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"OtherSoftware\" :width=\"200\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.otherSoftware\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.otherSoftware }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"OtherDescription\" :width=\"200\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.otherDescription\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.otherDescription }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"Antivirus_SoftWare\" :width=\"80\">\r\n            <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.antivirus_SoftWare\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{ scope.row.antivirus_SoftWare }}</div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"createAt\" :width=\"100\">\r\n            <template #default=\"scope\">\r\n              {{ formatDate(scope.row.createAt) }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column label=\"\" prop=\"createBy\" :width=\"100\">\r\n            <template #default=\"scope\">\r\n              {{ scope.row.filledBy }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column  v-if=\"(authStore.user.managers && authStore.user.managers.length > 0) || props.sysMode===true\"  label=\"\" :width=\"60\" header-align=\"center\">\r\n            <template #default=\"scope\">\r\n              <el-button size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\">\r\n                {{ scope.row.isEditing ? \"\" : \"\" }}\r\n              </el-button>\r\n              <el-button style=\"margin-left: -0.5px;\" size=\"small\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">\r\n                \r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column v-if=\"props.sysMode===true\" label=\"\" prop=\"isDisposed\" :width=\"70\">\r\n            <template #default=\"scope\">\r\n              <el-checkbox v-model=\"scope.row.isDisposed\" @change=\"handleDisposalChange(scope.row)\" />\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column v-if=\"props.sysMode===true\" label=\"\" prop=\"disposalDate\" :width=\"120\">\r\n            <template #default=\"scope\">\r\n              {{ formatDate(scope.row.disposalDate) }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <!--  -->\r\n          <el-table-column v-if=\"props.sysMode===true\" label=\"\" prop=\"disposalDate\" :width=\"120\">\r\n            <template #default=\"scope\">\r\n              {{ scope.row.disposedBy}}\r\n            </template>\r\n          </el-table-column>\r\n\r\n            <!--  -->\r\n          <el-table-column v-if=\"props.sysMode===true\" label=\"\" prop=\"remark\" :width=\"150\">\r\n              <template #default=\"scope\">\r\n              <div v-if=\"scope.row.isEditing\">\r\n                <el-input v-model=\"scope.row.remark\" size=\"small\" />\r\n              </div>\r\n              <div v-else>{{scope.row.remark }}</div>\r\n            </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted,defineProps, computed } from \"vue\";\r\nimport EventsAndStatisticsService from \"../../../service/EventsAndStatisticsService\";\r\nimport TreeSelectDepartment from \"@/components/Common/TreeSelect-getData/TreeSelect-Department.vue\";\r\nimport TreeSelectTitle from \"@/components/Common/TreeSelect-getData/TreeSelect-Title.vue\";\r\nimport TreeSelectArea from \"@/components/Common/TreeSelect-getData/TreeSelect-Area.vue\";\r\nimport { ElMessage } from 'element-plus';\r\nimport '../../../css/form/computerInventory.css';\r\nimport { useUserStore } from '@/stores/user';\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport emitter from '../../../eventBus'; \r\nimport { useToast } from 'primevue/usetoast';\r\nimport {  ElMessageBox } from 'element-plus'\r\n\r\nconst toast = useToast();\r\nconst props = defineProps({\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n// 1. \r\nconst searchOptions = [\r\n  { label: '',         value: 'areaName'        },\r\n  { label: '',         value: 'departmentName'  },\r\n  { label: '',         value: 'titleName'       },\r\n  { label: '',         value: 'userName'        },\r\n  { label: '',     value: 'deviceName'      },\r\n  { label: '',     value: 'computerAsset'   },\r\n  { label: '',     value: 'screenSize'      },\r\n  { label: '',     value: 'screenAsset'     },\r\n  { label: '',     value: 'os'              },\r\n  { label: 'OS',       value: 'oS_Version'      },\r\n  { label: 'Office',   value: 'office_Version'  },\r\n  { label: 'Office',   value: 'office_Asset'    },\r\n  { label: '',     value: 'otherSoftware'   },\r\n  { label: '',     value: 'otherDescription'},\r\n  { label: '',     value: 'antivirus_SoftWare'},\r\n  { label: '',     value: 'createAt'        },\r\n  { label: '',     value: 'filledBy'        },\r\n  { label: '',       value: 'isDisposed'      },\r\n  { label: '',     value: 'disposalDate'    },\r\n  { label: '',       value: 'disposedBy'      },\r\n  { label: '',         value: 'remark'          },\r\n];\r\nconst searchField   = ref(searchOptions[0].value);\r\nconst searchKeyword = ref('');\r\nconst searchedTableData = computed(() => {\r\n  const kw = searchKeyword.value.trim().toLowerCase();\r\n  const field = searchField.value;\r\n  // /\r\n  if (!kw) return filteredTableData.value;\r\n  return filteredTableData.value.filter(item => {\r\n    const cell = item[field];\r\n    // null / undefined \r\n    if (cell == null) return false;\r\n    // \r\n    return String(cell).toLowerCase().includes(kw);\r\n  });\r\n});\r\n\r\n// import { useToast } from 'primevue/usetoast';\r\n\r\n// const toast = useToast();\r\nconst userStore = useUserStore();\r\nconst authStore = useAuthStore();\r\n\r\nconst tableData = ref([]);\r\nconst filteredTableData = ref([]);\r\nconst selectedDepartment = ref(null);\r\n\r\n// \r\nconst handleDepartmentSelect = async (dptId) => {\r\n  try{\r\n\r\n    //API\r\n    let response = await EventsAndStatisticsService.getComputerInventoryWithDptFilter(dptId);\r\n    console.log(response);\r\n    if (Array.isArray(response.data)) {\r\n      filteredTableData.value = response.data.map(item => ({\r\n        ...item,\r\n        // \r\n        isRegistered: item.isRegistered === \"True\" || item.isRegistered === true,\r\n        isDisposed: item.isDisposed === \"True\" || item.isDisposed === true,\r\n        \r\n      }));\r\n    } else {\r\n      // \r\n      filteredTableData.value = [...tableData.value];\r\n    }\r\n  }catch (error) {\r\n      console.error(\":\", error);\r\n      ElMessage.error(error);\r\n    }\r\n  };\r\n\r\n//  computerInventory \r\nconst validateRow = (row) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!row.departmentName?.trim()) return reject(\"\");\r\n    if (!row.userName?.trim()) return reject(\"\");\r\n    if (!row.areaName?.trim()) return reject(\"\");\r\n    resolve();\r\n  });\r\n};\r\n\r\nfunction convertEmptyStringsToNull(obj) {\r\n  const result = { ...obj };\r\n  Object.keys(result).forEach(key => {\r\n    if (typeof result[key] === 'string' && result[key].trim() === '') {\r\n      result[key] = null;\r\n    }\r\n  });\r\n  result.updateAt =  new Date().toISOString();\r\n  result.updateBy = userStore.userId;\r\n  return result;\r\n}\r\n\r\n//  updateComputerInventory API \r\nconst handleEdit = async (index, row) => {\r\n  if (!row.isEditing) {\r\n    row.isEditing = true;\r\n  } else {\r\n    const updatedData = { ...row };\r\n    delete updatedData.isEditing;\r\n    const processedData = convertEmptyStringsToNull(updatedData);\r\n    try {\r\n      await validateRow(processedData);\r\n      console.log(\"json data:\",processedData );\r\n      await EventsAndStatisticsService.updateComputerInventory(row.nanoId, processedData);\r\n      await getComputerInventory();\r\n      ElMessage.success(\"\");\r\n    } catch (error) {\r\n      console.error(\":\", error);\r\n      ElMessage.error(error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nconst handleDisposalChange = async (row) => {\r\n  try {\r\n    const payload = {\r\n      newStatus: row.isDisposed,\r\n      userName: userStore.userName\r\n    };\r\n\r\n    const res = await EventsAndStatisticsService.updateComputerInventoryDisposal(row.nanoId, payload);\r\n    if (res) {\r\n      toast.add({ severity: 'success', summary: ``, detail: '', life: 3000 });\r\n      const index = filteredTableData.value.findIndex(item => item.nanoId === row.nanoId);\r\n      if (index !== -1) {\r\n        filteredTableData.value[index].isDisposed = res.data.isDisposed;\r\n        filteredTableData.value[index].disposalDate = res.data.disposalDate;\r\n        filteredTableData.value[index].disposedBy = res.data.disposedBy;\r\n      }\r\n    } else {\r\n      toast.add({ severity: 'warn', summary: ``, detail: '', life: 3000 });\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    toast.add({ severity: 'error', summary: ``, life: 3000 });\r\n  }\r\n};\r\n\r\n\r\n//  deleteComputerInventory API \r\nconst handleDelete = async (index, row) => {\r\n  try {\r\n    // \r\n    await ElMessageBox.confirm(\r\n      '',\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning'\r\n      }\r\n    );\r\n    // \r\n    await EventsAndStatisticsService.deleteComputerInventory(row.nanoId);\r\n    await getComputerInventory();\r\n    ElMessage.success(\"\");\r\n  } catch (error) {\r\n    // \r\n    if (error !== 'cancel') {\r\n      console.error(\":\", error);\r\n      ElMessage.error(\"\");\r\n    }\r\n  }\r\n};\r\n\r\n// ---  API  ---\r\n//  computerInventory  API\r\n\r\nconst getComputerInventory = async () => {\r\n  try {\r\n    // \r\n    if (authStore.user.roles.includes('RO0000')) {\r\n      await getAllComputerInventory();\r\n    } \r\n    // \r\n    else if (authStore.user.managers.length > 0) {\r\n\r\n      await getComputerInventoryWithListDpt();\r\n    } \r\n    // \r\n    else {\r\n      await getComputerInventoryWithEmp();\r\n    }\r\n    filteredTableData.value = [...tableData.value];\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n};\r\n\r\n// \r\nconst getComputerInventoryWithEmp = async () => {\r\n  try {\r\n    //  API dptName  empName userStore \r\n    const res = await EventsAndStatisticsService.getComputerInventoryWithDptNameAndEmpName(userStore.userDeptName, userStore.userName);\r\n    console.log(\"getComputerInventoryWithEmp:\", res.data);\r\n\r\n    tableData.value = Array.isArray(res.data) ? res.data : [];\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    tableData.value = [];\r\n  }\r\n};\r\n\r\n// \r\nconst getComputerInventoryWithListDpt = async () => {\r\n  try {\r\n    console.log(authStore.user.subDepartments);\r\n    const res = await EventsAndStatisticsService.getComputerInventoryWithListDpt(userStore.userId,authStore.user.subDepartments);\r\n    \r\n    // console.log(\"getComputerInventoryWithListDpt:\", res.data);\r\n    tableData.value = Array.isArray(res.data) ? res.data : [];\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    tableData.value = [];\r\n  }\r\n};\r\n\r\n// \r\nconst getAllComputerInventory = async () => {\r\n  try {\r\n    const res = await EventsAndStatisticsService.getComputerInventorys();\r\n    tableData.value = Array.isArray(res.data) ? res.data : [];\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n};\r\n\r\nfunction formatDate(date) {\r\n  return date ? new Date(date).toLocaleString() : \"\";\r\n}\r\n\r\n\r\nonMounted(async () => {\r\n  await getComputerInventory();\r\n  emitter.on('dataUpdated', getComputerInventory);\r\n});\r\n\r\n\r\n</script>\r\n","import script from \"./List_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./List_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n      <div style=\"font-size: 1.2rem;width:32rem;max-width: 32rem;\">\r\n        <h4 style=\"text-align: center;background-color: lightgray;\"></h4>\r\n        <div>,</div>\r\n        <div></div>\r\n      </div>\r\n      <el-form\r\n        ref=\"computerFormRef\"\r\n        style=\"max-width: 32rem;\"\r\n        :model=\"computerForm\"\r\n        :rules=\"rules\"\r\n        label-width=\"9rem\"\r\n        class=\"workflow-form\"\r\n        :size=\"formSize\"\r\n        status-icon\r\n      >\r\n      \r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"areaName\">\r\n          <TreeSelectArea returnType=\"name\" v-model=\"computerForm.areaName\" />\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item  label=\"\" prop=\"departmentName\">\r\n          <TreeSelectDepartment style=\"width: 300px;\" returnType=\"name\" v-model=\"computerForm.departmentName\" />\r\n        </el-form-item>\r\n        \r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"titleName\">\r\n          <TreeSelectTitle returnType=\"name\" v-model=\"computerForm.titleName\" />\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"userName\">\r\n          <el-input style=\"width: 200px\" v-model=\"computerForm.userName\" placeholder=\"\" />\r\n        </el-form-item>\r\n        \r\n        <!--  -->\r\n        <el-form-item label=\"\" prop=\"deviceName\">\r\n            <el-select\r\n                v-model=\"computerForm.deviceName\"\r\n                placeholder=\"\"\r\n                style=\"width: 200px\"\r\n            >\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n\r\n            </el-select>\r\n        </el-form-item>\r\n        \r\n        <!--  (el-select options: '', '') --> \r\n        <el-form-item label=\"\" prop=\"computerAsset\">\r\n            <el-select\r\n                v-model=\"computerForm.computerAsset\"\r\n                placeholder=\"\"\r\n                style=\"width: 200px\"\r\n            >\r\n                 <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n            </el-select>\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"screenSize\">\r\n          <el-input style=\"width: 200px\" v-model=\"computerForm.screenSize\" placeholder=\"\" />\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"screenAsset\">\r\n            <el-select\r\n                v-model=\"computerForm.screenAsset\"\r\n                placeholder=\"\"\r\n                style=\"width: 200px\"\r\n            >\r\n                 <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n           \r\n\r\n            </el-select>\r\n        </el-form-item>\r\n\r\n\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"oS_Version\">\r\n            <el-input style=\"width: 200px\" v-model=\"computerForm.oS_Version\" placeholder=\"\" />\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"oS\">\r\n          <el-select\r\n                v-model=\"computerForm.oS\"\r\n                placeholder=\"\"\r\n                style=\"width: 200px\"\r\n            >\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"Mac\" value=\"Mac\" />\r\n            </el-select>\r\n        </el-form-item>\r\n\r\n\r\n\r\n\r\n        <!-- Office --> \r\n        <el-form-item label=\"Office\" prop=\"office_Version\">\r\n            <el-input style=\"width: 200px\" v-model=\"computerForm.office_Version\" placeholder=\"Office\" />\r\n        </el-form-item>\r\n\r\n        \r\n        <!-- Office --> \r\n        <el-form-item label=\"Office\" prop=\"office_Asset\">\r\n            <el-select\r\n                v-model=\"computerForm.office_Asset\"\r\n                placeholder=\"\"\r\n                style=\"width: 200px\"\r\n            >\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n            </el-select>\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"otherSoftware\">\r\n            <el-input style=\"width: 200px\" v-model=\"computerForm.otherSoftware\" placeholder=\"\" />\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"otherDescription\">\r\n            <el-input style=\"width: 200px\" v-model=\"computerForm.otherDescription\" placeholder=\"\" />\r\n        </el-form-item>\r\n\r\n        <!--  --> \r\n        <el-form-item label=\"\" prop=\"antivirus_SoftWare\">\r\n            <el-input style=\"width: 200px\" v-model=\"computerForm.antivirus_SoftWare\" placeholder=\"\" />\r\n        </el-form-item>\r\n\r\n        <!--   --> \r\n        <el-form-item label=\"\" prop=\"FilledBy\">\r\n            {{ userStore.userName }}\r\n        </el-form-item>\r\n\r\n        \r\n     \r\n        \r\n        <!--  -->\r\n        <el-form-item>\r\n          <el-button v-if=\"false\" type=\"warning\" @click=\"autoFillForm\"></el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm(computerFormRef)\"></el-button>\r\n          <el-button @click=\"resetForm(computerFormRef)\"></el-button>\r\n        </el-form-item>\r\n        \r\n\r\n\r\n        <!--  -->\r\n        <el-form-item v-show=\"false\" label=\"\" prop=\"isDisposed\">\r\n          <el-checkbox \r\n            v-model=\"computerForm.isDisposed\" \r\n            :true-label=\"'Y'\" \r\n            :false-label=\"'N'\">\r\n            \r\n          </el-checkbox>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item v-show=\"false\" label=\"\" prop=\"disposedBy\">\r\n          <el-checkbox \r\n            v-model=\"computerForm.disposedBy\" \r\n            >\r\n            \r\n          </el-checkbox>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item v-show=\"false\" label=\"\" prop=\"disposalDate\">\r\n          <el-checkbox \r\n            v-model=\"computerForm.disposalDate\" \r\n            >\r\n            \r\n          </el-checkbox>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <el-form-item v-show=\"false\" label=\"\" prop=\"remark\">\r\n          <el-checkbox \r\n            v-model=\"computerForm.remark\" \r\n            >\r\n            \r\n          </el-checkbox>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { reactive, ref } from \"vue\";\r\n  import TreeSelectDepartment from \"@/components/Common/TreeSelect-getData/TreeSelect-Department.vue\";\r\n  import TreeSelectArea from \"@/components/Common/TreeSelect-getData/TreeSelect-Area\";\r\n  import EventsAndStatisticsService from \"../../../service/EventsAndStatisticsService\";\r\n  import { nanoid } from 'nanoid';\r\n  import { useToast } from 'primevue/usetoast';\r\n  import { useUserStore } from '@/stores/user';\r\n\r\n  import emitter from '../../../eventBus';  // \r\n  import TreeSelectTitle from '@/components/Common/TreeSelect-getData/TreeSelect-Title.vue'\r\n  import '../../../css/form/workflow-form.css';\r\n  const userStore = useUserStore();\r\n  const toast = useToast();\r\n  const formSize = ref(\"default\");\r\n  const computerFormRef = ref(null);\r\n  \r\n  /*  reactive  template  */\r\n  const computerForm = reactive({\r\n    nanoId: \"\",\r\n    departmentName: \"\",\r\n    titleName: \"\",\r\n    userName: \"\",\r\n    deviceName: \"\",\r\n    computerAsset: \"\",      // /\r\n    screenSize: \"\",         // \r\n    screenAsset: \"\",        // /\r\n    oS: \"\",                 // /\r\n    oS_Version: \"\",         // \r\n    office_Version: \"\",       // Office \r\n    office_Asset: \"\",       // Office /\r\n    otherSoftware: \"\",      // \r\n    otherDescription: \"\",   // \r\n    filledBy: userStore.userName, //  userStore.userName \r\n    isDisposed: false,\r\n    disposalDate: null,\r\n    disposedBy: \"\",\r\n    createAt: new Date(\r\n      new Date().toLocaleString(\"en-US\", { timeZone: \"Asia/Taipei\" })\r\n    ),\r\n    createBy: userStore.userId,\r\n    updateAt: null,\r\n    updateBy: null,\r\n    \r\n    remark: \"\",\r\n  });\r\n\r\n\r\n  function autoFillForm() {\r\n    // \r\n    computerForm.departmentName = userStore.userDeptName\r\n    computerForm.titleName = ''\r\n    computerForm.userName = userStore.userName\r\n    computerForm.deviceName = ''\r\n    computerForm.computerAsset = ''\r\n    computerForm.screenSize = '27'\r\n    computerForm.screenAsset = ''\r\n    computerForm.oS = ''\r\n    computerForm.oS_Version = 'Windows 10'\r\n    computerForm.office_Version = 'Office 2019'\r\n    computerForm.office_Asset = ''\r\n    computerForm.otherSoftware = 'Chrome, VSCode'\r\n    computerForm.otherDescription = ''\r\n    computerForm.isDisposed = false\r\n    computerForm.disposedBy = \"\"\r\n    computerForm.disposalDate = null\r\n    computerForm.remark = ''\r\n}\r\n\r\n  /*  */\r\n  const rules = reactive({\r\n    departmentName: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n    titleName: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n    userName: [{ required: true, message: \"\", trigger: \"blur\" }],\r\n    areaName: [{ required: true, message: \"\", trigger: \"blur\" }]\r\n  });\r\n  \r\n  const submitForm = async (formEl) => {\r\n    if (!formEl) return;\r\n    if (!computerForm.nanoId) {\r\n      computerForm.nanoId = nanoid(10);\r\n    }\r\n    // console.log( authStore.user.areaInfo)\r\n    await formEl.validate((valid, fields) => {\r\n      if (valid) {\r\n        console.log(\"!\", computerForm);\r\n        EventsAndStatisticsService.postComputerInventory(computerForm)\r\n          .then(() => {\r\n            toast.add({ severity: 'success', summary: '', detail: ``, life: 5000 });\r\n            formEl.resetFields();\r\n            computerForm.nanoId = \"\"; //  NanoId nanoId\r\n            emitter.emit('dataUpdated');          \r\n          })\r\n          .catch((error) => {\r\n            console.error(\" :\", error);\r\n          });\r\n      } else {\r\n        console.log(\"!\", fields);\r\n      }\r\n    });\r\n  };\r\n  \r\n  const resetForm = (formEl) => {\r\n    if (!formEl) return;\r\n    formEl.resetFields();\r\n\r\n  };\r\n  </script>\r\n  \r\n","import script from \"./Fill_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Fill_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"container\">\r\n        <Fill_Computer_Inventory  v-if=\"!props.sysMode\" >\r\n\r\n        </Fill_Computer_Inventory>\r\n        <List_ComuterInventory :sysMode=\"sysMode\" >\r\n\r\n        </List_ComuterInventory>\r\n\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\n\r\nimport List_ComuterInventory from './List_ComputerInventory.vue'\r\nimport Fill_Computer_Inventory from './Fill_ComputerInventory.vue'\r\n\r\nconst props = defineProps({\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n</script>\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-left: 4rem;\r\n  margin-top: 6rem;\r\n  margin-bottom: 5rem;\r\n}\r\n.item1 {\r\n  width: 500rem;\r\n}\r\n</style>","import script from \"./ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ComputerInventory.vue?vue&type=style&index=0&id=4498de1c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4498de1c\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <h2></h2>\r\n        </el-col>\r\n      </el-row>\r\n  \r\n      <!--  -->\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"forms\"\r\n        style=\"width: 100%; margin-top: 20px\"\r\n        :row-key=\"(row) => row.id\"\r\n      >\r\n        <!-- Serial ID  -->\r\n        <el-table-column prop=\"serialId\" label=\"Serial ID\" width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"editingRowId === row.id\">\r\n              <el-input v-model=\"editedRow.serialId\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ row.serialId }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n  \r\n        <!-- Form Name  -->\r\n        <el-table-column prop=\"formName\" label=\"Form Name\" width=\"200\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"editingRowId === row.id\">\r\n              <el-input v-model=\"editedRow.formName\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ row.formName }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n  \r\n        <!-- Created Date  () -->\r\n        <el-table-column prop=\"created_at\" label=\"Created Date\" width=\"250\" />\r\n  \r\n        <!--  -->\r\n        <el-table-column label=\"Actions\" width=\"240\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"editingRowId === row.id\">\r\n              <el-button size=\"small\" type=\"success\" @click=\"saveEdit(row)\"></el-button>\r\n              <el-button size=\"small\" @click=\"cancelEdit\"></el-button>\r\n            </div>\r\n            <div v-else>\r\n              <el-button size=\"small\"  @click=\"handleEditForm(row)\"></el-button>\r\n              <el-button size=\"small\" type=\"danger\" @click=\"handleDeleteForm(row.id)\"></el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue'\r\n  import { ElMessage, ElMessageBox } from 'element-plus'\r\n  import workflowService from '../../../service/WorkflowService'\r\n  \r\n  // \r\n  const forms = ref([])\r\n  // \r\n  const loading = ref(false)\r\n  \r\n  //  ID\r\n  const editingRowId = ref(null)\r\n  // \r\n  const editedRow = ref({})\r\n  \r\n  // \r\n  async function loadForms() {\r\n    loading.value = true\r\n    try {\r\n      const resp = await workflowService.getAllForms()\r\n      forms.value = resp.data\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n  \r\n  // \r\n  function handleEditForm(row) {\r\n    editingRowId.value = row.id\r\n    // \r\n    editedRow.value = { ...row }\r\n  }\r\n  \r\n  //  API\r\n  async function saveEdit(row) {\r\n    try {\r\n      await workflowService.updateForm(row.id, {\r\n        serialId: editedRow.value.serialId,\r\n        formName: editedRow.value.formName\r\n      })\r\n      // \r\n      Object.assign(row, editedRow.value)\r\n      ElMessage.success('')\r\n      editingRowId.value = null\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    }\r\n  }\r\n  \r\n  // \r\n  function cancelEdit() {\r\n    editingRowId.value = null\r\n  }\r\n  \r\n  // \r\n  function handleDeleteForm(formId) {\r\n    ElMessageBox.confirm('?', '', { type: 'warning' })\r\n      .then(async () => {\r\n        await workflowService.deleteForm(formId)\r\n        ElMessage.success('')\r\n        loadForms()\r\n      })\r\n      .catch(() => {})\r\n  }\r\n  \r\n  onMounted(() => {\r\n    loadForms()\r\n  })\r\n  </script>\r\n  \r\n  <style scoped>\r\n  </style>\r\n  ","import script from \"./FormsManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormsManagement.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n      <h2></h2>\r\n      <el-button type=\"primary\" @click=\"openCreateDialog\"></el-button>\r\n  \r\n      <el-table :data=\"definitions\" style=\"margin-top: 20px;\">\r\n        <!--  -->\r\n        <el-table-column prop=\"version\" label=\"\" width=\"180\">\r\n          <template #default=\"{ row, $index }\">\r\n            <div v-if=\"editingRowIndex === $index\">\r\n              <el-input v-model=\"editedRow.version\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ row.version }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <!--  -->\r\n        <el-table-column prop=\"name\" label=\"\" width=\"180\">\r\n          <template #default=\"{ row, $index }\">\r\n            <div v-if=\"editingRowIndex === $index\">\r\n              <el-input v-model=\"editedRow.name\" size=\"small\" />\r\n            </div>\r\n            <div v-else>\r\n              {{ row.name }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- CreatedAt -->\r\n        <el-table-column prop=\"createdAt\" label=\"CreatedAt\" width=\"250\">\r\n          <template #default=\"{ row, $index }\">\r\n            <div v-if=\"editingRowIndex === $index\">\r\n              <el-date-picker\r\n                v-model=\"editedRow.createdAt\"\r\n                type=\"datetime\"\r\n                size=\"small\"\r\n                placeholder=\"\"\r\n              />\r\n            </div>\r\n            <div v-else>\r\n              {{ row.createdAt }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <!--  -->\r\n        <el-table-column label=\"Actions\" width=\"240\">\r\n          <template #default=\"{ row, $index }\">\r\n                <el-button size=\"small\" v-if=\"editingRowIndex !== $index\" @click=\"startEditing(row, $index)\"></el-button>\r\n                <el-button size=\"small\" type=\"success\" v-if=\"editingRowIndex === $index\" @click=\"saveEdit(row)\"></el-button>\r\n                <el-button size=\"small\" v-if=\"editingRowIndex === $index\" @click=\"cancelEdit\"></el-button>\r\n                <el-button size=\"small\" type=\"danger\" v-if=\"editingRowIndex === null\" @click=\"deleteDefinition(row.id)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n      </el-table>\r\n  \r\n      <!--  Dialog -->\r\n      <el-dialog title=\"\" v-model=\"dialogVisible\" width=\"500px\">\r\n        <el-form :model=\"createDef\" label-width=\"100px\">\r\n          <el-form-item label=\"Name\">\r\n            <el-input v-model=\"createDef.name\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"Status\">\r\n            <el-input-number v-model=\"createDef.status\" />\r\n          </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"submitDefinition\"></el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue'\r\n  import { ElMessage, ElMessageBox } from 'element-plus'\r\n  import workflowService from '../../../service/WorkflowService'\r\n  \r\n  const definitions = ref([])\r\n  const loading = ref(false)\r\n  const dialogVisible = ref(false)\r\n  const createDef = ref({\r\n    name: '',\r\n    description: '',\r\n    createdAt: new Date().toISOString(),\r\n    status: 1,\r\n    version: '1.0.0.0'\r\n  })\r\n  \r\n  // \r\n  const editingRowIndex = ref(null)\r\n  // \r\n  const editedRow = ref({})\r\n  \r\n  async function loadDefinitions() {\r\n    loading.value = true\r\n    try {\r\n      const resp = await workflowService.getAllProcessDefinitions()\r\n      definitions.value = resp.data\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n  \r\n  function openCreateDialog() {\r\n    createDef.value = {\r\n      name: '',\r\n      description: '',\r\n      createdAt: new Date().toISOString(),\r\n      status: 1,\r\n      version: '1.0.0.0'\r\n    }\r\n    dialogVisible.value = true\r\n  }\r\n  \r\n  async function submitDefinition() {\r\n    try {\r\n      await workflowService.ProcessDefinition({\r\n        Name: createDef.value.name,\r\n        Description: createDef.value.description,\r\n        CreatedAt: createDef.value.createdAt,\r\n        Status: createDef.value.status,\r\n        Version: createDef.value.version\r\n      })\r\n      ElMessage.success('')\r\n      dialogVisible.value = false\r\n      loadDefinitions()\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    }\r\n  }\r\n  \r\n  //  editedRow index\r\n  function startEditing(row, index) {\r\n    editingRowIndex.value = index\r\n    editedRow.value = { ...row }\r\n  }\r\n  \r\n  //  API\r\n  async function saveEdit(row) {\r\n    try {\r\n      // row.id  API  id\r\n      await workflowService.updateProcessDefinition(row.id, {\r\n        Name: editedRow.value.name,\r\n        Version: editedRow.value.version,\r\n        CreatedAt: editedRow.value.createdAt\r\n        //  DescriptionStatus \r\n      })\r\n      // \r\n      Object.assign(row, editedRow.value)\r\n      ElMessage.success('')\r\n      editingRowIndex.value = null\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    }\r\n  }\r\n  \r\n  function cancelEdit() {\r\n    editingRowIndex.value = null\r\n  }\r\n  \r\n  async function deleteDefinition(defId) {\r\n    ElMessageBox.confirm('?', '', { type: 'warning' })\r\n      .then(async () => {\r\n        await workflowService.deleteProcessDefinition(defId)\r\n        ElMessage.success('')\r\n        loadDefinitions()\r\n      })\r\n      .catch(() => {})\r\n  }\r\n  \r\n  onMounted(() => {\r\n    loadDefinitions()\r\n  })\r\n  </script>\r\n  ","import script from \"./ProcessDefinitionManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProcessDefinitionManagement.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <el-tree-select\r\n      v-model=\"internalValue\"\r\n      :data=\"treeData\"\r\n      :render-after-expand=\"false\"\r\n      default-expand-all\r\n      placeholder=\"\"\r\n      style=\"width: 18rem\"\r\n    />\r\n  </template>\r\n  \r\n  <script lang=\"js\" setup>\r\n  import { ref, watch, defineProps, defineEmits, onMounted } from 'vue'\r\n  import ReferenceDataService from '../../../service/ReferenceDataService'\r\n  \r\n  //  v-model  prop\r\n  const props = defineProps({\r\n    modelValue: {\r\n      type: [String, Number, Object],\r\n      default: ''\r\n    }\r\n  })\r\n  const emit = defineEmits(['update:modelValue'])\r\n  \r\n  //  value\r\n  const internalValue = ref(props.modelValue)\r\n  watch(internalValue, newVal => {\r\n    emit('update:modelValue', newVal)\r\n  })\r\n  watch(() => props.modelValue, newVal => {\r\n    internalValue.value = newVal\r\n  })\r\n  \r\n  // flatDepartments\r\n  const flatDepartments = ref([])\r\n  // treeData\r\n  const treeData = ref([])\r\n  \r\n  //  sortId \r\n  function buildTree(data) {\r\n    const tree = []\r\n    const lookup = {}\r\n  \r\n    //  children  sortId\r\n    data.forEach(item => {\r\n      lookup[item.id] = {\r\n        label: item.name,  // \r\n        value: item.id,    // \r\n        sortId: item.sortId || 0,\r\n        children: [],\r\n        ...item\r\n      }\r\n    })\r\n  \r\n    //  p_dpt_id  \"-1\"  tree children\r\n    data.forEach(item => {\r\n      const node = lookup[item.id]\r\n      if (item.p_dpt_id === \"-1\" || !lookup[item.p_dpt_id]) {\r\n        tree.push(node)\r\n      } else {\r\n        lookup[item.p_dpt_id].children.push(node)\r\n      }\r\n    })\r\n  \r\n    //  sortId \r\n    function sortNodes(nodes) {\r\n      nodes.sort((a, b) => a.sortId - b.sortId)\r\n      nodes.forEach(node => {\r\n        if (node.children && node.children.length > 0) {\r\n          sortNodes(node.children)\r\n        }\r\n      })\r\n    }\r\n    sortNodes(tree)\r\n    return tree\r\n  }\r\n  \r\n  //  API \r\n  const fetchDepartmentData = async () => {\r\n    try {\r\n      const res = await ReferenceDataService.getDepartmentData()\r\n      //  res.data \r\n      flatDepartments.value = res.data\r\n      treeData.value = buildTree(flatDepartments.value)\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  }\r\n  \r\n  //  id \r\n  function findNodeById(nodes, id) {\r\n    for (let node of nodes) {\r\n      if (node.id === id) {\r\n        return node\r\n      }\r\n      if (node.children && node.children.length > 0) {\r\n        const found = findNodeById(node.children, id)\r\n        if (found) return found\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  \r\n  // \r\n  function joinRolesToTree(roles) {\r\n    roles.forEach(role => {\r\n      //  dpt_id  '-1'null  undefined \r\n      if (!role.dpt_id || role.dpt_id === '-1') return\r\n      //  id  dpt_id \r\n      const departmentNode = findNodeById(treeData.value, role.dpt_id)\r\n      if (departmentNode) {\r\n        //  isRole \r\n        const roleNode = {\r\n          label: role.name,\r\n          value: role.id,\r\n          sortId: role.sort_id || 0,\r\n          isRole: true,\r\n          ...role\r\n        }\r\n        //  children \r\n        if (!departmentNode.children) {\r\n          departmentNode.children = []\r\n        }\r\n        departmentNode.children.push(roleNode)\r\n        //  sortId \r\n        departmentNode.children.sort((a, b) => a.sortId - b.sortId)\r\n      }\r\n    })\r\n  }\r\n  \r\n  //  API  join\r\n  const fetchRolesData = async () => {\r\n    try {\r\n      const res = await ReferenceDataService.getRoleData()\r\n      const rolesData = res.data\r\n      joinRolesToTree(rolesData)\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  }\r\n  \r\n  onMounted(async () => {\r\n    await fetchDepartmentData()\r\n    await fetchRolesData()\r\n  })\r\n  </script>\r\n  ","import script from \"./TreeSelect-Role.vue?vue&type=script&lang=js&setup=true\"\nexport * from \"./TreeSelect-Role.vue?vue&type=script&lang=js&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div>\r\n      <h2> (ProcessStepDefinition)</h2>\r\n  \r\n      <!--  -->\r\n      <div style=\"margin: 10px 0;\">\r\n        <el-select\r\n          v-model=\"selectedDefinitionId\"\r\n          placeholder=\"\"\r\n          style=\"width: 300px;\"\r\n          @change=\"loadSteps\"\r\n        >\r\n          <el-option\r\n            v-for=\"def in definitions\"\r\n            :key=\"def.id\"\r\n            :label=\"def.name\"\r\n            :value=\"def.id\"\r\n          />\r\n        </el-select>\r\n        <el-button type=\"primary\" @click=\"openCreateDialog\" :disabled=\"!selectedDefinitionId\">\r\n          \r\n        </el-button>\r\n      </div>\r\n  \r\n      <!--  -->\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"stepList\"\r\n        style=\"width: 100%; margin-top: 20px;\"\r\n        :row-key=\"(row) => row.id\"\r\n      >\r\n        <!-- <el-table-column prop=\"id\" label=\"ID\" width=\"220\" /> -->\r\n        <el-table-column prop=\"stepOrder\" label=\"\" width=\"80\" />\r\n        <el-table-column prop=\"stepName\" label=\"\" width=\"180\" />\r\n        <!-- role  roleStore  id  role name -->\r\n        <el-table-column label=\"\" width=\"180\">\r\n          <template #default=\"{ row }\">\r\n            {{ roleStore.getRoleName(row.role) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"actionType\" label=\"\" width=\"180\" />\r\n        <el-table-column prop=\"nextStepIfApproved\" label=\"\" width=\"180\" />\r\n        <el-table-column prop=\"nextStepIfRejected\" label=\"\" width=\"180\" />\r\n        <el-table-column label=\"\" width=\"220\">\r\n          <template #default=\"{ row }\">\r\n            <el-button size=\"small\" @click=\"openEditDialog(row)\"></el-button>\r\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(row.id)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n  \r\n      <!-- /  -->\r\n      <el-dialog title=\"\" v-model=\"dialogVisible\" width=\"600px\">\r\n        <el-form :model=\"formData\" label-width=\"140px\">\r\n          <el-form-item label=\"Step Order\">\r\n            <el-input-number v-model=\"formData.stepOrder\" :min=\"1\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"Step Name\">\r\n            <el-input v-model=\"formData.stepName\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"Role\">\r\n            <!--  TreeSelectRole  role id -->\r\n            <TreeSelectRole v-model=\"formData.role\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"Action Type\">\r\n            <el-select v-model=\"formData.actionType\" placeholder=\"\">\r\n              <el-option label=\"Approve/Reject\" value=\"Approve/Reject\" />\r\n              <el-option label=\"Notify\" value=\"Notify\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"Next Step If Approved\">\r\n            <el-input v-model=\"formData.nextStepIfApproved\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"Next Step If Rejected\">\r\n            <el-input v-model=\"formData.nextStepIfRejected\" />\r\n          </el-form-item>\r\n        </el-form>\r\n  \r\n        <template #footer>\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm\"></el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue'\r\n  import { ElMessage, ElMessageBox } from 'element-plus'\r\n  import workflowService from '../../../service/WorkflowService'\r\n  import TreeSelectRole from '../../../components/Common/TreeSelect-getData/TreeSelect-Role.vue'\r\n  import { useRoleStore } from \"../../../stores/role.js\"  //  role store \r\n  \r\n  // ()\r\n  const definitions = ref([])\r\n  const selectedDefinitionId = ref('')\r\n  \r\n  // \r\n  const stepList = ref([])\r\n  const loading = ref(false)\r\n  \r\n  // /\r\n  const dialogVisible = ref(false)\r\n  const formData = ref({\r\n    id: '',\r\n    processDefinitionId: '',\r\n    stepOrder: 1,\r\n    stepName: '',\r\n    role: '',\r\n    actionType: 'Approve/Reject',\r\n    nextStepIfApproved: '',\r\n    nextStepIfRejected: ''\r\n  })\r\n  \r\n  // \r\n  let isEditMode = false\r\n  \r\n  //  roleStore\r\n  const roleStore = useRoleStore()\r\n  \r\n  // 1)  ()\r\n  async function loadAllDefinitions() {\r\n    try {\r\n      const resp = await workflowService.getAllProcessDefinitions()\r\n      definitions.value = resp.data\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    }\r\n  }\r\n  \r\n  // 2) , \r\n  async function loadSteps() {\r\n    if (!selectedDefinitionId.value) return\r\n    loading.value = true\r\n    try {\r\n      const resp = await workflowService.getStepsByDefinition(selectedDefinitionId.value)\r\n      stepList.value = resp.data\r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n  \r\n  // 3)  -  (create)\r\n  function openCreateDialog() {\r\n    isEditMode = false\r\n    formData.value = {\r\n      id: '',\r\n      processDefinitionId: selectedDefinitionId.value,\r\n      stepOrder: 1,\r\n      stepName: '',\r\n      role: '',\r\n      actionType: 'Approve/Reject',\r\n      nextStepIfApproved: '',\r\n      nextStepIfRejected: ''\r\n    }\r\n    dialogVisible.value = true\r\n  }\r\n  \r\n  // 4)  - \r\n  function openEditDialog(row) {\r\n    isEditMode = true\r\n    formData.value = { ...row }\r\n    //  processDefinitionId\r\n    formData.value.processDefinitionId = selectedDefinitionId.value\r\n    dialogVisible.value = true\r\n  }\r\n  \r\n  // 5)  ( isEditMode  call  or )\r\n  async function submitForm() {\r\n    if (!formData.value.stepName) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    try {\r\n      if (!isEditMode) {\r\n        // \r\n        await workflowService.addProcessStepDefinition({\r\n          ...formData.value\r\n        })\r\n        ElMessage.success('')\r\n      } else {\r\n        // \r\n        await workflowService.updateProcessStepDefinition(formData.value.id, {\r\n          // \r\n          stepOrder: formData.value.stepOrder,\r\n          stepName: formData.value.stepName,\r\n          role: formData.value.role,\r\n          actionType: formData.value.actionType,\r\n          nextStepIfApproved: formData.value.nextStepIfApproved,\r\n          nextStepIfRejected: formData.value.nextStepIfRejected\r\n        })\r\n        ElMessage.success('')\r\n      }\r\n      dialogVisible.value = false\r\n      loadSteps() // \r\n    } catch (err) {\r\n      ElMessage.error(': ' + err)\r\n    }\r\n  }\r\n  \r\n  // 6) \r\n  function handleDelete(stepId) {\r\n    ElMessageBox.confirm('?', '', { type: 'warning' })\r\n      .then(async () => {\r\n        await workflowService.deleteProcessStepDefinition(stepId)\r\n        ElMessage.success('')\r\n        loadSteps()\r\n      })\r\n      .catch(() => {})\r\n  }\r\n  \r\n  //  ()\r\n  onMounted(() => {\r\n    loadAllDefinitions()\r\n    roleStore.fetchRoleData()\r\n  })\r\n  </script>\r\n  \r\n  <style scoped>\r\n  </style>\r\n  ","import script from \"./ProcessStepDefinitionManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProcessStepDefinitionManagement.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./Dpt_System.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Dpt_System.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\r\n  <div style=\"position: fixed; top: 10%; left: 50%; transform: translateX(-50%); display: flex; justify-content: center; align-items: center; flex-direction: column;\">\r\n    <div>\r\n      <img src=\"@/assets/logo/DAE_detail(bottom).png\" alt=\"Logo\" style=\"width: 22rem; padding-bottom:1rem; height: auto;\">\r\n    </div>\r\n    <div>\r\n      \r\n      <InputGroup>\r\n        <InputGroupAddon>\r\n          <i class=\"pi pi-user\"></i>\r\n        </InputGroupAddon>\r\n        <InputText \r\n          placeholder=\"\" \r\n          v-model=\"useraccount\" \r\n          :invalid=\"useraccount === null\"\r\n          @keyup.enter=\"login_EIP\"\r\n          v-focus\r\n        />    \r\n      </InputGroup>\r\n      \r\n      <InputGroup>\r\n        <InputGroupAddon>\r\n          <i class=\"pi pi-key\"></i>\r\n        </InputGroupAddon>\r\n        <Password  \r\n          placeholder=\"\"\r\n          v-model=\"userpassword\"       \r\n          :invalid=\"userpassword === null\"\r\n          @keyup.enter=\"login_EIP\" \r\n          :feedback=\"false\"\r\n          toggleMask \r\n        />\r\n \r\n      </InputGroup>\r\n      <!--  loginPasswordError  true  -->\r\n      <div v-if=\"loginPasswordError\" :class=\"{ shake: shakeLogin }\" style=\"color: red; margin-left:3rem;margin-top: 0.5rem;\">\r\n          \r\n      </div>\r\n      <div v-else-if=\"loginEmployeeDataError\" :class=\"{ shake: shakeLogin }\" style=\"width:10rem;color: red; margin-left:3rem;margin-top: 0.5rem;\">\r\n          IT\r\n      </div>\r\n      <!--  -->\r\n      <div v-else-if=\"loginInternalUserError\" :class=\"{ shake: shakeLogin }\" style=\"width:10rem;color: red; margin-left:3rem;margin-top: 0.5rem;\">\r\n          \r\n      </div>\r\n      <el-row style=\"justify-content: center; margin-top: 20px;\">\r\n        <el-button type=\"primary\" :loading=\"logining\" @click=\"login_EIP\"></el-button>\r\n      </el-row>\r\n    </div>\r\n    <el-row>\r\n      <el-col v-if=\"loginStatus === 'Success'\">\r\n        <el-result icon=\"success\" title=\"\"></el-result>\r\n      </el-col>\r\n      <el-col v-else-if=\"loginStatus === 'False'\">\r\n        <el-result\r\n          icon=\"error\"\r\n          title=\"\"\r\n          sub-title=\"(1+4)\">\r\n        </el-result>\r\n      </el-col>\r\n    </el-row>\r\n\r\n  </div>\r\n\r\n  <!--  user data not found  -->\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"\"\r\n    width=\"500\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <div>\r\n      <span></span>\r\n      <!--  -->\r\n      <el-input \r\n        v-model=\"newUserPassword\" \r\n        placeholder=\"\" \r\n        show-password \r\n        style=\"margin-top:1rem;\" \r\n      />\r\n       <!--  -->\r\n    <div \r\n      :class=\"{ shake: shake }\" \r\n      :style=\"{ color: passwordFormatError ? 'red' : 'gray', marginTop: '0.5rem' }\"\r\n    >\r\n      6 \"13093059\"\"dae\"  1231234 \r\n    </div>\r\n      <!--  -->\r\n      <el-input \r\n        v-model=\"confirmNewUserPassword\" \r\n        placeholder=\"\" \r\n        show-password \r\n        style=\"margin-top:1rem;\" \r\n      />\r\n      <!--  -->\r\n      <div :class=\"{ shake: shake }\" v-if=\"passwordMismatch\" style=\"color: red; margin-top: 0.5rem;\">\r\n        \r\n      </div>\r\n    </div>\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"handleConfirmNewPassword\">Confirm</el-button>\r\n        <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue';\r\nimport { useAuthStore } from '../stores/auth.js';\r\nimport InputGroupAddon from 'primevue/inputgroupaddon';\r\nimport InputGroup from 'primevue/inputgroup';\r\nimport InputText from 'primevue/inputtext';\r\nimport Password from 'primevue/password';\r\nimport { useRouter } from 'vue-router';\r\nimport EIPService from '../service/EIPService.js';\r\nimport { useToast } from 'primevue/usetoast';\r\nimport '../css/button/cool-button.css'; \r\nimport '../css/button/cool-button2.css'; \r\n\r\nconst authStore = useAuthStore();\r\n\r\n\r\nconst toast = useToast();\r\nconst router = useRouter();\r\n\r\nconst useraccount = ref(\"\");\r\nconst userpassword = ref(\"\");\r\nconst loginStatus = ref(\"NULL\");\r\nconst logining = ref(false);\r\nconst isLogin = ref(false);\r\n\r\n// \r\nconst dialogVisible = ref(false);\r\nconst newUserPassword = ref(\"\");\r\nconst confirmNewUserPassword = ref(\"\");\r\n// \r\nconst passwordFormatError = ref(\"\");\r\n// \r\nconst passwordMismatch = ref(false);\r\n// \r\nconst shake = ref(false);\r\nconst loginPasswordError = ref(false);\r\nconst loginEmployeeDataError = ref(false);\r\nconst loginInternalUserError = ref(false); // \r\nconst shakeLogin = ref(false);\r\n\r\nconst login_EIP = async () => {\r\n  try {\r\n    logining.value = true;\r\n    // \r\n    loginPasswordError.value = false;\r\n    loginEmployeeDataError.value=false;\r\n    loginInternalUserError.value = false; // \r\n    const userCredentials = {\r\n      userId: useraccount.value,\r\n      userPwd: userpassword.value,\r\n    };\r\n\r\n    //  authStore  loginJWT \r\n    await authStore.login_EIP(userCredentials);\r\n    \r\n    // \r\n    loginStatus.value = \"Success\";\r\n    isLogin.value = true;\r\n    \r\n    // \r\n    toast.add({ severity: 'success', summary: 'Success', detail: '!', life: 3000 });\r\n    // \r\n    router.push({ name: 'List_WF_Personal' });\r\n  } catch (error) {\r\n    console.error(\"Error logging in:\", error);\r\n    \r\n    if (error.response) {\r\n      // \r\n      const errorMsg = error.response.data.error;\r\n      //  404\r\n      if (error.response.status === 404) {\r\n        if (errorMsg === \"User data not found\") {\r\n          // \r\n          // \r\n          dialogVisible.value=true;\r\n          toast.add({ severity: 'error', summary: '', detail: '', life: 3000 });\r\n        } else if (errorMsg === \"Employee data not found\") {\r\n          // \r\n          loginEmployeeDataError.value=true;\r\n          shakeLogin.value = true;\r\n          setTimeout(() => { shakeLogin.value = false; }, 500);\r\n        }\r\n      } else if (errorMsg === \"Only specific personnel are allowed to log in.\") { // \r\n          loginInternalUserError.value = true;\r\n          shakeLogin.value = true;\r\n          setTimeout(() => { shakeLogin.value = false; }, 500);\r\n      }\r\n      //  401\r\n      else if (error.response.status === 401) {\r\n        loginPasswordError.value = true;\r\n        shakeLogin.value = true;\r\n        setTimeout(() => { shakeLogin.value = false; }, 500);\r\n      }\r\n      else {\r\n        toast.add({\r\n          severity: 'error',\r\n          summary: '',\r\n          detail: error.response.data.error || error.message,\r\n          life: 3000\r\n        });\r\n      }\r\n    } else {\r\n      //  error.response \r\n      toast.add({\r\n        severity: 'error',\r\n        summary: '',\r\n        detail: error.message,\r\n        life: 3000\r\n      });\r\n    }\r\n  } finally {\r\n    logining.value = false;\r\n  }\r\n};\r\n\r\nconst handleClose = (done) => {\r\n  dialogVisible.value = false;\r\n  done();\r\n};\r\n\r\n\r\n\r\nconst handleConfirmNewPassword = async () => {\r\n  const password = newUserPassword.value;\r\n  const confirmPassword = confirmNewUserPassword.value;\r\n  // 6\r\n  const pattern = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/;\r\n  \r\n  // \r\n  if (!pattern.test(password)) {\r\n    passwordFormatError.value = '6';\r\n    shake.value = true;\r\n    setTimeout(() => {\r\n      shake.value = false;\r\n    }, 500);\r\n    return;\r\n  } else {\r\n    passwordFormatError.value = '';\r\n  }\r\n  \r\n  // \r\n  const forbiddenStrings = ['13093059', 'dae'];\r\n  const passwordLower = password.toLowerCase();\r\n  const containsForbidden = forbiddenStrings.some(forbidden => \r\n    passwordLower.includes(forbidden.toLowerCase())\r\n  );\r\n  \r\n  if (containsForbidden) {\r\n    passwordFormatError.value = ' \"13093059\"  \"dae\" ';\r\n    shake.value = true;\r\n    setTimeout(() => {\r\n      shake.value = false;\r\n    }, 500);\r\n    return;\r\n  } else {\r\n    passwordFormatError.value = '';\r\n  }\r\n  \r\n  // \r\n  const sequentialNumbers = ['123', '1234', '12345', '123456', '1234567', '12345678', '123456789'];\r\n  const containsSequential = sequentialNumbers.some(seq => password.includes(seq));\r\n  \r\n  if (containsSequential) {\r\n    passwordFormatError.value = ' 1231234 ';\r\n    shake.value = true;\r\n    setTimeout(() => {\r\n      shake.value = false;\r\n    }, 500);\r\n    return;\r\n  } else {\r\n    passwordFormatError.value = '';\r\n  }\r\n  \r\n  // \r\n  if (password !== confirmPassword) {\r\n    passwordMismatch.value = true;\r\n    shake.value = true;\r\n    setTimeout(() => {\r\n      shake.value = false;\r\n    }, 500);\r\n    return;\r\n  } else {\r\n    passwordMismatch.value = false;\r\n  }\r\n  \r\n  //  payload\r\n  const payload = {\r\n    userId: useraccount.value,  // \r\n    userPwd: password           // \r\n  };\r\n\r\n  try {\r\n    //  API payload \r\n     await EIPService.firstLoginInputPassword(payload).then((res) => {\r\n      if(res.data==='employee data not found'){\r\n        toast.add({\r\n          severity: 'error',\r\n          summary: '',\r\n          detail: 'MIS',\r\n          life: 3000\r\n        });\r\n      }\r\n\r\n    dialogVisible.value = false;\r\n     });\r\n\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    toast.add({\r\n      severity: 'error',\r\n      summary: '',\r\n      detail: error.response?.data || error.message,\r\n      life: 3000\r\n    });\r\n  }\r\n};\r\n\r\nwatch(newUserPassword, () => {\r\n  // \r\n  if (passwordFormatError.value) {\r\n    passwordFormatError.value = '';\r\n  }\r\n});\r\nwatch(confirmNewUserPassword, () => {\r\n  // \r\n  if (passwordMismatch.value) {\r\n    passwordMismatch.value = false;\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n@keyframes shake {\r\n  0% { transform: translateX(0); }\r\n  25% { transform: translateX(-5px); }\r\n  50% { transform: translateX(5px); }\r\n  75% { transform: translateX(-5px); }\r\n  100% { transform: translateX(0); }\r\n}\r\n.shake {\r\n  animation: shake 0.5s;\r\n}\r\n</style>\r\n","import script from \"./EIP_Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EIP_Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EIP_Login.vue?vue&type=style&index=0&id=70f8a3f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-70f8a3f0\"]])\n\nexport default __exports__","/**\r\n * \r\n *  SalarySlip \r\n */\r\n\r\nimport FinanceService from '@/service/FinanceService';\r\n\r\nclass SalaryDataManager {\r\n  constructor() {\r\n    // \r\n    this.cache = new Map();\r\n    // \r\n    this.pendingRequests = new Map();\r\n    // \r\n    this.debounceTimers = new Map();\r\n    // \r\n    this.isLoading = false;\r\n    // 5\r\n    this.cacheExpireTime = 5 * 60 * 1000;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} empId - ID\r\n   * @param {string} date -  (YYYY-MM)\r\n   * @param {boolean} forceRefresh - \r\n   * @returns {Promise<Object>} \r\n   */\r\n  async getSalaryData(empId, date, forceRefresh = false) {\r\n    if (!empId || !date) {\r\n      throw new Error('ID');\r\n    }\r\n\r\n    const cacheKey = `${empId}-${date}`;\r\n    \r\n    // \r\n    if (this.debounceTimers.has(cacheKey)) {\r\n      clearTimeout(this.debounceTimers.get(cacheKey));\r\n    }\r\n\r\n    // \r\n    if (forceRefresh) {\r\n      this.clearCache(empId, date);\r\n      console.log(` : ${cacheKey}`);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      // \r\n      const timer = setTimeout(async () => {\r\n        try {\r\n          // \r\n          if (!forceRefresh && this._isCacheValid(cacheKey)) {\r\n            // console.log(` : ${cacheKey}`);\r\n            resolve(this.cache.get(cacheKey).data);\r\n            return;\r\n          }\r\n\r\n          // \r\n          if (this.pendingRequests.has(cacheKey)) {\r\n            // console.log(` : ${cacheKey}`);\r\n            const result = await this.pendingRequests.get(cacheKey);\r\n            resolve(result);\r\n            return;\r\n          }\r\n\r\n          // \r\n          // console.log(` : ${cacheKey}`);\r\n          const requestPromise = this._fetchAndProcessData(empId, date);\r\n          this.pendingRequests.set(cacheKey, requestPromise);\r\n\r\n          const result = await requestPromise;\r\n          \r\n          // \r\n          this.pendingRequests.delete(cacheKey);\r\n          this._setCacheData(cacheKey, result);\r\n          \r\n          resolve(result);\r\n        } catch (error) {\r\n          console.error(` : ${cacheKey}`, error);\r\n          this.pendingRequests.delete(cacheKey);\r\n          reject(error);\r\n        } finally {\r\n          this.debounceTimers.delete(cacheKey);\r\n        }\r\n      }, 150); // 150ms \r\n\r\n      this.debounceTimers.set(cacheKey, timer);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} empId \r\n   * @param {string} date \r\n   * @returns {Promise<Object>}\r\n   */\r\n  async _fetchAndProcessData(empId, date) {\r\n    // console.log(` : ${empId} - ${date}`);\r\n    \r\n    // \r\n    // console.log(`  API: empId=${empId}, date=${date}`);\r\n    const [salaryRes, leaveRes] = await Promise.all([\r\n      FinanceService.getSalarySlips_Eid_Date(empId, date),\r\n      FinanceService.getLeaveRecord(empId, date)\r\n    ]);\r\n\r\n    // console.log(' API ');\r\n    console.log(' :', salaryRes);\r\n    console.log('  CompanyInsurance:', salaryRes?.data?.CompanyInsurance);\r\n    console.log(' :', leaveRes);\r\n    console.log(' :', leaveRes?.data);\r\n\r\n    // \r\n    const processedData = this._processRawData(salaryRes.data, leaveRes.data);\r\n    \r\n    console.log(' ');\r\n    return processedData;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Object} salaryData - \r\n   * @param {Object} leaveData - \r\n   * @returns {Object} \r\n   */\r\n  _processRawData(salaryData, leaveData) {\r\n    try {\r\n      //  block \r\n      const blockArr = this._parseBlockData(salaryData?.block);\r\n      console.log(\"salaryData::\",blockArr)\r\n      // \r\n      const leaveRecords = leaveData?.leaveRecords || [];\r\n      const overtimeRecord = leaveData?.overtimeRecord || {};\r\n      // console.log(\"leaveRecords:::\",leaveRecords)\r\n      \r\n      // console.log(`  ${leaveRecords.length} `);\r\n      // console.log(' :', leaveRecords);\r\n      \r\n      // \r\n      // const personalLeave = leaveRecords.find(r => r.leaveChName === '' || r.leaveTypeName === '');\r\n      // const familyCareLeave = leaveRecords.find(r => r.leaveChName === '' || r.leaveTypeName === '');\r\n      \r\n      // console.log(' :', personalLeave);\r\n      // console.log(' :', familyCareLeave);\r\n\r\n      // \r\n      const blocks = this._extractBlocks(blockArr);\r\n      \r\n      //  -  CompanyInsurance\r\n      const insuranceCompany = this._extractInsuranceCompany(salaryData, blockArr);\r\n\r\n      // \r\n      // const enhancedBlockD = this._enhanceBlockDWithLeaveData(blocks.blockD, leaveRecords);\r\n      let enhancedBlockD = blocks.blockD; // \r\n\r\n      // \r\n      const salaryHeadInfo = this._parseSalaryHeadInfo(salaryData?.salaryHeadInfo);\r\n\r\n      //  - \r\n      const processedLeaveRecords = leaveRecords.map(record => ({\r\n        ...record,\r\n        yearlyTotalHours: (record.minutes / 60).toFixed(2)\r\n      }));\r\n\r\n      console.log('  blockD:', enhancedBlockD);\r\n      console.log(\"processedLeaveRecords:\",processedLeaveRecords);\r\n      \r\n      //  blockD \r\n      console.log('  salaryData:', salaryData);\r\n      const hasValidSalaryStructure = salaryData?.success !== false;\r\n      console.log(' :', { \r\n        'salaryData?.success': salaryData?.success,\r\n        'salaryData?.success !== false': salaryData?.success !== false,\r\n        hasValidSalaryStructure,\r\n        'hasValidSalaryStructure === false': hasValidSalaryStructure === false,\r\n        message: salaryData?.message \r\n      });\r\n      \r\n      //  success  false \r\n      if (salaryData?.success === false) {\r\n        console.log('  blockD ');\r\n        console.log(' enhancedBlockD:', JSON.stringify(enhancedBlockD, null, 2));\r\n        enhancedBlockD = this._clearBlockDInsuranceFields(enhancedBlockD);\r\n        console.log(' enhancedBlockD:', JSON.stringify(enhancedBlockD, null, 2));\r\n      } else {\r\n        console.log('  blockD ');\r\n        console.log('salaryData?.success :', salaryData?.success);\r\n      }\r\n      console.log(' :');\r\n      console.log('- blockD:', JSON.stringify(enhancedBlockD, null, 2));\r\n      \r\n      return {\r\n        blockA: blocks.blockA,\r\n        blockB: blocks.blockB,\r\n        blockD: enhancedBlockD,\r\n        blockAnnualLeave: blocks.blockAnnualLeave,\r\n        insuranceCompany: insuranceCompany,\r\n        salaryHeadInfo,\r\n        leaveRecords: processedLeaveRecords,\r\n        overtimeRecord,\r\n        isInitial: blockArr[0]?.isInitial === true,\r\n        timestamp: Date.now()\r\n      };\r\n    } catch (error) {\r\n      console.error(' :', error);\r\n      throw new Error(`: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  block \r\n   * @param {string|Array} blockData \r\n   * @returns {Array}\r\n   */\r\n  _parseBlockData(blockData) {\r\n    if (!blockData) return [];\r\n    console.log(\"_parseBlockData::\",blockData);\r\n    try {\r\n      return typeof blockData === 'string' ? JSON.parse(blockData) : blockData;\r\n    } catch (error) {\r\n      console.error('  block :', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Array} blockArr \r\n   * @returns {Object}\r\n   */\r\n  _extractBlocks(blockArr) {\r\n    console.log(' blockArr:', blockArr);\r\n    \r\n    const blocks = {\r\n      blockA: blockArr.find(item => 'total_A' in item) || { items: [] },\r\n      blockB: blockArr.find(item => 'total_B' in item) || { items: [] },\r\n      blockD: blockArr.find(item => 'total_D' in item) || { items: [] },\r\n      blockAnnualLeave: blockArr.find(item => 'annualLeave' in item) || { \r\n        items: [\r\n          { id: \"annualUsed\", ch_name: \"\", time: 0 },\r\n          { id: \"annualRemaining\", ch_name: \"\", time: 0 },\r\n          { id: \"annualLeave\", ch_name: \"\", time: 0 }\r\n        ]\r\n      }\r\n    };\r\n    \r\n    console.log('  blocks.blockAnnualLeave:', blocks.blockAnnualLeave);\r\n    if (blocks.blockD && blocks.blockD.items) {\r\n      console.log(' blockD.items :');\r\n      blocks.blockD.items.forEach((item, index) => {\r\n        console.log(`  ${index}: id=${item.id}, ch_name=${item.ch_name}, time=${item.time}, amount=${item.amount}`);\r\n      });\r\n    }\r\n    \r\n    console.log('  blockAnnualLeave:', blocks.blockAnnualLeave);\r\n    if (blocks.blockAnnualLeave && blocks.blockAnnualLeave.items) {\r\n      console.log(' blockAnnualLeave.items :');\r\n      blocks.blockAnnualLeave.items.forEach((item, index) => {\r\n        console.log(`  ${index}: id=${item.id}, ch_name=${item.ch_name}, time=${item.time}`);\r\n      });\r\n    } else {\r\n      console.log(' blockAnnualLeave  items');\r\n      console.log(' blockArr:', blockArr);\r\n    }\r\n    \r\n    return blocks;\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @param {string} salaryHeadInfoStr \r\n   * @returns {Object}\r\n   */\r\n  _parseSalaryHeadInfo(salaryHeadInfoStr) {\r\n    if (!salaryHeadInfoStr) {\r\n      return {\r\n        empName: '',\r\n        empDpt: '',\r\n        empTitleGrade: '',\r\n        insuranceLevel: '',\r\n        empTitleName: '',\r\n        empTitleLevel: ''\r\n      };\r\n    }\r\n\r\n    try {\r\n      return JSON.parse(salaryHeadInfoStr);\r\n    } catch (error) {\r\n      console.error('  salaryHeadInfo :', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} cacheKey \r\n   * @returns {boolean}\r\n   */\r\n  _isCacheValid(cacheKey) {\r\n    if (!this.cache.has(cacheKey)) return false;\r\n    \r\n    const cacheItem = this.cache.get(cacheKey);\r\n    const now = Date.now();\r\n    return (now - cacheItem.timestamp) < this.cacheExpireTime;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} cacheKey \r\n   * @param {Object} data \r\n   */\r\n  _setCacheData(cacheKey, data) {\r\n    this.cache.set(cacheKey, {\r\n      data,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} empId - ID\r\n   * @param {string} date - \r\n   */\r\n  clearCache(empId = null, date = null) {\r\n    if (empId && date) {\r\n      const cacheKey = `${empId}-${date}`;\r\n      this.cache.delete(cacheKey);\r\n      // console.log(` : ${cacheKey}`);\r\n    } else {\r\n      this.cache.clear();\r\n      // console.log(' ');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  cancelAllRequests() {\r\n    // \r\n    this.debounceTimers.forEach(timer => clearTimeout(timer));\r\n    this.debounceTimers.clear();\r\n    \r\n    // \r\n    this.pendingRequests.clear();\r\n    \r\n    // console.log(' ');\r\n  }\r\n\r\n  /**\r\n   *  blockD \r\n   * @param {Object} blockDObj \r\n   * @returns {Object}\r\n   */\r\n  _clearBlockDInsuranceFields(blockDObj) {\r\n    console.log(' ');\r\n    console.log('blockDObj:', blockDObj);\r\n    \r\n    //  blockDObj \r\n    if (!blockDObj) {\r\n      console.log(' blockDObj ');\r\n      blockDObj = { items: [] };\r\n    }\r\n    \r\n    //  items \r\n    if (!blockDObj.items || !Array.isArray(blockDObj.items)) {\r\n      console.log(' blockDObj.items ');\r\n      blockDObj.items = [];\r\n    }\r\n\r\n    const insuranceIds = ['laborInsurance', 'healthInsurance', 'healthFamily'];\r\n    let hasCleared = false;\r\n    \r\n    const clearedItems = blockDObj.items.map(item => {\r\n      if (insuranceIds.includes(item.id)) {\r\n        console.log(` : ${item.id} (: ${item.amount})`);\r\n        hasCleared = true;\r\n        return {\r\n          ...item,\r\n          amount: '' // \r\n        };\r\n      }\r\n      return item;\r\n    });\r\n\r\n    if (hasCleared) {\r\n      console.log(' ');\r\n    } else {\r\n      console.log(' ');\r\n      console.log(' IDs:', blockDObj.items.map(item => item.id));\r\n    }\r\n    \r\n    return {\r\n      ...blockDObj,\r\n      items: clearedItems\r\n    };\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {Object} salaryData -  CompanyInsurance\r\n   * @param {Array} blockArr - \r\n   * @returns {Object}\r\n   */\r\n  _extractInsuranceCompany(salaryData, blockArr) {\r\n    console.log(' ');\r\n    console.log('  salaryData:', salaryData);\r\n    console.log(' salaryData.CompanyInsurance:', salaryData?.CompanyInsurance);\r\n    console.log(' salaryData.companyInsurance:', salaryData?.companyInsurance);\r\n    \r\n    // \r\n    const companyInsuranceField = salaryData?.CompanyInsurance || salaryData?.companyInsurance;\r\n    console.log('  companyInsuranceField:', companyInsuranceField);\r\n    \r\n    //  CompanyInsurance \r\n    if (companyInsuranceField) {\r\n      try {\r\n        const companyInsuranceData = JSON.parse(companyInsuranceField);\r\n        console.log('  CompanyInsurance :', companyInsuranceData);\r\n        return companyInsuranceData;\r\n      } catch (error) {\r\n        console.error('  CompanyInsurance :', error);\r\n        console.log(' CompanyInsurance :', companyInsuranceField);\r\n      }\r\n    } else {\r\n      console.log('  CompanyInsurance  companyInsurance ');\r\n    }\r\n    \r\n    console.log('  CompanyInsurance  blockArr ');\r\n    \r\n    //  blockArr \r\n    const insuranceData = {\r\n      pensionCompany: { content: '' },\r\n      laborCompany: { content: '', calculatedLaborCompany: '' },\r\n      healthCompany: { content: '' }\r\n    };\r\n    \r\n    // \r\n    blockArr.forEach(block => {\r\n      if (block.items && Array.isArray(block.items)) {\r\n        block.items.forEach(item => {\r\n          if (item.id === 'pensionCompany') {\r\n            insuranceData.pensionCompany = {\r\n              content: item.content || item.amount || '',\r\n              ...item\r\n            };\r\n          } else if (item.id === 'laborCompany') {\r\n            insuranceData.laborCompany = {\r\n              content: item.content || item.amount || '',\r\n              calculatedLaborCompany: item.calculatedLaborCompany || item.content || item.amount || '',\r\n              ...item\r\n            };\r\n          } else if (item.id === 'healthCompany') {\r\n            insuranceData.healthCompany = {\r\n              content: item.content || item.amount || '',\r\n              ...item\r\n            };\r\n          }\r\n        });\r\n      }\r\n    });\r\n    \r\n    console.log('  blockArr :', insuranceData);\r\n    return insuranceData;\r\n  }\r\n\r\n  /**\r\n   *  CompanyInsurance \r\n   * @param {string} companyInsuranceJson -  CompanyInsurance JSON \r\n   * @returns {Object} \r\n   */\r\n  extractCompanyInsuranceData(companyInsuranceJson) {\r\n    const defaultInsuranceData = {\r\n      pensionCompany: { content: '' },\r\n      laborCompany: { content: '', calculatedLaborCompany: '' },\r\n      healthCompany: { content: '' }\r\n    };\r\n\r\n    try {\r\n      if (!companyInsuranceJson) {\r\n        console.log(' CompanyInsurance ');\r\n        return defaultInsuranceData;\r\n      }\r\n\r\n      const companyInsurance = JSON.parse(companyInsuranceJson);\r\n      console.log('  CompanyInsurance :', companyInsurance);\r\n\r\n      const insuranceData = { ...defaultInsuranceData };\r\n\r\n      // \r\n      if (companyInsurance.pensionCompany) {\r\n        insuranceData.pensionCompany = {\r\n          content: companyInsurance.pensionCompany.content || '',\r\n          ...companyInsurance.pensionCompany\r\n        };\r\n      }\r\n\r\n      // \r\n      if (companyInsurance.laborCompany) {\r\n        insuranceData.laborCompany = {\r\n          content: companyInsurance.laborCompany.content || '',\r\n          calculatedLaborCompany: companyInsurance.laborCompany.calculatedLaborCompany || companyInsurance.laborCompany.content || '',\r\n          ...companyInsurance.laborCompany\r\n        };\r\n        console.log(' :', {\r\n          : companyInsurance.laborCompany.content,\r\n          : companyInsurance.laborCompany.calculatedLaborCompany\r\n        });\r\n      }\r\n\r\n      // \r\n      if (companyInsurance.healthCompany) {\r\n        insuranceData.healthCompany = {\r\n          content: companyInsurance.healthCompany.content || '',\r\n          ...companyInsurance.healthCompany\r\n        };\r\n      }\r\n\r\n      console.log('  CompanyInsurance :', insuranceData);\r\n      return insuranceData;\r\n    } catch (error) {\r\n      console.error('  CompanyInsurance :', error);\r\n      return defaultInsuranceData;\r\n    }\r\n  }\r\n\r\n  /** \r\n   * \r\n   * @returns {Object}\r\n   */\r\n  getCacheStats() {\r\n    return {\r\n      cacheSize: this.cache.size,\r\n      pendingRequests: this.pendingRequests.size,\r\n      debounceTimers: this.debounceTimers.size\r\n    };\r\n  }\r\n}\r\n\r\n// \r\nconst salaryDataManager = new SalaryDataManager();\r\n\r\nexport default salaryDataManager;","<template>\r\n    <el-table\r\n      class=\"grid-lines\"\r\n      :data=\"tableData\"\r\n      max-width=\"380\"\r\n      :row-style=\"tableRowStyle\"\r\n      :header-cell-style=\"headerCellStyle\"\r\n      :resizable=\"false\"\r\n\r\n    >\r\n      <!--  \"category\" () -->\r\n      <el-table-column label=\"\" width=\"180\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.category }}\r\n        </template>\r\n      </el-table-column>\r\n  \r\n      <!--  (row.hours) -->\r\n      <el-table-column label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.hours }}\r\n        </template>\r\n      </el-table-column>\r\n  \r\n      <!--  (row.amount) -->\r\n      <el-table-column label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          <template v-if=\"row.category === '(A)'\">\r\n            <span style=\"color: red\">{{ computedA }}</span>\r\n          </template>\r\n          <template v-else>\r\n            {{ row.amount }}\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n</template>\r\n  \r\n  <script setup>\r\n  import { ref, defineProps, computed, watch, defineEmits } from 'vue'\r\n\r\n  function headerCellStyle() {\r\n    // \r\n    return { height: '41px', lineHeight: '41px' }\r\n  }\r\n\r\n  const props = defineProps({\r\n    data: {\r\n      type: Object,\r\n      default: () => ({ total_A: 0, items: [] })\r\n    }\r\n  })\r\n  \r\n  //  emit \r\n  const emit = defineEmits(['updateSalaryATotal', 'updateBlockAAggregate'])\r\n  \r\n  /**\r\n   * tableData\r\n   * - category:  ( \"1.\")\r\n   * - id:        ( \"basicSalary\")\r\n   * - hours, amount: \r\n   */\r\n  const tableData = ref([\r\n    { category: \"\",        id: \"basicSalary\",         hours: \"\", amount: \"\" },\r\n    { category: \"\",        id: \"rankAllowance\",       hours: \"\", amount: \"\" },\r\n    { category: \"\",        id: \"positionAllowance\",   hours: \"\", amount: \"\" },\r\n    { category: \"\",        id: \"mealAllowance\",       hours: \"\", amount: \"\" },\r\n    { category: \"()\",    id: \"hourlyWagePartTime\",  hours: \"\", amount: \"\" },\r\n    { category: \"(A)\",   id: \"subtotal\",            hours: \"\", amount: \"\" }\r\n  ])\r\n  \r\n  /**\r\n   *  (props.data)\r\n   *  tableData  id items \r\n   */\r\n  watch(\r\n    () => props.data,\r\n    (newData) => {\r\n      // console.log('newData:', newData)\r\n\r\n      if (newData && Array.isArray(newData.items)) {\r\n        //  totalA  ()\r\n        const { total_A, items } = newData\r\n  \r\n        //  id  item\r\n        tableData.value = tableData.value.map(row => {\r\n          if (row.category === \"(A)\") {\r\n            // \r\n            return {\r\n              ...row,\r\n              hours: \"\",\r\n              amount: total_A\r\n            }\r\n          } else {\r\n            //  itemid \r\n            const match = items.find(i => i.id === row.id) || {}\r\n            return {\r\n              ...row,\r\n              hours: match.time || \"\",\r\n              amount: match.amount || \"\"\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        //  hours, amount\r\n        tableData.value = tableData.value.map(row => ({\r\n          ...row,\r\n          hours: \"\",\r\n          amount: \"\"\r\n        }))\r\n      }\r\n    },\r\n    { immediate: true, deep: true }\r\n  )\r\n\r\n  \r\n  /**\r\n   * computedA(A) amount\r\n   */\r\nconst computedA = computed(() => {\r\n  //  \"()\" \r\n  const hourlyRow = tableData.value.find(row => row.id === 'hourlyWagePartTime');\r\n  const hours = hourlyRow ? parseFloat(hourlyRow.hours) || 0 : 0;\r\n  const hourlyAmount = hourlyRow ? parseFloat(hourlyRow.amount) || 0 : 0;\r\n\r\n  //  > 0   \r\n  if (hours > 0) {\r\n    return hours * hourlyAmount;\r\n  }\r\n\r\n  //  \"(A)\"  \"()\" \r\n  return tableData.value.reduce((sum, row) => {\r\n    if (row.category === \"(A)\" || row.id === 'hourlyWagePartTime') {\r\n      return sum;\r\n    }\r\n    return sum + (parseFloat(row.amount) || 0);\r\n  }, 0);\r\n});\r\n\r\n  /**\r\n   *  Block_A \r\n   */\r\n  const emitBlockAAggregate = (totalA) => {\r\n    //  Block_A \r\n    const blockAAggregate = {\r\n      total_A: totalA,\r\n      items: tableData.value\r\n        .filter(row => row.category !== \"(A)\") // \r\n        .map(row => ({\r\n          id: row.id,\r\n          ch_name: row.category,\r\n          time: row.hours || \"\",\r\n          amount: row.amount || \"\"\r\n        }))\r\n    }\r\n    \r\n    emit('updateBlockAAggregate', blockAAggregate)\r\n  }\r\n\r\n  /**\r\n   *  computedA  emit  updateSalaryA\r\n   */\r\n   watch(\r\n      computedA,\r\n      (newValue) => {\r\n        emit('updateSalaryATotal', newValue)\r\n        //  Block_A \r\n        emitBlockAAggregate(newValue)\r\n      },\r\n      { immediate: true }\r\n    )\r\n\r\n  function tableRowStyle() {\r\n    return { height: '41px' }\r\n  }\r\n\r\n  \r\n  </script>\r\n  ","import script from \"./Block_A.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Block_A.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <el-table\r\n    class=\"grid-lines\"\r\n    :data=\"tableData\"\r\n    width=\"380\"\r\n    :row-style=\"tableRowStyle\"\r\n    :header-cell-style=\"headerCellStyle\"\r\n    :resizable=\"false\"\r\n  >\r\n\r\n  \r\n    <!--  -->\r\n    <el-table-column label=\"\" width=\"180\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"props.editMode && !fixedCategories.includes(row.category)\">\r\n          <el-input v-model=\"row.category\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n        </div>\r\n        <div v-else>\r\n          {{ row.category }}\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    \r\n\r\n    <!-- time -->\r\n    <el-table-column label=\"\" width=\"100\">\r\n      <template #default=\"{ row }\">\r\n\r\n          <div v-if=\"props.editMode\">\r\n            <div v-if=\"editedHoursCategories.includes(row.category)\">\r\n              <el-input\r\n                  v-model=\"row.hours\"\r\n                  placeholder=\"time\"\r\n                  size=\"small\"\r\n                  style=\"width: 100%;\"\r\n                />\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            {{ row.hours !== undefined && row.hours !== '' ? row.hours : '0' }}\r\n          </div>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    <!-- amount -->\r\n    <el-table-column label=\"\" width=\"100\" :cell-class-name=\"cellClassName\">\r\n      <template #default=\"{ row }\">\r\n        <!-- (B) -->\r\n        <div v-if=\"row.category === '(B)'\">\r\n          <span style=\"color: red\">{{ computedB }}</span>\r\n        </div>\r\n        <!-- (C)=A+B -->\r\n        <div v-else-if=\"row.category === '(C)=A+B'\">\r\n          <span style=\"color: red\">{{ computedC }}</span>\r\n        </div>\r\n        <!-- (E)=C-D -->\r\n        <div v-else-if=\"row.category === '(E)=C-D'\">\r\n          <span style=\"color: red\">{{ computedE }}</span>\r\n        </div>\r\n        <!--  -->\r\n<div v-else-if=\"row.category === ''\">\r\n  <div v-if=\"props.editMode\">\r\n    <el-input v-model=\"holidayOvertime\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n  </div>\r\n  <div v-else>\r\n    {{ holidayOvertime }}\r\n  </div>\r\n</div>\r\n      <!--  * 4/3 amount -->\r\n<div v-else-if=\"row.category === '*4/3'\">\r\n  <div v-if=\"props.editMode\">\r\n    <el-input v-model=\"overtimeI\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n  </div>\r\n  <div v-else>\r\n    {{ overtimeI }}\r\n  </div>\r\n</div>\r\n<!--  * 5/3 amount -->\r\n<div v-else-if=\"row.category === '*5/3'\">\r\n  <div v-if=\"props.editMode\">\r\n    <el-input v-model=\"overtimeII\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n  </div>\r\n  <div v-else>\r\n    {{ overtimeII }}\r\n  </div>\r\n</div>\r\n<!--  * 6/3 amount -->\r\n<div v-else-if=\"row.category === '*6/3'\">\r\n  <div v-if=\"props.editMode\">\r\n    <el-input v-model=\"overtimeIII\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n  </div>\r\n  <div v-else>\r\n    {{ overtimeIII }}\r\n  </div>\r\n</div>\r\n        <!--  -->\r\n        <div v-else>\r\n          <div v-if=\"props.editMode && row.category !== '(E)=C-D' && row.id !== 'blank'\">\r\n            <el-input v-model=\"row.amount\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, computed, watch, defineEmits } from 'vue'\r\n\r\nconst manualOvertimeI = ref(\"\");\r\nconst manualOvertimeII = ref(\"\");\r\nconst manualOvertimeIII = ref(\"\");\r\n\r\n\r\n// \r\nconst manualHolidayOvertime = ref(\"\");\r\n\r\n// hours * (totalA / 30 / 24) * 2\r\nconst computedHolidayOvertime = computed(() => {\r\n  const row = tableData.value.find(r => r.id === 'publicHolidayOvertime')\r\n  const hours = parseFloat(row?.hours) || 0\r\n  const totalA = parseFloat(props.totalA) || 0\r\n  return  Math.ceil(hours * (totalA / 30 / 8) * 1)\r\n})\r\n\r\n//  computed \r\nconst holidayOvertime = computed({\r\n  get() {\r\n    return manualHolidayOvertime.value !== \"\" ? manualHolidayOvertime.value : computedHolidayOvertime.value;\r\n  },\r\n  set(val) {\r\n    manualHolidayOvertime.value = val;\r\n  }\r\n});\r\n\r\nfunction headerCellStyle() {\r\n  // \r\n  return { height: '41px', lineHeight: '41px' }\r\n}\r\n\r\n/**  **/\r\nconst props = defineProps({\r\n  editMode: { type: Boolean, default: false },\r\n  totalA: { type: [Number, String], default: 0 },\r\n  totalD: { type: [Number, String], default: 0 },\r\n  data: { \r\n    type: Object, \r\n    default: () => ({ \r\n      total_B: 0, \r\n      items: []  // \r\n    }) \r\n  }\r\n})\r\n\r\n//  emit \r\nconst emit = defineEmits(['updateSalaryB_Aggregate'])\r\n\r\n//  tableData  ()\r\nconst tableData = ref([\r\n  { category: \"*4/3\",  hours: \"\", amount: \"\", id: \"overtime1_3\" },\r\n  { category: \"*5/3\", hours: \"\", amount: \"\", id: \"overtime2_3\" },\r\n  { category: \"*6/3\", hours: \"\", amount: \"\", id: \"overtime5_3\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"publicHolidayOvertime\" },\r\n  { category: \"\",     hours: \"\", amount: \"\", id: \"perfectAttendanceBonus\" },\r\n  { category: \"\",       hours: \"\", amount: \"\", id: \"entertainmentExpenses\" },\r\n  { category: \"\",     hours: \"\", amount: \"\", id: \"communicationAllowance\" },\r\n  { category: \"\",   hours: \"\", amount: \"\", id: \"transportationSubsidy\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other1\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other2\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other3\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other4\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other5\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other6\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other7\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"B_other8\" },\r\n  { category: \"\", hours: \"\", amount: \"\", id: \"reimburse\" },\r\n  { category: \"(B)\", hours: \"\", amount: \"\", id: \"subtotalB\" },\r\n  { category: \"(C)=A+B\", hours: \"\", amount: \"\", id: \"subtotalC\" },\r\n  { category: \"(E)=C-D\",   hours: \"\", amount: \"\", id: \"subtotalE\" },\r\n\r\n])\r\n\r\nfunction tableRowStyle() {\r\n  return { height: '41px' }\r\n}\r\n\r\n/** time */\r\nconst editedHoursCategories = [\r\n  \"*4/3\", \"*5/3\", \"*6/3\", \r\n  \"\"\r\n  ]\r\n\r\n\r\n/** fixedCategories category  **/\r\nconst fixedCategories = [\r\n\"*4/3\",\r\n\"*5/3\",\r\n\"*6/3\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"(B)\",\r\n  \"(C)=A+B\",\r\n  \"(E)=C-D\",\r\n  \" \"\r\n]\r\n\r\n// //  items  id \r\n// function findById(items, id) {\r\n//   return items.find(x => x.id === id) || {}\r\n// }\r\n\r\n\r\nconst computedB = computed(() => { \r\n  const sumValue = tableData.value.reduce((sum, row) => {\r\n    if (\r\n      row.category === \"(B)\" ||\r\n      row.category === \"(C)=A+B\" ||\r\n      row.category === \"(E)=C-D\"\r\n    ) {\r\n      return sum;\r\n    }\r\n    let amount = 0;\r\n    if (row.category === '*4/3') {\r\n      amount = parseFloat(overtimeI.value) || 0;\r\n    } else if (row.category === '*5/3') {\r\n      amount = parseFloat(overtimeII.value) || 0;\r\n    } else if (row.category === '*6/3') {\r\n      amount = parseFloat(overtimeIII.value) || 0;\r\n    } else if (row.category === '') {\r\n      amount = parseFloat(holidayOvertime.value) || 0;\r\n    } else {\r\n      amount = parseFloat(row.amount) || 0;\r\n    }\r\n    return sum + amount;\r\n  }, 0);\r\n  return Math.round(sumValue);\r\n});\r\n\r\n/** computedC: (C)=A+B **/\r\nconst computedC = computed(() => {\r\n  return (parseFloat(props.totalA) || 0) + computedB.value\r\n})\r\n\r\n/** computedE: (E)=C-D **/\r\nconst computedE = computed(() => {\r\n  return computedC.value - (parseFloat(props.totalD) || 0)\r\n})\r\n\r\n//  computed \r\nconst overtimeI = computed({\r\n  get() {\r\n    return manualOvertimeI.value !== \"\" ? manualOvertimeI.value : computedOvertimeI.value;\r\n  },\r\n  set(val) {\r\n    manualOvertimeI.value = val;\r\n  }\r\n});\r\n\r\nconst overtimeII = computed({\r\n  get() {\r\n    return manualOvertimeII.value !== \"\" ? manualOvertimeII.value : computedOvertimeII.value;\r\n  },\r\n  set(val) {\r\n    manualOvertimeII.value = val;\r\n  }\r\n});\r\n\r\nconst overtimeIII = computed({\r\n  get() {\r\n    return manualOvertimeIII.value !== \"\" ? manualOvertimeIII.value : computedOvertimeIII.value;\r\n  },\r\n  set(val) {\r\n    manualOvertimeIII.value = val;\r\n  }\r\n});\r\n\r\n/**  I amount **/\r\nconst computedOvertimeI = computed(() => {\r\n  const row = tableData.value.find(r => r.id === 'overtime1_3')\r\n  const hours = parseFloat(row?.hours) || 0\r\n  const totalA = parseFloat(props.totalA) || 0\r\n  return Math.ceil(hours * (totalA / 30 / 8 ) * 1.34)\r\n})\r\n\r\n/**  II amount **/\r\nconst computedOvertimeII = computed(() => {\r\n  const row = tableData.value.find(r => r.id === 'overtime2_3')\r\n  const hours = parseFloat(row?.hours) || 0\r\n  const totalA = parseFloat(props.totalA) || 0\r\n  return Math.ceil(hours * (totalA / 30 / 8 ) * 1.67)\r\n})\r\n\r\n/**  III amount **/\r\nconst computedOvertimeIII = computed(() => {\r\n  const row = tableData.value.find(r => r.id === 'overtime5_3')\r\n  const hours = parseFloat(row?.hours) || 0\r\n  const totalA = parseFloat(props.totalA) || 0\r\n  return Math.ceil(hours * (totalA / 30 / 8 ) * 2)\r\n})\r\n\r\n/** cellClassName:  **/\r\nconst cellClassName = ({ row }) => {\r\n  if (row.category === '(B)') {\r\n    return 'hide-right-border'\r\n  }\r\n  return ''\r\n}\r\n\r\n\r\n      //  editMode  true  false  tableData  emit \r\n      watch(\r\n        () => props.editMode,\r\n        (newVal, oldVal) => {\r\n          if (oldVal === true && newVal === false) {\r\n            // \r\n            // 1)  id \r\n            const getVal = (idStr) => {\r\n        const row = tableData.value.find(r => r.id === idStr);\r\n        if (!row) return { ch_name: \"\", time: 0, amount: 0, id: idStr };\r\n\r\n        let amount = row.amount || 0;\r\n        if (idStr === 'overtime1_3') {\r\n          amount = parseFloat(overtimeI.value) || 0;\r\n        } else if (idStr === 'overtime2_3') {\r\n          amount = parseFloat(overtimeII.value) || 0;\r\n        } else if (idStr === 'overtime5_3') {\r\n          amount = parseFloat(overtimeIII.value) || 0;\r\n        } else if (idStr === 'publicHolidayOvertime') {\r\n          amount = parseFloat(holidayOvertime.value) || 0;\r\n        }\r\n\r\n        return {\r\n          id: row.id,\r\n          ch_name: row.category,\r\n          time: row.hours || 0,\r\n          amount: amount\r\n        };\r\n      };\r\n      const aggregated = {\r\n        items: [\r\n          { ...getVal(\"overtime1_3\"), isMinute: true },\r\n          { ...getVal(\"overtime2_3\"), isMinute: true },\r\n          { ...getVal(\"overtime5_3\"), isMinute: true },\r\n          { ...getVal(\"publicHolidayOvertime\") },\r\n          { ...getVal(\"perfectAttendanceBonus\") },\r\n          { ...getVal(\"entertainmentExpenses\") },\r\n          { ...getVal(\"communicationAllowance\") },\r\n          { ...getVal(\"transportationSubsidy\") },\r\n          { ...getVal(\"reimburse\") },\r\n          { ...getVal(\"B_other1\") },\r\n          { ...getVal(\"B_other2\") },\r\n          { ...getVal(\"B_other3\") },\r\n          { ...getVal(\"B_other4\") },\r\n          { ...getVal(\"B_other5\") },\r\n          { ...getVal(\"B_other6\") },\r\n          { ...getVal(\"subtotalB\") },\r\n          { ...getVal(\"subtotalC\") },\r\n          { ...getVal(\"subtotalE\") },\r\n          //  id ( overtimeMealAllowance, A_other2, A_other3) \r\n        ],\r\n        total_B: computedB.value,\r\n        total_C: computedC.value,\r\n        total_E: computedE.value\r\n      }\r\n      emit(\"updateSalaryB_Aggregate\", aggregated)\r\n    }\r\n  }\r\n)\r\n\r\n\r\n\r\n//  data\r\nwatch(\r\n  () => props.data,\r\n  (newData) => {\r\n    if (newData && Array.isArray(newData.items)) {\r\n      tableData.value = tableData.value.map(row => {\r\n        if (row.id === 'subtotalB') {\r\n          return { ...row, hours: \"\", amount: newData.total_B };\r\n        }\r\n        if (row.id === 'subtotalC') {\r\n          return { ...row, hours: \"\", amount: newData.total_C };\r\n        }\r\n        if (row.id === 'subtotalE') {\r\n          return { ...row, hours: \"\", amount: newData.total_E };\r\n        }\r\n\r\n        //  B_other \r\n        if (['B_other1', 'B_other2', 'B_other3', 'B_other4', 'B_other5', 'B_other6'].includes(row.id)) {\r\n          const item = newData.items.find(x => x.id === row.id) || {};\r\n          return {\r\n            ...row,\r\n            category: item.ch_name || '',  //  ch_name\r\n            hours: item.time !== undefined ? item.time : row.hours,\r\n            amount: item.amount !== undefined ? item.amount : row.amount,\r\n          };\r\n        }\r\n\r\n        const item = newData.items.find(x => x.ch_name === row.category) || {};\r\n        \r\n        // \r\n        if (row.category === '*4/3') {\r\n          manualOvertimeI.value = (item.amount !== undefined && item.amount !== \"\") ? item.amount : \"\";\r\n        } else if (row.category === '*5/3') {\r\n          manualOvertimeII.value = (item.amount !== undefined && item.amount !== \"\") ? item.amount : \"\";\r\n        } else if (row.category === '*6/3') {\r\n          manualOvertimeIII.value = (item.amount !== undefined && item.amount !== \"\") ? item.amount : \"\";\r\n        } else if (row.category === '') {\r\n          manualHolidayOvertime.value = (item.amount !== undefined && item.amount !== \"\") ? item.amount : \"\";\r\n        }\r\n        \r\n        return {\r\n          ...row,\r\n          hours: item.time !== undefined ? item.time : (row.hours || \"\"),\r\n          amount: item.amount !== undefined ? item.amount : (row.amount || \"\")\r\n        };\r\n      });\r\n    } else {\r\n      // \r\n      manualOvertimeI.value = \"\";\r\n      manualOvertimeII.value = \"\";\r\n      manualOvertimeIII.value = \"\";\r\n      manualHolidayOvertime.value = \"\";\r\n      \r\n      tableData.value.forEach(item => {\r\n        //  B_other  category\r\n        if (['B_other1', 'B_other2', 'B_other3', 'B_other4', 'B_other5', 'B_other6'].includes(item.id)) {\r\n          item.category = \"\";\r\n        }\r\n        //  hours  amount\r\n        item.hours = \"\";\r\n        item.amount = \"\";\r\n      });\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n);\r\n\r\n\r\n\r\n\r\n</script>\r\n<style scoped>\r\n/*  41px */\r\n.empty-row td {\r\n  height: 41px !important; \r\n  /*  min-height: 41px;  */\r\n}\r\n\r\n</style>\r\n","import script from \"./Block_B.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Block_B.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Block_B.vue?vue&type=style&index=0&id=3795447c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3795447c\"]])\n\nexport default __exports__","// initialTableData.js\r\nexport const initialBlockCTable = [\r\n    { id: \"laborInsurance\",           category: \"\", hours: \"\", amount: \"\", insurance: { laborPersonal: \"\", healthPersonal: \"\" } },\r\n    { id: \"healthInsurance\",          category: \"\", hours: \"\", amount: \"\", insurance: { laborPersonal: \"\", healthPersonal: \"\" } },\r\n    { id: \"healthFamily\",             category: \"\", hours: \"\", amount: \"\", insurance: { healthFamily: \"\" } },\r\n    { id: \"personalLeave\",            category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"typhoonLeave\",             category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"familyCareLeave\",          category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"sickLeaveWithin30\",        category: \"30\", hours: \"\", amount: \"\" },\r\n    { id: \"sickLeaveBeyond30\",        category: \"30\", hours: \"\", amount: \"\" },\r\n    { id: \"menstrualLeave\",           category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"lateMinutes\",              category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"welfare\",                  category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"mealAdvance\",              category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"laborPensionContribution\", category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"deductions\",               category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"workInjuryLeave\",          category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"maternityParentalLeave\",   category: \"/\", hours: \"\", amount: \"\" },\r\n    { id: \"bereavementLeave\",         category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"marriageLeave\",            category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"otherLeave\",               category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"absenteeism\",              category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"lunchFee\",                 category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"D_other1\",                 category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"D_other2\",                 category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"D_other3\",                 category: \"\", hours: \"\", amount: \"\" },\r\n    { id: \"deductionSubtotal\",        category: \"(D)\", hours: \"\", amount: \"\" }\r\n  ];\r\n  ","<template>\r\n  <el-table\r\n    class=\"grid-lines\"\r\n    :data=\"tableData\"\r\n    width=\"380\"\r\n    :row-style=\"tableRowStyle\"\r\n    :header-cell-style=\"headerCellStyle\"\r\n    :resizable=\"false\"\r\n  >\r\n    <!--  ch_name  -->\r\n    <el-table-column label=\"\" width=\"180\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"props.editMode && !fixedCategories.includes(row.category)\">\r\n          <el-input\r\n            v-model=\"row.category\"\r\n            placeholder=\"\"\r\n            size=\"small\"\r\n            style=\"width: 100%;\"\r\n          />\r\n        </div>\r\n        <div v-else>\r\n          {{ row.category }}\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    <!--  -->\r\n    <el-table-column label=\"\" width=\"100\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"fixedHoursCategories.includes(row.category)\">\r\n          {{ formatHours(row.hours) }}\r\n        </div>\r\n        <div v-else>\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.hours\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ formatHours(row.hours) }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n\r\n    <!--  -->\r\n    <el-table-column label=\"\" width=\"100\" :cell-class-name=\"cellClassName\">\r\n      <template #default=\"{ row }\">\r\n        <template v-if=\"row.category === '(D)'\">\r\n          <span style=\"color: red\">{{ computedD }}</span>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.insurance?.healthFamily || row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input \r\n              v-model=\"row.amount\"\r\n              placeholder=\"\" \r\n              size=\"small\" \r\n              style=\"width: 100%;\" \r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.insurance?.laborPersonal || row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.insurance?.healthPersonal || row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input v-model=\"row.amount\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"row.category === ''\">\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount }}\r\n          </div>\r\n        </template>\r\n\r\n        <template v-else>\r\n          <div v-if=\"props.editMode\">\r\n            <el-input\r\n              v-model=\"row.amount\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </div>\r\n          <div v-else>\r\n            {{ row.amount || \"\" }}\r\n          </div>\r\n        </template>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n</template>\r\n<script setup>\r\n/* eslint-disable no-unused-vars, no-undef */\r\nimport { ref, defineProps, computed, defineEmits, watch, nextTick, getCurrentInstance } from 'vue'\r\nimport { initialBlockCTable } from '../initBlockCTable'\r\n// import ExternalService from '../../../../service/ExternalService' // \r\nimport eventBus from '@/eventBus.js'\r\n/**  */\r\nconst props = defineProps({\r\n  editMode: { type: Boolean, default: false },\r\n  totalA: { type: [Number, String], default: 0 },\r\n  data: {\r\n    type: Object,\r\n    default: () => ({ total_D: 0, items: [] })\r\n  },\r\n  lateTotal: { type: [Number, String], default: 0 },\r\n})\r\n\r\nconst emit = defineEmits([\"updateDeductionD\", \"updateSalaryDAggregate\"])\r\n\r\n// \r\nconst formatHours = (hours) => {\r\n  if (!hours && hours !== 0) return \"\";\r\n  \r\n  // \r\n  const num = parseFloat(hours);\r\n  if (isNaN(num)) return \"\";\r\n  \r\n  // \r\n  return num.toString();\r\n};\r\n\r\n// \r\nconst instance = getCurrentInstance()\r\n\r\n// \r\nconst forceUpdate = () => {\r\n  if (instance) {\r\n    instance.proxy.$forceUpdate()\r\n  }\r\n}\r\n\r\n//  computed  Block_B \r\nconst displayWelfare = computed(() => {\r\n  const welfareRow = tableData.value.find(r => r.category === '')\r\n  return welfareRow?.amount || \"\"\r\n})\r\n\r\n//  Block_B \r\nconst displayPersonalLeave = computed(() => {\r\n  const personalLeaveRow = tableData.value.find(r => r.category === '')\r\n  const amount = personalLeaveRow?.amount || \"\"\r\n  // \r\n  if (amount && !isNaN(parseFloat(amount))) {\r\n    const numAmount = parseFloat(amount)\r\n    // \r\n    return numAmount % 1 === 0 ? numAmount.toString() : numAmount.toString()\r\n  }\r\n\r\n  return amount\r\n})\r\n\r\nconst displayTyphoonLeave = computed(() => {\r\n  const typhoonLeaveRow = tableData.value.find(r => r.category === '')\r\n  return typhoonLeaveRow?.amount || \"\"\r\n})\r\n\r\nconst displayAbsenteeism = computed(() => {\r\n  const absenteeismRow = tableData.value.find(r => r.category === '')\r\n  return absenteeismRow?.amount || \"\"\r\n})\r\n\r\n//  row.amount\r\n\r\n//  row.amount\r\n\r\n//  row.amount\r\n\r\n//  * (totalA / 30 / 24)\r\nconst computedLateDeduction = computed(() => {\r\n  const row = tableData.value.find(r => r.category === '')\r\n  const minutes = parseFloat(row?.hours) || 0\r\n  const totalA = parseFloat(props.totalA) || 0\r\n  return Math.floor(minutes * (totalA / 30 / 8 / 60))\r\n})\r\n\r\n//  row.amount\r\n\r\n//  welfare computed \r\nconst welfare = computed({\r\n  get() {\r\n    return displayWelfare.value\r\n  },\r\n  set(val) {\r\n    handleWelfareInput(val)\r\n  }\r\n})\r\n\r\n//  computed \r\nconst lateDeduction = computed({\r\n  get() {\r\n    const lateRow = tableData.value.find(r => r.category === '')\r\n    return lateRow?.amount || computedLateDeduction.value\r\n  },\r\n  set(val) {\r\n    const lateRow = tableData.value.find(r => r.category === '')\r\n    if (lateRow) {\r\n      lateRow.amount = val\r\n    }\r\n  }\r\n})\r\n\r\n//  - \r\n//  FinanceUtils.UpdateSalarySlipLeaveRecord \r\n// \r\n\r\n// \r\nconst manualWelfare = ref(\"\")\r\nconst manualLateDeduction = ref(\"\")\r\nconst manualPersonalLeave = ref(\"\")\r\nconst manualTyphoonLeave = ref(\"\")\r\nconst manualAbsenteeism = ref(\"\")\r\n\r\n//  personalLeaveAmount computed \r\nconst personalLeaveAmount = computed({\r\n  get() {\r\n    return displayPersonalLeave.value\r\n  },\r\n  set(val) {\r\n    handlePersonalLeaveInput(val)\r\n  }\r\n})\r\n\r\n//  - \r\n// const manualTyphoonLeaveAmount = ref(\"\");\r\n// const computedTyphoonLeaveAmount = computed(() => { ... })\r\n\r\n//  typhoonLeaveAmount computed \r\nconst typhoonLeaveAmount = computed({\r\n  get() {\r\n    return displayTyphoonLeave.value\r\n  },\r\n  set(val) {\r\n    handleTyphoonLeaveInput(val)\r\n  }\r\n})\r\n\r\n// \r\nconst handleWelfareInput = (value) => {\r\n  manualWelfare.value = value\r\n  const welfareRow = tableData.value.find(r => r.category === '')\r\n  if (welfareRow) {\r\n    welfareRow.amount = value\r\n  }\r\n}\r\n\r\nconst handlePersonalLeaveInput = (value) => {\r\n  manualPersonalLeave.value = value\r\n  const personalLeaveRow = tableData.value.find(r => r.category === '')\r\n  if (personalLeaveRow) {\r\n    personalLeaveRow.amount = value\r\n  }\r\n}\r\n\r\nconst handleTyphoonLeaveInput = (value) => {\r\n  manualTyphoonLeave.value = value\r\n  const typhoonLeaveRow = tableData.value.find(r => r.category === '')\r\n  if (typhoonLeaveRow) {\r\n    typhoonLeaveRow.amount = value\r\n  }\r\n}\r\n\r\nfunction tableRowStyle() {\r\n  return { height: '41px' }\r\n}\r\n\r\nfunction headerCellStyle() {\r\n  // \r\n  return { height: '41px', lineHeight: '41px' }\r\n}\r\n\r\n/**  */\r\nconst tableData = ref(JSON.parse(JSON.stringify(initialBlockCTable)).map(item => ({\r\n  ...item,\r\n  hours: item.hours || \"\",\r\n  amount: item.amount || \"\"\r\n})))\r\n\r\n// \r\nconst fixedHoursCategories = [\r\n  \"\", \"\", \"\",\r\n  \"\", \"\", \"\", \"\",\r\n  \"\", \"\", \"/\", \"\", \"\", \"\", \"\", \"(D)\", \"\"\r\n  //  \"\"  \"\"\r\n]\r\n\r\n// \r\nconst editableCategories = []\r\n\r\n/**  */\r\nconst insuranceOptions = ref([])\r\n// \r\n// onMounted(async () => {\r\n//   try {\r\n//     const res = await ExternalService.GetAllInsuranceRates()\r\n//     //  res.data\r\n//     insuranceOptions.value = res.data\r\n//   } catch (error) {\r\n//     console.error('Fetch error:', error)\r\n//   }\r\n// })\r\n\r\nwatch(\r\n  () => props.data,\r\n  (newData) => {\r\n    if (newData && Array.isArray(newData.items)) {\r\n      tableData.value = tableData.value.map(row => {\r\n\r\n\r\n        //  id  item row.id\r\n        const item = newData.items.find(x => x.id === row.id) || {};\r\n        //  insurance  item.amount  row.amount \r\n        if (['laborInsurance', 'healthInsurance', 'healthFamily'].includes(row.id)) {\r\n          //  insurance \r\n          if (!row.insurance) {\r\n            row.insurance = {};\r\n          }\r\n\r\n\r\n          //  row.amount \r\n          if (row.id === 'laborInsurance') {\r\n            row.insurance.laborPersonal = (item.amount !== undefined ? item.amount : row.amount) + \"\";\r\n          } else if (row.id === 'healthInsurance') {\r\n            row.insurance.healthPersonal = (item.amount !== undefined ? item.amount : row.amount) + \"\";\r\n          } else if (row.id === 'healthFamily') {\r\n            row.insurance.healthFamily = (item.amount !== undefined ? item.amount : row.amount) + \"\";\r\n          }\r\n          //  row.amount\r\n          row.amount = item.amount !== undefined ? item.amount : row.amount;\r\n        } else if (['subtotalB', 'subtotalC', 'subtotalE'].includes(row.id)) {\r\n          //  subtotal \r\n          return { ...row, hours: \"\", amount: newData[`total_${row.id.slice(-1)}`] };\r\n        } else if (['B_other1', 'B_other2', 'B_other3', 'B_other4', 'B_other5', 'B_other6'].includes(row.id)) {\r\n          return {\r\n            ...row,\r\n            category: item.ch_name || '',  //  ch_name\r\n            hours: item.time !== undefined ? item.time : row.hours,\r\n            amount: item.amount !== undefined ? item.amount : row.amount,\r\n          };\r\n        }\r\n        //  hours  amount\r\n        // \r\n        // \r\n        \r\n        return {\r\n          ...row,\r\n          hours: item.time !== undefined ? (item.time === null ? \"\" : String(item.time)) : (row.hours || \"\"),\r\n          amount: item.amount !== undefined ? (item.amount === null ? \"\" : String(item.amount)) : (row.amount || \"\")\r\n        };\r\n      });\r\n    } else {\r\n      tableData.value.forEach(item => {\r\n        // \r\n        if (item.id === 'lateMinutes') {\r\n          console.log(' :', { hours: item.hours, amount: item.amount });\r\n          return;  \r\n        }\r\n        // console.log(item.id,'',item.hours)\r\n        // \r\n        if (!item.hours || item.hours === \"0\") {\r\n          item.hours = \"\";\r\n        }\r\n        if (!item.amount || item.amount === \"0\") {\r\n          item.amount = \"\";\r\n        }\r\n        //  B_other category \r\n        if (['B_other1', 'B_other2', 'B_other3', 'B_other4', 'B_other5', 'B_other6'].includes(item.id)) {\r\n          item.category = \"\";\r\n        }\r\n        // \r\n        // \r\n        //  row.amount\r\n        if (['laborInsurance', 'healthInsurance', 'healthFamily'].includes(item.id)) {\r\n      if (item.insurance) {\r\n        if (item.id === 'laborInsurance') {\r\n          item.insurance.laborPersonal = \"\";\r\n        } else if (item.id === 'healthInsurance') {\r\n          item.insurance.healthPersonal = \"\";\r\n        } else if (item.id === 'healthFamily') {\r\n          item.insurance.healthFamily = \"\";\r\n        }\r\n      }\r\n    }\r\n      });\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n);\r\n\r\n// \r\nwatch(\r\n  () => props.data,\r\n  (newData) => {\r\n    if (newData && Array.isArray(newData.items)) {\r\n      newData.items.forEach(item => {\r\n        const row = tableData.value.find(r => r.id === item.id);\r\n        if (row) {\r\n          // \r\n          const hasUserInput = row.amount && row.amount !== \"0\" && row.amount !== \"\";\r\n          \r\n          if (!hasUserInput) {\r\n            // \r\n            if (item.id === 'lateMinutes') {\r\n              row.hours = item.time || '';\r\n              row.amount = item.amount || '';\r\n              console.log(' :', { hours: item.time, amount: item.amount });\r\n            } else {\r\n              row.hours = item.time || '';\r\n              row.amount = item.amount || '';\r\n              console.log(` ${row.category} :`, { hours: item.time, amount: item.amount });\r\n            }\r\n          } else {\r\n            // \r\n            console.log(`  ${row.category}:`, { amount: row.amount });\r\n          }\r\n        }\r\n      });\r\n    }\r\n    \r\n    // \r\n    const lateRow = tableData.value.find(r => r.category === '');\r\n    if (lateRow && props.lateTotal && (!lateRow.amount || lateRow.amount === \"0\")) {\r\n      lateRow.hours = props.lateTotal.toString();\r\n      lateRow.amount = computedLateDeduction.value.toString();\r\n      console.log(' :', { hours: props.lateTotal, amount: computedLateDeduction.value });\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n);\r\n\r\n\r\n\r\n// (  )\r\nconst computedFamilyInsurance = computed(() => {\r\n  const familyRow = tableData.value.find(r => r.category === '')\r\n  const healthRow = tableData.value.find(r => r.category === '')\r\n  const familyCount = parseFloat(familyRow?.hours) || 0\r\n  const healthFee = parseFloat(healthRow?.amount) || 0\r\n  return familyCount * healthFee\r\n})\r\n\r\n// \r\n\r\nconst computedD = computed(() => {\r\n  return tableData.value.reduce((sum, row) => {\r\n    if (row.id === 'deductionSubtotal') return sum\r\n    let amount = 0\r\n    if (row.category === '') {\r\n      amount = parseFloat(lateDeduction.value) || 0\r\n    } else if (row.category === '') {\r\n      amount = parseFloat(row.amount) || 0\r\n    } else if (row.category === '') {\r\n      amount = parseFloat(personalLeaveAmount.value) || 0; // \r\n    } else if (row.category === '') {\r\n      amount = parseFloat(typhoonLeaveAmount.value) || 0; // \r\n    } else if (row.category === '') {\r\n      amount = parseFloat(displayAbsenteeism.value) || 0; // \r\n    } else if (row.category === '') {\r\n      amount = parseFloat(row.insurance?.laborPersonal) || 0;\r\n    } else if (row.category === '') {\r\n      amount = parseFloat(row.insurance?.healthPersonal) || 0;\r\n    } else if (row.category === '') {\r\n      amount = parseFloat(row.insurance?.healthFamily) || 0;\r\n    } else {\r\n      amount = parseFloat(row.amount) || 0;\r\n    }\r\n    return sum + amount\r\n  }, 0)\r\n})\r\n\r\n//  category\r\nconst fixedCategories = [\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"30\",\r\n  \"30\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"/\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"\",\r\n  \"(D)\"\r\n]\r\n\r\n//  watch \r\n//  watch \r\n// watch(\r\n//   () => {\r\n//     const row = tableData.value.find(r => r.category === '')\r\n//     return row?.hours                //  primitive\r\n//   },\r\n//   (nv, ov) => {\r\n//     console.log('[lateMinutes] hours :', ov, '', nv)\r\n//     console.trace()                  //  callstack\r\n//   },\r\n//   { immediate: true }\r\n// )\r\n\r\nwatch(\r\n  () => {\r\n    const lateRow = tableData.value.find(r => r.category === '')\r\n    return lateRow ? lateRow.hours : null\r\n  },\r\n  (newHours) => {\r\n    const lateRow = tableData.value.find(r => r.category === '')\r\n    if (lateRow) {\r\n      lateRow.amount = lateDeduction.value\r\n    }\r\n  }\r\n)\r\n\r\n//  - \r\n// watch(() => { ... }, (newHours) => { ... })\r\n\r\n//  - \r\n// watch(() => { ... }, (newHours) => { ... })\r\n\r\n//  totalA  - \r\n// watch(() => props.totalA, async (newTotalA) => { ... })\r\n\r\n//  lateTotal\r\nwatch(\r\n  () => props.lateTotal,\r\n  val => {\r\n    const lateRow = tableData.value.find(r => r.id === 'lateMinutes')\r\n    if (lateRow) {\r\n      //  lateTotal\r\n      const hasBackendData = props.data?.items?.find(x => x.id === 'lateMinutes');\r\n      if (!hasBackendData) {\r\n        lateRow.hours = val?.toString() ?? ''\r\n        // \r\n        if (val) {\r\n          lateRow.amount = computedLateDeduction.value.toString();\r\n        }\r\n        console.log('  lateTotal :', { hours: val, amount: lateRow.amount });\r\n      } else {\r\n        console.log('  lateTotal ');\r\n      }\r\n    }\r\n  },\r\n  {\r\n    immediate: true,\r\n    //  watch DOM \r\n    flush: 'post'\r\n  }\r\n)\r\n\r\n\r\n\r\n//  - \r\n// \r\n// \r\n// \r\n\r\n// \r\nwatch(\r\n  () => props.editMode,\r\n  (newEditMode, oldEditMode) => {\r\n    if (!newEditMode && oldEditMode) {\r\n      console.log(' Block_C: ');\r\n      \r\n      // \r\n      const savedUserInputs = {};\r\n      tableData.value.forEach(row => {\r\n        if (row.amount && row.amount !== \"0\" && row.amount !== \"\") {\r\n          savedUserInputs[row.id] = {\r\n            hours: row.hours,\r\n            amount: row.amount\r\n          };\r\n        }\r\n      });\r\n      \r\n      console.log(' :', savedUserInputs);\r\n      \r\n      // \r\n      tableData.value = JSON.parse(JSON.stringify(initialBlockCTable)).map(item => ({\r\n        ...item,\r\n        hours: item.hours || \"\",\r\n        amount: item.amount || \"\"\r\n      }))\r\n      \r\n      // \r\n      Object.keys(savedUserInputs).forEach(id => {\r\n        const row = tableData.value.find(r => r.id === id);\r\n        if (row) {\r\n          row.hours = savedUserInputs[id].hours;\r\n          row.amount = savedUserInputs[id].amount;\r\n          console.log(`  ${row.category}:`, savedUserInputs[id]);\r\n        }\r\n      });\r\n      \r\n      console.log(' Block_C: ');\r\n      //  props.data  watch \r\n    }\r\n  }\r\n)\r\n\r\n/**  computedD   emit  */\r\nwatch(\r\n  computedD,\r\n  (val) => {\r\n    emit(\"updateDeductionD\", val)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n/**  emit  */\r\nwatch(\r\n  () => props.editMode,\r\n  (newVal, oldVal) => {\r\n    if (oldVal === true && newVal === false) {\r\n      const aggregated = {\r\n        total_D: computedD.value,\r\n        items: tableData.value.map(row => {\r\n          let amount = row.amount\r\n          if (row.category === '') {\r\n            // \r\n            amount = row.amount || \"\"\r\n            console.log(' :', { \r\n              category: row.category, \r\n              rowAmount: row.amount, \r\n              finalAmount: amount,\r\n              rowData: row \r\n            })\r\n          } else if (row.category === '') {\r\n            // \r\n            amount = row.amount || ''\r\n          } else if (row.category === '') {\r\n            //  row.amount\r\n            amount = row.amount || ''\r\n          } else if (row.category === '') {\r\n            //  row.amount row.amount\r\n            amount = row.amount || \"\"\r\n          } else if (row.category === '') {\r\n            amount = row.amount || row.insurance?.laborPersonal || ''\r\n          } else if (row.category === '') {\r\n            amount = row.amount || row.insurance?.healthPersonal || ''\r\n          } else if (row.category === '') {\r\n            amount = row.amount || row.insurance?.healthFamily || ''\r\n          }\r\n          return {\r\n            id: row.id,\r\n            ch_name: row.category,\r\n            time: row.hours || '',\r\n            amount: amount || ''\r\n          }\r\n        })\r\n      }\r\n\r\n      //  - \r\n      // \r\n      //  API \r\n\r\n      emit('updateSalaryDAggregate', aggregated)\r\n    }\r\n  }\r\n)\r\n\r\n\r\n\r\n/**  */\r\nfunction cellClassName({ row }) {\r\n  return ''\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.empty-row td {\r\n  height: 41px !important; \r\n  /*  min-height: 41px;  */\r\n}\r\n</style>","import script from \"./Block_C.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Block_C.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Block_C.vue?vue&type=style&index=0&id=6cf598a0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6cf598a0\"]])\n\nexport default __exports__","<template>\r\n    <el-table\r\n      class=\"grid-lines\"\r\n      :data=\"tableData\"\r\n      :show-header=\"false\"\r\n      style=\"max-width:380px;\"\r\n      :row-style=\"tableRowStyle\"\r\n      :header-cell-style=\"headerCellStyle\"\r\n      :resizable=\"false\"\r\n\r\n    >\r\n      <!--  -->\r\n      <el-table-column\r\n        prop=\"ch_name\"\r\n        label=\"\"\r\n        width=\"180\"\r\n      />\r\n      <!--  -->\r\n      <el-table-column label=\"\" width=\"100\">\r\n        <template #default=\"scope\">\r\n          <!--  -->\r\n          <template v-if=\"editMode\">\r\n            <el-input v-model=\"scope.row.time\" type=\"number\" size=\"small\" />\r\n          </template>\r\n          <!--  -->\r\n          <template v-else>\r\n            {{ scope.row.time }}\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\" width=\"100\">\r\n        <template #default=\"\">\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, defineProps, watch, defineEmits } from 'vue'\r\n  \r\n  function tableRowStyle() {\r\n    return { height: '41px' }\r\n  }\r\n  function headerCellStyle() {\r\n    // \r\n    return { height: '41px', lineHeight: '41px' }\r\n  }\r\n\r\n  //  props\r\n  const props = defineProps({\r\n    editMode: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    data: {\r\n      type: Object,\r\n      default: () => ({\r\n        id: \"block_AnnualLeave\",\r\n        items: [\r\n          { id: \"annualUsed\", ch_name: \"\", time: 0 },\r\n          { id: \"annualRemaining\", ch_name: \"\", time: 0 },\r\n        ]\r\n      })\r\n    }\r\n  })\r\n  \r\n  //  emit \r\n  const emit = defineEmits(['updateAnnualLeaveData'])\r\n  \r\n  // \r\n  const defaultTableData = [\r\n    { id: \"annualUsed\", ch_name: \"\", time: 0 },\r\n    { id: \"annualRemaining\", ch_name: \"\", time: 0 },\r\n  ]\r\n  \r\n  //  tableData \r\n  const tableData = ref([...defaultTableData])\r\n  \r\n  //  props  tableData\r\n  const initializeTableData = () => {\r\n    if (props.data && Array.isArray(props.data.items) && props.data.items.length > 0) {\r\n      // \r\n      tableData.value = props.data.items.map(item => ({ ...item }))\r\n    } else {\r\n      // \r\n      tableData.value = [...defaultTableData]\r\n    }\r\n  }\r\n\r\n  initializeTableData()\r\n\r\n  //  props.data tableData if/else \r\n  watch(\r\n    () => props.data,\r\n    (newData) => {\r\n      console.log(' Block_AnnualLeave :', newData);\r\n      if (newData && Array.isArray(newData.items) && newData.items.length > 0) {\r\n        console.log(' ');\r\n        tableData.value = newData.items.map(item => ({ ...item }))\r\n      } else {\r\n        console.log(' ');\r\n        //  \"\" \r\n        tableData.value = [...defaultTableData]\r\n      }\r\n      console.log('  tableData:', tableData.value);\r\n    },\r\n    { immediate: true, deep: true }\r\n  )\r\n  \r\n  //  editMode  true  false  emit \r\n  watch(\r\n    () => props.editMode,\r\n    (newVal, oldVal) => {\r\n      if (oldVal === true && newVal === false) {\r\n        const updatedStructure = {\r\n          annualLeave: \"annualLeave\",\r\n          items: tableData.value.map(row => ({\r\n            id: row.id,\r\n            ch_name: row.ch_name,\r\n            time: row.time\r\n          }))\r\n        }\r\n        emit('updateAnnualLeaveData', updatedStructure)\r\n      }\r\n    }\r\n  )\r\n  </script>\r\n  ","import script from \"./Block_AnnualLeave.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Block_AnnualLeave.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template> \r\n    <el-table \r\n      class=\"grid-lines block-public-contribution\"\r\n      style=\"width: 762px; margin-top:-2px; table-layout: fixed;\"\r\n      :data=\"tableData\"\r\n      :show-header=\"false\"\r\n      :row-style=\"rowStyle\"\r\n    >\r\n      <!--  -->\r\n      <el-table-column prop=\"col1\" width=\"93\">\r\n        <template #default=\"{ row }\">\r\n          <div>\r\n            {{ row.col1 }}\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <!--  ( publicLaborPension) -->\r\n      <el-table-column prop=\"col2\" width=\"160\">\r\n        <template #default=\"{ row }\">\r\n\r\n            {{ row.col2 }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <!--  -->\r\n      <el-table-column prop=\"col3\" width=\"95\">\r\n        <template #default=\"{ row }\">\r\n          <div>\r\n            {{ row.col3 }}\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <!--  ( publicLaborInsurance) -->\r\n      <el-table-column prop=\"col4\" width=\"160\">\r\n        <template #default=\"{ row }\">\r\n\r\n            {{ row.col4 }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <!--  -->\r\n      <el-table-column prop=\"col5\" width=\"93\">\r\n        <template #default=\"{ row }\">\r\n          <div>\r\n            {{ row.col5 }}\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <!--  ( publicHealthInsurance) -->\r\n      <el-table-column prop=\"col6\" width=\"160\">\r\n        <template #default=\"{ row }\">\r\n     \r\n            {{ row.col6 }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n    </el-table>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, defineProps, defineEmits, watch } from 'vue'\r\n  \r\n  //  props\r\n  const props = defineProps({\r\n    editMode: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    selectedUser: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    insuranceCompany: {\r\n      type: Object,\r\n      default: () => ({\r\n        pensionCompany: '',\r\n        laborCompany: '',\r\n        healthCompany: ''\r\n      })\r\n    }\r\n  })\r\n  \r\n  //  emit \r\n  const emit = defineEmits(['updateInsuranceValues'])\r\n  \r\n  // \r\n  const rowStyle = () => ({ height: \"30px\", lineHeight: \"10px\" })\r\n  \r\n  //  tableData\r\n  // col1 / col2  (publicLaborPension)\r\n  // col3 / col4  (publicLaborInsurance)\r\n  // col5 / col6  (publicHealthInsurance)\r\n  const tableData = ref([\r\n    { col1: '', col2: '', col3: '', col4: '', col5: '', col6: '' },\r\n  ])\r\n  \r\n  // \r\n  watch(\r\n    () => props.selectedUser,\r\n    (newVal) => {\r\n      if (newVal && newVal.namE_FIRST) {\r\n        tableData.value[0].col2 = newVal.namE_FIRST\r\n      } else {\r\n        tableData.value[0].col2 = ''\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n  \r\n  \r\n  // emit \r\n  watch(\r\n    () => props.editMode,\r\n    (newVal, oldVal) => {\r\n      // (true)(false)\r\n      if (oldVal === true && newVal === false) {\r\n        emit('updateInsuranceValues', {\r\n          publicLaborPension: tableData.value[0].col2,\r\n          publicLaborInsurance: tableData.value[0].col4,\r\n          publicHealthInsurance: tableData.value[0].col6\r\n        })\r\n      }\r\n    }\r\n  )\r\n\r\n  watch(\r\n    () => props.insuranceCompany,\r\n    (newVal) => {\r\n      if (\r\n        !newVal ||\r\n        !newVal.pensionCompany ||\r\n        !newVal.laborCompany ||\r\n        !newVal.healthCompany\r\n      ) {\r\n        // \r\n        tableData.value = [\r\n          { col1: '', col2: '', col3: '', col4: '', col5: '', col6: '' },\r\n        ]\r\n      } else {\r\n        //  content \r\n        tableData.value[0].col2 = newVal.pensionCompany.content || ''\r\n        //  calculatedLaborCompany\r\n        tableData.value[0].col4 = newVal.laborCompany.calculatedLaborCompany || ''\r\n        tableData.value[0].col6 = newVal.healthCompany.content || ''\r\n      }\r\n    },\r\n    { deep: true }\r\n  )\r\n\r\n  </script>\r\n\r\n  ","import script from \"./Block_InsuranceCompany.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Block_InsuranceCompany.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setExternalAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'External'; \r\n\r\nexport default {\r\n  GetAllInsuranceRates() {\r\n    return api().get(`${controllerPath}/GetAllInsuranceRates`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n  \r\n\r\n};\r\n","<template> \r\n  <el-table \r\n    class=\"custom-table\"\r\n    style=\"width: 763.5px; table-layout: fixed;\"\r\n    :data=\"tableData\"\r\n    :show-header=\"false\"\r\n    :row-style=\"rowStyle\"\r\n    border\r\n  >\r\n    <!--  -->\r\n    <el-table-column prop=\"col1\" width=\"120\">\r\n      <template #default=\"{ row }\">\r\n        <div>\r\n          {{ row.col1 }}\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n    \r\n    <!--  -->\r\n    <el-table-column prop=\"col2\" width=\"170\">\r\n      <template #default=\"{ row }\">\r\n        <!--  -->\r\n        <div v-if=\"row.col1 === ''\">\r\n          {{ row.col2 }}\r\n        </div>\r\n        <!--  -->\r\n        <div v-else>\r\n          <div v-if=\"props.editMode\">\r\n            <template v-if=\"row.col1 === ''\">\r\n              <!--  select -->\r\n              <el-select\r\n                v-model=\"row.col2\"\r\n                placeholder=\"\"\r\n                style=\"width: 8rem;\"\r\n                allow-create\r\n                size=\"small\"\r\n                filterable\r\n                width=\"100\" \r\n                @change=\"value => handleInsuranceUpdate(row, value)\"\r\n              >\r\n                <el-option disabled value=\"\">\r\n                  <div\r\n                    style=\"display: flex; justify-content: center; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\"\r\n                  >\r\n                    <span>/</span>\r\n                  </div>\r\n                </el-option>\r\n                <el-option\r\n                  v-for=\"item in mappedInsuranceOptions\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.combinedLevel\"\r\n                  :value=\"item.combinedLevel\"\r\n                  v-bind=\"{ laborFee: item.laborLevel, healthFee: item.healthLevel }\"\r\n                >\r\n                  <div style=\"display: flex; justify-content: space-between;\">\r\n                    <span style=\"font-size: 13px;\">{{ item.combinedLevel }}</span>\r\n                  </div>\r\n                </el-option>\r\n              </el-select>\r\n            </template>\r\n            <template v-else>\r\n              <el-input v-model=\"row.col2\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" @input=\"updateParentSalaryHeadInfo\" />\r\n            </template>\r\n          </div>\r\n          <div v-else>\r\n            {{ row.col2 }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n    \r\n    <!--  -->\r\n    <el-table-column prop=\"col3\" width=\"80\"></el-table-column>\r\n    \r\n    <!--  store  -->\r\n    <el-table-column prop=\"col4\" width=\"140\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"props.editMode\">\r\n          <template v-if=\"row.col1 === ''\">\r\n            <!--  TreeSelectDepartment -->\r\n            <TreeSelectDepartment v-model=\"row.col4\" size=\"small\" @update:modelValue=\"updateParentSalaryHeadInfo\" />\r\n          </template>\r\n          <template v-else-if=\"row.col1 === ''\">\r\n            <!--  TreeSelectTitle -->\r\n            <TreeSelectTitle v-model=\"row.col4\" size=\"small\" @update:modelValue=\"updateParentSalaryHeadInfo\" />\r\n          </template>\r\n          <template v-else>\r\n            <el-input v-model=\"row.col4\" placeholder=\"\" size=\"small\" @input=\"updateParentSalaryHeadInfo\" />\r\n          </template>\r\n        </div>\r\n        <div v-else>\r\n          <template v-if=\"row.col1 === ''\">\r\n            <!--  AsyncDeptName  -->\r\n            <DeptIdToName :deptId=\"row.col4\" />\r\n          </template>\r\n          <template v-else-if=\"row.col1 === ''\">\r\n            <!--  AsyncTitleName  -->\r\n            <TitleIdToName mode=\"Description\" :titleId=\"row.col4\" />\r\n          </template>\r\n          <template v-else>\r\n            {{ row.col4 }}\r\n          </template>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n    \r\n    <!--  -->\r\n    <el-table-column prop=\"col5\" width=\"100\"></el-table-column>\r\n    \r\n    <!--  -->\r\n    <el-table-column prop=\"col6\" width=\"152\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"props.editMode\">\r\n          <el-input v-model=\"row.col6\" placeholder=\"\" size=\"small\" @input=\"updateParentSalaryHeadInfo\" />\r\n        </div>\r\n        <div v-else>\r\n          {{ row.col6 }}\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n    \r\n  </el-table>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, defineEmits, onMounted, watch, computed } from 'vue'\r\nimport TreeSelectTitle from '../../Common/TreeSelect-getData/TreeSelect-Title.vue'\r\nimport TreeSelectDepartment from '../../Common/TreeSelect-getData/TreeSelect-Department.vue'\r\nimport DeptIdToName from '../../Common/IdToName/Dept-IdToName.vue'\r\nimport TitleIdToName from '../../Common/IdToName/Title-IdToName.vue'\r\nimport ExternalService from '../../../service/ExternalService'\r\n\r\nconst updateCounter = ref(0)\r\n\r\nconst props = defineProps({\r\n  editMode: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  //\r\n  selectedUser: {\r\n    type: Object,\r\n    default: null\r\n  },\r\n  salaryHeadInfoRef:{\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['update:salaryHeadInfoRef'])\r\n\r\n\r\n\r\n\r\n\r\nconst rowStyle = () => ({ height: \"10px\", lineHeight: \"10px\"})\r\n\r\nconst tableData = ref([\r\n  { col1: '', col2: '', col3: '', col4: '', col5: '', col6: '' },\r\n  { col1: '', col2: '', col3: '', col4: '', col5: '', col6: '' }\r\n])\r\n\r\nconst insuranceOptions = ref([])\r\nfunction fillHeaderTableData(responseData) {\r\n  let headInfo = {};\r\n  \r\n  //  responseData  salaryHeadInfo \r\n  if (!responseData.salaryHeadInfo) {\r\n    headInfo = responseData;\r\n  }\r\n  // \r\n  else if (typeof responseData.salaryHeadInfo === 'string' && responseData.salaryHeadInfo.trim() !== \"\") {\r\n    try {\r\n      headInfo = JSON.parse(responseData.salaryHeadInfo);\r\n    } catch (error) {\r\n      console.error(\" salaryHeadInfo \", error);\r\n      headInfo = {};\r\n      //  tableData \r\n      tableData.value = tableData.value.map(row => ({ ...row, col2: '', col4: '', col6: '' }));\r\n    }\r\n  }\r\n  //  salaryHeadInfo \r\n  else {\r\n    headInfo = {};\r\n    tableData.value = tableData.value.map(row => ({ ...row, col2: '', col4: '', col6: '' }));\r\n  }\r\n\r\n  // \r\n  const getValue = (key) => headInfo[key] !== undefined && headInfo[key] !== null ? headInfo[key] : '';\r\n\r\n  //  tableData  ()\r\n  if (tableData.value.length < 2) {\r\n    console.error(\"tableData \");\r\n    return;\r\n  }\r\n\r\n  // \r\n  //  headInfo  empName  selectedUser \r\n  const empName = getValue(\"empName\");\r\n  if (empName) {\r\n    tableData.value[0].col2 = empName;\r\n  } else if (props.selectedUser?.namE_FIRST) {\r\n    tableData.value[0].col2 = props.selectedUser.namE_FIRST;\r\n  } else {\r\n    tableData.value[0].col2 = '';\r\n  }\r\n  \r\n  tableData.value[0].col4 = getValue(\"empDpt\");          // \r\n  tableData.value[0].col6 = getValue(\"empTitleGrade\");   // \r\n\r\n  // \r\n  tableData.value[1].col2 = getValue(\"insuranceLevel\");  // \r\n  tableData.value[1].col4 = getValue(\"empTitleName\");      // \r\n  tableData.value[1].col6 = getValue(\"empTitleLevel\");     // \r\n}\r\n\r\n\r\nwatch(\r\n  () => [props.selectedUser, updateCounter.value],\r\n  async ([newUser]) => {\r\n    if (newUser && newUser.namE_FIRST) {\r\n      tableData.value[0].col2 = newUser.namE_FIRST;\r\n    } else {\r\n      tableData.value[0].col2 = '';\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  ()=> props.salaryHeadInfoRef,\r\n  (newVal) => {\r\n    if (newVal) {\r\n      fillHeaderTableData(newVal);\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n\r\n//  laborPersonal \r\nconst countMap = computed(() => {\r\n  const counts = {}\r\n  insuranceOptions.value.forEach(item => {\r\n    counts[item.laborPersonal] = (counts[item.laborPersonal] || 0) + 1\r\n  })\r\n  return counts\r\n})\r\n\r\n//  (combinedLevel) \"laborLevel / healthLevel\"\r\nconst mappedInsuranceOptions = computed(() => {\r\n  const laborMap = {}  //  laborPersonal  insuranceLevel\r\n  return insuranceOptions.value.map(item => {\r\n    const newItem = {\r\n      id: item.id,\r\n      insuranceLevel: item.insuranceLevel,\r\n      laborLevel: item.insuranceLevel,\r\n      healthLevel: item.insuranceLevel\r\n    }\r\n    if (countMap.value[item.laborPersonal] > 1) {\r\n      if (!(item.laborPersonal in laborMap)) {\r\n        laborMap[item.laborPersonal] = item.insuranceLevel\r\n      }\r\n      newItem.laborLevel = laborMap[item.laborPersonal]\r\n      newItem.healthLevel = item.insuranceLevel\r\n    }\r\n    newItem.combinedLevel = `${newItem.laborLevel} / ${newItem.healthLevel}`\r\n    return newItem\r\n  })\r\n})\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const res = await ExternalService.GetAllInsuranceRates();\r\n    //  res.data\r\n    insuranceOptions.value = res.data;\r\n  } catch (error) {\r\n    console.error('Fetch error:', error)\r\n  }\r\n})\r\n\r\n\r\n\r\nconst handleInsuranceUpdate = (row, newValue) => {\r\n  if (row.col1 === '') {\r\n    row.col2 = newValue\r\n  }\r\n  // \r\n  updateParentSalaryHeadInfo()\r\n}\r\n\r\n//  tableData  salaryHeadInfoRef\r\nconst updateParentSalaryHeadInfo = () => {\r\n  const updatedHeadInfo = {\r\n    empName: tableData.value[0].col2,           // \r\n    empDpt: tableData.value[0].col4,            // \r\n    empTitleGrade: tableData.value[0].col6,     // \r\n    insuranceLevel: tableData.value[1].col2,    // \r\n    empTitleName: tableData.value[1].col4,      // \r\n    empTitleLevel: tableData.value[1].col6      // \r\n  }\r\n  \r\n  // \r\n  // console.log('=== SalaryInfo  ===')\r\n  // console.log('tableData.value:', tableData.value)\r\n  // console.log('updatedHeadInfo:', updatedHeadInfo)\r\n  // console.log('editMode:', props.editMode)\r\n  \r\n  emit('update:salaryHeadInfoRef', updatedHeadInfo)\r\n}\r\n\r\n//  tableData \r\nwatch(\r\n  () => tableData.value,\r\n  () => {\r\n    if (props.editMode) {\r\n      updateParentSalaryHeadInfo()\r\n    }\r\n  },\r\n  { deep: true }\r\n)\r\n</script>\r\n\r\n<style scoped>\r\n.custom-table {\r\n  border: 1px solid #000000;\r\n  border-collapse: collapse;\r\n}\r\n\r\n::v-deep .el-table__header th,\r\n::v-deep .el-table__body td {\r\n  border: 1px solid #000000 !important;\r\n  padding: 0 !important;\r\n}\r\n</style>\r\n","import script from \"./SalaryInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalaryInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SalaryInfo.vue?vue&type=style&index=0&id=5b228660&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b228660\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"user-list-block\">\r\n      <InputText \r\n        v-model=\"search\"\r\n        placeholder=\"\"\r\n        class=\"search-input mb-3\"\r\n      />\r\n      <div class=\"tab-container\">\r\n        <div class=\"tabs-wrapper\" ref=\"tabsWrapper\">\r\n          <el-tabs \r\n            v-model=\"selectedUserId\" \r\n            type=\"card\" \r\n            class=\"user-tabs\"\r\n            :class=\"{ 'sys-mode-tabs': sysMode }\"\r\n            @tab-click=\"onTabClick\"\r\n          >\r\n            <el-tab-pane \r\n              v-for=\"user in filteredUsers\" \r\n              :key=\"user.emploY_ID\"\r\n              :name=\"user.emploY_ID\">\r\n              <template #label>\r\n                <el-tooltip class=\"item\" effect=\"dark\" :content=\"user.namE_FIRST\" placement=\"top\">\r\n                  <span>{{ user.namE_FIRST }}</span>\r\n                </el-tooltip>\r\n              </template>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, defineProps, defineEmits, onMounted, watch } from 'vue';\r\n  import InputText from 'primevue/inputtext';\r\n  import ReferenceDataService from '@/service/ReferenceDataService.js'\r\n  import { ElMessageBox } from 'element-plus';\r\n  import { useAuthStore } from '@/stores/auth.js';\r\n  const authStore = useAuthStore();\r\n\r\n  const emit = defineEmits(['row-selected']);\r\n  const props = defineProps({\r\n    editMode: { type: Boolean, default: false },\r\n    sysMode: { type: Boolean, default: false }\r\n  });\r\n  \r\n\r\n  const search = ref('');\r\n  const selectedUserId = ref(null);\r\n  const users = ref([]);\r\n  const tabsWrapper = ref(null);\r\n  const previousUserId = ref(null); //  ID\r\n  \r\n  const filteredUsers = computed(() => {\r\n    return users.value.filter(user =>\r\n      !search.value || user.namE_FIRST.toLowerCase().includes(search.value.toLowerCase())\r\n    );\r\n  });\r\n  \r\n  //  tab \r\n  function onTabClick(tab) {\r\n    const user = users.value.find(u => u.emploY_ID === tab.props.name);\r\n    if (user) {\r\n      // \r\n      if (props.editMode && previousUserId.value !== user.emploY_ID) {\r\n        ElMessageBox.confirm(\r\n          '',\r\n          '',\r\n          {\r\n            confirmButtonText: '',\r\n            cancelButtonText: '',\r\n            type: 'warning'\r\n          }\r\n        )\r\n          .then(() => {\r\n            // \r\n            previousUserId.value = user.emploY_ID; //  ID\r\n            selectedUserId.value = user.emploY_ID;\r\n            const now = new Date();\r\n            const year = now.getFullYear();\r\n            let month = now.getMonth() ; // getMonth  0-11 1\r\n            month = month < 10 ? '0' + month : month;\r\n            const date = `${year}-${month}`;\r\n            emit('row-selected', user, date);\r\n          })\r\n          .catch(() => {\r\n            // \r\n            selectedUserId.value = previousUserId.value; // \r\n          });\r\n      } else {\r\n        // \r\n        previousUserId.value = user.emploY_ID;\r\n        selectedUserId.value = user.emploY_ID;\r\n        const now = new Date();\r\n        const year = now.getFullYear();\r\n        let month = now.getMonth() ;\r\n        month = month < 10 ? '0' + month : month;\r\n        const date = `${year}-${month}`;\r\n        emit('row-selected', user, date);\r\n      }\r\n    }\r\n  }\r\n  \r\n  onMounted(async () => {\r\n  try {\r\n    const response = await ReferenceDataService.getEmployeeData();\r\n    // console.log(response.data);\r\n\r\n    // 1.  Activeid  mis/vincent\r\n    const baseList = response.data.filter(u =>\r\n      u.emp_status !== 'Inactive' &&\r\n      // u.id !== 'mis' &&   // \"mis\"\r\n      u.id !== 'vincent'\r\n    );\r\n\r\n    // 2.  areaInfo.area \r\n    const userAreaId = authStore.user.areaInfo.id || '';\r\n    const isReservedAR03 = userAreaId.startsWith('AR03');\r\n\r\n    // \r\n    if (authStore.user.roles.includes('RO0000')) {\r\n      const mappedAll = baseList.map(({ id, name }) => ({\r\n        emploY_ID: id,\r\n        namE_FIRST: name\r\n      }));\r\n      users.value = mappedAll.sort((a, b) => {\r\n        const group = id => id.startsWith('TW') ? 1\r\n                          : id.startsWith('OP') ? 2\r\n                          : 3;\r\n        const ga = group(a.emploY_ID), gb = group(b.emploY_ID);\r\n        if (ga !== gb) return ga - gb;\r\n        return a.emploY_ID.localeCompare(b.emploY_ID);\r\n      });\r\n      return; //  onMounted\r\n    }\r\n\r\n    // 3. \r\n    const areaFiltered = baseList.filter(u => {\r\n      const areaId = u.area_id || '';\r\n      return isReservedAR03\r\n        ? areaId.startsWith('AR03')\r\n        : !areaId.startsWith('AR03');\r\n    });\r\n\r\n    // 4. \r\n    const mapped = areaFiltered.map(({ id, name }) => ({\r\n      emploY_ID: id,\r\n      namE_FIRST: name\r\n    }));\r\n\r\n    // 5. TWOP ID \r\n    users.value = mapped.sort((a, b) => {\r\n      const group = id => id.startsWith('TW') ? 1\r\n                        : id.startsWith('OP') ? 2\r\n                        : 3;\r\n      const ga = group(a.emploY_ID), gb = group(b.emploY_ID);\r\n      if (ga !== gb) return ga - gb;\r\n      return a.emploY_ID.localeCompare(b.emploY_ID);\r\n    });\r\n\r\n    console.log(' users:', users.value);\r\n  } catch (error) {\r\n    console.error('Horizontal-User-List-Block ', error);\r\n  }\r\n});\r\n  \r\n  //  selectedUserId previousUserId\r\n  watch(selectedUserId, (newVal) => {\r\n    if (previousUserId.value === null) {\r\n      previousUserId.value = newVal; // \r\n    }\r\n  });\r\n  </script>\r\n<style>\r\n  \r\n.el-tabs__nav-next{\r\n  padding-bottom: 0.5rem !important;\r\n  padding-left:2rem;\r\n  font-size: 2rem !important;\r\n  width: 50px !important;\r\n  height: 50px !important;\r\n  line-height: 50px !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n  cursor: pointer !important;\r\n}\r\n.el-tabs__nav-prev {\r\n  padding-right:2rem;\r\n  padding-bottom: 0.5rem !important;\r\n  font-size: 2rem !important;\r\n  width: 50px !important;\r\n  height: 50px !important;\r\n  line-height: 50px !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n  cursor: pointer !important;\r\n}\r\n.el-tabs__nav{\r\n  background-color:rgb(255, 255, 255) !important;\r\n}\r\n.el-tabs__item {\r\n  white-space: nowrap;\r\n  overflow: visible;\r\n  text-overflow: clip;\r\n  padding: 0 10px;\r\n}\r\n\r\n/*  sysMode  true  el-tabs  */\r\n.sys-mode-tabs .el-tabs__item {\r\n  font-size: 1.2rem;\r\n  color: black !important;\r\n}\r\n\r\n.sys-mode-tabs .el-tabs__item.is-active {\r\n  font-size: 1.2rem;\r\n  color: black !important;\r\n}\r\n</style>","import script from \"./Horizontal-User-List-Block.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Horizontal-User-List-Block.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Horizontal-User-List-Block.vue?vue&type=style&index=0&id=16ce4e32&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <Dialog v-model:visible=\"showReportDialog\" header=\"\" :style=\"{ width: '28rem', height: '18rem' }\">\r\n    <div class=\"report-buttons-container btn-report-dialog\">\r\n      <div class=\"btn-3\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#4a57e3\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_Internal_Attendance_Monthly\"\r\n            @click=\"download_Internal_Attendance_Monthly\"\r\n            class=\"report-button\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n            ()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-4\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#4a57e3\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_External_Attendance_Monthly\"\r\n            @click=\"download_External_Attendance_Monthly\"\r\n            class=\"report-button\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n            ()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-5\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#8a93f3\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_Company_Salary_Monthly\"\r\n            @click=\"download_Company_Salary_Monthly\"\r\n            class=\"report-button\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n            ()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-6\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#8a93f3\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_Employee_Salary_Monthly\"\r\n            @click=\"download_Employee_Salary_Monthly\"\r\n            class=\"report-button\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n            ()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-7\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#1bbf75\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_OP_Internal_Attendance_Monthly\"\r\n            @click=\"download_OP_Internal_Attendance_Monthly\"\r\n            class=\"report-button-op\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n            (OP)()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-8\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#1bbf75\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_External_Attendance_MonthlyOP\"\r\n            @click=\"download_External_Attendance_MonthlyOP\"\r\n            class=\"report-button-op\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n          (OP)()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-9\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#70e1b9\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_Company_Salary_MonthlyOP\"\r\n            @click=\"download_Company_Salary_MonthlyOP\"\r\n            class=\"report-button-op\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n          (OP)()\r\n          </el-button>\r\n      </div>\r\n      <div class=\"btn-10\">\r\n          <el-button\r\n            :disabled=\"selectedUser === null\"\r\n            color=\"#70e1b9\"\r\n            loading-icon=\"Eleme\"\r\n            :loading=\"Loading_download_Employee_Salary_MonthlyOP\"\r\n            @click=\"download_Employee_Salary_MonthlyOP\"\r\n            class=\"report-button-op\"\r\n            style=\"width: 11rem;\"\r\n          >\r\n          (OP)()\r\n          </el-button>\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, watch, defineEmits } from 'vue';\r\nimport Dialog from 'primevue/dialog';\r\nimport { ElButton, ElMessage } from 'element-plus';\r\nimport FinanceService from '../../../service/FinanceService.js';\r\nimport { useUserStore } from '../../../stores/user.js';\r\n\r\nconst props = defineProps({\r\n  showReportDialog: Boolean,\r\n  selectedUser: Object,\r\n  attendanceDate: String,\r\n});\r\n\r\nconst emit = defineEmits(['update:showReportDialog']);\r\n\r\nconst showReportDialog = ref(props.showReportDialog);\r\n\r\nwatch(() => props.showReportDialog, (newVal) => {\r\n  showReportDialog.value = newVal;\r\n});\r\n\r\nwatch(showReportDialog, (newVal) => {\r\n  emit('update:showReportDialog', newVal);\r\n});\r\n\r\nconst userStore = useUserStore();\r\n\r\nconst Loading_download_Internal_Attendance_Monthly = ref(false);\r\nconst Loading_download_External_Attendance_Monthly = ref(false);\r\nconst Loading_download_Company_Salary_Monthly = ref(false);\r\nconst Loading_download_Employee_Salary_Monthly = ref(false);\r\nconst Loading_download_OP_Internal_Attendance_Monthly = ref(false);\r\nconst Loading_download_External_Attendance_MonthlyOP = ref(false);\r\nconst Loading_download_Company_Salary_MonthlyOP = ref(false);\r\nconst Loading_download_Employee_Salary_MonthlyOP = ref(false);\r\n\r\nconst download_Internal_Attendance_Monthly = async () => {\r\n  try {\r\n    Loading_download_Internal_Attendance_Monthly.value = true;\r\n    const response = await FinanceService.downloadInternalAttendanceMonthly(props.attendanceDate, userStore.userId, { responseType: 'blob' });\r\n    if (response) {\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_DAE_Attendance(Internal).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', fileName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_Internal_Attendance_Monthly.value = false;\r\n  }\r\n};\r\n\r\nconst download_External_Attendance_Monthly = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_External_Attendance_Monthly.value = true;\r\n      const response = await FinanceService.downloadExternalAttendanceMonthly(props.attendanceDate, props.selectedUser.emploY_ID);\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_DAE_Attendance(External).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_External_Attendance_Monthly.value = false;\r\n  }\r\n};\r\n\r\nconst download_Company_Salary_Monthly = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_Company_Salary_Monthly.value = true;\r\n      const response = await FinanceService.downloadCompanySalaryMonthly(props.attendanceDate, props.selectedUser.emploY_ID);\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_DAE_Salary(Company).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_Company_Salary_Monthly.value = false;\r\n  }\r\n};\r\n\r\nconst download_Employee_Salary_Monthly = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_Employee_Salary_Monthly.value = true;\r\n      const response = await FinanceService.downloadEmployeeSalaryMonthly(props.attendanceDate, props.selectedUser.emploY_ID);\r\n      if (response.data === '') {\r\n        ElMessage.warn('');\r\n        return;\r\n      }\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_DAE_Salary(Employee).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_Employee_Salary_Monthly.value = false;\r\n  }\r\n};\r\n\r\nconst download_OP_Internal_Attendance_Monthly = async () => {\r\n  try {\r\n    Loading_download_OP_Internal_Attendance_Monthly.value = true;\r\n    const response = await FinanceService.downloadInternalAttendanceMonthlyOP(props.attendanceDate, { responseType: 'blob' });\r\n    if (response) {\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_OP_Attendance(Internal).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', fileName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_OP_Internal_Attendance_Monthly.value = false;\r\n  }\r\n};\r\n\r\nconst download_External_Attendance_MonthlyOP = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_External_Attendance_MonthlyOP.value = true;\r\n      const response = await FinanceService.downloadExternalAttendanceMonthlyOP(props.attendanceDate);\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_OP_Attendance(External).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_External_Attendance_MonthlyOP.value = false;\r\n  }\r\n};\r\n\r\nconst download_Company_Salary_MonthlyOP = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_Company_Salary_MonthlyOP.value = true;\r\n      const response = await FinanceService.downloadCompanySalaryMonthlyOP(props.attendanceDate);\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_OP_Salary(Company).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_Company_Salary_MonthlyOP.value = false;\r\n  }\r\n};\r\n\r\nconst download_Employee_Salary_MonthlyOP = async () => {\r\n  try {\r\n    if (props.attendanceDate) {\r\n      Loading_download_Employee_Salary_MonthlyOP.value = true;\r\n      const response = await FinanceService.downloadEmployeeSalaryMonthlyOP(props.attendanceDate);\r\n      if (response.data === '') {\r\n        ElMessage.warn('');\r\n        return;\r\n      }\r\n      const contentDisposition = response.headers[\"content-disposition\"];\r\n      let fileName = `${props.attendanceDate}_OP_Salary(Employee).xlsx`;\r\n      if (contentDisposition) {\r\n        const matches = contentDisposition.match(/filename\\*?=UTF-8''(.+)/i);\r\n        if (matches && matches[1]) {\r\n          fileName = decodeURIComponent(matches[1]);\r\n        } else {\r\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/i);\r\n          if (filenameMatch && filenameMatch[1]) {\r\n            fileName = filenameMatch[1];\r\n          }\r\n        }\r\n      }\r\n      const blob = new Blob([response.data], { type: response.headers[\"content-type\"] });\r\n      const link = document.createElement(\"a\");\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n      document.body.removeChild(link);\r\n    } else {\r\n      ElMessage.warn(\"\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    Loading_download_Employee_Salary_MonthlyOP.value = false;\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.btn-report-dialog {\r\n  grid-column-start: 2; /*  */\r\n  grid-row-start: 1;\r\n}\r\n\r\n.report-buttons-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, auto); /*  */\r\n  gap: 10px; /*  */\r\n  padding: 10px;\r\n}\r\n\r\n.btn-group {\r\n  display: grid;\r\n  grid-template-columns: repeat(6, auto); /*  */\r\n  gap: 4px; /*  */\r\n  justify-content: center; /*  */\r\n\r\n}\r\n\r\n.btn-2 {\r\n  grid-column-start: 1;\r\n    grid-row-start: 2;\r\n}\r\n\r\n</style>","import script from \"./ReportFunctionsDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportFunctionsDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ReportFunctionsDialog.vue?vue&type=style&index=0&id=fa51cfee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fa51cfee\"]])\n\nexport default __exports__","  <template>\r\n\r\n      \r\n      <div class=\"parent\"   style=\"margin-left:5rem; margin-top:6rem;\">\r\n        <div class=\"div1\">\r\n          <H_UserListBlock :editMode=\"editMode\" @row-selected=\"handleUserSelected\"/>\r\n        </div>\r\n        <div class=\"comlumn\" >\r\n          <div class=\"row-block\">\r\n            <div class=\"div2\">\r\n                  <AttendanceRecord :editMode=\"editMode\" @lateTotal=\"handleLateTotal\" @attendanceDate=\"handleAttendanceDate\" :selectedUser=\"selectedUser\"></AttendanceRecord>\r\n            </div>\r\n            <div  class=\"div3\">\r\n                <div style=\"margin-right:-1rem; margin-top:1.5rem;\" class=\"btn-group\"> \r\n                  <div class=\"btn-0\">\r\n                    <el-button v-if=\"editMode===false\" :disabled=\"!selectedUser\" type=\"primary\" @click=\"toggleEdit\">\r\n                      {{ \"\" }}\r\n                    </el-button>\r\n                    <el-button v-else  type=\"success\" @click=\"submitSalarySlip\">\r\n                      {{ \"\" }}\r\n                    </el-button>\r\n                    <el-button type=\"warning\" @click=\"decryptAllSalarySlips\" :loading=\"decryptLoading\" v-if=\"false\">\r\n                      {{ \"\" }}\r\n                    </el-button>\r\n                    <!--  -->\r\n                    <el-button \r\n                      type=\"info\" \r\n                      @click=\"refreshCurrentData\"\r\n                      :loading=\"loading\"\r\n                      :disabled=\"!selectedUser\"\r\n                      style=\"margin-left: 10px;\"\r\n                    >\r\n                      \r\n                    </el-button>\r\n                    <el-button  v-if=\"editMode===true\" :disabled=\"!selectedUser && !editMode\" type=\"info\" plain @click=\"cancelEdit\">\r\n                      {{ \"\" }}\r\n                    </el-button>\r\n                    <el-button :disabled=\"!selectedUser || !editMode\" type=\"success\" @click=\"substituteStructureForIntoSalary\">\r\n                      {{ \"\" }}\r\n                    </el-button>\r\n                    <el-button :disabled=\"!selectedUser\" type=\"success\" @click=\"showPersonalLeaveDialog = true\">\r\n                      {{ \"       \" }}\r\n                    </el-button>\r\n                \r\n                  </div>\r\n            \r\n                  <div class=\"btn-report-dialog\">\r\n                    <el-button type=\"primary\" @click=\"showReportDialog = true\">\r\n                      \r\n                    </el-button>\r\n                    <el-button \r\n                      type=\"primary\" \r\n                      @click=\"showTyphoonLeaveDialog = true\"\r\n                      :disabled=\"!selectedUser\"\r\n                      style=\"background-color: #5CADAD; border-color: #5CADAD; margin-left: 8px;\"\r\n                    >\r\n                      \r\n                    </el-button>\r\n                  </div>\r\n                  <ReportFunctionsDialog\r\n                    v-model:showReportDialog=\"showReportDialog\"\r\n                    :selectedUser=\"selectedUser\"\r\n                    :attendanceDate=\"attendanceDate\"\r\n                  />\r\n\r\n                  <!--  Dialog -->\r\n                  <Dialog v-model:visible=\"showPersonalLeaveDialog\" :header=\"attendanceDate + ' '\" :style=\"{ width: '50rem' }\">\r\n                    <!--  -->\r\n                    <div v-if=\"personalLeaveRecords.length > 0\">\r\n                      <h4 style=\"margin-bottom: 10px;\"></h4>\r\n                      <el-table :data=\"personalLeaveRecords\" style=\"width: 100%; margin-bottom: 20px;\" border>\r\n                      <el-table-column prop=\"leaveChName\" label=\"\" width=\"120\"></el-table-column>\r\n                      <el-table-column label=\"\" width=\"80\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.hours }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"100\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.minutes }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"80\" v-if=\"false\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.amount }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"80\" v-if=\"false\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.count }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"140\" v-if=\"false\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.yearlyTotalMinutes }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"120\">\r\n                        <template #default=\"{ row }\">\r\n                          {{ row.yearlyTotalHours }} \r\n                        </template>\r\n                      </el-table-column>\r\n                      <el-table-column label=\"\" width=\"180\">\r\n                        <template #default=\"{ row }\">\r\n                          <div v-for=\"id in row.leaveRequestFormID\" :key=\"id\" @click=\"openDetail(id, 'LR')\" style=\"cursor: pointer; text-decoration: underline; color: blue;\">\r\n                            {{ id }}\r\n                          </div>\r\n                        </template>\r\n                      </el-table-column>\r\n                    </el-table>\r\n                    </div>\r\n                    \r\n                    <!--  -->\r\n                    <div v-if=\"personalOvertimeRecord && personalOvertimeRecord.count > 0\">\r\n                      <h4 style=\"margin-bottom: 10px;\"></h4>\r\n                      <el-table :data=\"[personalOvertimeRecord]\" style=\"width: 100%;\" border>\r\n                        <el-table-column label=\"\" width=\"100\">\r\n                          <template #default=\"{ row }\">\r\n                            {{ row.hours }} \r\n                          </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"\" width=\"120\">\r\n                          <template #default=\"{ row }\">\r\n                            {{ row.minutes }} \r\n                          </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"\" width=\"100\">\r\n                          <template #default=\"{ row }\">\r\n                            {{ row.mealAllowance }} \r\n                          </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"\" width=\"100\">\r\n                          <template #default=\"{ row }\">\r\n                            {{ row.count }} \r\n                          </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"\" width=\"120\">\r\n                          <template #default=\"{ row }\">\r\n                            {{ Math.floor(row.yearlyTotalMinutes / 60) }} \r\n                          </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"\" width=\"180\">\r\n                          <template #default=\"{ row }\">\r\n                            <div v-for=\"id in row.overtimeRequestFormID\" :key=\"id\" @click=\"openDetail(id, 'OR')\" style=\"cursor: pointer; text-decoration: underline; color: green;\">\r\n                              {{ id }}\r\n                            </div>\r\n                          </template>\r\n                        </el-table-column>\r\n                      </el-table>\r\n                    </div>\r\n                    \r\n                    <!--  -->\r\n                    <div v-if=\"personalLeaveRecords.length === 0 && (!personalOvertimeRecord || personalOvertimeRecord.count === 0)\" style=\"text-align: center; padding: 20px; color: #999;\">\r\n                      \r\n                    </div>\r\n                  </Dialog>\r\n\r\n                  <!--  -->\r\n                  <el-dialog\r\n                    v-model=\"showTyphoonLeaveDialog\"\r\n                    title=\"\"\r\n                    width=\"500px\"\r\n                    :before-close=\"handleTyphoonDialogClose\"\r\n                  >\r\n                    <el-form\r\n                      :model=\"typhoonLeaveForm\"\r\n                      :rules=\"typhoonLeaveRules\"\r\n                      ref=\"typhoonLeaveFormRef\"\r\n                      label-width=\"100px\"\r\n                    >\r\n                      <el-form-item label=\"\" prop=\"leaveDate\">\r\n                        <el-date-picker\r\n                          v-model=\"typhoonLeaveForm.leaveDate\"\r\n                          type=\"date\"\r\n                          placeholder=\"\"\r\n                          format=\"YYYY-MM-DD\"\r\n                          value-format=\"YYYY-MM-DD\"\r\n                          style=\"width: 100%;\"\r\n                        />\r\n                      </el-form-item>\r\n                      \r\n                      <el-form-item label=\"\">\r\n                        <el-radio-group v-model=\"typhoonLeaveForm.leaveType\">\r\n                          <el-radio label=\"fullDay\"></el-radio>\r\n                          <el-radio label=\"timeRange\"></el-radio>\r\n                        </el-radio-group>\r\n                      </el-form-item>\r\n                      \r\n                      <template v-if=\"typhoonLeaveForm.leaveType === 'timeRange'\">\r\n                        <el-form-item label=\"\" prop=\"startTime\">\r\n                          <el-time-picker\r\n                            v-model=\"typhoonLeaveForm.startTime\"\r\n                            placeholder=\"\"\r\n                            format=\"HH:mm\"\r\n                            value-format=\"HH:mm:ss\"\r\n                            style=\"width: 100%;\"\r\n                          />\r\n                        </el-form-item>\r\n                        \r\n                        <el-form-item label=\"\" prop=\"endTime\">\r\n                          <el-time-picker\r\n                            v-model=\"typhoonLeaveForm.endTime\"\r\n                            placeholder=\"\"\r\n                            format=\"HH:mm\"\r\n                            value-format=\"HH:mm:ss\"\r\n                            style=\"width: 100%;\"\r\n                          />\r\n                        </el-form-item>\r\n                      </template>\r\n                    </el-form>\r\n                    \r\n                    <template #footer>\r\n                      <span class=\"dialog-footer\">\r\n                        <el-button @click=\"handleTyphoonDialogClose\"></el-button>\r\n                        <el-button \r\n                          type=\"primary\" \r\n                          @click=\"confirmTyphoonLeave\"\r\n                          :loading=\"typhoonLeaveSubmitting\"\r\n                          style=\"background-color: #5CADAD; border-color: #5CADAD;\"\r\n                        >\r\n                          \r\n                        </el-button>\r\n                      </span>\r\n                    </template>\r\n                  </el-dialog>\r\n\r\n                  <!-- Detail Dialog  -->\r\n                  <Detail_Related_WF_Dialog\r\n                    v-if=\"isDialogVisible\"\r\n                    v-model:visible=\"isDialogVisible\"\r\n                    :doc=\"selectedDoc\"\r\n                    buttonGroupPosition=\"dialog\"\r\n                    @refreshList=\"refreshList\"\r\n                  />\r\n\r\n                </div>\r\n                \r\n                <div class=\"salary-slip\" style=\"padding-left:0rem; margin-top:1.5rem;\" >\r\n                    <div>\r\n                      <SalaryInfo :salaryHeadInfoRef=\"salaryHeadInfoRef\" :editMode=\"editMode\" :selectedUser=\"selectedUser\" @update:salaryHeadInfoRef=\"handleSalaryHeadInfoUpdate\" />\r\n                    </div>\r\n                    <div class=\"big-parent\" >\r\n                      <div class=\"left-parent\">\r\n                        <!--  totalAData  Block_A -->\r\n                        <Block_A :data=\"blockAData\"\r\n                                @updateSalaryATotal=\"handleUpdateSalaryATotal\"\r\n                                @updateBlockAAggregate=\"handleUpdateBlockAAggregate\" />\r\n                        <Block_B  :editMode=\"editMode\" :data=\"blockBData\" :totalA=\"totalAValue\" :totalD=\"totalDValue\" @updateSalaryB_Aggregate=\"handleUpdateSalaryB\"/>\r\n                      </div>\r\n                      <div class=\"right-parent\">\r\n                        <Block_C  style=\"margin-left: -0.1px;margin-top: 0.1px;\" :lateTotal=\"lateTotal\" :editMode=\"editMode\" :data=\"blockDData\" :totalA=\"totalAValue\" @updateDeductionD=\"updateDeductionD\" @updateSalaryDAggregate=\"handleUpdateSalaryDAggregate\" />\r\n                        <Block_AnnualLeave  style=\"margin-left: 0.2px;\"  :editMode=\"editMode\" :data=\"blockAnnualLeaveData\" @updateAnnualLeaveData=\"updateAnnualLeaveData\"></Block_AnnualLeave>\r\n                      </div>\r\n                    </div>\r\n                    <div style=\"margin-top:1px;\">\r\n                      <Block_InsuranceCompany  :insuranceCompany=\"insuranceCompany\" :editMode=\"editMode\" @updateInsuranceValues=\"handleUpdateInsuranceValues\" ></Block_InsuranceCompany>\r\n                    </div>\r\n                </div>\r\n              \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref,nextTick,watch,onUnmounted  } from 'vue'\r\n  import salaryDataManager from '@/utils/SalaryDataManager.js'\r\n  import Dialog from 'primevue/dialog';\r\n  import Block_A from './block/Block_A.vue'\r\n  import Block_B from './block/Block_B.vue'\r\n  import Block_C from './block/Block_C.vue'\r\n  import Block_AnnualLeave from './block/Block_AnnualLeave.vue'\r\n  import Block_InsuranceCompany from './block/Block_InsuranceCompany.vue'\r\n  import SalaryInfo from './SalaryInfo.vue'\r\n  import H_UserListBlock from '../Horizontal-User-List-Block.vue'\r\n  import AttendanceRecord from '../AttendanceRecord.vue'\r\n  import FinanceService from '../../../service/FinanceService.js'\r\n  import { useUserStore } from '../../../stores/user.js';\r\n  import { useToast } from 'primevue/usetoast';\r\n  import { ElLoading, ElMessage, ElMessageBox } from 'element-plus'\r\n  import  { initialBlockCTable } from './initBlockCTable'\r\n  import Detail_Related_WF_Dialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\n  import ReportFunctionsDialog from './ReportFunctionsDialog'\r\n  \r\n  \r\n  const toast = useToast();\r\n  const userStore = useUserStore();\r\n  const selectedUser = ref(null)\r\n  const editMode = ref(false)\r\n  const loading = ref(false)\r\n  // \r\n  const blockAData = ref({})\r\n  const blockBData = ref({})\r\n  const blockDData = ref({})\r\n  const blockAnnualLeaveData = ref({})\r\n  const AnnualLeaveData =ref()\r\n  const totalAValue = ref(0)\r\n  const totalDValue = ref(0)\r\n  const A_aggregate=ref()\r\n  const B_aggregate=ref()\r\n  const D_aggregate=ref()\r\n  const publicContribution=ref();\r\n  const attendanceDate =ref ('');\r\n  const lateTotal =ref('');\r\n  const showReportDialog = ref(false); //   Dialog \r\n  const showPersonalLeaveDialog = ref(false); //   Dialog \r\n  const personalLeaveRecords = ref([]); // \r\n  const personalOvertimeRecord = ref({}); // \r\n  const selectedDoc = ref(null) //  Detail_Related_WF_Dialog \r\n  const isDialogVisible = ref(false) //  Detail_Related_WF_Dialog \r\n  \r\n  // \r\n  const backupData = ref({\r\n    blockAData: null,\r\n    blockBData: null,\r\n    blockDData: null,\r\n    blockAnnualLeaveData: null,\r\n    salaryHeadInfoRef: null,\r\n    totalAValue: 0,\r\n    totalDValue: 0,\r\n    A_aggregate: null,\r\n    B_aggregate: null,\r\n    D_aggregate: null,\r\n    AnnualLeaveData: null,\r\n    publicContribution: null,\r\n    insuranceCompany: null\r\n  })\r\n  \r\n  // \r\n  const showTyphoonLeaveDialog = ref(false); //  Dialog \r\n  const typhoonLeaveSubmitting = ref(false); // \r\n  const typhoonLeaveFormRef = ref(null); // \r\n  const decryptLoading = ref(false); // \r\n  \r\n  // \r\n  const typhoonLeaveForm = ref({\r\n    leaveDate: new Date().toISOString().split('T')[0], // \r\n    leaveType: 'fullDay', // \r\n    startTime: '09:00:00',\r\n    endTime: '18:00:00'\r\n  });\r\n  \r\n  // \r\n  const typhoonLeaveRules = {\r\n    leaveDate: [\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    startTime: [\r\n      { \r\n        required: true, \r\n        message: '', \r\n        trigger: 'change',\r\n        validator: (rule, value, callback) => {\r\n          if (typhoonLeaveForm.value.leaveType === 'timeRange' && !value) {\r\n            callback(new Error(''));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    endTime: [\r\n      { \r\n        required: true, \r\n        message: '', \r\n        trigger: 'change',\r\n        validator: (rule, value, callback) => {\r\n          if (typhoonLeaveForm.value.leaveType === 'timeRange' && !value) {\r\n            callback(new Error(''));\r\n          } else if (typhoonLeaveForm.value.leaveType === 'timeRange' && \r\n                    typhoonLeaveForm.value.startTime && \r\n                    value <= typhoonLeaveForm.value.startTime) {\r\n            callback(new Error(''));\r\n          } else {\r\n            callback();\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  };\r\n  const toggleEdit = async () => {\r\n    // \r\n    backupAllData();\r\n    editMode.value = true;\r\n  }\r\n  \r\n  // \r\n  const backupAllData = () => {\r\n    backupData.value = {\r\n      blockAData: JSON.parse(JSON.stringify(blockAData.value || {})),\r\n      blockBData: JSON.parse(JSON.stringify(blockBData.value || {})),\r\n      blockDData: JSON.parse(JSON.stringify(blockDData.value || {})),\r\n      blockAnnualLeaveData: JSON.parse(JSON.stringify(blockAnnualLeaveData.value || {})),\r\n      salaryHeadInfoRef: JSON.parse(JSON.stringify(salaryHeadInfoRef.value || {})),\r\n      totalAValue: totalAValue.value,\r\n      totalDValue: totalDValue.value,\r\n      A_aggregate: JSON.parse(JSON.stringify(A_aggregate.value || {})),\r\n      B_aggregate: JSON.parse(JSON.stringify(B_aggregate.value || {})),\r\n      D_aggregate: JSON.parse(JSON.stringify(D_aggregate.value || {})),\r\n      AnnualLeaveData: JSON.parse(JSON.stringify(AnnualLeaveData.value || {})),\r\n      publicContribution: JSON.parse(JSON.stringify(publicContribution.value || {})),\r\n      insuranceCompany: JSON.parse(JSON.stringify(insuranceCompany.value || {}))\r\n    };\r\n    // console.log('');\r\n  }\r\n  \r\n  // \r\n  const restoreAllData = () => {\r\n    if (backupData.value) {\r\n      blockAData.value = JSON.parse(JSON.stringify(backupData.value.blockAData || {}));\r\n      blockBData.value = JSON.parse(JSON.stringify(backupData.value.blockBData || {}));\r\n      blockDData.value = JSON.parse(JSON.stringify(backupData.value.blockDData || {}));\r\n      blockAnnualLeaveData.value = JSON.parse(JSON.stringify(backupData.value.blockAnnualLeaveData || {}));\r\n      salaryHeadInfoRef.value = JSON.parse(JSON.stringify(backupData.value.salaryHeadInfoRef || {}));\r\n      totalAValue.value = backupData.value.totalAValue;\r\n      totalDValue.value = backupData.value.totalDValue;\r\n      A_aggregate.value = JSON.parse(JSON.stringify(backupData.value.A_aggregate || {}));\r\n      B_aggregate.value = JSON.parse(JSON.stringify(backupData.value.B_aggregate || {}));\r\n      D_aggregate.value = JSON.parse(JSON.stringify(backupData.value.D_aggregate || {}));\r\n      AnnualLeaveData.value = JSON.parse(JSON.stringify(backupData.value.AnnualLeaveData || {}));\r\n      publicContribution.value = JSON.parse(JSON.stringify(backupData.value.publicContribution || {}));\r\n      insuranceCompany.value = JSON.parse(JSON.stringify(backupData.value.insuranceCompany || {}));\r\n      // console.log('');\r\n    }\r\n  }\r\n\r\n  \r\n  const submitSalarySlip = async () => {\r\n    editMode.value = false;\r\n    await nextTick();\r\n    await postSalarySlip();\r\n  }\r\n\r\n  const cancelEdit = async() =>{\r\n    // \r\n    restoreAllData();\r\n    editMode.value = false;\r\n  }\r\n\r\n\r\n\r\n\r\n  const substituteStructureForIntoSalary= async () =>{\r\n    // console.log(\"selectedUser:\", selectedUser.value.emploY_ID);\r\n    try{\r\n      const res = await FinanceService.getSalaryStructureWithEmpId(selectedUser.value.emploY_ID);\r\n      // console.log(\"getSalaryStructureWithEmpId API :\", res.data);\r\n      let responseData = res.data\r\n      if (responseData === 'no data') {\r\n        // console.log(\"\");\r\n        insuranceCompany.value = {};\r\n        salaryStructure.value = {};\r\n        salaryHeadInfoRef.value = {};\r\n        // console.log(\"\");\r\n        return;\r\n      } else if (res && responseData) {\r\n        console.log(\" API :\", responseData);\r\n        console.log(\"responseData.salaryHeadInfo :\", !!responseData.salaryHeadInfo);\r\n        console.log(\"responseData.salaryHeadInfo :\", responseData.salaryHeadInfo);\r\n\r\n            //  salaryHeadInfo\r\n            // console.log(\" salaryHeadInfo:\", responseData.salaryHeadInfo);\r\n            let headInfo = {};\r\n            try {\r\n              //  reactive \r\n              headInfo = JSON.parse(responseData.salaryHeadInfo);\r\n              salaryHeadInfoRef.value = headInfo;\r\n              console.log(' substituteStructureForIntoSalary  headInfo:', headInfo);\r\n              console.log(' salaryHeadInfoRef.value :', salaryHeadInfoRef.value);\r\n              // console.log(\" salaryHeadInfo:\", headInfo);\r\n            } catch (e) {\r\n              console.error(\" salaryHeadInfo \", e);\r\n              console.error(\" salaryHeadInfo :\", responseData.salaryHeadInfo);\r\n              headInfo = {};\r\n              salaryHeadInfoRef.value = {};\r\n            }\r\n            // \r\n            // salaryHeadInfoRef.value = headInfo; // \r\n            // console.log(\" salaryHeadInfoRef:\", salaryHeadInfoRef.value);\r\n            \r\n            //  structure\r\n            // console.log(\" structure:\", responseData.structure);\r\n            let structureArr = [];\r\n            try {\r\n              structureArr = JSON.parse(responseData.structure);\r\n              // console.log(\" structure :\", structureArr);\r\n            } catch (e) {\r\n              console.error(\" structure \", e);\r\n              structureArr = [];\r\n            }\r\n\r\n            //  id  public insurance \r\n            const companyIds = [\"pensionCompany\", \"laborCompany\", \"healthCompany\"];\r\n            const publicInsurance = {};\r\n            const salaryStructureData = {};\r\n\r\n            structureArr.forEach(item => {\r\n              if (companyIds.includes(item.id)) {\r\n                // \r\n                publicInsurance[item.id] = item;\r\n              } else {\r\n                salaryStructureData[item.id] = item;\r\n              }\r\n            });\r\n\r\n            //  ref\r\n            insuranceCompany.value = publicInsurance;\r\n            salaryStructure.value = salaryStructureData;\r\n            // console.log(\" insuranceCompany:\", insuranceCompany.value);\r\n            // console.log(\" salaryStructure:\", salaryStructure.value);\r\n\r\n                // ---  blockAData  ---\r\n                if (!blockAData.value || !Array.isArray(blockAData.value.items)) {\r\n                  blockAData.value = {\r\n                    total_A: 0,\r\n                    items: [\r\n                      { id: \"basicSalary\", ch_name: \"\", time: \"\", amount: \"0\" },\r\n                      { id: \"rankAllowance\", ch_name: \"\", time: \"\", amount: \"0\" },\r\n                      { id: \"positionAllowance\", ch_name: \"\", time: \"\", amount: \"0\" },\r\n                      { id: \"mealAllowance\", ch_name: \"\", time: \"\", amount: \"0\" },\r\n                      { id: \"hourlyWagePartTime\", ch_name: \"()\", time: \"\", amount: \"0\" }\r\n                    ]\r\n                  };\r\n                }\r\n              \r\n              blockAData.value.items.forEach(blockItem => {\r\n                const matchingItem = structureArr.find(item => item.id === blockItem.id);\r\n                if (matchingItem) {\r\n                  blockItem.amount = matchingItem.content;\r\n                }\r\n              });\r\n              // ---  blockAData  ---\r\n\r\n              // ---  blockDData  ---\r\n              //  blockDData \r\n              if (!blockDData.value ||  !Array.isArray(blockDData.value.items)) {\r\n                blockDData.value = {\r\n                  total_D: 0,\r\n                  items: JSON.parse(JSON.stringify(initialBlockCTable))\r\n                };\r\n              }\r\n              \r\n              //  blockDData  id  structureArr  id\r\n              //  \r\n              // \"laborInsurance\"  \"laborPersonal\"\r\n              // \"healthInsurance\"  \"healthPersonal\"\r\n              // \"healthFamily\"  \"healthFamily\" ()\r\n              const mapping = {\r\n                \"laborInsurance\": \"laborPersonal\",\r\n                \"healthInsurance\": \"healthPersonal\",\r\n                \"healthFamily\": \"healthFamily\"\r\n              };\r\n              \r\n              //  blockDData  amount \r\n              blockDData.value.items.forEach(row => {\r\n                if (mapping[row.id]) {\r\n                  const matchingItem = structureArr.find(item => item.id === mapping[row.id]);\r\n                  if (matchingItem) {\r\n                    row.amount = matchingItem.content;\r\n                  } else {\r\n                    row.amount = \"\";\r\n                  }\r\n                }\r\n              });\r\n              blockDData.value.items = [...blockDData.value.items];\r\n              // ---  blockDData  ---\r\n              // console.log(\"blockDData :\", blockDData.value);\r\n            \r\n            // console.log(\"\");\r\n            alert(\"\");\r\n            return 'success';\r\n        }\r\n      }\r\n      catch(error) {\r\n          console.error(\":\", error);\r\n          alert(\": \" + error.message);\r\n          return 'error';\r\n      }\r\n  }\r\n\r\n\r\n  const handleUserSelected = async (user,date) => {\r\n    \r\n      const loadingInstance = ElLoading.service({\r\n        lock: true,\r\n        text: '...',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      })\r\n\r\n      if(!date){\r\n        //(yyyy-MM)\r\n        const now = new Date();\r\n        now.setMonth(now.getMonth());\r\n        const year = now.getFullYear();\r\n        let monthNumber = now.getMonth() + 1;\r\n        monthNumber = monthNumber < 10 ? '0' + monthNumber : monthNumber;\r\n        date = `${year}-${monthNumber}`\r\n      }\r\n\r\n      editMode.value = false\r\n      \r\n      //  salaryHeadInfo\r\n      const initialHeadInfo = {\r\n        empName: user.name || '',\r\n        empDpt: user.dpt_name || '',\r\n        empTitleGrade: user.title_grade || '',\r\n        insuranceLevel: '',\r\n        empTitleName: user.title_name || '',\r\n        empTitleLevel: user.title_level || ''\r\n      }\r\n      \r\n      // \r\n      if (!salaryHeadInfoRef.value || salaryHeadInfoRef.value.empName !== user.name) {\r\n        salaryHeadInfoRef.value = initialHeadInfo\r\n      }\r\n      \r\n      //  API  salaryHeadInfo\r\n      await loadSalaryData(user.emploY_ID,date)\r\n\r\n      selectedUser.value = user\r\n      loadingInstance.close()\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n *  handleSalarySlipWithEid_Date  API \r\n */\r\nconst loadSalaryData = async (empId, date, forceRefresh = false) => {\r\n  if (!empId || !date) {\r\n    // console.warn(' ID');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    loading.value = true;\r\n    // console.log(` : ${empId} - ${date}`);\r\n    \r\n    // \r\n    if (forceRefresh) {\r\n      clearSalaryData();\r\n      // console.log(' ');\r\n    }\r\n    \r\n    // \r\n    const salaryData = await salaryDataManager.getSalaryData(empId, date, forceRefresh);\r\n    \r\n    //  nextTick \r\n    await nextTick(() => {\r\n      //  Block \r\n      // console.log('  Block ');\r\n      console.log(' salaryData.blockD:', JSON.stringify(salaryData.blockD, null, 2));\r\n      \r\n      blockAData.value = salaryData.blockA;\r\n      blockBData.value = salaryData.blockB;\r\n      blockDData.value = salaryData.blockD;\r\n      blockAnnualLeaveData.value = salaryData.blockAnnualLeave;\r\n      \r\n      // \r\n      if (salaryData.insuranceCompany) {\r\n        insuranceCompany.value = salaryData.insuranceCompany;\r\n        console.log(' :', insuranceCompany.value);\r\n      }\r\n      \r\n      // console.log('  blockDData.value :', JSON.stringify(blockDData.value, null, 2));\r\n      \r\n      //  Block_D  amount  -1 \r\n      checkForCalculationErrors(blockDData.value);\r\n      \r\n      //  -  salaryHeadInfo\r\n      if (salaryData.salaryHeadInfo && Object.keys(salaryData.salaryHeadInfo).length > 0) {\r\n        // \r\n        const hasValidData = salaryData.salaryHeadInfo.empName || \r\n                            salaryData.salaryHeadInfo.empDpt || \r\n                            salaryData.salaryHeadInfo.empTitleName ||\r\n                            salaryData.salaryHeadInfo.insuranceLevel;\r\n        \r\n        if (hasValidData) {\r\n          // \r\n          salaryHeadInfoRef.value = {\r\n            empName: salaryData.salaryHeadInfo.empName || salaryHeadInfoRef.value.empName || '',\r\n            empDpt: salaryData.salaryHeadInfo.empDpt || salaryHeadInfoRef.value.empDpt || '',\r\n            empTitleGrade: salaryData.salaryHeadInfo.empTitleGrade || salaryHeadInfoRef.value.empTitleGrade || '',\r\n            empTitleName: salaryData.salaryHeadInfo.empTitleName || salaryHeadInfoRef.value.empTitleName || '',\r\n            empTitleLevel: salaryData.salaryHeadInfo.empTitleLevel || salaryHeadInfoRef.value.empTitleLevel || '',\r\n            insuranceLevel: salaryData.salaryHeadInfo.insuranceLevel || salaryHeadInfoRef.value.insuranceLevel || ''\r\n          };\r\n        }\r\n      }\r\n      personalLeaveRecords.value = salaryData.leaveRecords;\r\n      personalOvertimeRecord.value = salaryData.overtimeRecord;\r\n      \r\n      // console.log(' ');\r\n      // console.log(' Block:', {\r\n      //   blockA: blockAData.value,\r\n      //   blockB: blockBData.value,\r\n      //   blockD: blockDData.value,\r\n      //   blockAnnualLeave: blockAnnualLeaveData.value\r\n      // });\r\n    });\r\n\r\n    // \r\n    if (salaryData.isInitial) {\r\n      // console.log(' ');\r\n      await autoCalculateAllBlocks(empId, date);\r\n    } else {\r\n      // console.log(' ');\r\n      // \r\n      await autoFillTyphoonLeave(empId, date);\r\n      await autoFillLeaveRecords(); // \r\n    }\r\n\r\n  } catch (error) {\r\n    // console.error(' ', error);\r\n    // \r\n    clearSalaryData();\r\n    // \r\n    // ElMessage.error(`: ${error.message}`);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\n\r\n//  ref \r\nconst salaryHeadInfoRef = ref({});\r\nconst insuranceCompany = ref({});\r\nconst salaryStructure = ref({});\r\n\r\n//  Detail_Related_WF_Dialog\r\nconst openDetail = (documentID, documentType = 'LR') => {\r\n  selectedDoc.value = { documentID: documentID, documentTypeID: documentType }; // LR: , OR: \r\n  isDialogVisible.value = true;\r\n};\r\n\r\n//  (Detail_Related_WF_Dialog )\r\nconst refreshList = () => {\r\n  //  personalLeaveRecords \r\n  //  FinanceService.getLeaveRecord\r\n};\r\n\r\n// \r\nconst calculateWeekendOvertimeHours = async (empId, date) => {\r\n  try {\r\n    // \r\n    const [year, month] = date.split('-');\r\n    const startDate = `${year}-${month}-01`;\r\n    const lastDay = new Date(year, month, 0).getDate();\r\n    const endDate = `${year}-${month}-${lastDay.toString().padStart(2, '0')}`;\r\n    \r\n    const params = {\r\n      userId: empId,\r\n      page: 1,\r\n      pageSize: 1000,\r\n      startDate: startDate,\r\n      endDate: endDate\r\n    };\r\n    \r\n    const response = await FinanceService.getPersonalOvertimeRecords(params);\r\n    const overtimeRecords = response.data?.records || [];\r\n    \r\n    let totalWeekendHours = 0;\r\n    const weekendOvertimeRecords = [];\r\n    \r\n    //  ActualOvertimeDate \r\n    overtimeRecords.forEach(record => {\r\n      if (record.actualOvertimeDate) {\r\n        const actualDate = new Date(record.actualOvertimeDate);\r\n        const dayOfWeek = actualDate.getDay(); // 0=, 6=\r\n        \r\n        // \r\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\r\n          //  ActualOvertimeHours  ActualOvertimeMinutes \r\n          const actualHours = record.actualOvertimeHours || 0;\r\n          const actualMinutes = record.actualOvertimeMinutes || 0;\r\n          const totalHours = actualHours + (actualMinutes / 60);\r\n          \r\n          if (totalHours > 0) {\r\n            totalWeekendHours += totalHours;\r\n            weekendOvertimeRecords.push({\r\n              date: record.actualOvertimeDate,\r\n              actualHours: actualHours,\r\n              actualMinutes: actualMinutes,\r\n              totalHours: totalHours,\r\n              dayType: dayOfWeek === 0 ? '' : ''\r\n            });\r\n          }\r\n        }\r\n      }\r\n    });\r\n    \r\n    // console.log(':', weekendOvertimeRecords);\r\n    // console.log(':', totalWeekendHours);\r\n    \r\n    // \r\n    if (totalWeekendHours > 0) {\r\n      const overtimeCalculation = calculateOvertimePayment(totalWeekendHours);\r\n      // console.log(':', overtimeCalculation);\r\n      \r\n      //  Block_B \r\n      updateBlockBOvertimeHours(overtimeCalculation);\r\n    }\r\n    \r\n  } catch (error) {\r\n    // console.error(':', error);\r\n  }\r\n};\r\n\r\n// // \r\n// const calculateWorkHours = (clockIn, clockOut) => {\r\n//   if (!clockIn || !clockOut) return 0;\r\n  \r\n//   try {\r\n//     const [inHour, inMinute] = clockIn.split(':').map(Number);\r\n//     const [outHour, outMinute] = clockOut.split(':').map(Number);\r\n    \r\n//     const inTotalMinutes = inHour * 60 + inMinute;\r\n//     const outTotalMinutes = outHour * 60 + outMinute;\r\n    \r\n//     // \r\n//     let workMinutes = outTotalMinutes - inTotalMinutes;\r\n//     if (workMinutes < 0) {\r\n//       workMinutes += 24 * 60; // \r\n//     }\r\n    \r\n//     // 12:00-13:00\r\n//     const lunchStart = 12 * 60; // 12:00\r\n//     const lunchEnd = 13 * 60;   // 13:00\r\n    \r\n//     if (inTotalMinutes < lunchEnd && outTotalMinutes > lunchStart) {\r\n//       workMinutes -= 60; // 1\r\n//     }\r\n    \r\n//     return Math.max(0, workMinutes / 60); // \r\n//   } catch (error) {\r\n//     console.error(':', error);\r\n//     return 0;\r\n//   }\r\n// };\r\n\r\n// \r\nconst calculateOvertimePayment = (totalHours) => {\r\n  const result = {\r\n    hours_1_33: 0,  // 2 4/3\r\n    hours_1_67: 0,  // 3-8 5/3  \r\n    hours_2_67: 0   // 8 6/3(2)\r\n  };\r\n  \r\n  let remainingHours = totalHours;\r\n  \r\n  // 24/3\r\n  if (remainingHours > 0) {\r\n    result.hours_1_33 = Math.min(remainingHours, 2);\r\n    remainingHours -= result.hours_1_33;\r\n  }\r\n  \r\n  // 3-85/3\r\n  if (remainingHours > 0) {\r\n    result.hours_1_67 = Math.min(remainingHours, 6);\r\n    remainingHours -= result.hours_1_67;\r\n  }\r\n  \r\n  // 86/3(2)\r\n  if (remainingHours > 0) {\r\n    result.hours_2_67 = remainingHours;\r\n  }\r\n  \r\n  return result;\r\n};\r\n\r\n// \r\nconst autoCalculateAllBlocks = async (empId, date) => {\r\n  // console.log('...');\r\n  \r\n  try {\r\n    // 1. \r\n    await calculateWeekendOvertimeHours(empId, date);\r\n    \r\n    // 2. \r\n    await autoFillTyphoonLeave(empId, date);\r\n    \r\n    // 3. \r\n    await autoFillLeaveRecords();\r\n    \r\n    // console.log('');\r\n  } catch (error) {\r\n    // console.error(':', error);\r\n  }\r\n};\r\n\r\n// \r\nconst autoFillTyphoonLeave = async (empId, date) => {\r\n  try {\r\n    // console.log('=== autoFillTyphoonLeave  ===');\r\n    // console.log('empId:', empId, 'date:', date);\r\n    \r\n    // \r\n    const [year, month] = date.split('-');\r\n    const startDate = new Date(year, month - 1, 1);\r\n    const endDate = new Date(year, month, 0);\r\n    \r\n    // console.log(':', {\r\n    //   startDate: startDate.toISOString().split('T')[0],\r\n    //   endDate: endDate.toISOString().split('T')[0]\r\n    // });\r\n    \r\n    //  API \r\n    const typhoonLeaveResponse = await FinanceService.getTyphoonLeaveRecords({\r\n      startDate: startDate.toISOString().split('T')[0],\r\n      endDate: endDate.toISOString().split('T')[0]\r\n    });\r\n    \r\n    // console.log(' API :', typhoonLeaveResponse);\r\n    const typhoonLeaveRecords = typhoonLeaveResponse.data?.data || typhoonLeaveResponse.data || [];\r\n    // console.log(':', typhoonLeaveRecords);\r\n    \r\n    if (typhoonLeaveRecords.length > 0) {\r\n      // \r\n      const totalTyphoonHours = typhoonLeaveRecords.reduce((total, record) => {\r\n        const hours = record.Hours || record.hours || 0;\r\n        // console.log(`: ${hours}`);\r\n        return total + hours;\r\n      }, 0);\r\n      \r\n      // console.log(`: ${totalTyphoonHours}`);\r\n      \r\n      //  Block  (blockDData  Block_C )\r\n      if (blockDData.value && blockDData.value.items) {\r\n        const typhoonLeaveItem = blockDData.value.items.find(item => \r\n          item.id === 'typhoonLeave' || item.ch_name === ''\r\n        );\r\n        // console.log(':', typhoonLeaveItem);\r\n        \r\n        if (typhoonLeaveItem) {\r\n          typhoonLeaveItem.time = totalTyphoonHours;\r\n          // console.log(` : ${totalTyphoonHours} `);\r\n          \r\n          //  blockDData \r\n          blockDData.value = { ...blockDData.value };\r\n        } else {\r\n          // console.log(' ');\r\n          // console.log('blockDData.value.items:', blockDData.value.items);\r\n        }\r\n      } else {\r\n        // console.log(' blockDData ');\r\n        // console.log('blockDData.value:', blockDData.value);\r\n      }\r\n    } else {\r\n      // console.log('');\r\n    }\r\n  } catch (error) {\r\n    // console.error(' :', error);\r\n  }\r\n  // console.log('=== autoFillTyphoonLeave  ===');\r\n};\r\n\r\n// \r\nconst autoFillLeaveRecords = async () => {\r\n  console.log('=== autoFillLeaveRecords  ===');\r\n  try {\r\n    console.log('personalLeaveRecords.value:', personalLeaveRecords.value);\r\n    console.log('blockAnnualLeaveData.value:', blockAnnualLeaveData.value);\r\n    \r\n    // \r\n    if (personalLeaveRecords.value && personalLeaveRecords.value.length > 0) {\r\n      console.log(` ${personalLeaveRecords.value.length} `);\r\n      \r\n      let foundAnnualLeave = false;\r\n      \r\n      personalLeaveRecords.value.forEach((leaveRecord) => {\r\n        console.log(`:`, leaveRecord);\r\n        console.log(`- leaveEnName: ${leaveRecord.leaveEnName}`);\r\n        console.log(`- leaveChName: ${leaveRecord.leaveChName}`);\r\n        console.log(`- yearlyTotalMinutes: ${leaveRecord.yearlyTotalMinutes}`);\r\n        \r\n        //  -  blockAnnualLeaveData\r\n        if (leaveRecord.leaveEnName === 'AnnualLeave') {\r\n          foundAnnualLeave = true;\r\n          console.log('blockAnnualLeaveData.value ?', !!blockAnnualLeaveData.value);\r\n          console.log('blockAnnualLeaveData.value.items ?', !!(blockAnnualLeaveData.value && blockAnnualLeaveData.value.items));\r\n          \r\n          if (blockAnnualLeaveData.value && blockAnnualLeaveData.value.items) {\r\n            console.log('blockAnnualLeaveData.value.items:', blockAnnualLeaveData.value.items);\r\n            \r\n            const annualUsedItem = blockAnnualLeaveData.value.items.find(item => item.id === 'annualUsed');\r\n            console.log(' annualUsedItem:', annualUsedItem);\r\n            \r\n            if (annualUsedItem) {\r\n              console.log(` yearlyTotalMinutes: ${leaveRecord.yearlyTotalMinutes}`);\r\n              console.log(`yearlyTotalMinutes : ${typeof leaveRecord.yearlyTotalMinutes}`);\r\n              \r\n              const minutes = leaveRecord.minutes || 0; //  leaveRecord.minutes  leaveRecord.yearlyTotalMinutes\r\n              const annualLeaveHours = Math.floor(minutes / 60);\r\n              console.log(`: ${minutes}   60 = ${annualLeaveHours} `);\r\n              \r\n              const finalHours = parseFloat(annualLeaveHours);\r\n              console.log(` (parseFloat): ${finalHours}`);\r\n              \r\n              annualUsedItem.time = finalHours;\r\n              console.log(` : ${finalHours}  (: ${minutes} )`);\r\n              console.log(' annualUsedItem:', annualUsedItem);\r\n            } else {\r\n              console.log('  id  annualUsed ');\r\n              console.log(' items:', blockAnnualLeaveData.value.items.map(item => ({ id: item.id, ch_name: item.ch_name })));\r\n            }\r\n            \r\n            //  blockAnnualLeaveData \r\n            blockAnnualLeaveData.value = { ...blockAnnualLeaveData.value };\r\n            console.log(' blockAnnualLeaveData ');\r\n            console.log(' blockAnnualLeaveData:', blockAnnualLeaveData.value);\r\n          } else {\r\n            console.log(' blockAnnualLeaveData  items ');\r\n            console.log('blockAnnualLeaveData.value:', blockAnnualLeaveData.value);\r\n          }\r\n          return; //  blockDData \r\n        } else {\r\n          // console.log('');\r\n        }\r\n        \r\n        //  -  blockDData\r\n        // \r\n        if (blockDData.value && blockDData.value.items) {\r\n          // \r\n          let targetFieldId = '';\r\n          switch (leaveRecord.leaveChName) {\r\n            case '':\r\n              // \r\n              console.log(' ');\r\n              return;\r\n            case '':\r\n              targetFieldId = 'sickLeaveWithin30';\r\n              break;\r\n            case '':\r\n              targetFieldId = 'familyCareLeave';\r\n              break;\r\n            case '':\r\n              targetFieldId = 'menstrualLeave';\r\n              break;\r\n            case '':\r\n              targetFieldId = 'marriageLeave';\r\n              break;\r\n            case '':\r\n              targetFieldId = 'bereavementLeave';\r\n              break;\r\n            case '':\r\n              targetFieldId = 'otherLeave';\r\n              break;\r\n            default:\r\n              // console.log(`: ${leaveRecord.leaveChName}`);\r\n              return;\r\n          }\r\n          \r\n          const targetItem = blockDData.value.items.find(item => item.id === targetFieldId);\r\n          if (targetItem) {\r\n            const minutes = leaveRecord.yearlyTotalMinutes || 0;\r\n            const hours = Math.floor(minutes / 60);\r\n            const parsedHours = hours;\r\n            \r\n            //  NaN\r\n            if (!isNaN(parsedHours) && isFinite(parsedHours)) {\r\n              targetItem.time = parsedHours;\r\n              // console.log(`${leaveRecord.leaveChName}: ${hours}  (: ${minutes} )`);\r\n            } else {\r\n              targetItem.time = \"\";\r\n              // console.log(` ${leaveRecord.leaveChName}  (: ${minutes} )`);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      \r\n      if (!foundAnnualLeave) {\r\n        // console.log('  leaveEnName === \"AnnualLeave\" ');\r\n        console.log(' leaveEnName :', personalLeaveRecords.value.map(record => record.leaveEnName));\r\n      } else {\r\n        console.log(' ');\r\n      }\r\n      \r\n      //  blockDData \r\n      blockDData.value = { ...blockDData.value };\r\n      // console.log(' blockDData ');\r\n    } else {\r\n      console.log(' ');\r\n    }\r\n  } catch (error) {\r\n    // console.error(' :', error);\r\n  }\r\n  // console.log('=== autoFillLeaveRecords  ===');\r\n};\r\n\r\n//  Block_B \r\nconst updateBlockBOvertimeHours = (overtimeCalculation) => {\r\n  //  blockBData \r\n  if (blockBData.value && blockBData.value.items) {\r\n    const items = blockBData.value.items;\r\n    \r\n    // *4/3 (2 4/3) - \r\n    const overtime1_3 = items.find(item => item.id === 'overtime1_3' || item.ch_name === '*4/3');\r\n    if (overtime1_3) {\r\n      overtime1_3.time = overtimeCalculation.hours_1_33.toFixed(2); // \r\n    }\r\n    \r\n    // *5/3 (3-8 5/3) - \r\n    const overtime2_3 = items.find(item => item.id === 'overtime2_3' || item.ch_name === '*5/3');\r\n    if (overtime2_3) {\r\n      overtime2_3.time = overtimeCalculation.hours_1_67.toFixed(2); // \r\n    }\r\n    \r\n    // *6/3 (8 6/32) - \r\n    const overtime5_3 = items.find(item => item.id === 'overtime5_3' || item.ch_name === '*6/3');\r\n    if (overtime5_3) {\r\n      overtime5_3.time = overtimeCalculation.hours_2_67.toFixed(2); // \r\n    }\r\n    \r\n    //  blockBData \r\n    blockBData.value = { ...blockBData.value };\r\n    \r\n    // console.log(' Block_B  ():', {\r\n    //   '11/3': `${overtimeCalculation.hours_1_33.toFixed(2)} `,\r\n    //   '12/3': `${overtimeCalculation.hours_1_67.toFixed(2)} `, \r\n    //   '22/3': `${overtimeCalculation.hours_2_67.toFixed(2)} `\r\n    // });\r\n  }\r\n};\r\n\r\n/**\r\n *  watch \r\n *  API \r\n */\r\nwatch(\r\n  () => [selectedUser.value?.emploY_ID, attendanceDate.value],\r\n  async ([newEid, newDate], [oldEid, oldDate]) => {\r\n    // ID\r\n    if (newEid && newDate && (newEid !== oldEid || newDate !== oldDate)) {\r\n      // console.log(' ', {\r\n      //   from: `${oldEid}-${oldDate}`,\r\n      //   to: `${newEid}-${newDate}`\r\n      // });\r\n      \r\n      await loadSalaryData(newEid, newDate);\r\n    }\r\n  },\r\n  { \r\n    immediate: false, // \r\n    deep: false // \r\n  }\r\n);\r\n\r\n/**\r\n * \r\n */\r\nconst refreshCurrentData = async () => {\r\n  const empId = selectedUser.value?.emploY_ID;\r\n  const date = attendanceDate.value;\r\n  \r\n  if (empId && date) {\r\n    // console.log(' ');\r\n    // \r\n    salaryDataManager.clearCache(empId, date);\r\n    await loadSalaryData(empId, date, true); // forceRefresh = true\r\n  }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst checkForCalculationErrors = (blockDData) => {\r\n  if (!blockDData || !blockDData.items || !Array.isArray(blockDData.items)) {\r\n    return;\r\n  }\r\n\r\n  const errorItems = [];\r\n  \r\n  blockDData.items.forEach(item => {\r\n    if (item.amount === \"-1\" || item.amount === -1) {\r\n      const itemName = item.ch_name || item.id || '';\r\n      errorItems.push(itemName);\r\n    }\r\n  });\r\n\r\n  if (errorItems.length > 0) {\r\n    const errorMessage = `${errorItems.join('')}`;\r\n    \r\n    console.error(' :', errorMessage);\r\n    \r\n    ElMessage({\r\n      message: errorMessage,\r\n      type: 'error',\r\n      duration: 8000, // 8\r\n      showClose: true\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst clearSalaryData = () => {\r\n  console.log(' ');\r\n  \r\n  //  Block \r\n  blockAData.value = { \r\n    total_A: 0,\r\n    items: []\r\n  };\r\n  blockBData.value = { \r\n    total_B: 0,\r\n    items: []\r\n  };\r\n  blockDData.value = { \r\n    total_D: 0,\r\n    items: []\r\n  };\r\n  blockAnnualLeaveData.value = { \r\n    items: []\r\n  };\r\n  \r\n  // \r\n  totalAValue.value = 0;\r\n  totalDValue.value = 0;\r\n  \r\n  // \r\n  A_aggregate.value = {};\r\n  B_aggregate.value = {};\r\n  D_aggregate.value = {};\r\n  AnnualLeaveData.value = {};\r\n  \r\n  salaryHeadInfoRef.value = {\r\n    empName: '',\r\n    empDpt: '',\r\n    empTitleGrade: '',\r\n    insuranceLevel: '',\r\n    empTitleName: '',\r\n    empTitleLevel: ''\r\n  };\r\n  \r\n  personalLeaveRecords.value = [];\r\n  personalOvertimeRecord.value = {};\r\n  \r\n  console.log(' ');\r\n};\r\n\r\n// \r\nonUnmounted(() => {\r\n  // \r\n  salaryDataManager.cancelAllRequests();\r\n  // console.log(' SalarySlip ');\r\n});\r\n\r\n\r\nconst postSalarySlip = async () => {\r\n  //  Loading \r\n  const startTime = Date.now()\r\n  \r\n  //  Element Plus Loading\r\n  const loadingInstance = ElLoading.service({\r\n    lock: true,\r\n    text: '...',\r\n    background: 'rgba(0, 0, 0, 0.7)'\r\n  })\r\n\r\n  try {\r\n\r\n    //  salaryHeadInfo\r\n    const salaryHeadInfoObj = salaryHeadInfoRef?.value || {}\r\n    \r\n    //  salaryHeadInfoRef \r\n    // console.log('===  ===')\r\n    // console.log('salaryHeadInfoRef.value:', salaryHeadInfoRef.value)\r\n    // console.log('salaryHeadInfoObj:', salaryHeadInfoObj)\r\n    // console.log('JSON.stringify(salaryHeadInfoObj):', JSON.stringify(salaryHeadInfoObj))\r\n\r\n    // \r\n    const aggregatedBlocks = []\r\n    \r\n    if (A_aggregate?.value && Object.keys(A_aggregate.value).length > 0) {\r\n      aggregatedBlocks.push(A_aggregate.value)\r\n    }\r\n    if (B_aggregate?.value && Object.keys(B_aggregate.value).length > 0) {\r\n      aggregatedBlocks.push(B_aggregate.value)\r\n    }\r\n    //  block_C (D_aggregate) \r\n    if (D_aggregate?.value && Object.keys(D_aggregate.value).length > 0) {\r\n      aggregatedBlocks.push(D_aggregate.value)\r\n      console.log(\"  block_C :\", D_aggregate.value)\r\n    } else {\r\n      console.warn(\" D_aggregate  blockDData \")\r\n    }\r\n    if (AnnualLeaveData?.value && Object.keys(AnnualLeaveData.value).length > 0) {\r\n      aggregatedBlocks.push(AnnualLeaveData.value)\r\n    }\r\n    \r\n    //  isInitial: false \r\n    const initialBlock = { isInitial: false };\r\n    aggregatedBlocks.push(initialBlock);\r\n\r\n    const salarySlip = {\r\n      id: \"\",\r\n      emp_id: selectedUser.value.emploY_ID,\r\n      date: attendanceDate.value, //  \"2025-03\"\r\n      salaryHeadInfo: JSON.stringify(salaryHeadInfoObj),\r\n      block: JSON.stringify(aggregatedBlocks),\r\n      Create_At: new Date().toISOString(),\r\n      Create_By: \"system\",\r\n      Update_Time: null,\r\n      Update_By: null\r\n    }\r\n    \r\n    //  salarySlip \r\n    // console.log('===  salarySlip  ===')\r\n    // console.log('salarySlip:', salarySlip)\r\n\r\n    let loginUser = userStore.userId\r\n    await FinanceService.postSalarySlip(loginUser, salarySlip)\r\n    \r\n    //  \r\n    console.log(' ');\r\n    \r\n    // \r\n    const empId = selectedUser.value?.emploY_ID;\r\n    const date = attendanceDate.value;\r\n    if (empId && date) {\r\n      salaryDataManager.clearCache(empId, date);\r\n      await loadSalaryData(empId, date, true); // \r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('', error)\r\n    // \r\n    const empId = selectedUser.value?.emploY_ID;\r\n    const date = attendanceDate.value;\r\n    if (empId && date) {\r\n      console.log(' ');\r\n      await loadSalaryData(empId, date, true);\r\n    }\r\n  } finally {\r\n    // \r\n    const elapsed = Date.now() - startTime\r\n    const MIN_DELAY = 0 // 0.5 \r\n\r\n    //  0.5 \r\n    if (elapsed < MIN_DELAY) {\r\n      await new Promise(resolve => setTimeout(resolve, MIN_DELAY - elapsed))\r\n    }\r\n\r\n    //  Loading\r\n    loadingInstance.close()\r\n\r\n    toast.add({ severity: 'success', summary: 'Success', detail: '!', life: 3000 });\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n  const handleUpdateSalaryATotal = (value) => {\r\n    totalAValue.value = value\r\n  }\r\n\r\n  const handleUpdateBlockAAggregate = (value) => {\r\n    A_aggregate.value = value\r\n    // console.log(' Block_A :', value)\r\n  }\r\n\r\n\r\n  const handleUpdateSalaryDAggregate = (value) =>{\r\n    D_aggregate.value = value\r\n  }\r\n\r\n  const handleUpdateSalaryB = (value) => {\r\n    B_aggregate.value = value\r\n  }\r\n \r\n  const updateDeductionD = (value) => {\r\n    totalDValue.value = value\r\n  }\r\n\r\n  const handleUpdateInsuranceValues = (value) =>{\r\n    publicContribution.value=value;\r\n  }\r\n\r\n  const handleAttendanceDate = (value) => {\r\n    attendanceDate.value = value\r\n    handleUserSelected(selectedUser.value,attendanceDate.value)\r\n  }\r\n\r\n  const handleLateTotal =(value) =>{\r\n    lateTotal.value=value\r\n\r\n  }\r\n\r\n  const updateAnnualLeaveData =(value)=>{\r\n    AnnualLeaveData.value=value\r\n  }\r\n\r\n  //  SalaryInfo  salaryHeadInfo \r\n  const handleSalaryHeadInfoUpdate = (updatedHeadInfo) => {\r\n    salaryHeadInfoRef.value = { ...updatedHeadInfo }\r\n    // console.log('SalaryHeadInfo :', salaryHeadInfoRef.value)\r\n  }\r\n\r\n  // \r\n  const handleTyphoonDialogClose = () => {\r\n    showTyphoonLeaveDialog.value = false;\r\n    // \r\n    typhoonLeaveForm.value = {\r\n      leaveDate: new Date().toISOString().split('T')[0],\r\n      leaveType: 'fullDay',\r\n      startTime: '09:00:00',\r\n      endTime: '18:00:00'\r\n    };\r\n    if (typhoonLeaveFormRef.value) {\r\n      typhoonLeaveFormRef.value.resetFields();\r\n    }\r\n  };\r\n\r\n  const confirmTyphoonLeave = async () => {\r\n    if (!typhoonLeaveFormRef.value) return;\r\n    \r\n    try {\r\n      await typhoonLeaveFormRef.value.validate();\r\n      \r\n      // \r\n      const submitData = {\r\n        leaveDate: typhoonLeaveForm.value.leaveDate,\r\n        createdBy: selectedUser.value.emploY_ID\r\n      };\r\n      \r\n      // \r\n      if (typhoonLeaveForm.value.leaveType === 'timeRange') {\r\n        submitData.startTime = typhoonLeaveForm.value.startTime;\r\n        submitData.endTime = typhoonLeaveForm.value.endTime;\r\n      } else {\r\n        // 8:30-17:308\r\n        submitData.startTime = '08:30:00';\r\n        submitData.endTime = '17:30:00';\r\n      }\r\n      \r\n      // \r\n      await ElMessageBox.confirm(\r\n        ` ${typhoonLeaveForm.value.leaveDate} \\n` +\r\n        `${typhoonLeaveForm.value.leaveType === 'fullDay' ? '' : ''}\\n` +\r\n        (typhoonLeaveForm.value.leaveType === 'timeRange' ? \r\n          `${typhoonLeaveForm.value.startTime.substring(0,5)} - ${typhoonLeaveForm.value.endTime.substring(0,5)}` : \r\n          '08:30 - 17:308'),\r\n        '',\r\n        {\r\n          confirmButtonText: '',\r\n          cancelButtonText: '',\r\n          type: 'warning',\r\n        }\r\n      );\r\n      \r\n      typhoonLeaveSubmitting.value = true;\r\n      \r\n      //  API\r\n      const response = await FinanceService.createTyphoonLeaveRecord(submitData);\r\n      \r\n      if (response.data.success) {\r\n        ElMessage.success('');\r\n        handleTyphoonDialogClose();\r\n        \r\n        // \r\n        if (selectedUser.value) {\r\n          await handleUserSelected(selectedUser.value, attendanceDate.value);\r\n        }\r\n      } else {\r\n        ElMessage.error(response.data.message || '');\r\n      }\r\n      \r\n    } catch (error) {\r\n      if (error !== 'cancel') {\r\n        console.error(':', error);\r\n        ElMessage.error('');\r\n      }\r\n    } finally {\r\n      typhoonLeaveSubmitting.value = false;\r\n    }\r\n  };\r\n\r\n  // \r\n  const decryptAllSalarySlips = async () => {\r\n    try {\r\n      // \r\n      const confirmed = await ElMessageBox.confirm(\r\n        '\\n' +\r\n        '',\r\n        '',\r\n        {\r\n          confirmButtonText: '',\r\n          cancelButtonText: '',\r\n          type: 'warning',\r\n        }\r\n      );\r\n\r\n      if (!confirmed) return;\r\n\r\n      decryptLoading.value = true;\r\n      \r\n      //  API\r\n      const response = await FinanceService.decryptAllSalarySlips();\r\n      \r\n      if (response.success) {\r\n        ElMessage.success(` ${response.data.processedCount} `);\r\n        \r\n        // \r\n        if (selectedUser.value && attendanceDate.value) {\r\n          await loadSalaryData(selectedUser.value.emp_id, attendanceDate.value, true);\r\n        }\r\n      } else {\r\n        ElMessage.error(`${response.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(' :', error);\r\n      ElMessage.error(`${error.message}`);\r\n    } finally {\r\n      decryptLoading.value = false;\r\n    }\r\n  };\r\n\r\n</script>\r\n  \r\n  <style scoped>\r\n  :deep(.grid-lines) th,\r\n  :deep(.grid-lines) td {\r\n    border: 0.5px solid #000000 !important;\r\n  }\r\n  :deep(.grid-lines) {\r\n    border: 0.5px solid #000000 !important;\r\n  }\r\n  \r\n  .big-parent {\r\n    display: flex;\r\n    gap: 0;\r\n\r\n  }\r\n\r\n  .row-block {\r\n    display: flex;\r\n    gap: 0rem; /*  .row-block  .div2  .div3  1rem */\r\n  }\r\n\r\n  .left-parent,\r\n  .right-parent {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0;\r\n  }\r\n\r\n.comlumn {\r\n  display: flex;\r\n  flex-direction: row;      /*  */\r\n  align-items: flex-start;    /*  center */\r\n  justify-content: flex-start;/*  space-between  */\r\n  gap: 1rem;  \r\n  margin-left:6rem\r\n}\r\n\r\n.div2{\r\n  \r\n  flex-direction: row;    \r\n  gap: 0;  \r\n  flex: 1;\r\n}\r\n\r\n.div3 {\r\n  \r\n  flex-direction: row;    \r\n  gap: 0;  \r\n  flex: 1;\r\n}\r\n\r\n.btn-group {\r\n  display: grid;\r\n  grid-template-columns: repeat(6, auto); /*  */\r\n  gap: 4px; /*  */\r\n  \r\n  justify-content: left; /*  */\r\n\r\n}\r\n\r\n/*  */\r\n.loading-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 9999;\r\n}\r\n\r\n  </style>\r\n  ","import script from \"./SalarySlip.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalarySlip.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SalarySlip.vue?vue&type=style&index=0&id=1313d881&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1313d881\"]])\n\nexport default __exports__","<template>\r\n  <div style=\"margin-left:7rem; margin-top:5rem;\">\r\n\r\n    <el-button v-if=\"editMode===false\" :disabled=\"!selectedUser\" type=\"primary\" @click=\"toggleEdit\">\r\n      {{ \"\" }}\r\n    </el-button>\r\n    <el-button v-else  type=\"success\" @click=\"submitSalarySlip\">\r\n      {{ \"\" }}\r\n    </el-button>\r\n    <el-button  :disabled=\"!selectedUser && !editMode\" type=\"info\" plain @click=\"cancelEdit\">\r\n      {{ \"\" }}\r\n    </el-button>\r\n\r\n\r\n    <div>\r\n      <H_UserListBlock :editMode=\"editMode\" @row-selected=\"handleUserSelected\" style=\"margin-top:1rem;max-width: 85rem;\" />\r\n    </div>\r\n    <el-button @click=\"encryptSalaryStructure\" v-if=\"authStore.user.permissions.includes('dev')\">\r\n      {{ \"\" }}\r\n    </el-button>\r\n\r\n\r\n    <!-- / -->\r\n\r\n\r\n    <div class=\"gap-container\">\r\n\r\n      <div class=\"div1\">\r\n        <el-table empty-text=\"\" :show-header=\"false\" class=\"grid-lines\" :data=\"InfoTableData\" border style=\"width:400px;\">\r\n          <el-table-column label=\"\" width=\"180\">\r\n            <template #default=\"{ row }\">\r\n              {{ row.category }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"\" width=\"220\">\r\n            <template #default=\"{ row }\">\r\n              <div v-if=\"editMode && row.id !== 'empName'\">\r\n                <template v-if=\"row.category === ''\">\r\n                  <TreeSelectDepartment v-model=\"row.content\" size=\"small\" />\r\n                </template>\r\n                <template v-else-if=\"row.category === ''\">\r\n                  <TreeSelectTitle  v-model=\"row.content\" size=\"small\" />\r\n                </template>\r\n                <template v-else-if=\"row.category === ''\">\r\n                  <el-select\r\n                    v-model=\"row.content\"\r\n                    placeholder=\"\"\r\n                    style=\"width: 12rem;\"\r\n                    allow-create\r\n                    size=\"small\"\r\n                    filterable\r\n                    @change=\"value => handleInsuranceUpdate(row, value)\"\r\n                  >\r\n                    <el-option disabled value=\"\">\r\n                      <div style=\"display: flex; justify-content: center; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                        <span>/</span>\r\n                      </div>\r\n                    </el-option>\r\n                    <el-option\r\n                      v-for=\"item in mappedInsuranceOptions\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.combinedLevel\"\r\n                      :value=\"item.combinedLevel\"\r\n                    >\r\n                      <div style=\"display: flex; justify-content: space-between;\">\r\n                        <span style=\"font-size: 13px;\">{{ item.combinedLevel }}</span>\r\n                      </div>\r\n                    </el-option>\r\n                  </el-select>\r\n                </template>\r\n                <template v-else>\r\n                  <el-input v-model=\"row.content\" placeholder=\"\" size=\"small\" style=\"width: 100%;\" />\r\n                </template>\r\n              </div>\r\n              <div v-else>\r\n                <template v-if=\"row.category === ''\">\r\n                  <AsyncDeptName :deptId=\"row.content\" />\r\n                </template>\r\n                <template v-else-if=\"row.category === ''\">\r\n                  <AsyncTitleName mode=\"Description\" :titleId=\"row.content\" />\r\n                </template>\r\n                <template v-else>\r\n                  {{ row.content }}\r\n                </template>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <el-table\r\n    class=\"grid-lines\"\r\n    :data=\"blankInfoRows\"\r\n    border\r\n    :show-header=\"false\"\r\n    style=\"width:400px;\"\r\n      :row-style=\"tableRowStyle\"\r\n  >\r\n    <el-table-column label=\"\" width=\"180\">\r\n      <template #default=\"{  }\">\r\n        <!--  -->\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column label=\"\" width=\"220\">\r\n      <template #default=\"{  }\">\r\n        <!--  -->\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n      </div>\r\n\r\n      <div class=\"div2\">\r\n        <el-table empty-text=\"\" class=\"grid-lines\" :data=\"tableData\"  border style=\"width:400px;\">\r\n          <el-table-column label=\"\" width=\"180\">\r\n            <template #default=\"{ row }\">\r\n              {{ row.category }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"\" width=\"220\">\r\n      <template #default=\"{ row }\">\r\n        <div v-if=\"editMode\">\r\n          <template v-if=\"row.category === ''\">\r\n            <!--  TreeSelectDepartment -->\r\n            <TreeSelectDepartment v-model=\"row.content\" size=\"small\" />\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <!--  TreeSelectTitle -->\r\n            <TreeSelectTitle v-model=\"row.content\" size=\"small\" />\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.insurance.pensionCompany\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.pensionCompany)\"\r\n                :value=\"item.pensionCompany\"\r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.pensionCompany }}\r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.originalLaborCompany\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.laborCompany)\"\r\n                :value=\"item.laborCompany\"\r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.laborCompany }}\r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.insurance.healthCompany\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.healthCompany)\"\r\n                :value=\"item.healthCompany\"\r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.healthCompany }}\r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <!--  -->\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.insurance.laborPersonal\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.laborPersonal)\"\r\n                :value=\"item.laborPersonal\"\r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.laborPersonal }}\r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.insurance.healthPersonal\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.healthPersonal)\"\r\n                :value=\"item.healthPersonal\"\r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.healthPersonal }}\r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <template v-else-if=\"row.category === ''\">\r\n            <el-select\r\n              v-model=\"row.insurance.healthFamily\"\r\n              placeholder=\"\"\r\n              style=\"width: 12rem;\"\r\n              allow-create\r\n              filterable\r\n              size=\"small\"\r\n              @change=\"val => handleInsuranceUpdate(row, val)\"\r\n            >\r\n              <el-option disabled value=\"\">\r\n                <div style=\"display: flex; justify-content: space-between; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ebeef5;\">\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option\r\n                v-for=\"item in insuranceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"String(item.healthPersonal)\" \r\n                :value=\"item.healthPersonal\"  \r\n              >\r\n                <div style=\"display: flex; justify-content: space-between;\">\r\n                  <span style=\"color: var(--el-text-color-secondary); font-size: 13px;\">\r\n                    {{ item.insuranceLevel }}\r\n                  </span>\r\n                  <span style=\"margin-right: 8px;\">\r\n                    {{ item.healthPersonal }} \r\n                  </span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n          <template v-else>\r\n            <el-input v-model=\"row.content\" placeholder=\"\" size=\"small\" />\r\n          </template>\r\n        </div>\r\n        <div v-else>\r\n          <template v-if=\"row.category === ''\">\r\n            () {{ row.originalLaborCompany }} \r\n            /\r\n            () {{ row.content }}\r\n          </template>\r\n          <template v-else>\r\n            {{ row.content }}\r\n          </template>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <div class=\"div3\">\r\n        <el-table empty-text=\"\" class=\"grid-lines\" :data=\"companyLaborRateTableData\" border style=\"width:21.7rem;\" @dblclick=\"laborRate_toggleEdit\">\r\n          <el-table-column\r\n            label=\"\"\r\n            width=\"145\"\r\n          >\r\n            <template #default>\r\n              {{ \"%\" }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"TW\" width=\"100\">\r\n            <template #default=\"{ row }\">\r\n              <div v-if=\"laborRate_editMode\">\r\n                <el-input v-model=\"row.dae\" step=\"0.0001\" size=\"small\" />\r\n              </div>\r\n              <div v-else>\r\n                {{ (row.dae * 100).toFixed(2) + '%' }}\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"OP\" width=\"100\">\r\n            <template #default=\"{ row }\">\r\n              <div v-if=\"laborRate_editMode\">\r\n                <el-input v-model=\"row.op\" step=\"0.0001\" size=\"small\" />\r\n              </div>\r\n              <div v-else>\r\n                {{ (row.op * 100).toFixed(2) + '%' }}\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed,watch,nextTick } from 'vue'\r\nimport H_UserListBlock from '../Horizontal-User-List-Block.vue'\r\nimport FinanceService from '../../../service/FinanceService.js'\r\nimport { useQuasar, QSpinnerGears } from 'quasar'\r\nimport { ElMessage } from 'element-plus' //  ElMessage\r\nimport { useUserStore } from '../../../stores/user.js'\r\nimport TreeSelectTitle from '../../Common/TreeSelect-getData/TreeSelect-Title.vue'\r\nimport TreeSelectDepartment from '../../Common/TreeSelect-getData/TreeSelect-Department.vue'\r\nimport AsyncDeptName from '../../Common/IdToName/Dept-IdToName.vue'\r\nimport AsyncTitleName from '../../Common/IdToName/Title-IdToName.vue'\r\nimport ExternalService from '../../../service/ExternalService'\r\nimport { useAuthStore } from '@/stores/auth.js'\r\n\r\nconst authStore = useAuthStore();\r\n\r\n\r\nconst userStore = useUserStore()\r\nconst editMode = ref(false)\r\nconst $q = useQuasar()\r\nconst selectedUser = ref(null)\r\nconst insuranceOptions = ref([])\r\nconst companyLaborRateTableData = ref([]);\r\n\r\nconst InfoTableData = ref([\r\n  { category: \"\", id: \"empName\", content:\"\" },\r\n  { category: \"\", id: \"empDpt\", content:\"\" },\r\n  { category: \"\", id: \"empTitleName\",content:\"\" },\r\n  { category: \"\", id: \"empTitleGrade\", content:\"\" },\r\n  { category: \"\", id: \"empTitleLevel\", content:\"\"},\r\n  { category: \"\", id: \"insuranceLevel\", content:\"\" }, // \r\n\r\n])\r\n\r\nconst blankInfoRows = ref([\r\n  { category: '', content: '' },\r\n  { category: '', content: '' },\r\n  { category: '', content: '' },\r\n  { category: '', content: '' },\r\n  { category: '', content: '' },\r\n  { category: '', content: '' }\r\n]);\r\n\r\n\r\nconst tableData = ref([\r\n  { category: \"\", id: \"basicSalary\", content:\"\" },\r\n  { category: \"\", id: \"rankAllowance\",  content:\"\" },\r\n  { category: \"\", id: \"positionAllowance\", content:\"\"},\r\n  { category: \"\", id: \"mealAllowance\",  content:\"\" },\r\n  { category: \"()\", id: \"hourlyWagePartTime\",  content: \"\" },\r\n  { category: \"\", id: \"laborPersonal\",  content: \"\", insurance: { laborPersonal: \"\" } },\r\n  { category: \"\", id: \"healthPersonal\",  content: \"\", insurance: { healthPersonal: \"\" } },\r\n  { category: \"\", id: \"healthFamily\",  content: \"\", insurance: { healthFamily: \"\" } },\r\n  { category: \"\", id: \"pensionCompany\",  content: \"\", insurance: { pensionCompany: \"\" }  },\r\n  { category: \"\", id: \"laborCompany\",  content: 0 , insurance: { laborCompany: 0 },originalLaborCompany: 0 },\r\n  { category: \"\", id: \"healthCompany\",  content: \"\" , insurance: { healthCompany: \"\" } },\r\n])\r\n\r\n\r\nconst handleUserSelected = async (user) => {\r\n  await handleSalarySlipWithEmpId(user.emploY_ID)\r\n  selectedUser.value = user\r\n}\r\n\r\nfunction tableRowStyle() {\r\n  return {\r\n    height: '40.3px',\r\n  }\r\n}\r\n\r\n\r\n/**  */\r\nfunction handleInsuranceUpdate(row, newValue) {\r\n\r\n  if (row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.laborCompany = newValue\r\n  } else if (row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.healthCompany = newValue\r\n  }\r\n  else if (row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.pensionCompany = newValue\r\n  }\r\n  else if (row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.laborPersonal = newValue\r\n  }\r\n  else if (row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.healthPersonal = newValue\r\n  }\r\n  else if ( row.category === '') {\r\n    row.content = newValue\r\n    row.insurance.healthFamily = newValue\r\n  }\r\n\r\n}\r\n\r\n\r\nconst countMap = computed(() => {\r\n  const counts = {}\r\n  insuranceOptions.value.forEach(item => {\r\n    counts[item.laborCompany] = (counts[item.laborCompany] || 0) + 1\r\n  })\r\n  return counts\r\n})\r\n\r\nconst mappedInsuranceOptions = computed(() => {\r\n  const laborMap = {}\r\n  return insuranceOptions.value.map(item => {\r\n    const newItem = {\r\n      id: item.id,\r\n      insuranceLevel: item.insuranceLevel,\r\n      laborLevel: item.insuranceLevel,\r\n      healthLevel: item.insuranceLevel\r\n    }\r\n    if (countMap.value[item.laborCompany] > 1) {\r\n      if (!(item.laborCompany in laborMap)) {\r\n        laborMap[item.laborCompany] = item.insuranceLevel\r\n      }\r\n      newItem.laborLevel = laborMap[item.laborCompany]\r\n      newItem.healthLevel = item.insuranceLevel\r\n    }\r\n    newItem.combinedLevel = `${newItem.laborLevel} / ${newItem.healthLevel}`\r\n    return newItem\r\n  })\r\n})\r\n\r\n\r\nfunction populateSalaryData(responseData) {\r\n  //  salaryHeadInfo\r\n  const headInfo = JSON.parse(responseData.salaryHeadInfo);\r\n  InfoTableData.value.forEach(row => {\r\n    row.content = headInfo[row.id] ?? '';\r\n  });\r\n\r\n  //  structure\r\n  const structureArray = JSON.parse(responseData.structure);\r\n  tableData.value.forEach(row => {\r\n    const matchingItem = structureArray.find(item => item.id === row.id);\r\n    row.content = matchingItem ? (parseFloat(matchingItem.content) || 0) : 0;\r\n\r\n    //  insurance \r\n    if (row.category === '') {\r\n      row.insurance.pensionCompany = row.content;\r\n    } else if (row.category === '') {\r\n      row.insurance.laborCompany = row.content;\r\n    } else if (row.category === '') {\r\n      row.insurance.healthCompany = row.content;\r\n    } else if (row.category === '') {\r\n      row.insurance.laborPersonal = row.content;\r\n    } else if (row.category === '') {\r\n      row.insurance.healthPersonal = row.content;\r\n    } else if (row.category === '') {\r\n      row.insurance.healthFamily = row.content;\r\n    }\r\n  });\r\n\r\n  // \r\n  const insuranceLevelRow = InfoTableData.value.find(row => row.category === '');\r\n  const laborCompanyRow = tableData.value.find(row => row.category === '');\r\n\r\n    if (insuranceLevelRow && laborCompanyRow && companyLaborRateTableData.value.length > 0) {\r\n    //  API \r\n    laborCompanyRow.originalLaborCompany = parseFloat(laborCompanyRow.content) || 0;\r\n\r\n    //  x '/' \r\n    const parts   = insuranceLevelRow.content.split('/');\r\n    const healthL = parseFloat(parts[1]?.trim());\r\n    const daeRate = companyLaborRateTableData.value[0].dae;\r\n    const OPRate = companyLaborRateTableData.value[0].op;\r\n    \r\n    if (!isNaN(healthL) && !isNaN(daeRate)) {\r\n      let rateToUse = daeRate; //  daeRate\r\n      \r\n      //  'OP' \r\n      if (selectedUser.value && selectedUser.value.emploY_ID && selectedUser.value.emploY_ID.startsWith('OP')) {\r\n        rateToUse = OPRate;\r\n      }\r\n\r\n      const y = healthL * rateToUse;\r\n      const z = laborCompanyRow.originalLaborCompany;\r\n      const final = y + z;\r\n\r\n      laborCompanyRow.content               = final.toFixed(2);\r\n      laborCompanyRow.insurance.laborCompany = final.toFixed(2);\r\n    }\r\n  }\r\n}\r\nconst startTime = Date.now();\r\n\r\nconst encryptSalaryStructure = async () =>{\r\n     await FinanceService.encryptSalaryStructure();\r\n\r\n    // console.log(res.data);\r\n}\r\n\r\nconst fetchSalaryStructureData = async(empID) =>{\r\n    let res = await FinanceService.getSalaryStructureWithEmpId(empID);\r\n\r\n    // console.log(res.data);\r\n    if(res.data === 'no data') {\r\n      InfoTableData.value.forEach(row => {\r\n        if (row.id !== 'empName') {\r\n          row.content = '';\r\n        }\r\n      });\r\n      tableData.value.forEach(row => {\r\n        row.content = '';\r\n        if (row.insurance) {\r\n          row.insurance = {\r\n            pensionCompany: '',\r\n            laborCompany: '',\r\n            healthCompany: '',\r\n            laborPersonal: '',\r\n            healthPersonal: '',\r\n            healthFamily: ''\r\n          };\r\n        }\r\n      });\r\n    }else {\r\n      populateSalaryData(res.data);\r\n    }\r\n}\r\n\r\nconst handleSalarySlipWithEmpId = async (eID) => {\r\n  $q.loading.show({ spinner: QSpinnerGears, message: '...' });\r\n  try {\r\n    //  tableData  insurance \r\n    tableData.value.forEach(row => {\r\n      if (row.insurance) {\r\n        row.insurance = {\r\n          pensionCompany: '',\r\n          laborCompany: '',\r\n          healthCompany: '',\r\n          laborPersonal: '',\r\n          healthPersonal: '',\r\n          healthFamily: ''\r\n        };\r\n      }\r\n    });\r\n\r\n    fetchSalaryStructureData(eID);\r\n\r\n  } catch (error) {\r\n    console.error('', error);\r\n    InfoTableData.value.forEach(row => { row.content = ''; });\r\n    tableData.value.forEach(row => {\r\n      row.content = '';\r\n      if (row.insurance) {\r\n        row.insurance = {\r\n          pensionCompany: '',\r\n          laborCompany: '',\r\n          healthCompany: '',\r\n          laborPersonal: '',\r\n          healthPersonal: '',\r\n          healthFamily: ''\r\n        };\r\n      }\r\n    });\r\n  } finally {\r\n    const elapsed = Date.now() - startTime;\r\n    const remain = 300 - elapsed;\r\n    if (remain > 0) await new Promise(resolve => setTimeout(resolve, remain));\r\n    $q.loading.hide();\r\n  }\r\n};\r\n\r\n\r\nconst cancelEdit = async() =>{\r\n    editMode.value = false;\r\n  }\r\n\r\nconst toggleEdit = async () => {\r\n     editMode.value = true;\r\n  }\r\n\r\nconst laborRate_editMode = ref(false);\r\n\r\nconst laborRate_toggleEdit = async () => {\r\n  if (laborRate_editMode.value) {\r\n    // \r\n    $q.loading.show({ spinner: QSpinnerGears, message: '%...' });\r\n    try {\r\n      let loginUser = userStore.userId;\r\n      //  companyLaborRateTableData \r\n      const dataToSave = {\r\n        ...companyLaborRateTableData.value[0],\r\n        dae: parseFloat(companyLaborRateTableData.value[0].dae),\r\n        op: parseFloat(companyLaborRateTableData.value[0].op)\r\n      };\r\n      // console.log(dataToSave);\r\n      await FinanceService.putCompanyLaborRate(loginUser, dataToSave);\r\n      ElMessage({\r\n        type: 'success',\r\n        message: '%',\r\n        duration: 800\r\n      });\r\n    } catch (error) {\r\n      console.error('%', error);\r\n      ElMessage({\r\n        type: 'error',\r\n        message: '%',\r\n        duration: 800\r\n      });\r\n    } finally {\r\n      $q.loading.hide();\r\n      laborRate_editMode.value = false; // \r\n    }\r\n  } else {\r\n    // \r\n    laborRate_editMode.value = true;\r\n  }\r\n}\r\n\r\nconst submitSalarySlip = async () => {\r\n  editMode.value = false;\r\n  await nextTick();\r\n  await saveData();\r\n}\r\n\r\nconst saveData = async () => {\r\n  $q.loading.show({ spinner: QSpinnerGears, message: '...' });\r\n  try {\r\n    //  salaryHeadInfo \r\n    const salaryHeadInfoObj = {};\r\n    InfoTableData.value.forEach(item => {\r\n      salaryHeadInfoObj[item.id] = item.content;\r\n    });\r\n    const salaryHeadInfo = JSON.stringify(salaryHeadInfoObj);\r\n\r\n    //  structure \r\n    const structure = tableData.value\r\n      .map(item => {\r\n        if (item.id === 'laborCompany') {\r\n          const original = item.originalLaborCompany;\r\n          const calculated = parseFloat(item.content);\r\n          // alert(calculated);\r\n          return {\r\n            id: item.id,\r\n            ch_name: item.category,\r\n            content: original,\r\n            calculatedLaborCompany: calculated\r\n          };\r\n        }\r\n        return {\r\n          id: item.id,\r\n          ch_name: item.category,\r\n          content: item.content\r\n        };\r\n      })\r\n      .concat(\r\n        InfoTableData.value.map(item => ({\r\n          id: item.id,\r\n          ch_name: item.category,\r\n          content: item.content\r\n        }))\r\n      );\r\n\r\n    //  salaryStructure  salaryHeadInfo\r\n    const salaryStructure = {\r\n      Id: '',\r\n      emp_id: selectedUser.value?.emploY_ID || '',\r\n      structure: JSON.stringify(structure),\r\n      Create_At: new Date(),\r\n      Create_By: userStore.userId,\r\n      Update_Time: null,\r\n      Update_By: null,\r\n      salaryHeadInfo\r\n    };\r\n\r\n    const loginUser = userStore.userId;\r\n    await FinanceService.postSalaryStructures(loginUser, salaryStructure);\r\n    fetchSalaryStructureData(salaryStructure.emp_id);\r\n          ElMessage({\r\n        type: 'success',\r\n        message: '',\r\n        duration: 800\r\n      });\r\n  } catch (error) {\r\n    console.error('', error);\r\n  } finally {\r\n    $q.loading.hide();\r\n  }\r\n};\r\n\r\n\r\nonMounted(async () => {\r\n  $q.loading.show({ spinner: QSpinnerGears, message: '...' })\r\n  try {\r\n    const res = await ExternalService.GetAllInsuranceRates();\r\n    // console.log(res.data);\r\n    insuranceOptions.value = res.data;\r\n    // console.log(insuranceOptions.value);\r\n    \r\n    const response = await FinanceService.getCompanyLaborRate();\r\n    if (response.data && Array.isArray(response.data)) {\r\n      companyLaborRateTableData.value = response.data;\r\n    } else {\r\n      // console.error('API response is not an array:', response.data);\r\n      companyLaborRateTableData.value = [];\r\n    }\r\n\r\n  } catch (error) {\r\n    // console.error('Fetch error:', error)\r\n    // console.error('Error fetching company labor rate:', error);\r\n    companyLaborRateTableData.value = [];\r\n  } finally {\r\n    const elapsed = Date.now() - startTime;\r\n    const remain = 300 - elapsed;\r\n    if (remain > 0) await new Promise(resolve => setTimeout(resolve, remain));\r\n    $q.loading.hide();\r\n  }\r\n})\r\n\r\n//  selectedUser  empName  content\r\nwatch(selectedUser, (newUser) => {\r\n  // console.log('selectedUser changed:', newUser)\r\n  if (newUser) {\r\n    const empNameRow = InfoTableData.value.find(row => row.id === \"empName\")\r\n\r\n    if (empNameRow) {\r\n\r\n      empNameRow.content = newUser.namE_FIRST || ''\r\n      // console.log('empNameRow.content:', empNameRow.content)\r\n    }\r\n  }\r\n}, { immediate: true })\r\n\r\n</script>\r\n\r\n<style scoped>\r\n:deep(.grid-lines) th,\r\n:deep(.grid-lines) td {\r\n  border: 1px solid #000000 !important;\r\n}\r\n:deep(.grid-lines) {\r\n  border: 1px solid #000000 !important;\r\n}\r\n\r\n.gap-container{\r\n  display: flex;\r\n  flex-direction: row;      /*  */\r\n  align-items: flex-start;    /*  center */\r\n  justify-content: flex-start;/*  space-between  */\r\n}\r\n\r\n\r\n\r\n</style>\r\n","import script from \"./SalaryStructure.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalaryStructure.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SalaryStructure.vue?vue&type=style&index=0&id=63403922&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-63403922\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"meal-allowance-summary mt-5\">\r\n    <div class=\"header-section\">\r\n      <h2></h2>\r\n      <div class=\"date-selector\">\r\n        <label></label>\r\n        <el-date-picker\r\n          v-model=\"selectedMonth\"\r\n          type=\"month\"\r\n          placeholder=\"\"\r\n          format=\"YYYY-MM\"\r\n          value-format=\"YYYY-MM\"\r\n          @change=\"fetchMealAllowanceData\"\r\n        />\r\n        <el-button type=\"primary\" @click=\"fetchMealAllowanceData\" :loading=\"loading\">\r\n          \r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-section\">\r\n      <div class=\"table-container\">\r\n        <el-table\r\n          :data=\"mealAllowanceData\"\r\n          v-loading=\"loading\"\r\n          stripe\r\n          border\r\n          style=\"width: 100%\"\r\n          :default-sort=\"{ prop: 'totalAmount', order: 'descending' }\"\r\n        >\r\n        <el-table-column\r\n          prop=\"employeeName\"\r\n          label=\"\"\r\n          width=\"200\"\r\n          sortable\r\n        />\r\n        <el-table-column\r\n          prop=\"totalAmount\"\r\n          label=\"\"\r\n          width=\"150\"\r\n          sortable\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <span class=\"amount\">{{ formatCurrency(row.totalAmount) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"recordCount\"\r\n          label=\"\"\r\n          width=\"120\"\r\n          sortable\r\n          align=\"center\"\r\n        />\r\n        <el-table-column\r\n          label=\"\"\r\n          width=\"120\"\r\n          align=\"center\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"viewDetails(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"summary-section\" v-if=\"mealAllowanceData.length > 0\">\r\n      <div class=\"total-summary\">\r\n        <strong>{{ formatCurrency(totalMealAllowance) }}</strong>\r\n        <span class=\"total-employees\"> {{ mealAllowanceData.length }} </span>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      :title=\"`${selectedEmployee?.employeeName} - `\"\r\n      width=\"80%\"\r\n      :before-close=\"closeDetailDialog\"\r\n    >\r\n      <el-table\r\n        :data=\"detailRecords\"\r\n        v-loading=\"detailLoading\"\r\n        stripe\r\n        border\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column\r\n          prop=\"date\"\r\n          label=\"\"\r\n          width=\"120\"\r\n          sortable\r\n        />\r\n        <el-table-column\r\n          prop=\"mealAllowance\"\r\n          label=\"\"\r\n          width=\"100\"\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            {{ formatCurrency(row.mealAllowance) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"overtimeHours\"\r\n          label=\"\"\r\n          width=\"100\"\r\n          align=\"right\"\r\n        />\r\n        <el-table-column\r\n          prop=\"remarks\"\r\n          label=\"\"\r\n          show-overflow-tooltip\r\n        />\r\n      </el-table>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"closeDetailDialog\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport FinanceService from '@/service/FinanceService'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst detailLoading = ref(false)\r\nconst selectedMonth = ref('')\r\nconst mealAllowanceData = ref([])\r\nconst detailDialogVisible = ref(false)\r\nconst selectedEmployee = ref(null)\r\nconst detailRecords = ref([])\r\n\r\n// \r\nconst totalMealAllowance = computed(() => {\r\n  return mealAllowanceData.value.reduce((sum, item) => sum + (item.totalAmount || 0), 0)\r\n})\r\n\r\n// \r\nconst initializeCurrentMonth = () => {\r\n  const now = new Date()\r\n  const year = now.getFullYear()\r\n  const month = String(now.getMonth() + 1).padStart(2, '0')\r\n  selectedMonth.value = `${year}-${month}`\r\n}\r\n\r\n// \r\nconst formatCurrency = (amount) => {\r\n  if (amount == null || amount === '') return '0'\r\n  return new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0\r\n  }).format(amount)\r\n}\r\n\r\n// \r\nconst fetchMealAllowanceData = async () => {\r\n  if (!selectedMonth.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    const response = await FinanceService.getMealAllowanceSummary({ \r\n      month: selectedMonth.value \r\n    })\r\n    \r\n    //  response.data \r\n    if (response && response.data && Array.isArray(response.data)) {\r\n      mealAllowanceData.value = response.data\r\n    } else if (response && response.data && response.data.data && Array.isArray(response.data.data)) {\r\n      //  { success: true, data: [...], message: \"...\" } \r\n      mealAllowanceData.value = response.data.data\r\n    } else {\r\n      console.warn(' API :', response)\r\n      mealAllowanceData.value = []\r\n    }\r\n    \r\n    if (mealAllowanceData.value.length === 0) {\r\n      ElMessage.info('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    mealAllowanceData.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst viewDetails = async (employee) => {\r\n  selectedEmployee.value = employee\r\n  detailDialogVisible.value = true\r\n  detailLoading.value = true\r\n  \r\n  try {\r\n    const response = await FinanceService.getMealAllowanceDetails({\r\n      employeeId: employee.employeeId,\r\n      month: selectedMonth.value\r\n    })\r\n    detailRecords.value = response.data || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    detailRecords.value = []\r\n  } finally {\r\n    detailLoading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst closeDetailDialog = () => {\r\n  detailDialogVisible.value = false\r\n  selectedEmployee.value = null\r\n  detailRecords.value = []\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  initializeCurrentMonth()\r\n  fetchMealAllowanceData()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.meal-allowance-summary {\r\n  padding: 20px;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.header-section {\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n}\r\n\r\n.header-section h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.date-selector {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.date-selector label {\r\n  font-weight: bold;\r\n  color: #666;\r\n  white-space: nowrap;\r\n}\r\n\r\n.table-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.table-container {\r\n  overflow-x: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.amount {\r\n  font-weight: bold;\r\n  color: #e6a23c;\r\n}\r\n\r\n.summary-section {\r\n  padding: 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  text-align: right;\r\n}\r\n\r\n.total-summary {\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n\r\n.total-employees {\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n  color: #666;\r\n  font-weight: normal;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .meal-allowance-summary {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .header-section {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .header-section h2 {\r\n    text-align: center;\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .date-selector {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .summary-section {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .summary-cards {\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n    gap: 10px;\r\n  }\r\n  \r\n  .summary-card {\r\n    padding: 15px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .meal-allowance-summary {\r\n    padding: 5px;\r\n  }\r\n  \r\n  .header-section h2 {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  .date-selector {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  \r\n  .summary-cards {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","import script from \"./MealAllowanceSummary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MealAllowanceSummary.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MealAllowanceSummary.vue?vue&type=style&index=0&id=be62d4ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-be62d4ba\"]])\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setSpecialLeaveAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'SpecialLeave'; \r\n\r\nexport default {\r\n\r\n  // \r\n  calculateSpecialLeave(data) {\r\n    return api().post(`/${controllerPath}/calculate`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  calculateSpecialLeaveBatch(data) {\r\n    return api().post(`/${controllerPath}/calculate-batch`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // ID\r\n  calculateSpecialLeaveByEmployee(employeeId, leaveSystemType, customYearStartDate = null, anniversaryDate = null) {\r\n    const params = {\r\n      leaveSystemType,\r\n      ...(customYearStartDate && { customYearStartDate }),\r\n      ...(anniversaryDate && { anniversaryDate })\r\n    };\r\n    \r\n    return api().get(`/${controllerPath}/calculate-by-employee/${employeeId}`, {\r\n      params,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  getLeaveSystemTypes() {\r\n    return api().get(`/${controllerPath}/leave-system-types`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  getLeaveDaysTable() {\r\n    return api().get(`/${controllerPath}/leave-days-table`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  getAnnualLeaveSummary(params = {}) {\r\n    return api().get(`/${controllerPath}/getAnnualLeaveSummary`, { params });\r\n  }\r\n\r\n};","<template>\r\n  <div class=\"annual-leave-summary mt-5\">\r\n    <div class=\"header-section\">\r\n      <h2></h2>\r\n      <div class=\"filter-section\">\r\n        <div class=\"filter-item\">\r\n          <label class=\"filter-label\"></label>\r\n          <el-select \r\n            v-model=\"selectedArea\" \r\n            @change=\"handleAreaChange\"\r\n            placeholder=\"\"\r\n            style=\"width: 120px;\"\r\n          >\r\n            <el-option label=\"\" value=\"\" />\r\n            <el-option label=\"\" value=\"south\" />\r\n            <el-option label=\"\" value=\"north\" />\r\n          </el-select>\r\n            <label class=\"filter-label\"></label>\r\n            <el-date-picker\r\n              v-model=\"refYearStart\"\r\n              type=\"year\"\r\n              placeholder=\"\"\r\n              value-format=\"YYYY-MM-DD\" \r\n              format=\"YYYY/MM/DD\"\r\n              style=\"width: 160px;\"\r\n              :clearable=\"true\"\r\n              @change=\"handleRefDateChange\"\r\n            />\r\n        </div>\r\n      </div>\r\n      <div class=\"action-buttons\">\r\n        <el-button type=\"primary\" @click=\"fetchAnnualLeaveData\" :loading=\"loading\">\r\n          <el-icon><Refresh /></el-icon>\r\n          \r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"exportData\" :disabled=\"!Array.isArray(annualLeaveData) || annualLeaveData.length === 0\" v-if=\"false\">\r\n          <el-icon><Download /></el-icon>\r\n          Excel\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-section\">\r\n      <div class=\"table-container\">\r\n        <el-table\r\n          :data=\"annualLeaveData\"\r\n          v-loading=\"loading\"\r\n          stripe\r\n          border\r\n          style=\"width: 100%\"\r\n          :default-sort=\"{ prop: 'unusedLeaveHours', order: 'descending' }\"\r\n        >\r\n        <el-table-column\r\n          prop=\"employeeName\"\r\n          label=\"\"\r\n          width=\"150\"\r\n          sortable\r\n          fixed=\"left\"\r\n        />\r\n        <el-table-column\r\n          prop=\"totalAnnualLeaveHours\"\r\n          label=\"\"\r\n          width=\"180\"\r\n          sortable\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <span class=\"total-hours\">{{ formatHours(row.totalAnnualLeaveHours) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"usedLeaveHours\"\r\n          label=\"\"\r\n          width=\"150\"\r\n          sortable\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <span class=\"used-hours\">{{ formatHours(row.usedLeaveHours) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n         <el-table-column\r\n          prop=\"unusedLeaveHours\"\r\n          label=\"\"\r\n          width=\"150\"\r\n          sortable\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <span class=\"hours-display\" >\r\n              {{ formatHours(row.unusedLeaveHours) }}\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"\"\r\n          width=\"160\"\r\n          sortable\r\n          align=\"right\"\r\n          :sort-method=\"(a, b) => calculateUnusedLeaveMinutes(a) - calculateUnusedLeaveMinutes(b)\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <span class=\"minutes-display\">\r\n              {{ formatMinutes(calculateUnusedLeaveMinutes(row)) }}\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n       \r\n       \r\n        <el-table-column\r\n          label=\"\"\r\n          width=\"120\"\r\n          align=\"center\"\r\n          v-if=\"false\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-progress\r\n              :percentage=\"calculateUsageRate(row)\"\r\n              :color=\"getProgressColor(calculateUsageRate(row))\"\r\n              :stroke-width=\"8\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"\"\r\n          width=\"120\"\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          v-if=\"false\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"viewLeaveDetails(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"summary-section\" v-if=\"false\" >\r\n      <div class=\"summary-cards\">\r\n        <div class=\"summary-card\">\r\n          <div class=\"card-title\"></div>\r\n          <div class=\"card-value\">{{ Array.isArray(annualLeaveData) ? annualLeaveData.length : 0 }}</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n          <div class=\"card-title\"></div>\r\n          <div class=\"card-value\">{{ formatHours(totalAnnualLeaveHours) }}</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n          <div class=\"card-title\"></div>\r\n          <div class=\"card-value\">{{ formatHours(totalUsedLeaveHours) }}</div>\r\n        </div>\r\n        <div class=\"summary-card warning\">\r\n          <div class=\"card-title\"></div>\r\n          <div class=\"card-value\">{{ formatHours(totalUnusedLeaveHours) }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      :title=\"`${selectedEmployee?.employeeName} - `\"\r\n      width=\"80%\"\r\n      :before-close=\"closeDetailDialog\"\r\n    >\r\n      <el-table\r\n        :data=\"leaveDetailRecords\"\r\n        v-loading=\"detailLoading\"\r\n        stripe\r\n        border\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column\r\n          prop=\"leaveStartDate\"\r\n          label=\"\"\r\n          width=\"140\"\r\n          sortable\r\n        />\r\n        <el-table-column\r\n          prop=\"leaveEndDate\"\r\n          label=\"\"\r\n          width=\"140\"\r\n          sortable\r\n        />\r\n        <el-table-column\r\n          prop=\"leaveTotalInUnitsOfHours\"\r\n          label=\"\"\r\n          width=\"100\"\r\n          align=\"right\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            {{ formatHours(row.leaveTotalInUnitsOfHours) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"applyDate\"\r\n          label=\"\"\r\n          width=\"120\"\r\n          sortable\r\n        />\r\n        <el-table-column\r\n          prop=\"leaveRequestID\"\r\n          label=\"\"\r\n          width=\"150\"\r\n          show-overflow-tooltip\r\n        />\r\n      </el-table>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"closeDetailDialog\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Refresh, Download } from '@element-plus/icons-vue'\r\nimport SpecialLeaveService from '@/service/SpecialLeaveService'\r\nimport dayjs from 'dayjs'\r\n\r\n// ===  1/1===\r\nconst refYearStart = ref(dayjs().startOf('year').format('YYYY-MM-DD'))\r\n\r\nconst handleRefDateChange = () => {\r\n  fetchAnnualLeaveData()\r\n}\r\n\r\n// const quickSetYearStart = (mode) => {\r\n//   const now = dayjs()\r\n//   if (mode === 'this') {\r\n//     refYearStart.value = now.startOf('year').format('YYYY-MM-DD')\r\n//   } else if (mode === 'prev') {\r\n//     refYearStart.value = now.subtract(1, 'year').startOf('year').format('YYYY-MM-DD')\r\n//   } else if (mode === 'next') {\r\n//     refYearStart.value = now.add(1, 'year').startOf('year').format('YYYY-MM-DD')\r\n//   }\r\n//   fetchAnnualLeaveData()\r\n// }\r\n\r\n// \r\nconst loading = ref(false)\r\nconst detailLoading = ref(false)\r\nconst annualLeaveData = ref([])\r\nconst detailDialogVisible = ref(false)\r\nconst selectedEmployee = ref(null)\r\nconst leaveDetailRecords = ref([])\r\nconst selectedArea = ref('') // \r\n\r\n// \r\nconst totalAnnualLeaveHours = computed(() => {\r\n  if (!Array.isArray(annualLeaveData.value)) return 0\r\n  return annualLeaveData.value.reduce((sum, item) => sum + (item.totalAnnualLeaveHours || 0), 0)\r\n})\r\n\r\nconst totalUsedLeaveHours = computed(() => {\r\n  if (!Array.isArray(annualLeaveData.value)) return 0\r\n  return annualLeaveData.value.reduce((sum, item) => sum + (item.usedLeaveHours || 0), 0)\r\n})\r\n\r\nconst totalUnusedLeaveHours = computed(() => {\r\n  if (!Array.isArray(annualLeaveData.value)) return 0\r\n  return annualLeaveData.value.reduce((sum, item) => sum + (item.unusedLeaveHours || 0), 0)\r\n})\r\n\r\n// \r\nconst formatHours = (hours) => {\r\n  if (hours == null || hours === '') return '0'\r\n  return `${parseFloat(hours).toFixed(1)} `\r\n}\r\n\r\n// \r\nconst formatMinutes = (minutes) => {\r\n  if (minutes == null || minutes === '') return '0'\r\n  return `${Math.round(minutes)} `\r\n}\r\n\r\n// \r\nconst calculateUnusedLeaveMinutes = (row) => {\r\n  if (!row.unusedLeaveHours || row.unusedLeaveHours === 0) return 0\r\n  return row.unusedLeaveHours * 60\r\n}\r\n\r\n// \r\nconst calculateUsageRate = (row) => {\r\n  if (!row.totalAnnualLeaveHours || row.totalAnnualLeaveHours === 0) return 0\r\n  return Math.round((row.usedLeaveHours / row.totalAnnualLeaveHours) * 100)\r\n}\r\n\r\n// \r\nconst getProgressColor = (percentage) => {\r\n  if (percentage >= 80) return '#67c23a'\r\n  if (percentage >= 50) return '#e6a23c'\r\n  return '#f56c6c'\r\n}\r\n\r\n// \r\nconst handleAreaChange = () => {\r\n  fetchAnnualLeaveData()\r\n}\r\n\r\n// \r\nconst fetchAnnualLeaveData = async () => {\r\n  loading.value = true\r\n  try {\r\n    const params = {}\r\n    if (selectedArea.value) params.area = selectedArea.value\r\n    if (refYearStart.value) params.refYearStart = refYearStart.value   //  \r\n\r\n    const response = await SpecialLeaveService.getAnnualLeaveSummary(params)\r\n\r\n    if (response && response.data && Array.isArray(response.data)) {\r\n      annualLeaveData.value = response.data\r\n    } else if (response && response.data && response.data.data && Array.isArray(response.data.data)) {\r\n      annualLeaveData.value = response.data.data\r\n    } else {\r\n      console.warn('API :', response)\r\n      annualLeaveData.value = []\r\n    }\r\n\r\n    if (annualLeaveData.value.length === 0) {\r\n      ElMessage.info('')\r\n    } else {\r\n      ElMessage.success('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    annualLeaveData.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst viewLeaveDetails = async (employee) => {\r\n  selectedEmployee.value = employee\r\n  detailDialogVisible.value = true\r\n  detailLoading.value = true\r\n  \r\n  try {\r\n    const response = await SpecialLeaveService.getEmployeeLeaveDetails({\r\n      employeeId: employee.employeeId\r\n    })\r\n    \r\n    //  response.data \r\n    if (response && response.data && Array.isArray(response.data)) {\r\n      leaveDetailRecords.value = response.data\r\n    } else if (response && response.data && response.data.data && Array.isArray(response.data.data)) {\r\n      //  { success: true, data: [...], message: \"...\" } \r\n      leaveDetailRecords.value = response.data.data\r\n    } else {\r\n      console.warn(' API :', response)\r\n      leaveDetailRecords.value = []\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    leaveDetailRecords.value = []\r\n  } finally {\r\n    detailLoading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst closeDetailDialog = () => {\r\n  detailDialogVisible.value = false\r\n  selectedEmployee.value = null\r\n  leaveDetailRecords.value = []\r\n}\r\n\r\n// Excel\r\nconst exportData = () => {\r\n  // TODO: Excel\r\n  ElMessage.info('Excel')\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  fetchAnnualLeaveData()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.annual-leave-summary {\r\n  padding: 20px;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.header-section {\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n}\r\n\r\n.header-section h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.filter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.filter-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.table-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.table-container {\r\n  overflow-x: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.hours-display {\r\n  font-weight: bold;\r\n  color: #409eff;\r\n}\r\n\r\n.hours-display.warning {\r\n  color: #e6a23c;\r\n}\r\n\r\n.minutes-display {\r\n  color: #909399;\r\n}\r\n\r\n.used-hours {\r\n  color: #67c23a;\r\n  font-weight: bold;\r\n}\r\n\r\n.total-hours {\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.summary-section {\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.summary-cards {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.summary-card {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.summary-card.warning {\r\n  border-left: 4px solid #e6a23c;\r\n}\r\n\r\n.card-title {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.card-value {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.summary-card.warning .card-value {\r\n  color: #e6a23c;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n:deep(.el-progress-bar__outer) {\r\n  border-radius: 4px;\r\n}\r\n\r\n:deep(.el-progress-bar__inner) {\r\n  border-radius: 4px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .annual-leave-summary {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .header-section {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .header-section h2 {\r\n    text-align: center;\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .action-buttons {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .summary-section {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .summary-cards {\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n    gap: 10px;\r\n  }\r\n  \r\n  .summary-card {\r\n    padding: 15px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .annual-leave-summary {\r\n    padding: 5px;\r\n  }\r\n  \r\n  .header-section h2 {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  .action-buttons {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  \r\n  .summary-cards {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","import script from \"./AnnualLeaveSummary.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AnnualLeaveSummary.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AnnualLeaveSummary.vue?vue&type=style&index=0&id=c764c596&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c764c596\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"overtime-page-info\">\r\n    <div class=\"header-section\">\r\n      <h2></h2>\r\n      \r\n      <!--  -->\r\n      <div class=\"filter-section\">\r\n        <div class=\"filter-row\">\r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-radio-group v-model=\"selectedArea\" @change=\"fetchOvertimeData\">\r\n              <el-radio label=\"\"></el-radio>\r\n              <el-radio label=\"south\"></el-radio>\r\n              <el-radio label=\"north\"></el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"filter-row\">\r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-select v-model=\"selectedYear\" placeholder=\"\" @change=\"fetchOvertimeData\" style=\"width:5rem\">\r\n              <el-option\r\n                v-for=\"year in availableYears\"\r\n                :key=\"year\"\r\n                :label=\"year\"\r\n                :value=\"year\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-select v-model=\"selectedMonth\" placeholder=\"\" @change=\"fetchOvertimeData\" style=\"width:5rem\">\r\n              <el-option label=\"\" value=\"\"></el-option>\r\n              <el-option\r\n                v-for=\"month in availableMonths\"\r\n                :key=\"month.value\"\r\n                :label=\"month.label\"\r\n                :value=\"month.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <el-button type=\"primary\" @click=\"fetchOvertimeData\" :loading=\"loading\">\r\n              <el-icon><Search /></el-icon>\r\n              \r\n            </el-button>\r\n            <el-button type=\"success\" @click=\"exportExcel\" :loading=\"exporting\">\r\n              <el-icon><Download /></el-icon>\r\n              Excel\r\n            </el-button>\r\n            <el-button type=\"info\" @click=\"printTable\">\r\n              <el-icon><Printer /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"table-section\">\r\n      <el-table\r\n        :data=\"overtimeData\"\r\n        v-loading=\"loading\"\r\n        stripe\r\n        border\r\n        style=\"width: 1170px\"\r\n        :default-sort=\"{ prop: 'mealAllowanceTotal', order: 'descending' }\"\r\n        @row-click=\"showEmployeeDetails\"\r\n        class=\"overtime-table\"\r\n      >\r\n        <el-table-column prop=\"employeeId\" label=\"\" width=\"100\" sortable />\r\n        <el-table-column prop=\"employeeName\" label=\"\" width=\"120\" sortable />\r\n        <el-table-column prop=\"department\" label=\"\" width=\"150\" sortable />\r\n        <el-table-column prop=\"area\" label=\"\" width=\"100\" sortable />\r\n        <el-table-column \r\n          prop=\"mealAllowanceTotal\" \r\n          label=\"\" \r\n          width=\"120\" \r\n          sortable\r\n          :formatter=\"formatCurrency\"\r\n        />\r\n        <el-table-column \r\n          prop=\"overtimeHours0To2\" \r\n          label=\"2\" \r\n          width=\"120\" \r\n          sortable\r\n          :formatter=\"formatHours\"\r\n        />\r\n        <el-table-column \r\n          prop=\"overtimeHours2Plus\" \r\n          label=\"2\" \r\n          width=\"130\" \r\n          sortable\r\n          :formatter=\"formatHours\"\r\n        />\r\n        <el-table-column prop=\"overtimeRecordsCount\" label=\"\" width=\"100\" sortable />\r\n        <el-table-column label=\"\" width=\"100\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click.stop=\"showEmployeeDetails(scope.row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      :title=\"`${selectedEmployee?.employeeName} `\"\r\n      width=\"80%\"\r\n      :before-close=\"closeDetailDialog\"\r\n    >\r\n      <el-table\r\n        :data=\"employeeDetails\"\r\n        v-loading=\"detailLoading\"\r\n        stripe\r\n        border\r\n        style=\"width: 100%\"\r\n        class=\"detail-table\"\r\n      >\r\n        <el-table-column prop=\"documentNumber\" label=\"\" width=\"150\" sortable>\r\n          <template #default=\"scope\">\r\n            <el-tag v-if=\"scope.row.documentNumber\" type=\"info\">\r\n              {{ scope.row.documentNumber }}\r\n            </el-tag>\r\n            <span v-else class=\"text-gray-400\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"actualOvertimeDate\" label=\"\" width=\"120\">\r\n          <template #default=\"scope\">\r\n            {{ formatDate(scope.row.actualOvertimeDate) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"200\">\r\n          <template #default=\"scope\">\r\n            {{ formatTimeRange(scope.row.actualOvertimeStartTime, scope.row.actualOvertimeEndTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column \r\n          prop=\"actualMealAllowance\" \r\n          label=\"\" \r\n          width=\"100\"\r\n          :formatter=\"formatCurrency\"\r\n        />\r\n        <el-table-column label=\"\" width=\"100\">\r\n          <template #default=\"scope\">\r\n            {{ formatTotalHours(scope.row.actualOvertimeHours, scope.row.actualOvertimeMinutes) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"actualOvertimeContent\" label=\"\" min-width=\"200\" />\r\n        <el-table-column label=\"\" width=\"120\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click.stop=\"openWorkflowDialog(scope.row)\"\r\n              :disabled=\"!scope.row.documentNumber\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"closeDetailDialog\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <DetailRelatedWFDialog\r\n      :visible=\"workflowDialogVisible\"\r\n      :doc=\"selectedDoc\"\r\n      @update:visible=\"val => workflowDialogVisible = val\"\r\n      @close=\"closeWorkflowDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search, Download, Printer } from '@element-plus/icons-vue'\r\nimport FinanceService from '@/service/FinanceService'\r\nimport DetailRelatedWFDialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\nimport * as XLSX from 'xlsx'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst exporting = ref(false)\r\nconst detailLoading = ref(false)\r\nconst detailDialogVisible = ref(false)\r\n\r\nconst selectedArea = ref('')\r\nconst selectedYear = ref(new Date().getFullYear().toString())\r\nconst selectedMonth = ref((new Date().getMonth() + 1).toString())\r\n\r\nconst overtimeData = ref([])\r\nconst employeeDetails = ref([])\r\nconst selectedEmployee = ref(null)\r\n\r\n// \r\nconst workflowDialogVisible = ref(false)\r\nconst selectedDocumentID = ref('')\r\nconst selectedDoc = ref(null)\r\n\r\n// 5\r\nconst availableYears = computed(() => {\r\n  const currentYear = new Date().getFullYear()\r\n  const years = []\r\n  for (let i = currentYear; i >= currentYear - 4; i--) {\r\n    years.push(i.toString())\r\n  }\r\n  return years\r\n})\r\n\r\n// \r\nconst availableMonths = computed(() => {\r\n  return [\r\n    { label: '1', value: '1' },\r\n    { label: '2', value: '2' },\r\n    { label: '3', value: '3' },\r\n    { label: '4', value: '4' },\r\n    { label: '5', value: '5' },\r\n    { label: '6', value: '6' },\r\n    { label: '7', value: '7' },\r\n    { label: '8', value: '8' },\r\n    { label: '9', value: '9' },\r\n    { label: '10', value: '10' },\r\n    { label: '11', value: '11' },\r\n    { label: '12', value: '12' }\r\n  ]\r\n})\r\n\r\n// \r\nconst fetchOvertimeData = async () => {\r\n  loading.value = true\r\n  try {\r\n    const params = {\r\n      area: selectedArea.value || undefined,\r\n      year: selectedYear.value || undefined,\r\n      month: selectedMonth.value || undefined\r\n    }\r\n    \r\n    const response = await FinanceService.getOvertimePageInfo(params)\r\n    console.log(response.data);\r\n    if (response.data.success) {\r\n      //  overtimeHours2Plus\r\n      const processedData = response.data.data.map(item => ({\r\n        ...item,\r\n        //  overtimeHours2Plus\r\n        overtimeHours2Plus: item.overtimeHours2Plus || \r\n          ((item.overtimeHours2To4 || 0) + (item.overtimeHours4Plus || 0))\r\n      }))\r\n      \r\n      // \r\n      const filteredData = processedData.filter(item => {\r\n        const hasOvertimeHours = (item.overtimeHours0To2 || 0) > 0 || (item.overtimeHours2Plus || 0) > 0\r\n        const hasOvertimeRecords = (item.overtimeRecordsCount || 0) > 0\r\n        const hasMealAllowance = (item.mealAllowanceTotal || 0) > 0\r\n        \r\n        // \r\n        return hasOvertimeHours || hasOvertimeRecords || hasMealAllowance\r\n      })\r\n      \r\n      overtimeData.value = filteredData\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst showEmployeeDetails = async (row) => {\r\n  selectedEmployee.value = row\r\n  detailDialogVisible.value = true\r\n  detailLoading.value = true\r\n  \r\n  try {\r\n    const params = {\r\n      employeeId: row.employeeId,\r\n      year: selectedYear.value || undefined,\r\n      month: selectedMonth.value || undefined\r\n    }\r\n    \r\n    const response = await FinanceService.getEmployeeOvertimeDetails(params)\r\n    if (response.data.success) {\r\n      employeeDetails.value = response.data.data\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    detailLoading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst closeDetailDialog = () => {\r\n  detailDialogVisible.value = false\r\n  selectedEmployee.value = null\r\n  employeeDetails.value = []\r\n}\r\n\r\n// Excel\r\nconst exportExcel = () => {\r\n  if (overtimeData.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  exporting.value = true\r\n  try {\r\n    // \r\n    const exportData = overtimeData.value.map(item => ({\r\n      '': item.employeeId,\r\n      '': item.employeeName,\r\n      '': item.department,\r\n      '': item.area,\r\n      '': item.mealAllowanceTotal || 0,\r\n      '2': item.overtimeHours0To2 || 0,\r\n      '2': item.overtimeHours2Plus || 0,\r\n      '': item.overtimeRecordsCount || 0\r\n    }))\r\n\r\n    // \r\n    const ws = XLSX.utils.json_to_sheet(exportData)\r\n    const wb = XLSX.utils.book_new()\r\n    XLSX.utils.book_append_sheet(wb, ws, '')\r\n\r\n    // \r\n    const colWidths = [\r\n      { wch: 10 }, // \r\n      { wch: 15 }, // \r\n      { wch: 20 }, // \r\n      { wch: 10 }, // \r\n      { wch: 15 }, // \r\n      { wch: 15 }, // 2\r\n      { wch: 18 }, // 2\r\n      { wch: 12 }  // \r\n    ]\r\n    ws['!cols'] = colWidths\r\n\r\n    // \r\n    const queryConditions = []\r\n    if (selectedArea.value) {\r\n      const areaText = selectedArea.value === 'south' ? '' : selectedArea.value === 'north' ? '' : ''\r\n      queryConditions.push(`${areaText}`)\r\n    }\r\n    if (selectedYear.value) {\r\n      queryConditions.push(`${selectedYear.value}`)\r\n    }\r\n    if (selectedMonth.value) {\r\n      const monthLabel = availableMonths.value.find(m => m.value === selectedMonth.value)?.label || selectedMonth.value\r\n      queryConditions.push(`${monthLabel}`)\r\n    }\r\n\r\n    // \r\n    const currentDate = new Date().toISOString().slice(0, 10)\r\n    const conditionText = queryConditions.length > 0 ? `_${queryConditions.join('_')}` : ''\r\n    const fileName = `${conditionText}_${currentDate}.xlsx`\r\n    \r\n    // \r\n    XLSX.writeFile(wb, fileName)\r\n    ElMessage.success('Excel')\r\n  } catch (error) {\r\n    console.error('Excel:', error)\r\n    ElMessage.error('Excel')\r\n  } finally {\r\n    exporting.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst printTable = () => {\r\n  if (overtimeData.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  try {\r\n    // \r\n    const printContent = generatePrintContent()\r\n    \r\n    // \r\n    const printWindow = window.open('', '_blank')\r\n    printWindow.document.write(printContent)\r\n    printWindow.document.close()\r\n    \r\n    // \r\n    printWindow.onload = () => {\r\n      printWindow.print()\r\n      printWindow.close()\r\n    }\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst generatePrintContent = () => {\r\n  const currentDate = new Date().toLocaleDateString('zh-TW')\r\n  const currentTime = new Date().toLocaleTimeString('zh-TW')\r\n  \r\n  // \r\n  const queryConditions = []\r\n  if (selectedArea.value) {\r\n    const areaText = selectedArea.value === 'south' ? '' : selectedArea.value === 'north' ? '' : ''\r\n    queryConditions.push(`${areaText}`)\r\n  }\r\n  if (selectedYear.value) {\r\n    queryConditions.push(`${selectedYear.value}`)\r\n  }\r\n  if (selectedMonth.value) {\r\n    const monthLabel = availableMonths.value.find(m => m.value === selectedMonth.value)?.label || selectedMonth.value\r\n    queryConditions.push(`${monthLabel}`)\r\n  }\r\n  \r\n  let html = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <title></title>\r\n      <style>\r\n        @page {\r\n          size: A4 landscape;\r\n          margin: 15mm;\r\n        }\r\n        body { \r\n          font-family: 'Microsoft JhengHei', Arial, sans-serif; \r\n          margin: 10px; \r\n          font-size: 10px;\r\n          line-height: 1.3;\r\n        }\r\n        .header { \r\n          text-align: center; \r\n          margin-bottom: 15px; \r\n          border-bottom: 2px solid #333;\r\n          padding-bottom: 8px;\r\n        }\r\n        .header h1 { \r\n          margin: 0; \r\n          font-size: 16px; \r\n          color: #333;\r\n        }\r\n        .print-info { \r\n          text-align: right; \r\n          margin-bottom: 10px; \r\n          font-size: 9px;\r\n          color: #666;\r\n        }\r\n        .query-conditions {\r\n          margin-bottom: 10px;\r\n          padding: 8px;\r\n          background-color: #f5f5f5;\r\n          border-radius: 4px;\r\n          font-size: 9px;\r\n        }\r\n        .query-conditions h3 {\r\n          margin: 0 0 8px 0;\r\n          font-size: 12px;\r\n        }\r\n        .condition-item {\r\n          display: inline-block;\r\n          margin-right: 15px;\r\n          margin-bottom: 3px;\r\n        }\r\n        table { \r\n          width: 100%; \r\n          border-collapse: collapse; \r\n          margin-bottom: 15px;\r\n          table-layout: fixed;\r\n        }\r\n        th, td { \r\n          border: 1px solid #ddd; \r\n          padding: 4px; \r\n          text-align: left;\r\n          font-size: 9px;\r\n          word-wrap: break-word;\r\n          overflow: hidden;\r\n        }\r\n        th { \r\n          background-color: #f2f2f2; \r\n          font-weight: bold;\r\n          text-align: center;\r\n          font-size: 10px;\r\n        }\r\n        /*  */\r\n        .col-id { width: 8%; }\r\n        .col-name { width: 10%; }\r\n        .col-dept { width: 12%; }\r\n        .col-area { width: 8%; }\r\n        .col-meal { width: 10%; }\r\n        .col-hours1 { width: 10%; }\r\n        .col-hours2 { width: 12%; }\r\n        .col-count { width: 8%; }\r\n        \r\n        .number { text-align: right; }\r\n        .center { text-align: center; }\r\n        .summary {\r\n          margin-top: 10px;\r\n          text-align: right;\r\n          font-weight: bold;\r\n          font-size: 11px;\r\n        }\r\n        @media print {\r\n          body { \r\n            margin: 0; \r\n            -webkit-print-color-adjust: exact;\r\n            print-color-adjust: exact;\r\n          }\r\n          .no-print { display: none; }\r\n          @page {\r\n            size: A4 landscape;\r\n            margin: 10mm;\r\n          }\r\n        }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"header\">\r\n        <h1></h1>\r\n      </div>\r\n      \r\n      <div class=\"print-info\">\r\n        ${currentDate} ${currentTime}\r\n      </div>\r\n      \r\n      <div class=\"query-conditions\">\r\n        <h3></h3>\r\n        ${queryConditions.length > 0 ? queryConditions.map(condition => `<span class=\"condition-item\">${condition}</span>`).join('') : '<span class=\"condition-item\"></span>'}\r\n      </div>\r\n      \r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th class=\"col-id\"></th>\r\n            <th class=\"col-name\"></th>\r\n            <th class=\"col-dept\"></th>\r\n            <th class=\"col-area\"></th>\r\n            <th class=\"col-meal\"></th>\r\n            <th class=\"col-hours1\">2</th>\r\n            <th class=\"col-hours2\">2</th>\r\n            <th class=\"col-count\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n  `\r\n  \r\n  // \r\n  overtimeData.value.forEach(item => {\r\n    html += `\r\n      <tr>\r\n        <td class=\"col-id center\">${item.employeeId || ''}</td>\r\n        <td class=\"col-name\">${item.employeeName || ''}</td>\r\n        <td class=\"col-dept\">${item.department || ''}</td>\r\n        <td class=\"col-area center\">${item.area || ''}</td>\r\n        <td class=\"col-meal number\">$${(item.mealAllowanceTotal || 0).toFixed(0)}</td>\r\n        <td class=\"col-hours1 number\">${(item.overtimeHours0To2 || 0).toFixed(1)}h</td>\r\n        <td class=\"col-hours2 number\">${(item.overtimeHours2Plus || 0).toFixed(1)}h</td>\r\n        <td class=\"col-count center\">${item.overtimeRecordsCount || 0}</td>\r\n      </tr>\r\n    `\r\n  })\r\n  \r\n  // \r\n  const totalMealAllowance = overtimeData.value.reduce((sum, item) => sum + (item.mealAllowanceTotal || 0), 0)\r\n  const totalHours0To2 = overtimeData.value.reduce((sum, item) => sum + (item.overtimeHours0To2 || 0), 0)\r\n  const totalHours2Plus = overtimeData.value.reduce((sum, item) => sum + (item.overtimeHours2Plus || 0), 0)\r\n  const totalRecords = overtimeData.value.reduce((sum, item) => sum + (item.overtimeRecordsCount || 0), 0)\r\n  \r\n  html += `\r\n        </tbody>\r\n      </table>\r\n      \r\n      <div class=\"summary\">\r\n        <div>${overtimeData.value.length} </div>\r\n        <div>$${totalMealAllowance.toFixed(0)}</div>\r\n        <div>2${totalHours0To2.toFixed(1)}h</div>\r\n        <div>2${totalHours2Plus.toFixed(1)}h</div>\r\n        <div>${totalRecords} </div>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `\r\n  \r\n  return html\r\n}\r\n\r\n// \r\nconst formatCurrency = (row, column, cellValue) => {\r\n  return cellValue ? `$${cellValue.toFixed(0)}` : '$0'\r\n}\r\n\r\nconst formatHours = (row, column, cellValue) => {\r\n  return cellValue ? `${cellValue.toFixed(1)}h` : '0h'\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return ''\r\n  return new Date(dateString).toLocaleDateString('zh-TW')\r\n}\r\n\r\nconst formatTimeRange = (startTime, endTime) => {\r\n  if (!startTime || !endTime) return ''\r\n  return `${startTime} ~ ${endTime}`\r\n}\r\n\r\nconst formatTotalHours = (hours, minutes) => {\r\n  if (!hours && !minutes) return '0h'\r\n  const totalHours = (hours || 0) + (minutes || 0) / 60\r\n  return `${totalHours.toFixed(1)}h`\r\n}\r\n\r\n// \r\nconst openWorkflowDialog = async (overtimeRecord) => {\r\n  try {\r\n    // ID\r\n    const documentID = await getOvertimeDocumentID(overtimeRecord)\r\n    \r\n    if (documentID) {\r\n      selectedDocumentID.value = documentID\r\n      //  doc  Detail_Related_WF_Dialog \r\n      selectedDoc.value = {\r\n        documentID: documentID,\r\n        documentTypeID: 'OR' // ID\r\n      }\r\n      workflowDialogVisible.value = true\r\n    } else {\r\n      ElMessage.warning('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst closeWorkflowDialog = () => {\r\n  workflowDialogVisible.value = false\r\n  selectedDocumentID.value = ''\r\n  selectedDoc.value = null\r\n}\r\n\r\n// ID\r\nconst getOvertimeDocumentID = async (overtimeRecord) => {\r\n  try {\r\n    // 1: documentNumber\r\n    if (overtimeRecord.documentNumber) {\r\n      return overtimeRecord.documentNumber\r\n    }\r\n    \r\n    // 2: ID\r\n    if (overtimeRecord.overtimeRequestId) {\r\n      return overtimeRecord.overtimeRequestId\r\n    }\r\n    \r\n    // 3: ID\r\n    if (overtimeRecord.recordId) {\r\n      // ID\r\n      const possibleIds = [\r\n        overtimeRecord.recordId.toString(), // recordId\r\n        `OR-${overtimeRecord.recordId}`, // OR\r\n        `OT-${overtimeRecord.recordId}`, // OT\r\n        `OvertimeRequest-${overtimeRecord.recordId}` // \r\n      ]\r\n      \r\n      // recordId\r\n      return possibleIds[0] // recordId\r\n    }\r\n    \r\n    return null\r\n  } catch (error) {\r\n    console.error('ID:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  fetchOvertimeData()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.overtime-page-info {\r\n  justify-items: center;\r\n  padding: 20px;\r\n}\r\n\r\n.header-section {\r\n  margin-top:2rem;\r\n  margin-bottom: 20px;\r\n  width: 80rem;\r\n  justify-items: center;\r\n}\r\n\r\n.header-section h2 {\r\n  margin-bottom: 15px;\r\n  color: #2c3e50;\r\n}\r\n\r\n.filter-section {\r\n  background: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filter-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.filter-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.filter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.filter-item label {\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  min-width: 60px;\r\n}\r\n\r\n.table-section {\r\n  justify-items: center;\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.overtime-table {\r\n  width: 100%;\r\n}\r\n\r\n.overtime-table :deep(.el-table__row) {\r\n  cursor: pointer;\r\n}\r\n\r\n.overtime-table :deep(.el-table__row:hover) {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n/*  */\r\n.overtime-table :deep(.el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n.overtime-table :deep(.el-table__header-wrapper .el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n.overtime-table :deep(.el-table__body-wrapper .el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n/*  */\r\n.detail-table :deep(.el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n.detail-table :deep(.el-table__header-wrapper .el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n.detail-table :deep(.el-table__body-wrapper .el-table__cell) {\r\n  text-align: center;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/*  */\r\n@media print {\r\n  .filter-section,\r\n  .el-table-column--selection,\r\n  .el-table__fixed-right {\r\n    display: none !important;\r\n  }\r\n  \r\n  .overtime-page-info {\r\n    padding: 0;\r\n  }\r\n  \r\n  .table-section {\r\n    box-shadow: none;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .filter-row {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .filter-item {\r\n    width: 100%;\r\n  }\r\n  \r\n  .filter-item label {\r\n    min-width: auto;\r\n  }\r\n}\r\n</style>","import script from \"./OvertimePageInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OvertimePageInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OvertimePageInfo.vue?vue&type=style&index=0&id=d865b6e2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d865b6e2\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"leave-page-info\">\r\n    <div class=\"header-section\">\r\n      <h2></h2>\r\n      \r\n      <!--  -->\r\n      <div class=\"filter-section\">\r\n        <div class=\"filter-row\">\r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-radio-group v-model=\"selectedArea\" @change=\"fetchLeaveData\">\r\n              <el-radio label=\"\"></el-radio>\r\n              <el-radio label=\"south\"></el-radio>\r\n              <el-radio label=\"north\"></el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"filter-row\">\r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-select v-model=\"selectedYear\" placeholder=\"\" @change=\"fetchLeaveData\" style=\"width:5rem\">\r\n              <el-option\r\n                v-for=\"year in availableYears\"\r\n                :key=\"year\"\r\n                :label=\"year\"\r\n                :value=\"year\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <label></label>\r\n            <el-select v-model=\"selectedMonth\" placeholder=\"\" @change=\"fetchLeaveData\" style=\"width:5rem\">\r\n              <el-option label=\"\" value=\"\"></el-option>\r\n              <el-option\r\n                v-for=\"month in availableMonths\"\r\n                :key=\"month.value\"\r\n                :label=\"month.label\"\r\n                :value=\"month.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div class=\"filter-item\">\r\n            <el-button type=\"primary\" @click=\"fetchLeaveData\" :loading=\"loading\">\r\n              <el-icon><Search /></el-icon>\r\n              \r\n            </el-button>\r\n            <el-button type=\"success\" @click=\"exportExcel\" :loading=\"exporting\">\r\n              <el-icon><Download /></el-icon>\r\n              Excel\r\n            </el-button>\r\n            <el-button type=\"info\" @click=\"printTable\">\r\n              <el-icon><Printer /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"table-section\">\r\n      <el-table\r\n        :data=\"leaveData\"\r\n        v-loading=\"loading\"\r\n        stripe\r\n        border\r\n        style=\"width: 100%\"\r\n        :default-sort=\"{ prop: 'leaveStartDate', order: 'descending' }\"\r\n        @row-click=\"showEmployeeDetails\"\r\n        class=\"leave-table\"\r\n      >\r\n        <el-table-column prop=\"employeeId\" label=\"\" width=\"100\" sortable />\r\n        <el-table-column prop=\"employeeName\" label=\"\" width=\"120\" sortable />\r\n        <el-table-column prop=\"department\" label=\"\" width=\"150\" sortable />\r\n        <el-table-column prop=\"area\" label=\"\" width=\"100\" sortable />\r\n        <el-table-column prop=\"annualLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.annualLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"sickLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.sickLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"personalLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.personalLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"menstrualLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.menstrualLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"officialLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.officialLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"workInjuryLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.workInjuryLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"familyCareLeave\" label=\"\" width=\"100\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.familyCareLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"marriageLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.marriageLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"maternityLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.maternityLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"prenatalCheckupLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.prenatalCheckupLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"paternityLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.paternityLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"funeralLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.funeralLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"jobSeekingLeave\" label=\"\" width=\"80\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ scope.row.jobSeekingLeave }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"totalLeaveHours\" label=\"\" width=\"100\" sortable v-if=\"false\">\r\n          <template #default=\"scope\">\r\n            {{ scope.row.totalLeaveHours }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"100\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click.stop=\"showEmployeeDetails(scope.row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      :title=\"`${selectedEmployee?.employeeName} `\"\r\n      width=\"50%\"\r\n      :before-close=\"closeDetailDialog\"\r\n    >\r\n      <el-table\r\n        :data=\"employeeDetails\"\r\n        v-loading=\"detailLoading\"\r\n        stripe\r\n        border\r\n        style=\"width: 100%\"\r\n        class=\"detail-table\"\r\n      >\r\n        <el-table-column prop=\"leaveType\" label=\"\" width=\"120\" />\r\n        <el-table-column prop=\"hours\" label=\"\" width=\"100\">\r\n          <template #default=\"scope\">\r\n            {{ scope.row.hours }}h\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"documents\" label=\"\" min-width=\"200\">\r\n          <template #default=\"scope\">\r\n            <div v-if=\"scope.row.documents && scope.row.documents.length > 0\">\r\n              <el-tag \r\n                v-for=\"(docId) in scope.row.documents\" \r\n                :key=\"docId\"\r\n                type=\"primary\" \r\n                class=\"document-tag\"\r\n                @click=\"openDocumentDetail(docId)\"\r\n                style=\"cursor: pointer; margin-right: 5px; margin-bottom: 2px;\"\r\n              >\r\n                {{ docId }}\r\n              </el-tag>\r\n            </div>\r\n            <span v-else class=\"no-documents\"></span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"closeDetailDialog\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <DetailRelatedWFDialog \r\n      :visible=\"documentDialogVisible\"\r\n      :doc=\"selectedDocument\"\r\n      @update:visible=\"val => documentDialogVisible = val\"\r\n      @close=\"closeDocumentDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search, Download, Printer } from '@element-plus/icons-vue'\r\nimport FinanceService from '@/service/FinanceService'\r\nimport FormService from '@/service/FormService'\r\nimport * as XLSX from 'xlsx'\r\nimport DetailRelatedWFDialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst exporting = ref(false)\r\nconst detailLoading = ref(false)\r\nconst detailDialogVisible = ref(false)\r\n\r\nconst selectedArea = ref('')\r\nconst selectedYear = ref(new Date().getFullYear().toString())\r\nconst selectedMonth = ref((new Date().getMonth() + 1).toString())\r\n\r\nconst leaveData = ref([])\r\nconst employeeDetails = ref([])\r\nconst selectedEmployee = ref(null)\r\n\r\n// \r\nconst documentDialogVisible = ref(false)\r\nconst selectedDocument = ref(null)\r\n\r\n// 5\r\nconst availableYears = computed(() => {\r\n  const currentYear = new Date().getFullYear()\r\n  const years = []\r\n  for (let i = currentYear; i >= currentYear - 4; i--) {\r\n    years.push(i.toString())\r\n  }\r\n  return years\r\n})\r\n\r\n// \r\nconst availableMonths = computed(() => {\r\n  return [\r\n    { label: '1', value: '1' },\r\n    { label: '2', value: '2' },\r\n    { label: '3', value: '3' },\r\n    { label: '4', value: '4' },\r\n    { label: '5', value: '5' },\r\n    { label: '6', value: '6' },\r\n    { label: '7', value: '7' },\r\n    { label: '8', value: '8' },\r\n    { label: '9', value: '9' },\r\n    { label: '10', value: '10' },\r\n    { label: '11', value: '11' },\r\n    { label: '12', value: '12' }\r\n  ]\r\n})\r\n\r\n// \r\nconst fetchLeaveData = async () => {\r\n  loading.value = true\r\n  try {\r\n    const params = {\r\n      area: selectedArea.value || undefined,\r\n      year: selectedYear.value || undefined,\r\n      month: selectedMonth.value || undefined\r\n    }\r\n    \r\n    const response = await FinanceService.getLeavePageInfo(params)\r\n    if (response.data.success) {\r\n      leaveData.value = response.data.data\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n//  - \r\nconst showEmployeeDetails = (row) => {\r\n  selectedEmployee.value = row\r\n  detailDialogVisible.value = true\r\n  \r\n  // \r\n  const leaveDetails = [\r\n    { leaveType: '', hours: row.annualLeave, documents: row.annualLeaveDocuments },\r\n    { leaveType: '', hours: row.sickLeave, documents: row.sickLeaveDocuments },\r\n    { leaveType: '', hours: row.personalLeave, documents: row.personalLeaveDocuments },\r\n    { leaveType: '', hours: row.menstrualLeave, documents: row.menstrualLeaveDocuments },\r\n    { leaveType: '', hours: row.officialLeave, documents: row.officialLeaveDocuments },\r\n    { leaveType: '', hours: row.workInjuryLeave, documents: row.workInjuryLeaveDocuments },\r\n    { leaveType: '', hours: row.familyCareLeave, documents: row.familyCareLeaveDocuments },\r\n    { leaveType: '', hours: row.marriageLeave, documents: row.marriageLeaveDocuments },\r\n    { leaveType: '', hours: row.maternityLeave, documents: row.maternityLeaveDocuments },\r\n    { leaveType: '', hours: row.prenatalCheckupLeave, documents: row.prenatalCheckupLeaveDocuments },\r\n    { leaveType: '', hours: row.paternityLeave, documents: row.paternityLeaveDocuments },\r\n    { leaveType: '', hours: row.funeralLeave, documents: row.funeralLeaveDocuments },\r\n    { leaveType: '', hours: row.jobSeekingLeave, documents: row.jobSeekingLeaveDocuments }\r\n  ].filter(item => item.hours > 0) // \r\n  \r\n  employeeDetails.value = leaveDetails\r\n}\r\n\r\n// \r\nconst closeDetailDialog = () => {\r\n  detailDialogVisible.value = false\r\n  selectedEmployee.value = null\r\n  employeeDetails.value = []\r\n}\r\n\r\n// \r\nconst openDocumentDetail = async (documentId) => {\r\n  try {\r\n    // ID\r\n    const response = await FormService.getDocDetail('LR', documentId)\r\n    console.log(\"ID:\", response.data);\r\n    \r\n    //  success  API \r\n    if (response.data && response.data.id) {\r\n      //  doc  Detail_Related_WF_Dialog \r\n      selectedDocument.value = {\r\n        documentID: documentId,\r\n        documentTypeID: 'LR' // ID\r\n      }\r\n      documentDialogVisible.value = true\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst closeDocumentDialog = () => {\r\n  documentDialogVisible.value = false\r\n  selectedDocument.value = null\r\n}\r\n\r\n// Excel\r\nconst exportExcel = () => {\r\n  if (leaveData.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  exporting.value = true\r\n  try {\r\n    // \r\n    const exportData = leaveData.value.map(item => ({\r\n      '': item.employeeId,\r\n      '': item.employeeName,\r\n      '': item.department,\r\n      '': item.area,\r\n      '': item.annualLeave || 0,\r\n      '': item.sickLeave || 0,\r\n      '': item.personalLeave || 0,\r\n      '': item.menstrualLeave || 0,\r\n      '': item.officialLeave || 0,\r\n      '': item.workInjuryLeave || 0,\r\n      '': item.familyCareLeave || 0,\r\n      '': item.marriageLeave || 0,\r\n      '': item.maternityLeave || 0,\r\n      '': item.prenatalCheckupLeave || 0,\r\n      '': item.paternityLeave || 0,\r\n      '': item.funeralLeave || 0,\r\n      '': item.jobSeekingLeave || 0,\r\n      '': item.totalLeaveHours || 0\r\n    }))\r\n\r\n    // \r\n    const ws = XLSX.utils.json_to_sheet(exportData)\r\n    const wb = XLSX.utils.book_new()\r\n    XLSX.utils.book_append_sheet(wb, ws, '')\r\n\r\n    // \r\n    const colWidths = [\r\n      { wch: 10 }, // \r\n      { wch: 15 }, // \r\n      { wch: 20 }, // \r\n      { wch: 10 }, // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 12 }, // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 8 },  // \r\n      { wch: 10 }  // \r\n    ]\r\n    ws['!cols'] = colWidths\r\n\r\n    // \r\n    const queryConditions = []\r\n    if (selectedArea.value) {\r\n      const areaText = selectedArea.value === 'south' ? '' : selectedArea.value === 'north' ? '' : ''\r\n      queryConditions.push(`${areaText}`)\r\n    }\r\n    if (selectedYear.value) {\r\n      queryConditions.push(`${selectedYear.value}`)\r\n    }\r\n    if (selectedMonth.value) {\r\n      const monthLabel = availableMonths.value.find(m => m.value === selectedMonth.value)?.label || selectedMonth.value\r\n      queryConditions.push(`${monthLabel}`)\r\n    }\r\n\r\n    // \r\n    const currentDate = new Date().toISOString().slice(0, 10)\r\n    const conditionText = queryConditions.length > 0 ? `_${queryConditions.join('_')}` : ''\r\n    const fileName = `${conditionText}_${currentDate}.xlsx`\r\n    \r\n    // \r\n    XLSX.writeFile(wb, fileName)\r\n    ElMessage.success('Excel')\r\n  } catch (error) {\r\n    console.error('Excel:', error)\r\n    ElMessage.error('Excel')\r\n  } finally {\r\n    exporting.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst printTable = () => {\r\n  if (leaveData.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  try {\r\n    // \r\n    const printContent = generatePrintContent()\r\n    \r\n    // \r\n    const printWindow = window.open('', '_blank')\r\n    printWindow.document.write(printContent)\r\n    printWindow.document.close()\r\n    \r\n    // \r\n    printWindow.onload = () => {\r\n      printWindow.print()\r\n      printWindow.close()\r\n    }\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst generatePrintContent = () => {\r\n  const currentDate = new Date().toLocaleDateString('zh-TW')\r\n  const currentTime = new Date().toLocaleTimeString('zh-TW')\r\n  \r\n  // \r\n  const queryConditions = []\r\n  if (selectedArea.value) {\r\n    const areaText = selectedArea.value === 'south' ? '' : selectedArea.value === 'north' ? '' : ''\r\n    queryConditions.push(`${areaText}`)\r\n  }\r\n  if (selectedYear.value) {\r\n    queryConditions.push(`${selectedYear.value}`)\r\n  }\r\n  if (selectedMonth.value) {\r\n    const monthLabel = availableMonths.value.find(m => m.value === selectedMonth.value)?.label || selectedMonth.value\r\n    queryConditions.push(`${monthLabel}`)\r\n  }\r\n  \r\n  let html = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <title></title>\r\n      <style>\r\n        @page {\r\n          size: A4 landscape;\r\n          margin: 15mm;\r\n        }\r\n        body { \r\n          font-family: 'Microsoft JhengHei', Arial, sans-serif; \r\n          margin: 10px; \r\n          font-size: 10px;\r\n          line-height: 1.3;\r\n        }\r\n        .header { \r\n          text-align: center; \r\n          margin-bottom: 15px; \r\n          border-bottom: 2px solid #333;\r\n          padding-bottom: 8px;\r\n        }\r\n        .header h1 { \r\n          margin: 0; \r\n          font-size: 16px; \r\n          color: #333;\r\n        }\r\n        .print-info { \r\n          text-align: right; \r\n          margin-bottom: 10px; \r\n          font-size: 9px;\r\n          color: #666;\r\n        }\r\n        .query-conditions {\r\n          margin-bottom: 10px;\r\n          padding: 8px;\r\n          background-color: #f5f5f5;\r\n          border-radius: 4px;\r\n          font-size: 9px;\r\n        }\r\n        .query-conditions h3 {\r\n          margin: 0 0 8px 0;\r\n          font-size: 12px;\r\n        }\r\n        .condition-item {\r\n          display: inline-block;\r\n          margin-right: 15px;\r\n          margin-bottom: 3px;\r\n        }\r\n        table { \r\n          width: 100%; \r\n          border-collapse: collapse; \r\n          margin-bottom: 15px;\r\n          table-layout: fixed;\r\n        }\r\n        th, td { \r\n          border: 1px solid #ddd; \r\n          padding: 4px; \r\n          text-align: left;\r\n          font-size: 9px;\r\n          word-wrap: break-word;\r\n          overflow: hidden;\r\n        }\r\n        th { \r\n          background-color: #f2f2f2; \r\n          font-weight: bold;\r\n          text-align: center;\r\n          font-size: 10px;\r\n        }\r\n        /*  */\r\n        .col-id { width: 8%; }\r\n        .col-name { width: 12%; }\r\n        .col-dept { width: 15%; }\r\n        .col-area { width: 8%; }\r\n        .col-range { width: 30%; }\r\n        .col-type { width: 12%; }\r\n        .col-hours { width: 10%; }\r\n        \r\n        .number { text-align: right; }\r\n        .center { text-align: center; }\r\n        .summary {\r\n          margin-top: 10px;\r\n          text-align: right;\r\n          font-weight: bold;\r\n          font-size: 11px;\r\n        }\r\n        @media print {\r\n          body { \r\n            margin: 0; \r\n            -webkit-print-color-adjust: exact;\r\n            print-color-adjust: exact;\r\n          }\r\n          .no-print { display: none; }\r\n          @page {\r\n            size: A4 landscape;\r\n            margin: 10mm;\r\n          }\r\n        }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"header\">\r\n        <h1></h1>\r\n      </div>\r\n      \r\n      <div class=\"print-info\">\r\n        ${currentDate} ${currentTime}\r\n      </div>\r\n      \r\n      <div class=\"query-conditions\">\r\n        <h3></h3>\r\n        ${queryConditions.length > 0 ? queryConditions.map(condition => `<span class=\"condition-item\">${condition}</span>`).join('') : '<span class=\"condition-item\"></span>'}\r\n      </div>\r\n      \r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th class=\"col-id\"></th>\r\n            <th class=\"col-name\"></th>\r\n            <th class=\"col-dept\"></th>\r\n            <th class=\"col-area\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-leave\"></th>\r\n            <th class=\"col-total\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n  `\r\n  \r\n  // \r\n  leaveData.value.forEach(item => {\r\n    html += `\r\n      <tr>\r\n        <td class=\"col-id center\">${item.employeeId || ''}</td>\r\n        <td class=\"col-name\">${item.employeeName || ''}</td>\r\n        <td class=\"col-dept\">${item.department || ''}</td>\r\n        <td class=\"col-area center\">${item.area || ''}</td>\r\n        <td class=\"col-leave number\">${(item.annualLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.sickLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.personalLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.menstrualLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.officialLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.workInjuryLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.familyCareLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.marriageLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.maternityLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.prenatalCheckupLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.paternityLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.funeralLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-leave number\">${(item.jobSeekingLeave || 0).toFixed(1)}h</td>\r\n        <td class=\"col-total number\">${(item.totalLeaveHours || 0).toFixed(1)}h</td>\r\n      </tr>\r\n    `\r\n  })\r\n  \r\n  // \r\n  const totalHours = leaveData.value.reduce((sum, item) => sum + (item.totalLeaveHours || 0), 0)\r\n  \r\n  html += `\r\n        </tbody>\r\n      </table>\r\n      \r\n      <div class=\"summary\">\r\n        <div>${leaveData.value.length} </div>\r\n        <div>${totalHours.toFixed(1)}h</div>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `\r\n  \r\n  return html\r\n}\r\n\r\n\r\n// \r\nonMounted(() => {\r\n  fetchLeaveData()\r\n})\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.leave-page-info {\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header-section {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header-section h2 {\r\n  margin: 0 0 20px 0;\r\n  color: #333;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.filter-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.filter-item label {\r\n  font-weight: 500;\r\n  color: #666;\r\n  min-width: 80px;\r\n}\r\n\r\n.table-section {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.leave-table {\r\n  width: 100%;\r\n}\r\n\r\n.leave-table :deep(.el-table__row) {\r\n  cursor: pointer;\r\n}\r\n\r\n.leave-table :deep(.el-table__row:hover) {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.detail-table {\r\n  margin-top: 10px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .leave-page-info {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .filter-row {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .filter-item {\r\n    width: 100%;\r\n  }\r\n  \r\n  .filter-item label {\r\n    min-width: auto;\r\n  }\r\n}\r\n\r\n/*  */\r\n.document-tag {\r\n  margin-right: 5px;\r\n  margin-bottom: 2px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.document-tag:hover {\r\n  transform: scale(1.05);\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.no-documents {\r\n  color: #999;\r\n  font-style: italic;\r\n}\r\n\r\n/*  */\r\n.detail-table {\r\n  margin-top: 10px;\r\n}\r\n\r\n.detail-table .el-table__cell {\r\n  padding: 8px 0;\r\n}\r\n</style>","import script from \"./LeavePageInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LeavePageInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LeavePageInfo.vue?vue&type=style&index=0&id=21aa9076&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-21aa9076\"]])\n\nexport default __exports__","import script from \"./sys_MacForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sys_MacForm.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./sys_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sys_ComputerInventory.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"tool-bar\"  style=\"display: flex;justify-content: left;height:2.5rem;margin-right: 10px;margin-bottom:1rem;gap:1rem;\">\r\n      <el-input v-model=\"query\" placeholder=\"   \" style=\"width:10rem;\"></el-input>\r\n      <el-button type=\"success\"  @click=\"openAddDialog\" style=\"height:2.5rem; font-size:1rem\" round><el-icon><Plus /></el-icon> </el-button>\r\n    </div>\r\n\r\n    <el-table :data=\"filteredUserRes\" style=\"width: 100%\">\r\n      <el-table-column prop=\"name\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"id\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"password_hash\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.status === 'Active' ? '' : scope.row.status === 'Inactive' ? '' : scope.row.status }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"openEditDialog(scope.row)\"></el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" width=\"500px\">\r\n      <el-form :model=\"currentUser\" label-width=\"120px\">\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentUser.id\" :disabled=\"isEditMode\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentUser.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentUser.password_hash\" type=\"password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentUser.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-select v-model=\"currentUser.status\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option label=\"\" value=\"Active\"></el-option>\r\n            <el-option label=\"\" value=\"Inactive\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveUser\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted,computed } from 'vue';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\nimport { ElMessage } from 'element-plus';\r\n\r\n\r\nconst query = ref('');\r\n// \r\nconst filteredUserRes = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  return userData.value.filter(user => \r\n    (user.id && user.id.toLowerCase().includes(q)) || \r\n    (user.name && user.name.toLowerCase().includes(q))\r\n  );\r\n});\r\nconst page = ref({ currentPage: 1, pageSize: 15, total: 0 });\r\nconst userData = ref([]);\r\nconst dialogVisible = ref(false);\r\nconst currentUser = ref({ id: '', name: '', password_hash: '', email: '', status: '' });\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  currentUser.value = { id: '', name: '', password_hash: '', email: '', status: '' };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst openEditDialog = (user) => {\r\n  isEditMode.value = true;\r\n  currentUser.value = { ...user };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst saveUser = async () => {\r\n  try {\r\n    if (isEditMode.value) {\r\n      await ReferenceDataService.updateUser(currentUser.value);\r\n      ElMessage.success('');\r\n    } else {\r\n      await ReferenceDataService.addUser(currentUser.value);\r\n      ElMessage.success('');\r\n    }\r\n    dialogVisible.value = false;\r\n    // Refresh data\r\n    const userRes = await ReferenceDataService.getUserData();\r\n    userData.value = userRes.data;\r\n    search();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deleteUser(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const userRes = await ReferenceDataService.getUserData();\r\n    userData.value = userRes.data;\r\n    search();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst search = () => {\r\n  page.value.currentPage = 1;\r\n};\r\n\r\n\r\nonMounted(async () => {\r\n  try {\r\n\r\n    const userRes = await ReferenceDataService.getUserData();\r\n    userData.value = userRes.data;\r\n    // console.log(userData.value);\r\n    search();\r\n\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n});\r\n</script>","import script from \"./DAE_UserTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_UserTable.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"tool-bar\"  style=\"display: flex;justify-content: left;height:2.5rem;margin-right: 10px;margin-bottom:1rem;gap:1rem;\">\r\n      <el-input v-model=\"query\" placeholder=\" or \" style=\"width: 10rem; margin-right: 10px;\"></el-input>\r\n\r\n      <el-button type=\"success\"  @click=\"openAddDialog\" style=\"height:2.5rem; font-size:1rem\" round>\r\n        <el-icon>\r\n          <Plus />\r\n        </el-icon> \r\n      </el-button>\r\n    </div>\r\n\r\n\r\n<el-table :data=\"filteredEmpRes\" style=\"width: 100%;\" :row-class-name=\"getRowClass\">\r\n      <el-table-column prop=\"id\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\"  width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"en_name\" label=\"English Name\"  width=\"120\"></el-table-column>\r\n    <el-table-column label=\"\"  width=\"130\">\r\n        <template #default=\"scope\">\r\n          <span class=\"dept\">\r\n            <DeptIdToName mode=\"Description\" :dept-id=\"scope.row.dpt_id\" />\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\"  width=\"150\">\r\n        <template #default=\"scope\">\r\n          <span class=\"title\">\r\n            <TitleIdToName :title-id=\"scope.row.title_id\" mode=\"Description\" />\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"ext_group\" label=\"\"  width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"ext_num\" label=\"\"  width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"area_id\" label=\"\"  width=\"100\">\r\n        <template #default=\"scope\">\r\n          <span class=\"dept\">\r\n            <AreaIdToName :areaId=\"scope.row.area_id\"></AreaIdToName>\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"email\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"startDate\" label=\"\" width=\"120\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.startDate ? new Date(scope.row.startDate).toLocaleDateString('zh-TW') : '' }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"endDate\" label=\"\" width=\"120\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.endDate ? new Date(scope.row.endDate).toLocaleDateString('zh-TW') : '' }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"birthday\" label=\"\" width=\"120\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.birthday ? new Date(scope.row.birthday).toLocaleDateString('zh-TW') : '' }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"sex\" label=\"\" width=\"80\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.sex === 'M' ? '' : scope.row.sex === 'F' ? '' : scope.row.sex }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"emp_status\" label=\"\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.emp_status === 'Active' ? '' : scope.row.emp_status === 'Inactive' ? '' : scope.row.emp_status }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(scope.row)\"></el-button>\r\n          <el-button type=\"danger\" @click=\"handleDelete(scope.row)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" style=\"width: 20rem\">\r\n      <el-form :model=\"editForm\" ref=\"editFormRef\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"\" prop=\"id\">\r\n          <el-input v-model=\"editForm.id\" :disabled=\"isEditMode\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.en_name\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\" prop=\"dpt_id\">\r\n          <TreeSelectDepartment v-model=\"editForm.dpt_id\" size=\"middle\" style=\"width: 100%;\" />\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\" prop=\"title_id\">\r\n          <TreeSelectTitle v-model=\"editForm.title_id\" size=\"middle\" style=\"width: 100%;\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.ext_group\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.ext_num\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\" prop=\"area_id\">\r\n          <AreaSelectTitle v-model=\"editForm.area_id\" style=\"width: 100%;\"></AreaSelectTitle>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.email\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-date-picker\r\n            v-model=\"editForm.startDate\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            style=\"width: 100%;\"\r\n            format=\"YYYY/MM/DD\"\r\n            value-format=\"YYYY-MM-DDTHH:mm:ss\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-date-picker\r\n            v-model=\"editForm.endDate\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            style=\"width: 100%;\"\r\n            format=\"YYYY/MM/DD\"\r\n            value-format=\"YYYY-MM-DDTHH:mm:ss\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-date-picker\r\n            v-model=\"editForm.birthday\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            style=\"width: 100%;\"\r\n            format=\"YYYY/MM/DD\"\r\n            value-format=\"YYYY-MM-DDTHH:mm:ss\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-select v-model=\"editForm.sex\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option label=\"\" value=\"M\"></el-option>\r\n            <el-option label=\"\" value=\"F\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"emp_status\">\r\n          <el-select v-model=\"editForm.emp_status\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option label=\"\" value=\"Active\"></el-option>\r\n            <el-option label=\"\" value=\"Inactive\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\nimport DeptIdToName from '../../Common/IdToName/Dept-IdToName.vue'\r\nimport TitleIdToName from '../../Common/IdToName/Title-IdToName.vue'\r\nimport AreaIdToName from '../../Common/IdToName/Area-IdToName.vue'\r\nimport TreeSelectDepartment from '@/components/Common/TreeSelect-getData/TreeSelect-Department.vue'\r\nimport TreeSelectTitle from '@/components/Common/TreeSelect-getData/TreeSelect-Title.vue'\r\nimport AreaSelectTitle from '@/components/Common/TreeSelect-getData/TreeSelect-Area.vue'\r\n\r\nconst query = ref('');\r\nconst empRes = ref([]);\r\nconst editForm = ref({});\r\nconst dialogVisible = ref(false);\r\nconst editFormRef = ref(null);\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  editForm.value = {\r\n    id: '',\r\n    name: '',\r\n    en_name: '',\r\n    dpt_id: null,\r\n    title_id: null,\r\n    ext_group: '',\r\n    ext_num: '',\r\n    area_id: null,\r\n    email: '',\r\n    startDate: null,\r\n    endDate: null,\r\n    birthday: null,\r\n    sex: '',\r\n    emp_status: 'Active',\r\n  };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst rules = {\r\nid: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    {\r\n      validator: (rule, value, callback) => {\r\n        const regex = /^(TW|OP)\\d{4}$/;\r\n        if (regex.test(value)) {\r\n          callback();\r\n        } else {\r\n          callback(new Error('\"TW\"\"OP\" ,6'));\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  name: [{ required: true, message: '', trigger: 'blur' }],\r\n  dpt_id: [{ required: true, message: '', trigger: 'change' }],\r\n  title_id: [{ required: true, message: '', trigger: 'change' }],\r\n  area_id: [{ required: true, message: '', trigger: 'change' }],\r\n  emp_status: [{ required: true, message: '', trigger: 'change' }],\r\n};\r\n\r\n\r\nconst handleEdit = (row) => {\r\n  isEditMode.value = true;\r\n  editForm.value = { ...row }; // \r\n  dialogVisible.value = true; // \r\n};\r\n\r\n\r\nconst filteredEmpRes = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  return empRes.value.filter(emp => \r\n    (emp.id && emp.id.toLowerCase().includes(q)) || \r\n    (emp.name && emp.name.toLowerCase().includes(q))\r\n  );\r\n});\r\n\r\n\r\nconst submitEdit = async () => {\r\n  if (!editFormRef.value) return;\r\n  try {\r\n    await editFormRef.value.validate(async (valid) => {\r\n      if (valid) {\r\n        if (isEditMode.value) {\r\n          await ReferenceDataService.updateEmployeeData(editForm.value);\r\n          ElMessage.success('');\r\n          dialogVisible.value = false; // \r\n        } else {\r\n          // console.log(editForm.value);\r\n          try {\r\n            let res = await ReferenceDataService.addEmployeeData(editForm.value); //  POST API\r\n            if(res){\r\n              ElMessage.success('');\r\n              dialogVisible.value = false; // \r\n            }\r\n          } catch (error) {\r\n            if (error.response && error.response.status === 409) {\r\n              ElMessage.error('');\r\n            } else {\r\n              throw error; //  catch \r\n            }\r\n          }\r\n        }\r\n        \r\n        const res = await ReferenceDataService.getEmployeeData(); // \r\n        empRes.value = res.data;\r\n      } else {\r\n        ElMessage.error('');\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + error.message);\r\n  }\r\n};\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    });\r\n    await ReferenceDataService.deleteEmployeeData(row.id);\r\n    ElMessage.success('');\r\n    const res = await ReferenceDataService.getEmployeeData(); // \r\n    empRes.value = res.data;\r\n  } catch (error) {\r\n    if (error !== 'cancel') { // \r\n      console.error(':', error);\r\n      ElMessage.error(': ' + error.message);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nonMounted(async () => {\r\n  const res = await ReferenceDataService.getEmployeeData();\r\n  empRes.value = res.data;\r\n  // console.log(empRes.value);\r\n\r\n});\r\n\r\nconst getRowClass = (data) => {\r\n  \r\n  return data.row.emp_status === 'Inactive' ? 'inactive-row' : '';\r\n};\r\n</script>\r\n<style scoped>\r\n::v-deep .inactive-row {\r\n  background-color: #ffcccc; /*  */\r\n}\r\n</style>","import script from \"./DAE_EmployeeTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_EmployeeTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_EmployeeTable.vue?vue&type=style&index=0&id=5b5606d1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b5606d1\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"tool-bar\"  style=\"display: flex;justify-content: left;height:2.5rem;margin-right: 10px;margin-bottom:1rem;gap:1rem;\">\r\n    <el-input v-model=\"query\" placeholder=\" ID \" style=\"width: 10rem; margin-right: 10px;\"></el-input>\r\n\r\n      <el-button type=\"success\"  @click=\"openAddDialog\" style=\"height:2.5rem; font-size:1rem\" round>\r\n        <el-icon>\r\n          <Plus />\r\n        </el-icon> \r\n      </el-button>\r\n    </div>\r\n    <el-table :data=\"empRes\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"remark\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"page\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"module\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"action\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"isActive\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"createdAt\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"createdBy\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"updatedAt\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"updatedBy\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"parentPermissionId\" label=\" ID\"></el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"openEditDialog(scope.row)\"></el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" width=\"500px\">\r\n      <el-form :model=\"currentPermission\" label-width=\"120px\">\r\n        <el-form-item label=\"ID\" v-if=\"isEditMode\">\r\n          <el-input v-model=\"currentPermission.id\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.remark\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.page\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.module\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.action\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.isActive\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.createdAt\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.createdBy\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.updatedAt\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentPermission.updatedBy\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentPermission.parentPermissionId\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"savePermission\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\nimport { ElMessage } from 'element-plus';\r\nconst query = ref('');\r\nconst page = ref({ currentPage: 1, pageSize: 15, total: 0 });\r\nconst empRes = ref([]);\r\nconst dialogVisible = ref(false);\r\nconst currentPermission = ref({\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  remark: '',\r\n  page: '',\r\n  module: '',\r\n  action: '',\r\n  isActive: '',\r\n  createdAt: '',\r\n  createdBy: '',\r\n  updatedAt: '',\r\n  updatedBy: '',\r\n  parentPermissionId: null\r\n});\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  currentPermission.value = {\r\n    id: '',\r\n    name: '',\r\n    description: '',\r\n    remark: '',\r\n    page: '',\r\n    module: '',\r\n    action: '',\r\n    isActive: '',\r\n    createdAt: '',\r\n    createdBy: '',\r\n    updatedAt: '',\r\n    updatedBy: '',\r\n    parentPermissionId: null\r\n  };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst openEditDialog = (permission) => {\r\n  isEditMode.value = true;\r\n  currentPermission.value = { ...permission };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst savePermission = async () => {\r\n  try {\r\n    if (isEditMode.value) {\r\n      await ReferenceDataService.updatePermission(currentPermission.value); //  API\r\n      ElMessage.success('');\r\n    } else {\r\n      await ReferenceDataService.addPermission(currentPermission.value); //  API\r\n      ElMessage.success('');\r\n    }\r\n    dialogVisible.value = false;\r\n    // Refresh data\r\n    const res = await ReferenceDataService.getPermissionData(); //  getPermissionData()\r\n    empRes.value = res.data;\r\n    search();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deletePermission(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const res = await ReferenceDataService.getPermissionData();\r\n    empRes.value = res.data;\r\n    search();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst search = () => {\r\n  page.value.currentPage = 1;\r\n};\r\n\r\nonMounted(async() => {\r\n    const res = await ReferenceDataService.getPermissionData();\r\n    empRes.value = res.data;\r\n    // console.log(empRes.value);\r\n    search();\r\n});\r\n</script>","import script from \"./DAE_PermissionTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_PermissionTable.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-input v-model=\"query\" placeholder=\" ID \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n\r\n    <el-table :data=\"filteredTitleRes\" style=\"width: 100%;\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"en_name\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"sortId\" label=\" ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"grade\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"level\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column label=\"\" width=\"180\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(scope.row)\"></el-button>\r\n          <el-button type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" style=\"width: 20rem\">\r\n      <el-form :model=\"editForm\" ref=\"editFormRef\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"ID\" prop=\"id\">\r\n          <el-input v-model=\"editForm.id\" :disabled=\"isEditMode\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.description\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.en_name\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"editForm.sortId\" type=\"number\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.grade\" type=\"number\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.level\" type=\"number\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\n\r\nconst query = ref('');\r\nconst titleRes = ref([]);\r\nconst editForm = ref({});\r\nconst dialogVisible = ref(false);\r\nconst editFormRef = ref(null);\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  editForm.value = {\r\n    id: '',\r\n    name: '',\r\n    description: '',\r\n    en_name: '',\r\n    sortId: 0,\r\n    grade: 0,\r\n    level: 0,\r\n  };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst rules = {\r\n  name: [{ required: true, message: '', trigger: 'blur' }],\r\n};\r\n\r\nconst handleEdit = (row) => {\r\n  isEditMode.value = true;\r\n  editForm.value = { ...row }; // \r\n  dialogVisible.value = true; // \r\n};\r\n\r\n// \r\nconst filteredTitleRes = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  return titleRes.value.filter(title =>\r\n    (title.id && title.id.toLowerCase().includes(q)) ||\r\n    (title.name && title.name.toLowerCase().includes(q))\r\n  );\r\n});\r\n\r\nconst submitEdit = async () => {\r\n  if (!editFormRef.value) return;\r\n  try {\r\n    await editFormRef.value.validate(async (valid) => {\r\n      if (valid) {\r\n        if (isEditMode.value) {\r\n          await ReferenceDataService.updateTitleData(editForm.value);\r\n          ElMessage.success('');\r\n        } else {\r\n          await ReferenceDataService.addTitleData(editForm.value); //  POST API\r\n          ElMessage.success('');\r\n        }\r\n        dialogVisible.value = false; // \r\n        const res = await ReferenceDataService.getTitleData(); // \r\n        titleRes.value = res.data;\r\n      } else {\r\n        ElMessage.error('');\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deleteTitleData(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const res = await ReferenceDataService.getTitleData();\r\n    titleRes.value = res.data;\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  const res = await ReferenceDataService.getTitleData();\r\n  titleRes.value = res.data;\r\n  // console.log(\"titleRes:\",titleRes.value);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n</style>","import script from \"./DAE_TitleTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_TitleTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_TitleTable.vue?vue&type=style&index=0&id=1373a62f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1373a62f\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-input v-model=\"roleQuery\" placeholder=\" ID \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"primary\" @click=\"searchRoles\"></el-button>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n    <el-pagination\r\n      @size-change=\"handleRoleSizeChange\"\r\n      @current-change=\"handleRolePageChange\"\r\n      :current-page=\"rolePage.currentPage\"\r\n      :page-sizes=\"[10, 15, 20, 50]\"\r\n      :page-size=\"rolePage.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"rolePage.total\">\r\n    </el-pagination>\r\n    <el-table :data=\"filteredRoles\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"sort_id\" label=\" ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"created_at\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"remark\" label=\"\"></el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <AreaIdToName :areaId=\"scope.row.area_id\"></AreaIdToName>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <DeptIdToName mode=\"Description\" :dept-id=\"scope.row.dpt_id\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"openEditDialog(scope.row)\"></el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" width=\"500px\">\r\n      <el-form :model=\"currentRole\" label-width=\"120px\">\r\n        <el-form-item label=\"ID\" v-if=\"isEditMode\">\r\n          <el-input v-model=\"currentRole.id\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentRole.sort_id\" type=\"number\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentRole.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentRole.created_at\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentRole.remark\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentRole.area_id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentRole.dpt_id\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveRole\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport ReferenceDataService from '@/service/ReferenceDataService';\r\nimport { ElMessage } from 'element-plus';\r\nimport DeptIdToName from '../../Common/IdToName/Dept-IdToName.vue';\r\nimport AreaIdToName from '../../Common/IdToName/Area-IdToName.vue';\r\n\r\nconst roles = ref([]);\r\nconst roleQuery = ref('');\r\nconst rolePage = ref({ currentPage: 1, pageSize: 15, total: 0 });\r\nconst dialogVisible = ref(false);\r\nconst currentRole = ref({ id: null, sort_id: null, name: '', created_at: '', remark: '', area_id: null, dpt_id: null });\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  currentRole.value = { id: null, sort_id: null, name: '', created_at: '', remark: '', area_id: null, dpt_id: null };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst openEditDialog = (role) => {\r\n  isEditMode.value = true;\r\n  currentRole.value = { ...role };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst saveRole = async () => {\r\n  try {\r\n    if (isEditMode.value) {\r\n      await ReferenceDataService.updateRole(currentRole.value); //  API\r\n      ElMessage.success('');\r\n    } else {\r\n      await ReferenceDataService.addRole(currentRole.value); //  API\r\n      ElMessage.success('');\r\n    }\r\n    dialogVisible.value = false;\r\n    // Refresh data\r\n    const roleRes = await ReferenceDataService.getRoleData();\r\n    roles.value = roleRes.data;\r\n    searchRoles();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deleteRole(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const roleRes = await ReferenceDataService.getRoleData();\r\n    roles.value = roleRes.data;\r\n    searchRoles();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst filteredRoles = computed(() => {\r\n  const query = roleQuery.value.toLowerCase();\r\n  const filtered = roles.value.filter(role =>\r\n    (role.id && role.id.toLowerCase().includes(query)) ||\r\n    (role.name && role.name.toLowerCase().includes(query))\r\n  );\r\n  const start = (rolePage.value.currentPage - 1) * rolePage.value.pageSize;\r\n  const end = start + rolePage.value.pageSize;\r\n  return filtered.slice(start, end);\r\n});\r\n\r\nconst searchRoles = () => {\r\n  const query = roleQuery.value.toLowerCase();\r\n  const filtered = roles.value.filter(role =>\r\n    (role.id && role.id.toLowerCase().includes(query)) ||\r\n    (role.name && role.name.toLowerCase().includes(query))\r\n  );\r\n  rolePage.value.total = filtered.length;\r\n  rolePage.value.currentPage = 1;\r\n};\r\n\r\nconst handleRoleSizeChange = (size) => {\r\n  rolePage.value.pageSize = size;\r\n  rolePage.value.currentPage = 1;\r\n  searchRoles();\r\n};\r\n\r\nconst handleRolePageChange = (page) => {\r\n  rolePage.value.currentPage = page;\r\n};\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const roleRes = await ReferenceDataService.getRoleData();\r\n    roles.value = roleRes.data;\r\n    searchRoles();\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles for DAE_RoleTable here */\r\n</style>","import script from \"./DAE_RoleTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_RoleTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_RoleTable.vue?vue&type=style&index=0&id=bac7e93a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bac7e93a\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-input v-model=\"departmentQuery\" placeholder=\" ID \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"primary\" @click=\"searchDepartments\"></el-button>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n    <el-pagination\r\n      @size-change=\"handleDepartmentSizeChange\"\r\n      @current-change=\"handleDepartmentPageChange\"\r\n      :current-page=\"departmentPage.currentPage\"\r\n      :page-sizes=\"[10, 15, 20, 50]\"\r\n      :page-size=\"departmentPage.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"departmentPage.total\">\r\n    </el-pagination>\r\n    <el-table :data=\"filteredDepartments\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"sortId\" label=\" ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\"></el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <DeptIdToName mode=\"Description\" :dept-id=\"scope.row.p_dpt_id\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"dpt_en_name\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"manager_id\" label=\" ID\">\r\n\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <AreaIdToName :areaId=\"scope.row.area_id\"></AreaIdToName>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"openEditDialog(scope.row)\"></el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" width=\"500px\">\r\n      <el-form :model=\"currentDepartment\" label-width=\"150px\">\r\n        <el-form-item label=\"ID\" v-if=\"isEditMode\">\r\n          <el-input v-model=\"currentDepartment.id\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentDepartment.sortId\" type=\"number\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentDepartment.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentDepartment.p_dpt_id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentDepartment.dpt_en_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentDepartment.manager_id\">\r\n\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentDepartment.area_id\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveDepartment\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport ReferenceDataService from '@/service/ReferenceDataService';\r\nimport { ElMessage } from 'element-plus';\r\nimport DeptIdToName from '../../Common/IdToName/Dept-IdToName.vue';\r\nimport AreaIdToName from '../../Common/IdToName/Area-IdToName.vue';\r\n// import EmployeeIdToName from '../../Common/IdToName/Area-IdToName.vue';\r\nconst departments = ref([]);\r\nconst departmentQuery = ref('');\r\nconst departmentPage = ref({ currentPage: 1, pageSize: 15, total: 0 });\r\nconst dialogVisible = ref(false);\r\nconst currentDepartment = ref({ id: null, sortId: null, name: '', p_dpt_id: null, dpt_en_name: '', manager_id: null, area_id: null });\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  currentDepartment.value = { id: null, sortId: null, name: '', p_dpt_id: null, dpt_en_name: '', manager_id: null, area_id: null };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst openEditDialog = (department) => {\r\n  isEditMode.value = true;\r\n  currentDepartment.value = { ...department };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst saveDepartment = async () => {\r\n  try {\r\n    if (isEditMode.value) {\r\n      await ReferenceDataService.updateDepartment(currentDepartment.value); //  API\r\n      ElMessage.success('');\r\n    } else {\r\n      await ReferenceDataService.addDepartment(currentDepartment.value); //  API\r\n      ElMessage.success('');\r\n    }\r\n    dialogVisible.value = false;\r\n    // Refresh data\r\n    const deptRes = await ReferenceDataService.getDepartmentData();\r\n    departments.value = deptRes.data;\r\n    searchDepartments();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deleteDepartment(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const deptRes = await ReferenceDataService.getDepartmentData();\r\n    departments.value = deptRes.data;\r\n    searchDepartments();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst filteredDepartments = computed(() => {\r\n  const query = departmentQuery.value.toLowerCase();\r\n  const filtered = departments.value.filter(department =>\r\n    (department.id && department.id.toLowerCase().includes(query)) ||\r\n    (department.name && department.name.toLowerCase().includes(query))\r\n  );\r\n  const start = (departmentPage.value.currentPage - 1) * departmentPage.value.pageSize;\r\n  const end = start + departmentPage.value.pageSize;\r\n  return filtered.slice(start, end);\r\n});\r\n\r\nconst searchDepartments = () => {\r\n  const query = departmentQuery.value.toLowerCase();\r\n  const filtered = departments.value.filter(department =>\r\n    (department.id && department.id.toLowerCase().includes(query)) ||\r\n    (department.name && department.name.toLowerCase().includes(query))\r\n  );\r\n  departmentPage.value.total = filtered.length;\r\n  departmentPage.value.currentPage = 1;\r\n};\r\n\r\nconst handleDepartmentSizeChange = (size) => {\r\n  departmentPage.value.pageSize = size;\r\n  departmentPage.value.currentPage = 1;\r\n  searchDepartments();\r\n};\r\n\r\nconst handleDepartmentPageChange = (page) => {\r\n  departmentPage.value.currentPage = page;\r\n};\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const deptRes = await ReferenceDataService.getDepartmentData();\r\n    departments.value = deptRes.data;\r\n    searchDepartments();\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles for DAE_DepartmentTable here */\r\n</style>","import script from \"./DAE_DepartmentTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_DepartmentTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_DepartmentTable.vue?vue&type=style&index=0&id=6c04723c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6c04723c\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-input v-model=\"areaQuery\" placeholder=\" ID \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"primary\" @click=\"searchAreas\"></el-button>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n    <el-pagination\r\n      @size-change=\"handleAreaSizeChange\"\r\n      @current-change=\"handleAreaPageChange\"\r\n      :current-page=\"areaPage.currentPage\"\r\n      :page-sizes=\"[10, 15, 20, 50]\"\r\n      :page-size=\"areaPage.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"areaPage.total\">\r\n    </el-pagination>\r\n    <el-table :data=\"filteredAreas\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"sortId\" label=\" ID\"></el-table-column>\r\n      <el-table-column prop=\"area\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"region\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"nation\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"district\" label=\"\"></el-table-column>\r\n\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"openEditDialog(scope.row)\"></el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" width=\"500px\">\r\n      <el-form :model=\"currentArea\" label-width=\"120px\">\r\n        <el-form-item label=\"ID\" v-if=\"isEditMode\">\r\n          <el-input v-model=\"currentArea.id\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\">\r\n          <el-input v-model=\"currentArea.sortId\" type=\"number\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentArea.area\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentArea.region\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"currentArea.nation\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveArea\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport ReferenceDataService from '@/service/ReferenceDataService';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nconst areas = ref([]);\r\nconst areaQuery = ref('');\r\nconst areaPage = ref({ currentPage: 1, pageSize: 15, total: 0 });\r\nconst dialogVisible = ref(false);\r\nconst currentArea = ref({ id: null, sortId: null, area: '', region: '', nation: '' });\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  currentArea.value = { id: null, sortId: null, area: '', region: '', nation: '' };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst openEditDialog = (area) => {\r\n  isEditMode.value = true;\r\n  currentArea.value = { ...area };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst saveArea = async () => {\r\n  try {\r\n    if (isEditMode.value) {\r\n      await ReferenceDataService.updateArea(currentArea.value); //  API\r\n      ElMessage.success('');\r\n    } else {\r\n      await ReferenceDataService.addArea(currentArea.value); //  API\r\n      ElMessage.success('');\r\n    }\r\n    dialogVisible.value = false;\r\n    // Refresh data\r\n    const areaRes = await ReferenceDataService.getAreaData();\r\n    areas.value = areaRes.data;\r\n    searchAreas();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleDelete = async (id) => {\r\n  try {\r\n    await ReferenceDataService.deleteArea(id); //  API\r\n    ElMessage.success('');\r\n    // Refresh data\r\n    const areaRes = await ReferenceDataService.getAreaData();\r\n    areas.value = areaRes.data;\r\n    searchAreas();\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst filteredAreas = computed(() => {\r\n  const query = areaQuery.value.toLowerCase();\r\n  const filtered = areas.value.filter(area =>\r\n    (area.id && area.id.toLowerCase().includes(query)) ||\r\n    (area.area && area.area.toLowerCase().includes(query))\r\n  );\r\n  const start = (areaPage.value.currentPage - 1) * areaPage.value.pageSize;\r\n  const end = start + areaPage.value.pageSize;\r\n  return filtered.slice(start, end);\r\n});\r\n\r\nconst searchAreas = () => {\r\n  const query = areaQuery.value.toLowerCase();\r\n  const filtered = areas.value.filter(area =>\r\n    (area.id && area.id.toLowerCase().includes(query)) ||\r\n    (area.area && area.area.toLowerCase().includes(query))\r\n  );\r\n  areaPage.value.total = filtered.length;\r\n  areaPage.value.currentPage = 1;\r\n};\r\n\r\nconst handleAreaSizeChange = (size) => {\r\n  areaPage.value.pageSize = size;\r\n  areaPage.value.currentPage = 1;\r\n  searchAreas();\r\n};\r\n\r\nconst handleAreaPageChange = (page) => {\r\n  areaPage.value.currentPage = page;\r\n};\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const areaRes = await ReferenceDataService.getAreaData();\r\n    areas.value = areaRes.data;\r\n    searchAreas();\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles for DAE_AreaTable here */\r\n</style>","import script from \"./DAE_AreaTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_AreaTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_AreaTable.vue?vue&type=style&index=0&id=34ca8dc4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-34ca8dc4\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-input v-model=\"query\" placeholder=\"ID or \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"> WF </el-button>\r\n\r\n    <el-table :data=\"filteredWFRoleRes\" style=\"width: 100%;\" @sort-change=\"handleSortChange\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"500\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\" width=\"200\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"\"  width=\"300\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"sortId\" label=\" ID\" width=\"100\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"isProxy\" label=\"\" width=\"150\" sortable=\"custom\">\r\n        <template #default=\"scope\">\r\n          <span>{{ scope.row.isProxy ? '' : '' }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"\" width=\"300\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(scope.row)\"></el-button>\r\n          <el-button type=\"danger\" @click=\"handleDelete(scope.row)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? ' WF ' : ' WF '\" style=\"width: 25rem\">\r\n      <el-form :model=\"editForm\" ref=\"editFormRef\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"ID\" prop=\"id\">\r\n          <el-input v-model=\"editForm.id\" :disabled=\"isEditMode\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-input v-model=\"editForm.description\" style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\" ID\" prop=\"sortId\">\r\n          <el-input-number v-model=\"editForm.sortId\" :min=\"0\" style=\"width: 100%;\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"isProxy\">\r\n          <el-switch v-model=\"editForm.isProxy\"></el-switch>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\n\r\nconst query = ref('');\r\nconst wfRoleRes = ref([]);\r\nconst editForm = ref({});\r\nconst dialogVisible = ref(false);\r\nconst editFormRef = ref(null);\r\nconst isEditMode = ref(false);\r\nconst sortBy = ref('');\r\nconst sortOrder = ref('');\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  editForm.value = {\r\n    id: '',\r\n    name: '',\r\n    description: '',\r\n    sortId: 0,\r\n    isProxy: false,\r\n  };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst rules = {\r\n  id: [\r\n    { required: true, message: 'ID ', trigger: 'blur' },\r\n  ],\r\n  name: [{ required: true, message: '', trigger: 'blur' }],\r\n  sortId: [{ required: true, message: ' ID ', trigger: 'change' }],\r\n};\r\n\r\nconst handleEdit = (row) => {\r\n  isEditMode.value = true;\r\n  editForm.value = { ...row }; // \r\n  dialogVisible.value = true; // \r\n};\r\n\r\nconst filteredWFRoleRes = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  let result = wfRoleRes.value.filter(role => \r\n    (role.id && role.id.toLowerCase().includes(q)) || \r\n    (role.name && role.name.toLowerCase().includes(q))\r\n  );\r\n\r\n  if (sortBy.value && sortOrder.value) {\r\n    result.sort((a, b) => {\r\n      let aValue = a[sortBy.value];\r\n      let bValue = b[sortBy.value];\r\n\r\n      if (aValue === null || aValue === undefined) aValue = '';\r\n      if (bValue === null || bValue === undefined) bValue = '';\r\n\r\n      if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n        return sortOrder.value === 'ascending' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\r\n      } else {\r\n        return sortOrder.value === 'ascending' ? aValue - bValue : bValue - aValue;\r\n      }\r\n    });\r\n  }\r\n  return result;\r\n});\r\n\r\nconst submitEdit = async () => {\r\n  if (!editFormRef.value) return;\r\n  try {\r\n    await editFormRef.value.validate(async (valid) => {\r\n      if (valid) {\r\n        if (isEditMode.value) {\r\n          await ReferenceDataService.updateWF_RoleData(editForm.value);\r\n          ElMessage.success('');\r\n          dialogVisible.value = false; // \r\n        } else {\r\n          try {\r\n            let res = await ReferenceDataService.addWF_RoleData(editForm.value); //  POST API\r\n            if(res){\r\n              ElMessage.success('');\r\n              dialogVisible.value = false; // \r\n            }\r\n          } catch (error) {\r\n            if (error.response && error.response.status === 409) {\r\n              ElMessage.error(' ID ');\r\n            } else {\r\n              throw error; //  catch \r\n            }\r\n          }\r\n        }\r\n        \r\n        const res = await ReferenceDataService.getWF_RoleData(); // \r\n        wfRoleRes.value = res.data;\r\n      } else {\r\n        ElMessage.error('');\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + error.message);\r\n  }\r\n};\r\n\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    });\r\n    await ReferenceDataService.deleteWF_RoleData(row.id);\r\n    ElMessage.success('');\r\n    const res = await ReferenceDataService.getWF_RoleData(); // \r\n    wfRoleRes.value = res.data;\r\n  } catch (error) {\r\n    if (error !== 'cancel') { // \r\n      console.error(':', error);\r\n      ElMessage.error(': ' + error.message);\r\n    }\r\n  }\r\n};\r\n \r\n onMounted(async () => {\r\n   const res = await ReferenceDataService.getWF_RoleData();\r\n   wfRoleRes.value = res.data;\r\n });\r\n\r\nconst handleSortChange = ({ prop, order }) => {\r\n  sortBy.value = prop;\r\n  sortOrder.value = order;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import script from \"./WF_RoleTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_RoleTable.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template> \r\n  <div>\r\n    <el-input v-model=\"query\" placeholder=\"ID or \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n\r\n    <el-table :data=\"filteredUserRoles\" style=\"width: 100%;\">\r\n      <el-table-column prop=\"userId\" label=\"ID\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"userName\" label=\"\" width=\"150\">\r\n          <template #default=\"scoped\">\r\n              <EmployeeIdToName :employee-id=\"scoped.row.userId\"/>\r\n            </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"roleId\" label=\"ID\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"roleName\" label=\"\" width=\"200\"></el-table-column>\r\n\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(scope.row)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" style=\"width: 20rem\">\r\n      <el-form :model=\"editForm\" ref=\"editFormRef\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"ID\" prop=\"userId\">\r\n          <el-select v-model=\"editForm.userId\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option\r\n              v-for=\"user in users\"\r\n              :key=\"user.id\"\r\n              :label=\"`${user.id} - ${user.name}`\"\r\n              :value=\"user.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"userName\">\r\n          <el-input v-model=\"editForm.userName\" disabled style=\"width: 100%;\">\r\n\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"ID\" prop=\"roleId\">\r\n          <el-select v-model=\"editForm.roleId\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option\r\n              v-for=\"role in roles\"\r\n              :key=\"role.id\"\r\n              :label=\"`${role.id} - ${role.name}`\"\r\n              :value=\"role.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"roleName\">\r\n          <el-input v-model=\"editForm.roleName\" disabled style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n  <div class=\"mt-5\">\r\n    <WF_RoleTable></WF_RoleTable>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed,watch } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\nimport EmployeeIdToName from '../../Common/IdToName/Employee-IdToName.vue'\r\nimport WF_RoleTable from './WF_RoleTable.vue';\r\n\r\nconst query = ref('');\r\nconst userRoles = ref([]);\r\nconst editForm = ref({});\r\nconst dialogVisible = ref(false);\r\nconst editFormRef = ref(null);\r\nconst isEditMode = ref(false);\r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  editForm.value = {\r\n    userId: '',\r\n    roleId: '',\r\n    roleName: '',\r\n  };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst rules = {\r\n  userId: [{ required: true, message: 'ID', trigger: 'blur' }],\r\n  roleId: [{ required: true, message: 'ID', trigger: 'blur' }],\r\n  roleName: [{ required: true, message: '', trigger: 'blur' }],\r\n};\r\n\r\nconst handleEdit = (row) => {\r\n  isEditMode.value = true;\r\n  editForm.value = { ...row }; // \r\n  dialogVisible.value = true; // \r\n};\r\n\r\n// \r\nconst filteredUserRoles = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  return userRoles.value.filter(role => \r\n    (role.userId && role.userId.toLowerCase().includes(q)) || \r\n    (role.roleName && role.roleName.toLowerCase().includes(q))\r\n  );\r\n});\r\n\r\nconst submitEdit = async () => {\r\n  if (!editFormRef.value) return;\r\n  try {\r\n    await editFormRef.value.validate(async (valid) => {\r\n      if (valid) {\r\n        if (isEditMode.value) {\r\n          await ReferenceDataService.updateUserRoleData(editForm.value); //  API\r\n          ElMessage.success('');\r\n        } else {\r\n          await ReferenceDataService.addUserWFRoleData(editForm.value.userId, editForm.value.roleId); //  API\r\n          ElMessage.success('');\r\n        }\r\n        dialogVisible.value = false; // \r\n        const res = await ReferenceDataService.getDAE_RelEIPUserRole_JOIN_WF_RolesData(); // \r\n        userRoles.value = res.data;\r\n      } else {\r\n        ElMessage.error('');\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + error.message);\r\n  }\r\n};\r\n\r\nconst roles= ref([]);\r\nconst users = ref([]);\r\nconst fetchWF_RoleData=async()=>{\r\n  const res = await ReferenceDataService.getWF_RoleData();\r\n  roles.value = res.data;\r\n}\r\n\r\nconst fetchUserData = async() =>{\r\n  const res = await ReferenceDataService.getUserData();\r\n  users.value = res.data; \r\n  // console.log(users.value);\r\n}\r\n\r\nonMounted(async () => {\r\n  const res = await ReferenceDataService.getDAE_RelEIPUserRole_JOIN_WF_RolesData();\r\n  await fetchWF_RoleData();\r\n  await fetchUserData();\r\n  userRoles.value = res.data;\r\n  \r\n});\r\n\r\n//  roleId  roleName\r\nwatch(() => editForm.value.roleId, (newRoleId) => {\r\n  const selectedRole = roles.value.find(role => role.id === newRoleId);\r\n  if (selectedRole) {\r\n    editForm.value.roleName = selectedRole.name;\r\n  } else {\r\n    editForm.value.roleName = ''; // \r\n  }\r\n});\r\n\r\nwatch(() => editForm.value.userId, (newUserId) => {\r\n  const selectedUser = users.value.find(user => user.id === newUserId);\r\n  if (selectedUser) {\r\n    editForm.value.userName = selectedUser.name;\r\n  } else {\r\n    editForm.value.userName = '';\r\n  }\r\n});\r\n</script>","import script from \"./DAE_RelEIPUserRole_JOIN_WF_Role.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_RelEIPUserRole_JOIN_WF_Role.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template> \r\n  <div>\r\n    <el-input v-model=\"query\" placeholder=\"ID or  or \" style=\"width: 200px; margin-right: 10px;\"></el-input>\r\n    <el-button type=\"success\" @click=\"openAddDialog\"></el-button>\r\n\r\n    <el-table v-if=\"userRoles.length > 0\" :data=\"filteredUserRoles\" style=\"width: 100%;\" @sort-change=\"handleSortChange\">\r\n      <el-table-column prop=\"userId\" label=\"ID\" width=\"150\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"userName\" label=\"\" width=\"150\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"roleId\" label=\"ID\" width=\"250\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"roleName\" label=\"\" width=\"200\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"roleRemark\" label=\"\" width=\"200\" sortable=\"custom\"></el-table-column>\r\n      <el-table-column prop=\"roleAreaId\" label=\"()\" width=\"200\">\r\n        <template #default=\"scope\">\r\n          <AreaIdToName :areaId=\"scope.row.roleAreaId\"></AreaIdToName>\r\n        </template>\r\n\r\n      </el-table-column>\r\n      <el-table-column prop=\"roleDptId\" label=\"()\" width=\"200\">\r\n        <template #default=\"scope\">\r\n          <DeptIdToName mode=\"Description\" :dept-id=\"scope.row.roleDptId\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(scope.row)\"></el-button>\r\n          <el-button type=\"danger\" @click=\"handleDelete(scope.row)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" :title=\"isEditMode ? '' : ''\" style=\"width: 20rem\">\r\n      <el-form :model=\"editForm\" ref=\"editFormRef\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"ID\" prop=\"userId\">\r\n          <el-select v-model=\"editForm.userId\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option\r\n              v-for=\"user in users\"\r\n              :key=\"user.id\"\r\n              :label=\"`${user.id} - ${user.name}`\"\r\n              :value=\"user.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"userName\">\r\n          <el-input v-model=\"editForm.userName\" disabled style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"ID\" prop=\"roleId\">\r\n          <el-select v-model=\"editForm.roleId\" placeholder=\"\" style=\"width: 100%;\">\r\n            <el-option\r\n              v-for=\"role in roles\"\r\n              :key=\"role.id\"\r\n              :label=\"`${role.id} - ${role.name}`\"\r\n              :value=\"role.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"roleName\">\r\n          <el-input v-model=\"editForm.roleName\" disabled style=\"width: 100%;\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport ReferenceDataService from '@/service/ReferenceDataService.js';\r\nimport DeptIdToName from '../../Common/IdToName/Dept-IdToName.vue'\r\nimport AreaIdToName from '../../Common/IdToName/Area-IdToName.vue'\r\n\r\nconst query = ref('');\r\nconst userRoles = ref([]);\r\nconst editForm = ref({ userId: '', userName: '', roleId: '', roleName: '' });\r\nconst dialogVisible = ref(false);\r\nconst editFormRef = ref(null);\r\nconst isEditMode = ref(false);\r\nconst roles = ref([]);\r\nconst users = ref([]);\r\nconst sortColumn = ref(''); // \r\nconst sortOrder = ref('');  // \r\n\r\nconst openAddDialog = () => {\r\n  isEditMode.value = false;\r\n  editForm.value = { userId: '', userName: '', roleId: '', roleName: '' };\r\n  dialogVisible.value = true;\r\n};\r\n\r\nconst rules = {\r\n  userId: [{ required: true, message: 'ID', trigger: 'change' }],\r\n  roleId: [{ required: true, message: 'ID', trigger: 'change' }],\r\n};\r\n\r\nconst handleEdit = (row) => {\r\n  isEditMode.value = true;\r\n  editForm.value = { ...row }; // \r\n  dialogVisible.value = true; // \r\n};\r\n\r\nconst handleSortChange = ({ prop, order }) => {\r\n  sortColumn.value = prop;\r\n  sortOrder.value = order;\r\n};\r\n\r\nconst filteredUserRoles = computed(() => {\r\n  const q = query.value.toLowerCase();\r\n  let data = userRoles.value.filter(role =>\r\n    (role.userId && role.userId.toLowerCase().includes(q)) ||\r\n    (role.userName && role.userName.toLowerCase().includes(q)) ||\r\n    (role.roleName && role.roleName.toLowerCase().includes(q))\r\n  );\r\n\r\n  if (sortColumn.value && sortOrder.value) {\r\n    data = data.sort((a, b) => {\r\n      const aValue = a[sortColumn.value];\r\n      const bValue = b[sortColumn.value];\r\n\r\n      if (aValue === null || aValue === undefined) return sortOrder.value === 'ascending' ? -1 : 1;\r\n      if (bValue === null || bValue === undefined) return sortOrder.value === 'ascending' ? 1 : -1;\r\n\r\n      if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n        return sortOrder.value === 'ascending' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\r\n      } else {\r\n        return sortOrder.value === 'ascending' ? aValue - bValue : bValue - aValue;\r\n      }\r\n    });\r\n  }\r\n  return data;\r\n});\r\n\r\nconst submitEdit = async () => {\r\n  if (!editFormRef.value) return;\r\n  try {\r\n    await editFormRef.value.validate(async (valid) => {\r\n      if (valid) {\r\n        if (isEditMode.value) {\r\n          await ReferenceDataService.updateUserRoleData(editForm.value); //  API\r\n          ElMessage.success('');\r\n        } else {\r\n          await ReferenceDataService.addUserWFRoleData(editForm.value.userId, editForm.value.roleId); //  API\r\n          ElMessage.success('');\r\n        }\r\n        dialogVisible.value = false; // \r\n        const res = await ReferenceDataService.getRelUserRole(); // \r\n        userRoles.value = res.data;\r\n      } else {\r\n        ElMessage.error('');\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + error.message);\r\n  }\r\n};\r\n\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    });\r\n    await ReferenceDataService.deleteUserWFRoleData(row.userId, row.roleId);\r\n    ElMessage.success('');\r\n    const res = await ReferenceDataService.getRelUserRole(); // \r\n    userRoles.value = res.data;\r\n  } catch (error) {\r\n    if (error !== 'cancel') { // \r\n      console.error(':', error);\r\n      ElMessage.error(': ' + error.message);\r\n    }\r\n  }\r\n};\r\n \r\n const fetchRoleData = async () => {\r\n   const res = await ReferenceDataService.getRoleData();\r\n   roles.value = res.data;\r\n };\r\n\r\nconst fetchUserData = async () => {\r\n  const res = await ReferenceDataService.getUserData();\r\n  users.value = res.data;\r\n};\r\n\r\nonMounted(async () => {\r\n  await fetchRoleData();\r\n  await fetchUserData();\r\n  const res = await ReferenceDataService.getRelUserRole();\r\n  // console.log(\"onMounted:\",res.data);\r\n  userRoles.value = res.data;\r\n});\r\n\r\n//  userId  userName\r\nwatch(() => editForm.value.userId, (newUserId) => {\r\n  const selectedUser = users.value.find(user => user.id === newUserId);\r\n  editForm.value.userName = selectedUser ? selectedUser.name : '';\r\n});\r\n\r\n//  roleId  roleName\r\nwatch(() => editForm.value.roleId, (newRoleId) => {\r\n  const selectedRole = roles.value.find(role => role.id === newRoleId);\r\n  editForm.value.roleName = selectedRole ? selectedRole.name : '';\r\n});\r\n</script>","import script from \"./DAE_Rel_UserRole.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_Rel_UserRole.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"audit-events-container\">\r\n    <!--  -->\r\n    <div class=\"search-section\">\r\n      <el-card class=\"search-card\">\r\n        <div class=\"search-form\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\">\r\n              <div class=\"form-item\">\r\n                <label class=\"form-label\">:</label>\r\n                <el-date-picker\r\n                  v-model=\"searchParams.from\"\r\n                  type=\"datetime\"\r\n                  placeholder=\"\"\r\n                  format=\"YYYY-MM-DD HH:mm:ss\"\r\n                  value-format=\"YYYY-MM-DDTHH:mm:ss\"\r\n                  style=\"width: 100%\"\r\n                />\r\n              </div>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <div class=\"form-item\">\r\n                <label class=\"form-label\">:</label>\r\n                <el-date-picker\r\n                  v-model=\"searchParams.to\"\r\n                  type=\"datetime\"\r\n                  placeholder=\"\"\r\n                  format=\"YYYY-MM-DD HH:mm:ss\"\r\n                  value-format=\"YYYY-MM-DDTHH:mm:ss\"\r\n                  style=\"width: 100%\"\r\n                />\r\n              </div>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <div class=\"form-item\">\r\n                <label class=\"form-label\">:</label>\r\n                <el-input-number\r\n                  v-model=\"searchParams.top\"\r\n                  :min=\"1\"\r\n                  :max=\"10000\"\r\n                  placeholder=\"\"\r\n                  style=\"width: 100%\"\r\n                />\r\n              </div>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <div class=\"form-item\">\r\n                <el-button \r\n                  type=\"primary\" \r\n                  @click=\"fetchAuditEvents\"\r\n                  :loading=\"loading\"\r\n                  style=\"width: 100%\"\r\n                >\r\n                  <el-icon><Search /></el-icon>\r\n                  \r\n                </el-button>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"table-section\">\r\n      <el-card class=\"table-card\">\r\n        <template #header>\r\n          <div class=\"table-header\">\r\n            <h3>\r\n              <el-icon><Monitor /></el-icon>\r\n              \r\n            </h3>\r\n            <div class=\"table-info\">\r\n              <span> {{ auditEvents.length }} </span>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <el-table\r\n          :data=\"auditEvents\"\r\n          v-loading=\"loading\"\r\n          stripe\r\n          border\r\n          height=\"600\"\r\n          style=\"width: 100%\"\r\n          :default-sort=\"{ prop: 'event_time_TW', order: 'descending' }\"\r\n        >\r\n          <el-table-column\r\n            prop=\"event_time_TW\"\r\n            label=\" ()\"\r\n            width=\"180\"\r\n            sortable\r\n          >\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatDateTime(row.event_time_TW) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"event_time_UTC\"\r\n            label=\" (UTC)\"\r\n            width=\"180\"\r\n            sortable\r\n          >\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatDateTime(row.event_time_UTC) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"action_id\"\r\n            label=\"\"\r\n            width=\"120\"\r\n            align=\"center\"\r\n          >\r\n            <template #default=\"{ row }\">\r\n              <el-tag \r\n                :type=\"getActionTagType(row.action_id)\"\r\n                size=\"small\"\r\n              >\r\n                {{ row.action_id?.trim() }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"succeeded\"\r\n            label=\"\"\r\n            width=\"100\"\r\n            align=\"center\"\r\n          >\r\n            <template #default=\"{ row }\">\r\n              <el-tag \r\n                :type=\"row.succeeded ? 'success' : 'danger'\"\r\n                size=\"small\"\r\n              >\r\n                {{ row.succeeded ? '' : '' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"server_principal_name\"\r\n            label=\"\"\r\n            width=\"150\"\r\n          />\r\n\r\n          <el-table-column\r\n            prop=\"client_ip\"\r\n            label=\" IP\"\r\n            width=\"140\"\r\n          />\r\n\r\n          <el-table-column\r\n            prop=\"application_name\"\r\n            label=\"\"\r\n            min-width=\"200\"\r\n            show-overflow-tooltip\r\n          />\r\n\r\n          <el-table-column\r\n            prop=\"session_id\"\r\n            label=\" ID\"\r\n            width=\"100\"\r\n            align=\"center\"\r\n          />\r\n        </el-table>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search, Monitor } from '@element-plus/icons-vue'\r\nimport EIPService from '../../../service/EIPService'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst auditEvents = ref([])\r\n\r\n// \r\nconst searchParams = ref({\r\n  from: null,\r\n  to: null,\r\n  top: 500\r\n})\r\n\r\n// \r\nconst fetchAuditEvents = async () => {\r\n  loading.value = true\r\n  try {\r\n    const params = {}\r\n    \r\n    // \r\n    if (searchParams.value.from) {\r\n      params.from = searchParams.value.from\r\n    }\r\n    if (searchParams.value.to) {\r\n      params.to = searchParams.value.to\r\n    }\r\n    if (searchParams.value.top) {\r\n      params.top = searchParams.value.top\r\n    }\r\n\r\n    console.log(':', params)\r\n    const response = await EIPService.getAuditEvents(params)\r\n    \r\n    if (response.data) {\r\n      auditEvents.value = response.data\r\n      // ElMessage.success(` ${response.data.length} `)\r\n    } else {\r\n      auditEvents.value = []\r\n      ElMessage.warning('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message))\r\n    auditEvents.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst formatDateTime = (dateTime) => {\r\n  if (!dateTime) return '-'\r\n  try {\r\n    const date = new Date(dateTime)\r\n    return date.toLocaleString('zh-TW', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    })\r\n  } catch (error) {\r\n    return dateTime\r\n  }\r\n}\r\n\r\n// \r\nconst getActionTagType = (actionId) => {\r\n  if (!actionId) return 'info'\r\n  \r\n  const trimmedActionId = actionId.trim()\r\n  switch (trimmedActionId) {\r\n    case 'LGIS':\r\n      return 'success'\r\n    case 'LGO':\r\n      return 'warning'\r\n    case 'LGIF':\r\n      return 'danger'\r\n    default:\r\n      return 'info'\r\n  }\r\n}\r\n\r\n// 24\r\nconst setDefaultTimeRange = () => {\r\n  const now = new Date()\r\n  const yesterday = new Date(now.getTime() - 24 * 60 * 60 * 1000)\r\n  \r\n  searchParams.value.to = now.toISOString().slice(0, 19)\r\n  searchParams.value.from = yesterday.toISOString().slice(0, 19)\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  setDefaultTimeRange()\r\n  fetchAuditEvents()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.audit-events-container {\r\n  padding: 20px;\r\n}\r\n\r\n.search-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.search-card {\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.search-form {\r\n  padding: 10px;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: 500;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.table-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.table-card {\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.table-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.table-header h3 {\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.table-info {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n:deep(.el-table) {\r\n  font-size: 14px;\r\n}\r\n\r\n:deep(.el-table th) {\r\n  background-color: #f5f7fa;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n:deep(.el-table td) {\r\n  padding: 12px 0;\r\n}\r\n\r\n:deep(.el-tag) {\r\n  font-weight: 500;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .audit-events-container {\r\n    padding: 10px;\r\n  }\r\n  \r\n  :deep(.el-col) {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./DAE_AuditEventsTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DAE_AuditEventsTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DAE_AuditEventsTable.vue?vue&type=style&index=0&id=73b07908&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-73b07908\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getWorkflowForms();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching WorkflowForm data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_WorkflowFormTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_WorkflowFormTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_WorkflowFormTable.vue?vue&type=style&index=0&id=307c0de0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-307c0de0\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"documentTypeID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentTypeName\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getDocumentTypes();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching DocumentType data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_DocumentTypeTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_DocumentTypeTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_DocumentTypeTable.vue?vue&type=style&index=0&id=d4fe7dfe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d4fe7dfe\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"workflowID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentTypeID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"workflowName\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"isActive\" label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.isActive ? '' : '' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"remark\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"areaDistrict\" label=\"\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getApprovalWorkflows();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching ApprovalWorkflow data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_ApprovalWorkflowTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_ApprovalWorkflowTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_ApprovalWorkflowTable.vue?vue&type=style&index=0&id=8bda8e6e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8bda8e6e\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"stepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"stepName\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"workflowID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"stepOrder\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"roleID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"condition\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"skipCondition\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"stepType\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          {{ getStepTypeDescription(row.stepType) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"timeout\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"autoApprove\" label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.autoApprove ? '' : '' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"autoReject\" label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.autoReject ? '' : '' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"escalationRuleID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"participantType\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"participantKey\" label=\"Key\" width=\"180\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst StepTypeEnum = {\r\n  0: '',\r\n  1: '',\r\n  2: '',\r\n  3: '',\r\n  4: '',\r\n  5: '',\r\n  6: '',\r\n  7: '',\r\n  8: '',\r\n  9: '',\r\n  99: '',\r\n};\r\n\r\nconst getStepTypeDescription = (value) => {\r\n  return StepTypeEnum[value] || value;\r\n};\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getApprovalSteps_ReferenceData();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching ApprovalStep data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_ApprovalStepTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_ApprovalStepTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_ApprovalStepTable.vue?vue&type=style&index=0&id=976a573c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-976a573c\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"parallelGroupID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"parallelGroupName\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"workflowID\" label=\"ID\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getParallelGroups();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching ParallelGroup data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_ParallelGroupTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_ParallelGroupTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_ParallelGroupTable.vue?vue&type=style&index=0&id=4f330d14&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4f330d14\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"countersignGroupID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"countersignGroupName\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"workflowID\" label=\"ID\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getCountersignGroups();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching CountersignGroup data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_CountersignGroupTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_CountersignGroupTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_CountersignGroupTable.vue?vue&type=style&index=0&id=2a7e8809&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a7e8809\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-button type=\"danger\" @click=\"deleteAllDocument\" v-if=\"false\"></el-button>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"documentID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentTypeID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"creatorID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"applierSupervisorID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"createdDate\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"currentStatus\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"workflowID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"withdrawDeadline\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"withdrawn\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          {{ row.withdrawn ? '' : '' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"currentStepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"urgencyLevel\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"deadline\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"revisionNo\" label=\"\" width=\"100\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\nimport FormService from '@/service/FormService';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getDocuments();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching Document data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst deleteAllDocument =async()=>{\r\n  try{\r\n    const res = await FormService.deleteAllDocument();\r\n    if (res.data){\r\n        ElMessage.success(\" !\");\r\n    }\r\n  }catch (error) {\r\n    console.error('Error deleting All Document data:', error);\r\n  } \r\n}\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_DocumentTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_DocumentTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_DocumentTable.vue?vue&type=style&index=0&id=b9928534&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b9928534\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"recordID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"version\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"stepType\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"stepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"approverID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"action\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          {{ getApprovalActionDescription(row.action) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"comment\" label=\"\"></el-table-column>\r\n      <el-table-column prop=\"actionDate\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"backToStepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"batchID\" label=\"ID\" width=\"180\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst ApprovalAction = {\r\n  0: '',\r\n  1: '',\r\n  2: '',\r\n  3: '',\r\n  4: '',\r\n  5: '',\r\n  6: '',\r\n  7: '/',\r\n  8: '',\r\n  9: '',\r\n};\r\n\r\nconst getApprovalActionDescription = (value) => {\r\n  return ApprovalAction[value] || value;\r\n};\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getApprovalRecords();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching ApprovalRecord data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_ApprovalRecordTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_ApprovalRecordTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_ApprovalRecordTable.vue?vue&type=style&index=0&id=2e592406&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2e592406\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"insertionID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"referenceStepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"insertToStepOrder\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"insertToStepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"position\" label=\"\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"eip_UserID\" label=\"EIPID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"createdBy\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"createdDate\" label=\"\" width=\"180\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getStepInsertions();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching StepInsertion data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_StepInsertionTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_StepInsertionTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_StepInsertionTable.vue?vue&type=style&index=0&id=40a7da70&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-40a7da70\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"logID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"documentID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"stepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"notifiedTo\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"channel\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"sentAt\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"stepType\" label=\"\" width=\"120\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getNotificationLogs();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching NotificationLog data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_NotificationLogTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_NotificationLogTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_NotificationLogTable.vue?vue&type=style&index=0&id=35cdcc65&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-35cdcc65\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"recipientID\" label=\"ID\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"documentNotificationID\" label=\"ID\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"recipientType\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"recipientReferenceID\" label=\"ID\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getDocumentNotificationRecipients();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching DocumentNotificationRecipient data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_DocumentNotificationRecipientTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_DocumentNotificationRecipientTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_DocumentNotificationRecipientTable.vue?vue&type=style&index=0&id=17da6c19&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-17da6c19\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"documentNotificationID\" label=\"ID\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"documentID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"eventType\" label=\"\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"stepID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"createdBy\" label=\"\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"createdAt\" label=\"\" width=\"180\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getDocumentNotifications();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching DocumentNotification data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_DocumentNotificationTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_DocumentNotificationTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_DocumentNotificationTable.vue?vue&type=style&index=0&id=2a813e37&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a813e37\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"countersignGroupID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"memberType\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"memberID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"sortOrder\" label=\"\" width=\"100\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getCountersignGroupMembers();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching CountersignGroupMember data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_CountersignGroupMemberTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_CountersignGroupMemberTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_CountersignGroupMemberTable.vue?vue&type=style&index=0&id=2474f2c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2474f2c0\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <h3></h3>\r\n    <el-table :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%\">\r\n      <el-table-column prop=\"parallelGroupID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"memberType\" label=\"\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"memberID\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"sortOrder\" label=\"\" width=\"100\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport WorkflowService from '@/service/WorkflowService';\r\n\r\nconst tableData = ref([]);\r\nconst loading = ref(true);\r\n\r\nconst fetchData = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const response = await WorkflowService.getParallelGroupMembers();\r\n    tableData.value = response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching ParallelGroupMember data:', error);\r\n    tableData.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any specific styles here */\r\n</style>","import script from \"./WF_ParallelGroupMemberTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WF_ParallelGroupMemberTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WF_ParallelGroupMemberTable.vue?vue&type=style&index=0&id=13bb3b3c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-13bb3b3c\"]])\n\nexport default __exports__","<template>\r\n    <H_UserListBlock sys-mode=\"true\"  @row-selected=\"handleUserSelected\"/>\r\n\r\n  <div class=\"attendance-container\">\r\n    <AttendanceRecord :selectedUser=\"selectedUser\" :sysMode=\"true\" style=\"margin-top:3rem\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref  } from 'vue'\r\nimport AttendanceRecord from '@/components/AttendanceRecord/AttendanceRecord.vue'\r\nimport H_UserListBlock from '@/components/AttendanceRecord/Horizontal-User-List-Block.vue'\r\n\r\nconst selectedUser = ref(null)\r\n\r\n\r\n  const handleUserSelected = async (user,date) => {\r\n      if(!date){\r\n\r\n        //(yyyy-MM)\r\n        const now = new Date();\r\n        now.setMonth(now.getMonth());\r\n        const year = now.getFullYear();\r\n        let monthNumber = now.getMonth() + 1;\r\n        monthNumber = monthNumber < 10 ? '0' + monthNumber : monthNumber;\r\n        date = `${year}-${monthNumber}`\r\n      }\r\n      \r\n      selectedUser.value = user\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.attendance-container {\r\n  display: flex;\r\n  justify-content: center; /*  */\r\n  margin-top: 1rem; /*  */\r\n}\r\n\r\n</style>","import script from \"./sys_AttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sys_AttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./sys_AttendanceRecord.vue?vue&type=style&index=0&id=01237335&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-01237335\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"data-management-container\">\r\n    <!--  -->\r\n    <div class=\"page-header\">\r\n      <h2 class=\"page-title\">\r\n        <el-icon class=\"title-icon\"><Setting /></el-icon>\r\n        DAE \r\n      </h2>\r\n      <p class=\"page-subtitle\"></p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"content-wrapper\">\r\n      <el-tabs \r\n        v-model=\"activeTab\"\r\n        type=\"border-card\" \r\n        class=\"main-tabs\"\r\n        tab-position=\"top\"\r\n      >\r\n        <!--  -->\r\n        <el-tab-pane name=\"users\" >\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><User /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_UserTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"employees\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Avatar /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_EmployeeTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"permissions\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Key /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_PermissionTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"user-roles\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><UserFilled /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_RelUserRole/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"roles\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Management /></el-icon>\r\n              EIP\r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_RoleTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"titles\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Medal /></el-icon>\r\n              /\r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_TitleTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"departments\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><OfficeBuilding /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_DepartmentTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"areas\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Location /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_AreaTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane name=\"audit-events\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Monitor /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <DAE_AuditEventsTable/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <!--  -->\r\n        <el-tab-pane name=\"workflow\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><DocumentChecked /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"workflow-container\">\r\n            <el-tabs\r\n              v-model=\"activeWorkflowTab\"\r\n              tab-position=\"left\"\r\n              class=\"workflow-tabs\"\r\n            >\r\n              <el-tab-pane name=\"document\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Document /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_DocumentTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"documentType\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Files /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_DocumentTypeTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"relEIPUserRoleJoinWFRole\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Lock /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <DAE_RelEIPUserRole_JOIN_WF_Role/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"workflowForm\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><EditPen /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_WorkflowFormTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"approvalWorkflow\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Connection /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_ApprovalWorkflowTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"approvalStep\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Position /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_ApprovalStepTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"approvalRecord\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Notebook /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_ApprovalRecordTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"stepInsertion\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Plus /></el-icon>\r\n                    ()\r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_StepInsertionTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"notificationLog\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Bell /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_NotificationLogTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"documentNotificationRecipient\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Message /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_DocumentNotificationRecipientTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"documentNotification\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><ChatDotRound /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_DocumentNotificationTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"countersignGroup\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Grid /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_CountersignGroupTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"countersignGroupMember\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Postcard /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_CountersignGroupMemberTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"parallelGroup\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Share /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_ParallelGroupTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n              <el-tab-pane name=\"parallelGroupMember\">\r\n                <template #label>\r\n                  <span class=\"sub-tab-label\">\r\n                    <el-icon><Coordinate /></el-icon>\r\n                    \r\n                  </span>\r\n                </template>\r\n                <div class=\"sub-table-container\">\r\n                  <WF_ParallelGroupMemberTable/>\r\n                </div>\r\n              </el-tab-pane>\r\n\r\n            </el-tabs>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <!--  -->\r\n        <el-tab-pane name=\"attendance\">\r\n          <template #label>\r\n            <span class=\"tab-label\">\r\n              <el-icon><Clock /></el-icon>\r\n              \r\n            </span>\r\n          </template>\r\n          <div class=\"table-container\">\r\n            <AttendanceRecord_Management/>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n      </el-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { \r\n  Setting, User, Avatar, Key, UserFilled, Management, Medal, \r\n  OfficeBuilding, Location, DocumentChecked, Clock, Document, \r\n  Files, Lock, EditPen, Connection, Position, Notebook, Plus, \r\n  Bell, Message, ChatDotRound, Grid, Postcard, Share, Coordinate,\r\n  Monitor\r\n} from '@element-plus/icons-vue'\r\n\r\n// \r\nconst activeTab = ref('users')\r\nconst activeWorkflowTab = ref('document') // \r\n\r\nimport DAE_UserTable from './sys_DAE_Data_Table/DAE_UserTable.vue'\r\nimport DAE_EmployeeTable from './sys_DAE_Data_Table/DAE_EmployeeTable.vue'\r\nimport DAE_PermissionTable from './sys_DAE_Data_Table/DAE_PermissionTable.vue'\r\nimport DAE_TitleTable from './sys_DAE_Data_Table/DAE_TitleTable.vue';\r\nimport DAE_RoleTable from './sys_DAE_Data_Table/DAE_RoleTable.vue';\r\nimport DAE_DepartmentTable from './sys_DAE_Data_Table/DAE_DepartmentTable.vue';\r\nimport DAE_AreaTable from './sys_DAE_Data_Table/DAE_AreaTable.vue';\r\nimport DAE_RelEIPUserRole_JOIN_WF_Role from './sys_DAE_Data_Table/DAE_RelEIPUserRole_JOIN_WF_Role.vue';\r\nimport DAE_RelUserRole from './sys_DAE_Data_Table/DAE_Rel_UserRole.vue'\r\nimport DAE_AuditEventsTable from './sys_DAE_Data_Table/DAE_AuditEventsTable.vue'\r\nimport WF_WorkflowFormTable from './sys_DAE_Data_Table/WF_WorkflowFormTable.vue'\r\nimport WF_DocumentTypeTable from './sys_DAE_Data_Table/WF_DocumentTypeTable.vue'\r\nimport WF_ApprovalWorkflowTable from './sys_DAE_Data_Table/WF_ApprovalWorkflowTable.vue'\r\nimport WF_ApprovalStepTable from './sys_DAE_Data_Table/WF_ApprovalStepTable.vue'\r\nimport WF_ParallelGroupTable from './sys_DAE_Data_Table/WF_ParallelGroupTable.vue'\r\nimport WF_CountersignGroupTable from './sys_DAE_Data_Table/WF_CountersignGroupTable.vue'\r\nimport WF_DocumentTable from './sys_DAE_Data_Table/WF_DocumentTable.vue'\r\nimport WF_ApprovalRecordTable from './sys_DAE_Data_Table/WF_ApprovalRecordTable.vue'\r\nimport WF_StepInsertionTable from './sys_DAE_Data_Table/WF_StepInsertionTable.vue'\r\nimport WF_NotificationLogTable from './sys_DAE_Data_Table/WF_NotificationLogTable.vue'\r\nimport WF_DocumentNotificationRecipientTable from './sys_DAE_Data_Table/WF_DocumentNotificationRecipientTable.vue'\r\nimport WF_DocumentNotificationTable from './sys_DAE_Data_Table/WF_DocumentNotificationTable.vue'\r\nimport WF_CountersignGroupMemberTable from './sys_DAE_Data_Table/WF_CountersignGroupMemberTable.vue'\r\nimport WF_ParallelGroupMemberTable from './sys_DAE_Data_Table/WF_ParallelGroupMemberTable.vue'\r\nimport AttendanceRecord_Management from './sys_AttendanceRecord.vue'\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n.data-management-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\r\n  padding: 20px;\r\n}\r\n\r\n/*  */\r\n.page-header {\r\n  text-align: center;\r\n  margin-top: 3rem;\r\n  margin-bottom: 30px;\r\n  padding: 30px 0;\r\n  background: linear-gradient(135deg, #55bfe6 0%, #e2e8f0 100%);\r\n\r\n  border-radius: 15px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.page-title {\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  color: #2c3e50;\r\n  margin: 0 0 10px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 15px;\r\n}\r\n\r\n.title-icon {\r\n  font-size: 2.5rem;\r\n  color: #22c55e;\r\n}\r\n\r\n.page-subtitle {\r\n  font-size: 1.1rem;\r\n  color: #7f8c8d;\r\n  margin: 0;\r\n  font-weight: 400;\r\n}\r\n\r\n/*  */\r\n.content-wrapper {\r\n  background: #ffffff;\r\n  border-radius: 15px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  border: 1px solid rgba(0, 0, 0, 0.08);\r\n  color: #1e293b;\r\n}\r\n\r\n/*  */\r\n.data-management-container * {\r\n  color: inherit;\r\n}\r\n\r\n.data-management-container h1,\r\n.data-management-container h2,\r\n.data-management-container h3,\r\n.data-management-container h4,\r\n.data-management-container h5,\r\n.data-management-container h6 {\r\n  color: #1e293b;\r\n}\r\n\r\n.data-management-container p,\r\n.data-management-container span,\r\n.data-management-container div {\r\n  color: #334155;\r\n}\r\n\r\n/*  TAB  */\r\n.main-tabs {\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__header) {\r\n  margin: 0;\r\n  background: linear-gradient(135deg, #1a4d3a 0%, #0f2419 100%);\r\n  border: none;\r\n  padding: 0 20px;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__nav-wrap) {\r\n  background: transparent;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__nav-scroll) {\r\n  background: transparent;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__nav) {\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__item) {\r\n  border: none;\r\n  background: transparent;\r\n  color: rgba(255, 255, 255, 0.8);\r\n  font-weight: 500;\r\n  padding: 0 20px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__item:hover) {\r\n  color: white;\r\n  background: rgba(34, 197, 94, 0.2);\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__item.is-active) {\r\n  color: white;\r\n  background: rgba(34, 197, 94, 0.3);\r\n  border-bottom: 3px solid #22c55e;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__active-bar) {\r\n  display: none;\r\n}\r\n\r\n:deep(.main-tabs .el-tabs__content) {\r\n  padding: 0;\r\n}\r\n\r\n/* TAB  */\r\n.tab-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.tab-label .el-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/*  */\r\n.table-container {\r\n  padding: 30px;\r\n  background: #8ac0f6b0;\r\n  min-height: 600px;\r\n}\r\n\r\n/*  */\r\n.workflow-container {\r\n  background: #f8f9fa;\r\n  min-height: 700px;\r\n}\r\n\r\n.workflow-tabs {\r\n  height: 700px;\r\n  background: transparent;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__header) {\r\n  background: #e9ecef;\r\n  margin: 0;\r\n  width: 250px;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__nav-wrap) {\r\n  background: #e9ecef;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__item) {\r\n  background: transparent;\r\n  border: none;\r\n  color: #495057;\r\n  padding: 15px 20px;\r\n  text-align: left;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__item:hover) {\r\n  background: rgba(189, 220, 203, 0.1);\r\n  color: #22c55e;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__item.is-active) {\r\n  background: #22c55e;\r\n  color: white;\r\n  border-radius: 8px 0 0 8px;\r\n}\r\n\r\n:deep(.workflow-tabs .el-tabs__content) {\r\n  padding: 0;\r\n  background: white;\r\n}\r\n\r\n/*  TAB  */\r\n.sub-tab-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  font-size: 0.9rem;\r\n  width: 100%;\r\n}\r\n\r\n.sub-tab-label .el-icon {\r\n  font-size: 1rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/*  */\r\n.sub-table-container {\r\n  padding: 25px;\r\n  background: #ffffff;\r\n  min-height: 600px;\r\n  color: #1e293b;\r\n  border-radius: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1200px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n  \r\n  .title-icon {\r\n    font-size: 2rem;\r\n  }\r\n  \r\n  .table-container {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .sub-table-container {\r\n    padding: 20px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .data-management-container {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .page-header {\r\n    padding: 20px 0;\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .page-title {\r\n    font-size: 1.5rem;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .title-icon {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .table-container {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .sub-table-container {\r\n    padding: 15px;\r\n  }\r\n  \r\n  :deep(.workflow-tabs .el-tabs__header) {\r\n    width: 200px;\r\n  }\r\n  \r\n  :deep(.main-tabs .el-tabs__item) {\r\n    padding: 0 15px;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .tab-label {\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .sub-tab-label {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .page-title {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  .title-icon {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  :deep(.workflow-tabs .el-tabs__header) {\r\n    width: 180px;\r\n  }\r\n  \r\n  :deep(.main-tabs .el-tabs__item) {\r\n    padding: 0 10px;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .tab-label {\r\n    font-size: 0.8rem;\r\n    gap: 5px;\r\n  }\r\n  \r\n  .sub-tab-label {\r\n    font-size: 0.75rem;\r\n    gap: 8px;\r\n  }\r\n}\r\n\r\n\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/*  */\r\n:deep(.el-tabs__nav-wrap::after) {\r\n  display: none;\r\n}\r\n\r\n:deep(.el-scrollbar__bar) {\r\n  opacity: 0.6;\r\n}\r\n\r\n:deep(.el-scrollbar__thumb) {\r\n  background: rgba(34, 197, 94, 0.3);\r\n  border-radius: 4px;\r\n}\r\n\r\n:deep(.el-scrollbar__thumb:hover) {\r\n  background: rgba(34, 197, 94, 0.5);\r\n}\r\n</style>\r\n","import script from \"./sys_DAE_Data_Management.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sys_DAE_Data_Management.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./sys_DAE_Data_Management.vue?vue&type=style&index=0&id=3a14cffd&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3a14cffd\"]])\n\nexport default __exports__","<template>\r\n  <el-config-provider :locale=\"zhTw\">\r\n  <div class=\"main-content-wrapper\">\r\n\r\n    <div class=\"fancy-wrapper\">\r\n      <span class=\"fancy-title\"></span>\r\n    </div>\r\n\r\n    <div class=\"tool-bar\">\r\n        \r\n        <!--  -->\r\n        <div class=\"region-filter\">\r\n          <el-radio-group v-model=\"selectedRegion\" size=\"default\" @change=\"onRegionChange\" v-if=\"sysMode\">\r\n            <el-radio-button \r\n              v-for=\"region in availableRegions\" \r\n              :key=\"region.value\" \r\n              :value=\"region.value\"\r\n            >\r\n              {{ region.label }}\r\n            </el-radio-button>\r\n          </el-radio-group>\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <div class=\"month-filter\">\r\n          <el-date-picker\r\n            v-model=\"selectedMonth\"\r\n            type=\"month\"\r\n            placeholder=\"\"\r\n            style=\"width: 10rem;\"\r\n            format=\"YYYY/MM\"\r\n            value-format=\"YYYY-MM\"\r\n            @change=\"onMonthChange\"\r\n          />\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"status-filter\">\r\n          <el-select\r\n            v-model=\"selectedStatus\"\r\n            placeholder=\"\"\r\n            style=\"width: 8rem;\"\r\n            @change=\"onStatusChange\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in computedStatusOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"doctype-filter\">\r\n          <el-select\r\n            v-model=\"selectedDocType\"\r\n            placeholder=\"\"\r\n            style=\"width: 8rem;\"\r\n            @change=\"onDocTypeChange\"\r\n          >\r\n            <el-option\r\n              label=\"\"\r\n              value=\"\"\r\n            />\r\n            <el-option\r\n              v-for=\"docType in docTypes\"\r\n              :key=\"docType.documentTypeID\"\r\n              :label=\"docType.documentTypeName\"\r\n              :value=\"docType.documentTypeID\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"search-wrapper\">\r\n          <el-select\r\n            v-model=\"searchField\"\r\n            placeholder=\"\"\r\n            style=\"width: 8rem;\"\r\n            @change=\"onSearchFieldChange\"\r\n          >\r\n            <el-option label=\"\" value=\"documentTypeID\" />\r\n            <el-option label=\"\" value=\"documentID\" />\r\n            <el-option label=\"\" value=\"creatorName\" />\r\n            <el-option label=\"\" value=\"departmentName\" />\r\n            <el-option label=\"\" value=\"createdDate\" />\r\n            <el-option label=\"\" value=\"currentStatusName\" />\r\n          </el-select>\r\n          <el-input\r\n            v-model=\"searchTerm\"\r\n            placeholder=\"\"\r\n            style=\"width: 12rem;\"\r\n            clearable\r\n            @input=\"onSearchInput\"\r\n            @clear=\"onSearchClear\"\r\n          >\r\n            <template #suffix>\r\n              <el-icon><Search /></el-icon>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"sort-wrapper\" v-if=\"false\">\r\n          <!--  -->\r\n          <div class=\"sort-controls primary-sort\">\r\n            <span class=\"sort-label\"></span>\r\n            <el-select\r\n              v-model=\"sortField\"\r\n              placeholder=\"\"\r\n              style=\"width: 9rem;\"\r\n              @change=\"onSortChange\"\r\n              clearable\r\n              @clear=\"onSortClear\"\r\n            >\r\n              <el-option label=\"\" value=\"documentTypeID\" />\r\n              <el-option label=\"\" value=\"documentID\" />\r\n              <el-option label=\"\" value=\"creatorName\" />\r\n              <el-option label=\"\" value=\"departmentName\" />\r\n              <el-option label=\"\" value=\"createdDate\" />\r\n              <el-option label=\"\" value=\"currentStatusName\" />\r\n            </el-select>\r\n            \r\n            <el-button\r\n              :icon=\"sortOrder === 'asc' ? 'ArrowUp' : 'ArrowDown'\"\r\n              @click=\"toggleSortOrder\"\r\n              :type=\"sortField ? 'primary' : 'default'\"\r\n              size=\"default\"\r\n            >\r\n              {{ sortOrder === 'asc' ? '' : '' }}\r\n            </el-button>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"sort-controls secondary-sort\">\r\n            <span class=\"sort-label\"></span>\r\n            <el-select\r\n              v-model=\"secondarySortField\"\r\n              placeholder=\"\"\r\n              style=\"width: 9rem;\"\r\n              @change=\"onSecondarySortChange\"\r\n              clearable\r\n              @clear=\"onSecondarySortClear\"\r\n            >\r\n              <el-option label=\"\" value=\"documentTypeID\" />\r\n              <el-option label=\"\" value=\"documentID\" />\r\n              <el-option label=\"\" value=\"creatorName\" />\r\n              <el-option label=\"\" value=\"departmentName\" />\r\n              <el-option label=\"\" value=\"createdDate\" />\r\n              <el-option label=\"\" value=\"currentStatusName\" />\r\n            </el-select>\r\n            \r\n            <el-button\r\n              :icon=\"secondarySortOrder === 'asc' ? 'ArrowUp' : 'ArrowDown'\"\r\n              @click=\"toggleSecondarySortOrder\"\r\n              :type=\"secondarySortField ? 'success' : 'default'\"\r\n              size=\"default\"\r\n            >\r\n              {{ secondarySortOrder === 'asc' ? '' : '' }}\r\n            </el-button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n          <!--  -->\r\n          <div class=\"pagination-size-control\">\r\n            <el-text></el-text>\r\n            <el-select\r\n              v-model=\"pageSize\"\r\n              placeholder=\"\"\r\n              style=\"width: 5rem;\"\r\n              size=\"small\"\r\n              @change=\"onPageSizeChange\"\r\n            >\r\n              <el-option\r\n                v-for=\"s in [5,10,20,30,50,100]\"\r\n                :key=\"s\"\r\n                :label=\"s\"\r\n                :value=\"s\"\r\n              />\r\n            </el-select>\r\n            <el-text></el-text>\r\n          </div>\r\n          <div class=\"pagination-controls\">\r\n            <el-pagination\r\n              background\r\n              layout=\"prev, pager, next\"\r\n              :total=\"filteredDocs.length\"\r\n              :page-size=\"pageSize\"\r\n              v-model:current-page=\"currentPage\"\r\n              @current-change=\"onPageChange\"\r\n              :page-count=\"Math.ceil(filteredDocs.length / pageSize)\"\r\n            />\r\n          </div>\r\n    </div>\r\n\r\n    <div class=\"workflow\">\r\n      <el-table\r\n        class=\"workflow-table\"\r\n        :data=\"displayedDocs\"\r\n        :style=\"tableStyle\"\r\n        @row-click=\"openDetail\"\r\n        :row-style=\"rowStyle\"\r\n        :loading=\"loading\"\r\n        :show-header=\"false\"\r\n        :row-class-name=\"tableRowClassName\"\r\n        \r\n      >\r\n        <template #empty>\r\n          <el-empty v-if=\"displayedDocs.length === 0 && !loading\">\r\n            <template #description>\r\n              <span style=\"font-size:2rem;\"></span>\r\n            </template>\r\n          </el-empty>\r\n        </template>\r\n        \r\n        <el-table-column v-if=\"props.sysMode\" label=\"\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              @click.stop=\"handleDelete(row.documentID)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column  :width=\"tableColumnWidth\">\r\n          <template #default=\"{ row }\">\r\n            <!--  -->\r\n            <div v-if=\"width < 500\" class=\"mobile-row\">\r\n              <div class=\"mobile-item doc-type\">{{ docTypeMap[row.documentTypeID] || row.documentTypeID }}</div>\r\n              <div class=\"mobile-item doc-id-line\">\r\n                <span class=\"doc-id-title\">: </span>\r\n                <span class=\"doc-id\">{{ row.documentID }}</span>\r\n              </div>\r\n              <div class=\"mobile-item dept-name\">{{ row.departmentName }}</div>\r\n              <div class=\"mobile-item creator-name\">{{ row.creatorName }}</div>\r\n              <div class=\"mobile-item created-date\">{{ formatDateTime(null, null, row.createdDate) }}</div>\r\n              <div class=\"mobile-item status-name\">{{ row.currentStatusName }}</div>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div v-else class=\"desktop-row\">\r\n              <span class=\"doc-type\">{{ docTypeMap[row.documentTypeID] || row.documentTypeID }}</span>\r\n              <span class=\"doc-id-title\">: </span>\r\n              <span class=\"doc-id\">{{ row.documentID }}</span>\r\n              <span class=\"dept-name\">{{ row.departmentName }}</span>\r\n              <span class=\"creator-name\">{{ row.creatorName }}</span>\r\n              <span class=\"created-date\">{{ formatDateTime(null, null, row.createdDate) }}</span>\r\n              <span class=\"status-name\">{{ row.currentStatusName }}</span>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n    </div>\r\n\r\n    <!-- Detail Dialog  -->\r\n    <!--  buttonGroupPosition  \"dialog\" or \"window\"    -->\r\n    <Detail_Related_WF_Dialog\r\n      v-if=\"isDialogVisible\"\r\n      v-model:visible=\"isDialogVisible\"\r\n      :doc=\"selectedDoc\"\r\n      buttonGroupPosition=\"dialog\"\r\n      @refreshList=\"refreshCurrentStatus\"\r\n    />\r\n  </div>\r\n</el-config-provider>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, defineProps, watch } from 'vue'\r\nimport { ElMessageBox, ElMessage } from 'element-plus' //  ElMessageBox  ElMessage\r\nimport WorkflowService from '@/service/WorkflowService'\r\nimport FormService from '@/service/FormService'\r\nimport useIdToName from '@/stores/IdToName'\r\nimport { useUserStore } from '@/stores/user.js'\r\nimport { useAuthStore } from '@/stores/auth.js'\r\nimport { useEmployeeStore } from '@/stores/employee.js'\r\nimport { useAreaStore } from '@/stores/area.js'\r\nimport '@/css/button/wf-button.css'\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs';\r\nimport { Search } from '@element-plus/icons-vue';\r\n\r\nimport Detail_Related_WF_Dialog from '@/components/WorkFlow/WF/Detail_Related_WF_Dialog.vue'\r\nconst props = defineProps({\r\n  sysMode:{\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\nconst userStore = useUserStore()\r\nconst employeeStore = useEmployeeStore()\r\nconst areaStore = useAreaStore()\r\nconst authStore = useAuthStore();\r\nconst permissions = computed(() => authStore.user?.permissions || []);\r\n\r\nimport { useWindowSize } from '@vueuse/core';\r\nconst { width } = useWindowSize(); // \r\n\r\n//  ()\r\nconst tableStyle = computed(() => {\r\n  if (width.value < 500) {\r\n    return {\r\n      height: '40rem',\r\n      width: '10rem',\r\n      alignItems: 'center'\r\n    };\r\n  } else {\r\n    return {\r\n      height: '40rem',\r\n      width: '70rem',  // 65%\r\n      minWidth:'100%',\r\n      maxWidth: '120%',\r\n      alignItems: 'center'\r\n    };\r\n  }\r\n});\r\n\r\n// \r\nconst docs = ref([])\r\nconst docTypes = ref([])\r\nconst loading = ref(true)\r\nconst selectedStatus = ref(props.sysMode ? 4 : 1) //  sysMode \r\nconst selectedRegion = ref('') // \r\nconst selectedMonth = ref(getCurrentMonth()) // \r\nconst selectedDocType = ref('') // \r\nconst pageSize = ref(30)\r\nconst currentPage = ref(1)\r\nconst allDocuments = ref([]) // \r\n\r\n// \r\nconst searchTerm = ref('') // \r\nconst searchField = ref('documentID') // \r\n\r\n// \r\nconst sortField = ref('') // \r\nconst sortOrder = ref('asc') // 'asc' , 'desc' \r\nconst secondarySortField = ref('') // \r\nconst secondarySortOrder = ref('asc') // 'asc' , 'desc' \r\n// const originalDocs = ref([]) // \r\n\r\n//  (YYYY-MM )\r\nfunction getCurrentMonth() {\r\n  const now = new Date()\r\n  const year = now.getFullYear()\r\n  const month = String(now.getMonth() + 1).padStart(2, '0')\r\n  return `${year}-${month}`\r\n}\r\n\r\n// \r\nconst availableRegions = computed(() => {\r\n  if (permissions.value.includes('sys_North')) {\r\n    // \r\n    return [{ label: '', value: '' }];\r\n  } else {\r\n    // \r\n    return [\r\n      { label: '', value: '' },\r\n      { label: '', value: '' },\r\n      { label: '', value: '' }\r\n    ];\r\n  }\r\n});\r\n\r\n// \r\nconst tableColumnWidth = computed(() => {\r\n  return width.value < 500 ? 'auto' : 800;  // 800px\r\n});\r\n\r\n\r\n//  currentStatus \r\nconst statusOptions = [\r\n  { value: 0, label: '', name: 'Related' },\r\n  { value: 1, label: '', name: 'Pending' },\r\n  { value: 2, label: '', name: 'Approved' },\r\n  { value: 3, label: '', name: 'Voided' },\r\n]\r\n\r\nconst sys_statusOptions = [\r\n  { value: 4, label: '', name: 'All' }, \r\n  { value: 5, label: '', name: 'InProgress' }, \r\n  { value: 6, label: '', name: 'Completed' },\r\n\r\n]\r\n\r\n\r\nconst computedStatusOptions = computed(() => {\r\n  return props.sysMode\r\n    ? sys_statusOptions\r\n    : statusOptions\r\n})\r\n\r\n// \r\nconst displayedDocs = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize.value\r\n  return filteredDocs.value.slice(start, start + pageSize.value)\r\n})\r\n\r\n// \r\nconst filteredDocs = computed(() => {\r\n  let filtered = docs.value\r\n  \r\n  // \r\n  if (selectedMonth.value) {\r\n    filtered = filtered.filter(doc => {\r\n      if (!doc.createdDate) return false\r\n      \r\n      const docDate = new Date(doc.createdDate)\r\n      const docYear = docDate.getFullYear()\r\n      const docMonth = String(docDate.getMonth() + 1).padStart(2, '0')\r\n      const docYearMonth = `${docYear}-${docMonth}`\r\n      \r\n      return docYearMonth === selectedMonth.value\r\n    })\r\n  }\r\n  \r\n  // \r\n  if (selectedDocType.value) {\r\n    filtered = filtered.filter(doc => doc.documentTypeID === selectedDocType.value)\r\n  }\r\n  \r\n  // \r\n  if (searchTerm.value.trim()) {\r\n    filtered = filtered.filter(doc => {\r\n      const term = searchTerm.value.trim().toLowerCase()\r\n      \r\n      // \r\n      switch (searchField.value) {\r\n        case 'documentTypeID':\r\n          // eslint-disable-next-line no-case-declarations\r\n          const typeName = docTypeMap.value[doc.documentTypeID] || doc.documentTypeID\r\n          return typeName.toLowerCase().includes(term)\r\n        \r\n        case 'documentID':\r\n          return doc.documentID.toLowerCase().includes(term)\r\n        \r\n        case 'creatorName':\r\n          return doc.creatorName?.toLowerCase().includes(term)\r\n        \r\n        case 'departmentName':\r\n          return doc.departmentName?.toLowerCase().includes(term)\r\n        \r\n        case 'createdDate':\r\n          // eslint-disable-next-line no-case-declarations\r\n          const formattedDate = formatDateTime(null, null, doc.createdDate).toLowerCase()\r\n          return formattedDate.includes(term)\r\n        \r\n        case 'currentStatusName':\r\n          return doc.currentStatusName?.toLowerCase().includes(term)\r\n        \r\n        default:\r\n          return false\r\n      }\r\n    })\r\n  }\r\n  \r\n  // \r\n  if (sortField.value || secondarySortField.value) {\r\n    filtered = [...filtered].sort((a, b) => {\r\n      // \r\n      if (sortField.value) {\r\n        const primaryResult = compareValues(a, b, sortField.value, sortOrder.value)\r\n        if (primaryResult !== 0) return primaryResult\r\n      }\r\n      \r\n      // \r\n      if (secondarySortField.value && sortField.value !== secondarySortField.value) {\r\n        return compareValues(a, b, secondarySortField.value, secondarySortOrder.value)\r\n      }\r\n      \r\n      return 0\r\n    })\r\n  }\r\n  \r\n  return filtered\r\n})\r\n\r\n// \r\nconst formatDateTime = (_row, _column, cellValue) => {\r\n  if (!cellValue) return ''\r\n  const dt = new Date(cellValue)\r\n  const Y = dt.getFullYear()\r\n  const M = String(dt.getMonth() + 1).padStart(2, '0')\r\n  const D = String(dt.getDate()).padStart(2, '0')\r\n  let hour = dt.getHours()\r\n  const apm = hour < 12 ? '' : ''\r\n  let h12 = hour % 12\r\n  if (h12 === 0) h12 = 12\r\n  const h = String(h12).padStart(2, '0')\r\n  const m = String(dt.getMinutes()).padStart(2, '0')\r\n  return `${Y}/${M}/${D} ${apm} ${h}:${m}`\r\n}\r\n\r\n// \r\nconst rowStyle = () => {\r\n  return {\r\n    backgroundColor: 'rgba(212, 255, 244, 0.7)', //  container \r\n    borderRadius: '12px',                        // \r\n    margin: 'rem 0'                           // \r\n  }\r\n}\r\n\r\n// /\r\nconst departmentNameCache = {}\r\nconst employeeNameCache = {}\r\nasync function getDepartmentNameCached(id) {\r\n  if (departmentNameCache[id]) return departmentNameCache[id]\r\n  const name = await useIdToName.getDepartmentName(id)\r\n  departmentNameCache[id] = name || ''\r\n  return departmentNameCache[id]\r\n}\r\nasync function getEmployeeNameCached(id) {\r\n  if (employeeNameCache[id]) return employeeNameCache[id]\r\n  const name = await useIdToName.getEmployeeName(id)\r\n  employeeNameCache[id] = name || ''\r\n  return employeeNameCache[id]\r\n}\r\n\r\n// \r\nconst docTypeMap = computed(() => {\r\n  const map = {}\r\n  docTypes.value.forEach(dt => { map[dt.documentTypeID] = dt.documentTypeName })\r\n  return map\r\n})\r\n\r\n\r\n\r\nconst apiMap = {\r\n  Related:   () => WorkflowService.getUserRelatedDocuments(userStore.userId),\r\n  Pending:   () => WorkflowService.getUserPendingDocuments(userStore.userId),\r\n  Approved:  () => WorkflowService.getUserApprovedDocuments(userStore.userId),\r\n  Voided: () => WorkflowService.getUserVoidedDocuments(userStore.userId),\r\n  All: () => WorkflowService.getAllDocuments(), // \r\n  InProgress: () => WorkflowService.getInProgressDocuments(), // \r\n  Completed: () => WorkflowService.getCompletedDocuments(),  // \r\n}\r\n\r\n\r\n// 2)  fetchDocs\r\nasync function fetchDocs() {\r\n  loading.value = true\r\n  try {\r\n    \r\n    //  name\r\n    const currentOptions = computedStatusOptions.value;\r\n    const { name } = currentOptions.find(o => o.value === selectedStatus.value) || { name: props.sysMode ? 'All' : 'Related' }; //  name 'All'  'Related'\r\n\r\n    var res;\r\n    if(props.sysMode){\r\n      // API\r\n      res  = await (apiMap[name] || apiMap.All)();\r\n      console.log(res.data);\r\n      \r\n      // \r\n      allDocuments.value = res.data || [];\r\n      \r\n      // \r\n      if (permissions.value.includes('sys_North')){\r\n        // \"\"\r\n        selectedRegion.value = '';\r\n        console.log(' sys_North ');\r\n      } else {\r\n        //  \r\n        selectedRegion.value = '';\r\n        console.log('');\r\n      }\r\n      \r\n      // \r\n      res.data = await applyRegionFilter(allDocuments.value);\r\n      \r\n    }else{\r\n      // \r\n      res  = await (apiMap[name] || apiMap.Related)(); //  map \r\n      console.log(res.data);\r\n    }\r\n    // \r\n    const raw = res.data || []\r\n    docs.value = await Promise.all(raw.map(async d => {\r\n      const dept    = await getDepartmentNameCached(d.applicantDepartmentId)\r\n      const creator = await getEmployeeNameCached(d.creatorID)\r\n      return { ...d, departmentName: dept, creatorName: creator }\r\n    }))\r\n  } catch (err) {\r\n    console.error('', err)\r\n    docs.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nasync function fetchDocTypes() {\r\n  const res = await FormService.getDocTypes()\r\n  docTypes.value = res.data || []\r\n}\r\n\r\n\r\n\r\n\r\n// \r\nconst handleDelete = async (documentID) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` ${documentID} `,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    //  documentID  docType (: \"CO\" from \"CO20240904-004\")\r\n    const docTypeMatch = documentID.match(/^([A-Za-z]+)/);\r\n    const docType = docTypeMatch ? docTypeMatch[1] : '';\r\n\r\n    var res = await FormService.deleteFormByDocID(docType, documentID);\r\n    if(res){\r\n      ElMessage({\r\n        type: 'success',\r\n        message: ` ${docType} : ${documentID}`,\r\n      })\r\n    }\r\n    fetchDocs() // \r\n  } catch (error) {\r\n    if (error === 'cancel') {\r\n      ElMessage({\r\n        type: 'info',\r\n        message: '',\r\n      })\r\n    } else {\r\n      ElMessage({\r\n        type: 'error',\r\n        message: `: ${error.message || ''}`,\r\n      })\r\n      console.error('', error)\r\n    }\r\n  }\r\n}\r\n\r\n// select \r\nfunction onStatusChange() {\r\n  fetchDocs()\r\n}\r\n\r\n// \r\nfunction onMonthChange() {\r\n  currentPage.value = 1 // \r\n}\r\n\r\n// \r\nfunction onDocTypeChange() {\r\n  currentPage.value = 1 // \r\n}\r\n\r\n// \r\nfunction compareValues(a, b, field, order) {\r\n  let aValue = a[field]\r\n  let bValue = b[field]\r\n  \r\n  // \r\n  if (field === 'documentTypeID') {\r\n    // \r\n    aValue = docTypeMap.value[a.documentTypeID] || a.documentTypeID\r\n    bValue = docTypeMap.value[b.documentTypeID] || b.documentTypeID\r\n  } else if (field === 'createdDate') {\r\n    // \r\n    aValue = new Date(aValue)\r\n    bValue = new Date(bValue)\r\n  }\r\n  \r\n  //  null/undefined \r\n  if (aValue == null && bValue == null) return 0\r\n  if (aValue == null) return order === 'asc' ? 1 : -1\r\n  if (bValue == null) return order === 'asc' ? -1 : 1\r\n  \r\n  // \r\n  if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n    const result = aValue.localeCompare(bValue, 'zh-TW')\r\n    return order === 'asc' ? result : -result\r\n  }\r\n  \r\n  // /\r\n  if (aValue < bValue) return order === 'asc' ? -1 : 1\r\n  if (aValue > bValue) return order === 'asc' ? 1 : -1\r\n  return 0\r\n}\r\n\r\n// \r\nfunction onSecondarySortChange() {\r\n  currentPage.value = 1\r\n  console.log(`: ${secondarySortField.value}`)\r\n}\r\n\r\nfunction toggleSecondarySortOrder() {\r\n  if (!secondarySortField.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  secondarySortOrder.value = secondarySortOrder.value === 'asc' ? 'desc' : 'asc'\r\n  currentPage.value = 1\r\n  console.log(`: ${secondarySortOrder.value === 'asc' ? '' : ''}`)\r\n}\r\n\r\n// \r\nfunction onSortClear() {\r\n  sortField.value = ''\r\n  sortOrder.value = 'asc'\r\n  currentPage.value = 1\r\n  console.log('')\r\n}\r\n\r\n// \r\nfunction onSecondarySortClear() {\r\n  secondarySortField.value = ''\r\n  secondarySortOrder.value = 'asc'\r\n  currentPage.value = 1\r\n  console.log('')\r\n}\r\n\r\n\r\n\r\n// \r\nconst onRegionChange = async () => {\r\n  console.log(':', selectedRegion.value);\r\n  if (props.sysMode && allDocuments.value.length > 0) {\r\n    // \r\n    const filteredData = await applyRegionFilter(allDocuments.value);\r\n    // \r\n    docs.value = await Promise.all(filteredData.map(async d => {\r\n      const dept = await getDepartmentNameCached(d.applicantDepartmentId)\r\n      const creator = await getEmployeeNameCached(d.creatorID)\r\n      return { ...d, departmentName: dept, creatorName: creator }\r\n    }))\r\n  }\r\n};\r\n\r\n// \r\nconst applyRegionFilter = async (documents) => {\r\n  if (selectedRegion.value === '') {\r\n    return documents;\r\n  }\r\n  \r\n  const filteredDocs = [];\r\n  \r\n  for (const doc of documents) {\r\n    try {\r\n      //  creatorID  area_id\r\n      const areaId = await employeeStore.getEmployeeArea(doc.creatorID);\r\n      \r\n      if (areaId) {\r\n        //  area_id \r\n        const district = await areaStore.getAreaDistrict(areaId);\r\n        \r\n        // \r\n        if (selectedRegion.value === '' && (district === 'North' || district === 'Middle')) {\r\n          filteredDocs.push(doc);\r\n        } else if (selectedRegion.value === '' && district === 'South') {\r\n          filteredDocs.push(doc);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(` creatorID ${doc.creatorID} :`, error);\r\n      // \"\"\r\n      if (selectedRegion.value === '') {\r\n        filteredDocs.push(doc);\r\n      }\r\n    }\r\n  }\r\n  \r\n  console.log(`: ${selectedRegion.value}, : ${filteredDocs.length}`);\r\n  return filteredDocs;\r\n};\r\n\r\nfunction  tableRowClassName({ rowIndex }) {\r\n    return rowIndex === 0 ? 'first-row-padding' : '';\r\n  }\r\n\r\n// \r\nfunction onPageChange(page) {\r\n  currentPage.value = page\r\n}\r\n\r\nfunction onPageSizeChange() { \r\n  currentPage.value = 1 \r\n}\r\n\r\n// \r\nfunction onSearchFieldChange() {\r\n  // \r\n  currentPage.value = 1\r\n  console.log(`: ${searchField.value}`)\r\n}\r\n\r\nfunction onSearchInput() {\r\n  // \r\n  currentPage.value = 1\r\n  console.log(`: ${searchTerm.value}`)\r\n}\r\n\r\nfunction onSearchClear() {\r\n  // \r\n  searchTerm.value = ''\r\n  currentPage.value = 1\r\n  console.log('')\r\n}\r\n\r\n// \r\nfunction onSortChange() {\r\n  // \r\n  currentPage.value = 1\r\n  console.log(`: ${sortField.value}`)\r\n}\r\n\r\nfunction toggleSortOrder() {\r\n  if (!sortField.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\r\n  currentPage.value = 1\r\n  console.log(`: ${sortOrder.value === 'asc' ? '' : ''}`)\r\n}\r\n\r\n// \r\nconst selectedDoc = ref(null)\r\nconst isDialogVisible = ref(false)\r\nconst openDetail=async(row)=> {\r\n  selectedDoc.value = row\r\n  // console.log(\" selectedDoc.value:\" ,  selectedDoc.value);\r\n  isDialogVisible.value = true\r\n}\r\nfunction refreshCurrentStatus() {\r\n  fetchDocs()\r\n}\r\n\r\n// \r\nonMounted(async () => {\r\n  await fetchDocTypes();\r\n  fetchDocs();\r\n})\r\n\r\nwatch(() => props.sysMode, (newVal) => {\r\n  selectedStatus.value = newVal ? 4 : 1; //  sysMode  selectedStatus sysMode (1)\r\n  fetchDocs(); // \r\n}, { immediate: true }); // \r\n</script>\r\n\r\n<style scoped>\r\n.tool-bar {\r\n  display: flex;\r\n  justify-content: center; /*  */\r\n  align-items: center; /*  */\r\n  padding: 15px 20px;\r\n  background: linear-gradient(135deg, #d4fff4, #8CE68D); /*  */\r\n  border-radius: 12px; /*  */\r\n  box-shadow:\r\n    0 4px 20px rgba(140, 230, 141, 0.3), /*  */\r\n    inset 0 0 15px rgba(255, 255, 255, 0.4); /*  */\r\n  border: 2px solid rgba(140, 230, 141, 0.5); /*  */\r\n  gap: 25px; /*  */\r\n  margin-bottom: 20px;\r\n  backdrop-filter: blur(10px); /*  */\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  flex-wrap: wrap; /*  */\r\n}\r\n\r\n/*  */\r\n.search-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem;\r\n  border-radius: 8px;\r\n  background: linear-gradient(135deg, rgba(103, 194, 58, 0.1), rgba(103, 194, 58, 0.05));\r\n  border: 2px solid rgba(103, 194, 58, 0.5);\r\n  box-shadow: 0 2px 8px rgba(103, 194, 58, 0.2);\r\n}\r\n\r\n/*  */\r\n.sort-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.sort-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.8rem 1rem;\r\n  border-radius: 8px;\r\n  border: 2px solid;\r\n  position: relative;\r\n}\r\n\r\n/*  */\r\n.primary-sort {\r\n  background: linear-gradient(135deg, rgba(64, 158, 255, 0.1), rgba(64, 158, 255, 0.05));\r\n  border-color: #409eff;\r\n  box-shadow: 0 2px 8px rgba(64, 158, 255, 0.2);\r\n}\r\n\r\n/*  */\r\n.secondary-sort {\r\n  background: linear-gradient(135deg, rgba(103, 194, 58, 0.1), rgba(103, 194, 58, 0.05));\r\n  border-color: #67c23a;\r\n  box-shadow: 0 2px 8px rgba(103, 194, 58, 0.2);\r\n}\r\n\r\n.sort-label {\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  white-space: nowrap;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.primary-sort .sort-label {\r\n  color: #409eff;\r\n}\r\n\r\n.secondary-sort .sort-label {\r\n  color: #67c23a;\r\n}\r\n\r\n.sort-controls .el-select {\r\n  min-width: 9rem;\r\n}\r\n\r\n.sort-controls .el-button {\r\n  white-space: nowrap;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n/*  */\r\n.sort-controls:hover {\r\n  transform: translateY(-2px);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.primary-sort:hover {\r\n  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);\r\n}\r\n\r\n.secondary-sort:hover {\r\n  box-shadow: 0 4px 12px rgba(103, 194, 58, 0.3);\r\n}\r\n\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .tool-bar {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    padding: 12px 15px;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .region-filter {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .region-filter .el-radio-group {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .month-filter {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .status-filter {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .doctype-filter {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .search-wrapper {\r\n    width: 100%;\r\n    flex-direction: column;\r\n    padding: 0.8rem;\r\n  }\r\n  \r\n  .search-wrapper .el-select,\r\n  .search-wrapper .el-input {\r\n    width: 100% !important;\r\n  }\r\n  \r\n  .sort-wrapper {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    align-items: center;\r\n  }\r\n  \r\n  .sort-controls {\r\n    width: 100%;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .sort-label {\r\n    width: 100%;\r\n    text-align: center;\r\n    margin-bottom: 0.5rem;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  \r\n  .pagination-size-control {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .pagination-controls {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .tool-bar {\r\n    gap: 10px;\r\n    padding: 10px 12px;\r\n  }\r\n  \r\n  .region-filter .el-radio-group {\r\n    gap: 5px;\r\n  }\r\n}\r\n\r\n.month-filter {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  backdrop-filter: blur(5px);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n\r\n.mobile-row {\r\n  display: flex;\r\n  flex-direction: column; /*  */\r\n  gap: 0.3rem; /*  */\r\n  padding: 1rem;\r\n  background: linear-gradient(135deg, rgba(212, 255, 244, 0.8), rgba(255, 255, 255, 0.9));\r\n  border-radius: 12px;\r\n  border-left: 4px solid #8CE68D;\r\n  box-shadow: \r\n    0 4px 12px rgba(140, 230, 141, 0.2),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.8);\r\n  backdrop-filter: blur(5px);\r\n  border: 1px solid rgba(140, 230, 141, 0.3);\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.mobile-item {\r\n  display: block;\r\n  padding: 0.2rem 0;\r\n  font-size: 1rem;\r\n  line-height: 1.2;\r\n}\r\n\r\n.mobile-item.doc-type {\r\n  font-weight: bold;\r\n  font-size: 1.6rem;\r\n  color: #409eff;\r\n  margin-bottom: 0.2rem;\r\n}\r\n\r\n.mobile-item.doc-id-line {\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.mobile-item.dept-name {\r\n  color: #666;\r\n  font-size: 1rem;\r\n}\r\n\r\n.mobile-item.creator-name {\r\n  color: #666;\r\n  font-size: 1rem;\r\n}\r\n\r\n.mobile-item.created-date {\r\n  color: #999;\r\n  font-size: 1rem;\r\n}\r\n\r\n.mobile-item.status-name {\r\n  font-weight: 500;\r\n  color: #67c23a;\r\n  background-color: #f0f9ff;\r\n  padding: 0.2rem 0.5rem;\r\n  border-radius: 4px;\r\n  text-align: center;\r\n  margin-top: 0.2rem;\r\n}\r\n\r\n.desktop-row {\r\n  display: flex;\r\n  align-items: center; /*  */\r\n  gap: 0.5rem; /*  */\r\n  white-space: nowrap; /*  */\r\n}\r\n\r\n/*  */\r\n.region-filter {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  backdrop-filter: blur(5px);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.region-filter::before {\r\n  font-weight: 500;\r\n  color: #606266;\r\n  white-space: nowrap;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n/*  */\r\n.el-table {\r\n  font-family: 'Microsoft JhengHei', 'PingFang TC', 'Helvetica Neue', sans-serif;\r\n  cursor: pointer; /*  pointer */\r\n  display: flex; /*  Flexbox */\r\n  flex-direction: column; /*  */\r\n}\r\n\r\n/*  el-empty  */\r\n.el-table__empty-block {\r\n  flex-grow: 1; /*  */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-size-control {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px; /*  */\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  backdrop-filter: blur(5px);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.pagination-controls {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  padding: 8px;\r\n  border-radius: 8px;\r\n  backdrop-filter: blur(5px);\r\n}\r\n\r\n.pagination-controls {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.workflow {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 2.5rem;\r\n  border-radius: 16px;\r\n  flex-grow: 1;\r\n  background: linear-gradient(135deg, #d4fff4, #8CE68D);\r\n  box-shadow: \r\n    0 8px 32px rgba(140, 230, 141, 0.4),\r\n    inset 0 0 20px rgba(255, 255, 255, 0.7),\r\n    0 0 0 1px rgba(255, 255, 255, 0.2);\r\n  border: 2px solid rgba(178, 245, 178, 0.6);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.workflow::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);\r\n  animation: shimmer 3s ease-in-out infinite;\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes shimmer {\r\n  0%, 100% { transform: rotate(0deg) scale(1); opacity: 0.3; }\r\n  50% { transform: rotate(180deg) scale(1.1); opacity: 0.1; }\r\n}\r\n\r\n\r\n.main-content-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  padding: 2rem;\r\n  background: linear-gradient(135deg, #e8f8f5, #b8e6d3, #d4fff4);\r\n  background-size: 400% 400%;\r\n  animation: gradientShift 8s ease infinite;\r\n  position: relative;\r\n}\r\n\r\n.main-content-wrapper::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: \r\n    radial-gradient(circle at 20% 20%, rgba(140, 230, 141, 0.1) 0%, transparent 50%),\r\n    radial-gradient(circle at 80% 80%, rgba(212, 255, 244, 0.2) 0%, transparent 50%),\r\n    radial-gradient(circle at 40% 60%, rgba(140, 230, 141, 0.05) 0%, transparent 50%);\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes gradientShift {\r\n  0%, 100% { background-position: 0% 50%; }\r\n  50% { background-position: 100% 50%; }\r\n}\r\n\r\n\r\n/* 1.  Google Fonts  */\r\n@import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap');\r\n\r\n/* 2.  */\r\n.fancy-wrapper {\r\n  text-align: center !important;\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 0.5rem !important;\r\n  position: relative !important;\r\n  z-index: 1 !important;\r\n  width: 100% !important;\r\n  display: flex !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;\r\n}\r\n\r\n/*  */\r\n.fancy-title{\r\n  font-family: 'Cinzel Decorative', serif;\r\n  font-size: 4rem;\r\n  font-weight: 700;\r\n  display: inline-block;                 /*  */\r\n  background-image: linear-gradient(135deg, #2d5a3d, #4a7c59, #1e3a2e);\r\n  background-size: 200% 200%;\r\n  background-repeat: no-repeat;\r\n  -webkit-background-clip: text;         /*  */\r\n  background-clip: text;\r\n  -webkit-text-fill-color: transparent;  /* WebKit  */\r\n  color: transparent;                    /*  */\r\n}\r\n\r\n\r\n/* 4.  */\r\n@keyframes gradientShift {\r\n  0%   { background-position:   0% 50%; }\r\n  50%  { background-position: 100% 50%; }\r\n  100% { background-position:   0% 50%; }\r\n}\r\n\r\n/*  */\r\n.tool-bar .el-text {\r\n  color: #2d5a3d;\r\n  font-weight: 600;\r\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n/*  */\r\n:deep(.el-loading-mask) {\r\n  background: linear-gradient(135deg, rgba(212, 255, 244, 0.9), rgba(140, 230, 141, 0.8));\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n:deep(.el-loading-spinner .el-loading-text) {\r\n  color: #2d5a3d;\r\n  font-weight: 600;\r\n}\r\n\r\n/*  el-empty  */\r\n:deep(.el-empty) {\r\n  display: flex !important;\r\n  flex-direction: column !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;\r\n  text-align: center !important;\r\n  min-height: 300px;\r\n  padding: 2rem;\r\n  width: 100%;\r\n  margin-top:6rem;\r\n  margin-left: 1rem;\r\n}\r\n\r\n:deep(.el-empty__image) {\r\n  display: flex !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;\r\n  text-align: center !important;\r\n  margin: 0 auto !important;\r\n  width: 100% !important;\r\n  height: auto !important;\r\n}\r\n\r\n:deep(.el-empty__image img) {\r\n  max-width: 200px !important;\r\n  height: auto !important;\r\n  display: block !important;\r\n  margin: 0 auto !important;\r\n}\r\n\r\n:deep(.el-empty__image svg) {\r\n  display: block !important;\r\n  margin: 0 auto !important;\r\n  max-width: 200px !important;\r\n  height: auto !important;\r\n}\r\n\r\n:deep(.el-empty__description) {\r\n  text-align: center !important;\r\n  margin: 1rem auto 0 auto !important;\r\n  color: #2d5a3d;\r\n  font-weight: 500;\r\n  width: 100%;\r\n}\r\n\r\n/*  */\r\n.doc-type {\r\n  color: #409EFF; /* Element Plus Primary Blue */\r\n  font-weight: bold;\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n.doc-id-title{\r\n  color: rgb(10, 82, 11); /* Element Plus Success Green */\r\n  font-weight: bold;\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n\r\n\r\n.doc-id {\r\n  color: #67C23A; /* Element Plus Success Green */\r\n  font-weight: bold;\r\n  font-size: 1.2rem; /*  */\r\n}\r\n\r\n.dept-name {\r\n  color: #E6A23C; /* Element Plus Warning Yellow */\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n.creator-name {\r\n  color: #909399; /* Element Plus Info Gray */\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n.created-date {\r\n  color: #F56C6C; /* Element Plus Danger Red */\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n.status-name {\r\n  color: #606266; /* Element Plus Default Text Color */\r\n  font-weight: bold;\r\n  font-size: 1.4rem; /*  */\r\n}\r\n\r\n/* workflow  */\r\n.workflow {\r\n  width: 100%;\r\n  max-width: 100%;\r\n  min-width: 300px; /*  */\r\n  box-sizing: border-box;\r\n}\r\n\r\n/*  workflow  */\r\n@media (max-width: 768px) {\r\n  .workflow {\r\n    width: 100%; /*  tool-bar  */\r\n    max-width: 100%;\r\n    min-width: 280px;\r\n    overflow: hidden; /*  */\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .workflow {\r\n    width: 100%;\r\n    max-width: 100%;\r\n  }\r\n}\r\n\r\n/*  -  */\r\n.workflow-table {\r\n  border-radius: 16px;\r\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(212, 255, 244, 0.1));\r\n  box-shadow: \r\n    0 8px 32px rgba(140, 230, 141, 0.2),\r\n    0 4px 16px rgba(0, 0, 0, 0.1),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.8);\r\n  font-family: \"Segoe UI\", \"Microsoft JhengHei\", sans-serif;\r\n  border: 2px solid rgba(140, 230, 141, 0.3);\r\n  backdrop-filter: blur(10px);\r\n  position: relative;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.workflow-table::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 4px;\r\n  background: linear-gradient(90deg, #8CE68D, #d4fff4, #8CE68D);\r\n  background-size: 200% 100%;\r\n  animation: borderGlow 3s ease-in-out infinite;\r\n}\r\n\r\n@keyframes borderGlow {\r\n  0%, 100% { background-position: 0% 50%; }\r\n  50% { background-position: 100% 50%; }\r\n}\r\n\r\n:deep(.first-row-padding td) {\r\n  padding-top: 16px !important; /*  */\r\n}\r\n\r\n/* Vue 3 + <style scoped>  */\r\n\r\n.workflow-table :deep(.el-table__body) {\r\n  border-collapse: separate !important;\r\n  border-spacing: 0 12px !important;\r\n}\r\n\r\n\r\n.workflow-table :deep(.el-table__body td) {\r\n  border-color: rgba(140, 230, 141, 0.1);\r\n  background: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\nworkflow-table :deep(.el-table__row td) {\r\n  background: transparent !important;\r\n  border: none;\r\n}\r\n\r\n/*  div  */\r\n.desktop-row {\r\n  background: rgba(212, 255, 244, 0.7); /*  */\r\n  border-radius: 12px;\r\n  padding: 5px 5px;\r\n  box-shadow: 0 2px 6px rgba(140, 230, 141, 0.15);\r\n}\r\n\r\n.workflow-table :deep(.el-table__header th){\r\n  border-color: rgba(140, 230, 141, 0.2);\r\n  background: linear-gradient(135deg, rgba(140, 230, 141, 0.1), rgba(212, 255, 244, 0.2)) !important;\r\n  color: #2d5a3d;\r\n  font-weight: 600;\r\n}\r\n\r\n.workflow-table :deep(.el-table__row:hover td) {\r\n  background: linear-gradient(135deg, rgba(212, 255, 244, 0.3), rgba(140, 230, 141, 0.1)) !important;\r\n}\r\n\r\n/*  */\r\n:deep(.el-pagination) {\r\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(212, 255, 244, 0.3));\r\n  border-radius: 12px;\r\n  padding: 10px 15px;\r\n  box-shadow: 0 4px 12px rgba(140, 230, 141, 0.2);\r\n  border: 1px solid rgba(140, 230, 141, 0.3);\r\n}\r\n\r\n:deep(.el-pagination .el-pager li) {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid rgba(140, 230, 141, 0.3);\r\n  color: #2d5a3d;\r\n  border-radius: 6px;\r\n  margin: 0 2px;\r\n}\r\n\r\n:deep(.el-pagination .el-pager li.is-active) {\r\n  background: linear-gradient(135deg, #8CE68D, #d4fff4);\r\n  color: #1e3a2e;\r\n  font-weight: 600;\r\n  box-shadow: 0 2px 8px rgba(140, 230, 141, 0.4);\r\n}\r\n\r\n:deep(.el-pagination .btn-prev),\r\n:deep(.el-pagination .btn-next) {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid rgba(140, 230, 141, 0.3);\r\n  color: #2d5a3d;\r\n  border-radius: 6px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-select .el-input__wrapper) {\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border: 1px solid rgba(140, 230, 141, 0.4);\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(140, 230, 141, 0.1);\r\n}\r\n\r\n:deep(.el-date-editor .el-input__wrapper) {\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border: 1px solid rgba(140, 230, 141, 0.4);\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(140, 230, 141, 0.1);\r\n}\r\n\r\n:deep(.el-radio-button__inner) {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid rgba(140, 230, 141, 0.4);\r\n  color: #2d5a3d;\r\n  border-radius: 6px;\r\n}\r\n\r\n:deep(.el-radio-button__original-radio:checked + .el-radio-button__inner) {\r\n  background: linear-gradient(135deg, #8CE68D, #d4fff4);\r\n  color: #1e3a2e;\r\n  border-color: #8CE68D;\r\n  box-shadow: 0 2px 8px rgba(140, 230, 141, 0.4);\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .workflow-table {\r\n    width: 100% !important;\r\n    max-width: 100% !important;\r\n    overflow: hidden !important; /*  */\r\n    border-radius: 12px !important;\r\n    box-sizing: border-box !important;\r\n  }\r\n\r\n  /*  */\r\n  .workflow-table :deep(.el-table) {\r\n    width: 100% !important;\r\n    max-width: 100% !important;\r\n    min-width: unset !important; /*  */\r\n    font-size: 0.85rem !important;\r\n    table-layout: fixed !important; /*  */\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__header-wrapper) {\r\n    overflow: hidden !important; /*  */\r\n    width: 100% !important;\r\n    max-width: 100% !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__body-wrapper) {\r\n    overflow: hidden !important; /*  */\r\n    width: 100% !important;\r\n    max-width: 100% !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__header th) {\r\n    padding: 8px 2px !important;\r\n    font-size: 0.8rem !important;\r\n    white-space: normal !important; /*  */\r\n    width: auto !important;\r\n    min-width: unset !important; /*  */\r\n    max-width: none !important;\r\n    overflow: hidden !important;\r\n    text-overflow: ellipsis !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__body td) {\r\n    padding: 8px 2px !important;\r\n    font-size: 0.85rem !important;\r\n    white-space: normal !important; /*  */\r\n    width: auto !important;\r\n    min-width: unset !important; /*  */\r\n    max-width: none !important;\r\n    overflow: hidden !important;\r\n    word-wrap: break-word !important; /*  */\r\n  }\r\n\r\n  /*  */\r\n  .workflow-table :deep(.el-table-column--selection) {\r\n    width: 40px !important;\r\n    min-width: 40px !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table th:first-child),\r\n  .workflow-table :deep(.el-table td:first-child) {\r\n    padding-left: 8px !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table th:last-child),\r\n  .workflow-table :deep(.el-table td:last-child) {\r\n    padding-right: 8px !important;\r\n  }\r\n\r\n  /*  */\r\n  .workflow-table :deep(.doc-type) {\r\n    font-size: 0.9rem !important;\r\n    font-weight: 600 !important;\r\n  }\r\n\r\n  .workflow-table :deep(.doc-id) {\r\n    font-size: 0.8rem !important;\r\n    color: #666 !important;\r\n  }\r\n\r\n  .workflow-table :deep(.created-date) {\r\n    font-size: 0.75rem !important;\r\n    color: #888 !important;\r\n  }\r\n\r\n  .workflow-table :deep(.status-badge) {\r\n    font-size: 0.7rem !important;\r\n    padding: 2px 6px !important;\r\n    border-radius: 4px !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 480px) {\r\n  .workflow-table {\r\n    border-radius: 8px !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table) {\r\n    font-size: 0.8rem !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__header th) {\r\n    padding: 6px 2px !important;\r\n    font-size: 0.75rem !important;\r\n    min-width: 60px !important;\r\n  }\r\n\r\n  .workflow-table :deep(.el-table__body td) {\r\n    padding: 6px 2px !important;\r\n    font-size: 0.8rem !important;\r\n    min-width: 60px !important;\r\n  }\r\n\r\n  .workflow-table :deep(.doc-type) {\r\n    font-size: 0.85rem !important;\r\n  }\r\n\r\n  .workflow-table :deep(.doc-id) {\r\n    font-size: 0.75rem !important;\r\n  }\r\n\r\n  .workflow-table :deep(.created-date) {\r\n    font-size: 0.7rem !important;\r\n  }\r\n\r\n  .workflow-table :deep(.status-badge) {\r\n    font-size: 0.65rem !important;\r\n    padding: 1px 4px !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n.workflow-table::after {\r\n  content: \"WORKFLOW\";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) rotate(-30deg);\r\n  font-size: 4rem;\r\n  color: rgba(140, 230, 141, 0.05);\r\n  z-index: 0;\r\n  pointer-events: none;\r\n  font-weight: 700;\r\n  letter-spacing: 8px;\r\n}\r\n\r\n\r\n@media (max-width: 768px) {\r\n\r\n\r\n}\r\n\r\n</style>\r\n\r\n","import script from \"./List_Related_WF_Form.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./List_Related_WF_Form.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./List_Related_WF_Form.vue?vue&type=style&index=0&id=8dd11528&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8dd11528\"]])\n\nexport default __exports__","import script from \"./sys_WF_Management.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./sys_WF_Management.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"field-preview\">\n    <div class=\"field-label-wrapper\">\n      <label class=\"field-label\">\n        {{ field.label || '' }}\n        <span v-if=\"field.required\" class=\"required-mark\">*</span>\n      </label>\n      <span v-if=\"field.helpText\" class=\"help-text\">{{ field.helpText }}</span>\n    </div>\n    \n    <div class=\"field-input-wrapper\" :style=\"{ width: field.width }\">\n      <!--  -->\n      <el-input\n        v-if=\"field.type === 'text'\"\n        :placeholder=\"field.placeholder\"\n        :model-value=\"field.defaultValue\"\n        disabled\n      />\n      \n      <!--  -->\n      <el-input\n        v-else-if=\"field.type === 'textarea'\"\n        type=\"textarea\"\n        :placeholder=\"field.placeholder\"\n        :model-value=\"field.defaultValue\"\n        :rows=\"3\"\n        disabled\n      />\n      \n      <!--  -->\n      <el-select\n        v-else-if=\"field.type === 'select'\"\n        :placeholder=\"field.placeholder || ''\"\n        :model-value=\"getDefaultSelectValue()\"\n        disabled\n        style=\"width: 100%\"\n      >\n        <el-option\n          v-for=\"option in field.options\"\n          :key=\"option.value\"\n          :label=\"option.label\"\n          :value=\"option.value\"\n        />\n      </el-select>\n      \n      <!--  -->\n      <el-radio-group\n        v-else-if=\"field.type === 'radio'\"\n        :model-value=\"getDefaultRadioValue()\"\n        disabled\n      >\n        <el-radio\n          v-for=\"option in field.options\"\n          :key=\"option.value\"\n          :label=\"option.value\"\n        >\n          {{ option.label }}\n        </el-radio>\n      </el-radio-group>\n      \n      <!--  -->\n      <el-checkbox-group\n        v-else-if=\"field.type === 'checkbox'\"\n        :model-value=\"getDefaultCheckboxValue()\"\n        disabled\n      >\n        <el-checkbox\n          v-for=\"option in field.options\"\n          :key=\"option.value\"\n          :label=\"option.value\"\n        >\n          {{ option.label }}\n        </el-checkbox>\n      </el-checkbox-group>\n      \n      <!--  -->\n      <el-date-picker\n        v-else-if=\"field.type === 'date'\"\n        :placeholder=\"field.placeholder || ''\"\n        :model-value=\"field.defaultValue\"\n        disabled\n        style=\"width: 100%\"\n      />\n      \n      <!--  -->\n      <el-input-number\n        v-else-if=\"field.type === 'number'\"\n        :placeholder=\"field.placeholder\"\n        :model-value=\"field.defaultValue\"\n        :min=\"field.validation?.min\"\n        :max=\"field.validation?.max\"\n        disabled\n        style=\"width: 100%\"\n      />\n      \n      <!--  -->\n      <el-input\n        v-else-if=\"field.type === 'email'\"\n        type=\"email\"\n        :placeholder=\"field.placeholder || ''\"\n        :model-value=\"field.defaultValue\"\n        disabled\n      />\n      \n      <!--  -->\n      <el-upload\n        v-else-if=\"field.type === 'file'\"\n        class=\"upload-demo\"\n        drag\n        disabled\n      >\n        <i class=\"pi pi-cloud-upload upload-icon\"></i>\n        <div class=\"upload-text\">\n          \n        </div>\n      </el-upload>\n      \n      <!--  -->\n      <div v-else class=\"unknown-field\">\n        <i class=\"pi pi-question-circle\"></i>\n        : {{ field.type }}\n      </div>\n    </div>\n    \n    <!--  -->\n    <div v-if=\"field.validation\" class=\"validation-info\">\n      <el-tag size=\"small\" type=\"info\">\n        <i class=\"pi pi-info-circle\"></i>\n        {{ getValidationText() }}\n      </el-tag>\n    </div>\n  </div>\n</template>\n\n<script setup>\n\n\n// Props\nconst props = defineProps({\n  field: {\n    type: Object,\n    required: true\n  }\n})\n\n// \nconst getDefaultSelectValue = () => {\n  const selectedOption = props.field.options?.find(opt => opt.selected)\n  return selectedOption?.value || props.field.defaultValue\n}\n\nconst getDefaultRadioValue = () => {\n  const selectedOption = props.field.options?.find(opt => opt.selected)\n  return selectedOption?.value || props.field.defaultValue\n}\n\nconst getDefaultCheckboxValue = () => {\n  const selectedOptions = props.field.options?.filter(opt => opt.selected)\n  if (selectedOptions?.length > 0) {\n    return selectedOptions.map(opt => opt.value)\n  }\n  return Array.isArray(props.field.defaultValue) ? props.field.defaultValue : []\n}\n\nconst getValidationText = () => {\n  const validation = props.field.validation\n  if (!validation) return ''\n  \n  const rules = []\n  \n  if (validation.minLength) {\n    rules.push(` ${validation.minLength} `)\n  }\n  \n  if (validation.maxLength) {\n    rules.push(` ${validation.maxLength} `)\n  }\n  \n  if (validation.min !== undefined) {\n    rules.push(` ${validation.min}`)\n  }\n  \n  if (validation.max !== undefined) {\n    rules.push(` ${validation.max}`)\n  }\n  \n  if (validation.pattern) {\n    rules.push('')\n  }\n  \n  return rules.join(', ')\n}\n</script>\n\n<style scoped>\n.field-preview {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  padding: 16px;\n  background: white;\n   border: 2px solid rgb(255, 255, 255) !important; \n}\n\n.field-label-wrapper {\n  margin-bottom: 8px;\n}\n\n.field-label {\n  font-weight: 500;\n  color: #303133;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.required-mark {\n  color: #f56c6c;\n  margin-left: 2px;\n}\n\n.help-text {\n  font-size: 12px;\n  color: #909399;\n  line-height: 1.4;\n}\n\n.field-input-wrapper {\n  margin-bottom: 8px;\n}\n\n.validation-info {\n  margin-top: 8px;\n}\n\n.validation-info .el-tag {\n  font-size: 11px;\n}\n\n.upload-demo {\n  width: 100%;\n}\n\n.upload-icon {\n  font-size: 48px;\n  color: #c0c4cc;\n  margin-bottom: 16px;\n}\n\n.upload-text {\n  color: #606266;\n  font-size: 14px;\n}\n\n.unknown-field {\n  padding: 20px;\n  text-align: center;\n  color: #909399;\n  background: #f5f7fa;\n  border-radius: 4px;\n}\n\n.unknown-field i {\n  font-size: 24px;\n  margin-bottom: 8px;\n  display: block;\n}\n\n:deep(.el-upload-dragger) {\n  width: 100%;\n  height: 120px;\n}\n\n:deep(.el-radio-group) {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n:deep(.el-checkbox-group) {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n</style>","import script from \"./FieldPreview.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FieldPreview.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FieldPreview.vue?vue&type=style&index=0&id=134cd294&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-134cd294\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    :title=\"isEdit ? '' : ''\"\r\n    width=\"60%\"\r\n    :close-on-click-modal=\"false\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <el-form :model=\"fieldData\" :rules=\"rules\" ref=\"formRef\" label-width=\"120px\">\r\n      <!--  -->\r\n      <el-card shadow=\"never\" class=\"section-card\">\r\n        <template #header>\r\n          <span></span>\r\n        </template>\r\n        \r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\" prop=\"type\">\r\n              <el-select v-model=\"fieldData.type\" @change=\"handleTypeChange\">\r\n                <el-option label=\"\" value=\"text\" />\r\n                <el-option label=\"\" value=\"textarea\" />\r\n                <el-option label=\"\" value=\"select\" />\r\n                <el-option label=\"\" value=\"radio\" />\r\n                <el-option label=\"\" value=\"checkbox\" />\r\n                <el-option label=\"\" value=\"date\" />\r\n                <el-option label=\"\" value=\"number\" />\r\n                <el-option label=\"\" value=\"email\" />\r\n                <el-option label=\"\" value=\"file\" />\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\" prop=\"label\">\r\n              <el-input v-model=\"fieldData.label\" placeholder=\"\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"fieldData.placeholder\" placeholder=\"\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-select v-model=\"fieldData.width\">\r\n                <el-option label=\"25%\" value=\"25%\" />\r\n                <el-option label=\"50%\" value=\"50%\" />\r\n                <el-option label=\"75%\" value=\"75%\" />\r\n                <el-option label=\"100%\" value=\"100%\" />\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-form-item label=\"\">\r\n          <el-input \r\n            v-model=\"fieldData.helpText\" \r\n            type=\"textarea\" \r\n            :rows=\"2\"\r\n            placeholder=\"\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"\">\r\n          <component \r\n            :is=\"getDefaultValueComponent()\" \r\n            v-model=\"fieldData.defaultValue\"\r\n            :placeholder=\"getDefaultValuePlaceholder()\"\r\n            :options=\"fieldData.options\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-checkbox v-model=\"fieldData.required\"></el-checkbox>\r\n        </el-form-item>\r\n      </el-card>\r\n\r\n      <!--  ( select, radio, checkbox) -->\r\n      <el-card \r\n        v-if=\"needsOptions\" \r\n        shadow=\"never\" \r\n        class=\"section-card\"\r\n      >\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n            <el-button size=\"small\" type=\"primary\" @click=\"addOption\">\r\n              <i class=\"pi pi-plus\"></i>\r\n              \r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <div class=\"options-list\">\r\n          <div \r\n            v-for=\"(option, index) in fieldData.options\" \r\n            :key=\"index\"\r\n            class=\"option-item\"\r\n          >\r\n            <el-input \r\n              v-model=\"option.label\" \r\n              placeholder=\"\"\r\n              class=\"option-label\"\r\n            />\r\n            <el-input \r\n              v-model=\"option.value\" \r\n              placeholder=\"\"\r\n              class=\"option-value\"\r\n            />\r\n            <el-checkbox \r\n              v-model=\"option.selected\"\r\n              class=\"option-default\"\r\n            >\r\n              \r\n            </el-checkbox>\r\n            <el-button \r\n              size=\"small\" \r\n              type=\"danger\" \r\n              @click=\"removeOption(index)\"\r\n              :icon=\"Delete\"\r\n            />\r\n          </div>\r\n          \r\n          <div v-if=\"fieldData.options.length === 0\" class=\"empty-options\">\r\n            <p></p>\r\n            <el-button type=\"primary\" @click=\"addOption\"></el-button>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n\r\n      <!--  -->\r\n      <el-card shadow=\"never\" class=\"section-card\">\r\n        <template #header>\r\n          <span></span>\r\n        </template>\r\n        \r\n        <el-row :gutter=\"20\" v-if=\"fieldData.type === 'text' || fieldData.type === 'textarea'\">\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-input-number \r\n                v-model=\"fieldData.validation.minLength\" \r\n                :min=\"0\" \r\n                placeholder=\"\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-input-number \r\n                v-model=\"fieldData.validation.maxLength\" \r\n                :min=\"1\" \r\n                placeholder=\"\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-row :gutter=\"20\" v-if=\"fieldData.type === 'number'\">\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-input-number \r\n                v-model=\"fieldData.validation.min\" \r\n                placeholder=\"\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"\">\r\n              <el-input-number \r\n                v-model=\"fieldData.validation.max\" \r\n                placeholder=\"\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-form-item label=\"\" v-if=\"fieldData.type === 'text' || fieldData.type === 'email'\">\r\n          <el-input \r\n            v-model=\"fieldData.validation.pattern\" \r\n            placeholder=\": ^[A-Za-z0-9]+$\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"\">\r\n          <el-input \r\n            v-model=\"fieldData.validation.customMessage\" \r\n            placeholder=\"\"\r\n          />\r\n        </el-form-item>\r\n      </el-card>\r\n\r\n      <!--  -->\r\n      <el-card shadow=\"never\" class=\"section-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n            <el-switch \r\n              v-model=\"enableConditional\"\r\n              @change=\"handleConditionalToggle\"\r\n            />\r\n          </div>\r\n        </template>\r\n        \r\n        <div v-if=\"enableConditional\">\r\n          <el-form-item label=\"\">\r\n            <el-select \r\n              v-model=\"fieldData.conditional.dependsOn\" \r\n              placeholder=\"\"\r\n            >\r\n              <el-option \r\n                v-for=\"field in availableFields\" \r\n                :key=\"field.id\"\r\n                :label=\"field.label\"\r\n                :value=\"field.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"\">\r\n                <el-select v-model=\"fieldData.conditional.condition\">\r\n                  <el-option label=\"\" value=\"equals\" />\r\n                  <el-option label=\"\" value=\"not_equals\" />\r\n                  <el-option label=\"\" value=\"contains\" />\r\n                  <el-option label=\"\" value=\"not_contains\" />\r\n                  <el-option label=\"\" value=\"empty\" />\r\n                  <el-option label=\"\" value=\"not_empty\" />\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"\">\r\n                <el-input \r\n                  v-model=\"fieldData.conditional.value\" \r\n                  placeholder=\"\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-card>\r\n    </el-form>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button type=\"primary\" @click=\"handleSave\"></el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Delete } from '@element-plus/icons-vue'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  fieldData: {\r\n    type: Object,\r\n    default: null\r\n  },\r\n  availableFields: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible', 'saved'])\r\n\r\n// \r\nconst dialogVisible = computed({\r\n  get: () => props.visible,\r\n  set: (value) => emit('update:visible', value)\r\n})\r\n\r\nconst isEdit = computed(() => !!props.fieldData?.id)\r\n\r\nconst fieldData = reactive({\r\n  id: '',\r\n  type: 'text',\r\n  label: '',\r\n  placeholder: '',\r\n  required: false,\r\n  validation: {\r\n    minLength: null,\r\n    maxLength: null,\r\n    min: null,\r\n    max: null,\r\n    pattern: '',\r\n    customMessage: ''\r\n  },\r\n  options: [],\r\n  defaultValue: null,\r\n  order: 0,\r\n  width: '100%',\r\n  helpText: '',\r\n  conditional: {\r\n    dependsOn: '',\r\n    condition: 'equals',\r\n    value: ''\r\n  }\r\n})\r\n\r\nconst enableConditional = ref(false)\r\n\r\n// \r\nconst rules = {\r\n  type: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  label: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    { min: 1, max: 50, message: ' 1  50 ', trigger: 'blur' }\r\n  ]\r\n}\r\n\r\n// \r\nconst formRef = ref()\r\n\r\n// \r\nconst needsOptions = computed(() => {\r\n  return ['select', 'radio', 'checkbox'].includes(fieldData.type)\r\n})\r\n\r\n// \r\nconst initFieldData = () => {\r\n  if (props.fieldData) {\r\n    Object.assign(fieldData, {\r\n      id: props.fieldData.id || '',\r\n      type: props.fieldData.type || 'text',\r\n      label: props.fieldData.label || '',\r\n      placeholder: props.fieldData.placeholder || '',\r\n      required: props.fieldData.required || false,\r\n      validation: {\r\n        minLength: props.fieldData.validation?.minLength || null,\r\n        maxLength: props.fieldData.validation?.maxLength || null,\r\n        min: props.fieldData.validation?.min || null,\r\n        max: props.fieldData.validation?.max || null,\r\n        pattern: props.fieldData.validation?.pattern || '',\r\n        customMessage: props.fieldData.validation?.customMessage || ''\r\n      },\r\n      options: props.fieldData.options ? [...props.fieldData.options] : [],\r\n      defaultValue: props.fieldData.defaultValue,\r\n      order: props.fieldData.order || 0,\r\n      width: props.fieldData.width || '100%',\r\n      helpText: props.fieldData.helpText || '',\r\n      conditional: {\r\n        dependsOn: props.fieldData.conditional?.dependsOn || '',\r\n        condition: props.fieldData.conditional?.condition || 'equals',\r\n        value: props.fieldData.conditional?.value || ''\r\n      }\r\n    })\r\n    \r\n    enableConditional.value = !!props.fieldData.conditional?.dependsOn\r\n  } else {\r\n    // \r\n    Object.assign(fieldData, {\r\n      id: '',\r\n      type: 'text',\r\n      label: '',\r\n      placeholder: '',\r\n      required: false,\r\n      validation: {\r\n        minLength: null,\r\n        maxLength: null,\r\n        min: null,\r\n        max: null,\r\n        pattern: '',\r\n        customMessage: ''\r\n      },\r\n      options: [],\r\n      defaultValue: null,\r\n      order: 0,\r\n      width: '100%',\r\n      helpText: '',\r\n      conditional: {\r\n        dependsOn: '',\r\n        condition: 'equals',\r\n        value: ''\r\n      }\r\n    })\r\n    \r\n    enableConditional.value = false\r\n  }\r\n}\r\n\r\nconst handleTypeChange = () => {\r\n  // \r\n  fieldData.defaultValue = null\r\n  \r\n  if (!needsOptions.value) {\r\n    fieldData.options = []\r\n  } else if (fieldData.options.length === 0) {\r\n    // \r\n    addOption()\r\n  }\r\n}\r\n\r\nconst addOption = () => {\r\n  fieldData.options.push({\r\n    label: ` ${fieldData.options.length + 1}`,\r\n    value: `option_${fieldData.options.length + 1}`,\r\n    selected: false\r\n  })\r\n}\r\n\r\nconst removeOption = (index) => {\r\n  fieldData.options.splice(index, 1)\r\n}\r\n\r\nconst handleConditionalToggle = (enabled) => {\r\n  if (!enabled) {\r\n    fieldData.conditional = {\r\n      dependsOn: '',\r\n      condition: 'equals',\r\n      value: ''\r\n    }\r\n  }\r\n}\r\n\r\nconst getDefaultValueComponent = () => {\r\n  switch (fieldData.type) {\r\n    case 'textarea':\r\n      return 'el-input'\r\n    case 'number':\r\n      return 'el-input-number'\r\n    case 'date':\r\n      return 'el-date-picker'\r\n    case 'select':\r\n      return 'OptionSelect'\r\n    case 'radio':\r\n      return 'OptionRadio'\r\n    case 'checkbox':\r\n      return 'OptionCheckbox'\r\n    default:\r\n      return 'el-input'\r\n  }\r\n}\r\n\r\nconst getDefaultValuePlaceholder = () => {\r\n  switch (fieldData.type) {\r\n    case 'text':\r\n    case 'email':\r\n      return ''\r\n    case 'textarea':\r\n      return ''\r\n    case 'number':\r\n      return ''\r\n    case 'date':\r\n      return ''\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\nconst handleSave = async () => {\r\n  try {\r\n    await formRef.value?.validate()\r\n    \r\n    // \r\n    if (needsOptions.value && fieldData.options.length === 0) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    const submitData = { ...fieldData }\r\n    \r\n    if (!needsOptions.value) {\r\n      submitData.options = []\r\n    }\r\n    \r\n    if (!enableConditional.value) {\r\n      submitData.conditional = null\r\n    }\r\n    \r\n    // \r\n    const validation = { ...submitData.validation }\r\n    Object.keys(validation).forEach(key => {\r\n      if (validation[key] === null || validation[key] === '') {\r\n        delete validation[key]\r\n      }\r\n    })\r\n    submitData.validation = Object.keys(validation).length > 0 ? validation : null\r\n    \r\n    emit('saved', submitData)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst handleClose = () => {\r\n  dialogVisible.value = false\r\n}\r\n\r\n// \r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal) {\r\n    initFieldData()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.section-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-card:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.options-list {\r\n  min-height: 100px;\r\n}\r\n\r\n.option-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.option-label {\r\n  flex: 2;\r\n}\r\n\r\n.option-value {\r\n  flex: 2;\r\n}\r\n\r\n.option-default {\r\n  flex: 0 0 auto;\r\n}\r\n\r\n.empty-options {\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #909399;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n\r\n:deep(.el-card__header) {\r\n  padding: 16px 20px;\r\n  background: #f8f9fa;\r\n}\r\n\r\n:deep(.el-card__body) {\r\n  padding: 20px;\r\n}\r\n\r\n:deep(.el-input-number) {\r\n  width: 100%;\r\n}\r\n</style>","import script from \"./FieldEditorDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FieldEditorDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FieldEditorDialog.vue?vue&type=style&index=0&id=293df904&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-293df904\"]])\n\nexport default __exports__","<template>\n  <el-dialog\n    v-model=\"dialogVisible\"\n    :title=\"isEdit ? '' : ''\"\n    width=\"80%\"\n    :close-on-click-modal=\"false\"\n    @close=\"handleClose\"\n  >\n    <div class=\"form-template-dialog\">\n      <!--  -->\n      <el-card class=\"section-card\" shadow=\"never\">\n        <template #header>\n          <div class=\"card-header\">\n            <i class=\"pi pi-info-circle\"></i>\n            <span></span>\n          </div>\n        </template>\n        \n        <el-form :model=\"formData\" :rules=\"rules\" ref=\"formRef\" label-width=\"120px\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"\" prop=\"title\">\n                <el-input v-model=\"formData.title\" placeholder=\"\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"\" prop=\"category\">\n                <el-select v-model=\"formData.category\" placeholder=\"\">\n                  <el-option label=\"\" value=\"hr\" />\n                  <el-option label=\"\" value=\"finance\" />\n                  <el-option label=\"\" value=\"purchase\" />\n                  <el-option label=\"\" value=\"other\" />\n                </el-select>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          \n          <el-form-item label=\"\" prop=\"description\">\n            <el-input \n              v-model=\"formData.description\" \n              type=\"textarea\" \n              :rows=\"3\"\n              placeholder=\"\"\n            />\n          </el-form-item>\n          \n          <el-form-item label=\"\">\n            <el-tag\n              v-for=\"tag in formData.tags\"\n              :key=\"tag\"\n              closable\n              @close=\"removeTag(tag)\"\n              class=\"tag-item\"\n            >\n              {{ tag }}\n            </el-tag>\n            <el-input\n              v-if=\"inputVisible\"\n              ref=\"inputRef\"\n              v-model=\"inputValue\"\n              class=\"tag-input\"\n              size=\"small\"\n              @keyup.enter=\"handleInputConfirm\"\n              @blur=\"handleInputConfirm\"\n            />\n            <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">\n              + \n            </el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n\n      <!--  -->\n      <el-card class=\"section-card\" shadow=\"never\">\n        <template #header>\n          <div class=\"card-header\">\n            <i class=\"pi pi-list\"></i>\n            <span></span>\n            <el-button \n              type=\"primary\" \n              size=\"small\" \n              @click=\"addField\"\n              class=\"add-field-btn\"\n            >\n              <i class=\"pi pi-plus\"></i>\n              \n            </el-button>\n          </div>\n        </template>\n\n        <div class=\"fields-designer\">\n          <VueDraggable \n            v-model=\"formData.fields\" \n            group=\"fields\" \n            @start=\"drag=true\" \n            @end=\"drag=false\"\n            item-key=\"id\"\n          >\n            <template #item=\"{element, index}\">\n              <div class=\"field-item\">\n                <div class=\"field-header\">\n                  <div class=\"field-info\">\n                    <i class=\"pi pi-bars drag-handle\"></i>\n                    <span class=\"field-type-badge\">{{ getFieldTypeLabel(element.type) }}</span>\n                    <span class=\"field-label\">{{ element.label || '' }}</span>\n                    <el-tag v-if=\"element.required\" type=\"danger\" size=\"small\"></el-tag>\n                  </div>\n                  <div class=\"field-actions\">\n                    <el-button size=\"small\" @click=\"editField(index)\"></el-button>\n                    <el-button size=\"small\" type=\"danger\" @click=\"removeField(index)\"></el-button>\n                  </div>\n                </div>\n                \n                <!--  -->\n                <div class=\"field-preview\">\n                  <FieldPreview :field=\"element\" />\n                </div>\n              </div>\n            </template>\n          </VueDraggable>\n          \n          <div v-if=\"formData.fields.length === 0\" class=\"empty-fields\">\n            <i class=\"pi pi-inbox\"></i>\n            <p></p>\n            <el-button type=\"primary\" @click=\"addField\"></el-button>\n          </div>\n        </div>\n      </el-card>\n\n      <!--  -->\n      <el-card class=\"section-card\" shadow=\"never\">\n        <template #header>\n          <div class=\"card-header\">\n            <i class=\"pi pi-cog\"></i>\n            <span></span>\n          </div>\n        </template>\n        \n        <el-form :model=\"formData.settings\" label-width=\"150px\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-switch v-model=\"formData.settings.allowMultipleSubmissions\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-switch v-model=\"formData.settings.requireLogin\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          \n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-switch v-model=\"formData.settings.showProgressBar\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-input-number \n                  v-model=\"formData.settings.maxSubmissions\" \n                  :min=\"1\" \n                  placeholder=\"\"\n                />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          \n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-date-picker\n                  v-model=\"formData.settings.startDate\"\n                  type=\"datetime\"\n                  placeholder=\"\"\n                  format=\"YYYY-MM-DD HH:mm:ss\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"\">\n                <el-date-picker\n                  v-model=\"formData.settings.endDate\"\n                  type=\"datetime\"\n                  placeholder=\"\"\n                  format=\"YYYY-MM-DD HH:mm:ss\"\n                />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          \n          <el-form-item label=\"\">\n            <el-input v-model=\"formData.settings.submitButtonText\" placeholder=\"\" />\n          </el-form-item>\n          \n          <el-form-item label=\"\">\n            <el-input \n              v-model=\"formData.settings.successMessage\" \n              type=\"textarea\"\n              placeholder=\"\"\n            />\n          </el-form-item>\n          \n          <el-form-item label=\"\">\n            <el-select\n              v-model=\"formData.settings.notificationEmails\"\n              multiple\n              filterable\n              allow-create\n              placeholder=\"\"\n            >\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </div>\n\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-button @click=\"handleClose\"></el-button>\n        <el-button type=\"primary\" @click=\"handleSave\" :loading=\"saving\">\n          {{ isEdit ? '' : '' }}\n        </el-button>\n      </div>\n    </template>\n\n    <!--  -->\n    <FieldEditorDialog\n      v-model:visible=\"showFieldEditor\"\n      :field-data=\"editingField\"\n      @saved=\"handleFieldSaved\"\n    />\n  </el-dialog>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, watch, nextTick } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { VueDraggable } from 'vue-draggable-plus'\n\nimport FieldPreview from './FieldPreview.vue'\nimport FieldEditorDialog from './FieldEditorDialog.vue'\nimport DynamicFormService from '@/service/DynamicFormService'\n\n// Props\nconst props = defineProps({\n  visible: {\n    type: Boolean,\n    default: false\n  },\n  templateData: {\n    type: Object,\n    default: null\n  }\n})\n\n// Emits\nconst emit = defineEmits(['update:visible', 'saved'])\n\n// \nconst dialogVisible = computed({\n  get: () => props.visible,\n  set: (value) => emit('update:visible', value)\n})\n\nconst isEdit = computed(() => !!props.templateData?.id)\nconst saving = ref(false)\nconst drag = ref(false)\n\n// \nconst formData = reactive({\n  title: '',\n  description: '',\n  category: '',\n  tags: [],\n  fields: [],\n  settings: {\n    allowMultipleSubmissions: true,\n    requireLogin: true,\n    showProgressBar: false,\n    submitButtonText: '',\n    successMessage: '',\n    redirectUrl: '',\n    notificationEmails: [],\n    startDate: null,\n    endDate: null,\n    maxSubmissions: null\n  }\n})\n\n// \nconst rules = {\n  title: [\n    { required: true, message: '', trigger: 'blur' },\n    { min: 2, max: 100, message: ' 2  100 ', trigger: 'blur' }\n  ],\n  category: [\n    { required: true, message: '', trigger: 'change' }\n  ],\n  description: [\n    { max: 500, message: ' 500 ', trigger: 'blur' }\n  ]\n}\n\n// \nconst inputVisible = ref(false)\nconst inputValue = ref('')\nconst inputRef = ref()\n\n// \nconst showFieldEditor = ref(false)\nconst editingField = ref(null)\nconst editingFieldIndex = ref(-1)\n\n// \nconst formRef = ref()\n\n// \nconst fieldTypeLabels = {\n  'text': '',\n  'textarea': '',\n  'select': '',\n  'radio': '',\n  'checkbox': '',\n  'date': '',\n  'number': '',\n  'email': '',\n  'file': ''\n}\n\n// \nconst getFieldTypeLabel = (type) => {\n  return fieldTypeLabels[type] || type\n}\n\nconst initFormData = () => {\n  if (props.templateData && isEdit.value) {\n    Object.assign(formData, {\n      title: props.templateData.title || '',\n      description: props.templateData.description || '',\n      category: props.templateData.category || '',\n      tags: [...(props.templateData.tags || [])],\n      fields: props.templateData.fields?.map(field => ({ ...field })) || [],\n      settings: { ...formData.settings, ...(props.templateData.settings || {}) }\n    })\n  } else {\n    // \n    Object.assign(formData, {\n      title: '',\n      description: '',\n      category: '',\n      tags: [],\n      fields: [],\n      settings: {\n        allowMultipleSubmissions: true,\n        requireLogin: true,\n        showProgressBar: false,\n        submitButtonText: '',\n        successMessage: '',\n        redirectUrl: '',\n        notificationEmails: [],\n        startDate: null,\n        endDate: null,\n        maxSubmissions: null\n      }\n    })\n  }\n}\n\nconst addField = () => {\n  const newField = {\n    id: DynamicFormService.generateId(),\n    type: 'text',\n    label: '',\n    placeholder: '',\n    required: false,\n    validation: null,\n    options: [],\n    defaultValue: null,\n    order: formData.fields.length,\n    width: '100%',\n    helpText: '',\n    conditional: null\n  }\n  \n  editingField.value = newField\n  editingFieldIndex.value = -1\n  showFieldEditor.value = true\n}\n\nconst editField = (index) => {\n  editingField.value = { ...formData.fields[index] }\n  editingFieldIndex.value = index\n  showFieldEditor.value = true\n}\n\nconst removeField = (index) => {\n  formData.fields.splice(index, 1)\n  // \n  formData.fields.forEach((field, idx) => {\n    field.order = idx\n  })\n}\n\nconst handleFieldSaved = (fieldData) => {\n  console.log('handleFieldSaved called with:', fieldData);\n  if (editingFieldIndex.value >= 0) {\n    // \n    formData.fields[editingFieldIndex.value] = { ...fieldData }\n  } else {\n    // \n    fieldData.order = formData.fields.length\n    formData.fields.push(fieldData)\n  }\n  console.log('formData.fields after push:', formData.fields);\n  \n  showFieldEditor.value = false\n  editingField.value = null\n  editingFieldIndex.value = -1\n}\n\n// \nconst removeTag = (tag) => {\n  formData.tags.splice(formData.tags.indexOf(tag), 1)\n}\n\nconst showInput = () => {\n  inputVisible.value = true\n  nextTick(() => {\n    inputRef.value?.input?.focus()\n  })\n}\n\nconst handleInputConfirm = () => {\n  if (inputValue.value && !formData.tags.includes(inputValue.value)) {\n    formData.tags.push(inputValue.value)\n  }\n  inputVisible.value = false\n  inputValue.value = ''\n}\n\nconst handleSave = async () => {\n  try {\n    // \n    await formRef.value?.validate()\n    \n    if (formData.fields.length === 0) {\n      ElMessage.warning('')\n      return\n    }\n    \n    saving.value = true\n    \n    const submitData = {\n      title: formData.title,\n      description: formData.description,\n      category: formData.category,\n      tags: formData.tags,\n      fields: formData.fields,\n      settings: formData.settings\n    }\n    \n    if (isEdit.value) {\n      await DynamicFormService.updateFormTemplate(props.templateData.id, submitData)\n      ElMessage.success('')\n    } else {\n      await DynamicFormService.createFormTemplate(submitData)\n      ElMessage.success('')\n    }\n    \n    emit('saved')\n  } catch (error) {\n    console.error(':', error)\n    ElMessage.error('')\n  } finally {\n    saving.value = false\n  }\n}\n\nconst handleClose = () => {\n  dialogVisible.value = false\n}\n\n// \nwatch(() => props.visible, (newVal) => {\n  if (newVal) {\n    initFormData()\n  }\n})\n</script>\n\n<style scoped>\n.form-template-dialog {\n  max-height: 70vh;\n  overflow-y: auto;\n}\n\n.section-card {\n  margin-bottom: 20px;\n}\n\n.section-card:last-child {\n  margin-bottom: 0;\n}\n\n.card-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n}\n\n.add-field-btn {\n  margin-left: auto;\n}\n\n.fields-designer {\n  min-height: 200px;\n}\n\n.field-item {\n  border: 1px solid #e4e7ed;\n  border-radius: 6px;\n  margin-bottom: 12px;\n  background: #fafafa;\n}\n\n.field-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: white;\n  border-bottom: 1px solid #e4e7ed;\n  border-radius: 6px 6px 0 0;\n}\n\n.field-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.drag-handle {\n  cursor: move;\n  color: #909399;\n}\n\n.field-type-badge {\n  background: #409eff;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n}\n\n.field-label {\n  font-weight: 500;\n}\n\n.field-preview {\n  padding: 16px;\n}\n\n.empty-fields {\n  text-align: center;\n  padding: 40px;\n  color: #909399;\n}\n\n.empty-fields i {\n  font-size: 48px;\n  margin-bottom: 16px;\n  display: block;\n}\n\n.tag-item {\n  margin-right: 8px;\n  margin-bottom: 8px;\n}\n\n.tag-input {\n  width: 120px;\n  margin-right: 8px;\n  vertical-align: bottom;\n}\n\n.button-new-tag {\n  height: 24px;\n  line-height: 22px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.dialog-footer {\n  text-align: right;\n}\n\n:deep(.el-card__header) {\n  padding: 16px 20px;\n  background: #f8f9fa;\n}\n\n:deep(.el-card__body) {\n  padding: 20px;\n}\n</style>","import script from \"./FormTemplateDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormTemplateDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormTemplateDialog.vue?vue&type=style&index=0&id=4a950e75&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4a950e75\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"\"\r\n    width=\"80%\"\r\n    :close-on-click-modal=\"false\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <div class=\"form-preview-dialog\">\r\n      <!--  -->\r\n      <div v-if=\"templateData\" class=\"form-info-section\">\r\n        <div class=\"form-header\">\r\n          <h2 class=\"form-title\">{{ templateData.title }}</h2>\r\n          <div class=\"form-meta\">\r\n            <el-tag v-if=\"templateData.category\" type=\"info\" size=\"small\">\r\n              {{ getCategoryLabel(templateData.category) }}\r\n            </el-tag>\r\n            <el-tag :type=\"getStatusType(templateData.status)\" size=\"small\">\r\n              {{ getStatusLabel(templateData.status) }}\r\n            </el-tag>\r\n            <span class=\"created-date\">\r\n              : {{ formatDate(templateData.createdAt) }}\r\n            </span>\r\n          </div>\r\n          <p v-if=\"templateData.description\" class=\"form-description\">\r\n            {{ templateData.description }}\r\n          </p>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"form-stats\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\">\r\n              <el-statistic title=\"\" :value=\"fieldCount\" />\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-statistic title=\"\" :value=\"requiredFieldCount\" />\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-statistic title=\"\" :value=\"templateData.responseCount || 0\" />\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-statistic title=\"\" :value=\"formatDate(templateData.updatedAt)\" format=\"YYYY-MM-DD\" />\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"form-fields-section\">\r\n        <h3></h3>\r\n        \r\n        <!--  -->\r\n        <div v-if=\"!templateData?.fields || templateData.fields.length === 0\" class=\"no-fields\">\r\n          <el-empty description=\"\">\r\n            <el-button type=\"primary\" @click=\"goToDesigner\">\r\n              \r\n            </el-button>\r\n          </el-empty>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div v-else class=\"fields-preview\">\r\n          <div\r\n            v-for=\"(field, index) in sortedFields\"\r\n            :key=\"field.id\"\r\n            class=\"field-preview-item\"\r\n          >\r\n            <div class=\"field-header\">\r\n              <div class=\"field-info\">\r\n                <span class=\"field-order\">{{ index + 1 }}.</span>\r\n                <span class=\"field-label\">\r\n                  {{ field.label }}\r\n                  <el-tag v-if=\"field.required\" type=\"danger\" size=\"small\"></el-tag>\r\n                </span>\r\n                <el-tag :type=\"getFieldTypeColor(field.type)\" size=\"small\">\r\n                  {{ getFieldTypeLabel(field.type) }}\r\n                </el-tag>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"field-details\">\r\n              <p v-if=\"field.placeholder\" class=\"field-placeholder\">\r\n                <strong>:</strong> {{ field.placeholder }}\r\n              </p>\r\n              <p v-if=\"field.helpText\" class=\"field-help\">\r\n                <strong>:</strong> {{ field.helpText }}\r\n              </p>\r\n              <p v-if=\"field.defaultValue\" class=\"field-default\">\r\n                <strong>:</strong> {{ field.defaultValue }}\r\n              </p>\r\n              \r\n              <!--  -->\r\n              <div v-if=\"hasOptions(field)\" class=\"field-options\">\r\n                <strong>:</strong>\r\n                <el-tag\r\n                  v-for=\"option in field.options\"\r\n                  :key=\"option.value\"\r\n                  size=\"small\"\r\n                  class=\"option-tag\"\r\n                >\r\n                  {{ option.label }}\r\n                </el-tag>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <div v-if=\"hasValidation(field)\" class=\"field-validation\">\r\n                <strong>:</strong>\r\n                <ul class=\"validation-list\">\r\n                  <li v-if=\"field.minLength\">: {{ field.minLength }}</li>\r\n                  <li v-if=\"field.maxLength\">: {{ field.maxLength }}</li>\r\n                  <li v-if=\"field.min !== undefined\">: {{ field.min }}</li>\r\n                  <li v-if=\"field.max !== undefined\">: {{ field.max }}</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"field-demo\">\r\n              <FieldPreview :field=\"field\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div v-if=\"templateData?.settings\" class=\"form-settings-section\">\r\n        <h3></h3>\r\n        <el-descriptions :column=\"2\" border>\r\n          <el-descriptions-item label=\"\">\r\n            <el-tag :type=\"templateData.settings.allowMultipleSubmissions ? 'success' : 'info'\">\r\n              {{ templateData.settings.allowMultipleSubmissions ? '' : '' }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"\">\r\n            <el-tag :type=\"templateData.settings.showProgressBar ? 'success' : 'info'\">\r\n              {{ templateData.settings.showProgressBar ? '' : '' }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"\">\r\n            {{ templateData.settings.endDate ? formatDate(templateData.settings.endDate) : '' }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"\">\r\n            {{ templateData.settings.submitButtonText || '' }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"\">\r\n            {{ templateData.settings.successMessage || '' }}\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n      </div>\r\n    </div>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button type=\"info\" @click=\"goToFillPage\" v-if=\"templateData?.status === 'published'\">\r\n          \r\n        </el-button>\r\n        <el-button type=\"primary\" @click=\"goToDesigner\">\r\n          \r\n        </el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport FieldPreview from './FieldPreview.vue'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  templateData: {\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible'])\r\n\r\n// \r\nconst router = useRouter()\r\n\r\n// \r\nconst dialogVisible = ref(false)\r\n\r\n// \r\nconst fieldCount = computed(() => {\r\n  return props.templateData?.fields?.length || 0\r\n})\r\n\r\nconst requiredFieldCount = computed(() => {\r\n  return props.templateData?.fields?.filter(field => field.required)?.length || 0\r\n})\r\n\r\nconst sortedFields = computed(() => {\r\n  if (!props.templateData?.fields) return []\r\n  return [...props.templateData.fields].sort((a, b) => (a.order || 0) - (b.order || 0))\r\n})\r\n\r\n// \r\nconst getCategoryLabel = (category) => {\r\n  const labels = {\r\n    'hr': '',\r\n    'finance': '',\r\n    'purchase': '',\r\n    'other': ''\r\n  }\r\n  return labels[category] || category || ''\r\n}\r\n\r\nconst getStatusLabel = (status) => {\r\n  const labels = {\r\n    'draft': '',\r\n    'published': '',\r\n    'closed': ''\r\n  }\r\n  return labels[status] || status || ''\r\n}\r\n\r\nconst getStatusType = (status) => {\r\n  const types = {\r\n    'draft': 'info',\r\n    'published': 'success',\r\n    'closed': 'danger'\r\n  }\r\n  return types[status] || ''\r\n}\r\n\r\nconst getFieldTypeLabel = (type) => {\r\n  const labels = {\r\n    'text': '',\r\n    'textarea': '',\r\n    'select': '',\r\n    'radio': '',\r\n    'checkbox': '',\r\n    'date': '',\r\n    'number': '',\r\n    'email': '',\r\n    'file': ''\r\n  }\r\n  return labels[type] || type\r\n}\r\n\r\nconst getFieldTypeColor = (type) => {\r\n  const colors = {\r\n    'text': '',\r\n    'textarea': 'info',\r\n    'select': 'success',\r\n    'radio': 'warning',\r\n    'checkbox': 'warning',\r\n    'date': 'info',\r\n    'number': 'success',\r\n    'email': 'info',\r\n    'file': 'danger'\r\n  }\r\n  return colors[type] || ''\r\n}\r\n\r\nconst hasOptions = (field) => {\r\n  return ['select', 'radio', 'checkbox'].includes(field.type) && field.options?.length > 0\r\n}\r\n\r\nconst hasValidation = (field) => {\r\n  return field.minLength || field.maxLength || field.min !== undefined || field.max !== undefined\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return ''\r\n  return new Date(dateString).toLocaleString('zh-TW')\r\n}\r\n\r\nconst handleClose = () => {\r\n  dialogVisible.value = false\r\n  emit('update:visible', false)\r\n}\r\n\r\nconst goToDesigner = () => {\r\n  if (props.templateData?.id) {\r\n    router.push(`/home/SystemManagement/FormDesigner/${props.templateData.id}`)\r\n  } else {\r\n    router.push('/home/SystemManagement/FormDesigner')\r\n  }\r\n  handleClose()\r\n}\r\n\r\nconst goToFillPage = () => {\r\n  if (props.templateData?.id) {\r\n    router.push(`/form/fill/${props.templateData.id}`)\r\n  }\r\n  handleClose()\r\n}\r\n\r\n//  visible \r\nwatch(() => props.visible, (newValue) => {\r\n  dialogVisible.value = newValue\r\n})\r\n\r\nwatch(dialogVisible, (newValue) => {\r\n  if (!newValue) {\r\n    emit('update:visible', false)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-preview-dialog {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-info-section {\r\n  margin-bottom: 24px;\r\n  padding: 20px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.form-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-title {\r\n  margin: 0 0 12px 0;\r\n  color: #303133;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n}\r\n\r\n.form-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.created-date {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-description {\r\n  margin: 0;\r\n  color: #606266;\r\n  line-height: 1.6;\r\n}\r\n\r\n.form-stats {\r\n  padding: 16px;\r\n  background: white;\r\n  border-radius: 6px;\r\n  border: 1px solid #e4e7ed;\r\n}\r\n\r\n.form-fields-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.form-fields-section h3 {\r\n  margin: 0 0 16px 0;\r\n  color: #303133;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.no-fields {\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n}\r\n\r\n.fields-preview {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.field-preview-item {\r\n  padding: 16px;\r\n  background: white;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 8px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.field-preview-item:hover {\r\n  border-color: #c6e2ff;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.field-header {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.field-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.field-order {\r\n  font-weight: 600;\r\n  color: #409eff;\r\n}\r\n\r\n.field-label {\r\n  font-weight: 500;\r\n  color: #303133;\r\n}\r\n\r\n.field-details {\r\n  margin-bottom: 16px;\r\n  padding-left: 20px;\r\n}\r\n\r\n.field-details p {\r\n  margin: 4px 0;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.field-options {\r\n  margin: 8px 0;\r\n}\r\n\r\n.option-tag {\r\n  margin: 2px 4px 2px 0;\r\n}\r\n\r\n.field-validation {\r\n  margin: 8px 0;\r\n}\r\n\r\n.validation-list {\r\n  margin: 4px 0 0 16px;\r\n  padding: 0;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.validation-list li {\r\n  margin: 2px 0;\r\n}\r\n\r\n.field-demo {\r\n  padding: 12px;\r\n  background: #fafafa;\r\n  border-radius: 6px;\r\n  border: 1px dashed #d9d9d9;\r\n}\r\n\r\n.form-settings-section h3 {\r\n  margin: 0 0 16px 0;\r\n  color: #303133;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .form-meta {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .field-info {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>","import script from \"./FormPreviewDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormPreviewDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormPreviewDialog.vue?vue&type=style&index=0&id=c361ab14&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c361ab14\"]])\n\nexport default __exports__","<template>\n  <el-dialog\n    :model-value=\"visible\"\n    title=\"\"\n    width=\"70%\"\n    @update:model-value=\"$emit('update:visible', $event)\"\n  >\n    <div v-if=\"!templateData\">\n      <p></p>\n    </div>\n    <div v-else>\n      <h3>{{ templateData.title }}</h3>\n      <p>{{ templateData.description }}</p>\n      <el-table :data=\"responses\" v-loading=\"loading\">\n        <el-table-column prop=\"submittedAt\" label=\"\" width=\"180\">\n          <template #default=\"{ row }\">\n            {{ formatDate(row.submittedAt) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"\">\n          <template #default=\"{ row }\">\n            <pre>{{ JSON.stringify(row.data, null, 2) }}</pre>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <template #footer>\n      <el-button @click=\"exportResponses('excel')\"> Excel</el-button>\n      <el-button @click=\"$emit('update:visible', false)\"></el-button>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport DynamicFormService from '@/service/DynamicFormService';\n\nconst props = defineProps({\n  visible: Boolean,\n  templateData: Object,\n});\n\ndefineEmits(['update:visible']);\n\nconst loading = ref(false);\nconst responses = ref([]);\n\nconst loadResponses = async () => {\n  if (!props.templateData?.id) {\n    responses.value = [];\n    return;\n  }\n  loading.value = true;\n  try {\n    const response = await DynamicFormService.getFormResponses(props.templateData.id);\n    responses.value = response.data;\n  } catch (error) {\n    console.error(':', error);\n    ElMessage.error('');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst formatDate = (dateString) => {\n  return new Date(dateString).toLocaleString('zh-TW');\n};\n\nconst exportResponses = async (format) => {\n  if (!props.templateData?.id) {\n    ElMessage.error('');\n    return;\n  }\n  try {\n    const response = await DynamicFormService.exportFormResponses(props.templateData.id, format);\n    const blob = new Blob([response.data], { type: response.headers['content-type'] });\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = `${props.templateData.title}_responses.${format === 'excel' ? 'xlsx' : 'csv'}`;\n    link.click();\n  } catch (error) {\n    console.error(':', error);\n    ElMessage.error('');\n  }\n};\n\nwatch(() => props.visible, (newValue) => {\n  if (newValue) {\n    loadResponses();\n  }\n});\n\nonMounted(() => {\n  if (props.visible) {\n    loadResponses();\n  }\n});\n</script>\n\n<style scoped>\npre {\n  background-color: #f4f4f5;\n  padding: 10px;\n  border-radius: 4px;\n}\n</style>\n","import script from \"./FormResponseDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormResponseDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormResponseDialog.vue?vue&type=style&index=0&id=06e768f5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-06e768f5\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"\"\r\n    width=\"90%\"\r\n    :close-on-click-modal=\"false\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <div class=\"form-analytics-dialog\">\r\n      <!--  -->\r\n      <div v-if=\"loading\" class=\"loading-container\">\r\n        <el-skeleton :rows=\"8\" animated />\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div v-else class=\"analytics-content\">\r\n        <!--  -->\r\n        <div class=\"stats-overview\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\">\r\n              <el-card class=\"stat-card\">\r\n                <el-statistic\r\n                  title=\"\"\r\n                  :value=\"analytics.totalResponses || 0\"\r\n                  class=\"stat-item\"\r\n                >\r\n                  <template #suffix>\r\n                    <i class=\"pi pi-file\" style=\"color: #409eff\"></i>\r\n                  </template>\r\n                </el-statistic>\r\n              </el-card>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-card class=\"stat-card\">\r\n                <el-statistic\r\n                  title=\"\"\r\n                  :value=\"completionRate\"\r\n                  suffix=\"%\"\r\n                  class=\"stat-item\"\r\n                >\r\n                  <template #suffix>\r\n                    <span>%</span>\r\n                    <i class=\"pi pi-check-circle\" style=\"color: #67c23a\"></i>\r\n                  </template>\r\n                </el-statistic>\r\n              </el-card>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-card class=\"stat-card\">\r\n                <el-statistic\r\n                  title=\"\"\r\n                  :value=\"averageTime\"\r\n                  suffix=\"\"\r\n                  class=\"stat-item\"\r\n                >\r\n                  <template #suffix>\r\n                    <span></span>\r\n                    <i class=\"pi pi-clock\" style=\"color: #e6a23c\"></i>\r\n                  </template>\r\n                </el-statistic>\r\n              </el-card>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-card class=\"stat-card\">\r\n                <el-statistic\r\n                  title=\"\"\r\n                  :value=\"lastSubmissionDate\"\r\n                  class=\"stat-item\"\r\n                >\r\n                  <template #suffix>\r\n                    <i class=\"pi pi-calendar\" style=\"color: #909399\"></i>\r\n                  </template>\r\n                </el-statistic>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"development-notice\">\r\n          <el-alert\r\n            title=\"\"\r\n            type=\"info\"\r\n            description=\"\"\r\n            show-icon\r\n            :closable=\"false\"\r\n          />\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"form-info\">\r\n          <el-card>\r\n            <template #header>\r\n              <span></span>\r\n            </template>\r\n            <el-descriptions :column=\"2\" border>\r\n              <el-descriptions-item label=\"\">\r\n                {{ templateData?.title || '' }}\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"\">\r\n                <el-tag :type=\"getStatusType(templateData?.status)\">\r\n                  {{ getStatusLabel(templateData?.status) }}\r\n                </el-tag>\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"\">\r\n                {{ formatDate(templateData?.createdAt) }}\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"\">\r\n                {{ formatDate(templateData?.updatedAt) }}\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"\">\r\n                {{ templateData?.fields?.length || 0 }}\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"\">\r\n                {{ requiredFieldsCount }}\r\n              </el-descriptions-item>\r\n            </el-descriptions>\r\n          </el-card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button type=\"primary\" @click=\"viewResponses\"></el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  templateData: {\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible', 'view-responses'])\r\n\r\n// \r\nconst dialogVisible = ref(false)\r\nconst loading = ref(false)\r\n\r\n// \r\nconst analytics = ref({\r\n  totalResponses: 0,\r\n  completedResponses: 0,\r\n  averageCompletionTime: 0,\r\n  lastSubmission: null\r\n})\r\n\r\n// \r\nconst completionRate = computed(() => {\r\n  if (analytics.value.totalResponses === 0) return 0\r\n  return Math.round((analytics.value.completedResponses / analytics.value.totalResponses) * 100)\r\n})\r\n\r\nconst averageTime = computed(() => {\r\n  return Math.round(analytics.value.averageCompletionTime / 60) // \r\n})\r\n\r\nconst lastSubmissionDate = computed(() => {\r\n  if (!analytics.value.lastSubmission) return ''\r\n  return formatDate(analytics.value.lastSubmission)\r\n})\r\n\r\nconst requiredFieldsCount = computed(() => {\r\n  return props.templateData?.fields?.filter(field => field.required)?.length || 0\r\n})\r\n\r\n// \r\nconst getStatusType = (status) => {\r\n  const types = {\r\n    'draft': 'info',\r\n    'published': 'success',\r\n    'closed': 'danger'\r\n  }\r\n  return types[status] || ''\r\n}\r\n\r\nconst getStatusLabel = (status) => {\r\n  const labels = {\r\n    'draft': '',\r\n    'published': '',\r\n    'closed': ''\r\n  }\r\n  return labels[status] || status || ''\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return ''\r\n  return new Date(dateString).toLocaleString('zh-TW')\r\n}\r\n\r\nconst handleClose = () => {\r\n  dialogVisible.value = false\r\n  emit('update:visible', false)\r\n}\r\n\r\nconst viewResponses = () => {\r\n  emit('view-responses', props.templateData)\r\n  handleClose()\r\n}\r\n\r\nconst loadAnalytics = async () => {\r\n  if (!props.templateData?.id) return\r\n\r\n  loading.value = true\r\n  try {\r\n    // \r\n    await new Promise(resolve => setTimeout(resolve, 1000))\r\n    \r\n    // \r\n    analytics.value = {\r\n      totalResponses: Math.floor(Math.random() * 100),\r\n      completedResponses: Math.floor(Math.random() * 80),\r\n      averageCompletionTime: Math.floor(Math.random() * 600) + 120, // 2-12\r\n      lastSubmission: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000) // 7\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n//  visible \r\nwatch(() => props.visible, (newValue) => {\r\n  dialogVisible.value = newValue\r\n  if (newValue) {\r\n    loadAnalytics()\r\n  }\r\n})\r\n\r\nwatch(dialogVisible, (newValue) => {\r\n  if (!newValue) {\r\n    emit('update:visible', false)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-analytics-dialog {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.loading-container {\r\n  padding: 40px;\r\n}\r\n\r\n.analytics-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.stats-overview {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.stat-card {\r\n  text-align: center;\r\n}\r\n\r\n.stat-item {\r\n  padding: 16px;\r\n}\r\n\r\n.development-notice {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.form-info {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .stats-overview .el-col {\r\n    margin-bottom: 16px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>","import script from \"./FormAnalyticsDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormAnalyticsDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormAnalyticsDialog.vue?vue&type=style&index=0&id=3b8adaaa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3b8adaaa\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"form-template-management\">\r\n    <!--  -->\r\n    <div class=\"page-header\">\r\n      <h2>\r\n        <i class=\"pi pi-file-edit\"></i>\r\n        \r\n      </h2>\r\n      <p class=\"page-description\"></p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"action-bar\">\r\n      <el-button \r\n        type=\"primary\" \r\n        @click=\"goToFormDesigner\"\r\n        :icon=\"Plus\"\r\n      >\r\n        \r\n      </el-button>\r\n      <el-button \r\n        type=\"success\" \r\n        @click=\"showCreateDialog = true\"\r\n        :icon=\"Edit\"\r\n      >\r\n        \r\n      </el-button>\r\n      <el-button \r\n        @click=\"refreshList\"\r\n        :icon=\"Refresh\"\r\n      >\r\n        \r\n      </el-button>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"filter-bar\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input\r\n            v-model=\"searchTerm\"\r\n            placeholder=\"...\"\r\n            :prefix-icon=\"Search\"\r\n            @input=\"handleSearch\"\r\n            clearable\r\n          />\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-select v-model=\"selectedCategory\" placeholder=\"\" clearable @change=\"handleFilter\">\r\n            <el-option label=\"\" value=\"\" />\r\n            <el-option label=\"\" value=\"hr\" />\r\n            <el-option label=\"\" value=\"finance\" />\r\n            <el-option label=\"\" value=\"purchase\" />\r\n            <el-option label=\"\" value=\"other\" />\r\n          </el-select>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-select v-model=\"selectedStatus\" placeholder=\"\" clearable @change=\"handleFilter\">\r\n            <el-option label=\"\" value=\"\" />\r\n            <el-option label=\"\" value=\"draft\" />\r\n            <el-option label=\"\" value=\"published\" />\r\n            <el-option label=\"\" value=\"closed\" />\r\n          </el-select>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"template-list\">\r\n      <el-table \r\n        :data=\"formTemplates\" \r\n        v-loading=\"loading\"\r\n        stripe\r\n        @sort-change=\"handleSortChange\"\r\n      >\r\n        <el-table-column prop=\"title\" label=\"\" sortable min-width=\"200\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"template-title\">\r\n              <strong>{{ row.title }}</strong>\r\n              <el-tag \r\n                :type=\"getStatusType(row.status)\" \r\n                size=\"small\"\r\n                class=\"status-tag\"\r\n              >\r\n                {{ getStatusLabel(row.status) }}\r\n              </el-tag>\r\n            </div>\r\n            <div class=\"template-description\">{{ row.description }}</div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"category\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag size=\"small\">{{ getCategoryLabel(row.category) }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"responseCount\" label=\"\" width=\"100\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-badge :value=\"row.responseCount\" class=\"response-badge\">\r\n              <i class=\"pi pi-file\"></i>\r\n            </el-badge>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"createdAt\" label=\"\" width=\"180\" sortable>\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.createdAt) }}\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"updatedAt\" label=\"\" width=\"180\" sortable>\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.updatedAt) }}\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"\" width=\"320\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-button-group>\r\n              <el-button \r\n                size=\"small\" \r\n                @click=\"viewTemplate(row)\"\r\n                :icon=\"View\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"primary\" \r\n                @click=\"editTemplate(row)\"\r\n                :icon=\"Edit\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"info\" \r\n                @click=\"viewResponses(row)\"\r\n                :icon=\"Document\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"primary\" \r\n                @click=\"showAnalytics(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                v-if=\"row.status === 'draft'\"\r\n                size=\"small\" \r\n                type=\"success\"\r\n                @click=\"publishTemplate(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                v-if=\"row.status === 'published'\"\r\n                size=\"small\" \r\n                type=\"warning\"\r\n                @click=\"closeTemplate(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                @click=\"copyTemplate(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"danger\" \r\n                @click=\"deleteTemplate(row)\"\r\n                :icon=\"Delete\"\r\n              >\r\n                \r\n              </el-button>\r\n            </el-button-group>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!--  -->\r\n      <div class=\"pagination-wrapper\">\r\n        <el-pagination\r\n          v-model:current-page=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :total=\"totalCount\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- / -->\r\n    <FormTemplateDialog\r\n      v-model:visible=\"showCreateDialog\"\r\n      :template-data=\"selectedTemplate\"\r\n      @saved=\"handleTemplateSaved\"\r\n    />\r\n\r\n    <!--  -->\r\n    <FormPreviewDialog\r\n      v-model:visible=\"showPreviewDialog\"\r\n      :template-data=\"selectedTemplate\"\r\n    />\r\n\r\n    <!--  -->\r\n    <FormResponseDialog\r\n      v-model:visible=\"showResponseDialog\"\r\n      :template-data=\"selectedTemplate\"\r\n    />\r\n\r\n    <FormAnalyticsDialog\r\n      v-model:visible=\"showAnalyticsDialog\"\r\n      :template-data=\"selectedTemplate\"\r\n      @view-responses=\"handleViewResponses\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { \r\n  Plus, \r\n  Refresh, \r\n  Search, \r\n  View, \r\n  Edit, \r\n  Delete, \r\n  Document \r\n} from '@element-plus/icons-vue'\r\nimport { useRouter } from 'vue-router'\r\nimport FormTemplateDialog from './FormTemplateDialog.vue'\r\nimport FormPreviewDialog from './FormPreviewDialog.vue'\r\nimport FormResponseDialog from './FormResponseDialog.vue'\r\nimport FormAnalyticsDialog from './FormAnalyticsDialog.vue'\r\nimport DynamicFormService from '@/service/DynamicFormService.js'\r\n\r\n// \r\nconst router = useRouter()\r\n\r\n// \r\nconst loading = ref(false)\r\nconst formTemplates = ref([])\r\nconst searchTerm = ref('')\r\nconst selectedCategory = ref('')\r\nconst selectedStatus = ref('')\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(20)\r\nconst totalCount = ref(0)\r\nconst sortField = ref('createdAt')\r\nconst sortOrder = ref('desc')\r\n\r\n// \r\nconst showCreateDialog = ref(false)\r\nconst showPreviewDialog = ref(false)\r\nconst showResponseDialog = ref(false)\r\nconst showAnalyticsDialog = ref(false)\r\nconst selectedTemplate = ref(null)\r\n\r\n// \r\nconst categoryLabels = {\r\n  'hr': '',\r\n  'finance': '',\r\n  'purchase': '',\r\n  'other': ''\r\n}\r\n\r\n// \r\nconst getCategoryLabel = (category) => {\r\n  return categoryLabels[category] || category || ''\r\n}\r\n\r\nconst getStatusLabel = (status) => {\r\n  switch (status) {\r\n    case 'draft':\r\n      return '';\r\n    case 'published':\r\n      return '';\r\n    case 'closed':\r\n      return '';\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n\r\nconst getStatusType = (status) => {\r\n  switch (status) {\r\n    case 'draft':\r\n      return 'info';\r\n    case 'published':\r\n      return 'success';\r\n    case 'closed':\r\n      return 'danger';\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n\r\n\r\n\r\n// \r\nconst goToFormDesigner = () => {\r\n  router.push({name:'FormDesigner'})\r\n  \r\n\r\n}\r\n\r\n// \r\nconst loadFormTemplates = async () => {\r\n  loading.value = true\r\n  try {\r\n    const params = {\r\n      page: currentPage.value,\r\n      pageSize: pageSize.value,\r\n      category: selectedCategory.value || undefined,\r\n      status: selectedStatus.value || undefined\r\n    }\r\n\r\n    const response = await DynamicFormService.getFormTemplates(params)\r\n    console.log('API :', response.data);\r\n    \r\n    // \r\n    if (Array.isArray(response.data)) {\r\n      // \r\n      formTemplates.value = response.data\r\n      totalCount.value = response.data.length\r\n    } else if (response.data.items) {\r\n      //  items \r\n      formTemplates.value = response.data.items\r\n      totalCount.value = response.data.totalCount || response.data.items.length\r\n    } else {\r\n      // \r\n      console.warn(' API :', response.data)\r\n      formTemplates.value = []\r\n      totalCount.value = 0\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst handleSearch = async () => {\r\n  if (searchTerm.value.trim()) {\r\n    loading.value = true\r\n    try {\r\n      const response = await DynamicFormService.searchFormTemplates(searchTerm.value)\r\n      formTemplates.value = response.data\r\n      totalCount.value = response.data.length\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  } else {\r\n    loadFormTemplates()\r\n  }\r\n}\r\n\r\nconst handleFilter = () => {\r\n  currentPage.value = 1\r\n  loadFormTemplates()\r\n}\r\n\r\nconst handleSortChange = ({ prop, order }) => {\r\n  sortField.value = prop\r\n  sortOrder.value = order === 'ascending' ? 'asc' : 'desc'\r\n  loadFormTemplates()\r\n}\r\n\r\nconst handleSizeChange = (newSize) => {\r\n  pageSize.value = newSize\r\n  currentPage.value = 1\r\n  loadFormTemplates()\r\n}\r\n\r\nconst handleCurrentChange = (newPage) => {\r\n  currentPage.value = newPage\r\n  loadFormTemplates()\r\n}\r\n\r\nconst refreshList = () => {\r\n  loadFormTemplates()\r\n}\r\n\r\nconst viewTemplate = (template) => {\r\n  selectedTemplate.value = template\r\n  showPreviewDialog.value = true\r\n}\r\n\r\nconst editTemplate = (template) => {\r\n  // \r\n  router.push(`/home/SystemManagement/FormDesigner/${template.id}`)\r\n}\r\n\r\nconst viewResponses = (template) => {\r\n  selectedTemplate.value = template\r\n  showResponseDialog.value = true\r\n}\r\n\r\nconst showAnalytics = (template) => {\r\n  selectedTemplate.value = template;\r\n  showAnalyticsDialog.value = true;\r\n};\r\n\r\n// \r\nconst handleViewResponses = (template) => {\r\n  selectedTemplate.value = template;\r\n  showAnalyticsDialog.value = false;\r\n  showResponseDialog.value = true;\r\n};\r\n\r\nconst deleteTemplate = async (template) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      `${template.title}`,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n\r\n    await DynamicFormService.deleteFormTemplate(template.id)\r\n    ElMessage.success('')\r\n    loadFormTemplates()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n\r\nconst publishTemplate = async (template) => {\r\n  try {\r\n    await DynamicFormService.publishFormTemplate(template.id);\r\n    ElMessage.success('');\r\n    loadFormTemplates();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst closeTemplate = async (template) => {\r\n  try {\r\n    await DynamicFormService.closeFormTemplate(template.id);\r\n    ElMessage.success('');\r\n    loadFormTemplates();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst copyTemplate = async (template) => {\r\n  try {\r\n    await DynamicFormService.copyFormTemplate(template.id);\r\n    ElMessage.success('');\r\n    loadFormTemplates();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst handleTemplateSaved = () => {\r\n  showCreateDialog.value = false\r\n  selectedTemplate.value = null\r\n  loadFormTemplates()\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleString('zh-TW')\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  loadFormTemplates()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-template-management {\r\n  padding: 20px;\r\n  background: #f5f5f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n.page-header {\r\n  background: white;\r\n  padding: 24px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.page-header h2 {\r\n  margin: 0 0 8px 0;\r\n  color: #303133;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.page-description {\r\n  margin: 0;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.action-bar {\r\n  background: white;\r\n  padding: 16px 24px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.filter-bar {\r\n  background: white;\r\n  padding: 20px 24px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.template-list {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.template-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.template-description {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  line-height: 1.4;\r\n}\r\n\r\n.status-tag {\r\n  margin-left: auto;\r\n}\r\n\r\n.response-badge {\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-wrapper {\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n:deep(.el-table) {\r\n  border-radius: 0;\r\n}\r\n\r\n:deep(.el-table th) {\r\n  background-color: #fafafa;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n:deep(.el-button-group .el-button) {\r\n  margin: 0;\r\n}\r\n</style>","import script from \"./FormTemplateManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormTemplateManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormTemplateManagement.vue?vue&type=style&index=0&id=fd7db358&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fd7db358\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"form-builder\">\r\n    <!--  -->\r\n    <div class=\"toolbar\">\r\n      <div class=\"toolbar-left\">\r\n        <h3></h3>\r\n        <div class=\"template-info\" v-if=\"currentTemplate\">\r\n          <span class=\"template-title\">{{ currentTemplate.title }}</span>\r\n          <el-tag :type=\"getStatusTagType(currentTemplate.status)\" size=\"small\">\r\n            {{ getStatusText(currentTemplate.status) }}\r\n          </el-tag>\r\n        </div>\r\n        <el-button-group>\r\n          <el-button @click=\"previewMode = !previewMode\" :type=\"previewMode ? 'primary' : 'default'\">\r\n            <i class=\"pi pi-eye\"></i>\r\n            {{ previewMode ? '' : '' }}\r\n          </el-button>\r\n          <el-button @click=\"clearAll\" :icon=\"Delete\"></el-button>\r\n          <el-button @click=\"saveTemplate\" type=\"primary\" :icon=\"Check\" :loading=\"saving\">\r\n            {{ currentTemplate ? '' : '' }}\r\n          </el-button>\r\n        </el-button-group>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <el-button-group>\r\n          <el-button @click=\"showTemplateDialog = true\" :icon=\"Upload\"></el-button>\r\n          <el-button @click=\"showJsonDialog = true\" :icon=\"Document\">JSON</el-button>\r\n          <el-button @click=\"exportTemplate\" :icon=\"Download\" v-if=\"formFields.length > 0\"></el-button>\r\n        </el-button-group>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"builder-container\">\r\n      <!--  -->\r\n      <div class=\"components-panel\">\r\n        <h4></h4>\r\n        <div class=\"component-groups\">\r\n          <div class=\"component-group\">\r\n            <h5></h5>\r\n            <div class=\"component-list\">\r\n              <div\r\n                v-for=\"component in basicComponents\"\r\n                :key=\"component.type\"\r\n                class=\"component-item\"\r\n                draggable=\"true\"\r\n                @dragstart=\"handleDragStart($event, component)\"\r\n              >\r\n                <i :class=\"component.icon\"></i>\r\n                <span>{{ component.label }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"component-group\">\r\n            <h5></h5>\r\n            <div class=\"component-list\">\r\n              <div\r\n                v-for=\"component in selectionComponents\"\r\n                :key=\"component.type\"\r\n                class=\"component-item\"\r\n                draggable=\"true\"\r\n                @dragstart=\"handleDragStart($event, component)\"\r\n              >\r\n                <i :class=\"component.icon\"></i>\r\n                <span>{{ component.label }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"design-area\">\r\n        <div class=\"form-canvas\" \r\n             @drop=\"handleDrop\" \r\n             @dragover=\"handleDragOver\"\r\n             @dragenter=\"handleDragEnter\"\r\n             @dragleave=\"handleDragLeave\">\r\n          \r\n          <!--  -->\r\n          <div v-if=\"formFields.length === 0\" class=\"empty-state\">\r\n            <i class=\"pi pi-plus-circle\"></i>\r\n            <p></p>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <VueDraggable\r\n            v-if=\"formFields.length > 0\"\r\n            v-model=\"formFields\"\r\n            group=\"formFields\"\r\n            item-key=\"id\"\r\n            class=\"field-list\"\r\n            :animation=\"200\"\r\n            ghost-class=\"ghost\"\r\n            chosen-class=\"chosen\"\r\n            @end=\"handleDragEnd\"\r\n          >\r\n            <div \r\n              v-for=\"(field, index) in formFields\" \r\n              :key=\"field.id\"\r\n              class=\"field-wrapper\"\r\n              :class=\"{ 'selected': selectedFieldId === field.id }\"\r\n              @click=\"selectField(field.id)\"\r\n            >\r\n              <!--  -->\r\n              <div class=\"field-actions\">\r\n                <el-button-group>\r\n                  <el-button @click.stop=\"editField(field)\" :icon=\"Edit\" size=\"default\" />\r\n                  <el-button @click.stop=\"duplicateField(field)\" :icon=\"CopyDocument\" size=\"default\" />\r\n                  <el-button @click.stop=\"deleteField(index)\" :icon=\"Delete\" size=\"default\" type=\"danger\" class=\"delete-button\" />\r\n                </el-button-group>\r\n              </div>\r\n\r\n              <!--  -->\r\n              <FieldPreview \r\n                :field=\"field\" \r\n                :preview-mode=\"previewMode\"\r\n                @update:field=\"updateField\"\r\n              />\r\n            </div>\r\n          </VueDraggable>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"properties-panel\">\r\n        <h4></h4>\r\n        \r\n        <!--  -->\r\n        <div v-if=\"!selectedField\" class=\"no-selection\">\r\n          <i class=\"pi pi-info-circle\"></i>\r\n          <p></p>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div v-else class=\"field-properties\">\r\n          <el-form :model=\"selectedField\" label-width=\"80px\" size=\"small\">\r\n            <!--  -->\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"selectedField.label\" @input=\"updateSelectedField\" />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"selectedField.placeholder\" @input=\"updateSelectedField\" />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"selectedField.helpText\" @input=\"updateSelectedField\" />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"selectedField.defaultValue\" @input=\"updateSelectedField\" />\r\n            </el-form-item>\r\n\r\n            <!--  -->\r\n            <el-divider></el-divider>\r\n            \r\n            <el-form-item label=\"\">\r\n              <el-select v-model=\"selectedField.width\" @change=\"updateSelectedField\">\r\n                <el-option label=\"25%\" value=\"25%\" />\r\n                <el-option label=\"50%\" value=\"50%\" />\r\n                <el-option label=\"75%\" value=\"75%\" />\r\n                <el-option label=\"100%\" value=\"100%\" />\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <!--  -->\r\n            <el-divider></el-divider>\r\n            \r\n            <el-form-item>\r\n              <el-checkbox v-model=\"selectedField.required\" @change=\"updateSelectedField\">\r\n                \r\n              </el-checkbox>\r\n            </el-form-item>\r\n\r\n            <!--  -->\r\n            <template v-if=\"selectedField.type === 'select' || selectedField.type === 'radio' || selectedField.type === 'checkbox'\">\r\n              <el-divider></el-divider>\r\n              <div class=\"options-editor\">\r\n                <div v-for=\"(option, index) in selectedField.options\" :key=\"index\" class=\"option-item\">\r\n                  <el-input \r\n                    v-model=\"option.label\" \r\n                    placeholder=\"\"\r\n                    @input=\"updateSelectedField\"\r\n                  />\r\n                  <el-input \r\n                    v-model=\"option.value\" \r\n                    placeholder=\"\"\r\n                    @input=\"updateSelectedField\"\r\n                  />\r\n                  <el-button @click=\"removeOption(index)\" :icon=\"Delete\" size=\"small\" type=\"danger\" />\r\n                </div>\r\n                <el-button @click=\"addOption\" :icon=\"Plus\" size=\"small\" type=\"primary\">\r\n                  \r\n                </el-button>\r\n              </div>\r\n            </template>\r\n\r\n            <!--  -->\r\n            <template v-if=\"selectedField.type === 'number'\">\r\n              <el-divider></el-divider>\r\n              <el-form-item label=\"\">\r\n                <el-input-number v-model=\"selectedField.min\" @change=\"updateSelectedField\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-input-number v-model=\"selectedField.max\" @change=\"updateSelectedField\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-input-number v-model=\"selectedField.step\" @change=\"updateSelectedField\" />\r\n              </el-form-item>\r\n            </template>\r\n\r\n            <!--  -->\r\n            <template v-if=\"selectedField.type === 'text' || selectedField.type === 'textarea'\">\r\n              <el-divider></el-divider>\r\n              <el-form-item label=\"\">\r\n                <el-input-number v-model=\"selectedField.minLength\" @change=\"updateSelectedField\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-input-number v-model=\"selectedField.maxLength\" @change=\"updateSelectedField\" />\r\n              </el-form-item>\r\n            </template>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- JSON  -->\r\n    <el-dialog v-model=\"showJsonDialog\" title=\" JSON \" width=\"60%\">\r\n      <el-input\r\n        v-model=\"formJson\"\r\n        type=\"textarea\"\r\n        :rows=\"20\"\r\n        readonly\r\n        class=\"json-viewer\"\r\n      />\r\n      <template #footer>\r\n        <el-button @click=\"copyJson\"></el-button>\r\n        <el-button @click=\"showJsonDialog = false\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <FieldEditorDialog\r\n      v-model=\"showFieldEditor\"\r\n      :field-data=\"editingField\"\r\n      @save=\"handleFieldSave\"\r\n    />\r\n\r\n    <!--  -->\r\n    <el-dialog v-model=\"showTemplateDialog\" title=\"\" width=\"80%\" :before-close=\"handleTemplateDialogClose\">\r\n      <div class=\"template-management\">\r\n        <!--  -->\r\n        <div class=\"template-list\">\r\n          <div class=\"list-header\">\r\n            <h4></h4>\r\n            <el-button @click=\"refreshTemplates\" :loading=\"loadingTemplates\" size=\"small\">\r\n              <i class=\"pi pi-refresh\"></i>\r\n              \r\n            </el-button>\r\n          </div>\r\n          \r\n          <el-table :data=\"templates\" v-loading=\"loadingTemplates\" height=\"400\">\r\n            <el-table-column prop=\"title\" label=\"\" min-width=\"150\" />\r\n            <el-table-column prop=\"description\" label=\"\" min-width=\"200\" show-overflow-tooltip />\r\n            <el-table-column prop=\"category\" label=\"\" width=\"100\" />\r\n            <el-table-column prop=\"status\" label=\"\" width=\"80\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"getStatusTagType(row.status)\" size=\"small\">\r\n                  {{ getStatusText(row.status) }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"responseCount\" label=\"\" width=\"80\" />\r\n            <el-table-column prop=\"updatedAt\" label=\"\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                {{ formatDate(row.updatedAt) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"200\" fixed=\"right\">\r\n              <template #default=\"{ row }\">\r\n                <el-button-group size=\"small\">\r\n                  <el-button @click=\"loadTemplate(row)\" type=\"primary\" size=\"small\"></el-button>\r\n                  <el-button @click=\"copyTemplate(row)\" size=\"small\"></el-button>\r\n                  <el-button @click=\"deleteTemplate(row)\" type=\"danger\" size=\"small\"></el-button>\r\n                </el-button-group>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"save-template-form\" v-if=\"showSaveForm\">\r\n          <h4></h4>\r\n          <el-form :model=\"templateForm\" label-width=\"80px\" size=\"small\">\r\n            <el-form-item label=\"\" required>\r\n              <el-input v-model=\"templateForm.title\" placeholder=\"\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"templateForm.description\" type=\"textarea\" :rows=\"3\" placeholder=\"\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-select v-model=\"templateForm.category\" placeholder=\"\">\r\n                <el-option label=\"\" value=\"general\" />\r\n                <el-option label=\"\" value=\"survey\" />\r\n                <el-option label=\"\" value=\"application\" />\r\n                <el-option label=\"\" value=\"feedback\" />\r\n                <el-option label=\"\" value=\"other\" />\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"templateForm.tags\" placeholder=\"\" />\r\n            </el-form-item>\r\n          </el-form>\r\n          <div class=\"form-actions\">\r\n            <el-button @click=\"showSaveForm = false\"></el-button>\r\n            <el-button @click=\"saveNewTemplate\" type=\"primary\" :loading=\"saving\"></el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"showSaveForm = true\" type=\"primary\" v-if=\"!showSaveForm && formFields.length > 0\">\r\n            \r\n          </el-button>\r\n          <el-button @click=\"showTemplateDialog = false\"></el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, nextTick, triggerRef, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Plus, Delete, Edit, CopyDocument, Check, Document, Upload, Download } from '@element-plus/icons-vue'\r\nimport { VueDraggable } from 'vue-draggable-plus'\r\nimport FieldPreview from './FieldPreview.vue'\r\nimport FieldEditorDialog from './FieldEditorDialog.vue'\r\nimport DynamicFormService from '@/service/DynamicFormService.js'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:modelValue', 'save'])\r\n\r\n// \r\nconst formFields = ref([...props.modelValue])\r\nconst selectedFieldId = ref(null)\r\nconst previewMode = ref(false)\r\nconst showJsonDialog = ref(false)\r\nconst showFieldEditor = ref(false)\r\nconst editingField = ref(null)\r\n\r\n// \r\nconst showTemplateDialog = ref(false)\r\nconst showSaveForm = ref(false)\r\nconst templates = ref([])\r\nconst currentTemplate = ref(null)\r\nconst loadingTemplates = ref(false)\r\nconst saving = ref(false)\r\nconst templateForm = ref({\r\n  title: '',\r\n  description: '',\r\n  category: 'general',\r\n  tags: ''\r\n})\r\n\r\n// \r\nconst basicComponents = [\r\n  { type: 'text', label: '', icon: 'pi pi-minus' },\r\n  { type: 'textarea', label: '', icon: 'pi pi-align-left' },\r\n  { type: 'number', label: '', icon: 'pi pi-hashtag' },\r\n  { type: 'email', label: '', icon: 'pi pi-envelope' },\r\n  { type: 'date', label: '', icon: 'pi pi-calendar' },\r\n  { type: 'file', label: '', icon: 'pi pi-upload' }\r\n]\r\n\r\nconst selectionComponents = [\r\n  { type: 'select', label: '', icon: 'pi pi-chevron-down' },\r\n  { type: 'radio', label: '', icon: 'pi pi-circle' },\r\n  { type: 'checkbox', label: '', icon: 'pi pi-check-square' }\r\n]\r\n\r\n// \r\nconst selectedField = computed(() => {\r\n  return formFields.value.find(field => field.id === selectedFieldId.value)\r\n})\r\n\r\nconst formJson = computed(() => {\r\n  return JSON.stringify(formFields.value, null, 2)\r\n})\r\n\r\n// \r\nconst generateFieldId = () => {\r\n  return 'field_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)\r\n}\r\n\r\nconst createFieldFromComponent = (component) => {\r\n  const baseField = {\r\n    id: generateFieldId(),\r\n    type: component.type,\r\n    label: component.label,\r\n    placeholder: '',\r\n    helpText: '',\r\n    defaultValue: '',\r\n    required: false,\r\n    width: '100%',\r\n    order: formFields.value.length\r\n  }\r\n\r\n  // \r\n  switch (component.type) {\r\n    case 'select':\r\n    case 'radio':\r\n    case 'checkbox':\r\n      baseField.options = [\r\n        { label: '1', value: 'option1' },\r\n        { label: '2', value: 'option2' }\r\n      ]\r\n      break\r\n    case 'number':\r\n      baseField.min = null\r\n      baseField.max = null\r\n      baseField.step = 1\r\n      break\r\n    case 'text':\r\n    case 'textarea':\r\n      baseField.minLength = null\r\n      baseField.maxLength = null\r\n      break\r\n  }\r\n\r\n  return baseField\r\n}\r\n\r\nconst handleDragStart = (event, component) => {\r\n  // \r\n  event.dataTransfer.effectAllowed = 'copy';\r\n  // \r\n  event.dataTransfer.setData('application/json', JSON.stringify(component));\r\n  event.dataTransfer.setData('text/plain', JSON.stringify(component));\r\n  // \r\n  event.dataTransfer.setData('text/component-type', component.type);\r\n}\r\n\r\nconst handleDrop = async (event) => {\r\n  event.preventDefault()\r\n  \r\n  try {\r\n    // \r\n    let componentData = null;\r\n    \r\n    //  application/json\r\n    const jsonData = event.dataTransfer.getData('application/json');\r\n    if (jsonData) {\r\n      componentData = JSON.parse(jsonData);\r\n    } else {\r\n      //  text/plain\r\n      const textData = event.dataTransfer.getData('text/plain');\r\n      if (textData) {\r\n        componentData = JSON.parse(textData);\r\n      }\r\n    }\r\n    \r\n    if (!componentData) {\r\n      ElMessage.error('');\r\n      return;\r\n    }\r\n    \r\n    const newField = createFieldFromComponent(componentData)\r\n    \r\n    // \r\n    formFields.value = [...formFields.value, newField]\r\n    \r\n    // \r\n    triggerRef(formFields)\r\n    await nextTick()\r\n    \r\n    selectField(newField.id)\r\n    updateModelValue()\r\n    ElMessage.success(` ${newField.label} `)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(': ' + error.message)\r\n  }\r\n}\r\n\r\nconst handleDragOver = (event) => {\r\n  event.preventDefault()\r\n  // \r\n  event.dataTransfer.dropEffect = 'copy'\r\n}\r\n\r\nconst handleDragEnter = (event) => {\r\n  event.preventDefault()\r\n  // \r\n  event.currentTarget.classList.add('drag-over')\r\n}\r\n\r\nconst handleDragLeave = (event) => {\r\n  // \r\n  event.currentTarget.classList.remove('drag-over')\r\n}\r\n\r\nconst handleDragEnd = () => {\r\n  \r\n  // \r\n  formFields.value.forEach((field, index) => {\r\n    field.order = index\r\n  })\r\n  \r\n  // \r\n  updateModelValue()\r\n  \r\n  // \r\n  ElMessage.success('')\r\n}\r\n\r\nconst selectField = (fieldId) => {\r\n  selectedFieldId.value = fieldId\r\n}\r\n\r\nconst updateField = (fieldId, updates) => {\r\n  const fieldIndex = formFields.value.findIndex(field => field.id === fieldId)\r\n  if (fieldIndex !== -1) {\r\n    formFields.value[fieldIndex] = { ...formFields.value[fieldIndex], ...updates }\r\n    updateModelValue()\r\n  }\r\n}\r\n\r\nconst updateSelectedField = () => {\r\n  updateModelValue()\r\n}\r\n\r\nconst editField = (field) => {\r\n  editingField.value = { ...field }\r\n  showFieldEditor.value = true\r\n}\r\n\r\nconst handleFieldSave = (updatedField) => {\r\n  updateField(updatedField.id, updatedField)\r\n  showFieldEditor.value = false\r\n}\r\n\r\nconst duplicateField = (field) => {\r\n  const newField = {\r\n    ...field,\r\n    id: generateFieldId(),\r\n    label: field.label + ' ()',\r\n    order: formFields.value.length\r\n  }\r\n  formFields.value.push(newField)\r\n  updateModelValue()\r\n}\r\n\r\nconst deleteField = async (index) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      type: 'warning'\r\n    })\r\n    \r\n    const deletedField = formFields.value[index]\r\n    formFields.value.splice(index, 1)\r\n    \r\n    // \r\n    if (selectedFieldId.value === deletedField.id) {\r\n      selectedFieldId.value = null\r\n    }\r\n    \r\n    updateModelValue()\r\n    ElMessage.success('')\r\n  } catch {\r\n    // \r\n  }\r\n}\r\n\r\nconst addOption = () => {\r\n  if (selectedField.value && selectedField.value.options) {\r\n    selectedField.value.options.push({\r\n      label: `${selectedField.value.options.length + 1}`,\r\n      value: `option${selectedField.value.options.length + 1}`\r\n    })\r\n    updateSelectedField()\r\n  }\r\n}\r\n\r\nconst removeOption = (index) => {\r\n  if (selectedField.value && selectedField.value.options) {\r\n    selectedField.value.options.splice(index, 1)\r\n    updateSelectedField()\r\n  }\r\n}\r\n\r\nconst clearAll = async () => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      type: 'warning'\r\n    })\r\n    \r\n    formFields.value = []\r\n    selectedFieldId.value = null\r\n    updateModelValue()\r\n    ElMessage.success('')\r\n  } catch {\r\n    // \r\n  }\r\n}\r\n\r\nconst saveTemplate = async () => {\r\n  if (formFields.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  if (currentTemplate.value) {\r\n    // \r\n    await updateExistingTemplate()\r\n  } else {\r\n    // \r\n    showTemplateDialog.value = true\r\n    showSaveForm.value = true\r\n  }\r\n}\r\n\r\nconst copyJson = async () => {\r\n  try {\r\n    await navigator.clipboard.writeText(formJson.value)\r\n    ElMessage.success('JSON ')\r\n  } catch {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst updateModelValue = () => {\r\n  emit('update:modelValue', formFields.value)\r\n}\r\n\r\n// \r\nconst refreshTemplates = async () => {\r\n  loadingTemplates.value = true\r\n  try {\r\n    console.log('...')\r\n    const response = await DynamicFormService.getFormTemplates()\r\n    console.log(':', response)\r\n    templates.value = response.data.items || response.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    console.error(':', error.response)\r\n    ElMessage.error(`: ${error.response?.status} ${error.response?.statusText}`)\r\n  } finally {\r\n    loadingTemplates.value = false\r\n  }\r\n}\r\n\r\nconst loadTemplate = async (template) => {\r\n  try {\r\n    const response = await DynamicFormService.getFormTemplate(template.id)\r\n    const templateData = response.data\r\n    \r\n    // \r\n    const convertedFields = templateData.fields.map(field => ({\r\n      id: field.id,\r\n      type: field.type,\r\n      label: field.label,\r\n      placeholder: field.placeholder || '',\r\n      helpText: field.helpText || '',\r\n      defaultValue: field.defaultValue || '',\r\n      required: field.required || false,\r\n      width: field.width || '100%',\r\n      order: field.order || 0,\r\n      // \r\n      ...(field.options && { options: field.options }),\r\n      ...(field.validation && {\r\n        minLength: field.validation.minLength,\r\n        maxLength: field.validation.maxLength,\r\n        min: field.validation.min,\r\n        max: field.validation.max,\r\n        step: field.validation.step || 1\r\n      })\r\n    }))\r\n    \r\n    formFields.value = convertedFields\r\n    currentTemplate.value = templateData\r\n    showTemplateDialog.value = false\r\n    \r\n    triggerRef(formFields)\r\n    await nextTick()\r\n    \r\n    ElMessage.success(`${templateData.title}`)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst saveNewTemplate = async () => {\r\n  if (!templateForm.value.title.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  saving.value = true\r\n  try {\r\n    const templateData = {\r\n      title: templateForm.value.title,\r\n      description: templateForm.value.description,\r\n      category: templateForm.value.category,\r\n      tags: templateForm.value.tags.split(',').map(tag => tag.trim()).filter(tag => tag),\r\n      fields: formFields.value.map(field => ({\r\n        id: field.id,\r\n        type: field.type,\r\n        label: field.label,\r\n        placeholder: field.placeholder,\r\n        helpText: field.helpText,\r\n        defaultValue: field.defaultValue,\r\n        required: field.required,\r\n        width: field.width,\r\n        order: field.order,\r\n        ...(field.options && { options: field.options }),\r\n        ...(field.minLength !== undefined && {\r\n          validation: {\r\n            minLength: field.minLength,\r\n            maxLength: field.maxLength,\r\n            min: field.min,\r\n            max: field.max,\r\n            step: field.step\r\n          }\r\n        })\r\n      })),\r\n      settings: {\r\n        allowMultipleSubmissions: false,\r\n        requireLogin: true,\r\n        showProgressBar: true,\r\n        submitButtonText: '',\r\n        successMessage: ''\r\n      }\r\n    }\r\n\r\n    const response = await DynamicFormService.createFormTemplate(templateData)\r\n    currentTemplate.value = response.data\r\n    \r\n    // \r\n    templateForm.value = {\r\n      title: '',\r\n      description: '',\r\n      category: 'general',\r\n      tags: ''\r\n    }\r\n    \r\n    showSaveForm.value = false\r\n    showTemplateDialog.value = false\r\n    await refreshTemplates()\r\n    \r\n    ElMessage.success('')\r\n    emit('save', formFields.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    saving.value = false\r\n  }\r\n}\r\n\r\nconst updateExistingTemplate = async () => {\r\n  if (!currentTemplate.value) return\r\n\r\n  saving.value = true\r\n  try {\r\n    const templateData = {\r\n      title: currentTemplate.value.title,\r\n      description: currentTemplate.value.description,\r\n      category: currentTemplate.value.category,\r\n      tags: currentTemplate.value.tags,\r\n      status: currentTemplate.value.status,\r\n      fields: formFields.value.map(field => ({\r\n        id: field.id,\r\n        type: field.type,\r\n        label: field.label,\r\n        placeholder: field.placeholder,\r\n        helpText: field.helpText,\r\n        defaultValue: field.defaultValue,\r\n        required: field.required,\r\n        width: field.width,\r\n        order: field.order,\r\n        ...(field.options && { options: field.options }),\r\n        ...(field.minLength !== undefined && {\r\n          validation: {\r\n            minLength: field.minLength,\r\n            maxLength: field.maxLength,\r\n            min: field.min,\r\n            max: field.max,\r\n            step: field.step\r\n          }\r\n        })\r\n      })),\r\n      settings: currentTemplate.value.settings\r\n    }\r\n\r\n    const response = await DynamicFormService.updateFormTemplate(currentTemplate.value.id, templateData)\r\n    currentTemplate.value = response.data\r\n    \r\n    ElMessage.success('')\r\n    emit('save', formFields.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    saving.value = false\r\n  }\r\n}\r\n\r\nconst copyTemplate = async (template) => {\r\n  try {\r\n    const response = await DynamicFormService.copyFormTemplate(template.id)\r\n    console.log(response.data);\r\n    await refreshTemplates()\r\n    ElMessage.success(` \"${template.title}\" `)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst deleteTemplate = async (template) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` \"${template.title}\" `,\r\n      '',\r\n      {\r\n        type: 'warning',\r\n        confirmButtonText: '',\r\n        cancelButtonText: ''\r\n      }\r\n    )\r\n    \r\n    await DynamicFormService.deleteFormTemplate(template.id)\r\n    await refreshTemplates()\r\n    \r\n    // \r\n    if (currentTemplate.value && currentTemplate.value.id === template.id) {\r\n      currentTemplate.value = null\r\n    }\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n\r\nconst exportTemplate = () => {\r\n  if (formFields.value.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n\r\n  const exportData = {\r\n    title: currentTemplate.value?.title || '',\r\n    description: currentTemplate.value?.description || '',\r\n    fields: formFields.value,\r\n    exportTime: new Date().toISOString()\r\n  }\r\n\r\n  const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' })\r\n  const url = URL.createObjectURL(blob)\r\n  const a = document.createElement('a')\r\n  a.href = url\r\n  a.download = `${exportData.title}.json`\r\n  document.body.appendChild(a)\r\n  a.click()\r\n  document.body.removeChild(a)\r\n  URL.revokeObjectURL(url)\r\n  \r\n  ElMessage.success('')\r\n}\r\n\r\nconst handleTemplateDialogClose = () => {\r\n  showSaveForm.value = false\r\n  templateForm.value = {\r\n    title: '',\r\n    description: '',\r\n    category: 'general',\r\n    tags: ''\r\n  }\r\n}\r\n\r\n// \r\nconst getStatusTagType = (status) => {\r\n  switch (status) {\r\n    case 'published': return 'success'\r\n    case 'draft': return 'info'\r\n    case 'closed': return 'danger'\r\n    default: return 'info'\r\n  }\r\n}\r\n\r\nconst getStatusText = (status) => {\r\n  switch (status) {\r\n    case 'published': return ''\r\n    case 'draft': return ''\r\n    case 'closed': return ''\r\n    default: return ''\r\n  }\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleString('zh-TW')\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  refreshTemplates()\r\n})\r\n\r\n//  props \r\nwatch(() => props.modelValue, (newValue) => {\r\n  formFields.value = [...newValue]\r\n}, { deep: true })\r\n</script>\r\n\r\n<style scoped>\r\n.form-builder {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16px 20px;\r\n  background: white;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.toolbar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.toolbar-left h3 {\r\n  margin: 0;\r\n  color: #303133;\r\n}\r\n\r\n.builder-container {\r\n  flex: 1;\r\n  display: flex;\r\n  overflow: hidden;\r\n}\r\n\r\n.components-panel {\r\n  width: 280px;\r\n  background: white;\r\n  border-right: 1px solid #e4e7ed;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.components-panel h4 {\r\n  margin: 0 0 20px 0;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.component-group {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.component-group h5 {\r\n  margin: 0 0 12px 0;\r\n  color: #606266;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.component-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.component-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px;\r\n  background: #f8f9fa;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 6px;\r\n  cursor: grab;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.component-item:hover {\r\n  background: #ecf5ff;\r\n  border-color: #409eff;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.component-item:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.component-item i {\r\n  color: #409eff;\r\n  font-size: 16px;\r\n}\r\n\r\n.component-item span {\r\n  font-size: 14px;\r\n  color: #303133;\r\n}\r\n\r\n.design-area {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-canvas {\r\n  min-height: 100%;\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  border: 2px dashed #e4e7ed;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.form-canvas.drag-over {\r\n  border-color: #409eff;\r\n  background-color: #f0f9ff;\r\n  box-shadow: 0 0 10px rgba(64, 158, 255, 0.3);\r\n}\r\n\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 400px;\r\n  color: #909399;\r\n  text-align: center;\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.empty-state p {\r\n  font-size: 16px;\r\n  margin: 0;\r\n}\r\n\r\n.field-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.field-wrapper {\r\n  position: relative;\r\n  padding: 16px;\r\n  border: 2px solid transparent;\r\n  border-radius: 8px;\r\n  background: #fafafa;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-out;\r\n  /*  */\r\n  will-change: transform, border-color, box-shadow;\r\n  backface-visibility: hidden;\r\n  transform: translateZ(0);\r\n}\r\n\r\n.field-wrapper:hover {\r\n  border-color: #c6e2ff;\r\n  background: #ecf5ff;\r\n  /*  hover  */\r\n  transition: all 0.15s ease-out;\r\n}\r\n\r\n.field-wrapper.selected {\r\n  border-color: #409eff;\r\n  background: #ecf5ff;\r\n}\r\n\r\n.field-actions {\r\n  position: absolute;\r\n  top: 8px;\r\n  right: 8px;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 10;\r\n}\r\n\r\n.field-actions .el-button {\r\n  min-width: 36px;\r\n  height: 36px;\r\n  padding: 8px;\r\n}\r\n\r\n.field-actions .delete-button {\r\n  min-width: 40px;\r\n  height: 40px;\r\n  padding: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.field-actions .delete-button:hover {\r\n  transform: scale(1.1);\r\n  box-shadow: 0 4px 8px rgba(245, 108, 108, 0.3);\r\n}\r\n\r\n.field-wrapper:hover .field-actions,\r\n.field-wrapper.selected .field-actions {\r\n  opacity: 1;\r\n}\r\n\r\n.properties-panel {\r\n  width: 320px;\r\n  background: white;\r\n  border-left: 1px solid #e4e7ed;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.properties-panel h4 {\r\n  margin: 0 0 20px 0;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.no-selection {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 200px;\r\n  color: #909399;\r\n  text-align: center;\r\n}\r\n\r\n.no-selection i {\r\n  font-size: 32px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.options-editor {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.option-item {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n}\r\n\r\n.json-viewer {\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.ghost {\r\n  opacity: 0.5;\r\n}\r\n\r\n.chosen {\r\n  transform: rotate(5deg);\r\n}\r\n\r\n/*  */\r\n.template-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-left: 20px;\r\n}\r\n\r\n.template-title {\r\n  font-weight: 500;\r\n  color: #409eff;\r\n}\r\n\r\n.template-management {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.list-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.list-header h4 {\r\n  margin: 0;\r\n  color: #303133;\r\n}\r\n\r\n.save-template-form {\r\n  border-top: 1px solid #e4e7ed;\r\n  padding-top: 20px;\r\n}\r\n\r\n.save-template-form h4 {\r\n  margin: 0 0 16px 0;\r\n  color: #303133;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n  margin-top: 16px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1200px) {\r\n  .components-panel {\r\n    width: 240px;\r\n  }\r\n  \r\n  .properties-panel {\r\n    width: 280px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .builder-container {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .components-panel,\r\n  .properties-panel {\r\n    width: 100%;\r\n    height: 200px;\r\n  }\r\n  \r\n  .design-area {\r\n    flex: 1;\r\n    min-height: 400px;\r\n  }\r\n\r\n  .template-info {\r\n    margin-left: 0;\r\n    margin-top: 8px;\r\n  }\r\n\r\n  .toolbar-left {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 8px;\r\n  }\r\n}\r\n/*  */\r\n.field-wrapper,\r\n.field-wrapper * {\r\n  /*  */\r\n  transform: translateZ(0);\r\n  backface-visibility: hidden;\r\n  perspective: 1000px;\r\n}\r\n\r\n.field-wrapper {\r\n  /*  */\r\n  animation-fill-mode: both;\r\n  animation-play-state: running;\r\n}\r\n\r\n/*  */\r\n.field-wrapper.selected {\r\n  animation: none !important;\r\n  transition: all 0.2s ease-out !important;\r\n}\r\n\r\n/*  */\r\n.field-wrapper:active {\r\n  transition: none;\r\n}\r\n\r\n/*  */\r\n.field-wrapper:not(:hover):not(.selected) {\r\n  animation: none;\r\n  transform: translateZ(0);\r\n}\r\n\r\n</style>","import script from \"./FormBuilder.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormBuilder.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormBuilder.vue?vue&type=style&index=0&id=54275e5d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-54275e5d\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"form-designer\">\r\n    <!--  -->\r\n    <div class=\"page-header\">\r\n      <h2>\r\n        <i class=\"pi pi-cog\"></i>\r\n        \r\n      </h2>\r\n      <p class=\"page-description\"></p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-card class=\"form-info-card\" shadow=\"never\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <i class=\"pi pi-info-circle\"></i>\r\n          <span></span>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-form :model=\"formTemplate\" :rules=\"templateRules\" ref=\"templateFormRef\" label-width=\"120px\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"\" prop=\"title\">\r\n              <el-input v-model=\"formTemplate.title\" placeholder=\"\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"\" prop=\"category\">\r\n              <el-select v-model=\"formTemplate.category\" placeholder=\"\">\r\n                <el-option label=\"\" value=\"hr\" />\r\n                <el-option label=\"\" value=\"finance\" />\r\n                <el-option label=\"\" value=\"purchase\" />\r\n                <el-option label=\"\" value=\"other\" />\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"\" prop=\"status\">\r\n              <el-select v-model=\"formTemplate.status\">\r\n                <el-option label=\"\" value=\"draft\" />\r\n                <el-option label=\"\" value=\"published\" />\r\n                <el-option label=\"\" value=\"disabled\" />\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-form-item label=\"\" prop=\"description\">\r\n          <el-input \r\n            v-model=\"formTemplate.description\" \r\n            type=\"textarea\" \r\n            :rows=\"3\"\r\n            placeholder=\"\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!--  -->\r\n    <el-card class=\"form-builder-card\" shadow=\"never\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <i class=\"pi pi-palette\"></i>\r\n          <span></span>\r\n          <div class=\"header-actions\">\r\n            <el-button @click=\"previewForm\" :icon=\"View\"></el-button>\r\n            <el-button @click=\"saveTemplate\" type=\"primary\" :icon=\"Check\" :loading=\"saving\">\r\n              {{ isEdit ? '' : '' }}\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      \r\n      <FormBuilder \r\n        v-model=\"formTemplate.fields\" \r\n        @save=\"handleFieldsSave\"\r\n      />\r\n    </el-card>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"showPreview\"\r\n      title=\"\"\r\n      width=\"80%\"\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <div class=\"preview-container\">\r\n        <div class=\"preview-header\">\r\n          <h3>{{ formTemplate.title || '' }}</h3>\r\n          <p v-if=\"formTemplate.description\">{{ formTemplate.description }}</p>\r\n        </div>\r\n        \r\n        <FormFillPage \r\n          v-if=\"showPreview && previewTemplate\"\r\n          :template-data=\"previewTemplate\"\r\n          :preview-mode=\"true\"\r\n        />\r\n      </div>\r\n      \r\n      <template #footer>\r\n        <el-button @click=\"showPreview = false\"></el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRoute, useRouter, onBeforeRouteLeave } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { View, Check } from '@element-plus/icons-vue'\r\nimport FormBuilder from './FormBuilder.vue'\r\nimport FormFillPage from './FormFillPage.vue'\r\nimport DynamicFormService from '@/service/DynamicFormService'\r\n\r\n// \r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\n// \r\nconst templateFormRef = ref(null)\r\nconst saving = ref(false)\r\nconst showPreview = ref(false)\r\n\r\n// \r\nconst formTemplate = ref({\r\n  title: '',\r\n  description: '',\r\n  category: '',\r\n  status: 'draft',\r\n  fields: [],\r\n  settings: {\r\n    allowMultipleSubmissions: false,\r\n    showProgressBar: false,\r\n    endDate: null\r\n  }\r\n})\r\n\r\n// \r\nconst templateRules = {\r\n  title: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    { min: 2, max: 100, message: ' 2  100 ', trigger: 'blur' }\r\n  ],\r\n  category: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ]\r\n}\r\n\r\n// \r\nconst isEdit = computed(() => !!route.params.id)\r\n\r\nconst previewTemplate = computed(() => {\r\n  if (!showPreview.value) return null\r\n  \r\n  return {\r\n    ...formTemplate.value,\r\n    id: 'preview',\r\n    createdAt: new Date().toISOString(),\r\n    updatedAt: new Date().toISOString()\r\n  }\r\n})\r\n\r\n// \r\nconst loadTemplate = async () => {\r\n  if (!isEdit.value) return\r\n  \r\n  try {\r\n    const response = await DynamicFormService.getFormTemplate(route.params.id)\r\n    formTemplate.value = response.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    router.push('/dynamic-form/management')\r\n  }\r\n}\r\n\r\nconst handleFieldsSave = (fields) => {\r\n  formTemplate.value.fields = fields\r\n}\r\n\r\nconst validateTemplate = async () => {\r\n  // \r\n  const isBasicValid = await templateFormRef.value?.validate().catch(() => false)\r\n  if (!isBasicValid) {\r\n    ElMessage.error('')\r\n    return false\r\n  }\r\n\r\n  // \r\n  if (!formTemplate.value.fields || formTemplate.value.fields.length === 0) {\r\n    ElMessage.error('')\r\n    return false\r\n  }\r\n\r\n  // \r\n  const invalidFields = formTemplate.value.fields.filter(field => !field.label?.trim())\r\n  if (invalidFields.length > 0) {\r\n    ElMessage.error('')\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nconst saveTemplate = async () => {\r\n  if (!(await validateTemplate())) return\r\n\r\n  try {\r\n    saving.value = true\r\n    \r\n    // \r\n    const templateData = {\r\n      title: formTemplate.value.title,\r\n      description: formTemplate.value.description,\r\n      category: formTemplate.value.category,\r\n      status: formTemplate.value.status,\r\n      tags: formTemplate.value.tags || [],\r\n      fields: formTemplate.value.fields.map((field, index) => ({\r\n        id: field.id,\r\n        type: field.type,\r\n        label: field.label,\r\n        placeholder: field.placeholder || '',\r\n        required: field.required || false,\r\n        validation: field.validation || {\r\n          minLength: field.minLength || null,\r\n          maxLength: field.maxLength || null,\r\n          min: field.min || null,\r\n          max: field.max || null,\r\n          pattern: field.pattern || '',\r\n          customMessage: field.customMessage || ''\r\n        },\r\n        options: field.options || [],\r\n        defaultValue: field.defaultValue || '',\r\n        order: index,\r\n        width: field.width || '100%',\r\n        helpText: field.helpText || '',\r\n        conditional: field.conditional || null\r\n      })),\r\n      settings: {\r\n        allowMultipleSubmissions: formTemplate.value.settings?.allowMultipleSubmissions || false,\r\n        requireLogin: formTemplate.value.settings?.requireLogin || true,\r\n        showProgressBar: formTemplate.value.settings?.showProgressBar || false,\r\n        submitButtonText: formTemplate.value.settings?.submitButtonText || '',\r\n        successMessage: formTemplate.value.settings?.successMessage || '',\r\n        redirectUrl: formTemplate.value.settings?.redirectUrl || '',\r\n        notificationEmails: formTemplate.value.settings?.notificationEmails || [],\r\n        startDate: formTemplate.value.settings?.startDate || null,\r\n        endDate: formTemplate.value.settings?.endDate || null,\r\n        maxSubmissions: formTemplate.value.settings?.maxSubmissions || null\r\n      }\r\n    }\r\n    console.log(\"form data:\", templateData)\r\n    let response\r\n    if (isEdit.value) {\r\n      response = await DynamicFormService.updateFormTemplate(route.params.id, templateData)\r\n      ElMessage.success('')\r\n    } else {\r\n      response = await DynamicFormService.createFormTemplate(templateData)\r\n      alert(\"DD\");\r\n      ElMessage.success('')\r\n      \r\n      // \r\n      router.push(`/dynamic-form/designer/${response.data.id}`)\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('' + (error.response?.data?.message || error.message))\r\n  } finally {\r\n    saving.value = false\r\n  }\r\n}\r\n\r\nconst previewForm = () => {\r\n  if (!formTemplate.value.fields || formTemplate.value.fields.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  showPreview.value = true\r\n}\r\n\r\nconst handleBeforeLeave = async () => {\r\n  // \r\n  const hasChanges = formTemplate.value.title || \r\n                    formTemplate.value.description || \r\n                    formTemplate.value.fields.length > 0\r\n\r\n  if (hasChanges) {\r\n    try {\r\n      await ElMessageBox.confirm(\r\n        '',\r\n        '',\r\n        {\r\n          type: 'warning'\r\n        }\r\n      )\r\n    } catch {\r\n      return false // \r\n    }\r\n  }\r\n  \r\n  return true\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  loadTemplate()\r\n})\r\n\r\n// \r\nonBeforeRouteLeave(async (to, from, next) => {\r\n  const canLeave = await handleBeforeLeave()\r\n  next(canLeave)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-designer {\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n.page-header {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.page-header h2 {\r\n  margin: 0 0 8px 0;\r\n  color: #303133;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.page-header .page-description {\r\n  margin: 0;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-info-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-builder-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n}\r\n\r\n.card-header > span {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.preview-container {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.preview-header {\r\n  padding: 20px 0;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.preview-header h3 {\r\n  margin: 0 0 8px 0;\r\n  color: #303133;\r\n}\r\n\r\n.preview-header p {\r\n  margin: 0;\r\n  color: #606266;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .form-designer {\r\n    padding: 12px;\r\n  }\r\n  \r\n  .header-actions {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n}\r\n</style>","import script from \"./FormDesigner.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormDesigner.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormDesigner.vue?vue&type=style&index=0&id=6be82f1a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6be82f1a\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    :model-value=\"visible\"\r\n    :title=\"isEdit ? '' : ''\"\r\n    :width=\"dialogWidth\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    @close=\"handleClose\"\r\n    class=\"device-dialog\"\r\n  >\r\n    <el-form\r\n      ref=\"formRef\"\r\n      :model=\"formData\"\r\n      :rules=\"formRules\"\r\n      label-width=\"100px\"\r\n      class=\"device-form\"\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"category\">\r\n            <el-select\r\n              v-model=\"formData.category\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"APP\" prop=\"appName\">\r\n            <el-input\r\n              v-model=\"formData.appName\"\r\n              placeholder=\"\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"areaId\">\r\n            <TreeSelectArea v-model=\"formData.areaId\" />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <!--  -->\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"url\">\r\n            <el-input\r\n              v-model=\"formData.url\"\r\n              placeholder=\" (: https://example.com)\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"DNS\" prop=\"dns\">\r\n            <el-input\r\n              v-model=\"formData.dns\"\r\n              placeholder=\"DNSIP\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"PORT\" prop=\"port\">\r\n            <el-input\r\n              v-model=\"formData.port\"\r\n              placeholder=\"\"\r\n              type=\"number\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"domain\">\r\n            <el-input\r\n              v-model=\"formData.domain\"\r\n              placeholder=\"\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"account\">\r\n            <el-input\r\n              v-model=\"formData.account\"\r\n              placeholder=\"\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"password\">\r\n            <el-input\r\n              v-model=\"formData.password\"\r\n              placeholder=\"\"\r\n              :type=\"showPassword ? 'text' : 'password'\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"\" prop=\"manual\">\r\n            <div class=\"manual-upload\">\r\n              <el-upload\r\n                ref=\"uploadRef\"\r\n                :file-list=\"fileList\"\r\n                :auto-upload=\"false\"\r\n                :show-file-list=\"true\"\r\n                :limit=\"1\"\r\n                accept=\".doc,.docx,.pdf\"\r\n                @change=\"handleFileChange\"\r\n                @remove=\"handleFileRemove\"\r\n                class=\"upload-component\"\r\n              >\r\n                <el-button type=\"primary\" :icon=\"Upload\">\r\n                  \r\n                </el-button>\r\n                <template #tip>\r\n                  <div class=\"el-upload__tip\">\r\n                     doc/docx/pdf  10MB\r\n                  </div>\r\n                </template>\r\n              </el-upload>\r\n            </div>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\" :loading=\"submitting\">\r\n          {{ isEdit ? '' : '' }}\r\n        </el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Upload } from '@element-plus/icons-vue'\r\nimport TreeSelectArea from '@/components/Common/TreeSelect-getData/TreeSelect-Area.vue'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  deviceData: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  isEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible', 'confirm', 'cancel'])\r\n\r\n// \r\nconst formRef = ref(null)\r\nconst uploadRef = ref(null)\r\nconst submitting = ref(false)\r\nconst showPassword = ref(false)\r\nconst fileList = ref([])\r\n\r\n// \r\nconst formData = ref({\r\n  category: '',\r\n  url: '',\r\n  dns: '',\r\n  port: '',\r\n  domain: '',\r\n  account: '',\r\n  password: '',\r\n  appName: '',\r\n  manual: null,\r\n  areaId: ''\r\n})\r\n\r\n// \r\nconst formRules = {\r\n  category: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  appName: [\r\n    { required: true, message: 'APP', trigger: 'blur' },\r\n    { min: 2, max: 50, message: ' 2  50 ', trigger: 'blur' }\r\n  ],\r\n  dns: [\r\n    { required: true, message: 'DNSIP', trigger: 'blur' }\r\n  ],\r\n  account: [\r\n    { required: true, message: '', trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    { min: 6, message: '6', trigger: 'blur' }\r\n  ],\r\n  url: [\r\n    {\r\n      pattern: /^https?:\\/\\/.+/,\r\n      message: '',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  port: [\r\n    {\r\n      pattern: /^\\d+$/,\r\n      message: '',\r\n      trigger: 'blur'\r\n    }\r\n  ]\r\n}\r\n\r\n// \r\nconst isMobile = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    return window.innerWidth <= 768\r\n  }\r\n  return false\r\n})\r\n\r\nconst dialogWidth = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    const width = window.innerWidth\r\n    if (width <= 480) return '95%'\r\n    if (width <= 768) return '90%'\r\n    if (width <= 1024) return '80%'\r\n    return '800px'\r\n  }\r\n  return '800px'\r\n})\r\n\r\n// \r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal) {\r\n    resetForm()\r\n    if (props.isEdit && props.deviceData) {\r\n      nextTick(() => {\r\n        Object.assign(formData.value, props.deviceData)\r\n        // \r\n        if (props.deviceData.manual) {\r\n          fileList.value = [{\r\n            name: props.deviceData.manual,\r\n            url: props.deviceData.manual\r\n          }]\r\n        }\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// \r\nconst resetForm = () => {\r\n  formData.value = {\r\n    category: '',\r\n    url: '',\r\n    dns: '',\r\n    port: '',\r\n    domain: '',\r\n    account: '',\r\n    password: '',\r\n    appName: '',\r\n    manual: null,\r\n    areaId: ''\r\n  }\r\n  fileList.value = []\r\n  if (formRef.value) {\r\n    formRef.value.resetFields()\r\n  }\r\n}\r\n\r\nconst handleFileChange = (file) => {\r\n  //  (10MB)\r\n  if (file.raw && file.raw.size > 10 * 1024 * 1024) {\r\n    ElMessage.error(' 10MB')\r\n    return false\r\n  }\r\n  \r\n  // \r\n  const allowedTypes = [\r\n    'application/msword',\r\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n    'application/pdf'\r\n  ]\r\n  \r\n  if (file.raw && !allowedTypes.includes(file.raw.type)) {\r\n    ElMessage.error(' docdocx  pdf ')\r\n    return false\r\n  }\r\n  \r\n  formData.value.manual = file.name\r\n}\r\n\r\nconst handleFileRemove = () => {\r\n  formData.value.manual = null\r\n}\r\n\r\nconst handleConfirm = async () => {\r\n  if (!formRef.value) return\r\n  \r\n  try {\r\n    await formRef.value.validate()\r\n    submitting.value = true\r\n    \r\n    // API\r\n    await new Promise(resolve => setTimeout(resolve, 1000))\r\n    \r\n    emit('confirm', { ...formData.value })\r\n    submitting.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    submitting.value = false\r\n  }\r\n}\r\n\r\nconst handleClose = () => {\r\n  emit('update:visible', false)\r\n  emit('cancel')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.device-dialog :deep(.el-dialog) {\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n.device-dialog :deep(.el-dialog__header) {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n  padding: 20px;\r\n  margin: 0;\r\n}\r\n\r\n.device-dialog :deep(.el-dialog__title) {\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n}\r\n\r\n.device-dialog :deep(.el-dialog__headerbtn .el-dialog__close) {\r\n  color: white;\r\n  font-size: 20px;\r\n}\r\n\r\n.device-dialog :deep(.el-dialog__body) {\r\n  padding: 25px;\r\n  background: #fafafa;\r\n}\r\n\r\n.device-form {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.manual-upload {\r\n  width: 100%;\r\n}\r\n\r\n.upload-component {\r\n  width: 100%;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  padding: 20px;\r\n  background: white;\r\n  border-top: 1px solid #ebeef5;\r\n  margin: 0 -25px -25px -25px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-form-item__label) {\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n:deep(.el-input__wrapper) {\r\n  border-radius: 6px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.el-input__wrapper:hover) {\r\n  box-shadow: 0 0 0 1px #667eea;\r\n}\r\n\r\n:deep(.el-select .el-input__wrapper) {\r\n  cursor: pointer;\r\n}\r\n\r\n:deep(.el-upload__tip) {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 8px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .device-dialog :deep(.el-dialog__body) {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .device-form {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    padding: 15px;\r\n    margin: 0 -15px -15px -15px;\r\n  }\r\n  \r\n  :deep(.el-form-item) {\r\n    margin-bottom: 18px;\r\n  }\r\n  \r\n  :deep(.el-form-item__label) {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .device-dialog :deep(.el-dialog__header) {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .device-dialog :deep(.el-dialog__title) {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .device-dialog :deep(.el-dialog__body) {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .device-form {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .dialog-footer .el-button {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>","import script from \"./DeviceDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeviceDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DeviceDialog.vue?vue&type=style&index=0&id=c199fe62&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c199fe62\"]])\n\nexport default __exports__","import axiosInstance from '@/router/axiosInstance'\r\n\r\nconst SystemManagementService = {\r\n  //  API\r\n  devices: {\r\n    // \r\n    getAll: () => {\r\n      return axiosInstance.get('/api/SystemManagement/devices')\r\n    },\r\n    \r\n    // ID\r\n    getById: (id) => {\r\n      return axiosInstance.get(`/api/SystemManagement/devices/${id}`)\r\n    },\r\n    \r\n    // \r\n    create: (deviceData) => {\r\n      return axiosInstance.post('/api/SystemManagement/devices', deviceData)\r\n    },\r\n    \r\n    // \r\n    update: (id, deviceData) => {\r\n      return axiosInstance.put(`/api/SystemManagement/devices/${id}`, deviceData)\r\n    },\r\n    \r\n    // \r\n    delete: (id) => {\r\n      return axiosInstance.delete(`/api/SystemManagement/devices/${id}`)\r\n    }\r\n  },\r\n\r\n  //  API\r\n  hosts: {\r\n    // \r\n    getAll: () => {\r\n      return axiosInstance.get('/api/SystemManagement/hosts')\r\n    },\r\n    \r\n    // ID\r\n    getById: (id) => {\r\n      return axiosInstance.get(`/api/SystemManagement/hosts/${id}`)\r\n    },\r\n    \r\n    // \r\n    create: (hostData) => {\r\n      return axiosInstance.post('/api/SystemManagement/hosts', hostData)\r\n    },\r\n    \r\n    // \r\n    update: (id, hostData) => {\r\n      return axiosInstance.put(`/api/SystemManagement/hosts/${id}`, hostData)\r\n    },\r\n    \r\n    // \r\n    delete: (id) => {\r\n      return axiosInstance.delete(`/api/SystemManagement/hosts/${id}`)\r\n    },\r\n    \r\n    // \r\n    backup: (id) => {\r\n      return axiosInstance.post(`/api/SystemManagement/hosts/${id}/backup`)\r\n    }\r\n  }\r\n}\r\n\r\nexport default SystemManagementService","<template>\r\n  <div class=\"device-management\">\r\n    <!--  -->\r\n    <div class=\"toolbar\">\r\n      <div class=\"toolbar-left\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\" :icon=\"Plus\">\r\n          \r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"handleRefresh\" :icon=\"Refresh\">\r\n          \r\n        </el-button>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <el-input\r\n          v-model=\"searchKeyword\"\r\n          placeholder=\"...\"\r\n          :prefix-icon=\"Search\"\r\n          clearable\r\n          @input=\"handleSearch\"\r\n          class=\"search-input\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"table-container\">\r\n      <el-table\r\n        :data=\"filteredDevices\"\r\n        v-loading=\"loading\"\r\n        stripe\r\n        border\r\n        class=\"device-table\"\r\n        :row-class-name=\"tableRowClassName\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" />\r\n        \r\n        <el-table-column prop=\"category\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"getCategoryTagType(row.category)\">\r\n              {{ row.category }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"url\" label=\"\" min-width=\"200\">\r\n          <template #default=\"{ row }\">\r\n            <el-link :href=\"row.url\" target=\"_blank\" type=\"primary\" v-if=\"row.url\">\r\n              {{ row.url }}\r\n            </el-link>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"dns\" label=\"DNS\" width=\"150\" />\r\n        \r\n        <el-table-column prop=\"port\" label=\"PORT\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag size=\"small\" type=\"info\" v-if=\"row.port\">\r\n              {{ row.port }}\r\n            </el-tag>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"domain\" label=\"\" width=\"150\" />\r\n        \r\n        <el-table-column prop=\"account\" label=\"\" width=\"120\" />\r\n        \r\n        <el-table-column prop=\"password\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"password-cell\">\r\n              <span v-if=\"!row.showPassword\" class=\"password-hidden\">\r\n                {{ ''.repeat(8) }}\r\n              </span>\r\n              <span v-else class=\"password-visible\">\r\n                {{ row.password }}\r\n              </span>\r\n              <el-button\r\n                :icon=\"row.showPassword ? Hide : View\"\r\n                size=\"small\"\r\n                text\r\n                @click=\"togglePasswordVisibility(row)\"\r\n                class=\"password-toggle\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"appName\" label=\"APP\" width=\"150\" />\r\n        \r\n        <el-table-column prop=\"areaId\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <AreaIdToName :areaId=\"row.areaId\" v-if=\"row.areaId\" />\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"manual\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              v-if=\"row.manual\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              :icon=\"Document\"\r\n              @click=\"handleDownloadManual(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n            <span v-else class=\"text-muted\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"\" width=\"150\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              :icon=\"Edit\"\r\n              @click=\"handleEdit(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              :icon=\"Delete\"\r\n              @click=\"handleDelete(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :total=\"totalDevices\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n\r\n    <!-- / -->\r\n    <DeviceDialog\r\n      v-model:visible=\"dialogVisible\"\r\n      :device-data=\"currentDevice\"\r\n      :is-edit=\"isEdit\"\r\n      @confirm=\"handleDialogConfirm\"\r\n      @cancel=\"handleDialogCancel\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport {\r\n  Plus,\r\n  Refresh,\r\n  Search,\r\n  Edit,\r\n  Delete,\r\n  View,\r\n  Hide,\r\n  Document\r\n} from '@element-plus/icons-vue'\r\nimport DeviceDialog from './DeviceDialog.vue'\r\nimport SystemManagementService from '@/service/SystemManagementService'\r\nimport AreaIdToName from '@/components/Common/IdToName/Area-IdToName.vue'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst searchKeyword = ref('')\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(20)\r\nconst dialogVisible = ref(false)\r\nconst isEdit = ref(false)\r\nconst currentDevice = ref({})\r\nconst selectedDevices = ref([])\r\n\r\n// \r\nconst devices = ref([])\r\n\r\n// \r\nconst filteredDevices = computed(() => {\r\n  let filtered = devices.value\r\n  \r\n  if (searchKeyword.value) {\r\n    const keyword = searchKeyword.value.toLowerCase()\r\n    filtered = filtered.filter(device => \r\n      device.category.toLowerCase().includes(keyword) ||\r\n      device.url.toLowerCase().includes(keyword) ||\r\n      device.dns.toLowerCase().includes(keyword) ||\r\n      device.domain.toLowerCase().includes(keyword) ||\r\n      device.account.toLowerCase().includes(keyword) ||\r\n      device.appName.toLowerCase().includes(keyword)\r\n    )\r\n  }\r\n  \r\n  // \r\n  const start = (currentPage.value - 1) * pageSize.value\r\n  const end = start + pageSize.value\r\n  return filtered.slice(start, end)\r\n})\r\n\r\nconst totalDevices = computed(() => {\r\n  if (searchKeyword.value) {\r\n    const keyword = searchKeyword.value.toLowerCase()\r\n    return devices.value.filter(device => \r\n      device.category.toLowerCase().includes(keyword) ||\r\n      device.url.toLowerCase().includes(keyword) ||\r\n      device.dns.toLowerCase().includes(keyword) ||\r\n      device.domain.toLowerCase().includes(keyword) ||\r\n      device.account.toLowerCase().includes(keyword) ||\r\n      device.appName.toLowerCase().includes(keyword)\r\n    ).length\r\n  }\r\n  return devices.value.length\r\n})\r\n\r\n// \r\nconst getCategoryTagType = (category) => {\r\n  const typeMap = {\r\n    '': 'primary',\r\n    '': 'success',\r\n    '': 'warning',\r\n    '': 'info'\r\n  }\r\n  return typeMap[category] || 'default'\r\n}\r\n\r\nconst togglePasswordVisibility = (row) => {\r\n  row.showPassword = !row.showPassword\r\n}\r\n\r\nconst tableRowClassName = ({ rowIndex }) => {\r\n  return rowIndex % 2 === 0 ? 'even-row' : 'odd-row'\r\n}\r\n\r\nconst handleAdd = () => {\r\n  isEdit.value = false\r\n  currentDevice.value = {\r\n    category: '',\r\n    url: '',\r\n    dns: '',\r\n    port: '',\r\n    domain: '',\r\n    account: '',\r\n    password: '',\r\n    appName: '',\r\n    manual: null,\r\n    areaId: ''\r\n  }\r\n  dialogVisible.value = true\r\n}\r\n\r\nconst handleEdit = (row) => {\r\n  isEdit.value = true\r\n  currentDevice.value = { ...row }\r\n  dialogVisible.value = true\r\n}\r\n\r\n// API \r\nconst fetchDevices = async () => {\r\n  loading.value = true\r\n  try {\r\n    const response = await SystemManagementService.devices.getAll()\r\n    if (response.data.success) {\r\n      devices.value = response.data.data.map(device => ({\r\n        ...device,\r\n        showPassword: false\r\n      }))\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      `${row.appName}`,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    const response = await SystemManagementService.devices.delete(row.id)\r\n    if (response.data.success) {\r\n      ElMessage.success('')\r\n      await fetchDevices() // \r\n    } else {\r\n      ElMessage.error(response.data.message || '')\r\n    }\r\n  } catch (error) {\r\n    if (error === 'cancel') {\r\n      ElMessage.info('')\r\n    } else {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n\r\nconst handleRefresh = async () => {\r\n  await fetchDevices()\r\n  ElMessage.success('')\r\n}\r\n\r\nconst handleSearch = () => {\r\n  currentPage.value = 1\r\n}\r\n\r\nconst handleSelectionChange = (selection) => {\r\n  selectedDevices.value = selection\r\n}\r\n\r\nconst handleSizeChange = (size) => {\r\n  pageSize.value = size\r\n  currentPage.value = 1\r\n}\r\n\r\nconst handleCurrentChange = (page) => {\r\n  currentPage.value = page\r\n}\r\n\r\nconst handleDownloadManual = (row) => {\r\n  ElMessage.info(`${row.manual}`)\r\n  // TODO: \r\n}\r\n\r\nconst handleDialogConfirm = async (deviceData) => {\r\n  try {\r\n    if (isEdit.value) {\r\n      // \r\n      const response = await SystemManagementService.devices.update(deviceData.id, deviceData)\r\n      if (response.data.success) {\r\n        ElMessage.success('')\r\n        await fetchDevices() // \r\n      } else {\r\n        ElMessage.error(response.data.message || '')\r\n        return\r\n      }\r\n    } else {\r\n      // \r\n      const response = await SystemManagementService.devices.create(deviceData)\r\n      if (response.data.success) {\r\n        ElMessage.success('')\r\n        await fetchDevices() // \r\n      } else {\r\n        ElMessage.error(response.data.message || '')\r\n        return\r\n      }\r\n    }\r\n    dialogVisible.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(isEdit.value ? '' : '')\r\n  }\r\n}\r\n\r\nconst handleDialogCancel = () => {\r\n  dialogVisible.value = false\r\n}\r\n\r\n// \r\nonMounted(async () => {\r\n  console.log('')\r\n  await fetchDevices()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.device-management {\r\n  height: 100%;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding: 15px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.toolbar-left {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.search-input {\r\n  width: 300px;\r\n}\r\n\r\n.table-container {\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.device-table {\r\n  width: 100%;\r\n}\r\n\r\n.password-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.password-hidden {\r\n  font-family: monospace;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.password-visible {\r\n  font-family: monospace;\r\n}\r\n\r\n.password-toggle {\r\n  padding: 4px;\r\n}\r\n\r\n.text-muted {\r\n  color: #909399;\r\n}\r\n\r\n.pagination-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/*  */\r\n:deep(.even-row) {\r\n  background-color: #fafafa;\r\n}\r\n\r\n:deep(.odd-row) {\r\n  background-color: #ffffff;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .toolbar {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .toolbar-left {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .search-input {\r\n    width: 100%;\r\n  }\r\n  \r\n  .device-table {\r\n    font-size: 12px;\r\n  }\r\n  \r\n  :deep(.el-table__cell) {\r\n    padding: 8px 4px;\r\n  }\r\n  \r\n  .pagination-container {\r\n    overflow-x: auto;\r\n  }\r\n  \r\n  :deep(.el-pagination) {\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .toolbar {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .toolbar-left {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .device-table {\r\n    font-size: 11px;\r\n  }\r\n  \r\n  :deep(.el-table__cell) {\r\n    padding: 6px 2px;\r\n  }\r\n  \r\n  :deep(.el-button--small) {\r\n    padding: 4px 8px;\r\n    font-size: 11px;\r\n  }\r\n}\r\n</style>","import script from \"./DeviceManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeviceManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DeviceManagement.vue?vue&type=style&index=0&id=164458ec&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-164458ec\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    :model-value=\"visible\"\r\n    :title=\"isEdit ? '' : ''\"\r\n    :width=\"dialogWidth\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    @close=\"handleClose\"\r\n    class=\"host-dialog\"\r\n  >\r\n    <el-form\r\n      ref=\"formRef\"\r\n      :model=\"formData\"\r\n      :rules=\"formRules\"\r\n      label-width=\"120px\"\r\n      class=\"host-form\"\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"hostName\">\r\n            <el-input\r\n              v-model=\"formData.hostName\"\r\n              placeholder=\"\"\r\n              :prefix-icon=\"Monitor\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"status\">\r\n            <el-select\r\n              v-model=\"formData.status\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <el-option label=\"\" value=\"\">\r\n                <div class=\"status-option\">\r\n                  <el-icon color=\"#67c23a\"><CircleCheck /></el-icon>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option label=\"\" value=\"\">\r\n                <div class=\"status-option\">\r\n                  <el-icon color=\"#f56c6c\"><CircleClose /></el-icon>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n              <el-option label=\"\" value=\"\">\r\n                <div class=\"status-option\">\r\n                  <el-icon color=\"#e6a23c\"><Warning /></el-icon>\r\n                  <span></span>\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"areaId\">\r\n            <TreeSelectArea v-model=\"formData.areaId\" />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <!--  -->\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"backupHost\">\r\n            <el-input\r\n              v-model=\"formData.backupHost\"\r\n              placeholder=\"\"\r\n              :prefix-icon=\"Box\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\" prop=\"backupLocation\">\r\n            <el-input\r\n              v-model=\"formData.backupLocation\"\r\n              placeholder=\"\"\r\n              :prefix-icon=\"Location\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"\" prop=\"originalFolder\">\r\n            <div class=\"folder-input-group\">\r\n              <el-input\r\n                v-model=\"formData.originalFolder\"\r\n                placeholder=\" (: C:\\Data\\Application)\"\r\n                :prefix-icon=\"Folder\"\r\n              />\r\n              <el-button\r\n                type=\"primary\"\r\n                :icon=\"FolderOpened\"\r\n                @click=\"openFolderDialog('original')\"\r\n                class=\"folder-btn\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n            <div class=\"folder-hint\">\r\n              <el-icon><InfoFilled /></el-icon>\r\n              <span>C:\\Program Files\\Application\\Data</span>\r\n            </div>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"\" prop=\"backupFolder\">\r\n            <div class=\"folder-input-group\">\r\n              <el-input\r\n                v-model=\"formData.backupFolder\"\r\n                placeholder=\" (: D:\\Backup\\Application)\"\r\n                :prefix-icon=\"FolderOpened\"\r\n              />\r\n              <el-button\r\n                type=\"success\"\r\n                :icon=\"FolderAdd\"\r\n                @click=\"openFolderDialog('backup')\"\r\n                class=\"folder-btn\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n            <div class=\"folder-hint\">\r\n              <el-icon><InfoFilled /></el-icon>\r\n              <span></span>\r\n            </div>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!--  -->\r\n      <el-divider content-position=\"left\">\r\n        <el-icon><Setting /></el-icon>\r\n        <span></span>\r\n      </el-divider>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"isMobile ? 24 : 12\">\r\n          <el-form-item label=\"\">\r\n            <el-switch\r\n              v-model=\"formData.autoBackup\"\r\n              active-text=\"\"\r\n              inactive-text=\"\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"isMobile ? 24 : 12\" v-if=\"formData.autoBackup\">\r\n          <el-form-item label=\"\">\r\n            <el-select\r\n              v-model=\"formData.backupFrequency\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <el-option label=\"\" value=\"daily\" />\r\n              <el-option label=\"\" value=\"weekly\" />\r\n              <el-option label=\"\" value=\"monthly\" />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row v-if=\"formData.autoBackup\">\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"\">\r\n            <el-time-picker\r\n              v-model=\"formData.backupTime\"\r\n              placeholder=\"\"\r\n              format=\"HH:mm\"\r\n              value-format=\"HH:mm\"\r\n              style=\"width: 200px\"\r\n            />\r\n            <span class=\"time-hint\"></span>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\" :loading=\"submitting\">\r\n          {{ isEdit ? '' : '' }}\r\n        </el-button>\r\n        <el-button \r\n          v-if=\"isEdit\" \r\n          type=\"warning\" \r\n          @click=\"handleTestConnection\"\r\n          :loading=\"testing\"\r\n        >\r\n          \r\n        </el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport {\r\n  Monitor,\r\n  Box,\r\n  Location,\r\n  Folder,\r\n  FolderOpened,\r\n  FolderAdd,\r\n  InfoFilled,\r\n  Setting,\r\n  CircleCheck,\r\n  CircleClose,\r\n  Warning\r\n} from '@element-plus/icons-vue'\r\nimport TreeSelectArea from '@/components/Common/TreeSelect-getData/TreeSelect-Area.vue'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  hostData: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n  isEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:visible', 'confirm', 'cancel'])\r\n\r\n// \r\nconst formRef = ref(null)\r\nconst submitting = ref(false)\r\nconst testing = ref(false)\r\n\r\n// \r\nconst formData = ref({\r\n  hostName: '',\r\n  backupHost: '',\r\n  backupLocation: '',\r\n  originalFolder: '',\r\n  backupFolder: '',\r\n  status: '',\r\n  autoBackup: false,\r\n  backupFrequency: 'daily',\r\n  backupTime: '02:00',\r\n  areaId: ''\r\n})\r\n\r\n// \r\nconst formRules = {\r\n  hostName: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    { min: 2, max: 50, message: ' 2  50 ', trigger: 'blur' },\r\n    {\r\n      pattern: /^[A-Za-z0-9\\-_]+$/,\r\n      message: '',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  originalFolder: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    {\r\n      pattern: /^[A-Za-z]:\\\\.*$/,\r\n      message: 'Windows (: C:\\\\Data)',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  status: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  backupFolder: [\r\n    {\r\n      pattern: /^[A-Za-z]:\\\\.*$/,\r\n      message: 'Windows (: D:\\\\Backup)',\r\n      trigger: 'blur'\r\n    }\r\n  ]\r\n}\r\n\r\n// \r\nconst isMobile = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    return window.innerWidth <= 768\r\n  }\r\n  return false\r\n})\r\n\r\nconst dialogWidth = computed(() => {\r\n  if (typeof window !== 'undefined') {\r\n    const width = window.innerWidth\r\n    if (width <= 480) return '95%'\r\n    if (width <= 768) return '90%'\r\n    if (width <= 1024) return '85%'\r\n    return '900px'\r\n  }\r\n  return '900px'\r\n})\r\n\r\n// \r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal) {\r\n    resetForm()\r\n    if (props.isEdit && props.hostData) {\r\n      nextTick(() => {\r\n        Object.assign(formData.value, {\r\n          ...props.hostData,\r\n          autoBackup: props.hostData.autoBackup || false,\r\n          backupFrequency: props.hostData.backupFrequency || 'daily',\r\n          backupTime: props.hostData.backupTime || '02:00'\r\n        })\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// \r\nconst resetForm = () => {\r\n  formData.value = {\r\n    hostName: '',\r\n    backupHost: '',\r\n    backupLocation: '',\r\n    originalFolder: '',\r\n    backupFolder: '',\r\n    status: '',\r\n    autoBackup: false,\r\n    backupFrequency: 'daily',\r\n    backupTime: '02:00',\r\n    areaId: ''\r\n  }\r\n  if (formRef.value) {\r\n    formRef.value.resetFields()\r\n  }\r\n}\r\n\r\nconst openFolderDialog = (type) => {\r\n  // TODO: \r\n  ElMessage.info(`${type === 'original' ? '' : ''}`)\r\n  \r\n  // \r\n  const samplePaths = {\r\n    original: [\r\n      'C:\\\\Program Files\\\\Application\\\\Data',\r\n      'C:\\\\inetpub\\\\wwwroot\\\\webapp',\r\n      'D:\\\\Applications\\\\ERP\\\\Files'\r\n    ],\r\n    backup: [\r\n      'D:\\\\Backup\\\\Application\\\\Data',\r\n      'E:\\\\Backup\\\\webapp',\r\n      'F:\\\\Backup\\\\ERP\\\\Files'\r\n    ]\r\n  }\r\n  \r\n  const paths = samplePaths[type]\r\n  const selectedPath = paths[Math.floor(Math.random() * paths.length)]\r\n  \r\n  if (type === 'original') {\r\n    formData.value.originalFolder = selectedPath\r\n  } else {\r\n    formData.value.backupFolder = selectedPath\r\n  }\r\n}\r\n\r\nconst handleTestConnection = async () => {\r\n  testing.value = true\r\n  try {\r\n    // \r\n    await new Promise(resolve => setTimeout(resolve, 2000))\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n  } finally {\r\n    testing.value = false\r\n  }\r\n}\r\n\r\nconst handleConfirm = async () => {\r\n  if (!formRef.value) return\r\n  \r\n  try {\r\n    await formRef.value.validate()\r\n    submitting.value = true\r\n    \r\n    // API\r\n    await new Promise(resolve => setTimeout(resolve, 1000))\r\n    \r\n    emit('confirm', { ...formData.value })\r\n    submitting.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    submitting.value = false\r\n  }\r\n}\r\n\r\nconst handleClose = () => {\r\n  emit('update:visible', false)\r\n  emit('cancel')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.host-dialog :deep(.el-dialog) {\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n.host-dialog :deep(.el-dialog__header) {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n  padding: 20px;\r\n  margin: 0;\r\n}\r\n\r\n.host-dialog :deep(.el-dialog__title) {\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n}\r\n\r\n.host-dialog :deep(.el-dialog__headerbtn .el-dialog__close) {\r\n  color: white;\r\n  font-size: 20px;\r\n}\r\n\r\n.host-dialog :deep(.el-dialog__body) {\r\n  padding: 25px;\r\n  background: #fafafa;\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.host-form {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.folder-input-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.folder-btn {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.folder-hint {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  margin-top: 8px;\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.time-hint {\r\n  margin-left: 10px;\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.status-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  padding: 20px;\r\n  background: white;\r\n  border-top: 1px solid #ebeef5;\r\n  margin: 0 -25px -25px -25px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-divider__text) {\r\n  background: #fafafa;\r\n  color: #667eea;\r\n  font-weight: 600;\r\n}\r\n\r\n:deep(.el-divider__text .el-icon) {\r\n  margin-right: 6px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-form-item__label) {\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n:deep(.el-input__wrapper) {\r\n  border-radius: 6px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.el-input__wrapper:hover) {\r\n  box-shadow: 0 0 0 1px #667eea;\r\n}\r\n\r\n:deep(.el-select .el-input__wrapper) {\r\n  cursor: pointer;\r\n}\r\n\r\n:deep(.el-switch) {\r\n  --el-switch-on-color: #667eea;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .host-dialog :deep(.el-dialog__body) {\r\n    padding: 15px;\r\n    max-height: 75vh;\r\n  }\r\n  \r\n  .host-form {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    padding: 15px;\r\n    margin: 0 -15px -15px -15px;\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .folder-input-group {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .folder-btn {\r\n    width: 100%;\r\n  }\r\n  \r\n  :deep(.el-form-item) {\r\n    margin-bottom: 18px;\r\n  }\r\n  \r\n  :deep(.el-form-item__label) {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .host-dialog :deep(.el-dialog__header) {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .host-dialog :deep(.el-dialog__title) {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .host-dialog :deep(.el-dialog__body) {\r\n    padding: 10px;\r\n    max-height: 80vh;\r\n  }\r\n  \r\n  .host-form {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .dialog-footer .el-button {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>","import script from \"./HostDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HostDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HostDialog.vue?vue&type=style&index=0&id=76a5325b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-76a5325b\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"host-management\">\r\n    <!--  -->\r\n    <div class=\"toolbar\">\r\n      <div class=\"toolbar-left\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\" :icon=\"Plus\">\r\n          \r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"handleRefresh\" :icon=\"Refresh\">\r\n          \r\n        </el-button>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <el-input\r\n          v-model=\"searchKeyword\"\r\n          placeholder=\"...\"\r\n          :prefix-icon=\"Search\"\r\n          clearable\r\n          @input=\"handleSearch\"\r\n          class=\"search-input\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"table-container\">\r\n      <el-table\r\n        :data=\"filteredHosts\"\r\n        v-loading=\"loading\"\r\n        stripe\r\n        border\r\n        class=\"host-table\"\r\n        :row-class-name=\"tableRowClassName\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" />\r\n        \r\n        <el-table-column prop=\"hostName\" label=\"\" min-width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"host-name-cell\">\r\n              <el-icon class=\"host-icon\"><Monitor /></el-icon>\r\n              <span class=\"host-name\">{{ row.hostName }}</span>\r\n              <el-tag \r\n                :type=\"getHostStatusType(row.status)\" \r\n                size=\"small\"\r\n                class=\"status-tag\"\r\n              >\r\n                {{ row.status }}\r\n              </el-tag>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"backupHost\" label=\"\" min-width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"row.backupHost\" class=\"backup-host-cell\">\r\n              <el-icon class=\"backup-icon\"><Box /></el-icon>\r\n              <span>{{ row.backupHost }}</span>\r\n            </div>\r\n            <span v-else class=\"text-muted\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"backupLocation\" label=\"\" min-width=\"180\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"row.backupLocation\" class=\"location-cell\">\r\n              <el-icon class=\"location-icon\"><Location /></el-icon>\r\n              <span>{{ row.backupLocation }}</span>\r\n            </div>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"originalFolder\" label=\"\" min-width=\"200\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"folder-cell\">\r\n              <el-icon class=\"folder-icon\"><Folder /></el-icon>\r\n              <el-tooltip :content=\"row.originalFolder\" placement=\"top\">\r\n                <span class=\"folder-path\">{{ row.originalFolder }}</span>\r\n              </el-tooltip>\r\n              <el-button\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                text\r\n                :icon=\"CopyDocument\"\r\n                @click=\"copyToClipboard(row.originalFolder)\"\r\n                class=\"copy-btn\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"backupFolder\" label=\"\" min-width=\"200\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"row.backupFolder\" class=\"folder-cell\">\r\n              <el-icon class=\"folder-icon\"><FolderOpened /></el-icon>\r\n              <el-tooltip :content=\"row.backupFolder\" placement=\"top\">\r\n                <span class=\"folder-path\">{{ row.backupFolder }}</span>\r\n              </el-tooltip>\r\n              <el-button\r\n                type=\"success\"\r\n                size=\"small\"\r\n                text\r\n                :icon=\"CopyDocument\"\r\n                @click=\"copyToClipboard(row.backupFolder)\"\r\n                class=\"copy-btn\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column prop=\"areaId\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <AreaIdToName :areaId=\"row.areaId\" v-if=\"row.areaId\" />\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"\" width=\"160\">\r\n          <template #default=\"{ row }\">\r\n            <div v-if=\"row.lastBackupTime\" class=\"backup-time-cell\">\r\n              <el-icon class=\"time-icon\"><Clock /></el-icon>\r\n              <span>{{ formatDateTime(row.lastBackupTime) }}</span>\r\n            </div>\r\n            <span v-else class=\"text-muted\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"\" width=\"180\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"action-buttons\">\r\n              <el-button\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                :icon=\"Edit\"\r\n                @click=\"handleEdit(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button\r\n                type=\"warning\"\r\n                size=\"small\"\r\n                :icon=\"Refresh\"\r\n                @click=\"handleBackup(row)\"\r\n                :loading=\"row.backingUp\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button\r\n                type=\"danger\"\r\n                size=\"small\"\r\n                :icon=\"Delete\"\r\n                @click=\"handleDelete(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :total=\"totalHosts\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n\r\n    <!-- / -->\r\n    <HostDialog\r\n      v-model:visible=\"dialogVisible\"\r\n      :host-data=\"currentHost\"\r\n      :is-edit=\"isEdit\"\r\n      @confirm=\"handleDialogConfirm\"\r\n      @cancel=\"handleDialogCancel\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport {\r\n  Plus,\r\n  Refresh,\r\n  Search,\r\n  Edit,\r\n  Delete,\r\n  Monitor,\r\n  Box,\r\n  Location,\r\n  Folder,\r\n  FolderOpened,\r\n  Clock,\r\n  CopyDocument\r\n} from '@element-plus/icons-vue'\r\nimport HostDialog from './HostDialog.vue'\r\nimport SystemManagementService from '@/service/SystemManagementService'\r\nimport AreaIdToName from '@/components/Common/IdToName/Area-IdToName.vue'\r\n\r\n// \r\nconst loading = ref(false)\r\nconst searchKeyword = ref('')\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(20)\r\nconst dialogVisible = ref(false)\r\nconst isEdit = ref(false)\r\nconst currentHost = ref({})\r\nconst selectedHosts = ref([])\r\n\r\n// \r\nconst hosts = ref([])\r\n\r\n// \r\nconst filteredHosts = computed(() => {\r\n  let filtered = hosts.value\r\n  \r\n  if (searchKeyword.value) {\r\n    const keyword = searchKeyword.value.toLowerCase()\r\n    filtered = filtered.filter(host => \r\n      host.hostName.toLowerCase().includes(keyword) ||\r\n      (host.backupHost && host.backupHost.toLowerCase().includes(keyword)) ||\r\n      (host.backupLocation && host.backupLocation.toLowerCase().includes(keyword)) ||\r\n      host.originalFolder.toLowerCase().includes(keyword) ||\r\n      (host.backupFolder && host.backupFolder.toLowerCase().includes(keyword))\r\n    )\r\n  }\r\n  \r\n  // \r\n  const start = (currentPage.value - 1) * pageSize.value\r\n  const end = start + pageSize.value\r\n  return filtered.slice(start, end)\r\n})\r\n\r\nconst totalHosts = computed(() => {\r\n  if (searchKeyword.value) {\r\n    const keyword = searchKeyword.value.toLowerCase()\r\n    return hosts.value.filter(host => \r\n      host.hostName.toLowerCase().includes(keyword) ||\r\n      (host.backupHost && host.backupHost.toLowerCase().includes(keyword)) ||\r\n      (host.backupLocation && host.backupLocation.toLowerCase().includes(keyword)) ||\r\n      host.originalFolder.toLowerCase().includes(keyword) ||\r\n      (host.backupFolder && host.backupFolder.toLowerCase().includes(keyword))\r\n    ).length\r\n  }\r\n  return hosts.value.length\r\n})\r\n\r\n// \r\nconst getHostStatusType = (status) => {\r\n  const typeMap = {\r\n    '': 'success',\r\n    '': 'danger',\r\n    '': 'warning',\r\n    '': 'info'\r\n  }\r\n  return typeMap[status] || 'default'\r\n}\r\n\r\nconst formatDateTime = (dateTime) => {\r\n  if (!dateTime) return '-'\r\n  const date = new Date(dateTime)\r\n  return date.toLocaleString('zh-TW', {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n\r\nconst copyToClipboard = async (text) => {\r\n  try {\r\n    await navigator.clipboard.writeText(text)\r\n    ElMessage.success('')\r\n  } catch (err) {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst tableRowClassName = ({ rowIndex }) => {\r\n  return rowIndex % 2 === 0 ? 'even-row' : 'odd-row'\r\n}\r\n\r\nconst handleAdd = () => {\r\n  isEdit.value = false\r\n  currentHost.value = {\r\n    hostName: '',\r\n    backupHost: '',\r\n    backupLocation: '',\r\n    originalFolder: '',\r\n    backupFolder: '',\r\n    status: '',\r\n    areaId: ''\r\n  }\r\n  dialogVisible.value = true\r\n}\r\n\r\nconst handleEdit = (row) => {\r\n  isEdit.value = true\r\n  currentHost.value = { ...row }\r\n  dialogVisible.value = true\r\n}\r\n\r\n// API \r\nconst fetchHosts = async () => {\r\n  loading.value = true\r\n  try {\r\n    const response = await SystemManagementService.hosts.getAll()\r\n    if (response.data.success) {\r\n      hosts.value = response.data.data.map(host => ({\r\n        ...host,\r\n        backingUp: false\r\n      }))\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      `${row.hostName}`,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    const response = await SystemManagementService.hosts.delete(row.id)\r\n    if (response.data.success) {\r\n      ElMessage.success('')\r\n      await fetchHosts() // \r\n    } else {\r\n      ElMessage.error(response.data.message || '')\r\n    }\r\n  } catch (error) {\r\n    if (error === 'cancel') {\r\n      ElMessage.info('')\r\n    } else {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n\r\nconst handleBackup = async (row) => {\r\n  if (!row.backupHost) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  row.backingUp = true\r\n  try {\r\n    const response = await SystemManagementService.hosts.backup(row.id)\r\n    if (response.data.success) {\r\n      ElMessage.success(` ${row.hostName} `)\r\n      await fetchHosts() // \r\n    } else {\r\n      ElMessage.error(response.data.message || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    row.backingUp = false\r\n  }\r\n}\r\n\r\nconst handleRefresh = async () => {\r\n  await fetchHosts()\r\n  ElMessage.success('')\r\n}\r\n\r\nconst handleSearch = () => {\r\n  currentPage.value = 1\r\n}\r\n\r\nconst handleSelectionChange = (selection) => {\r\n  selectedHosts.value = selection\r\n}\r\n\r\nconst handleSizeChange = (size) => {\r\n  pageSize.value = size\r\n  currentPage.value = 1\r\n}\r\n\r\nconst handleCurrentChange = (page) => {\r\n  currentPage.value = page\r\n}\r\n\r\nconst handleDialogConfirm = async (hostData) => {\r\n  try {\r\n    if (isEdit.value) {\r\n      // \r\n      const response = await SystemManagementService.hosts.update(hostData.id, hostData)\r\n      if (response.data.success) {\r\n        ElMessage.success('')\r\n        await fetchHosts() // \r\n      } else {\r\n        ElMessage.error(response.data.message || '')\r\n        return\r\n      }\r\n    } else {\r\n      // \r\n      const response = await SystemManagementService.hosts.create(hostData)\r\n      if (response.data.success) {\r\n        ElMessage.success('')\r\n        await fetchHosts() // \r\n      } else {\r\n        ElMessage.error(response.data.message || '')\r\n        return\r\n      }\r\n    }\r\n    dialogVisible.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(isEdit.value ? '' : '')\r\n  }\r\n}\r\n\r\nconst handleDialogCancel = () => {\r\n  dialogVisible.value = false\r\n}\r\n\r\n// \r\nonMounted(async () => {\r\n  console.log('')\r\n  await fetchHosts()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.host-management {\r\n  height: 100%;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding: 15px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.toolbar-left {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.search-input {\r\n  width: 300px;\r\n}\r\n\r\n.table-container {\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.host-table {\r\n  width: 100%;\r\n}\r\n\r\n.host-name-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.host-icon {\r\n  color: #409eff;\r\n}\r\n\r\n.host-name {\r\n  font-weight: 600;\r\n  flex: 1;\r\n}\r\n\r\n.status-tag {\r\n  margin-left: auto;\r\n}\r\n\r\n.backup-host-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.backup-icon {\r\n  color: #67c23a;\r\n}\r\n\r\n.location-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.location-icon {\r\n  color: #e6a23c;\r\n}\r\n\r\n.folder-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  max-width: 100%;\r\n}\r\n\r\n.folder-icon {\r\n  color: #909399;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.folder-path {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  font-family: monospace;\r\n  font-size: 12px;\r\n}\r\n\r\n.copy-btn {\r\n  flex-shrink: 0;\r\n  margin-left: 4px;\r\n}\r\n\r\n.backup-time-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.time-icon {\r\n  color: #606266;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 4px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.text-muted {\r\n  color: #909399;\r\n  font-style: italic;\r\n}\r\n\r\n.pagination-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/*  */\r\n:deep(.even-row) {\r\n  background-color: #fafafa;\r\n}\r\n\r\n:deep(.odd-row) {\r\n  background-color: #ffffff;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .toolbar {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .toolbar-left {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .search-input {\r\n    width: 100%;\r\n  }\r\n  \r\n  .host-table {\r\n    font-size: 12px;\r\n  }\r\n  \r\n  :deep(.el-table__cell) {\r\n    padding: 8px 4px;\r\n  }\r\n  \r\n  .folder-path {\r\n    font-size: 10px;\r\n  }\r\n  \r\n  .action-buttons {\r\n    flex-direction: column;\r\n    gap: 2px;\r\n  }\r\n  \r\n  .action-buttons .el-button {\r\n    font-size: 11px;\r\n    padding: 4px 8px;\r\n  }\r\n  \r\n  .pagination-container {\r\n    overflow-x: auto;\r\n  }\r\n  \r\n  :deep(.el-pagination) {\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .toolbar {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .toolbar-left {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .host-table {\r\n    font-size: 11px;\r\n  }\r\n  \r\n  :deep(.el-table__cell) {\r\n    padding: 6px 2px;\r\n  }\r\n  \r\n  .host-name-cell {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .folder-cell {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .copy-btn {\r\n    margin-left: 0;\r\n    align-self: flex-end;\r\n  }\r\n}\r\n</style>","import script from \"./HostManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HostManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HostManagement.vue?vue&type=style&index=0&id=395ceb1e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-395ceb1e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"device-host-management\">\r\n    <div class=\"page-header\">\r\n      <h1 class=\"page-title\">/</h1>\r\n      <p class=\"page-description\"></p>\r\n    </div>\r\n\r\n    <el-tabs v-model=\"activeTab\" class=\"management-tabs\" @tab-change=\"handleTabChange\">\r\n      <el-tab-pane label=\"\" name=\"devices\">\r\n        <DeviceManagement ref=\"deviceManagementRef\" />\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"\" name=\"hosts\">\r\n        <HostManagement ref=\"hostManagementRef\" />\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport DeviceManagement from './DeviceManagement/DeviceManagement.vue'\r\nimport HostManagement from './HostManagement/HostManagement.vue'\r\n\r\n// \r\nconst activeTab = ref('devices')\r\n\r\n// \r\nconst deviceManagementRef = ref(null)\r\nconst hostManagementRef = ref(null)\r\n\r\n// \r\nconst handleTabChange = (tabName) => {\r\n  console.log(':', tabName)\r\n  // \r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  console.log('/')\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.device-host-management {\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #f5f7fa, #c3cfe2);\r\n  min-height: 100vh;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  border-radius: 12px;\r\n  color: white;\r\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.page-title {\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin: 0 0 10px 0;\r\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n  opacity: 0.9;\r\n}\r\n\r\n.management-tabs {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n/*  */\r\n:deep(.el-tabs__header) {\r\n  margin: 0;\r\n  background: linear-gradient(135deg, #f8f9fa, #e9ecef);\r\n  border-bottom: 2px solid #dee2e6;\r\n}\r\n\r\n:deep(.el-tabs__nav-wrap) {\r\n  padding: 0 20px;\r\n}\r\n\r\n:deep(.el-tabs__item) {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  padding: 0 30px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  border-radius: 8px 8px 0 0;\r\n  margin-right: 5px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n:deep(.el-tabs__item:hover) {\r\n  color: #667eea;\r\n  background: rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n:deep(.el-tabs__item.is-active) {\r\n  color: #667eea;\r\n  background: white;\r\n  border-bottom: 2px solid #667eea;\r\n  font-weight: 700;\r\n}\r\n\r\n:deep(.el-tabs__content) {\r\n  padding: 20px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .device-host-management {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .page-header {\r\n    margin-bottom: 20px;\r\n    padding: 15px;\r\n  }\r\n  \r\n  .page-title {\r\n    font-size: 1.8rem;\r\n  }\r\n  \r\n  .page-description {\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  :deep(.el-tabs__nav-wrap) {\r\n    padding: 0 10px;\r\n  }\r\n  \r\n  :deep(.el-tabs__item) {\r\n    font-size: 14px;\r\n    padding: 0 15px;\r\n    height: 45px;\r\n    line-height: 45px;\r\n  }\r\n  \r\n  :deep(.el-tabs__content) {\r\n    padding: 15px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .device-host-management {\r\n    padding: 5px;\r\n  }\r\n  \r\n  .page-header {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .page-title {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  :deep(.el-tabs__item) {\r\n    font-size: 13px;\r\n    padding: 0 10px;\r\n  }\r\n  \r\n  :deep(.el-tabs__content) {\r\n    padding: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./DeviceHostManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeviceHostManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DeviceHostManagement.vue?vue&type=style&index=0&id=11392ad1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11392ad1\"]])\n\nexport default __exports__","\r\nlet axiosInstance;\r\n\r\nexport function setCRMAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\n\r\n// Controller Path\r\nconst controllerPath = 'CRM';\r\n\r\nexport default {\r\n  createCustomerTracking(formData) {\r\n    return api().post(`${controllerPath}/CustomerTracking`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getCustomerTracking() {\r\n    return api().get(`${controllerPath}/CustomerTracking`);\r\n  },\r\n\r\n  getColdCallingReport(startDate,endDate){\r\n    return api().get(`${controllerPath}/ColdCallingReport/${startDate}/${endDate}`);\r\n  },\r\n\r\n  getCustomerReport(){\r\n    return api().get(`${controllerPath}/CustomerReport`);\r\n  },\r\n\r\n  addCustomerReport(payload){\r\n    return api().post(`${controllerPath}/CustomerReport`,payload);\r\n  },\r\n\r\n  updateCustomerTracking(id, payload) {\r\n    return api().put(`${controllerPath}/CustomerTracking/${id}`, payload);\r\n  },\r\n\r\n  deleteCustomerTracking(id) {\r\n    return api().delete(`${controllerPath}/CustomerTracking/${id}`);\r\n  },\r\n\r\n  getSalespersonBusinessArea(){\r\n    return api().get(`${controllerPath}/SalespersonBusinessArea`);\r\n  },\r\n\r\n  getComCustomer() {\r\n    return api().get(`${controllerPath}/comCustomer`);\r\n  },\r\n\r\n  getCustomerClass(customerId, start, end) {\r\n    \r\n    return api().get(`${controllerPath}/customerClass`, {\r\n      params: { customerId, start, end }\r\n    });\r\n  },\r\n\r\n  getCustomerClassByAmount(amount,start,end) {\r\n    return api().get(`${controllerPath}/customerClassByAmount`, {\r\n      params: { amount, start, end }\r\n    } );\r\n  },\r\n\r\n  getOrderSummaries(CustomerID, start, end){\r\n        console.log(`${CustomerID}  ${start}  ${end}`)\r\n    return api().get(`${controllerPath}/OrderSummaries`, {\r\n      params: { CustomerID,start, end }\r\n    });\r\n  },\r\n\r\n  updateOrderProductCategory(OrderNumber, ProductCategory) {\r\n    return api().post(`${controllerPath}/OrderProductCategory`, \r\n      { OrderNumber, ProductCategory } \r\n    );\r\n  },\r\n  getAllCustomerTracking() {\r\n    return api().get(`${controllerPath}/CustomerTracking`);\r\n  },\r\n\r\n  getCustomerTrackingById(id) {\r\n    return api().get(`${controllerPath}/CustomerTracking/${id}`);\r\n  },\r\n  createCustomerForm(formData) {\r\n    return api().post(`${controllerPath}/CustomerForm`, formData, {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  },\r\n\r\n  getCustomerForms() {\r\n    return api().get(`${controllerPath}/CustomerForm`);\r\n  },\r\n\r\n  getCustomerReport_CustomerReadModels() {\r\n    return api().get(`${controllerPath}/CustomerReport/CustomerReadModels`);\r\n  },\r\n  \r\n\r\n  getCustomerFormsByUserID(userID) {\r\n    return api().get(`${controllerPath}/CustomerFormByUserID/${userID}`);\r\n  },\r\n\r\n  // \r\n  getAllCustomerForms() {\r\n    return api().get(`${controllerPath}/CustomerForm`);\r\n  },\r\n  \r\n  updateCustomer(id, payload) {\r\n    return api().put(`${controllerPath}/CustomerForm/${id}`, payload);\r\n  },\r\n\r\n  deleteCustomer(id) {\r\n    return api().delete(`${controllerPath}/CustomerForm/${id}`);\r\n  },\r\n\r\n  getSalesEmployeeData() {\r\n    return api().get(`${controllerPath}/getSalesEmployeeData`);\r\n  },\r\n\r\n  //#region CaseTracking\r\n\r\n    // \r\n    getCaseTrackings() {\r\n      return api().get(`${controllerPath}/CaseTracking`)\r\n    },\r\n\r\n    // \r\n    getCaseTracking(id) {\r\n      return api().get(`${controllerPath}/CaseTracking/${id}`)\r\n    },\r\n\r\n    // \r\n    getCaseTrackingByUserID(userID){\r\n      return api().get(`${controllerPath}/CaseTrackingByUserID/${userID}`)\r\n    },\r\n\r\n    // \r\n    getAllCaseTracking() {\r\n      return api().get(`${controllerPath}/CaseTracking`)\r\n    },\r\n\r\n    // \r\n    createCaseTracking(payload) {\r\n      console.log(payload);\r\n      return api().post(`${controllerPath}/CaseTracking`, payload)\r\n    },\r\n\r\n    // \r\n    updateCaseTracking(id, payload) {\r\n      console.log(\"id:\",id)\r\n      console.log(\"updateCaseTracking:\",payload);\r\n      return api().put(`${controllerPath}/CaseTracking/${id}`, payload)\r\n    },\r\n\r\n    // \r\n    deleteCaseTracking(id) {\r\n      return api().delete(`${controllerPath}/CaseTracking/${id}`)\r\n    },\r\n\r\n    // \"\"\"\"\r\n    updateFXRateAndOriginalAmount(id, payload) {\r\n      console.log(\"id:\",id)\r\n      console.log(\"updateFXRateAndOriginalAmount:\",payload);\r\n      return api().put(`${controllerPath}/CaseTrackingAmount/${id}`, payload)\r\n    },\r\n\r\n  //#endregion\r\n\r\n  // #region DeviceUsageCategory\r\n    // \r\n    getDeviceUsageCategories() {\r\n      return api().get(`${controllerPath}/DeviceUsageCategories`)\r\n    },\r\n  // #endregion\r\n\r\n  // #region \r\n  getPerformanceReport(){\r\n    return api().get(`${controllerPath}/PerformanceReport`)\r\n  },\r\n\r\n  getPerformanceReportByYear(year){\r\n    return api().get(`${controllerPath}/performanceReport/${year}`)\r\n  },\r\n\r\n  getComBillAccounts(year,empName){\r\n    return api().get(`${controllerPath}/comBillAccounts/${year}/${empName}`)\r\n  },\r\n\r\n\r\n  createPerformanceReport(payload) {\r\n    return api().post(`${controllerPath}/PerformanceReport`, payload);\r\n  },\r\n\r\n  updatePerformanceReport(year, empID, payload) {\r\n    return api().put(`${controllerPath}/PerformanceReport/${year}/${empID}`, payload);\r\n  },\r\n\r\n  updatePerformanceReportAnnual(year, empID, annualAmount) {\r\n    return api().put(`${controllerPath}/PerformanceReportByAnnual/${year}/${empID}/${annualAmount}`);\r\n  },\r\n\r\n  deletePerformanceReport(id) {\r\n    return api().delete(`${controllerPath}/PerformanceReport/${id}`);\r\n  },\r\n\r\n  // #endregion\r\n\r\n  // #region PerformanceDashboard\r\n  getPerformanceDashboard(selectedYear) {\r\n    return api().get(`${controllerPath}/PerformanceDashboard/${selectedYear}`);\r\n  },\r\n  // #endregion\r\n};\r\n\r\n","<template>\r\n    <div style=\"margin-top:3rem; text-align: center; \">\r\n\r\n        <el-date-picker\r\n                v-model=\"selectedYear\"\r\n                type=\"year\"\r\n                size=\"large\"\r\n                placeholder=\"\"\r\n                style=\"width: 8rem;margin-right: 2rem;margin-top:0.5rem;font-size: 2rem;width:11.5rem;\"\r\n                @change=\"fetchPerformanceReport(selectedYear.getFullYear())\"\r\n            />\r\n        <div style=\"display: flex; gap: 2rem; margin-bottom: 20px; margin-top:20px;align-items: center; justify-content: center;\">\r\n            <el-radio-group v-model=\"selectedView\" size=\"large\" fill=\"#6cf\">\r\n                <el-radio-button label=\"monthly\"></el-radio-button>\r\n                <el-radio-button label=\"quarterly\"></el-radio-button>\r\n                <el-radio-button label=\"yearly\"></el-radio-button>\r\n            </el-radio-group>\r\n            \r\n            <el-radio-group v-model=\"selectedDataType\" size=\"large\" fill=\"#52c41a\" @change=\"handleDataTypeChange\">\r\n                <el-radio-button label=\"sales\"></el-radio-button>\r\n                <el-radio-button label=\"region\"></el-radio-button>\r\n            </el-radio-group>\r\n        </div>\r\n\r\n        <!--  -  -->\r\n        <div v-if=\"selectedDataType === 'sales'\" style=\"margin-bottom: 20px;\">\r\n            <el-radio-group v-model=\"selectedBusinessArea\" size=\"large\" @change=\"handleBusinessAreaChange\">\r\n                <el-radio-button v-if=\"showAllBusinessAreaOption\" value=\"\"></el-radio-button>\r\n                <el-radio-button \r\n                    v-for=\"area in businessAreaOptions\" \r\n                    :key=\"area\" \r\n                    :value=\"area\"\r\n                >\r\n                    {{ area }}\r\n                </el-radio-button>\r\n            </el-radio-group>\r\n        </div>\r\n    <div>\r\n        <el-table class=\"form\"  v-if=\"selectedView === 'monthly'\" :data=\"tableData\" style=\"width: 100%; max-width: 140rem; \">\r\n                <!--  -  -->\r\n                <el-table-column v-if=\"selectedDataType === 'sales'\" label=\"\" width=\"85\" fixed=\"left\" header-align=\"center\">\r\n                    <template #default=\"{ row }\">\r\n                        <div v-if=\"editingRowId !== row.id\">\r\n                            <el-button type=\"primary\" size=\"default\" @click=\"editRow(row)\"></el-button>\r\n                        </div>\r\n                        <div v-else >\r\n                            <el-button type=\"success\"  style='margin-left: -0.1rem'  size=\"default\" @click=\"doneEdit(row)\"></el-button>\r\n                            <el-button type=\"info\" style='margin-left: -0.1rem' size=\"default\" @click=\"closeEdit()\"></el-button>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n                \r\n                <!-- / -->\r\n                <el-table-column \r\n                    prop=\"salesRepName\" \r\n                    :label=\"selectedDataType === 'sales' ? '' : ''\" \r\n                    width=\"120\" \r\n                    fixed=\"left\" \r\n                    header-align=\"center\"\r\n                >\r\n                    <template #default=\"{ row }\">\r\n                        <span>{{ row.salesRepName }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <!--  -->\r\n                <el-table-column v-for=\"month in 12\" :key=\"month\" :label=\"`${month}`\" width=\"200\" header-align=\"center\">\r\n                    <template #default=\"{ row }\">\r\n                        <!-- () -->\r\n                        <div v-if=\"selectedDataType === 'sales'\">\r\n                            <div v-if=\"editingRowId !== row.id\">\r\n                                <div>: {{ formatNumberWithCommas(row[`month${month}Target`]) }}</div>\r\n                                <div>: {{ formatNumberWithCommas(row[`month${month}Actual`]) }}</div>\r\n                                <div>(): {{ formatNumberWithCommas(row[`month${month}LastYearActual`]) }}</div>\r\n                                <div :style=\"getAchievementRateStyle(row[`month${month}AchievementRate`])\">: {{ row[`month${month}AchievementRate`] }}</div>\r\n                                <div :style=\"getComparisonStyle(row[`month${month}Comparison`])\">: {{ row[`month${month}Comparison`] }}</div>\r\n                            </div>\r\n                            <div v-else>\r\n                                <el-input v-model=\"row[`month${month}Target`]\" size=\"large\" placeholder=\"\" @change=\"calculateAchievementRate(row, month)\" />\r\n                            </div>\r\n                        </div>\r\n                        <!-- () -->\r\n                        <div v-else>\r\n                            <div>: {{ formatNumberWithCommas(row[`month${month}Actual`]) }}</div>\r\n                            <div>(): {{ formatNumberWithCommas(row[`month${month}LastYearActual`]) }}</div>\r\n                            <div :style=\"getComparisonStyle(row[`month${month}Comparison`])\">: {{ row[`month${month}Comparison`] }}</div>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n        </el-table>\r\n    </div>\r\n\r\n    </div>\r\n\r\n    <div v-if=\"selectedView === 'quarterly'\" style=\"margin: 0 auto;\">\r\n        <el-table class=\"form\" :data=\"quarterlyData\" style=\"width: 100%; max-width: 75rem;\">\r\n            <el-table-column \r\n                prop=\"salesRepName\" \r\n                :label=\"selectedDataType === 'sales' ? '' : ''\" \r\n                width=\"120\" \r\n                fixed=\"left\" \r\n                header-align=\"center\"\r\n            >\r\n                <template #default=\"{ row }\">\r\n                    <span>{{ row.salesRepName }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column v-for=\"q in 4\" :key=\"q\" :label=\"`Q${q}`\" width=\"250\" header-align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <!-- () -->\r\n                    <div v-if=\"selectedDataType === 'sales'\">\r\n                        <div>: {{ formatNumberWithCommas(row[`quarter${q}Target`]) }}</div>\r\n                        <div>: {{ formatNumberWithCommas(row[`quarter${q}Actual`]) }}</div>\r\n                        <div>(): {{ formatNumberWithCommas(row[`quarter${q}LastYearActual`]) }}</div>\r\n                        <div :style=\"getAchievementRateStyle(row[`quarter${q}AchievementRate`])\">:{{ row[`quarter${q}AchievementRate`] }}</div>\r\n                        <div :style=\"getComparisonStyle(row[`quarter${q}Comparison`])\">: {{ row[`quarter${q}Comparison`] }}</div>\r\n                    </div>\r\n                    <!-- () -->\r\n                    <div v-else>\r\n                        <div>: {{ formatNumberWithCommas(row[`quarter${q}Actual`]) }}</div>\r\n                        <div>(): {{ formatNumberWithCommas(row[`quarter${q}LastYearActual`]) }}</div>\r\n                        <div :style=\"getComparisonStyle(row[`quarter${q}Comparison`])\">: {{ row[`quarter${q}Comparison`] }}</div>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n\r\n    <div v-if=\"selectedView === 'yearly'\" style=\"margin: 0 auto;\">\r\n        <el-table class=\"form\" :data=\"yearlyData\" :style=\"selectedDataType === 'region' ? 'width: 100%; max-width: 25rem;' : 'width: 100%; max-width: 30rem;'\">\r\n            <!--  -  -->\r\n            <el-table-column v-if=\"selectedDataType === 'sales'\" label=\"\" width=\"85\" fixed=\"left\" header-align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <div v-if=\"editingRowId !== row.id\">\r\n                        <el-button type=\"primary\" size=\"default\" @click=\"editRow(row)\"></el-button>\r\n                    </div>\r\n                    <div v-else >\r\n                        <el-button type=\"success\" size=\"default\" @click=\"doneEdit(row)\"></el-button>\r\n                        <el-button type=\"info\" size=\"default\" @click=\"closeEdit()\"></el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            \r\n            <!-- / -->\r\n            <el-table-column \r\n                prop=\"salesRepName\" \r\n                :label=\"selectedDataType === 'sales' ? '' : ''\" \r\n                width=\"120\" \r\n                fixed=\"left\" \r\n                header-align=\"center\"\r\n            >\r\n                <template #default=\"{ row }\">\r\n                    <span>{{ row.salesRepName }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            \r\n            <!--  -->\r\n            <el-table-column label=\"\" width=\"250\" header-align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <!-- () -->\r\n                    <div v-if=\"selectedDataType === 'sales'\">\r\n                        <div v-if=\"editingRowId !== row.id\">\r\n                            <div>: {{ formatNumberWithCommas(row.yearTarget) }}</div>\r\n                            <div>: {{ formatNumberWithCommas(row.yearActual) }}</div>\r\n                            <div>(): {{ formatNumberWithCommas(row.yearLastYearActual) }}</div>\r\n                            <div :style=\"getAchievementRateStyle(row.yearAchievementRate)\">:{{ row.yearAchievementRate }}</div>\r\n                            <div :style=\"getComparisonStyle(row.yearComparison)\">: {{ row.yearComparison }}</div>\r\n                        </div>\r\n                        <div v-else>\r\n                            <el-input v-model=\"row.yearTarget\" size=\"large\" placeholder=\"\" @change=\"calculateAchievementRateYearly(row)\" />\r\n                        </div>\r\n                    </div>\r\n                    <!-- () -->\r\n                    <div v-else>\r\n                        <div>: {{ formatNumberWithCommas(row.yearActual) }}</div>\r\n                        <div>(): {{ formatNumberWithCommas(row.yearLastYearActual) }}</div>\r\n                        <div :style=\"getComparisonStyle(row.yearComparison)\">: {{ row.yearComparison }}</div>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport CRMService from '@/service/CRMService.js';\r\nimport { ElMessage } from 'element-plus';\r\nimport '@/css/form/Sales/personalGoals.css'\r\nimport { useUserStore } from '@/stores/user';\r\n\r\n\r\nconst userStore = useUserStore();\r\nconst selectedView = ref('monthly'); // \r\nconst selectedDataType = ref('sales'); // \r\nconst editingRowId = ref(null);\r\nconst tableData = ref([]);\r\nconst quarterlyData = ref([]);\r\nconst yearlyData = ref([]);\r\nconst selectedYear = ref(new Date());\r\nconst showAllBusinessAreaOption = ref(true);\r\n\r\n// \r\nconst selectedBusinessArea = ref('');\r\nconst businessAreaOptions = ref([]);\r\nconst allTableData = ref([]); // \r\nconst allQuarterlyData = ref([]);\r\nconst allYearlyData = ref([]);\r\nconst salesRepPersonList = ref([]); // \r\n\r\n// \r\nconst regionTableData = ref([]);\r\nconst regionQuarterlyData = ref([]);\r\nconst regionYearlyData = ref([]);\r\n\r\n// \r\nconst formatNumberWithCommas = (value) => {\r\n    if (value === null || value === undefined || value === '') {\r\n        return '';\r\n    }\r\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\n// \r\nconst calculateAchievementRate = (row, month) => {\r\n    const target = parseFloat(row[`month${month}Target`]);\r\n    const actual = parseFloat(row[`month${month}Actual`]);\r\n\r\n    if (!isNaN(target) && !isNaN(actual)) {\r\n        const rate = target !== 0 ? (actual / target) * 100 : 0;\r\n        row[`month${month}AchievementRate`] = Math.floor(rate * 100) / 100 + '%';\r\n    } else {\r\n        row[`month${month}AchievementRate`] = '0.00%';\r\n    }\r\n};\r\n\r\n// \r\nconst getAchievementRateStyle = (rate) => {\r\n    if (rate && typeof rate === 'string') {\r\n        const numericRate = parseFloat(rate.replace('%', ''));\r\n        if (!isNaN(numericRate) && numericRate < 100.00) {\r\n            return { backgroundColor: \"#FFD2D2\" };\r\n        }\r\n    }\r\n    return {};\r\n};\r\n\r\n// \r\nconst getComparisonStyle = (comparison) => {\r\n    if (comparison && typeof comparison === 'string') {\r\n        const numericComparison = parseFloat(comparison.replace('%', ''));\r\n        if (!isNaN(numericComparison)) {\r\n            if (numericComparison > 0) {\r\n                return { color: \"#67C23A\", fontWeight: \"bold\" }; // \r\n            } else if (numericComparison < 0) {\r\n                return { color: \"#F56C6C\", fontWeight: \"bold\" }; // \r\n            }\r\n        }\r\n    }\r\n    return {};\r\n};\r\n\r\n//  (-())/()\r\nconst calculateComparison = (current, lastYear) => {\r\n    const currentValue = parseFloat(current) || 0;\r\n    const lastYearValue = parseFloat(lastYear) || 0;\r\n    \r\n    if (lastYearValue === 0) {\r\n        return currentValue > 0 ? \"+%\" : \"0.00%\";\r\n    }\r\n    \r\n    const comparison = ((currentValue - lastYearValue) / lastYearValue) * 100;\r\n    const sign = comparison >= 0 ? \"+\" : \"\";\r\n    return sign + comparison.toFixed(2) + \"%\";\r\n};\r\n\r\n// \r\nconst calculateAchievementRateYearly = (row) => {\r\n    const target = parseFloat(row.yearTarget);\r\n    const actual = parseFloat(row.yearActual);\r\n\r\n    if (!isNaN(target) && !isNaN(actual)) {\r\n        const rate = target !== 0 ? (actual / target) * 100 : 0;\r\n        row.yearAchievementRate = Math.floor(rate * 100) / 100 + '%';\r\n    } else {\r\n        row.yearAchievementRate = '0.00%';\r\n    }\r\n};\r\n\r\nconst fetchPerformanceReport = async (year) => {\r\n    if(year!= null){\r\n        try {\r\n            // \r\n            const res = await CRMService.getPerformanceReportByYear(year);\r\n            console.log(':', res.data);\r\n            const personalGoals = res.data.personalGoal || [];\r\n            const personalPerformances = res.data.personalPerformances || {};\r\n            \r\n            // \r\n            const lastYear = year - 1;\r\n            const lastYearRes = await CRMService.getPerformanceReportByYear(lastYear);\r\n            console.log(':', lastYearRes.data);\r\n            const lastYearPerformances = lastYearRes.data.personalPerformances || {};\r\n            \r\n            // \r\n            salesRepPersonList.value = res.data.salesRepPersonList || [];\r\n            //  sortId \r\n            salesRepPersonList.value.sort((a, b) => (a.sortId || 0) - (b.sortId || 0));\r\n            \r\n            const uniqueBusinessAreas = [...new Set(salesRepPersonList.value.map(person => person.salesRepBusinessAreaName))];\r\n            businessAreaOptions.value = uniqueBusinessAreas;\r\n            \r\n            // \"\"\r\n            if (!selectedBusinessArea.value || selectedBusinessArea.value === '') {\r\n                selectedBusinessArea.value = '';\r\n            }\r\n\r\n            const processedData = personalGoals.map(goal => {\r\n            // 1. \r\n            const row = {\r\n                id: goal.id,\r\n                salesRepID: goal.salesRepID,\r\n                salesRepName: goal.salesRepName,\r\n            };\r\n\r\n            // 2.  service  performance \r\n            //     personalPerformances  key \r\n            const key = goal.salesRepName.length > 2\r\n                ? goal.salesRepName.slice(-2)\r\n                : goal.salesRepName;\r\n            const perfEntry = personalPerformances[key] || {};\r\n            const monthlyAmounts = perfEntry.monthlyAmount || {};\r\n            \r\n            //  performance \r\n            const lastYearPerfEntry = lastYearPerformances[key] || {};\r\n            const lastYearMonthlyAmounts = lastYearPerfEntry.monthlyAmount || {};\r\n\r\n            // 3. (Target)(Actual)(LastYearActual)(Comparison)\r\n            const monthKeys = [\r\n                'january','february','march','april','may','june',\r\n                'july','august','september','october','november','december'\r\n            ];\r\n            monthKeys.forEach((monthKey, idx) => {\r\n                const m = idx + 1;\r\n                row[`month${m}Target`] = goal[monthKey] ?? 0;\r\n                row[`month${m}Actual`] = monthlyAmounts[monthKey] ?? 0;\r\n                row[`month${m}LastYearActual`] = lastYearMonthlyAmounts[monthKey] ?? 0;\r\n                row[`month${m}Comparison`] = calculateComparison(\r\n                    row[`month${m}Actual`], \r\n                    row[`month${m}LastYearActual`]\r\n                );\r\n                calculateAchievementRate(row, m);\r\n            });\r\n\r\n            return row;\r\n            });\r\n\r\n            //  salesRepPersonList  sortId  processedData\r\n            const sortedProcessedData = processedData.sort((a, b) => {\r\n                const personA = salesRepPersonList.value.find(p => p.salesRepID === a.salesRepID);\r\n                const personB = salesRepPersonList.value.find(p => p.salesRepID === b.salesRepID);\r\n                return (personA?.sortId || 0) - (personB?.sortId || 0);\r\n            });\r\n\r\n            // \r\n            allTableData.value = sortedProcessedData;\r\n\r\n            // \r\n            const calculateSummaryData = (data) => {\r\n                return data.map(row => {\r\n                    const newRow = {\r\n                        salesRepID: row.salesRepID,\r\n                        salesRepName: row.salesRepName,\r\n                        id: row.id,\r\n                    };\r\n\r\n                    // \r\n                    for (let q = 1; q <= 4; q++) {\r\n                        let quarterTarget = 0;\r\n                        let quarterActual = 0;\r\n                        let quarterLastYearActual = 0;\r\n                        for (let m = (q - 1) * 3 + 1; m <= q * 3; m++) {\r\n                            quarterTarget += parseFloat(row[`month${m}Target`] || 0);\r\n                            quarterActual += parseFloat(row[`month${m}Actual`] || 0);\r\n                            quarterLastYearActual += parseFloat(row[`month${m}LastYearActual`] || 0);\r\n                        }\r\n                        newRow[`quarter${q}Target`] = quarterTarget;\r\n                        newRow[`quarter${q}Actual`] = quarterActual;\r\n                        newRow[`quarter${q}LastYearActual`] = quarterLastYearActual;\r\n                        newRow[`quarter${q}Comparison`] = calculateComparison(quarterActual, quarterLastYearActual);\r\n                        const quarterRate = quarterTarget !== 0 ? (quarterActual / quarterTarget) * 100 : 0;\r\n                        newRow[`quarter${q}AchievementRate`] = Math.floor(quarterRate * 100) / 100 + '%';\r\n                    }\r\n\r\n                    // \r\n                    let yearTarget = 0;\r\n                    let yearActual = 0;\r\n                    let yearLastYearActual = 0;\r\n                    for (let m = 1; m <= 12; m++) {\r\n                        yearTarget += parseFloat(row[`month${m}Target`] || 0);\r\n                        yearActual += parseFloat(row[`month${m}Actual`] || 0);\r\n                        yearLastYearActual += parseFloat(row[`month${m}LastYearActual`] || 0);\r\n                    }\r\n                    newRow.yearTarget = yearTarget;\r\n                    newRow.yearActual = yearActual;\r\n                    newRow.yearLastYearActual = yearLastYearActual;\r\n                    newRow.yearComparison = calculateComparison(yearActual, yearLastYearActual);\r\n                    const yearRate = yearTarget !== 0 ? (yearActual / yearTarget) * 100 : 0;\r\n                    newRow.yearAchievementRate = Math.floor(yearRate * 100) / 100 + '%';\r\n\r\n                    return newRow;\r\n                });\r\n            };\r\n\r\n            // \r\n            allQuarterlyData.value = calculateSummaryData(sortedProcessedData);\r\n            allYearlyData.value = calculateSummaryData(sortedProcessedData);\r\n\r\n            // \r\n            calculateRegionData(sortedProcessedData);\r\n\r\n            // \r\n            applyDataFilter();\r\n\r\n        }\r\n        catch (err) {\r\n            console.error('', err);\r\n            ElMessage.error('');\r\n        }\r\n        }\r\n\r\n};\r\n\r\n// \r\nconst calculateRegionData = (processedData) => {\r\n    // \r\n    const regionGroups = {};\r\n    \r\n    processedData.forEach(row => {\r\n        const person = salesRepPersonList.value.find(p => p.salesRepID === row.salesRepID);\r\n        const regionName = person?.salesRepBusinessAreaName || '';\r\n        \r\n        if (!regionGroups[regionName]) {\r\n            regionGroups[regionName] = [];\r\n        }\r\n        regionGroups[regionName].push(row);\r\n    });\r\n\r\n    // \r\n    const regionMonthlyData = Object.keys(regionGroups).map(regionName => {\r\n        const regionRow = {\r\n            regionName: regionName,\r\n            salesRepName: regionName // \r\n        };\r\n\r\n        // \r\n        for (let month = 1; month <= 12; month++) {\r\n            let monthlyTotal = 0;\r\n            let monthlyLastYearTotal = 0;\r\n            regionGroups[regionName].forEach(salesRep => {\r\n                monthlyTotal += parseFloat(salesRep[`month${month}Actual`] || 0);\r\n                monthlyLastYearTotal += parseFloat(salesRep[`month${month}LastYearActual`] || 0);\r\n            });\r\n            regionRow[`month${month}Actual`] = monthlyTotal;\r\n            regionRow[`month${month}LastYearActual`] = monthlyLastYearTotal;\r\n            regionRow[`month${month}Comparison`] = calculateComparison(monthlyTotal, monthlyLastYearTotal);\r\n        }\r\n\r\n        return regionRow;\r\n    });\r\n\r\n    // \r\n    const calculateRegionSummaryData = (data) => {\r\n        return data.map(row => {\r\n            const newRow = {\r\n                regionName: row.regionName,\r\n                salesRepName: row.salesRepName\r\n            };\r\n\r\n            // \r\n            for (let q = 1; q <= 4; q++) {\r\n                let quarterActual = 0;\r\n                let quarterLastYearActual = 0;\r\n                for (let m = (q - 1) * 3 + 1; m <= q * 3; m++) {\r\n                    quarterActual += parseFloat(row[`month${m}Actual`] || 0);\r\n                    quarterLastYearActual += parseFloat(row[`month${m}LastYearActual`] || 0);\r\n                }\r\n                newRow[`quarter${q}Actual`] = quarterActual;\r\n                newRow[`quarter${q}LastYearActual`] = quarterLastYearActual;\r\n                newRow[`quarter${q}Comparison`] = calculateComparison(quarterActual, quarterLastYearActual);\r\n            }\r\n\r\n            // \r\n            let yearActual = 0;\r\n            let yearLastYearActual = 0;\r\n            for (let m = 1; m <= 12; m++) {\r\n                yearActual += parseFloat(row[`month${m}Actual`] || 0);\r\n                yearLastYearActual += parseFloat(row[`month${m}LastYearActual`] || 0);\r\n            }\r\n            newRow.yearActual = yearActual;\r\n            newRow.yearLastYearActual = yearLastYearActual;\r\n            newRow.yearComparison = calculateComparison(yearActual, yearLastYearActual);\r\n\r\n            return newRow;\r\n        });\r\n    };\r\n\r\n    regionTableData.value = regionMonthlyData;\r\n    regionQuarterlyData.value = calculateRegionSummaryData(regionMonthlyData);\r\n    regionYearlyData.value = calculateRegionSummaryData(regionMonthlyData);\r\n};\r\n\r\nconst editRow = (row) => {\r\n    editingRowId.value = row.id;\r\n};\r\n\r\nconst doneEdit = async (row) => {\r\n  try {\r\n    console.log(\"doneEdit: \", row);\r\n\r\n    if (selectedView.value === 'monthly') {\r\n        // 1. \r\n        const monthNames = [\r\n            'January','February','March','April','May','June',\r\n            'July','August','September','October','November','December'\r\n        ];\r\n\r\n        const updateData = {\r\n            // URL  year & empID Body  Model \r\n            Id:           row.id,                     // optional Implementation\r\n            SalesRepID:   row.salesRepID,            // exact match\r\n            SalesRepName: row.salesRepName,          // < \r\n            year:         selectedYear.value.getFullYear().toString(),\r\n            //  January~December\r\n            ...monthNames.reduce((acc, month, idx) => {\r\n                acc[month] = row[`month${idx+1}Target`];\r\n                return acc;\r\n            }, {})\r\n        };\r\n\r\n        console.log(' payload (monthly):', updateData);\r\n\r\n        await CRMService.updatePerformanceReport(\r\n            selectedYear.value.getFullYear(),\r\n            row.salesRepID,\r\n            updateData\r\n        );\r\n    } else if (selectedView.value === 'yearly') {\r\n\r\n\r\n        console.log(' row (yearly):', parseInt(row.yearTarget));\r\n\r\n        await CRMService.updatePerformanceReportAnnual(\r\n            selectedYear.value.getFullYear(),\r\n            row.salesRepID,\r\n            parseInt(row.yearTarget)\r\n        );\r\n    }\r\n\r\n    ElMessage.success('');\r\n    editingRowId.value = null;\r\n    await fetchPerformanceReport(selectedYear.value.getFullYear());\r\n\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst closeEdit = () => {\r\n    editingRowId.value = null;\r\n};\r\n\r\n// \r\nconst handleBusinessAreaChange = (value) => {\r\n    console.log(':', value);\r\n    selectedBusinessArea.value = value;\r\n    console.log(':', selectedBusinessArea.value);\r\n    applyDataFilter();\r\n};\r\n\r\n// \r\nconst handleDataTypeChange = () => {\r\n    applyDataFilter();\r\n};\r\n\r\nconst applyDataFilter = () => {\r\n    if (selectedDataType.value === 'region') {\r\n        // \r\n        tableData.value = regionTableData.value;\r\n        quarterlyData.value = regionQuarterlyData.value;\r\n        yearlyData.value = regionYearlyData.value;\r\n        console.log(':', tableData.value.length);\r\n        return;\r\n    }\r\n\r\n    // \r\n    console.log(':', selectedBusinessArea.value);\r\n    console.log(':', businessAreaOptions.value);\r\n    \r\n    // \"\"\r\n    if (selectedBusinessArea.value === '') {\r\n        tableData.value = allTableData.value;\r\n        quarterlyData.value = allQuarterlyData.value;\r\n        yearlyData.value = allYearlyData.value;\r\n        console.log(':', tableData.value.length);\r\n        return;\r\n    }\r\n    \r\n    // ID\r\n    const filteredSalesRepIDs = salesRepPersonList.value\r\n        .filter(person => person.salesRepBusinessAreaName === selectedBusinessArea.value)\r\n        .map(person => person.salesRepID);\r\n\r\n    console.log('ID:', filteredSalesRepIDs);\r\n\r\n    // \r\n    const filteredData = allTableData.value.filter(row => \r\n        filteredSalesRepIDs.includes(row.salesRepID)\r\n    );\r\n    \r\n    const filteredQuarterlyData = allQuarterlyData.value.filter(row => \r\n        filteredSalesRepIDs.includes(row.salesRepID)\r\n    );\r\n    \r\n    const filteredYearlyData = allYearlyData.value.filter(row => \r\n        filteredSalesRepIDs.includes(row.salesRepID)\r\n    );\r\n    \r\n    console.log(':', filteredData.length);\r\n\r\n    // \r\n    tableData.value = filteredData;\r\n    quarterlyData.value = filteredQuarterlyData;\r\n    yearlyData.value = filteredYearlyData;\r\n    \r\n    console.log(':', tableData.value.length);\r\n};\r\n\r\nconst applyUserPermissions = () => {\r\n    const userId = userStore.userId;\r\n    const userAreaMapping = {\r\n        'TW0301': '',\r\n        'TW0261': '',\r\n        'TW0282': '',\r\n        'TW0316': '',\r\n        'TW0300': '',\r\n        'OP0001': '',\r\n        'TW0073': '',\r\n        'TW0035': '',\r\n    };\r\n\r\n    const allowedArea = userAreaMapping[userId];\r\n\r\n    if (allowedArea) {\r\n        showAllBusinessAreaOption.value = false;\r\n        const areaExists = businessAreaOptions.value.includes(allowedArea);\r\n        if (areaExists) {\r\n            businessAreaOptions.value = [allowedArea];\r\n            selectedBusinessArea.value = allowedArea;\r\n        } else {\r\n            businessAreaOptions.value = [];\r\n            selectedBusinessArea.value = ''; \r\n        }\r\n        applyDataFilter();\r\n    } else {\r\n        showAllBusinessAreaOption.value = true;\r\n    }\r\n};\r\n\r\n//  selectedYear \r\nwatch(selectedYear, async (newYear) => {\r\n    if (newYear) {\r\n        await fetchPerformanceReport(newYear.getFullYear());\r\n        applyUserPermissions();\r\n    }\r\n});\r\n\r\nonMounted(async () => {\r\n    await fetchPerformanceReport(selectedYear.value.getFullYear());\r\n    applyUserPermissions();\r\n});\r\n</script>\r\n<style scoped>\r\n/*  el-table  */\r\n.el-table ::v-deep .el-table__cell {\r\n    font-size: 1rem;\r\n}\r\n</style>","import script from \"./PerformanceReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PerformanceReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PerformanceReport.vue?vue&type=style&index=0&id=93eea2bc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-93eea2bc\"]])\n\nexport default __exports__","<template>\r\n    <div style=\"margin-top:5rem;text-align: center;\" >\r\n\r\n        <div>\r\n            <el-date-picker\r\n                v-model=\"selectedYear\"\r\n                type=\"year\"\r\n                size=\"large\"\r\n                placeholder=\"\"\r\n                style=\"width: 8rem;margin-right: 2rem;margin-top:0.5rem;font-size: 2rem;width:11.5rem;\"\r\n                @change=\"fetchComBillAccounts\"\r\n            />\r\n            <el-radio-group v-model=\"selectedView\" size=\"large\" fill=\"#6cf\" style=\"margin-bottom: 20px;\" @change=\"handleViewChange\" :disabled=\"isRadioDisabled\">\r\n                <el-radio-button label=\"monthly\"></el-radio-button>\r\n                <el-radio-button label=\"quarterly\"></el-radio-button>\r\n                <el-radio-button label=\"yearly\"></el-radio-button>\r\n            </el-radio-group>\r\n            \r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"content-container\">\r\n        <el-table v-if=\"selectedView === 'monthly'\" class=\"form monthly\" :data=\"monthlyTableData\" style=\"width: 782px\">\r\n            <el-table-column prop=\"month\" label=\"\" width=\"100\" align=\"center\" />\r\n            <el-table-column :label=\"`${currentYear} `\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.target) }}</span>\r\n                    <el-input v-else v-model=\"row.target\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${currentYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.actual) }}</span>\r\n                    <el-input v-else v-model=\"row.actual\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${lastYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span>{{ formatNumberWithCommas(row.lastYearActual) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"120\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ row.achievementRate }}</span>\r\n                    <el-input v-else v-model=\"row.achievementRate\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span :class=\"getComparisonClass(row.yearOverYearComparison)\">{{ row.yearOverYearComparison }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"150\" align=\"center\" v-if=\"false\">\r\n                <template #default=\"{ row }\">\r\n                    <div v-if=\"editingRowId !== row.id\">\r\n                        <el-button type=\"primary\" size=\"small\" @click=\"editRow(row)\"></el-button>\r\n                    </div>\r\n                    <div v-else>\r\n                        <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n                        <el-button type=\"info\" size=\"small\" @click=\"closeEdit()\"></el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-table v-if=\"selectedView === 'quarterly'\" class=\"form quarterly\" :data=\"quarterlyTableData\" style=\"width: 782px\">\r\n            <el-table-column prop=\"quarter\" label=\"\" width=\"100\" align=\"center\" />\r\n            <el-table-column :label=\"`${currentYear} `\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.target) }}</span>\r\n                    <el-input v-else v-model=\"row.target\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${currentYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.actual) }}</span>\r\n                    <el-input v-else v-model=\"row.actual\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${lastYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span>{{ formatNumberWithCommas(row.lastYearActual) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"120\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ row.achievementRate }}</span>\r\n                    <el-input v-else v-model=\"row.achievementRate\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span :class=\"getComparisonClass(row.yearOverYearComparison)\">{{ row.yearOverYearComparison }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"150\" align=\"center\" v-if=\"false\">\r\n                <template #default=\"{ row }\">\r\n                    <div v-if=\"editingRowId !== row.id\">\r\n                        <el-button type=\"primary\" size=\"small\" @click=\"editRow(row)\"></el-button>\r\n                    </div>\r\n                    <div v-else>\r\n                        <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n                        <el-button type=\"info\" size=\"small\" @click=\"closeEdit()\"></el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-table v-if=\"selectedView === 'yearly'\" class=\"form yearly\" :data=\"yearlyTableData\" style=\"width: 782px\">\r\n            <el-table-column prop=\"year\" label=\"\" width=\"100\" align=\"center\" />\r\n            <el-table-column :label=\"`${currentYear} `\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.target) }}</span>\r\n                    <el-input v-else v-model=\"row.target\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${currentYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ formatNumberWithCommas(row.actual) }}</span>\r\n                    <el-input v-else v-model=\"row.actual\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"`${lastYear}`\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span>{{ formatNumberWithCommas(row.lastYearActual) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"120\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span v-if=\"editingRowId !== row.id\">{{ row.achievementRate }}</span>\r\n                    <el-input v-else v-model=\"row.achievementRate\" size=\"small\" />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"140\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                    <span :class=\"getComparisonClass(row.yearOverYearComparison)\">{{ row.yearOverYearComparison }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"\" width=\"150\" align=\"center\" v-if=\"false\">\r\n                <template #default=\"{ row }\">\r\n                    <div v-if=\"editingRowId !== row.id\">\r\n                        <el-button type=\"primary\" size=\"small\" @click=\"editRow(row)\"></el-button>\r\n                    </div>\r\n                    <div v-else>\r\n                        <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n                        <el-button type=\"info\" size=\"small\" @click=\"closeEdit()\"></el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <!--  -->\r\n        <div class=\"chart-section\">\r\n            <div class=\"chart-header\">\r\n                <el-text style=\"color:white;font-size:1.5rem\" tag=\"b\" class=\"mx-1\">{{ getChartTitle() }}</el-text>\r\n                <div class=\"chart-legend\">\r\n                    <div class=\"legend-item\">\r\n                        <span class=\"legend-color prev-year\"></span>\r\n                        <span>{{ lastYear }}</span>\r\n                    </div>\r\n                    <div class=\"legend-item\">\r\n                        <span class=\"legend-color curr-year\"></span>\r\n                        <span>{{ currentYear }}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"chart-container\">\r\n                <canvas ref=\"comparisonChartRef\" id=\"comparisonChart\"></canvas>\r\n            </div>\r\n        </div>\r\n\r\n        </div> <!--  content-container -->\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch, nextTick, onBeforeUnmount } from 'vue';\r\nimport CRMService from '@/service/CRMService.js';\r\nimport { ElMessage } from 'element-plus';\r\nimport '@/css/form/Sales/personalGoals.css'\r\nimport { useUserStore } from '@/stores/user';\r\nimport Chart from 'chart.js/auto';\r\n\r\nconst editingRowId = ref(null);\r\nconst userStore = useUserStore();\r\nconst selectedView = ref('monthly'); // \r\nconst selectedYear = ref(new Date());\r\n\r\n// \r\nconst isRadioDisabled = ref(false);\r\nconst debounceTimer = ref(null);\r\n\r\n// \r\nconst handleViewChange = (newValue) => {\r\n  // \r\n  if (debounceTimer.value) {\r\n    clearTimeout(debounceTimer.value);\r\n  }\r\n  \r\n  // \r\n  isRadioDisabled.value = true;\r\n  \r\n  // 1.5\r\n  debounceTimer.value = setTimeout(() => {\r\n    isRadioDisabled.value = false;\r\n    debounceTimer.value = null;\r\n  }, 1500);\r\n  \r\n  // \r\n  console.log('[PG] selectedView ->', newValue);\r\n  renderChart();\r\n};\r\n\r\n// \r\nconst currentYear = computed(() => selectedYear.value.getFullYear());\r\nconst lastYear = computed(() => currentYear.value - 1);\r\n\r\n// \r\nconst comparisonChart = ref(null);\r\nconst comparisonChartRef = ref(null);\r\n\r\n// ----  log ----\r\nconst sum = (arr) => arr.reduce((s, v) => s + (Number(v) || 0), 0);\r\nconst countDefined = (arr, key) => arr.filter(x => x && x[key] !== undefined && x[key] !== null).length;\r\nconst renderSeq = ref(0);\r\n\r\n// \r\nconst formatNumberWithCommas = (value) => {\r\n  if (value === null || value === undefined) return '';\r\n  return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\n//  ( X-1  X)\r\nconst calculateYearOverYearComparison = (lastYearActual, currentYearActual) => {\r\n  if (!lastYearActual || !currentYearActual || lastYearActual === 0) return '-';\r\n  const comparison = ((currentYearActual - lastYearActual) / lastYearActual * 100);\r\n  const sign = comparison >= 0 ? '+' : '';\r\n  return `${sign}${comparison.toFixed(1)}%`;\r\n};\r\n\r\n// \r\nconst getComparisonClass = (comparison) => {\r\n  if (!comparison || comparison === '-') return '';\r\n  if (comparison.startsWith('+')) return 'positive-growth';\r\n  if (comparison.startsWith('-')) return 'negative-growth';\r\n  return '';\r\n};\r\n\r\n// \r\nconst monthlyTableData = ref([]);\r\nconst quarterlyTableData = ref([]);\r\nconst yearlyTableData = ref([]);\r\n\r\n//  (12 )\r\nconst generateMonthlyTableData = () => {\r\n  const data = [];\r\n  for (let i = 1; i <= 12; i++) {\r\n    data.push({\r\n      id: i,\r\n      month: `${i}`,\r\n      target: null,\r\n      actual: null,\r\n      lastYearActual: null,\r\n      achievementRate: null,\r\n      yearOverYearComparison: '-',\r\n    });\r\n  }\r\n  monthlyTableData.value = data;\r\n};\r\n\r\n//  (4 )\r\nconst generateQuarterlyTableData = () => {\r\n  const data = [\r\n    { id: 1, quarter: 'Q1', target: null, actual: null, lastYearActual: null, achievementRate: null, yearOverYearComparison: '-' },\r\n    { id: 2, quarter: 'Q2', target: null, actual: null, lastYearActual: null, achievementRate: null, yearOverYearComparison: '-' },\r\n    { id: 3, quarter: 'Q3', target: null, actual: null, lastYearActual: null, achievementRate: null, yearOverYearComparison: '-' },\r\n    { id: 4, quarter: 'Q4', target: null, actual: null, lastYearActual: null, achievementRate: null, yearOverYearComparison: '-' }\r\n  ];\r\n  quarterlyTableData.value = data;\r\n};\r\n\r\n//  (1 )\r\nconst generateYearlyTableData = () => {\r\n  const currentYearValue = new Date().getFullYear();\r\n  const data = [\r\n    { id: 1, year: `${currentYearValue}`, target: null, actual: null, lastYearActual: null, achievementRate: null, yearOverYearComparison: '-' }\r\n  ];\r\n  yearlyTableData.value = data;\r\n};\r\n\r\nconst editRow = (row) => {\r\n  editingRowId.value = row.id;\r\n};\r\n\r\nconst doneEdit = async (row) => {\r\n  try {\r\n    if (row.target !== null && row.actual !== null) {\r\n      row.achievementRate = row.target !== 0 ? ((row.actual / row.target) * 100).toFixed(1) + '%' : '0.0%';\r\n    }\r\n    // console.log(':', row);\r\n    ElMessage.success('');\r\n    editingRowId.value = null;\r\n  } catch (error) {\r\n    // console.error('', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst closeEdit = () => {\r\n  editingRowId.value = null;\r\n};\r\n\r\nconst empName = ref('');\r\n\r\nconst fetchComBillAccounts = async () => {\r\n  empName.value = userStore.userName.slice(-2);\r\n  try {\r\n    // [LOG-1]  API \r\n    console.log('[PG] fetch start', { year: selectedYear.value.getFullYear(), empName: empName.value });\r\n\r\n    // \r\n    const res = await CRMService.getComBillAccounts(selectedYear.value.getFullYear(), empName.value);\r\n    // console.log(':', res.data);\r\n\r\n    //  lastYear*  res.data  lastYearRes.data\r\n    const lastYearRes = await CRMService.getComBillAccounts(lastYear.value, empName.value);\r\n    // console.log(':', lastYearRes.data);\r\n\r\n    const personalGoal = res.data.personalGoal;\r\n    const monthlyAmounts = res.data.personalPerformance?.monthlyAmount || {};\r\n    const quarterAmounts = res.data.personalPerformance?.quarterAmount || {};\r\n    const yearlyAmount = res.data.personalPerformance?.yearlyAmount || 0;\r\n\r\n    //  lastYearRes \r\n    const lastYearMonthlyAmounts = lastYearRes.data.personalPerformance?.monthlyAmount || {};\r\n    const lastYearQuarterAmounts = lastYearRes.data.personalPerformance?.quarterAmount || {};\r\n    const lastYearYearlyAmount = lastYearRes.data.personalPerformance?.yearlyAmount || 0;\r\n\r\n    // [LOG-2] \r\n    console.log('[PG] data existence', {\r\n      hasPersonalGoal: !!personalGoal,\r\n      hasMonthly: !!monthlyAmounts,\r\n      hasQuarter: !!quarterAmounts,\r\n      hasYearly: !!yearlyAmount,\r\n      hasLYMonthly: !!lastYearMonthlyAmounts,\r\n      hasLYQuarter: !!lastYearQuarterAmounts,\r\n      hasLYYearly: !!lastYearYearlyAmount\r\n    });\r\n\r\n    // \r\n    if (personalGoal && monthlyAmounts) {\r\n      const monthNames = ['january','february','march','april','may','june','july','august','september','october','november','december'];\r\n      monthlyTableData.value.forEach(item => {\r\n        const monthKey = monthNames[item.id - 1];\r\n        item.target = personalGoal[monthKey] ?? 0;\r\n        item.actual = monthlyAmounts[monthKey] ?? 0;\r\n        item.lastYearActual = lastYearMonthlyAmounts[monthKey] ?? 0;\r\n        item.achievementRate = item.target ? ((item.actual / item.target) * 100).toFixed(1) + '%' : '0.0%';\r\n        item.yearOverYearComparison = calculateYearOverYearComparison(item.lastYearActual, item.actual);\r\n      });\r\n    }\r\n\r\n    // \r\n    if (personalGoal && quarterAmounts) {\r\n      quarterlyTableData.value.forEach(item => {\r\n        let quarterTarget = 0;\r\n        for (let m = (item.id - 1) * 3 + 1; m <= item.id * 3; m++) {\r\n          const monthKey = new Date(2000, m - 1, 1).toLocaleString('en-US', { month: 'long' }).toLowerCase();\r\n          quarterTarget += personalGoal[monthKey] ?? 0;\r\n        }\r\n        const qKey = `q${item.id}`;\r\n        item.target = quarterTarget;\r\n        item.actual = quarterAmounts[qKey] ?? 0;\r\n        item.lastYearActual = lastYearQuarterAmounts[qKey] ?? 0;\r\n        item.achievementRate = item.target ? ((item.actual / item.target) * 100).toFixed(1) + '%' : '0.0%';\r\n        item.yearOverYearComparison = calculateYearOverYearComparison(item.lastYearActual, item.actual);\r\n      });\r\n    }\r\n\r\n    // \r\n    if (personalGoal && yearlyTableData.value.length > 0) {\r\n      const monthNames = ['january','february','march','april','may','june','july','august','september','october','november','december'];\r\n      let yearTarget = 0;\r\n      monthNames.forEach(mk => (yearTarget += personalGoal[mk] ?? 0));\r\n      yearlyTableData.value[0].target = yearTarget;\r\n      yearlyTableData.value[0].actual = yearlyAmount ?? 0;\r\n      yearlyTableData.value[0].lastYearActual = lastYearYearlyAmount ?? 0;\r\n      yearlyTableData.value[0].achievementRate = yearTarget ? ((yearlyTableData.value[0].actual / yearTarget) * 100).toFixed(1) + '%' : '0.0%';\r\n      yearlyTableData.value[0].yearOverYearComparison = calculateYearOverYearComparison(yearlyTableData.value[0].lastYearActual, yearlyTableData.value[0].actual);\r\n    }\r\n\r\n    // [LOG-3] \r\n    console.log('[PG] table fill check', {\r\n      monthly_len: monthlyTableData.value.length,\r\n      monthly_target_defined: countDefined(monthlyTableData.value, 'target'),\r\n      monthly_actual_defined: countDefined(monthlyTableData.value, 'actual'),\r\n      monthly_lastYearActual_defined: countDefined(monthlyTableData.value, 'lastYearActual'),\r\n      quarterly_len: quarterlyTableData.value.length,\r\n      yearly_len: yearlyTableData.value.length\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('', error);\r\n    ElMessage.error('');\r\n  } finally {\r\n    nextTick(() => {\r\n      console.log('[PG] fetch done -> renderChart()');\r\n      renderChart();\r\n    });\r\n  }\r\n};\r\n\r\n// \r\nconst getChartTitle = () => {\r\n  const viewTitles = {\r\n    'monthly': '',\r\n    'quarterly': '',\r\n    'yearly': ''\r\n  };\r\n  return viewTitles[selectedView.value] || '';\r\n};\r\n\r\n// \r\nconst destroyChart = () => {\r\n  if (comparisonChart.value) {\r\n    comparisonChart.value.destroy();\r\n    comparisonChart.value = null;\r\n  }\r\n};\r\n\r\n// \r\nconst renderChart = () => {\r\n  const seq = ++renderSeq.value;\r\n\r\n    \r\n  nextTick(()=>{\r\n        destroyChart(); \r\n        createComparisonChart(seq);\r\n    })\r\n\r\n\r\n};\r\n\r\n// \r\nconst createComparisonChart = (seq) => {\r\n  // [LOG-5] ref \r\n  console.log(`[PG] createChart#${seq} ref`, { hasRef: !!comparisonChartRef.value });\r\n\r\n  if (!comparisonChartRef.value) {\r\n    console.error('Chart canvas ref not found');\r\n    return;\r\n  }\r\n\r\n  // \r\n  let currentData = [];\r\n  if (selectedView.value === 'monthly') currentData = monthlyTableData.value;\r\n  else if (selectedView.value === 'quarterly') currentData = quarterlyTableData.value;\r\n  else if (selectedView.value === 'yearly') currentData = yearlyTableData.value;\r\n\r\n  if (!currentData.length) {\r\n    console.error('No data available for chart');\r\n    return;\r\n  }\r\n\r\n  nextTick(() => {\r\n    try {\r\n      const ctx = comparisonChartRef.value.getContext('2d');\r\n\r\n\r\n      //   lastYearTarget  lastYearTarget\r\n      //  lastYearActual target vs  vs \r\n      let labels = [];\r\n      let lastYearSeries = [];\r\n      let currentYearSeries = [];\r\n\r\n      if (selectedView.value === 'monthly') {\r\n        labels = currentData.map(i => i.month);\r\n        lastYearSeries = currentData.map(i => Number(i.lastYearActual ?? 0));\r\n        currentYearSeries = currentData.map(i => Number(i.actual ?? 0));\r\n      } else if (selectedView.value === 'quarterly') {\r\n        labels = currentData.map(i => i.quarter);\r\n        lastYearSeries = currentData.map(i => Number(i.lastYearActual ?? 0));\r\n        currentYearSeries = currentData.map(i => Number(i.actual ?? 0));\r\n      } else {\r\n        labels = currentData.map(i => i.year);\r\n        lastYearSeries = currentData.map(i => Number(i.lastYearActual ?? 0));\r\n        currentYearSeries = currentData.map(i => Number(i.actual ?? 0));\r\n      }\r\n\r\n      // [LOG-7]  0\r\n      console.log(`[PG] createChart#${seq} data summary`, {\r\n        labels: labels.length,\r\n        lastYearSum: sum(lastYearSeries),\r\n        currentYearSum: sum(currentYearSeries),\r\n        sample_lastYear: lastYearSeries.slice(0, 6),\r\n        sample_current: currentYearSeries.slice(0, 6)\r\n      });\r\n\r\n      const chartData = {\r\n        labels,\r\n        datasets: [\r\n          {\r\n            label: `${lastYear.value}`,\r\n            data: lastYearSeries,\r\n            backgroundColor: '#36A2EB',\r\n            borderColor: '#36A2EB',\r\n            borderWidth: 1\r\n          },\r\n          {\r\n            label: `${currentYear.value}`,\r\n            data: currentYearSeries,\r\n            backgroundColor: '#FF6384',\r\n            borderColor: '#FF6384',\r\n            borderWidth: 1\r\n          }\r\n        ]\r\n      };\r\n\r\n      comparisonChart.value = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: chartData,\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: true,   // \r\n              position: 'top'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true,\r\n              ticks: {\r\n                callback: (value) => formatNumberWithCommas(value)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      console.log(`[PG] chart created#${seq}`);\r\n    } catch (error) {\r\n      console.error('Error creating PersonalGoals chart:', error);\r\n    }\r\n  });\r\n};\r\n\r\n//  handleViewChange  \r\n\r\n//  render \r\nwatch([monthlyTableData, quarterlyTableData, yearlyTableData], (newData) => {\r\n  console.log('[PG] data changed (some array mutated)');\r\n  if (newData && newData.some(data => data && data.length > 0)) {\r\n    // renderChart();\r\n  }\r\n}, { deep: true, immediate: true });\r\n\r\nonMounted(async () => {\r\n            console.log('[PG] mounted, Chart.js version:', Chart.version);\r\n            generateMonthlyTableData();\r\n            generateQuarterlyTableData();\r\n            generateYearlyTableData();\r\n            await fetchComBillAccounts();\r\n\r\n        nextTick(() => {\r\n            console.log('[PG] initial timed render');\r\n            if (monthlyTableData.value && monthlyTableData.value.length > 0) {\r\n                renderChart();\r\n            } else {\r\n                console.log('[PG] No data available for initial render');\r\n            }\r\n    });\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n   destroyChart();\r\n   // \r\n   if (debounceTimer.value) {\r\n     clearTimeout(debounceTimer.value);\r\n     debounceTimer.value = null;\r\n   }\r\n});\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.positive-growth {\r\n    color: #67c23a;\r\n    font-weight: bold;\r\n}\r\n\r\n.negative-growth {\r\n    color: #f56c6c;\r\n    font-weight: bold;\r\n}\r\n\r\n.el-table {\r\n    margin: 0 auto;\r\n}\r\n\r\n.el-table th {\r\n    background-color: #f5f7fa;\r\n    font-weight: bold;\r\n}\r\n\r\n.el-table td {\r\n    text-align: center;\r\n}\r\n\r\n/*  */\r\n.content-container {\r\n    display: flex;\r\n    gap: 2rem;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    margin-top: 2rem;\r\n    margin-left: -10rem;\r\n    margin-right: 10rem;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n/*  */\r\n.chart-section {\r\n    margin-left:-15rem;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);\r\n    overflow: hidden;\r\n    width: 800px;\r\n    height: fit-content;\r\n}\r\n\r\n.chart-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20px 24px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.chart-legend {\r\n    display: flex;\r\n    gap: 16px;\r\n}\r\n\r\n.legend-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n    font-size: 14px;\r\n    color: white;\r\n}\r\n\r\n.legend-color {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 3px;\r\n}\r\n\r\n.legend-color.prev-year {\r\n    background: #36A2EB;\r\n}\r\n\r\n.legend-color.curr-year {\r\n    background: #FF6384;\r\n}\r\n\r\n.chart-container {\r\n  height: 420px !important;     /*  */\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.chart-container canvas {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n    opacity: 1 !important;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1750px) {\r\n    .content-container {\r\n        flex-direction: column;\r\n        align-items: center;\r\n        margin-left:10rem;\r\n    }\r\n    \r\n    .chart-section {\r\n        width: 800px;\r\n        max-width: 100%;\r\n        margin-left:0.5rem;\r\n    }\r\n}\r\n\r\n@media (max-width: 900px) {\r\n    .content-container {\r\n        gap: 1rem;\r\n        margin-top: 1rem;\r\n    }\r\n    \r\n    .chart-section {\r\n        width: 100%;\r\n        margin: 0 1rem;\r\n    }\r\n    \r\n    .chart-container {\r\n        height: 300px;\r\n        padding: 16px;\r\n    }\r\n    \r\n    .chart-header {\r\n        padding: 16px;\r\n        flex-direction: column;\r\n        gap: 12px;\r\n        align-items: flex-start;\r\n    }\r\n    \r\n    .chart-legend {\r\n        width: 100%;\r\n        justify-content: space-around;\r\n    }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n    .chart-container {\r\n        height: 250px;\r\n        padding: 12px;\r\n    }\r\n    \r\n    .chart-header {\r\n        padding: 12px;\r\n    }\r\n    \r\n    .legend-item {\r\n        font-size: 12px;\r\n    }\r\n}\r\n</style>","import script from \"./PersonalGoals.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalGoals.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalGoals.vue?vue&type=style&index=0&id=18525628&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-18525628\"]])\n\nexport default __exports__","<template>\r\n  <!--  -->\r\n  <div class=\"dashboard-section\">\r\n    <!--  -->\r\n    <div class=\"table-section\">\r\n      <div class=\"table-header\" :class=\"{ 'mobile-collapsible': isMobile }\" @click=\"isMobile && toggleCollapse('table')\">\r\n        <div class=\"header-content\">\r\n          <el-text \r\n          style=\"color:white;\r\n          font-size:1.5rem\"  \r\n          tag=\"b\"\r\n          class=\"mx-1 year\" \r\n          :class=\"{ 'mobile-large-title': isMobile }\"></el-text>\r\n          \r\n          <div class=\"year-selector-compact\">\r\n            <el-text \r\n                style=\"color:white;font-size:1.5rem\"  \r\n                tag=\"b\" \r\n                class=\"mx-1\"\r\n                :class=\"{ 'mobile-large-title': isMobile }\"\r\n              >\r\n              \r\n            </el-text>\r\n            <el-select \r\n              id=\"yearSelect\"\r\n              :model-value=\"selectedYear\" \r\n              @update:model-value=\"(value) => emit('yearChange', value)\"\r\n              placeholder=\"\"\r\n              :size=\"isMobile ? 'small':'large'\"\r\n              style=\"width:8rem;\"\r\n              \r\n              @click.stop\r\n            >\r\n              <el-option\r\n                v-for=\"year in availableYears\"\r\n                :key=\"year\"\r\n                :label=\"year\"\r\n                :value=\"year\"\r\n              />\r\n            </el-select>\r\n          </div>\r\n          \r\n          <el-icon v-if=\"isMobile\" class=\"collapse-icon\" :class=\"{ 'rotated': isTableExpanded }\">\r\n            <ArrowDown />\r\n          </el-icon>\r\n        </div>\r\n      </div>\r\n      <div class=\"table-wrapper\" :class=\"{ 'mobile-hidden': isMobile && !isTableExpanded, 'desktop-centered': !isMobile }\">\r\n        <el-table \r\n          :data=\"performanceData\" \r\n          border \r\n          stripe\r\n          class=\"performance-table\"\r\n          v-loading=\"loading\"\r\n          style=\"font-size:1.3rem\"\r\n        >\r\n          <el-table-column \r\n            prop=\"monthName\" \r\n            label=\"\" \r\n            :width=\"!isMobile ? 80 : 40\"\r\n            align=\"center\"\r\n          />\r\n          <el-table-column \r\n            prop=\"prevYear\" \r\n            :label=\"`${selectedYear - 1}`\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 90\"\r\n          >\r\n            <template #default=\"scope\">\r\n              {{ formatCurrency(scope.row.prevYear) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column \r\n            prop=\"currYear\" \r\n            :label=\"`${selectedYear}`\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 90\"\r\n          >\r\n            <template #default=\"scope\">\r\n              {{ formatCurrency(scope.row.currYear) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column \r\n            label=\"\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 85\"\r\n          >\r\n            <template #default=\"scope\">\r\n              <span :class=\"getGrowthRateClass(scope.row)\">\r\n                {{ getGrowthRateText(scope.row) }}\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      \r\n      <!--  -->\r\n      <div class=\"total-summary\">\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\">{{ (selectedYear - 1) }}</span>\r\n          <span class=\"total-value\"  style=\"font-size:1.5rem\">{{ formatCurrency(getTotalPrevYear()) }}</span>\r\n        </div>\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\">{{ selectedYear }}</span>\r\n          <span class=\"total-value\" style=\"font-size:1.5rem\">{{ formatCurrency(getTotalCurrYear()) }}</span>\r\n        </div>\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\"></span>\r\n          <span class=\"total-value\" :class=\"getTotalGrowthClass()\" style=\"font-size:1.5rem\">{{ getTotalGrowthRate() }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"chart-section\">\r\n      <div class=\"chart-header\" :class=\"{ 'mobile-collapsible': isMobile }\" @click=\"isMobile && toggleCollapse('chart')\">\r\n        <div class=\"header-content\">\r\n          <el-text style=\"color:white;font-size:1.5rem\"  tag=\"b\" class=\"mx-1 chart\"></el-text>\r\n          <el-icon v-if=\"isMobile\" class=\"collapse-icon\" :class=\"{ 'rotated': isChartExpanded }\">\r\n            <ArrowDown />\r\n          </el-icon>\r\n        </div>\r\n        <div class=\"chart-legend\" :class=\"{ 'mobile-hidden': isMobile && !isChartExpanded }\">\r\n          <div class=\"legend-item\">\r\n            <span class=\"legend-color prev-year\" style=\"width:1.5rem;height:1.5rem;\" ></span>\r\n            <span style=\"font-size:1.5rem;\">{{ selectedYear - 1 }}</span>\r\n          </div>\r\n          <div class=\"legend-item\">\r\n            <span class=\"legend-color curr-year\" style=\"width:1.5rem;height:1.5rem;\"></span>\r\n            <span style=\"font-size:1.5rem;\">{{ selectedYear }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"chart-container\" :class=\"{ 'mobile-hidden': isMobile && !isChartExpanded }\">\r\n        <canvas \r\n          ref=\"performanceChartRef\" \r\n          id=\"performanceChart\"\r\n        ></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, onMounted, onBeforeUnmount, nextTick, computed } from 'vue'\r\nimport Chart from 'chart.js/auto'\r\nimport { ArrowDown } from '@element-plus/icons-vue'\r\nimport { useWindowSize } from '@vueuse/core'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  selectedYear: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  availableYears: {\r\n    type: Array,\r\n    required: true\r\n  },\r\n  performanceData: {\r\n    type: Array,\r\n    required: true\r\n  },\r\n  loading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n\r\n// Emits\r\nconst emit = defineEmits(['yearChange'])\r\n\r\n// Reactive data\r\nconst performanceChart = ref(null)\r\nconst performanceChartRef = ref(null)\r\n\r\n// RWD \r\nconst { width } = useWindowSize()\r\nconst isMobile = computed(() => width.value <= 768)\r\nconst isTableExpanded = ref(false)\r\nconst isChartExpanded = ref(false)\r\n\r\n\r\n// \r\nconst toggleCollapse = (section) => {\r\n  if (section === 'table') {\r\n    isTableExpanded.value = !isTableExpanded.value\r\n  } else if (section === 'chart') {\r\n    isChartExpanded.value = !isChartExpanded.value\r\n    // \r\n    if (isChartExpanded.value) {\r\n      nextTick(() => {\r\n        renderChart()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// Methods\r\nconst destroyChart = () => {\r\n  if (performanceChart.value) {\r\n    performanceChart.value.destroy()\r\n    performanceChart.value = null\r\n  }\r\n}\r\n\r\nconst renderChart = () => {\r\n  console.log('AnnualPerformanceSection renderChart called')\r\n  console.log('performanceData:', props.performanceData)\r\n  \r\n  nextTick(() => {\r\n    destroyChart()\r\n    createPerformanceChart()\r\n\r\n  })\r\n}\r\n\r\nconst createPerformanceChart = () => {\r\n  console.log(' Annual Performance Chart')\r\n  console.log('performanceChartRef:', performanceChartRef.value)\r\n  \r\n \r\n\r\n  if (!performanceChartRef.value) {\r\n    console.error('Performance chart canvas ref not found')\r\n    return\r\n  }\r\n\r\n  if (!props.performanceData.length) {\r\n    console.error('No performance data available')\r\n    return\r\n  }\r\n  nextTick(() => {\r\n    try {\r\n      \r\n      const ctx = performanceChartRef.value.getContext('2d')\r\n      \r\n      const chartData = {\r\n        labels: props.performanceData.map(item => item.monthName),\r\n        datasets: [\r\n          {\r\n            label: `${props.selectedYear - 1}`,\r\n            data: props.performanceData.map(item => parseFloat(item.prevYear) || 0),\r\n            backgroundColor: '#36A2EB',\r\n            borderColor: '#36A2EB',\r\n            borderWidth: 1\r\n          },\r\n          {\r\n            label: `${props.selectedYear}`,\r\n            data: props.performanceData.map(item => parseFloat(item.currYear) || 0),\r\n            backgroundColor: '#FF6384',\r\n            borderColor: '#FF6384',\r\n            borderWidth: 1\r\n          }\r\n        ]\r\n      }\r\n      \r\n      console.log('Annual Chart data:', chartData)\r\n      \r\n      performanceChart.value = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: chartData,\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: true,\r\n              position: 'top'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        }\r\n      })\r\n      \r\n      console.log('Annual Performance chart created successfully:', performanceChart.value)\r\n    } catch (error) {\r\n      console.error('Error creating annual performance chart:', error)\r\n    }\r\n  })\r\n}\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined || value === 0) {\r\n    return '0'\r\n  }\r\n  return new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(value)\r\n}\r\n\r\nconst getGrowthRate = (row) => {\r\n  const prev = parseFloat(row.prevYear) || 0\r\n  const curr = parseFloat(row.currYear) || 0\r\n  \r\n  if (prev === 0) return curr > 0 ? 100 : 0\r\n  return ((curr - prev) / prev * 100)\r\n}\r\n\r\nconst getGrowthRateText = (row) => {\r\n  const growthRate = getGrowthRate(row)\r\n  if (growthRate === 0 && parseFloat(row.prevYear) === 0 && parseFloat(row.currYear) === 0) {\r\n    return '-'\r\n  }\r\n  return `${growthRate > 0 ? '+' : ''}${growthRate.toFixed(1)}%`\r\n}\r\n\r\nconst getGrowthRateClass = (row) => {\r\n  const growthRate = getGrowthRate(row)\r\n  if (growthRate > 0) return 'growth-positive'\r\n  if (growthRate < 0) return 'growth-negative'\r\n  return 'growth-neutral'\r\n}\r\n\r\nconst getTotalPrevYear = () => {\r\n  if (!props.performanceData.length) return 0\r\n  return props.performanceData.reduce((sum, item) => sum + (parseFloat(item.prevYear) || 0), 0)\r\n}\r\n\r\nconst getTotalCurrYear = () => {\r\n  if (!props.performanceData.length) return 0\r\n  return props.performanceData.reduce((sum, item) => sum + (parseFloat(item.currYear) || 0), 0)\r\n}\r\n\r\nconst getTotalGrowthRate = () => {\r\n  const totalPrev = getTotalPrevYear()\r\n  const totalCurr = getTotalCurrYear()\r\n  \r\n  if (totalPrev === 0) return totalCurr > 0 ? '+100.0%' : '0.0%'\r\n  \r\n  const totalGrowth = ((totalCurr - totalPrev) / totalPrev * 100)\r\n  return `${totalGrowth > 0 ? '+' : ''}${totalGrowth.toFixed(1)}%`\r\n}\r\n\r\nconst getTotalGrowthClass = () => {\r\n  const total = parseFloat(getTotalGrowthRate().replace(/[+%]/g, ''))\r\n  if (total > 0) return 'positive'\r\n  if (total < 0) return 'negative'\r\n  return 'neutral'\r\n}\r\n\r\n\r\nwatch(() => props.performanceData, (newData) => {\r\n  console.log('AnnualPerformanceSection performanceData changed:', newData)\r\n  if (newData && newData.length > 0) {\r\n    renderChart()\r\n  }\r\n}, { deep: true, immediate: true })\r\n\r\n\r\nwatch(() => props.selectedYear, () => {\r\n  console.log('AnnualPerformanceSection selectedYear changed')\r\n  // renderChart()\r\n})\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n  console.log('AnnualPerformanceSection mounted')\r\n  console.log('Initial props.performanceData:', props.performanceData)\r\n  \r\n  //  DOM  - \r\n  nextTick(() => {\r\n  \r\n      console.log('=== AnnualPerformanceSection  ===')\r\n      console.log('performanceData at render time:', props.performanceData)\r\n      if (props.performanceData && props.performanceData.length > 0) {\r\n        renderChart()\r\n      } else {\r\n        console.log('No data available for initial render')\r\n      }\r\n  // \r\n  })\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  destroyChart()\r\n})\r\n\r\n// Expose methods for parent component\r\ndefineExpose({\r\n  renderChart\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  height: 100%;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.dashboard-section .chart-section {\r\n  margin-top: 3rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.table-section, .chart-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);\r\n  overflow: hidden;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.table-header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px 24px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.table-header .year {\r\n  margin: 0;\r\n  padding: 0;\r\n  background: none;\r\n  border-bottom: none;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.year-label {\r\n  white-space: nowrap;\r\n}\r\n\r\n.year-selector-compact {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.mobile-large-title {\r\n  font-size: 1.8rem !important;\r\n  font-weight: 700 !important;\r\n}\r\n\r\n\r\n.chart-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px 24px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.chart-header .chart {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.chart-legend {\r\n  display: flex;\r\n  justify-content: end;\r\n  width:100%;\r\n  gap: 16px;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n}\r\n\r\n.legend-color {\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 3px;\r\n}\r\n\r\n.legend-color.prev-year {\r\n  background: rgba(54, 162, 235, 0.7);\r\n}\r\n\r\n.legend-color.curr-year {\r\n  background: rgba(255, 99, 132, 0.7);\r\n}\r\n\r\n.table-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 24px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.performance-table {\r\n  width: auto !important;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.chart-container {\r\n  padding: 24px;\r\n  height: 450px;\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-container canvas {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  max-width: 100% !important;\r\n}\r\n\r\n.total-summary {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 20px 24px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);\r\n  margin-top: 16px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.total-item {\r\n  text-align: center;\r\n}\r\n\r\n.total-label {\r\n  display: block;\r\n  font-size: 1.3rem;\r\n  color: #6c757d;\r\n  margin-bottom: 6px;\r\n  font-weight: 500;\r\n}\r\n\r\n.total-value {\r\n  display: block;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  border: 2px solid #e9ecef;\r\n}\r\n\r\n.total-value.positive {\r\n  color: #67c23a;\r\n  border-color: #67c23a;\r\n  background: rgba(103, 194, 58, 0.1);\r\n}\r\n\r\n.total-value.negative {\r\n  color: #f56c6c;\r\n  border-color: #f56c6c;\r\n  background: rgba(245, 108, 108, 0.1);\r\n}\r\n\r\n.total-value.neutral {\r\n  color: #909399;\r\n  border-color: #909399;\r\n  background: rgba(144, 147, 153, 0.1);\r\n}\r\n\r\n.growth-positive {\r\n  color: #67c23a;\r\n  font-weight: bold;\r\n  background: rgba(103, 194, 58, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.growth-negative {\r\n  color: #f56c6c;\r\n  font-weight: bold;\r\n  background: rgba(245, 108, 108, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.growth-neutral {\r\n  color: #909399;\r\n  background: rgba(144, 147, 153, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n:deep(.el-table) {\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n\r\n:deep(.el-table th) {\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  color: #495057;\r\n  font-weight: 600;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding: 16px 12px;\r\n}\r\n\r\n:deep(.el-table td) {\r\n  padding: 16px 12px;\r\n  border-bottom: 1px solid #f1f3f4;\r\n}\r\n\r\n:deep(.el-table tbody tr:hover > td) {\r\n  background-color: #f8f9ff !important;\r\n}\r\n\r\n:deep(.el-table--striped .el-table__body tr.el-table__row--striped td) {\r\n  background: #fafbfc;\r\n}\r\n\r\n:deep(.el-select) {\r\n  width: 120px;\r\n}\r\n\r\n/* RWD  */\r\n.header-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n}\r\n\r\n.mobile-collapsible {\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.mobile-collapsible:hover {\r\n  background: linear-gradient(135deg, #5a6fd8 0%, #6b5b95 100%);\r\n}\r\n\r\n.collapse-icon {\r\n  font-size: 20px;\r\n  transition: transform 0.3s ease;\r\n  color: white;\r\n}\r\n\r\n.collapse-icon.rotated {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.mobile-hidden {\r\n  display: none !important;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .dashboard-section {\r\n    gap: 16px;\r\n    width: 100%;\r\n  }\r\n  \r\n  .table-section, .chart-section {\r\n    width: 100%;\r\n    max-width: 100%;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .table-header {\r\n    padding: 16px;\r\n  }\r\n\r\n  .chart-header {\r\n    padding: 16px;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n  \r\n  .dashboard-section .chart-section {\r\n    margin-top: 0;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .header-content {\r\n    width: 100%;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 8px;\r\n    flex-wrap: nowrap;\r\n  }\r\n  \r\n  .mobile-large-title {\r\n    font-size: 1.4rem !important;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .year-selector-compact {\r\n    gap: 4px;\r\n    flex-shrink: 1;\r\n    min-width: 0;\r\n  }\r\n  \r\n  .year-label {\r\n    white-space: nowrap;\r\n    font-size: 1.2rem !important;\r\n  }\r\n  \r\n  .collapse-icon {\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .chart-legend {\r\n    width: 100%;\r\n    justify-content: space-around;\r\n    margin-top: 8px;\r\n  }\r\n\r\n  \r\n  .table-wrapper {\r\n    padding: 16px;\r\n    overflow-x: auto;\r\n    width: 100%;\r\n  }\r\n  \r\n  .performance-table {\r\n    min-width: 100%;\r\n    width: 100% !important;\r\n    font-size: 14px !important;\r\n  }\r\n  \r\n  .chart-container {\r\n    height: 300px;\r\n    padding: 16px;\r\n    width: 100%;\r\n  }\r\n  \r\n  .chart-container canvas {\r\n    height: 250px !important;\r\n    width: 100% !important;\r\n  }\r\n  \r\n  .total-summary {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n    padding: 16px;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .total-item {\r\n    padding: 8px 12px;\r\n    background: #f8f9fa;\r\n    border-radius: 8px;\r\n    flex: 1;\r\n    min-width: 0;\r\n    text-align: center;\r\n  }\r\n  \r\n  .total-label {\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n  }\r\n  \r\n  .total-value {\r\n    font-size: 14px !important;\r\n    padding: 4px 8px;\r\n  }\r\n  \r\n  /* Element Plus  */\r\n  :deep(.el-select) {\r\n    width: 100%;\r\n    max-width: 200px;\r\n  }\r\n  \r\n  .year-selector-compact :deep(.el-select) {\r\n    width: 100%;\r\n    max-width: 120px;\r\n  }\r\n  \r\n  /*  */\r\n  :deep(#yearSelect) {\r\n    width: 10rem !important;\r\n  }\r\n  \r\n  :deep(.el-table) {\r\n    width: 100% !important;\r\n  }\r\n  \r\n  :deep(.el-table th) {\r\n    padding: 12px 8px;\r\n    font-size: 14px;\r\n    width: auto !important;\r\n  }\r\n  \r\n  :deep(.el-table td) {\r\n    padding: 12px 8px;\r\n    font-size: 14px;\r\n    width: auto !important;\r\n  }\r\n  \r\n  :deep(.el-table-column) {\r\n    width: auto !important;\r\n  }\r\n  \r\n  /*  */\r\n  .table-header .year,\r\n  .chart-header .chart {\r\n    font-size: 16px !important;\r\n  }\r\n  \r\n  .year-label,\r\n  .chart-legend span {\r\n    font-size: 14px !important;\r\n  }\r\n\r\n  .yearSelect{\r\n    width:10rem;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 480px) {\r\n  .table-header, .chart-header {\r\n    padding: 12px;\r\n  }\r\n  \r\n  .year-selector-compact {\r\n    gap: 2px;\r\n  }\r\n  \r\n  .year-selector-compact :deep(.el-select) {\r\n    max-width: 100px;\r\n  }\r\n  \r\n  .table-wrapper {\r\n    padding: 12px;\r\n  }\r\n\r\n\r\n  .dashboard-section .chart-section {\r\n    margin-top: 0;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  \r\n  .chart-container {\r\n    height: 250px;\r\n    padding: 12px;\r\n  }\r\n  \r\n  .chart-container canvas {\r\n    height: 200px !important;\r\n  }\r\n  \r\n  .performance-table {\r\n    min-width: 100%;\r\n    width: 100% !important;\r\n    font-size: 12px !important;\r\n  }\r\n  \r\n  :deep(.el-table th),\r\n  :deep(.el-table td) {\r\n    padding: 8px 0px;\r\n    font-size: 11px;\r\n  }\r\n  \r\n  .total-summary {\r\n    padding: 12px;\r\n    flex-direction: row;\r\n    gap: 6px;\r\n  }\r\n  \r\n  .total-item {\r\n    flex: 1;\r\n    min-width: 0;\r\n    padding: 6px 8px;\r\n  }\r\n  \r\n  .total-label {\r\n    font-size: 10px;\r\n    margin-bottom: 2px;\r\n  }\r\n  \r\n  .total-value {\r\n    font-size: 12px !important;\r\n    padding: 2px 4px;\r\n  }\r\n  \r\n  .table-header .year,\r\n  .chart-header .chart {\r\n    font-size: 14px !important;\r\n  }\r\n  \r\n  .mobile-large-title {\r\n    font-size: 0.9rem !important;\r\n  }\r\n  \r\n  .year-label {\r\n    font-size: 1rem !important;\r\n  }\r\n  \r\n  .year-selector-compact :deep(.el-select) {\r\n    min-width: 4rem;\r\n    max-width: 6rem;\r\n\r\n  }\r\n}\r\n\r\n/*  */\r\n[data-theme=\"dark\"] .mobile-collapsible:hover {\r\n  background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);\r\n}\r\n\r\n[data-theme=\"dark\"] .total-item {\r\n  background: var(--background-secondary);\r\n}\r\n</style>","import script from \"./AnnualPerformanceSection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AnnualPerformanceSection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AnnualPerformanceSection.vue?vue&type=style&index=0&id=5a8359ce&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5a8359ce\"]])\n\nexport default __exports__","<template>\r\n  <!--  -->\r\n  <div class=\"dashboard-section\">\r\n    <!--  -->\r\n    <div class=\"table-section\">\r\n      <div class=\"table-header\" :class=\"{ 'mobile-collapsible': isMobile }\" @click=\"isMobile && toggleCollapse('table')\">\r\n        <div class=\"header-content\">\r\n          <el-text \r\n          style=\"color:white;font-size:1.5rem\" \r\n          tag=\"b\" \r\n          class=\"mx-1 month\" \r\n          :class=\"{ 'mobile-large-title': isMobile }\"\r\n          \r\n          ></el-text>\r\n          \r\n          <div class=\"month-selector-compact\" >\r\n            <el-text \r\n            style=\"color:white;font-size:1.5rem\" \r\n            tag=\"b\" \r\n            class=\"mx-1\" \r\n            :class=\"{ 'mobile-large-title': isMobile }\"></el-text>\r\n            <el-select \r\n              id=\"monthSelect\"\r\n              :model-value=\"selectedMonth\" \r\n              @update:model-value=\"(value) => emit('monthChange', value)\"\r\n              placeholder=\"\"\r\n              :size=\"isMobile ? 'small':'large'\"\r\n              style=\"width:8rem;\"\r\n\r\n              @click.stop\r\n            >\r\n              <el-option\r\n                v-for=\"(month, index) in monthOptions\"\r\n                :key=\"index + 1\"\r\n                :label=\"month\"\r\n                :value=\"index + 1\"\r\n              />\r\n            </el-select>\r\n          </div>\r\n          \r\n          <el-icon v-if=\"isMobile\" class=\"collapse-icon\" :class=\"{ 'rotated': isTableExpanded }\">\r\n            <ArrowDown />\r\n          </el-icon>\r\n        </div>\r\n      </div>\r\n      <div class=\"table-wrapper\" :class=\"{ 'mobile-hidden': isMobile && !isTableExpanded }\">\r\n        <el-table \r\n          :data=\"cumulativeData\" \r\n          border \r\n          stripe\r\n          class=\"performance-table\"\r\n          v-loading=\"loading\"\r\n          style=\"font-size:1.3rem\"\r\n        >\r\n          <el-table-column \r\n            prop=\"monthName\" \r\n            label=\"\" \r\n            :width=\"!isMobile ? 80 : 40\"\r\n            align=\"center\"\r\n          />\r\n          <el-table-column \r\n            prop=\"prevYear\" \r\n            :label=\"`${selectedYear - 1}`\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 90\"\r\n          >\r\n            <template #default=\"scope\">\r\n              {{ formatCurrency(scope.row.prevYear) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column \r\n            prop=\"currYear\" \r\n            :label=\"`${selectedYear}`\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 90\"\r\n          >\r\n            <template #default=\"scope\">\r\n              {{ formatCurrency(scope.row.currYear) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column \r\n            label=\"\" \r\n            align=\"center\"\r\n            :width=\"!isMobile ? 200 : 85\"\r\n          >\r\n            <template #default=\"scope\">\r\n              <span :class=\"getGrowthRateClass(scope.row)\">\r\n                {{ getGrowthRateText(scope.row) }}\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      \r\n      \r\n      <!--  -->\r\n      <div class=\"total-summary\">\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\">{{ (selectedYear - 1) }}</span>\r\n          <span class=\"total-value\" style=\"font-size:1.5rem\">{{ formatCurrency(getCumulativeTotalPrevYear()) }}</span>\r\n        </div>\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\">{{ selectedYear }}</span>\r\n          <span class=\"total-value\" style=\"font-size:1.5rem\">{{ formatCurrency(getCumulativeTotalCurrYear()) }}</span>\r\n        </div>\r\n        <div class=\"total-item\">\r\n          <span class=\"total-label\"></span>\r\n          <span class=\"total-value\" style=\"font-size:1.5rem\" :class=\"getCumulativeTotalGrowthClass()\">{{ getCumulativeTotalGrowthRate() }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"chart-section\">\r\n      <div class=\"chart-header\" :class=\"{ 'mobile-collapsible': isMobile }\" @click=\"isMobile && toggleCollapse('chart')\">\r\n        <div class=\"header-content\">\r\n          <el-text style=\"color:white;font-size:1.5rem\"  tag=\"b\" class=\"mx-1 chart\">{{ selectedMonth ? monthOptions[selectedMonth - 1] : '' }}</el-text>\r\n          <el-icon v-if=\"isMobile\" class=\"collapse-icon\" :class=\"{ 'rotated': isChartExpanded }\">\r\n            <ArrowDown />\r\n          </el-icon>\r\n        </div>\r\n        <div class=\"chart-legend\" :class=\"{ 'mobile-hidden': isMobile && !isChartExpanded }\">\r\n          <div class=\"legend-item\">\r\n            <span class=\"legend-color prev-year\" style=\"width:1.5rem;height:1.5rem;\"></span>\r\n            <span style=\"color:white;font-size:1.5rem\">{{ (selectedYear - 1) }}</span>\r\n          </div>\r\n          <div class=\"legend-item\">\r\n            <span class=\"legend-color curr-year\" style=\"width:1.5rem;height:1.5rem;\"></span>\r\n            <span style=\"color:white;font-size:1.5rem\">{{ selectedYear }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"chart-container\" :class=\"{ 'mobile-hidden': isMobile && !isChartExpanded }\">\r\n        <canvas \r\n          ref=\"cumulativeChartRef\" \r\n          id=\"cumulativeChart\"\r\n        ></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref,  watch, onMounted, onBeforeUnmount, nextTick,computed } from 'vue'\r\nimport { useWindowSize } from '@vueuse/core';\r\nimport Chart from 'chart.js/auto'\r\nimport { ArrowDown } from '@element-plus/icons-vue'\r\n\r\n\r\nconst { width } = useWindowSize(); // \r\nconst isMobile = computed(() => width.value <= 768); //  ()\r\n\r\n// RWD \r\nconst isTableExpanded = ref(false)\r\nconst isChartExpanded = ref(false)\r\n\r\n// \r\nconst toggleCollapse = (section) => {\r\n  if (section === 'table') {\r\n    isTableExpanded.value = !isTableExpanded.value\r\n  } else if (section === 'chart') {\r\n    isChartExpanded.value = !isChartExpanded.value\r\n    // \r\n    if (isChartExpanded.value) {\r\n      nextTick(() => {\r\n        renderChart()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// Props\r\nconst props = defineProps({\r\n  selectedYear: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  selectedMonth: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  cumulativeData: {\r\n    type: Array,\r\n    required: true\r\n  },\r\n  loading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n\r\n\r\n\r\n// Emits\r\nconst emit = defineEmits(['monthChange'])\r\n\r\n// Reactive data\r\nconst cumulativeChart = ref(null)\r\nconst cumulativeChartRef = ref(null)\r\nconst monthOptions = ['', '', '', '', '', '', '', '', '', '', '', '']\r\n\r\n// Methods\r\nconst destroyChart = () => {\r\n  if (cumulativeChart.value) {\r\n    cumulativeChart.value.destroy()\r\n    cumulativeChart.value = null\r\n  }\r\n}\r\n\r\nconst renderChart = () => {\r\n  console.log('CumulativePerformanceSection renderChart called')\r\n  console.log('cumulativeData:', props.cumulativeData)\r\n  \r\n  nextTick(() => {\r\n      destroyChart()\r\n      createCumulativeChart()\r\n\r\n  })\r\n}\r\n\r\nconst createCumulativeChart = () => {\r\n  console.log(' Cumulative Performance Chart')\r\n  console.log('cumulativeChartRef:', cumulativeChartRef.value)\r\n  \r\n\r\n\r\n  if (!cumulativeChartRef.value) {\r\n    console.error('Cumulative chart canvas ref not found')\r\n    return\r\n  }\r\n\r\n  if (!props.cumulativeData.length) {\r\n    console.error('No cumulative data available')\r\n    return\r\n  }\r\n\r\n  nextTick(() => {\r\n    try {\r\n      const ctx = cumulativeChartRef.value.getContext('2d')\r\n      console.log('Canvas context:', ctx)\r\n      \r\n      const chartData = {\r\n        labels: props.cumulativeData.map(item => item.monthName),\r\n        datasets: [\r\n          {\r\n            label: `${props.selectedYear - 1}`,\r\n            data: props.cumulativeData.map(item => parseFloat(item.prevYear) || 0),\r\n            backgroundColor: '#36A2EB',\r\n            borderColor: '#36A2EB',\r\n            borderWidth: 1\r\n          },\r\n          {\r\n            label: `${props.selectedYear}`,\r\n            data: props.cumulativeData.map(item => parseFloat(item.currYear) || 0),\r\n            backgroundColor: '#FF6384',\r\n            borderColor: '#FF6384',\r\n            borderWidth: 1\r\n          }\r\n        ]\r\n      }\r\n      \r\n      console.log('Cumulative Chart data:', chartData)\r\n      \r\n      cumulativeChart.value = new Chart(ctx, {\r\n        type: 'bar',\r\n        data: chartData,\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: true,\r\n              position: 'top'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        }\r\n      })\r\n      \r\n      console.log('Cumulative Performance chart created successfully:', cumulativeChart.value)\r\n    } catch (error) {\r\n      console.error('Error creating cumulative performance chart:', error)\r\n    }\r\n  })\r\n}\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined || value === 0) {\r\n    return '0'\r\n  }\r\n  return new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(value)\r\n}\r\n\r\nconst getGrowthRate = (row) => {\r\n  const prev = parseFloat(row.prevYear) || 0\r\n  const curr = parseFloat(row.currYear) || 0\r\n  \r\n  if (prev === 0) return curr > 0 ? 100 : 0\r\n  return ((curr - prev) / prev * 100)\r\n}\r\n\r\nconst getGrowthRateText = (row) => {\r\n  const growthRate = getGrowthRate(row)\r\n  if (growthRate === 0 && parseFloat(row.prevYear) === 0 && parseFloat(row.currYear) === 0) {\r\n    return '-'\r\n  }\r\n  return `${growthRate > 0 ? '+' : ''}${growthRate.toFixed(1)}%`\r\n}\r\n\r\nconst getGrowthRateClass = (row) => {\r\n  const growthRate = getGrowthRate(row)\r\n  if (growthRate > 0) return 'growth-positive'\r\n  if (growthRate < 0) return 'growth-negative'\r\n  return 'growth-neutral'\r\n}\r\n\r\nconst getCumulativeTotalPrevYear = () => {\r\n  if (!props.cumulativeData.length) return 0\r\n  return props.cumulativeData.reduce((sum, item) => sum + (parseFloat(item.prevYear) || 0), 0)\r\n}\r\n\r\nconst getCumulativeTotalCurrYear = () => {\r\n  if (!props.cumulativeData.length) return 0\r\n  return props.cumulativeData.reduce((sum, item) => sum + (parseFloat(item.currYear) || 0), 0)\r\n}\r\n\r\nconst getCumulativeTotalGrowthRate = () => {\r\n  const totalPrev = getCumulativeTotalPrevYear()\r\n  const totalCurr = getCumulativeTotalCurrYear()\r\n  \r\n  if (totalPrev === 0) return totalCurr > 0 ? '+100.0%' : '0.0%'\r\n  \r\n  const totalGrowth = ((totalCurr - totalPrev) / totalPrev * 100)\r\n  return `${totalGrowth > 0 ? '+' : ''}${totalGrowth.toFixed(1)}%`\r\n}\r\n\r\nconst getCumulativeTotalGrowthClass = () => {\r\n  const total = parseFloat(getCumulativeTotalGrowthRate().replace(/[+%]/g, ''))\r\n  if (total > 0) return 'positive'\r\n  if (total < 0) return 'negative'\r\n  return 'neutral'\r\n}\r\n\r\n// Watchers - \r\nwatch(() => props.cumulativeData, (newData) => {\r\n  console.log('CumulativePerformanceSection cumulativeData changed:', newData)\r\n  if (newData && newData.length > 0) {\r\n    renderChart()\r\n  }\r\n}, { deep: true, immediate: true })\r\n\r\nwatch(() => props.selectedMonth, () => {\r\n  console.log('CumulativePerformanceSection selectedMonth changed')\r\n  renderChart()\r\n})\r\n\r\nwatch(() => props.selectedYear, () => {\r\n  console.log('CumulativePerformanceSection selectedYear changed')\r\n  // renderChart()\r\n})\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n  console.log('CumulativePerformanceSection mounted')\r\n  console.log('Initial props.cumulativeData:', props.cumulativeData)\r\n  \r\n  //  DOM  - \r\n  nextTick(() => {\r\n      console.log('=== CumulativePerformanceSection  ===')\r\n      console.log('cumulativeData at render time:', props.cumulativeData)\r\n      if (props.cumulativeData && props.cumulativeData.length > 0) {\r\n        renderChart()\r\n      } else {\r\n        console.log('No cumulative data available for initial render')\r\n      }\r\n  })\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  destroyChart()\r\n})\r\n\r\n// Expose methods for parent component\r\ndefineExpose({\r\n  renderChart\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  height: 100%;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.dashboard-section .chart-section {\r\n  margin-top: auto;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.table-section, .chart-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);\r\n  overflow: hidden;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n\r\n.month-selector-compact {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.month-label {\r\n  white-space: nowrap;\r\n}\r\n\r\n.mobile-large-title {\r\n  font-size: 1.6rem !important;\r\n  font-weight: 700 !important;\r\n}\r\n\r\n\r\n.table-header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px 24px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.chart-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px 24px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-bottom: 1px solid #e4e7ed;\r\n}\r\n\r\n.chart-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.chart-legend {\r\n  display: flex;\r\n  justify-content: end;\r\n  width:100%;\r\n  gap: 16px;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n}\r\n\r\n.legend-color {\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 3px;\r\n}\r\n\r\n.legend-color.prev-year {\r\n  background: rgba(54, 162, 235, 0.7);\r\n}\r\n\r\n.legend-color.curr-year {\r\n  background: rgba(255, 99, 132, 0.7);\r\n}\r\n\r\n.table-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 24px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.performance-table {\r\n  width: auto !important;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.chart-container {\r\n  padding: 24px;\r\n  height: 450px;\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-container canvas {\r\n  width: 100% !important;\r\n  height: 400px !important;\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  max-width: 100% !important;\r\n}\r\n\r\n.total-summary {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 20px 24px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);\r\n  margin-top: 16px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.total-item {\r\n  text-align: center;\r\n}\r\n\r\n.total-label {\r\n  display: block;\r\n  font-size: 1.3rem;\r\n  color: #6c757d;\r\n  margin-bottom: 6px;\r\n  font-weight: 500;\r\n}\r\n\r\n.total-value {\r\n  display: block;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  border: 2px solid #e9ecef;\r\n}\r\n\r\n.total-value.positive {\r\n  color: #67c23a;\r\n  border-color: #67c23a;\r\n  background: rgba(103, 194, 58, 0.1);\r\n}\r\n\r\n.total-value.negative {\r\n  color: #f56c6c;\r\n  border-color: #f56c6c;\r\n  background: rgba(245, 108, 108, 0.1);\r\n}\r\n\r\n.total-value.neutral {\r\n  color: #909399;\r\n  border-color: #909399;\r\n  background: rgba(144, 147, 153, 0.1);\r\n}\r\n\r\n.growth-positive {\r\n  color: #67c23a;\r\n  font-weight: bold;\r\n  background: rgba(103, 194, 58, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.growth-negative {\r\n  color: #f56c6c;\r\n  font-weight: bold;\r\n  background: rgba(245, 108, 108, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.growth-neutral {\r\n  color: #909399;\r\n  background: rgba(144, 147, 153, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n:deep(.el-table) {\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n\r\n:deep(.el-table th) {\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  color: #495057;\r\n  font-weight: 600;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding: 16px 12px;\r\n}\r\n\r\n:deep(.el-table td) {\r\n  padding: 16px 12px;\r\n  border-bottom: 1px solid #f1f3f4;\r\n}\r\n\r\n:deep(.el-table tbody tr:hover > td) {\r\n  background-color: #f8f9ff !important;\r\n}\r\n\r\n:deep(.el-table--striped .el-table__body tr.el-table__row--striped td) {\r\n  background: #fafbfc;\r\n}\r\n\r\n:deep(.el-select) {\r\n  width: 120px;\r\n}\r\n\r\n/* RWD  */\r\n.header-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n}\r\n\r\n\r\n.mobile-collapsible {\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.mobile-collapsible:hover {\r\n  background: linear-gradient(135deg, #5a6fd8 0%, #6b5b95 100%);\r\n}\r\n\r\n.collapse-icon {\r\n  font-size: 20px;\r\n  transition: transform 0.3s ease;\r\n  color: white;\r\n}\r\n\r\n.collapse-icon.rotated {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.mobile-hidden {\r\n  display: none !important;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .dashboard-section {\r\n    gap: 16px;\r\n    width: 100%;\r\n  }\r\n  \r\n  .dashboard-section .chart-section {\r\n    margin-top: 0;\r\n  }\r\n  \r\n  .table-section, .chart-section {\r\n    width: 100%;\r\n    max-width: 100%;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .table-header, .chart-header {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .header-content {\r\n    width: 100%;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 8px;\r\n    flex-wrap: nowrap;\r\n  }\r\n  \r\n  .mobile-large-title {\r\n    font-size: 1rem !important;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .month-selector-compact {\r\n    gap: 4px;\r\n    flex-shrink: 1;\r\n    min-width: 0;\r\n  }\r\n  \r\n  .month-label {\r\n    white-space: nowrap;\r\n    font-size: 1.2rem !important;\r\n  }\r\n  \r\n  .collapse-icon {\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .chart-header {\r\n    padding: 16px;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n  \r\n  .header-content {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .chart-legend {\r\n    width: 100%;\r\n    justify-content: space-around;\r\n    margin-top: 8px;\r\n  }\r\n  \r\n  .table-wrapper {\r\n    padding: 16px;\r\n    overflow-x: auto;\r\n    width: 100%;\r\n  }\r\n  \r\n  .performance-table {\r\n    min-width: 100%;\r\n    width: 100% !important;\r\n    font-size: 14px !important;\r\n  }\r\n  \r\n  .chart-container {\r\n    height: 300px;\r\n    padding: 16px;\r\n    width: 100%;\r\n  }\r\n  \r\n  .chart-container canvas {\r\n    height: 250px !important;\r\n    width: 100% !important;\r\n  }\r\n  \r\n  .total-summary {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n    padding: 16px;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .total-item {\r\n    padding: 8px 12px;\r\n    background: #f8f9fa;\r\n    border-radius: 8px;\r\n    flex: 1;\r\n    min-width: 0;\r\n    text-align: center;\r\n  }\r\n  \r\n  .total-label {\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n  }\r\n  \r\n  .total-value {\r\n    font-size: 14px !important;\r\n    padding: 4px 8px;\r\n  }\r\n  \r\n  /* Element Plus  */\r\n  :deep(.el-select) {\r\n    width: 100%;\r\n    max-width: 200px;\r\n  }\r\n  \r\n  .month-selector-compact :deep(.el-select) {\r\n    width: 100%;\r\n    max-width: 120px;\r\n  }\r\n  \r\n  :deep(.el-table) {\r\n    width: 100% !important;\r\n  }\r\n  \r\n  :deep(.el-table th) {\r\n    padding: 12px 8px;\r\n    font-size: 14px;\r\n    width: auto !important;\r\n  }\r\n  \r\n  :deep(.el-table td) {\r\n    padding: 12px 1px;\r\n    font-size: 14px;\r\n    width: auto !important;\r\n  }\r\n  \r\n  :deep(.el-table-column) {\r\n    width: auto !important;\r\n  }\r\n  \r\n  /*  */\r\n  .chart-header .chart {\r\n    font-size: 16px !important;\r\n  }\r\n  \r\n  .month-label,\r\n  .chart-legend span {\r\n    font-size: 14px !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 480px) {\r\n  .table-header,\r\n  .chart-header {\r\n    padding: 12px;\r\n  }\r\n  \r\n  \r\n  .mobile-large-title {\r\n    font-size: 0.9rem !important;\r\n  }\r\n\r\n  \r\n  .month-label {\r\n    font-size: 1rem !important;\r\n  }\r\n  \r\n  .month-selector-compact :deep(.el-select) {\r\n    min-width: 4rem;\r\n    max-width:6rem;\r\n  }\r\n  \r\n  .table-wrapper {\r\n    padding: 12px;\r\n  }\r\n  \r\n  .chart-container {\r\n    height: 250px;\r\n    padding: 12px;\r\n  }\r\n  \r\n  .chart-container canvas {\r\n    height: 200px !important;\r\n  }\r\n  \r\n  .performance-table {\r\n    min-width: 100%;\r\n    width: 100% !important;\r\n    font-size: 12px !important;\r\n  }\r\n  \r\n  :deep(.el-table th),\r\n  :deep(.el-table td) {\r\n    \r\n    padding: 8px 0px;\r\n    font-size: 11px;\r\n  }\r\n  \r\n  .total-summary {\r\n    padding: 12px;\r\n    flex-direction: row;\r\n    gap: 6px;\r\n  }\r\n  \r\n  .total-item {\r\n    flex: 1;\r\n    min-width: 0;\r\n    padding: 6px 8px;\r\n  }\r\n  \r\n  .total-label {\r\n    font-size: 10px;\r\n    margin-bottom: 2px;\r\n  }\r\n  \r\n  .total-value {\r\n    font-size: 12px !important;\r\n    padding: 2px 4px;\r\n  }\r\n  \r\n  .chart-header .chart {\r\n    font-size: 14px !important;\r\n  }\r\n}\r\n\r\n/*  */\r\n[data-theme=\"dark\"] .mobile-collapsible:hover {\r\n  background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);\r\n}\r\n\r\n[data-theme=\"dark\"] .total-item {\r\n  background: var(--background-secondary);\r\n}\r\n</style>","import script from \"./CumulativePerformanceSection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CumulativePerformanceSection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CumulativePerformanceSection.vue?vue&type=style&index=0&id=4b0ce6f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4b0ce6f2\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"performance-dashboard\">\r\n    <div class=\"dashboard-header\">\r\n      <h2 style=\"font-size:3rem;\"></h2>\r\n    </div>\r\n\r\n    <div class=\"dashboard-content\">\r\n      <!--  -->\r\n      <AnnualPerformanceSection\r\n        ref=\"annualSection\"\r\n        :selected-year=\"selectedYear\"\r\n        :available-years=\"availableYears\"\r\n        :performance-data=\"performanceData\"\r\n        :loading=\"loading\"\r\n        @year-change=\"handleYearChange\"\r\n      />\r\n\r\n      <!--  -->\r\n      <CumulativePerformanceSection\r\n        ref=\"cumulativeSection\"\r\n        :selected-year=\"selectedYear\"\r\n        :selected-month=\"selectedMonth\"\r\n        :cumulative-data=\"cumulativeData\"\r\n        :loading=\"loading\"\r\n        @month-change=\"handleMonthChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport CRMService from '@/service/CRMService.js'\r\nimport AnnualPerformanceSection from './AnnualPerformanceSection.vue'\r\nimport CumulativePerformanceSection from './CumulativePerformanceSection.vue'\r\n\r\n// Reactive data\r\nconst selectedYear = ref(new Date().getFullYear())\r\nconst selectedMonth = ref(new Date().getMonth() + 1)\r\nconst performanceData = ref([])\r\nconst cumulativeData = ref([])\r\nconst loading = ref(false)\r\nconst availableYears = ref([])\r\n\r\n// Component refs\r\nconst annualSection = ref(null)\r\nconst cumulativeSection = ref(null)\r\n\r\n// Methods\r\nconst initializeYears = () => {\r\n  const currentYear = new Date().getFullYear()\r\n  availableYears.value = []\r\n  for (let i = currentYear; i >= currentYear - 10; i--) {\r\n    availableYears.value.push(i)\r\n  }\r\n}\r\n\r\nconst fetchData = async () => {\r\n  console.log('Fetching data for year:', selectedYear.value)\r\n  loading.value = true\r\n  \r\n  try {\r\n    const response = await CRMService.getPerformanceDashboard(selectedYear.value)\r\n    performanceData.value = response.data\r\n    console.log('Performance data loaded:', performanceData.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    \r\n    // \r\n    performanceData.value = [\r\n      { monthName: '', prevYear: 15257759, currYear: 12317448 },\r\n      { monthName: '', prevYear: 9232128, currYear: 11567853 },\r\n      { monthName: '', prevYear: 18915076, currYear: 20300348 },\r\n      { monthName: '', prevYear: 15105928, currYear: 16985452 },\r\n      { monthName: '', prevYear: 17566289, currYear: 16295034 },\r\n      { monthName: '', prevYear: 23408017, currYear: 19855287 }\r\n    ]\r\n    console.log('Using test data:', performanceData.value)\r\n  } finally {\r\n    loading.value = false\r\n    updateCumulativeData()\r\n    \r\n    // // \r\n    // nextTick(() => {\r\n    //   setTimeout(() => {\r\n    //     forceRenderAllCharts()\r\n    //   }, 3000)\r\n    // })\r\n  }\r\n}\r\n\r\nconst updateCumulativeData = () => {\r\n  console.log('Updating cumulative data for month:', selectedMonth.value)\r\n  if (!performanceData.value.length) return\r\n  \r\n  cumulativeData.value = performanceData.value.slice(0, selectedMonth.value)\r\n  console.log('Cumulative data updated:', cumulativeData.value)\r\n}\r\n\r\nconst handleYearChange = (newYear) => {\r\n  console.log('Year changed to:', newYear)\r\n  selectedYear.value = newYear\r\n  fetchData()\r\n}\r\n\r\nconst handleMonthChange = (newMonth) => {\r\n  console.log('Month changed to:', newMonth)\r\n  selectedMonth.value = newMonth\r\n  updateCumulativeData()\r\n}\r\n\r\nconst forceRenderAllCharts = () => {\r\n  console.log('Forcing render of all charts')\r\n  nextTick(() => {\r\n    setTimeout(() => {\r\n      if (annualSection.value) {\r\n        console.log('Triggering annual section chart render')\r\n        annualSection.value.renderChart()\r\n      }\r\n      if (cumulativeSection.value) {\r\n        console.log('Triggering cumulative section chart render')\r\n        cumulativeSection.value.renderChart()\r\n      }\r\n      alert(\"forceRenderAllCharts!\")\r\n    }, 2000)\r\n  })\r\n}\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n  console.log('PerformanceDashboard mounted')\r\n  initializeYears()\r\n  fetchData()\r\n  \r\n  // \r\n  window.forceRenderCharts = () => {\r\n    console.log('Force rendering charts from main component')\r\n    forceRenderAllCharts()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.performance-dashboard {\r\n  padding: 24px;\r\n  background: #f5f7fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.dashboard-header {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 0rem;\r\n  margin-bottom: 30px; /*  */\r\n  padding: 25px 30px; /*  */\r\n  background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); /*  */\r\n  border-radius: 15px; /*  */\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); /*  */\r\n  color: white; /*  */\r\n  position: relative;\r\n  overflow: hidden;\r\n  \r\n}\r\n\r\n.dashboard-header::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  transform: rotate(30deg);\r\n  pointer-events: none;\r\n}\r\n\r\n.dashboard-header h2 {\r\n  margin: 0;\r\n  color: white; /*  */\r\n  font-size: 28px; /*  */\r\n  font-weight: 700; /*  */\r\n  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /*  */\r\n  z-index: 1; /*  */\r\n}\r\n\r\n.dashboard-content {\r\n  display: grid;\r\n  gap: 24px;\r\n  grid-template-columns: 1fr 1fr;\r\n  align-items: stretch;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .dashboard-content {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n\r\n\r\n@media (max-width: 400px) {\r\n  .dashboard-content {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n\r\n</style>","import script from \"./PerformanceDashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PerformanceDashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PerformanceDashboard.vue?vue&type=style&index=0&id=e05b989a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e05b989a\"]])\n\nexport default __exports__","  <template>\r\n    <el-form\r\n      ref=\"formRef\"\r\n      class=\"fill-form-tracking\"\r\n      style=\"max-width: 100%; margin-bottom: 1rem;\"\r\n      :model=\"form\"\r\n      :rules=\"rules\"\r\n      label-width=\"8rem\"\r\n      status-icon\r\n      inline\r\n    >\r\n\r\n      <!--  () -->\r\n      <el-form-item v-if=\"false\" label=\"\" prop=\"createdDate\">\r\n        <el-date-picker\r\n          v-model=\"form.createdDate\"\r\n          type=\"datetime\"\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n          disabled\r\n        />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"fullCompanyName\">\r\n        <el-autocomplete\r\n          v-model=\"form.fullCompanyName\"\r\n          :fetch-suggestions=\"querySearchCompany\"\r\n          placeholder=\"\"\r\n          @select=\"onCompanySelect\"\r\n          style=\"width: 22rem;\"\r\n          clearable\r\n          :trigger-on-focus=\"false\"\r\n        />\r\n      </el-form-item>\r\n      \r\n      <!-- ID -->\r\n      <el-form-item  label=\"ID\" prop=\"customerId\" v-if=\"false\">\r\n        <el-input  style=\"width: 22rem;\" v-model=\"form.customerId\" placeholder=\"ID\" disabled/>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item  label=\"\" prop=\"customerName\">\r\n        <el-input  style=\"width: 22rem;\" v-model=\"form.customerName\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"shortName\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.shortName\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"companyAddress\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.companyAddress\" placeholder=\"\" />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"taxId\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.taxId\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"companyRegion\">\r\n        <el-select\r\n          v-model=\"form.companyRegion\"\r\n          filterable\r\n          allow-create\r\n          default-first-option\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n          clearable\r\n          @change=\"() => form.otherCompanyRegion = ''\"\r\n        >\r\n          <el-option\r\n            v-for=\"region in regionOptions\"\r\n            :key=\"region\"\r\n            :label=\"region\"\r\n            :value=\"region\"\r\n          />\r\n          <!--  -->\r\n          <el-option label=\"\" value=\"\" />\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item\r\n        v-if=\"form.companyRegion === ''\"\r\n        label=\"\"\r\n        prop=\"otherCompanyRegion\"\r\n      >\r\n        <el-input\r\n          v-model=\"form.otherCompanyRegion\"\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n        />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"contactName\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.contactName\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"email\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.email\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item class=\"blue-error\" prop=\"mobilePhone\">\r\n          <template #label>\r\n            <span style=\"color: blue; margin-right: 4px\">*</span>\r\n            <span></span>\r\n          </template>\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.mobilePhone\" placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n\r\n      <!-- () -->\r\n      <el-form-item  class=\"blue-error\" prop=\"phoneExtension\">\r\n          <template #label>\r\n            <span style=\"color: blue; margin-right: 4px\">*</span>\r\n            <span>()</span>\r\n          </template>\r\n        <el-input\r\n          style=\"width: 22rem;\"\r\n          v-model=\"form.phoneExtension\"\r\n          placeholder=\"ex: 02-1234-5678 ext.123\"\r\n        />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"faxNum\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.faxNum\" placeholder=\"\" />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item label=\"\" prop=\"customerSource\">\r\n        <el-select\r\n          v-model=\"form.customerSource\"\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n          clearable\r\n          @change=\"() => form.otherCustomerSource = ''\"\r\n        >\r\n          <el-option label=\"\" value=\"\" />\r\n          <el-option label=\"\" value=\"\" />\r\n          <el-option label=\"\" value=\"\" />\r\n          <el-option label=\"\" value=\"\" />\r\n          <el-option label=\"\" value=\"\" />\r\n          <el-option label=\"\" value=\"\" />\r\n\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <!-- Select  -->\r\n      <el-form-item label=\"\" prop=\"customerType\">\r\n        <el-select\r\n          v-model=\"form.customerType\"\r\n          filterable\r\n          allow-create\r\n          default-first-option\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"type in customerTypes\"\r\n            :key=\"type\"\r\n            :label=\"type\"\r\n            :value=\"type\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n  \r\n\r\n  \r\n      <!--  () -->\r\n      <el-form-item v-if=\"false\" label=\"\" prop=\"createdBy\">\r\n        <el-input style=\"width: 22rem;\" v-model=\"form.createdBy\" disabled placeholder=\"\" />\r\n      </el-form-item>\r\n  \r\n      <!--  -->\r\n      <el-form-item label=\"\" v-if=\"false\">\r\n        <span>{{ responsibleAreaDisplay }}</span>\r\n      </el-form-item>\r\n\r\n\r\n      <!--  -->\r\n      <el-form-item\r\n        v-if=\"form.customerSource === ''\"\r\n        label=\"\"\r\n        prop=\"otherCustomerSource\"\r\n      >\r\n        <el-input\r\n          v-model=\"form.otherCustomerSource\"\r\n          placeholder=\"\"\r\n          style=\"width: 22rem;\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <!--  -->\r\n      <el-form-item class=\"Fill_Btn_Submit\">\r\n        <el-button type=\"primary\" @click=\"onSubmit\"></el-button>\r\n        <el-button @click=\"resetForm\"></el-button>\r\n        <el-button v-if=\"false\" type=\"primary\" @click=\"fillFormData\"></el-button>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n  </template>\r\n  \r\n  \r\n  <script setup>\r\n  import { ref, reactive,onMounted,toRaw,computed } from 'vue';\r\n  import { useAuthStore } from '@/stores/auth';\r\n  import '@/css/form/Sales/customerInfo.css';\r\n  import axios from 'axios';\r\n  import CRMService from '@/service/CRMService.js'\r\n  import {useUserStore} from '@/stores/user.js'\r\n  import { ElMessage } from 'element-plus';\r\n  import emitter from '@/eventBus';\r\n\r\n  \r\n  //  authStore \r\n  const authStore = useAuthStore();\r\n  const userStore=useUserStore();\r\n  const formRef = ref(null);\r\n  const regionOptions = ref([]);\r\n\r\n  // \r\n  const customerTypes = [\r\n    '','','','','','','',\r\n    '','','','',\r\n    '','','','',''\r\n  ]\r\n  \r\n\r\n  // Reactive \r\n  const form = reactive({\r\n    customerId:         '',\r\n    customerName:       '',\r\n    shortName:          '',\r\n    fullCompanyName:    '',\r\n    companyAddress:     '',\r\n    companyRegion:      '',\r\n    otherCompanyRegion: '',\r\n    contactName:        '',\r\n    customerType:       '',       //  select\r\n    email:              '',\r\n    phoneExtension:     '',\r\n    faxNum:             '',\r\n    mobilePhone:        '',\r\n    taxId:              '',\r\n    createdDate:        new Date(),\r\n    createdBy:          authStore.userId || '',\r\n    customerSource:     '', // \r\n    otherCustomerSource: '', // \r\n    responsibleArea:    '', // \r\n  });\r\n\r\n  //  userStore.userId \r\n  const responsibleAreaDisplay = computed(() => {\r\n    if (SalespersonBusinessArea.value && userStore.userId) {\r\n      const foundArea = SalespersonBusinessArea.value.find(\r\n        (item) => item.salespersonID === userStore.userId\r\n      );\r\n      return foundArea ? foundArea.businessArea : '';\r\n    }\r\n    return '';\r\n  });\r\n\r\n  function fillFormData() {\r\n    form.customerId        = `C${Math.floor(10000 + Math.random()*90000)}`        //  5 \r\n    form.customerName      = ''\r\n    form.shortName         = ''\r\n    form.fullCompanyName   = ''\r\n    form.companyAddress    = '1'\r\n    form.companyRegion     = ''\r\n    form.otherCompanyRegion= ''\r\n    form.contactName       = ''\r\n    form.customerType      = '' // \r\n    form.email             = 'test@example.com'\r\n    form.phoneExtension    = '02-1234-5678'\r\n    form.faxNum            = '02-8765-4321'\r\n    form.mobilePhone       = '0912-345-678'\r\n    form.taxId             = '12345678'\r\n    form.createdDate       = new Date()                                         // \r\n    form.createdBy         = authStore.userId || 'SYSTEM'\r\n    form.customerSource    = ''     // \r\n    form.otherCustomerSource = '' // \r\n    form.responsibleArea   = responsibleAreaDisplay.value; // \r\n  }\r\n  // \r\n  const rules = {\r\n    // taxId:[\r\n    //   { required: true, message: '', trigger: 'change' }\r\n    // ],\r\n    customerName: [\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    contactName:[\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    otherCompanyRegion: [\r\n      {\r\n        required: () => form.companyRegion === '',\r\n        message: '',\r\n        trigger: 'blur'\r\n      }\r\n    ],\r\n    fullCompanyName: [\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    customerType: [\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    companyAddress:[\r\n       { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    customerSource: [\r\n      { required: true, message: '', trigger: 'change' }\r\n    ],\r\n    otherCustomerSource: [\r\n      {\r\n        required: () => form.customerSource === '',\r\n        message: '',\r\n        trigger: 'blur'\r\n      }\r\n    ],\r\n    //  \r\n    email: [\r\n      { required: true, message: '', trigger: 'change' },\r\n      { type: 'email', message: ': dae.david@gmail.com', trigger: ['blur', 'change'] }\r\n    ],\r\n    // responsibleArea: [ // \r\n    //   { required: true, message: '', trigger: 'change' }\r\n    // ],\r\n    //  ()\r\n    phoneExtension: [\r\n      {\r\n            validator: (rule, value, callback) => {\r\n          if (!form.phoneExtension && !form.mobilePhone) {\r\n            callback(new Error('()'));\r\n            return;\r\n          }\r\n          //  Regex 68  or 4-4 \r\n          const phoneRegex = /^(?:\\d{2,4}-\\d{6,8}|\\d{2,4}-\\d{4}-\\d{4})(?:#\\d+)?$/;\r\n          if (form.phoneExtension\r\n              && !phoneRegex.test(form.phoneExtension)) {\r\n            callback(new Error('(): 02-1234-5678#123'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    mobilePhone: [\r\n      {\r\n        validator: (rule, value, callback) => {\r\n          if (!form.phoneExtension && !form.mobilePhone) {\r\n            callback(new Error('()'));\r\n          } else if (form.mobilePhone && !/^09\\d{2}\\d{3}\\d{3}$/.test(form.mobilePhone)) {\r\n            callback(new Error(': 0912345678'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'change'\r\n      }\r\n    ]\r\n  }\r\n  function resetForm() {\r\n    formRef.value.resetFields();\r\n    //  responsibleArea \r\n    form.responsibleArea = responsibleAreaDisplay.value;\r\n  }\r\n  \r\n  async function onSubmit() {\r\n    formRef.value.validate(async (valid) => {\r\n        if (!valid) return;\r\n        if (form.companyRegion === '') {\r\n          form.companyRegion = form.otherCompanyRegion.trim()\r\n        }\r\n        if (form.customerSource === '') { // \r\n          form.customerSource = form.otherCustomerSource.trim()\r\n        }\r\n        //  responsibleArea \r\n        form.responsibleArea = responsibleAreaDisplay.value;\r\n        const plainForm = toRaw(form);\r\n\r\n        const payload = {\r\n          CreatorID: userStore.userId,\r\n          FormData: plainForm\r\n        };\r\n\r\n        try {\r\n        const res = await CRMService.createCustomerForm(payload);\r\n        if(res){\r\n            ElMessage.success(\"!!\");\r\n            resetForm();\r\n            emitter.emit('customer-created');\r\n        }\r\n            console.log('', res.data);\r\n        } catch (err) {\r\n            ElMessage.error(\" !!\");\r\n            console.error('', err);\r\n        }\r\n    });\r\n  }\r\n\r\n  const comCustomerData = ref([]) ;\r\n  const getComCustomerData = async () => {\r\n    try {\r\n      const res = await CRMService.getComCustomer()\r\n      comCustomerData.value = res.data   // ** .value**\r\n    }\r\n    catch (err) {\r\n      ElMessage.error('')\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  const getListCountyData = async()=>{\r\n     //  API  responseType  'text'\r\n      const response = await axios.get('https://api.nlsc.gov.tw/other/ListCounty', {\r\n        responseType: 'text'\r\n        });\r\n        // console.log('API Response:', response.data); //  XML \r\n\r\n        //  XML\r\n        const parser = new DOMParser();\r\n        const xmlDoc = parser.parseFromString(response.data, 'application/xml');\r\n        const items = xmlDoc.getElementsByTagName('countyItem'); //  'countyItem'\r\n        // console.log('Items:', items); //  <countyItem> \r\n\r\n        //  regionOptions\r\n        regionOptions.value = Array.from(items).map(item => {\r\n        const nameElem = item.getElementsByTagName('countyname')[0]; //  'countyname'\r\n        return nameElem ? nameElem.textContent.trim() : '';\r\n        }).filter(name => name);\r\n\r\n        // console.log('regionOptions:', regionOptions.value); // \r\n\r\n  }\r\n\r\n  const querySearchCompany = (queryString, cb) => {\r\n    const list = comCustomerData.value || []\r\n    const results = queryString\r\n      ? list.filter(item =>\r\n          item.fullName\r\n            .toLowerCase()\r\n            .includes(queryString.toLowerCase())\r\n        )\r\n      : []\r\n    //  value \r\n    cb(\r\n      results.map(item => ({\r\n        value: item.fullName,\r\n        ...item\r\n      }))\r\n    )\r\n  }\r\n\r\n  const onCompanySelect = item => {\r\n    form.customerId   = item.customerId\r\n    form.shortName    = item.shortName\r\n    form.contactName  = item.linkMan\r\n    form.email        = item.email\r\n    form.mobilePhone  = item.mobileTel\r\n    form.faxNum = item.faxNum\r\n    form.phoneExtension = item.phoneExtension\r\n    form.taxId = item.taxId\r\n    form.companyAddress = item.companyAddress\r\n    form.customerName = item.customerName\r\n  }\r\n\r\n  const SalespersonBusinessArea = ref();\r\n\r\n  const fetchgetSalespersonBusinessArea =async ()=>{\r\n    const res = await CRMService.getSalespersonBusinessArea();\r\n    console.log(res.data);\r\n    SalespersonBusinessArea.value= res.data;\r\n  }\r\n\r\n  onMounted(async () => {\r\n    try {\r\n\r\n        //\r\n        await getListCountyData();\r\n\r\n        // \r\n        await getComCustomerData();\r\n\r\n        // \r\n        await fetchgetSalespersonBusinessArea();\r\n    } catch (error) {\r\n        console.error('', error);\r\n    }\r\n    });\r\n\r\n  </script>\r\n  <style scoped>\r\n  .fill-form-tracking {\r\n    border: 1px solid #000;\r\n    margin: 5rem 3rem 0rem 3rem;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    padding: 1rem 0rem 0rem 0rem;\r\n    margin-top: 4rem;\r\n  }\r\n\r\n  .fill-form-tracking .el-form-item__content {\r\n    width: 10rem; /*  */\r\n  }\r\n\r\n  .Fill_Btn_Submit{\r\n    margin-left:2rem  \r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .fill-form-tracking .el-form-item__content {\r\n      width: 60% !important; /* RWD  60% */\r\n    }\r\n\r\n    .fill-form-tracking .el-select {\r\n      width: 100% !important; /*  el-select  RWD  */\r\n    }\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .fill-form-tracking ::v-deep .el-autocomplete ,\r\n    .fill-form-tracking .el-input,\r\n    .fill-form-tracking .el-select,\r\n    .fill-form-tracking .el-date-picker {\r\n      width: 13rem !important; /*  */\r\n    }\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n\r\n    .fill-form-tracking {\r\n      /* 1px   */\r\n      border: 1px solid #000;\r\n\r\n      /* margin 3rem 3rem 3rem 5rem */\r\n      margin: 2rem 3rem 0rem 3rem;\r\n\r\n      background: #fff;\r\n      border-radius: 4px;\r\n      width: 20rem;\r\n    }\r\n  }\r\n\r\n  @media(max-width: 768px){\r\n    .Fill_Btn_Submit{\r\n      margin-left:4rem;\r\n    }\r\n  }\r\n\r\n\r\n  /* 1.  */\r\n  .blue-error ::v-deep .el-form-item__error {\r\n    color:  blue !important;\r\n  }\r\n\r\n  /* 2.  */\r\n  .blue-error.is-error ::v-deep .el-input__inner {\r\n    border-color: blue !important;\r\n  }\r\n\r\n  </style>","import script from \"./FillCustomerForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FillCustomerForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FillCustomerForm.vue?vue&type=style&index=0&id=2613605e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2613605e\"]])\n\nexport default __exports__","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    :width=\"isRWDMode ? '95%' : '90%'\"\r\n    top=\"3vh\"\r\n    @close=\"handleClose\"\r\n    :style=\"{\r\n      /*  */\r\n      border: '4mm ridge rgba(255, 140, 100, 0.6)',\r\n      borderRadius: '10px',\r\n      /*  */\r\n      boxShadow: '0 4px 16px rgba(255, 215, 0, 0.3)',\r\n      /*  () */\r\n      // background: 'rgba(255, 255, 255, 0.75)',\r\n      backdropFilter: 'blur(6px)',\r\n      /*  */\r\n      transform: dialogVisible ? 'scale(1)' : 'scale(0.98)',\r\n      transition: 'transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out'\r\n    }\"\r\n  >\r\n    <template #header>\r\n      <div class=\"flex justify-center items-center w-full \">\r\n        <el-tag\r\n          type=\"warning\"\r\n          effect=\"light\"\r\n          :style=\"{\r\n            fontSize: isRWDMode ? '1.5rem' : '3rem',\r\n            padding: isRWDMode ? '1.5rem 2.5rem' : '3rem 5rem'\r\n          }\"\r\n          round\r\n        >\r\n          {{ title }}\r\n        </el-tag>\r\n      </div>\r\n    </template>\r\n    <div\r\n      class=\"controls-bar mb-4 w-full\"\r\n      :style=\"{\r\n        display: 'flex',\r\n        flexDirection: isRWDMode ? 'column' : 'row',\r\n        alignItems: isRWDMode ? 'center' : 'center',\r\n        gap: isRWDMode ? '10px' : '8px',\r\n        borderColor: 'gray',\r\n        borderWidth: '1px',\r\n        padding: '1rem'\r\n      }\"\r\n    >\r\n      <el-input\r\n        v-model=\"searchTerm\"\r\n        placeholder=\"\"\r\n        clearable\r\n        @clear=\"onSearch\"\r\n        @keyup.enter=\"onSearch\"\r\n        :style=\"{ width: isRWDMode ? '100%' : '300px' }\"\r\n      />\r\n      <el-button type=\"info\" @click=\"onSearch\" :style=\"{ marginLeft: isRWDMode ? '0' : '0' }\"></el-button>\r\n\r\n      <div\r\n        :style=\"{\r\n          display: 'flex',\r\n          flexDirection: isRWDMode ? 'column' : 'row',\r\n          alignItems: isRWDMode ? 'center' : 'center',\r\n          marginLeft: isRWDMode ? '0' : '5rem',\r\n          gap: isRWDMode ? '10px' : '8px'\r\n        }\"\r\n      >\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <el-select\r\n          v-model=\"pageSize\"\r\n          placeholder=\"\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '4rem' }\"\r\n          size=\"default\"\r\n          @change=\"onPageSizeChange\"\r\n        >\r\n          <el-option\r\n            v-for=\"s in [5,10,15,20,25,30]\"\r\n            :key=\"s\"\r\n            :label=\"s\"\r\n            :value=\"s\"\r\n          />\r\n        </el-select>\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <el-pagination\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"filteredOrderSummaries.length\"\r\n          :page-size=\"pageSize\"\r\n          v-model:current-page=\"currentPage\"\r\n          @current-change=\"onPageChange\"\r\n          :style=\"{ marginLeft: isRWDMode ? '0' : '3rem' }\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <el-table\r\n      v-if=\"!isRWDMode\"\r\n      class=\"black-border-table\"\r\n      style=\"width: 100%\"\r\n      :data=\"currentPageData\"\r\n      v-loading=\"isLoadingOrderSummaries\"\r\n      border\r\n      stripe\r\n    >\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"110\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"340\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"140\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"125\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\">\r\n        <template #default=\"{ row }\">\r\n          {{ formatAmount(row.) }}\r\n        </template>\r\n      </el-table-column>\r\n      <!-- <el-table-column prop=\"\" label=\"\" width=\"80\" /> -->\r\n      <el-table-column prop=\"\" label=\"\" width=\"120\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n      <!-- <el-table-column prop=\"\" label=\"\" width=\"120\" /> -->\r\n      <!-- <el-table-column prop=\"\" label=\"\" width=\"80\" /> -->\r\n      <el-table-column prop=\"\" label=\"\" width=\"110\" />\r\n      <!-- <el-table-column prop=\"\" label=\"\" width=\"100\" /> -->\r\n      <!-- <el-table-column prop=\"\" label=\"\" width=\"100\" /> -->\r\n      <el-table-column prop=\"\" label=\"\" width=\"130\">\r\n        <template #default=\"{ row }\">\r\n          <!-- 1)  -->\r\n          <div\r\n            v-if=\"row. !== null && row. === '' && !row.isEditingProductCategory\"\r\n            class=\"empty-cell\"\r\n            @dblclick=\"row.isEditingProductCategory = true\"\r\n          ></div>\r\n\r\n          <!-- 2)  -->\r\n          <span\r\n            v-else-if=\"row. !== null && row. !== '' && !row.isEditingProductCategory\"\r\n            @dblclick=\"row.isEditingProductCategory = true\"\r\n            class=\"nonempty-cell\"\r\n          >\r\n            {{ row. }}\r\n          </span>\r\n\r\n          <!-- 3)  -->\r\n          <el-select\r\n            v-else\r\n            v-model=\"row.\"\r\n            placeholder=\"\"\r\n            size=\"small\"\r\n            @change=\"updateProductCategory(row, $event); row.isEditingProductCategory = false;\"\r\n            @blur=\"row.isEditingProductCategory = false\"\r\n          >\r\n            <el-option\r\n              v-for=\"category in productCategories\"\r\n              :key=\"category\"\r\n              :label=\"category\"\r\n              :value=\"category\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- RWD  -->\r\n    <el-table\r\n      v-if=\"isRWDMode\"\r\n      class=\"black-border-table\"\r\n      style=\"width: 100%; margin-bottom: 20px;\"\r\n      :data=\"currentPageData\"\r\n      v-loading=\"isLoadingOrderSummaries\"\r\n      border\r\n      stripe\r\n    >\r\n      <el-table-column type=\"expand\">\r\n        <template #default=\"{ row }\">\r\n          <div style=\"padding: 10px;\">\r\n            <p v-for=\"([key, value]) in filteredOrderSummaryData(row)\" :key=\"key\">\r\n              <strong>{{ orderSummaryFieldLabels[key] || key }}:</strong>\r\n              <span v-if=\"key === ''\">{{ formatAmount(value) }}</span>\r\n              <span v-else>{{ value }}</span>\r\n            </p>\r\n            <div style=\"margin-top: 10px;\">\r\n              <el-select\r\n                v-model=\"row.\"\r\n                placeholder=\"\"\r\n                size=\"small\"\r\n                @change=\"updateProductCategory(row, $event)\"\r\n              >\r\n                <el-option\r\n                  v-for=\"category in productCategories\"\r\n                  :key=\"category\"\r\n                  :label=\"category\"\r\n                  :value=\"category\"\r\n                />\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"110\" />\r\n      <el-table-column prop=\"\" label=\"\" width=\"auto\" />\r\n    </el-table>\r\n\r\n    <div\r\n      ref=\"wrapper\"\r\n      class=\"drag-wrapper\"\r\n      :style=\"{ overflowY: isRWDMode ? 'auto' : 'visible', maxHeight: isRWDMode ? '70rem' : 'none' }\"\r\n    >\r\n      <!-- RWD  -->\r\n    </div>\r\n\r\n    <template #footer>\r\n      <el-button @click=\"dialogVisible = false\"></el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, defineProps, defineEmits, onMounted, onUnmounted } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\nimport { ElMessage } from 'element-plus';\r\nconst isLoadingMore = ref();\r\nconst formatAmount = (amount) => {\r\n  if (typeof amount !== 'number') {\r\n    return amount;\r\n  }\r\n  return amount.toLocaleString('en-US');\r\n};\r\n\r\nconst productCategories = ['','', '', ''];\r\n\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  customerId: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  fullCompanyName: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  getFormattedDateRange: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n});\r\n\r\nconst emit = defineEmits(['update:visible']);\r\n\r\nconst dialogVisible = computed({\r\n  get: () => props.visible,\r\n  set: (val) => emit('update:visible', val)\r\n});\r\n\r\nconst allOrderSummaries = ref([]); // \r\nconst isLoadingOrderSummaries = ref(false);\r\nconst isRWDMode = ref(false); //  RWD \r\n\r\nconst searchTerm = ref('');\r\nconst pageSize = ref(10);\r\nconst currentPage = ref(1);\r\n\r\nconst title = computed(() => ` - ${props.fullCompanyName}`);\r\n\r\nasync function loadOrderSummaries(customerId, start, end) {\r\n  isLoadingOrderSummaries.value = true;\r\n  try {\r\n    const res = await CRMService.getOrderSummaries(customerId, start, end);\r\n    allOrderSummaries.value = (Array.isArray(res.data) ? res.data : [res.data]).map(item => ({\r\n      ...item,\r\n      isEditingProductCategory: false // \r\n    }));\r\n    currentPage.value = 1; // \r\n  } catch (err) {\r\n    ElMessage.error('' + err.message);\r\n    console.error(err);\r\n    allOrderSummaries.value = [];\r\n  } finally {\r\n    isLoadingOrderSummaries.value = false;\r\n  }\r\n}\r\n\r\nconst filteredOrderSummaries = computed(() => {\r\n  const term = searchTerm.value.trim().toLowerCase();\r\n  if (!term) return allOrderSummaries.value;\r\n  return allOrderSummaries.value.filter(item => {\r\n    // const orderNumber = item[''] ? item[''].toString().toLowerCase() : '';\r\n    const marketCategory = item[''] ? item[''].toString().toLowerCase() : '';\r\n    const projectName = item[''] ? item[''].toString().toLowerCase() : '';\r\n\r\n    return marketCategory.includes(term) || projectName.includes(term);\r\n  });\r\n});\r\n\r\nconst currentPageData = computed(() => {\r\n  if (isRWDMode.value) {\r\n    return filteredOrderSummaries.value.slice(0, loadedItemCount.value); // RWD  loadedItemCount \r\n  } else {\r\n    const start = (currentPage.value - 1) * pageSize.value;\r\n    return filteredOrderSummaries.value.slice(start, start + pageSize.value); //  RWD \r\n  }\r\n});\r\n\r\nconst onSearch = () => {\r\n  if (isRWDMode.value) {\r\n    loadedItemCount.value = 30; // RWD \r\n  } else {\r\n    currentPage.value = 1; //  RWD \r\n  }\r\n};\r\n\r\nconst onPageChange = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\nconst onPageSizeChange = (size) => {\r\n  pageSize.value = size;\r\n  currentPage.value = 1; // \r\n};\r\n\r\nasync function updateProductCategory(row, newCategory) {\r\n  try {\r\n    //  API \r\n    await CRMService.updateOrderProductCategory(row., newCategory);\r\n    ElMessage.success('');\r\n    // \r\n    // await loadOrderSummaries(props.customerId);\r\n  } catch (err) {\r\n    ElMessage.error('' + err.message);\r\n    console.error(err);\r\n  }\r\n}\r\n\r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal && props.customerId) {\r\n    const [start, end] = props.getFormattedDateRange.split('_');\r\n    loadOrderSummaries(props.customerId, start, end);\r\n  }\r\n});\r\n\r\nconst handleClose = () => {\r\n  emit('update:visible', false);\r\n};\r\n\r\nconst loadedItemCount = ref(30); // \r\nconst wrapper = ref(null); //  wrapper ref\r\n\r\n// \r\nconst handleScroll = () => {\r\n  if (isRWDMode.value && wrapper.value) {\r\n    const { scrollTop, scrollHeight, clientHeight } = wrapper.value;\r\n    if (scrollTop + clientHeight >= scrollHeight - 50 && !isLoadingMore.value) {\r\n      loadMore();\r\n    }\r\n  }\r\n};\r\n\r\n// \r\nconst loadMore = () => {\r\n  if (loadedItemCount.value < filteredOrderSummaries.value.length) {\r\n    isLoadingMore.value = true;\r\n    setTimeout(() => { // \r\n      loadedItemCount.value += 30; // 30\r\n      isLoadingMore.value = false;\r\n    }, 500);\r\n  }\r\n};\r\n\r\nwatch(() => props.visible, (newVal) => {\r\n  if (newVal && props.customerId) {\r\n    const [start, end] = props.getFormattedDateRange.split('_');\r\n    loadOrderSummaries(props.customerId, start, end);\r\n  }\r\n});\r\n\r\n// \r\nwatch(isRWDMode, (newVal) => {\r\n  if (newVal && wrapper.value) {\r\n    wrapper.value.addEventListener('scroll', handleScroll);\r\n  } else if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll);\r\n  }\r\n});\r\n\r\nconst orderSummaryFieldLabels = {\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': '',\r\n  '': ''\r\n};\r\n\r\nconst filteredOrderSummaryData = computed(() => (row) => {\r\n  const excludedKeys = ['isEditingProductCategory']; // \r\n  return Object.entries(row).filter(([key]) => !excludedKeys.includes(key));\r\n});\r\n\r\n//  RWD \r\nconst mediaQuery = window.matchMedia('(max-width: 768px)');\r\n\r\nconst handleMediaQueryChange = (event) => {\r\n  isRWDMode.value = event.matches;\r\n};\r\n\r\nonMounted(() => {\r\n  mediaQuery.addEventListener('change', handleMediaQueryChange);\r\n  // \r\n  handleMediaQueryChange(mediaQuery);\r\n});\r\n\r\nonUnmounted(() => {\r\n  mediaQuery.removeEventListener('change', handleMediaQueryChange);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.el-table.black-border-table {\r\n  --el-table-border-color: gray;\r\n}\r\n.empty-cell {\r\n  width: 100%;\r\n  height: 1.5rem;\r\n  background-color: #ffffff;\r\n  cursor: pointer;\r\n}\r\n.nonempty-cell {\r\n  cursor: pointer;\r\n}\r\n\r\n/*  el-pagination  */\r\n.el-pagination.is-background .el-pager li:not(.is-disabled).is-active {\r\n  background-color: #67C23A !important; /* Element Plus success color */\r\n  color: #fff !important;\r\n}\r\n\r\n.el-pagination.is-background .el-pager li:hover {\r\n  color: #67C23A; /*  */\r\n}\r\n\r\n.el-pagination.is-background .btn-prev,\r\n.el-pagination.is-background .btn-next {\r\n  background-color: #f4f4f5; /*  */\r\n  color: #606266; /*  */\r\n}\r\n\r\n.el-pagination.is-background .btn-prev:hover,\r\n.el-pagination.is-background .btn-next:hover {\r\n  color: #67C23A; /*  */\r\n}\r\n\r\n.el-pagination__total,\r\n.el-pagination__jump {\r\n  color: #606266; /*  */\r\n}\r\n</style>","import script from \"./OrderSummaryDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrderSummaryDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrderSummaryDialog.vue?vue&type=style&index=0&id=f0683d62&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f0683d62\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"list-customer-info \" >\r\n      <!--  -->\r\n  \r\n\r\n          <div\r\n            class=\"controls-bar  w-full\"\r\n            :style=\"{\r\n              padding: '1rem',\r\n              display: 'flex',\r\n              marginTop:'1rem',\r\n              flexDirection: isRWDMode ? 'column' : 'row',\r\n              alignItems: isRWDMode ? 'center' : 'center',\r\n              borderColor: 'black',\r\n              borderWidth: '1px',\r\n              gap: isRWDMode ? '10px' : '0'\r\n            }\"\r\n          >\r\n              <span \r\n                :style=\"{ \r\n                  marginRight: isRWDMode ? '0' : '1rem' ,\r\n                  \r\n                }\">\r\n                \r\n                </span>\r\n              <div class=\"block\">\r\n                <el-date-picker\r\n                  v-model=\"customerClassDate\"\r\n                  type=\"daterange\"\r\n                  range-separator=\"~\"\r\n                  start-placeholder=\"\"\r\n                  end-placeholder=\"\"\r\n                  :style=\"{ \r\n                     display: 'flex', \r\n                     justifyContent: isRWDMode ? 'center' : 'flex-start', \r\n                     width: isRWDMode ?'100%':'80%', \r\n                     margin: isRWDMode ? '0 auto' : '0' }\"\r\n                />\r\n              </div>\r\n\r\n\r\n              <!--  -->\r\n              <div\r\n                  class=\"search-block\"\r\n                  :style=\"{ display: 'flex', marginLeft: isRWDMode ? '0' : '2rem', flexDirection: isRWDMode ? 'column' : 'row', alignItems: isRWDMode ? 'center' : 'center', gap: '8px' }\"\r\n                >\r\n              <el-select v-model=\"selectedField\" placeholder=\"\" :style=\"{ width: isRWDMode ? '100%' : '9rem' }\">\r\n                <el-option\r\n                  v-for=\"item in searchFields\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                />\r\n              </el-select>\r\n              <span v-if=\"selectedField === 'customerClass'\">  </span>\r\n              <el-input\r\n                v-model=\"searchTerm\"\r\n                :placeholder=\"inputPlaceholder\"\r\n                clearable\r\n                @clear=\"onSearch\"\r\n                @keyup.enter=\"onSearch\"\r\n                :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n              />\r\n              <el-button type=\"primary\" :style=\"{  display: 'flex', justifyContent: isRWDMode ? 'center' : 'flex-start' }\"  @click=\"onSearch\"></el-button>\r\n              </div>\r\n            <div\r\n                class=\"pagination-block\"\r\n                v-if=\"!isRWDMode\"\r\n                :style=\"\r\n                  { \r\n                    display: 'flex', \r\n                    alignItems: isRWDMode ? 'flex-start' : 'center', \r\n                    marginLeft: isRWDMode ? '0' : '2rem', \r\n                    flexDirection: isRWDMode ? 'column' : 'row', \r\n                    gap: isRWDMode ? '10px' : '0' \r\n                  }\r\n                \"\r\n              >\r\n\r\n              <el-text  class=\"mx-1\" type=\"info\"></el-text>\r\n                \r\n              <el-select\r\n                v-model=\"pageSize\"\r\n                placeholder=\"\"\r\n                :style=\"{ width: isRWDMode ? '100%' : '4rem' }\"\r\n                size=\"small\"\r\n              >\r\n                <el-option\r\n                  v-for=\"s in [5,10,15,20,25,30]\"\r\n                  :key=\"s\"\r\n                  :label=\"s\"\r\n                  :value=\"s\"\r\n                />\r\n              </el-select>\r\n\r\n              <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n\r\n              <div :style=\"{ marginLeft: isRWDMode ? '0' : '5rem' }\" >\r\n\r\n                <el-pagination\r\n                  background\r\n                  layout=\"prev, pager, next\"\r\n                  :total=\"filteredCustomers.length\"\r\n                  :page-size=\"pageSize\"\r\n                  v-model:current-page=\"currentPage\"\r\n                  @current-change=\"onPageChange\"\r\n                />\r\n\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n        <!--  FillForm -->\r\n        <div\r\n          ref=\"wrapper\"\r\n          class=\"drag-wrapper\"\r\n          :style=\"{ overflowY: isRWDMode ? 'auto' : 'visible', maxHeight: isRWDMode ? '70rem' : 'none' }\"\r\n        >\r\n\r\n\r\n          <!--  -->\r\n          <el-table\r\n            v-if=\"!isRWDMode && selectedField === 'customerClass'\"\r\n            :data=\"customerClassByAmountData\"\r\n            stripe\r\n            border\r\n            style=\"width: 110%; margin-bottom: 20px;\"\r\n            v-loading=\"isLoadingCustomerClassByAmount\"\r\n          >\r\n            <el-table-column prop=\"customerId\" label=\"ID\" width=\"120\" v-if=\"false\" />\r\n            <el-table-column prop=\"customerShortName\" label=\"\" width=\"150\" />\r\n            <el-table-column prop=\"totalAmount\" label=\"\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                {{ formatAmount(row.totalAmount) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"customerClass\" label=\"\" width=\"120\" />\r\n          </el-table>\r\n\r\n          <el-table\r\n            class=\"black-border-table\"\r\n            :data=\"currentPageData\"\r\n            stripe\r\n            v-if=\"!isRWDMode && selectedField !== 'customerClass' \"\r\n            border\r\n          >\r\n            <el-table-column label=\"\" prop=\"createdDate\" width=\"105\">\r\n              <template #default=\"{ row }\">\r\n                {{ formatDate(row.createdDate) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"responsibleArea\" label=\"\" width=\"115\" />\r\n            <el-table-column prop=\"createdBy\" label=\"\" width=\"85\">\r\n                <template #default=\"{ row }\">\r\n                  <EmpIdToName :employee-id=\"row.createdBy\" />\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n              label=\"\"\r\n              width=\"160\"\r\n            >\r\n              <template #default=\"{ row }\">\r\n                  <el-button  \r\n                    type=\"primary\" \r\n                    size=\"default\" \r\n                    @click=\"openDialog('edit', row)\"\r\n                    :disabled=\"!canEditOrDelete(row)\"\r\n                  >\r\n                    \r\n                  </el-button>\r\n                  <el-button \r\n                    type=\"danger\" \r\n                    size=\"default\" \r\n                    @click=\"openDialog('delete', row)\"\r\n                    :disabled=\"!canEditOrDelete(row)\"\r\n                  >\r\n                    \r\n                  </el-button>\r\n              </template>\r\n            </el-table-column>\r\n              <el-table-column\r\n                label=\"\"\r\n                width=\"115\"\r\n              >\r\n              <template #default=\"{ row }\">\r\n                  <el-button type=\"info\" size=\"default\" @click=\"openDialog('orderSummary', row)\">\r\n                    \r\n                  </el-button>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"\"\r\n                width=\"115\"\r\n            >\r\n                <template #default=\"{ row }\">\r\n                    <div style=\"text-align: center;\">\r\n                      <el-popover\r\n                        placement=\"right\"\r\n                        width=\"700\"\r\n                        trigger=\"click\"\r\n                        :visible=\"customerClassPopoverVisible && activePopoverId === generatePopoverId(row, 1)\"\r\n                        @show=\"() => loadCustomerClassData(customerClassCustomerId, customerClassDate)\"\r\n                        @hide=\"() => { customerClassPopoverVisible = false; activePopoverId = ''; }\"\r\n                      >\r\n                        <el-button\r\n                          type=\"danger\"\r\n                          style=\"height:2rem;width:2rem;position: absolute; top: 5px; right: 5px; cursor: pointer; z-index: 1000;\"\r\n                          size=\"default\"\r\n                          @click=\"toggleCustomerClassPopover(row, 1)\"\r\n                          icon=\"Close\"\r\n                        >\r\n                        </el-button>\r\n                        <div style=\"position: relative;\">\r\n                          \r\n                          <el-table\r\n                            class=\"popover-table-background\"\r\n                            v-loading=\"isLoadingCustomerClass\"\r\n                            :data=\"customerClassData\"\r\n                            border\r\n                            style=\"width: 95%\"\r\n                          >\r\n                            <el-table-column prop=\"\"   label=\"\"  width=\"150\" />\r\n                            <el-table-column prop=\"\"     label=\"\"   width=\"200\">\r\n                              <template #default=\"{ row }\">\r\n                                {{ formatAmount(row.) }}\r\n                              </template>\r\n                            </el-table-column>\r\n                            <el-table-column prop=\"\"   label=\"\"   width=\"150\"/>\r\n                            <el-table-column prop=\"\"   label=\"\" width=\"150\"  />\r\n                          </el-table>\r\n                        </div>\r\n                        <template #reference>\r\n                          <el-button type=\"info\" size=\"default\" @click=\"toggleCustomerClassPopover(row, 1)\">\r\n                            \r\n                          </el-button>\r\n                        </template>\r\n                      </el-popover>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            <!-- <el-table-column prop=\"id\" label=\"ID\" width=\"80\" /> -->\r\n            <el-table-column prop=\"customerId\" label=\"ID\" width=\"90\" />\r\n            <el-table-column prop=\"customerSource\" label=\"\" width=\"90\" />\r\n            <el-table-column prop=\"customerType\" label=\"\" width=\"110\" />\r\n            <el-table-column prop=\"fullCompanyName\" label=\"\" width=\"250\" />\r\n            <el-table-column prop=\"customerName\" label=\"\" width=\"90\" />\r\n            <el-table-column prop=\"shortName\" label=\"\" width=\"120\" />\r\n            <el-table-column prop=\"companyAddress\" label=\"\" width=\"250\" />\r\n            <el-table-column prop=\"taxId\" label=\"\" width=\"100\" />\r\n            <el-table-column prop=\"companyRegion\" label=\"\" width=\"120\" />\r\n            <el-table-column prop=\"contactName\" label=\"\" width=\"120\" />\r\n            <el-table-column prop=\"email\" label=\"\" width=\"200\" />\r\n            <el-table-column prop=\"phoneExtension\" label=\"()\" width=\"120\" />\r\n            <el-table-column prop=\"mobilePhone\" label=\"\" width=\"130\" />\r\n            <el-table-column prop=\"faxNum\" label=\"\" width=\"120\" />\r\n            \r\n            \r\n\r\n          </el-table>\r\n\r\n          <!-- RWD  -->\r\n          <el-table\r\n            v-if=\"isRWDMode\"\r\n            class=\"RWD_List_Table\"\r\n            :data=\"currentPageData\"\r\n            stripe\r\n            border\r\n            style=\"width: 100%; margin-bottom: 20px;margin-right:1rem 0rem 0rem 0rem\"\r\n          >\r\n            <el-table-column type=\"expand\">\r\n              <template #default=\"{ row }\">\r\n                <div style=\"padding: 10px;\">\r\n                  <p v-for=\"([key, value]) in filteredRowData(row)\" :key=\"key\">\r\n                    <strong v-if=\"fieldLabels[key]\">{{ fieldLabels[key] }}:</strong>\r\n                    <span v-else><strong>{{ key }}:</strong></span>\r\n                    \r\n                    <span v-if=\"key === 'createdDate'\">{{ formatDate(value) }}</span>\r\n                    <span v-else-if=\"key === 'createdBy'\"><EmpIdToName :employee-id=\"value\" /></span>\r\n                    <span v-else-if=\"key === 'totalAmount'\">{{ formatAmount(value) }}</span>\r\n                    <span v-else>{{ value }}</span>\r\n                  </p>\r\n                  <div style=\"margin-top: 10px;\">\r\n                    <el-button \r\n                      type=\"primary\" \r\n                      size=\"default\" \r\n                      @click=\"openDialog('edit', row)\"\r\n                      :disabled=\"!canEditOrDelete(row)\"\r\n                    >\r\n                      \r\n                    </el-button>\r\n                    <el-button \r\n                      type=\"danger\" \r\n                      size=\"default\" \r\n                      @click=\"openDialog('delete', row)\"\r\n                      :disabled=\"!canEditOrDelete(row)\"\r\n                    >\r\n                      \r\n                    </el-button>\r\n                    <el-button type=\"info\" size=\"default\" @click=\"openDialog('orderSummary', row)\">\r\n                      \r\n                    </el-button>\r\n                    <el-popover\r\n                      placement=\"right\"\r\n                      width=\"700\"\r\n                      trigger=\"click\"\r\n                      :visible=\"customerClassPopoverVisible && activePopoverId === generatePopoverId(row, 2)\"\r\n                      @show=\"() => loadCustomerClassData(customerClassCustomerId, customerClassDate)\"\r\n                      @hide=\"() => { customerClassPopoverVisible = false; activePopoverId = ''; }\"\r\n                    >\r\n                      <el-button\r\n                        type=\"danger\"\r\n                        style=\"height:2rem;width:2rem;position: absolute; top: 5px; right: 5px; cursor: pointer; z-index: 1000;\"\r\n                        size=\"default\"\r\n                        @click=\"toggleCustomerClassPopover(row, 2)\"\r\n                        icon=\"Close\"\r\n                      >\r\n                      </el-button>\r\n                      <div style=\"position: relative;\">\r\n                        <el-table\r\n                          class=\"popover-table-background\"\r\n                          v-loading=\"isLoadingCustomerClass\"\r\n                          :data=\"customerClassData\"\r\n                          border\r\n                          style=\"width: 95%\"\r\n                        >\r\n                          <el-table-column prop=\"\" label=\"\" width=\"150\" />\r\n                          <el-table-column prop=\"\" label=\"\" width=\"200\">\r\n                            <template #default=\"{ row }\">\r\n                              {{ formatAmount(row.) }}\r\n                            </template>\r\n                          </el-table-column>\r\n                          <el-table-column prop=\"\" label=\"\" width=\"150\"/>\r\n                          <el-table-column prop=\"\" label=\"\" width=\"150\" />\r\n                        </el-table>\r\n                      </div>\r\n                      <template #reference>\r\n                        <el-button type=\"info\" size=\"default\" @click=\"toggleCustomerClassPopover(row, 2)\">\r\n                          \r\n                        </el-button>\r\n                      </template>\r\n                    </el-popover>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"customerName\" label=\"\" width=\"120\" />\r\n            <el-table-column prop=\"shortName\" label=\"\" width=\"120\" />\r\n            <el-table-column prop=\"mobilePhone\" label=\"\" width=\"130\" />\r\n          </el-table>\r\n      </div>\r\n\r\n      <el-dialog\r\n          :title=\"actionLabel[dialogAction] + ' '\"\r\n          v-model=\"dialogVisible\"\r\n          width=\"600px\"\r\n          top=\"3vh\"\r\n        >\r\n      <!--  Error Result -->\r\n      <el-result\r\n        v-if=\"dialogAction === 'delete'\"\r\n        icon=\"error\"\r\n        title=\"\"\r\n        sub-title=\"\"\r\n        style=\"padding-top:0\"\r\n      />\r\n\r\n      <!--  Warning Result -->\r\n      <el-result\r\n        v-else\r\n        icon=\"warning\"\r\n        title=\"\"\r\n        sub-title=\"\"\r\n        style=\"padding-top:0\"\r\n      />\r\n\r\n      <el-form\r\n        :model=\"dialogRow\"\r\n        label-width=\"120px\"\r\n      >\r\n        <el-form-item\r\n          v-for=\"key in dialogFields\"\r\n          :key=\"key\"\r\n          :label=\"fieldLabels[key] || key\"\r\n          style=\"margin-bottom: 0;\"\r\n        >\r\n          <template #default>\r\n            <!--  -->\r\n            <el-input\r\n              v-if=\"dialogAction === 'edit' && editableFields.includes(key)\"\r\n              v-model=\"dialogRow[key]\"\r\n              :disabled=\"key === 'customerId'\"\r\n            />\r\n\r\n            <!--   -->\r\n            <span v-else-if=\"key === 'createdDate'\">\r\n              {{ formatDate(dialogRow[key]) }}\r\n            </span>\r\n\r\n            <!--   -->\r\n            <span v-else-if=\"key === 'createdBy'\">\r\n              <EmpIdToName :employee-id=\"dialogRow[key]\" />\r\n            </span>\r\n\r\n            <!--  -->\r\n            <span v-else>\r\n              {{ dialogRow[key] }}\r\n            </span>\r\n          </template>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"dialogAction === 'edit'\"\r\n          @click=\"confirmAction\"\r\n        >\r\n          \r\n        </el-button>\r\n        <el-button\r\n          type=\"danger\"\r\n          v-else\r\n          @click=\"confirmAction\"\r\n        >\r\n          \r\n        </el-button>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  Dialog -->\r\n    <OrderSummaryDialog\r\n      :visible=\"orderSummaryDialogVisible\"\r\n      @update:visible=\"orderSummaryDialogVisible = $event\"\r\n      :customer-id=\"dialogRow.customerId\"\r\n      :fullCompany-name=\"dialogRow.fullCompanyName\"\r\n      :get-formatted-date-range=\"getFormattedDateRange(customerClassDate).formattedStart + '_' + getFormattedDateRange(customerClassDate).formattedEnd\"\r\n    />\r\n\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted, computed, onUnmounted,watch } from 'vue';\r\n  import CRMService from '@/service/CRMService';\r\n  import EmpIdToName from '@/components/Common/IdToName/Employee-IdToName.vue'\r\n  import OrderSummaryDialog from '@/components/CustomerInfo/CustomerInfo/OrderSummaryDialog.vue'; // \r\n  import emitter from '@/eventBus';      \r\n  import { ElMessage } from 'element-plus';\r\n  import {useUserStore} from '@/stores/user.js'\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== 'number') {\r\n      return amount;\r\n    }\r\n    return amount.toLocaleString('en-US');\r\n  };\r\n  \r\n  const userStore = useUserStore();\r\nconst customers = ref([]);\r\nconst customerClassDate = ref([]); //  onMounted \r\nconst isRWDMode = ref(false); //  RWD \r\nconst isLoadingMore = ref(false); // lazy load \r\nconst loadedItemCount = ref(30); // \r\nconst wrapper = ref(null); //  wrapper ref\r\n\r\nconst actionLabel = {\r\n  edit: '',\r\n  delete: '',\r\n  orderSummary: ''\r\n}\r\n\r\n  const fieldLabels = {\r\n    id:               '',\r\n    customerId:       'ID',\r\n    customerName:     '',\r\n    fullCompanyName:  '',\r\n    shortName:        '',\r\n    companyAddress:   '',\r\n    companyRegion:    '',\r\n    contactName:      '',\r\n    customerType:     '',\r\n    email:            '',\r\n    faxNum:           '',\r\n    phoneExtension:   '',\r\n    mobilePhone:      '',\r\n    taxId:            '',\r\n    createdDate:      '',\r\n    createdBy:        '',\r\n    customerSource:   '',\r\n    responsibleArea:  ''\r\n  }\r\n\r\n  // \r\n  const searchFields = [\r\n    { label: '', value: 'shortName' },\r\n    { label: '', value: 'customerName' },\r\n    { label: '', value: 'fullCompanyName' },\r\n    { label: '', value: 'companyAddress' },\r\n    { label: '', value: 'companyRegion' },\r\n    { label: '', value: 'contactName' },\r\n    { label: '', value: 'customerType' },\r\n    { label: '', value: 'customerSource' },\r\n    { label: '', value: 'responsibleArea' },\r\n    { label: '', value: 'createdDate' }, //  createdDate \r\n    { label: '', value: 'customerClass' }\r\n  ];\r\n  const selectedField = ref(searchFields[0].value);\r\n  const searchTerm = ref('');\r\n\r\n  const inputPlaceholder = computed(() => {\r\n    if (selectedField.value === 'customerClass') {\r\n      return '';\r\n    } else if (selectedField.value === 'createdDate') {\r\n      return ' (YYYY-MM-DD)';\r\n    }\r\n    return '';\r\n  });\r\n  \r\n  // \r\n  const pageSize    = ref(10)\r\n  const currentPage = ref(1);\r\n  \r\n  // \r\nconst loadCustomers = async () => {\r\n  try {\r\n    // const res = await CRMService.getCustomerForms();\r\n    const res = await CRMService.getAllCustomerForms();\r\n\r\n    \r\n    //  res.data  [{, createdDate: '2025-05-12T08:30:00Z'}, ]\r\n    console.log(res.data);\r\n    customers.value = res.data\r\n      .slice()  // \r\n      .sort((a, b) =>\r\n        new Date(b.createdDate) - new Date(a.createdDate)\r\n      );\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n};\r\n\r\nconst customerClassByAmountData = ref([]);\r\n\r\nconst isLoadingCustomerClassByAmount = ref(false);\r\n\r\nconst editableFields = Object.keys(fieldLabels)\r\n  .filter(key => !['id', 'createdDate', 'createdBy'].includes(key))\r\n\r\nfunction openDialog(action, row) {\r\n  // \r\n  if ((action === 'edit' || action === 'delete') && row && !canEditOrDelete(row)) {\r\n    ElMessage.warning('');\r\n    return;\r\n  }\r\n  \r\n  dialogAction.value = action\r\n  // \r\n  dialogRow.value = { ...row }\r\n\r\n  if (action === 'orderSummary') {\r\n    if (isInputCustomerClassDate.value) {\r\n      ElMessage.warning('');\r\n      return;\r\n    }\r\n    orderSummaryDialogVisible.value = true;\r\n  } else {\r\n    dialogVisible.value = true;\r\n  }\r\n}\r\n\r\n\r\n\r\n//  state & function\r\nconst dialogVisible = ref(false)\r\nconst dialogRow     = ref({})\r\nconst dialogFields = computed(() =>\r\n  Object.keys(fieldLabels)\r\n    .filter(key => key !== 'id' && key !== 'hasCompletedDeal')\r\n);\r\nconst dialogAction  = ref('')  // 'edit', 'delete', or 'orderSummary'\r\n\r\n//  Dialog \r\nconst orderSummaryDialogVisible = ref(false);\r\n\r\n//  Popover \r\nconst customerClassPopoverVisible = ref(false);\r\nconst customerClassCustomerId = ref('');\r\nconst customerClassData = ref([]);\r\nconst isLoadingCustomerClass = ref(false);\r\nconst activePopoverId = ref(''); //  popover\r\nconst isInputCustomerClassDate =computed(()=>{\r\n  return !customerClassDate.value || customerClassDate.value.length !== 2\r\n})\r\n\r\n//  popover ID\r\nfunction generatePopoverId(row, tableIndex) {\r\n  return `${row.customerId}_${row.id || row.index || Math.random()}_${tableIndex}`;\r\n}\r\n\r\nfunction toggleCustomerClassPopover(row, tableIndex = 0) {\r\n  // console.log(\"toggleCustomerClassPopover:\",row);\r\n  if (isInputCustomerClassDate.value) {\r\n    ElMessage.warning('');\r\n    return;\r\n  }\r\n  \r\n  const popoverId = generatePopoverId(row, tableIndex);\r\n  \r\n  //  popover\r\n  if (activePopoverId.value === popoverId) {\r\n    activePopoverId.value = '';\r\n    customerClassPopoverVisible.value = false;\r\n  } else {\r\n    //  popover\r\n    customerClassCustomerId.value = row.customerId;\r\n    activePopoverId.value = popoverId;\r\n    customerClassPopoverVisible.value = true;\r\n  }\r\n}\r\n\r\n\r\n// \r\nasync function loadCustomerClassData(customerId, dateRange) {\r\n  if (!customerId || isInputCustomerClassDate.value) return\r\n\r\n  isLoadingCustomerClass.value = true\r\n  try {\r\n    //   helper\r\n    const { formattedStart, formattedEnd } = getFormattedDateRange(dateRange)\r\n\r\n    const res = await CRMService.getCustomerClass(\r\n      customerId,\r\n      formattedStart,\r\n      formattedEnd\r\n    )\r\n    console.log(res.data)\r\n    customerClassData.value = Array.isArray(res.data) ? res.data : [res.data]\r\n  }\r\n  catch (err) {\r\n    ElMessage.error(': ' + err.message)\r\n    console.error(err)\r\n    customerClassData.value = []\r\n  }\r\n  finally {\r\n    isLoadingCustomerClass.value = false\r\n  }\r\n}\r\n\r\n\r\nfunction getFormattedDateRange(dateRange) {\r\n  const [startDate, endDate] = dateRange\r\n  return {\r\n    formattedStart: startDate ? formatToYMDInt(startDate) : null,\r\n    formattedEnd:   endDate   ? formatToYMDInt(endDate)   : null\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nasync function confirmAction() {\r\n  try {\r\n    if (dialogAction.value === 'edit') {\r\n      await CRMService.updateCustomer(dialogRow.value.id, dialogRow.value);\r\n      ElMessage.success('');\r\n    } else {\r\n      await CRMService.deleteCustomer(dialogRow.value.id);\r\n      ElMessage.success('');\r\n    }\r\n\r\n    await loadCustomers();\r\n  } catch (err) {\r\n    console.error(err);\r\n    ElMessage.error('' + (err.response?.data || err.message));\r\n  } finally {\r\n    dialogVisible.value = false;\r\n  }\r\n}\r\n\r\n  \r\n  // \r\n  const filteredCustomers = computed(() => {\r\n    const term = searchTerm.value.trim().toLowerCase();\r\n    if (!term) return customers.value;\r\n\r\n    if (selectedField.value === 'customerClass') {\r\n      return customerClassByAmountData.value;\r\n    } else if (selectedField.value === 'createdDate') {\r\n      return customers.value.filter(item => {\r\n        const date = formatDate(item.createdDate);\r\n        return date.toLowerCase().includes(term);\r\n      });\r\n    } else {\r\n      return customers.value.filter(item => {\r\n        const value = item[selectedField.value];\r\n        return value && value.toString().toLowerCase().includes(term);\r\n      });\r\n    }\r\n  });\r\n  \r\n  // \r\nconst currentPageData = computed(() => {\r\n  if (isRWDMode.value) {\r\n    return filteredCustomers.value.slice(0, loadedItemCount.value); // RWD  loadedItemCount \r\n  } else {\r\n    const start = (currentPage.value - 1) * pageSize.value;\r\n    return filteredCustomers.value.slice(start, start + pageSize.value); //  RWD \r\n  }\r\n});\r\n\r\n// \r\nconst handleScroll = () => {\r\n  if (isRWDMode.value && wrapper.value) {\r\n    const { scrollTop, scrollHeight, clientHeight } = wrapper.value;\r\n    if (scrollTop + clientHeight >= scrollHeight - 50 && !isLoadingMore.value) {\r\n      loadMore();\r\n    }\r\n  }\r\n};\r\n\r\n  // \r\n  const loadMore = () => {\r\n    if (loadedItemCount.value < filteredCustomers.value.length) {\r\n      isLoadingMore.value = true;\r\n      setTimeout(() => { // \r\n        loadedItemCount.value += 30; // 30\r\n        isLoadingMore.value = false;\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  // \r\nconst onSearch = async () => {\r\n  if (isRWDMode.value) {\r\n    loadedItemCount.value = 30; // RWD \r\n  }\r\n  // else {\r\n  //   currentPage.value = 1; //  RWD \r\n  // }\r\n\r\n  if (selectedField.value === 'customerClass') {\r\n    const amount = parseFloat(searchTerm.value.trim());\r\n    if (isNaN(amount)) {\r\n      ElMessage.warning('');\r\n      customerClassByAmountData.value = [];\r\n      return;\r\n    }\r\n\r\n    try {\r\n      isLoadingCustomerClassByAmount.value = true\r\n\r\n      \r\n      if (isInputCustomerClassDate.value) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n      const { formattedStart, formattedEnd } = getFormattedDateRange(customerClassDate.value)\r\n\r\n      const res = await CRMService.getCustomerClassByAmount(\r\n        amount,\r\n        formattedStart,\r\n        formattedEnd\r\n      )\r\n      customerClassByAmountData.value = Array.isArray(res.data) ? res.data : [res.data]\r\n      console.log(res.data)\r\n    }\r\n    catch (error) {\r\n      ElMessage.error('' + error.message)\r\n      console.error(error)\r\n      customerClassByAmountData.value = []\r\n    }\r\n    finally {\r\n      isLoadingCustomerClassByAmount.value = false\r\n    }\r\n  }\r\n  else {\r\n    // createdDate  loadCustomers\r\n    await loadCustomers()\r\n  }\r\n}\r\n  \r\n  // \r\n  const onPageChange = (page) => {\r\n    currentPage.value = page;\r\n  };\r\n  \r\n  const formatDate = (date) => {\r\n  if (!date) return '';\r\n  const d = new Date(date);\r\n  const year = d.getFullYear();\r\n  const month = String(d.getMonth() + 1).padStart(2, '0');\r\n  const day = String(d.getDate()).padStart(2, '0');\r\n  return `${year}/${month}/${day}`;\r\n};\r\n  \r\nonMounted(() => {\r\n  loadCustomers();\r\n  emitter.on('customer-created', loadCustomers);\r\n\r\n  //  customerClassDate 1~\r\n  const today = new Date();\r\n  const oneMonthAgo = new Date();\r\n  oneMonthAgo.setMonth(today.getMonth() - 1);\r\n  const startOfMonthAgo = new Date(oneMonthAgo.getFullYear(), oneMonthAgo.getMonth(), oneMonthAgo.getDate(), 0, 0, 0);\r\n  const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 23, 59, 59);\r\n  customerClassDate.value = [startOfMonthAgo, endOfDay];\r\n\r\n  //  RWD \r\n  mediaQuery.addEventListener('change', handleMediaQueryChange);\r\n  //  RWD \r\n  handleMediaQueryChange(mediaQuery);\r\n\r\n  //  isRWDMode \r\n  if (isRWDMode.value && wrapper.value) {\r\n    wrapper.value.addEventListener('scroll', handleScroll);\r\n  }\r\n});\r\n\r\nonUnmounted(() => {\r\n  emitter.off('customer-created', loadCustomers);\r\n  mediaQuery.removeEventListener('change', handleMediaQueryChange);\r\n  //  RWD  wrapper \r\n  if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll);\r\n  }\r\n});\r\n\r\n// \r\nwatch(isRWDMode, (newVal, oldVal) => {\r\n  if (newVal === oldVal) return; // \r\n\r\n  if (wrapper.value) {\r\n    // \r\n    wrapper.value.removeEventListener('scroll', handleScroll);\r\n    if (newVal) { //  RWD \r\n      wrapper.value.addEventListener('scroll', handleScroll);\r\n    }\r\n  }\r\n});\r\n\r\n//  RWD \r\nconst mediaQuery = window.matchMedia('(max-width: 768px)');\r\n\r\nconst handleMediaQueryChange = (event) => {\r\n  isRWDMode.value = event.matches;\r\n};\r\n\r\nconst filteredRowData = computed(() => (row) => {\r\n  return Object.entries(row).filter(([key]) => key !== 'isShow' && key !== 'hasCompletedDeal');\r\n});\r\n\r\n//  formatToYMDInt  <script setup> \r\nfunction formatToYMDInt(d) {\r\n  const y = d.getFullYear();\r\n  const m = String(d.getMonth() + 1).padStart(2, '0');\r\n  const dd = String(d.getDate()).padStart(2, '0');\r\n  return parseInt(`${y}${m}${dd}`, 10);\r\n}\r\n\r\n// \r\nconst canEditOrDelete = (row) => {\r\n  return row.createdBy === userStore.userId;\r\n}\r\n</script>\r\n\r\n  <style scoped>\r\n  .list-customer-info {\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    margin: 0rem 2rem 0rem 3rem ;\r\n  }\r\n\r\n  .controls-bar{\r\n    margin: 1rem 0rem 1rem 0rem \r\n  }\r\n\r\n  .popover-table-background .el-table__row {\r\n    background-color: #6bfff8 !important;\r\n  }\r\n\r\n  .el-table.black-border-table {\r\n    --el-table-border-color: black;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .list-customer-info {\r\n      width:19.5rem;\r\n      background: #fff;\r\n      border-radius: 4px;\r\n      margin: 0rem 2rem 0rem 3rem ;\r\n    }\r\n  }\r\n\r\n  </style>\r\n  \r\n\r\n","import script from \"./ListCustomerInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListCustomerInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListCustomerInfo.vue?vue&type=style&index=0&id=6d292e6a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6d292e6a\"]])\n\nexport default __exports__","import script from \"./CustomerInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomerInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref, onMounted } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\n\r\nexport function useSalesEmployeeData() {\r\n  const salesEmployees = ref([]);\r\n  const loading = ref(true);\r\n  const error = ref(null);\r\n\r\n  const fetchSalesEmployeeData = async () => {\r\n    try {\r\n      const res = await CRMService.getSalesEmployeeData();\r\n      salesEmployees.value = res.data;\r\n      console.log('', res.data);\r\n    } catch (err) {\r\n      error.value = err;\r\n      console.error('', err);\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  onMounted(fetchSalesEmployeeData);\r\n\r\n  return {\r\n    salesEmployees,\r\n    loading,\r\n    error,\r\n    fetchSalesEmployeeData,\r\n  };\r\n}","<template>\r\n  <div class=\"fill-customer-tracking\">\r\n    <el-form :model=\"customerTrackingForm\" label-width=\"4.5rem\" :rules=\"rules\" ref=\"formRef\">\r\n      <el-row :gutter=\"20\">\r\n        <!--  -->\r\n        <el-col :span=\"6\" >\r\n          <el-form-item label=\"\" label-width=\"5rem\"  prop=\"fillDate\">\r\n            <el-date-picker\r\n              v-model=\"customerTrackingForm.fillDate\"\r\n              type=\"date\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%;\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled-date=\"disabledDate\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"  label-width=\"5rem\"   prop=\"salesperson\">\r\n            <el-select\r\n              v-model=\"customerTrackingForm.salesperson\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%;\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in salesEmployees\"\r\n                :key=\"item.id\"\r\n                :label=\"item.titleName + ' - ' + item.name\"\r\n                :value=\"item.name\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"    label-width=\"5rem\"  prop=\"customerSource\">\r\n            <el-select\r\n              v-model=\"customerTrackingForm.customerSource\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%;\"\r\n            >\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n            </el-select>\r\n            <el-input\r\n              v-if=\"customerTrackingForm.customerSource === ''\"\r\n              v-model=\"customerTrackingForm.customerSourceOther\"\r\n              placeholder=\"\"\r\n              style=\"margin-top: 5px; width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"   label-width=\"5rem\"  prop=\"customerType\">\r\n            <el-select\r\n              v-model=\"customerTrackingForm.customerType\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%;\"\r\n            >\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n              <el-option label=\"\" value=\"\" />\r\n            </el-select>\r\n            <el-input\r\n              v-if=\"customerTrackingForm.customerType === ''\"\r\n              v-model=\"customerTrackingForm.customerTypeOther\"\r\n              placeholder=\"\"\r\n              style=\"margin-top: 5px; width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"   label-width=\"5rem\"  prop=\"customerName\">\r\n            <el-input\r\n              v-model=\"customerTrackingForm.customerName\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"  label-width=\"5rem\"  prop=\"contactPerson\">\r\n            <el-input\r\n              v-model=\"customerTrackingForm.contactPerson\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"\"  label-width=\"5rem\"   prop=\"contactPhone\">\r\n            <el-input\r\n              v-model=\"customerTrackingForm.contactPhone\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"6\">\r\n          <el-form-item   >\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"submitForm\"\r\n              style=\"width: 50%;\"\r\n            ></el-button>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\nimport { ElMessage } from 'element-plus';\r\nimport { useSalesEmployeeData } from '@/components/CustomerInfo/useSalesEmployeeData';\r\n\r\nconst emit = defineEmits(['formSubmitted']);\r\n\r\nconst customerTrackingForm = ref({\r\n  fillDate: new Date().toISOString().split('T')[0], // \r\n  salesperson: '',\r\n  customerSource: '',\r\n  customerSourceOther: '', // \r\n  customerType: '',\r\n  customerTypeOther: '', // \r\n  customerName: '',\r\n  contactPerson: '',\r\n  contactPhone: '',\r\n});\r\n\r\n// \r\nconst rules = {\r\n  fillDate: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  salesperson: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  customerSource: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  customerSourceOther: [\r\n    {\r\n      validator: (rule, value) => {\r\n        if (customerTrackingForm.value.customerSource === '' && !value) {\r\n          return new Error('');\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  customerType: [\r\n    { required: true, message: '', trigger: 'change' }\r\n  ],\r\n  customerTypeOther: [\r\n    {\r\n      validator: (rule, value) => {\r\n        if (customerTrackingForm.value.customerType === '' && !value) {\r\n          return new Error('');\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  customerName: [\r\n    { required: true, message: '', trigger: 'blur' }\r\n  ],\r\n  contactPerson: [\r\n    { required: true, message: '', trigger: 'blur' }\r\n  ],\r\n  contactPhone: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n    {\r\n      pattern: /^[0-9\\-#]+$/,\r\n      message: '',\r\n      trigger: 'blur'\r\n    }\r\n  ]\r\n};\r\nconst formRef = ref();\r\n\r\nconst submitForm = () => {\r\n  formRef.value.validate(async valid => {\r\n    if (!valid) {\r\n      // ElMessage.error(''); // \r\n      return;\r\n    }\r\n    try {\r\n      const formToSubmit = { ...customerTrackingForm.value };\r\n      if (formToSubmit.customerSource === '') {\r\n        formToSubmit.customerSource = formToSubmit.customerSourceOther;\r\n      }\r\n      if (formToSubmit.customerType === '') {\r\n        formToSubmit.customerType = formToSubmit.customerTypeOther;\r\n      }\r\n      await CRMService.createCustomerTracking(formToSubmit);\r\n      ElMessage.success('');\r\n      // \r\n      customerTrackingForm.value = {\r\n        fillDate: new Date().toISOString().split('T')[0],\r\n        salesperson: '',\r\n        customerSource: '',\r\n        customerSourceOther: '',\r\n        customerType: '',\r\n        customerTypeOther: '',\r\n        customerName: '',\r\n        contactPerson: '',\r\n        contactPhone: ''\r\n      };\r\n      formRef.value.clearValidate();\r\n      emit('formSubmitted'); // \r\n    } catch (error) {\r\n      console.error('', error);\r\n      ElMessage.error('');\r\n    }\r\n  });\r\n};\r\nconst { salesEmployees, fetchSalesEmployeeData } = useSalesEmployeeData();\r\n\r\nconst disabledDate = (time) => {\r\n  return time.getTime() > Date.now();\r\n};\r\n\r\nonMounted(async () => {\r\n  await fetchSalesEmployeeData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.fill-customer-tracking {\r\n  /* 1px   */\r\n  border: 1px solid #000;\r\n\r\n  /* margin 3rem 3rem 3rem 5rem */\r\n  margin: 5rem 3rem 0rem 3rem;\r\n\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  padding: 2rem;\r\n}\r\n</style>","import script from \"./Fill_CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Fill_CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Fill_CustomerTracking.vue?vue&type=style&index=0&id=296cc7d6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-296cc7d6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"list-customer-info\" style=\"margin-left:3rem; margin-right:2rem\">\r\n    <div\r\n      ref=\"wrapper\"\r\n      class=\"drag-wrapper\"\r\n    >\r\n      <div\r\n        class=\"controls-bar mb-4 w-full\"\r\n        style=\"\r\n          padding:1rem ;\r\n          display: flex;\r\n          align-items: center;\r\n          border-color: black;\r\n          border-width: 1px;\r\n        \"\r\n      >\r\n\r\n        <div\r\n          class=\"date-range-block\"\r\n          style=\"display: flex; align-items: center; margin-left: 1rem;\"\r\n        >\r\n\r\n          <span style=\"margin-right:1rem\"> </span>\r\n          <div class=\"block\">\r\n            <el-date-picker\r\n              v-model=\"customerClassDate\"\r\n              type=\"daterange\"\r\n              range-separator=\"~\"\r\n              start-placeholder=\"\"\r\n              end-placeholder=\"\"\r\n              style=\"width: 17rem;\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <!--  -->\r\n        <div\r\n          class=\"search-block\"\r\n          style=\"display: flex;  margin-left:2rem;align-items: center; gap: 8px;\"\r\n        >\r\n          <el-select v-model=\"selectedField\" placeholder=\"\" style=\"width: 9rem;\">\r\n            <el-option\r\n              v-for=\"item in searchFields\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n          <el-input\r\n            v-model=\"searchTerm\"\r\n            :placeholder=\"inputPlaceholder\"\r\n            clearable\r\n            @clear=\"onSearch\"\r\n            @keyup.enter=\"onSearch\"\r\n            style=\"width: 200px;\"\r\n          />\r\n          <el-button type=\"primary\" @click=\"onSearch\"></el-button>\r\n        </div>\r\n\r\n        <div\r\n          class=\"pagination-block\"\r\n          style=\"display: flex; align-items: center; margin-left: 1rem;\"\r\n        >\r\n          <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n          <el-select\r\n            v-model=\"pageSize\"\r\n            placeholder=\"\"\r\n            style=\"width: 4rem;\"\r\n            size=\"small\"\r\n          >\r\n            <el-option\r\n              v-for=\"s in [5,10,15,20,25,30]\"\r\n              :key=\"s\"\r\n              :label=\"s\"\r\n              :value=\"s\"\r\n            />\r\n          </el-select>\r\n          <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n          <div style=\"margin-left:5rem\">\r\n            <el-pagination\r\n              background\r\n              layout=\"prev, pager, next\"\r\n              :total=\"filteredCustomerTracking.length\"\r\n              :page-size=\"pageSize\"\r\n              v-model:current-page=\"currentPage\"\r\n              @current-change=\"onPageChange\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <el-table\r\n        class=\"black-border-table\"\r\n        :data=\"currentPageData\"\r\n        stripe\r\n        border\r\n      >\r\n\r\n        <!--  -->\r\n        <el-table-column label=\"\" width=\"150\" fixed=\"left\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              v-if=\"editingRowId !== row.id\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              @click=\"editRow(row)\"\r\n            ></el-button>\r\n            <div v-else>\r\n\r\n              <el-button\r\n                type=\"success\"\r\n                size=\"small\"\r\n                @click=\"doneEdit(row)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button\r\n                type=\"info\"\r\n                size=\"small\"\r\n                @click=\"closeEdit()\"\r\n              >\r\n               \r\n              </el-button>\r\n            </div>\r\n            <el-button\r\n              v-if=\"editingRowId !== row.id\"\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              @click=\"deleteRow(row)\"\r\n            ></el-button>\r\n          </template>\r\n        </el-table-column>\r\n\r\n\r\n\r\n        <el-table-column prop=\"fillDate\" label=\"\" width=\"140\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ formatDate(row.fillDate) }}</span>\r\n            <el-date-picker\r\n              v-else\r\n              style=\"width:7rem\"\r\n              v-model=\"row.fillDate\"\r\n              type=\"date\"\r\n              placeholder=\"\"\r\n              size=\"small\"\r\n              \r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"salesPerson\" label=\"\" width=\"130\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.salesPerson }}</span>\r\n            <el-select v-else v-model=\"row.salesPerson\" placeholder=\"\" size=\"small\">\r\n              <el-option\r\n                v-for=\"item in salesEmployees\"\r\n                :key=\"item.id\"\r\n                :label=\"item.titleName + ' - ' + item.name\"\r\n                :value=\"item.name\"\r\n              />\r\n            </el-select>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"customerSource\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.customerSource }}</span>\r\n            <div v-else>\r\n              <el-select v-model=\"row.customerSource\" placeholder=\"\" size=\"small\">\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n              </el-select>\r\n              <el-input\r\n                v-if=\"row.customerSource === ''\"\r\n                v-model=\"row.customerSourceOther\"\r\n                placeholder=\"\"\r\n                style=\"margin-top: 5px;\"\r\n                size=\"small\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"customerType\" label=\"\" width=\"120\" >\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.customerType }}</span>\r\n            <div v-else>\r\n              <el-select v-model=\"row.customerType\" placeholder=\"\" size=\"small\">\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"\" />\r\n              </el-select>\r\n              <el-input\r\n                v-if=\"row.customerType === ''\"\r\n                v-model=\"row.customerTypeOther\"\r\n                placeholder=\"\"\r\n                style=\"margin-top: 5px;\"\r\n                size=\"small\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"customerName\" label=\"\" width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.customerName }}</span>\r\n            <el-input v-else v-model=\"row.customerName\" size=\"small\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contactPerson\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.contactPerson }}</span>\r\n            <el-input v-else v-model=\"row.contactPerson\" size=\"small\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contactPhone\" label=\"\" width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            <span v-if=\"editingRowId !== row.id\">{{ row.contactPhone }}</span>\r\n            <el-input v-else v-model=\"row.contactPhone\" size=\"small\" />\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\nimport eventBus from '@/eventBus';\r\nimport { useSalesEmployeeData } from '@/components/CustomerInfo/useSalesEmployeeData';\r\nimport { ElMessageBox, ElMessage } from 'element-plus';\r\n\r\nconst customerTrackingData = ref([]);\r\nconst searchTerm = ref('');\r\nconst selectedField = ref('customerName'); // \r\nconst editingRowId = ref(null); //  ID\r\nconst customerClassDate = ref([]); // \r\n\r\n// \r\nconst searchFields = [\r\n  { label: '', value: 'customerName' },\r\n  { label: '', value: 'salesPerson' },\r\n  { label: '', value: 'customerSource' },\r\n  { label: '', value: 'customerType' },\r\n  { label: '', value: 'contactPerson' },\r\n  { label: '', value: 'contactPhone' },\r\n];\r\n\r\nconst inputPlaceholder = computed(() => {\r\n  if (selectedField.value === 'fillDate') {\r\n    return ' (YYYY-MM-DD)';\r\n  }\r\n  return '';\r\n});\r\n\r\n// \r\nconst pageSize = ref(10);\r\nconst currentPage = ref(1);\r\n\r\n// \r\nconst loadCustomerTracking = async () => {\r\n  try {\r\n    const res = await CRMService.getAllCustomerTracking();\r\n    // console.log(res.data);\r\n    customerTrackingData.value = res.data.sort((a, b) =>\r\n      new Date(b.fillDate) - new Date(a.fillDate)\r\n    );\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n};\r\n\r\n// \r\nconst filteredCustomerTracking = computed(() => {\r\n\r\n  const list = customerTrackingData.value;\r\n  const term = searchTerm.value.trim().toLowerCase();\r\n  const [startDate, endDate] = customerClassDate.value || [];\r\n\r\n  return list\r\n    // 1. \r\n    .filter(item => {\r\n      if (!startDate || !endDate) return true;\r\n      const d = new Date(item.fillDate);\r\n      //  00:00  23:59 \r\n      const start = new Date(startDate);\r\n      start.setHours(0,0,0,0);\r\n      const end   = new Date(endDate);\r\n      end.setHours(23,59,59,999);\r\n      return d >= start && d <= end;\r\n    })\r\n    // 2. \r\n    .filter(item => {\r\n      if (!term) return true;\r\n      const value = item[selectedField.value];\r\n      if (selectedField.value === 'fillDate') {\r\n        return formatDate(item.fillDate).toLowerCase().includes(term);\r\n      }\r\n      return value && value.toString().toLowerCase().includes(term);\r\n    });\r\n});\r\n\r\n// \r\nconst editRow = (row) => {\r\n  editingRowId.value = row.id;\r\n};\r\n\r\nconst closeEdit = async()=>{\r\n  editingRowId.value = null; \r\n}\r\n\r\nconst doneEdit = async (row) => {\r\n  try {\r\n    // \r\n    if (row.customerSource === '' && !row.customerSourceOther) {\r\n      ElMessage.error('');\r\n      return; // \r\n    }\r\n    if (row.customerType === '' && !row.customerTypeOther) {\r\n      ElMessage.error('');\r\n      return; // \r\n    }\r\n\r\n    const updatedRow = { ...row };\r\n\r\n    // \r\n    if (updatedRow.fillDate instanceof Date) {\r\n      updatedRow.fillDate = updatedRow.fillDate.toISOString().split('T')[0]; // 'YYYY-MM-DD'\r\n    }\r\n\r\n    // \r\n    if (updatedRow.customerSource === '' && updatedRow.customerSourceOther) {\r\n      updatedRow.customerSource = updatedRow.customerSourceOther;\r\n    }\r\n    // \r\n    if (updatedRow.customerType === '' && updatedRow.customerTypeOther) {\r\n      updatedRow.customerType = updatedRow.customerTypeOther;\r\n    }\r\n\r\n    await CRMService.updateCustomerTracking(row.id, updatedRow);\r\n    ElMessage.success('');\r\n    editingRowId.value = null; // \r\n    await loadCustomerTracking(); // \r\n  } catch (err) {\r\n    ElMessage.error('');\r\n    console.error('', err);\r\n  }\r\n};\r\n\r\n\r\n\r\n// \r\nconst deleteRow = (row) => {\r\n  ElMessageBox.confirm(\r\n    `${row.customerName}`,\r\n    '',\r\n    { type: 'warning' }\r\n  ).then(async () => {\r\n    try {\r\n      await CRMService.deleteCustomerTracking(row.id);\r\n      ElMessage.success('');\r\n      // \r\n      customerTrackingData.value = customerTrackingData.value.filter(\r\n        item => item.id !== row.id\r\n      );\r\n    } catch (err) {\r\n      ElMessage.error('');\r\n    }\r\n  }).catch(() => {\r\n    /*  */\r\n  });\r\n};\r\n\r\n\r\n// \r\nconst currentPageData = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize.value;\r\n  return filteredCustomerTracking.value.slice(start, start + pageSize.value);\r\n});\r\n\r\n// \r\nconst onSearch = () => {\r\n  currentPage.value = 1;\r\n};\r\n\r\n// \r\nconst onPageChange = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return '';\r\n  return new Date(date).toLocaleString('zh-TW', {\r\n    timeZone: 'Asia/Taipei',\r\n    year:   'numeric',\r\n    month:  '2-digit',\r\n    day:    '2-digit',\r\n    // hour:   '2-digit',\r\n    // minute: '2-digit',\r\n    // second: '2-digit'\r\n  });\r\n};\r\n\r\nconst { salesEmployees, fetchSalesEmployeeData } = useSalesEmployeeData();\r\n\r\n// \r\nconst handleCaseTrackingAdded = async () => {\r\n  await loadCustomerTracking();\r\n};\r\n\r\nonMounted(async () => {\r\n  await loadCustomerTracking();\r\n  \r\n  // \r\n  eventBus.on('caseTrackingAdded', handleCaseTrackingAdded);\r\n  await fetchSalesEmployeeData(); // \r\n  \r\n  //  customerClassDate 1~\r\n  const today = new Date();\r\n  const oneMonthAgo = new Date();\r\n  oneMonthAgo.setMonth(today.getMonth() - 1);\r\n  const startOfMonthAgo = new Date(oneMonthAgo.getFullYear(), oneMonthAgo.getMonth(), oneMonthAgo.getDate(), 0, 0, 0);\r\n  const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 23, 59, 59);\r\n  customerClassDate.value = [startOfMonthAgo, endOfDay];\r\n});\r\n\r\ndefineExpose({\r\n  loadCustomerTracking\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.list-customer-info {\r\n  margin-top: -2.8rem;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n}\r\n\r\n.black-border-table {\r\n    margin-top: -1.4rem;\r\n  --el-table-border-color: black;\r\n}\r\n</style>","import script from \"./List_CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./List_CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./List_CustomerTracking.vue?vue&type=style&index=0&id=c0606064&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c0606064\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"ml-6 mt-7\">\r\n        <Fill_CustomerTracking @formSubmitted=\"handleFormSubmitted\"/>\r\n    </div>\r\n    <div class = \"ml-6\" style=\"padding-top:3rem;padding-right: 1rem;\">\r\n        <List_CustomerTracking ref=\"listCustomerTrackingRef\"/>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport Fill_CustomerTracking from './Fill_CustomerTracking.vue';\r\nimport List_CustomerTracking from './List_CustomerTracking.vue';\r\nimport { ref } from 'vue';\r\n\r\nconst listCustomerTrackingRef = ref(null);\r\n\r\nconst handleFormSubmitted = () => {\r\n  if (listCustomerTrackingRef.value && listCustomerTrackingRef.value.loadCustomerTracking) {\r\n    listCustomerTrackingRef.value.loadCustomerTracking();\r\n  }\r\n};\r\n</script>","import script from \"./CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomerTracking.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","let axiosInstance;\r\n\r\nexport function setSalesAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = '/Sales'\r\n\r\nexport default {\r\n  /**\r\n   *  - \r\n   * @param {Object} queryData - \r\n   * @param {string} queryData.billNo - \r\n   * @param {string} queryData.customerName - \r\n   * @param {string} queryData.projectName - \r\n   * @param {Object} pagination - \r\n   * @param {number} pagination.page -  (1)\r\n   * @param {number} pagination.pageSize - \r\n   * @returns {Promise} API \r\n   */\r\n  querySales(queryData, pagination = { page: 1, pageSize: 50 }) {\r\n    const params = {\r\n      page: pagination.page,\r\n      pageSize: pagination.pageSize\r\n    }\r\n    return api().post(`${controllerPath}/query?page=${params.page}&pageSize=${params.pageSize}`, queryData)\r\n  },\r\n\r\n  /**\r\n   *  - \r\n   * @param {Object} params - \r\n   * @param {number} params.page -  (1)\r\n   * @param {number} params.pageSize - \r\n   * @param {string} params.search - \r\n   * @returns {Promise} \r\n   */\r\n  getCustomers(params = {}) {\r\n    return api().get(`${controllerPath}/customers`, { params })\r\n  },\r\n\r\n  /**\r\n   *  - \r\n   * @param {Object} params - \r\n   * @param {number} params.page -  (1)\r\n   * @param {number} params.pageSize - \r\n   * @param {string} params.search - \r\n   * @returns {Promise} \r\n   */\r\n  getProjects(params = {}) {\r\n    return api().get(`${controllerPath}/projects`, { params })\r\n  }\r\n}","<template>\r\n  <el-config-provider :locale=\"zhTw\">\r\n    <div class=\"sales-query-container\">\r\n    <!--  -->\r\n    <div class=\"page-header\">\r\n      <h2> - </h2>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-card class=\"query-card\" shadow=\"hover\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-form \r\n        :model=\"queryForm\" \r\n        :rules=\"queryRules\"\r\n        ref=\"queryFormRef\"\r\n        label-width=\"120px\"\r\n        class=\"query-form\"\r\n      >\r\n        <el-row :gutter=\"20\">\r\n\r\n          \r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"\" prop=\"customerName\">\r\n              <el-input\r\n                v-model=\"queryForm.customerName\"\r\n                placeholder=\"\"\r\n                clearable\r\n                style=\"width: 100%\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n          \r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"\" prop=\"projectName\">\r\n              <el-input\r\n                v-model=\"queryForm.projectName\"\r\n                placeholder=\"\"\r\n                clearable\r\n                style=\"width: 100%\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-row>\r\n          <el-col :span=\"24\" class=\"button-group\">\r\n            <el-button \r\n              type=\"primary\" \r\n              @click=\"handleQuery\"\r\n              :loading=\"queryLoading\"\r\n              icon=\"Search\"\r\n            >\r\n              \r\n            </el-button>\r\n            <el-button \r\n              @click=\"handleReset\"\r\n              icon=\"Refresh\"\r\n            >\r\n              \r\n            </el-button>\r\n            <el-button \r\n              type=\"success\" \r\n              @click=\"handleExport\"\r\n              :disabled=\"!salesData.length\"\r\n              icon=\"Download\"\r\n            >\r\n              Excel\r\n            </el-button>\r\n            <el-button \r\n              type=\"primary\" \r\n              @click=\"handlePrint\"\r\n              :disabled=\"!salesData.length\"\r\n              :icon=\"Printer\"\r\n              style=\"margin-left: 10px;\"\r\n            >\r\n              \r\n            </el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!--  -->\r\n    <el-card class=\"result-card\" shadow=\"hover\" v-if=\"salesData.length > 0 || queryExecuted\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n          <span class=\"result-count\" v-if=\"paginationInfo.totalCount > 0\">\r\n             {{ paginationInfo.totalCount }}  {{ paginationInfo.page }} \r\n          </span>\r\n        </div>\r\n      </template>\r\n\r\n      <el-table\r\n        :data=\"Array.isArray(salesData) ? salesData : []\"\r\n        style=\"width: 100%\"\r\n        v-loading=\"queryLoading\"\r\n        stripe\r\n        border\r\n        height=\"500\"\r\n        :default-sort=\"{ prop: '', order: 'descending' }\"\r\n      >\r\n        <el-table-column prop=\"\" label=\"\" width=\"120\" fixed=\"left\"  v-if=\"false\"/>\r\n        <el-table-column prop=\"\" label=\"\" width=\"130\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ formatDate(scope.row.) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"220\" show-overflow-tooltip sortable/>\r\n        <el-table-column prop=\"\" label=\"\" width=\"170\" sortable/>\r\n        <el-table-column prop=\"\" label=\"\" width=\"300\" show-overflow-tooltip />\r\n        <el-table-column prop=\"\" label=\"\" width=\"80\" align=\"right\">\r\n          <template #default=\"scope\">\r\n            {{ formatNumber(scope.row.) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"130\" align=\"right\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ formatCurrency(scope.row.) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"130\" align=\"right\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ formatCurrency(scope.row.) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"120\" align=\"right\" sortable>\r\n          <template #default=\"scope\">\r\n            {{ formatCurrency(scope.row.) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"300\" show-overflow-tooltip />\r\n        <el-table-column prop=\"\" label=\"\" width=\"100\" />\r\n        <el-table-column prop=\"\" label=\"\" width=\"120\" sortable/>\r\n        <el-table-column prop=\"\" label=\"\" width=\"100\" v-if=\"false\"/>\r\n      </el-table>\r\n\r\n      <!--  -->\r\n      <div v-if=\"salesData.length === 0 && queryExecuted && !queryLoading\" class=\"no-data\">\r\n        <el-empty description=\"\" />\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div v-if=\"paginationInfo.totalCount > 0\" class=\"pagination-container\">\r\n        <el-pagination\r\n          v-model:current-page=\"paginationInfo.page\"\r\n          v-model:page-size=\"paginationInfo.pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100, 200]\"\r\n          :total=\"paginationInfo.totalCount\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n  </el-config-provider>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Printer } from '@element-plus/icons-vue'\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs'\r\nimport SalesService from '../../service/SalesService'\r\nimport * as XLSX from 'xlsx'\r\n    // \r\n    const queryFormRef = ref()\r\n    const queryForm = reactive({\r\n      billNo: '',\r\n      customerName: '',\r\n      projectName: ''\r\n    })\r\n\r\n    const queryRules = {\r\n      // \r\n    }\r\n\r\n    //  salesData \r\n    const salesData = ref([])\r\n    const queryLoading = ref(false)\r\n    //  select \r\n    const queryExecuted = ref(false)\r\n\r\n    // \r\n    const paginationInfo = reactive({\r\n      page: 1,\r\n      pageSize: 50,\r\n      totalCount: 0,\r\n      totalPages: 0,\r\n      hasNextPage: false,\r\n      hasPreviousPage: false\r\n    })\r\n\r\n    // \r\n\r\n    // \r\n    const handleQuery = async (resetPage = true) => {\r\n      // \r\n      if (!queryForm.billNo && !queryForm.customerName && !queryForm.projectName) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n\r\n      try {\r\n        queryLoading.value = true\r\n        queryExecuted.value = true\r\n        \r\n        // \r\n        if (resetPage) {\r\n          paginationInfo.page = 1\r\n        }\r\n        \r\n        const queryData = {\r\n          billNo: queryForm.billNo || null,\r\n          customerName: queryForm.customerName || null,\r\n          projectName: queryForm.projectName || null\r\n        }\r\n\r\n        const pagination = {\r\n          page: paginationInfo.page,\r\n          pageSize: paginationInfo.pageSize\r\n        }\r\n\r\n        const response = await SalesService.querySales(queryData, pagination)\r\n        console.log('API Response:', response.data);\r\n        \r\n        //  API  - \r\n        if (response.data && typeof response.data === 'object') {\r\n          // \r\n          if (Object.prototype.hasOwnProperty.call(response.data, 'totalCount') || Object.prototype.hasOwnProperty.call(response.data, 'page')) {\r\n            // data \r\n            const dataArray = Array.isArray(response.data.data) ? response.data.data : []\r\n            salesData.value = dataArray\r\n            \r\n            // \r\n            paginationInfo.totalCount = response.data.totalCount || 0\r\n            paginationInfo.totalPages = response.data.totalPages || 1\r\n            paginationInfo.hasNextPage = response.data.hasNextPage || false\r\n            paginationInfo.hasPreviousPage = response.data.hasPreviousPage || false\r\n            \r\n            console.log('  API ');\r\n            console.log(':', {\r\n              page: paginationInfo.page,\r\n              pageSize: paginationInfo.pageSize,\r\n              totalCount: paginationInfo.totalCount,\r\n              totalPages: paginationInfo.totalPages,\r\n              dataLength: salesData.value.length\r\n            });\r\n            \r\n            if (salesData.value.length === 0) {\r\n              ElMessage.info('')\r\n            } else {\r\n              ElMessage.success(` ${paginationInfo.totalCount} `)\r\n            }\r\n          } else if (response.data.Data !== undefined) {\r\n            //  -  Data \r\n            const dataArray = Array.isArray(response.data.Data) ? response.data.Data : []\r\n            salesData.value = dataArray\r\n            \r\n            // \r\n            paginationInfo.totalCount = response.data.TotalCount || 0\r\n            paginationInfo.totalPages = response.data.TotalPages || 1\r\n            paginationInfo.hasNextPage = response.data.HasNextPage || false\r\n            paginationInfo.hasPreviousPage = response.data.HasPreviousPage || false\r\n            \r\n            if (salesData.value.length === 0) {\r\n              ElMessage.info('')\r\n            } else {\r\n              ElMessage.success(` ${paginationInfo.totalCount} `)\r\n            }\r\n          } else {\r\n            // \r\n            console.error(' API :', response.data);\r\n            salesData.value = []\r\n            paginationInfo.totalCount = 0\r\n            paginationInfo.totalPages = 1\r\n            paginationInfo.hasNextPage = false\r\n            paginationInfo.hasPreviousPage = false\r\n            ElMessage.warning('API ')\r\n          }\r\n        } else if (Array.isArray(response.data)) {\r\n          // API \r\n          salesData.value = response.data\r\n          paginationInfo.totalCount = response.data.length\r\n          paginationInfo.totalPages = Math.ceil(response.data.length / paginationInfo.pageSize)\r\n          paginationInfo.hasNextPage = paginationInfo.page < paginationInfo.totalPages\r\n          paginationInfo.hasPreviousPage = paginationInfo.page > 1\r\n          \r\n          if (salesData.value.length === 0) {\r\n            ElMessage.info('')\r\n          } else {\r\n            ElMessage.success(` ${paginationInfo.totalCount} `)\r\n          }\r\n        } else {\r\n          // \r\n          console.error(' API :', response.data);\r\n          salesData.value = []\r\n          paginationInfo.totalCount = 0\r\n          paginationInfo.totalPages = 1\r\n          paginationInfo.hasNextPage = false\r\n          paginationInfo.hasPreviousPage = false\r\n          ElMessage.warning('API ')\r\n        }\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error('')\r\n        // \r\n        salesData.value = []\r\n        paginationInfo.totalCount = 0\r\n        paginationInfo.totalPages = 1\r\n        paginationInfo.hasNextPage = false\r\n        paginationInfo.hasPreviousPage = false\r\n      } finally {\r\n        queryLoading.value = false\r\n      }\r\n    }\r\n\r\n    // \r\n    const handleReset = () => {\r\n      queryFormRef.value?.resetFields()\r\n      // \r\n      salesData.value = []\r\n      queryExecuted.value = false\r\n      // \r\n      paginationInfo.page = 1\r\n      paginationInfo.pageSize = 50\r\n      paginationInfo.totalCount = 0\r\n      paginationInfo.totalPages = 0\r\n      paginationInfo.hasNextPage = false\r\n      paginationInfo.hasPreviousPage = false\r\n    }\r\n\r\n    // \r\n    const handleSizeChange = (newSize) => {\r\n      console.log(':', newSize);\r\n      paginationInfo.pageSize = newSize\r\n      paginationInfo.page = 1 // \r\n      handleQuery(false) // 1\r\n    }\r\n\r\n    // \r\n    const handleCurrentChange = (newPage) => {\r\n      console.log(':', newPage);\r\n      paginationInfo.page = newPage\r\n      handleQuery(false) // \r\n    }\r\n\r\n    // Excel\r\n    const handleExport = () => {\r\n      if (salesData.value.length === 0) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n\r\n      try {\r\n        // \r\n        const exportData = salesData.value.map(item => ({\r\n          '': item.,\r\n          '': formatDate(item.),\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n          '': item.,\r\n        }))\r\n\r\n        // \r\n        const ws = XLSX.utils.json_to_sheet(exportData)\r\n        const wb = XLSX.utils.book_new()\r\n        XLSX.utils.book_append_sheet(wb, ws, '')\r\n\r\n        // \r\n        const fileName = `_${new Date().toISOString().slice(0, 10)}.xlsx`\r\n        \r\n        // \r\n        XLSX.writeFile(wb, fileName)\r\n        ElMessage.success('')\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error('')\r\n      }\r\n    }\r\n\r\n    // \r\n    const formatDate = (dateNumber) => {\r\n      if (!dateNumber) return ''\r\n      const dateStr = dateNumber.toString()\r\n      if (dateStr.length === 8) {\r\n        return `${dateStr.slice(0, 4)}-${dateStr.slice(4, 6)}-${dateStr.slice(6, 8)}`\r\n      }\r\n      return dateStr\r\n    }\r\n\r\n    // \r\n    const formatNumber = (number) => {\r\n      if (number === null || number === undefined) return ''\r\n      return Number(number).toLocaleString()\r\n    }\r\n\r\n    // \r\n    const formatCurrency = (amount) => {\r\n      if (amount === null || amount === undefined) return ''\r\n      return `NT$ ${Number(amount).toLocaleString()}`\r\n    }\r\n\r\n    // \r\n    const handlePrint = () => {\r\n      if (salesData.value.length === 0) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n\r\n      try {\r\n        // \r\n        const printContent = generatePrintContent()\r\n        \r\n        // \r\n        const printWindow = window.open('', '_blank')\r\n        printWindow.document.write(printContent)\r\n        printWindow.document.close()\r\n        \r\n        // \r\n        printWindow.onload = () => {\r\n          printWindow.print()\r\n          printWindow.close()\r\n        }\r\n        \r\n        ElMessage.success('')\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error('')\r\n      }\r\n    }\r\n\r\n    // \r\n    const generatePrintContent = () => {\r\n      const currentDate = new Date().toLocaleDateString('zh-TW')\r\n      const currentTime = new Date().toLocaleTimeString('zh-TW')\r\n      \r\n      let html = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n          <meta charset=\"UTF-8\">\r\n          <title></title>\r\n          <style>\r\n            @page {\r\n              size: A4 landscape;\r\n              margin: 15mm;\r\n            }\r\n            body { \r\n              font-family: 'Microsoft JhengHei', Arial, sans-serif; \r\n              margin: 10px; \r\n              font-size: 10px;\r\n              line-height: 1.3;\r\n            }\r\n            .header { \r\n              text-align: center; \r\n              margin-bottom: 15px; \r\n              border-bottom: 2px solid #333;\r\n              padding-bottom: 8px;\r\n            }\r\n            .header h1 { \r\n              margin: 0; \r\n              font-size: 16px; \r\n              color: #333;\r\n            }\r\n            .print-info { \r\n              text-align: right; \r\n              margin-bottom: 10px; \r\n              font-size: 9px;\r\n              color: #666;\r\n            }\r\n            .query-conditions {\r\n              margin-bottom: 10px;\r\n              padding: 8px;\r\n              background-color: #f5f5f5;\r\n              border-radius: 4px;\r\n              font-size: 9px;\r\n            }\r\n            .query-conditions h3 {\r\n              margin: 0 0 8px 0;\r\n              font-size: 12px;\r\n            }\r\n            .condition-item {\r\n              display: inline-block;\r\n              margin-right: 15px;\r\n              margin-bottom: 3px;\r\n            }\r\n            table { \r\n              width: 100%; \r\n              border-collapse: collapse; \r\n              margin-bottom: 15px;\r\n              table-layout: fixed;\r\n            }\r\n            th, td { \r\n              border: 1px solid #ddd; \r\n              padding: 4px; \r\n              text-align: left;\r\n              font-size: 9px;\r\n              word-wrap: break-word;\r\n              overflow: hidden;\r\n            }\r\n            th { \r\n              background-color: #f2f2f2; \r\n              font-weight: bold;\r\n              text-align: center;\r\n              font-size: 10px;\r\n            }\r\n            /*  */\r\n            .col-date { width: 7%; }\r\n            .col-customer { width: 11%; }\r\n            .col-product-code { width: 7%; }\r\n            .col-product-name { width: 13%; }\r\n            .col-quantity { width: 5%; }\r\n            .col-price { width: 7%; }\r\n            .col-amount { width: 8%; }\r\n            .col-tax-amount { width: 8%; }\r\n            .col-project { width: 11%; }\r\n            .col-order { width: 8%; }\r\n            .col-sales { width: 7%; }\r\n            \r\n            .number { text-align: right; }\r\n            .center { text-align: center; }\r\n            .summary {\r\n              margin-top: 10px;\r\n              text-align: right;\r\n              font-weight: bold;\r\n              font-size: 11px;\r\n            }\r\n            @media print {\r\n              body { \r\n                margin: 0; \r\n                -webkit-print-color-adjust: exact;\r\n                print-color-adjust: exact;\r\n              }\r\n              .no-print { display: none; }\r\n              @page {\r\n                size: A4 landscape;\r\n                margin: 10mm;\r\n              }\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"header\">\r\n            <h1> - </h1>\r\n          </div>\r\n          \r\n          <div class=\"print-info\">\r\n            ${currentDate} ${currentTime}\r\n          </div>\r\n          \r\n          <div class=\"query-conditions\">\r\n            <h3></h3>\r\n            ${queryForm.billNo ? `<span class=\"condition-item\">${queryForm.billNo}</span>` : ''}\r\n            ${queryForm.customerName ? `<span class=\"condition-item\">${queryForm.customerName}</span>` : ''}\r\n            ${queryForm.projectName ? `<span class=\"condition-item\">${queryForm.projectName}</span>` : ''}\r\n          </div>\r\n          \r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th class=\"col-date\"></th>\r\n                <th class=\"col-customer\"></th>\r\n                <th class=\"col-product-code\"></th>\r\n                <th class=\"col-product-name\"></th>\r\n                <th class=\"col-quantity\"></th>\r\n                <th class=\"col-price\"></th>\r\n                <th class=\"col-amount\"></th>\r\n                <th class=\"col-tax-amount\"></th>\r\n                <th class=\"col-project\"></th>\r\n                <th class=\"col-order\"></th>\r\n                <th class=\"col-sales\"></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n      `\r\n      \r\n      // \r\n      salesData.value.forEach(item => {\r\n        html += `\r\n          <tr>\r\n            <td class=\"col-date center\">${formatDate(item.)}</td>\r\n            <td class=\"col-customer\">${item. || ''}</td>\r\n            <td class=\"col-product-code center\">${item. || ''}</td>\r\n            <td class=\"col-product-name\">${item. || ''}</td>\r\n            <td class=\"col-quantity number\">${formatNumber(item.)}</td>\r\n            <td class=\"col-price number\">${formatCurrency(item.)}</td>\r\n            <td class=\"col-amount number\">${formatCurrency(item.)}</td>\r\n            <td class=\"col-tax-amount number\">${formatCurrency(item.)}</td>\r\n            <td class=\"col-project\">${item. || ''}</td>\r\n            <td class=\"col-order center\">${item. || ''}</td>\r\n            <td class=\"col-sales center\">${item. || ''}</td>\r\n          </tr>\r\n        `\r\n      })\r\n      \r\n      // \r\n      const totalAmount = salesData.value.reduce((sum, item) => sum + (Number(item.) || 0), 0)\r\n      const totalTaxAmount = salesData.value.reduce((sum, item) => sum + (Number(item.) || 0), 0)\r\n      \r\n      html += `\r\n            </tbody>\r\n          </table>\r\n          \r\n          <div class=\"summary\">\r\n            <div>${salesData.value.length} </div>\r\n            <div>${formatCurrency(totalAmount)}</div>\r\n            <div>${formatCurrency(totalTaxAmount)}</div>\r\n          </div>\r\n        </body>\r\n        </html>\r\n      `\r\n      \r\n      return html\r\n    }\r\n\r\n// \r\nonMounted(() => {\r\n  console.log('SalesQuery ');\r\n  console.log('queryForm :', queryForm);\r\n  console.log('salesData :', salesData.value);\r\n  \r\n  //  Element Plus \r\n  const formElement = document.querySelector('.el-form');\r\n  if (formElement) {\r\n    console.log(' Element Plus ');\r\n  } else {\r\n    console.error(' Element Plus ');\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.sales-query-container {\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n.page-header {\r\n  margin-top:1rem;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.page-header h2 {\r\n \r\n  color: #303133;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.query-card, .result-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.result-count {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  font-weight: normal;\r\n}\r\n\r\n.query-form {\r\n  padding: 10px 0;\r\n}\r\n\r\n.button-group {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.button-group .el-button {\r\n  margin: 0 10px;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 40px 0;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .sales-query-container {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .page-header h2 {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .el-col {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./SalesQuery.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalesQuery.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SalesQuery.vue?vue&type=style&index=0&id=1f4cee8f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1f4cee8f\"]])\n\nexport default __exports__","<template>\r\n    <div style=\"margin-top:3rem; text-align: center;\">\r\n\r\n        <el-date-picker\r\n                v-model=\"dateRange\"\r\n                type=\"daterange\"\r\n                range-separator=\"~\"\r\n                size=\"large\"\r\n                start-placeholder=\"\"\r\n                end-placeholder=\"\"\r\n                style=\"width: 25rem; margin-bottom: 20px;font-size:1rem\"\r\n                @change=\"fetchColdCallingReport\"\r\n        />\r\n\r\n        <!--  -->\r\n        <div style=\"margin-bottom: 20px;\">\r\n            <el-radio-group v-model=\"selectedBusinessArea\" size=\"large\" @change=\"handleBusinessAreaChange\">\r\n                <el-radio-button value=\"\"></el-radio-button>\r\n                <el-radio-button \r\n                    v-for=\"area in businessAreaOptions\" \r\n                    :key=\"area\" \r\n                    :value=\"area\"\r\n                >\r\n                    {{ area }}\r\n                </el-radio-button>\r\n            </el-radio-group>\r\n        </div>\r\n        <el-table :data=\"tableData\" style=\"width: 100%; max-width: 38rem; margin: 0 auto;\">\r\n            <el-table-column prop=\"salesRepID\" label=\"\" width=\"150\" v-if=\"false\" align=\"center\" />\r\n            <el-table-column prop=\"salesRepName\" label=\"\" width=\"130\" align=\"center\" />\r\n            <el-table-column prop=\"countOfColdCallingCustomers\" label=\"\" width=\"155\" align=\"center\" />\r\n            <el-table-column prop=\"countOfSuccessfulDeals\" label=\"\" width=\"130\" align=\"center\" />\r\n            <el-table-column prop=\"countOfContactAttempts\" label=\"/\" width=\"190\" align=\"center\" />\r\n        </el-table>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\n\r\nconst dateRange = ref(null); //  selectedDate  dateRange  null\r\nconst tableData = ref([]);\r\n\r\n// \r\nconst selectedBusinessArea = ref('');\r\nconst businessAreaOptions = ref([]);\r\nconst allTableData = ref([]); // \r\n\r\nconst fetchColdCallingReport = async () => {\r\n    try {\r\n        //  API \r\n        //  API  getColdCallingReportByDateRange\r\n        const formatDate = (date) => {\r\n            if (!date) return null;\r\n            const d = new Date(date);\r\n            const year = d.getFullYear();\r\n            const month = (d.getMonth() + 1).toString().padStart(2, '0');\r\n            const day = d.getDate().toString().padStart(2, '0');\r\n            return `${year}-${month}-${day}`;\r\n        };\r\n\r\n        const startDate = dateRange.value ? formatDate(dateRange.value[0]) : null;\r\n        const endDate = dateRange.value ? formatDate(dateRange.value[1]) : null;\r\n        \r\n        const res = await CRMService.getColdCallingReport(startDate, endDate);\r\n        console.log('Cold Calling :', res.data);\r\n        \r\n        // \r\n        allTableData.value = res.data || [];\r\n        \r\n        // \r\n        const uniqueBusinessAreas = [...new Set(allTableData.value.map(item => item.salesRepBusinessAreaName))].filter(Boolean);\r\n        businessAreaOptions.value = uniqueBusinessAreas;\r\n        \r\n        // \r\n        applyBusinessAreaFilter();\r\n    \r\n    } catch (error) {\r\n        console.error('', error);\r\n        // ElMessage.error('');\r\n    }\r\n};\r\n\r\n// \r\nconst handleBusinessAreaChange = (value) => {\r\n    console.log(':', value);\r\n    selectedBusinessArea.value = value;\r\n    applyBusinessAreaFilter();\r\n};\r\n\r\nconst applyBusinessAreaFilter = () => {\r\n    console.log(':', selectedBusinessArea.value);\r\n    console.log(':', businessAreaOptions.value);\r\n    \r\n    // \"\"\r\n    if (selectedBusinessArea.value === '') {\r\n        tableData.value = allTableData.value;\r\n        console.log(':', tableData.value.length);\r\n        return;\r\n    }\r\n    \r\n    // \r\n    const filteredData = allTableData.value.filter(item => \r\n        item.salesRepBusinessAreaName === selectedBusinessArea.value\r\n    );\r\n    \r\n    console.log(':', filteredData.length);\r\n    tableData.value = filteredData;\r\n    console.log(':', tableData.value.length);\r\n};\r\n\r\nonMounted(async()=>{\r\n    // \r\n    const today = new Date();\r\n    const sevenDaysAgo = new Date();\r\n    sevenDaysAgo.setDate(today.getDate() - 7);\r\n    dateRange.value = [sevenDaysAgo, today];\r\n    await fetchColdCallingReport();\r\n})\r\n</script>","import script from \"./ColdCallingReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ColdCallingReport.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import mitt from 'mitt';\r\nconst emitter = mitt();\r\nexport default emitter;","<template>\r\n  <div class=\"fill-customer-tracking\">\r\n    <el-form :model=\"customerReportForm\" label-width=\"4.5rem\" :rules=\"rules\" ref=\"formRef\">\r\n      <el-row :gutter=\"20\">\r\n        <!-- ID -->\r\n        <el- :span=\"6\" v-if=\"false\">\r\n          <el-form-item label=\"ID\" label-width=\"5rem\" prop=\"CustomerID\" >\r\n            <el-input v-model=\"customerReportForm.CustomerID\" style=\"width: 100%;\"></el-input>\r\n          </el-form-item>\r\n        </el->\r\n        <!--  -->\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"\" label-width=\"5rem\" prop=\"CustomerName\">\r\n            <el-autocomplete\r\n              v-model=\"customerReportForm.CustomerName\"\r\n              :fetch-suggestions=\"querySearch\"\r\n              :trigger-on-focus=\"false\"\r\n              clearable\r\n              class=\"inline-input w-50\"\r\n              placeholder=\"\"\r\n              @select=\"handleSelect\"\r\n              value-key=\"fullCompanyName\"\r\n              style=\"width: 100%;\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"\" label-width=\"5rem\" prop=\"ContactDate\">\r\n            <el-date-picker\r\n              v-model=\"customerReportForm.ContactDate\"\r\n              type=\"date\"\r\n              placeholder=\"\"\r\n              style=\"width: 100%;\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled-date=\"disabledDate\"\r\n            />\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"\" label-width=\"5rem\" prop=\"ContactDescription\">\r\n            <el-input v-model=\"customerReportForm.ContactDescription\" type=\"textarea\" style=\"width: 100%;\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"24\" style=\"text-align: center;\">\r\n            <el-button type=\"primary\" @click=\"submitForm\" style=\"width: 100px;\"></el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport { ElForm, ElFormItem, ElInput, ElDatePicker, ElButton, ElMessage, ElRow, ElCol, ElAutocomplete } from 'element-plus';\r\nimport CRMService from '@/service/CRMService'; //  CRMService\r\nimport eventBus from '@/utils/eventBus'; //  eventBus\r\nimport {useUserStore} from '@/stores/user.js'\r\nconst userStore = useUserStore();\r\nconst formRef = ref(null);\r\nconst customerReadModels = ref([]); // \r\n\r\nconst customerReportForm = reactive({\r\n  CustomerID: '',\r\n  CustomerName: '',\r\n  ContactDate: new Date().toISOString().split('T')[0], // \r\n  ContactDescription: '',\r\n});\r\n\r\nconst rules = reactive({\r\n  CustomerID: [\r\n    { required: true, message: 'ID', trigger: 'blur' },\r\n  ],\r\n  CustomerName: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n  ],\r\n  ContactDate: [\r\n    { required: true, message: '', trigger: 'change' },\r\n  ],\r\n  ContactDescription: [\r\n    { required: true, message: '', trigger: 'blur' },\r\n  ],\r\n});\r\n\r\nconst submitForm = async () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        // \r\n        const payload = {\r\n          CustomerID: customerReportForm.CustomerID,\r\n          CustomerName: customerReportForm.CustomerName,\r\n          ContactDate: customerReportForm.ContactDate, //  YYYY-MM-DD \r\n          ContactDescription: customerReportForm.ContactDescription,\r\n          createdByUserId: userStore.userId,\r\n          createdByUserName: userStore.userName\r\n        };\r\n        console.log(\"submitForm: \", payload);\r\n        await CRMService.addCustomerReport(payload);\r\n        ElMessage.success('');\r\n        eventBus.emit('customerReportAdded'); // \r\n        resetForm();\r\n      } catch (error) {\r\n        console.error(':', error);\r\n        ElMessage.error('');\r\n      }\r\n    } else {\r\n      // ElMessage.error(''); // \r\n      return false;\r\n    }\r\n  });\r\n};\r\n\r\nconst resetForm = () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.resetFields();\r\n  customerReportForm.ContactDate = new Date().toISOString().split('T')[0]; // \r\n  customerReportForm.CustomerID = ''; // ID\r\n  customerReportForm.CustomerName = ''; // \r\n};\r\n\r\nconst disabledDate = (time) => {\r\n  return time.getTime() > Date.now();\r\n};\r\n\r\nconst querySearch = (queryString, cb) => {\r\n  const results = queryString\r\n    ? customerReadModels.value.filter(createFilter(queryString))\r\n    : customerReadModels.value;\r\n  cb(results);\r\n};\r\n\r\nconst createFilter = (queryString) => {\r\n  return (customer) => {\r\n    return (\r\n      customer.fullCompanyName.toLowerCase().includes(queryString.toLowerCase()) ||\r\n      customer.customerName.toLowerCase().includes(queryString.toLowerCase()) ||\r\n      customer.customerId.toLowerCase().includes(queryString.toLowerCase())\r\n    );\r\n  };\r\n};\r\n\r\nconst handleSelect = (item) => {\r\n  customerReportForm.CustomerName = item.fullCompanyName;\r\n  customerReportForm.CustomerID = item.customerId;\r\n\r\n};\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const res = await CRMService.getCustomerReport_CustomerReadModels();\r\n    customerReadModels.value = res.data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.fill-customer-tracking {\r\n  /* 1px   */\r\n  border: 1px solid #000;\r\n\r\n  /* margin 3rem 3rem 3rem 5rem */\r\n  margin: 4rem 3rem 0rem 3rem;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  padding: 2rem ;\r\n  width: 90%;\r\n}\r\n</style>","import script from \"./FillCustomerReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FillCustomerReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FillCustomerReport.vue?vue&type=style&index=0&id=5c1532fa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5c1532fa\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"wrap\"\r\n    :style=\"{\r\n      width: isRWDMode ? '23rem' : '90%',\r\n      margin: isRWDMode?  '0rem 2rem 0rem 1rem' : '0rem 2rem 0rem 2rem',\r\n    }\"\r\n  >\r\n    <div\r\n      ref=\"wrapper\"\r\n      class=\"controls-bar w-full\"\r\n      :style=\"{\r\n        margin: isRWDMode ? '1rem 1rem 1rem 0rem' : '1rem 0rem 1rem 0rem',\r\n        padding: isRWDMode ? '1rem 1rem 1rem 1rem' : '1rem',\r\n        display: 'flex',\r\n        alignItems: isRWDMode ? 'center' : 'center',\r\n        border: '1px solid black',\r\n        flexDirection: isRWDMode ? 'column' : 'row',\r\n        gap: isRWDMode ? '10px' : '0'\r\n      }\"\r\n    >\r\n    \r\n\r\n      <!-- Search block -->\r\n      <div\r\n        class=\"search-block\"\r\n        :style=\"{\r\n          display: 'flex',\r\n          marginLeft: isRWDMode ? '0' : '2rem',\r\n          flexDirection: isRWDMode ? 'column' : 'row',\r\n          alignItems: isRWDMode ? 'center' : 'center',\r\n          gap: '8px'\r\n        }\"\r\n      >\r\n        <el-select v-model=\"selectedField\" placeholder=\"\" :style=\"{ width: isRWDMode ? '100%' : '9rem' }\" @change=\"onSelectedFieldChange\">\r\n          <el-option\r\n            v-for=\"item in searchFields\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n        <el-input\r\n          v-model=\"searchTerm\"\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @keyup.enter=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n        />\r\n        <el-button type=\"primary\" :style=\"{  display: 'flex', justifyContent: isRWDMode ? 'center' : 'flex-start' }\" @click=\"onSearch\"></el-button>\r\n      </div>\r\n\r\n      <!-- Pagination block -->\r\n      <div\r\n        class=\"pagination-block\"\r\n        v-if=\"!isRWDMode\"\r\n        :style=\"\r\n          {\r\n            display: 'flex',\r\n            alignItems: isRWDMode ? 'flex-start' : 'center',\r\n            marginLeft: isRWDMode ? '0' : '2rem',\r\n            flexDirection: isRWDMode ? 'column' : 'row',\r\n            gap: isRWDMode ? '10px' : '0'\r\n          }\r\n        \"\r\n      >\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <el-select\r\n          v-model=\"pageSize\"\r\n          placeholder=\"\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '4rem' }\"\r\n          size=\"small\"\r\n        >\r\n          <el-option\r\n            v-for=\"s in [5, 10, 15, 20, 25, 30]\"\r\n            :key=\"s\"\r\n            :label=\"s\"\r\n            :value=\"s\"\r\n          />\r\n        </el-select>\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <div :style=\"{ marginLeft: isRWDMode ? '0' : '1rem' }\">\r\n          <el-pagination\r\n            background\r\n            layout=\"prev, pager, next\"\r\n            :total=\"filteredCustomers.length\"\r\n            :page-size=\"pageSize\"\r\n            v-model:current-page=\"currentPage\"\r\n            @current-change=\"onPageChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Table -->\r\n    <el-table v-if=\"!isRWDMode\" class=\"list-customer-report\" :data=\"currentPageData\" style=\"width: 100%;\" @row-click=\"handleRowClick\">\r\n      <el-table-column label=\"\" width=\"180\" v-if=\"false\">\r\n        <template #default=\"{ row }\">\r\n          <el-button v-if=\"!row.editing\" @click=\"editRow(row)\" type=\"primary\" size=\"small\"></el-button>\r\n          <el-button v-else @click=\"saveRow(row)\" type=\"success\" size=\"small\"></el-button>\r\n          <el-button @click=\"deleteRow(row)\" type=\"danger\" size=\"small\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\" v-if=\"false\"></el-table-column>\r\n      <el-table-column prop=\"customerID\" label=\"ID\" width=\"120\" v-if=\"false\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"!row.editing\">{{ row.customerID }}</span>\r\n          <el-input v-else v-model=\"row.customerID\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"customerName\" label=\"\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"!row.editing\">{{ row.customerName }}</span>\r\n          <el-input v-else v-model=\"row.customerName\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"contactDate\" label=\"\" width=\"180\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"!row.editing\">{{ formatDate(row.contactDate) }}</span>\r\n          <el-date-picker v-else v-model=\"row.contactDate\" type=\"date\" placeholder=\"\" value-format=\"YYYY-MM-DD\"></el-date-picker>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createdByUserId\" label=\"\" width=\"180\" v-if=\"false\">\r\n        <span>{{ row.createdByUserId }}</span>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createdByUserName\" label=\"\" width=\"180\">\r\n        <template #default=\"{ row }\">\r\n          <span>{{ row.createdByUserName }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"contactDescription\" label=\"\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"!row.editing\">{{ row.contactDescription }}</span>\r\n          <el-input v-else v-model=\"row.contactDescription\" type=\"textarea\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- RWD  -->\r\n    <div\r\n      class=\"table-wrapper\"\r\n      ref=\"rwdTableWrapper\"\r\n      v-infinite-scroll=\"loadMore\"\r\n      :infinite-scroll-disabled=\"loading || noMore\"\r\n      infinite-scroll-distance=\"50\"\r\n      style=\"height: 400px; overflow-y: auto;\"\r\n    >\r\n      <el-table\r\n        v-if=\"isRWDMode\"\r\n        class=\"RWD_List_Table\"\r\n        :style=\"{ width: isRWDMode ? 'auto' : '20rem' }\"\r\n        :data=\"currentPageData\"\r\n        stripe\r\n        border\r\n        ref=\"rwdTableRef\"\r\n        row-key=\"id\"\r\n        :expand-row-keys=\"expandedRowKeys\"\r\n        @row-click=\"handleRowClick\"\r\n      >\r\n        <el-table-column type=\"expand\">\r\n          <template #default=\"{ row }\">\r\n            <div style=\"padding: 10px;\">\r\n              <div v-for=\"([key, value]) in filteredRowData(row)\" :key=\"key\" style=\"margin-bottom: 8px;\">\r\n                <strong v-if=\"fieldLabels[key]\">{{ fieldLabels[key] }}:</strong>\r\n                <span v-else><strong>{{ key }}:</strong></span>\r\n                <span v-if=\"!row.editing\">\r\n                  <span v-if=\"key === 'ContactDate'\">{{ formatDate(value) }}</span>\r\n                  <span v-else>{{ value }}</span>\r\n                </span>\r\n                <span v-else>\r\n                  <el-input v-if=\"key === 'customerID'\" v-model=\"row.customerID\" size=\"small\" />\r\n                  <el-input v-else-if=\"key === 'customerName'\" v-model=\"row.customerName\" size=\"small\" />\r\n                  <el-date-picker v-else-if=\"key === 'contactDate'\" v-model=\"row.contactDate\" type=\"date\" placeholder=\"\" size=\"small\" value-format=\"YYYY-MM-DD\" />\r\n                  <el-input v-else-if=\"key === 'contactDescription'\" v-model=\"row.contactDescription\" type=\"textarea\" size=\"small\" />\r\n                </span>\r\n              </div>\r\n              <div style=\"margin-top: 10px;display:flex;gap:8px;\">\r\n                <template v-if=\"!row.editing\">\r\n                  <el-button type=\"primary\" size=\"small\" @click=\"editRow(row)\"></el-button>\r\n                  <el-button type=\"danger\" size=\"small\" @click=\"deleteRow(row)\"></el-button>\r\n                </template>\r\n                <template v-else>\r\n                  <el-button type=\"success\" size=\"small\" @click=\"saveRow(row)\"></el-button>\r\n                  <el-button type=\"info\" size=\"small\" @click=\"cancelEdit(row)\"></el-button>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contactDate\" label=\"\" width=\"110\">\r\n          <template #default=\"{ row }\">\r\n            <span>{{ formatDate(row.contactDate) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"customerName\" label=\"\" width=\"220\" />\r\n        <el-table-column prop=\"contactDescription\" label=\"\" width=\"150\" />\r\n      </el-table>\r\n\r\n      <!--  /  -->\r\n      <div v-if=\"loading\" class=\"load-more\"></div>\r\n      <div v-if=\"!loading && noMore\" class=\"load-more\"></div>\r\n    </div>\r\n    <el-dialog v-model=\"dialogVisible\" title=\"\" width=\"80%\">\r\n      <el-table :data=\"selectedUserRecords\" style=\"width: 100%\">\r\n        <el-table-column prop=\"customerName\" label=\"\"></el-table-column>\r\n        <el-table-column prop=\"contactDate\" label=\"\" width=\"180\">\r\n          <template #default=\"{ row }\">\r\n            <span>{{ formatDate(row.contactDate) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"createdByUserName\" label=\"\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"contactDescription\" label=\"\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, onUnmounted, watch, nextTick } from 'vue';\r\nimport { ElTable, ElTableColumn, ElButton, ElInput, ElDatePicker, ElMessage, ElMessageBox, ElSelect, ElOption, ElText, ElDialog } from 'element-plus';\r\nimport CRMService from '@/service/CRMService';\r\nimport eventBus from '@/utils/eventBus'; //  eventBus\r\nimport { useUserStore } from '@/stores/user.js'; //  user store\r\n\r\nconst customers = ref([]);\r\nconst contactDateRange = ref([]);\r\nconst selectedField = ref('customerName'); // \r\nconst searchTerm = ref('');\r\nconst pageSize = ref(10);\r\nconst currentPage = ref(1);\r\nconst editingRowId = ref(null);\r\nconst isRWDMode = ref(false);\r\nconst isLoadingMore = ref(false);\r\nconst loadedItemCount = ref(30);\r\nconst groupedAndSortedCustomers = computed(() => {\r\n  if (!customers.value) return [];\r\n\r\n  const grouped = customers.value.reduce((acc, customer) => {\r\n    const key = customer.customerName;\r\n    if (!acc[key]) {\r\n      acc[key] = [];\r\n    }\r\n    acc[key].push(customer);\r\n    return acc;\r\n  }, {});\r\n\r\n  return Object.values(grouped).map(group => {\r\n    return group.sort((a, b) => new Date(b.contactDate) - new Date(a.contactDate))[0];\r\n  });\r\n});\r\nconst wrapper = ref(null);\r\nconst rwdTableRef = ref(null);\r\nconst expandedRowKeys = ref([]);\r\nconst dialogVisible = ref(false);\r\nconst selectedUserRecords = ref([]);\r\n\r\nconst fieldLabels = {\r\n  id: 'ID',\r\n  customerID: 'ID',\r\n  customerName: '',\r\n  contactDate: '',\r\n  contactDescription: '',\r\n};\r\n\r\nconst searchFields = [\r\n  { label: '', value: 'customerName' }\r\n];\r\n\r\nconst filteredCustomers = computed(() => {\r\n  let filtered = groupedAndSortedCustomers.value;\r\n  if (contactDateRange.value && contactDateRange.value.length === 2) {\r\n    const [start, end] = contactDateRange.value;\r\n    filtered = filtered.filter(customer => {\r\n      const contactDate = new Date(customer.contactDate); //  ContactDate  contactDate\r\n      return contactDate >= start && contactDate <= end;\r\n    });\r\n  }\r\n  if (searchTerm.value && selectedField.value) {\r\n    filtered = filtered.filter(customer => {\r\n      const value = customer[selectedField.value];\r\n      return value && value.toString().toLowerCase().includes(searchTerm.value.toLowerCase());\r\n    });\r\n  }\r\n  return filtered;\r\n});\r\n\r\nconst currentPageData = computed(() => {\r\n  if (isRWDMode.value) {\r\n    return filteredCustomers.value.slice(0, loadedItemCount.value);\r\n  } else {\r\n    const start = (currentPage.value - 1) * pageSize.value;\r\n    return filteredCustomers.value.slice(start, start + pageSize.value);\r\n  }\r\n});\r\n\r\nconst loadCustomers = async () => {\r\n  try {\r\n    const res = await CRMService.getCustomerReport();\r\n    const userStore = useUserStore(); //  user store \r\n    console.log(res.data);\r\n    if (userStore.userName === \"\" || userStore.userName === \"\" || userStore.userName === \"\" || userStore.userName === \"\" || userStore.userName === \"\" || userStore.userName === \"vincent\" )\r\n    {\r\n      customers.value = res.data;\r\n    } else {\r\n      customers.value = res.data.filter(item => item.createdByUserId === userStore.userId);\r\n    }\r\n    // currentPageData.value = res.data; //  currentPageData  filteredCustomers\r\n    // console.log(\"customers.value:\",res.data);\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nconst onSearch = () => {\r\n  if (isRWDMode.value) {\r\n    loadedItemCount.value = 30;\r\n  } else {\r\n    currentPage.value = 1;\r\n  }\r\n};\r\n\r\nconst onSelectedFieldChange = () => {\r\n  searchTerm.value = '';\r\n  onSearch();\r\n};\r\n\r\nconst onPageChange = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\nconst editRow = (row) => {\r\n  if (isRWDMode.value && !expandedRowKeys.value.includes(row.id)) {\r\n    expandedRowKeys.value.push(row.id);\r\n  }\r\n  const originalRow = customers.value.find(item => item.id === row.id);\r\n  if (originalRow) {\r\n    const editableRow = JSON.parse(JSON.stringify(originalRow));\r\n    customers.value = customers.value.map(item => item.id === row.id ? editableRow : item);\r\n    row.editing = true;\r\n    editingRowId.value = row.id;\r\n    if (isRWDMode.value && rwdTableRef.value) {\r\n      rwdTableRef.value.toggleRowExpansion(row, true);\r\n    }\r\n  }\r\n};\r\n\r\nconst saveRow = async (row) => {\r\n  try {\r\n    const dataToUpdate = { ...row };\r\n    delete dataToUpdate.id;\r\n    delete dataToUpdate.editing;\r\n    await CRMService.updateCustomerReport(row.id, dataToUpdate);\r\n    ElMessage.success('');\r\n    row.editing = false;\r\n    editingRowId.value = null;\r\n    await loadCustomers();\r\n  } catch (err) {\r\n    console.error(err);\r\n    ElMessage.error('' + (err.response?.data || err.message));\r\n  }\r\n};\r\n\r\n\r\nconst deleteRow = (row) => {\r\n  ElMessageBox.confirm(\r\n    ``,\r\n    '',\r\n    { type: 'warning' }\r\n  ).then(async () => {\r\n    try {\r\n      await CRMService.deleteCustomerReport(row.id);\r\n      ElMessage.success('');\r\n      customers.value = customers.value.filter(item => item.id !== row.id);\r\n    } catch (err) {\r\n      ElMessage.error('');\r\n    }\r\n  }).catch(() => {\r\n    /* Cancel does nothing */\r\n  });\r\n};\r\n\r\nconst cancelEdit = (row) => {\r\n  row.editing = false;\r\n  editingRowId.value = null;\r\n  // RWDrow\r\n  if (isRWDMode.value && rwdTableRef.value && row) {\r\n    rwdTableRef.value.toggleRowExpansion(row, true);\r\n  }\r\n  loadCustomers(); // \r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return '';\r\n  return new Date(date).toLocaleDateString('zh-TW');\r\n};\r\n\r\n\r\nconst handleScroll = () => {\r\n  const el = wrapper.value;\r\n  if (!el || isLoadingMore.value) return;\r\n  const { scrollTop, scrollHeight, clientHeight } = el;\r\n  if (scrollTop + clientHeight >= scrollHeight - 50) {\r\n    loadMore();\r\n  }\r\n};\r\n\r\nconst filteredRowData = computed(() => (row) => {\r\n  return Object.entries(row).filter(([key]) => key !== 'id' && key !== 'editing');\r\n});\r\n\r\nconst loadMore = () => {\r\n  if (loadedItemCount.value < filteredCustomers.value.length) {\r\n    isLoadingMore.value = true;\r\n    setTimeout(() => {\r\n      loadedItemCount.value += 30;\r\n      isLoadingMore.value = false;\r\n    }, 500);\r\n  }\r\n};\r\n\r\nconst mediaQuery = window.matchMedia('(max-width: 768px)');\r\n\r\nconst handleMediaQueryChange = (event) => {\r\n  isRWDMode.value = event.matches;\r\n};\r\n\r\nconst handleRowClick = (row) => {\r\n  const customerName = row.customerName;\r\n  const userRecords = customers.value\r\n    .filter(c => c.customerName === customerName)\r\n    .sort((a, b) => new Date(b.contactDate) - new Date(a.contactDate));\r\n  selectedUserRecords.value = userRecords;\r\n  dialogVisible.value = true;\r\n};\r\n\r\nonMounted(() => {\r\n  loadCustomers();\r\n  //  contactDateRange \r\n  // const today = new Date();\r\n  // const oneMonthAgo = new Date();\r\n  // oneMonthAgo.setMonth(today.getMonth() - 1);\r\n  // const startOfMonthAgo = new Date(oneMonthAgo.getFullYear(), oneMonthAgo.getMonth(), oneMonthAgo.getDate(), 0, 0, 0);\r\n  // const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 23, 59, 59);\r\n  // contactDateRange.value = [startOfMonthAgo, endOfDay];\r\n\r\n  mediaQuery.addEventListener('change', handleMediaQueryChange);\r\n  handleMediaQueryChange(mediaQuery);\r\n\r\n  eventBus.on('customerReportAdded', loadCustomers); // \r\n});\r\n\r\nonUnmounted(() => {\r\n  mediaQuery.removeEventListener('change', handleMediaQueryChange);\r\n  if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll);\r\n  }\r\n  eventBus.off('customerReportAdded', loadCustomers); // \r\n});\r\n\r\nwatch(isRWDMode, async (rwd) => {\r\n  await nextTick();\r\n  if (rwd && wrapper.value) {\r\n    wrapper.value.addEventListener('scroll', handleScroll);\r\n  } else if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll);\r\n  }\r\n});\r\n</script>\r\n\r\n\r\n\r\n<style scoped>\r\n.list-customer-report >>> .el-table__body tr:hover>td {\r\n  background-color: #f5f7fa !important;\r\n  cursor: pointer;\r\n}\r\n\r\n.RWD_List_Table >>> .el-table__body tr:hover>td {\r\n  background-color: #f5f7fa !important;\r\n  cursor: pointer;\r\n}\r\n\r\n\r\n.list-customer-report {\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #000;\r\n  margin: 0.2rem 0rem 0rem 0rem;\r\n}\r\n\r\n.controls-bar {\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  margin: -2.8rem 0rem 0rem 0rem;\r\n  border: 1px solid black;\r\n}\r\n\r\n.wrap {\r\n  border-radius: 4px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .controls-bar {\r\n    width: 100%;\r\n    margin: 1rem auto;\r\n  }\r\n  .RWD_List_Table {\r\n    border: 1px solid black;\r\n  }\r\n}\r\n</style>","import script from \"./ListCustomerReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListCustomerReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListCustomerReport.vue?vue&type=style&index=0&id=3fccba9f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3fccba9f\"]])\n\nexport default __exports__","import script from \"./CustomerReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CustomerReport.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export const caseProgressOptions = [\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n];","export const systemTypeOptions = [\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: 'STEMS', value: 'STEMS' },\r\n  { label: '', value: '' },\r\n  { label: 'EMS', value: 'EMS' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n  { label: '', value: '' },\r\n];","<template>\r\n  <div class=\"fill-case-tracking\" \r\n    :style=\"{\r\n        margin: isRWDMode ? '3rem 3rem 0rem 1rem': '5rem 3rem 0rem 3rem' ,\r\n        width: isRWDMode ? '23rem' : 'auto' ,\r\n        padding: isRWDMode ? '1rem 1rem 1rem 0rem' : '1rem'}\r\n      \">\r\n    <el-form :model=\"formData\" :label-width=\"isRWDMode ? 'auto' : '15rem'\" :rules=\"rules\" ref=\"formRef\">\r\n      <el-row :gutter=\"isRWDMode ? 0 : 20\">\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\"  prop=\"FillDate\">\r\n            <el-date-picker v-model=\"formData.FillDate\" type=\"date\" placeholder=\"\" value-format=\"YYYY-MM-DD\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\" :disabled-date=\"disabledDate\"></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"CaseName\">\r\n            <el-input v-model=\"formData.CaseName\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"CoopUnit\">\r\n            <el-input v-model=\"formData.CoopUnit\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"DeviceUsageCategory\">\r\n            <el-select\r\n              v-model=\"formData.DeviceUsageCategory\"\r\n              multiple\r\n              placeholder=\"\"\r\n              :style=\"{ width: isRWDMode ? '100%' : '100%' }\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in deviceUsageCategoriesData\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        \r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"SystemType\">\r\n            <el-select\r\n              v-model=\"formData.SystemType\"\r\n              multiple\r\n              placeholder=\"\"\r\n              :style=\"{ width: isRWDMode ? '100%' : '100%' }\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in systemTypeOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"DeviceList\">\r\n            <el-input v-model=\"formData.DeviceList\" type=\"textarea\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"(NT$)\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"EstimatedAmount\">\r\n            <el-input v-model=\"formData.EstimatedAmount\" placeholder=\"\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\" ></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"EstimatedDeliveryDate\">\r\n            <el-date-picker v-model=\"formData.EstimatedDeliveryDate\" type=\"date\" placeholder=\"\" value-format=\"YYYY-MM-DD\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\"></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--  -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\" prop=\"CaseProgress\">\r\n            <el-select v-model=\"formData.CaseProgress\" placeholder=\"\" :style=\"{ width: isRWDMode ? '100%' : '100%' }\">\r\n              <el-option\r\n                v-for=\"item in caseProgressOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!-- ID -->\r\n        <el-col :span=\"isRWDMode ? 24 : 6\">\r\n          <el-form-item label=\"\" :label-width=\"isRWDMode ? '7rem' : '120px'\">\r\n            <EmployeeaIdToName :employee-id=\"userStore.userId\" />\r\n          </el-form-item>\r\n        </el-col>\r\n  \r\n      <!--  -->\r\n      <el-col\r\n        :span=\"isRWDMode ? 24 : 6\"\r\n        :style=\"{\r\n          display: 'flex',\r\n          justifyContent: isRWDMode ? 'center' : 'flex-start'\r\n        }\"\r\n      >\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"submitForm\"\r\n          :style=\"{ width: isRWDMode ? '50%' : '50%' }\"\r\n        >\r\n          \r\n        </el-button>\r\n      </el-col>\r\n            </el-row>\r\n    </el-form>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineEmits,  onUnmounted } from 'vue';\r\nimport CRMService from '@/service/CRMService.js';\r\nimport { ElMessage } from 'element-plus';\r\nimport dayjs from 'dayjs';\r\nimport { caseProgressOptions } from '@/configs/caseProgressOptions.js';\r\nimport { systemTypeOptions } from '@/configs/systemTypeOptions.js';\r\nimport {useUserStore} from '@/stores/user.js'\r\nimport EmployeeaIdToName from \"@/components/Common/IdToName/Employee-IdToName.vue\";\r\nconst userStore = useUserStore()\r\nimport eventBus from '@/eventBus';\r\n\r\nconst emit = defineEmits(['caseTrackingSubmitted']);\r\n\r\nconst formRef = ref(null);\r\n\r\nconst formData = ref({\r\n  Id: null,\r\n  FillDate: null,\r\n  CaseName: '',\r\n  CoopUnit: '',\r\n  DeviceUsageCategory: [], // \r\n  SystemType: [], // \r\n  DeviceList: '',\r\n  EstimatedAmount: null,\r\n  EstimatedDeliveryDate: null,\r\n  CaseProgress: '',\r\n});\r\n\r\n\r\nconst rules = {\r\n  Id: [{ required: true, message: '', trigger: 'blur' }],\r\n  FillDate: [{ required: true, message: '', trigger: 'change' }],\r\n  CaseName: [{ required: true, message: '', trigger: 'blur' }],\r\n  CoopUnit: [{ required: true, message: '', trigger: 'blur' }],\r\n  DeviceUsageCategory: [{ type: 'array', required: true, message: '', trigger: 'change' }], // \r\n  SystemType: [{ type: 'array', required: true, message: '', trigger: 'change' }], // \r\n  DeviceList: [{ required: true, message: '', trigger: 'blur' }],\r\n  EstimatedAmount: [{ required: true, message: '', trigger: 'blur' }],\r\n  CaseProgress: [{ required: true, message: '', trigger: 'blur' }],\r\n};\r\n\r\nconst submitForm = () => {\r\n  formRef.value.validate(async (valid) => {\r\n    if (!valid) {\r\n      ElMessage.error('');\r\n      return;\r\n    }\r\n    try {\r\n       // \r\n      const dataToSubmit = { ...formData.value };\r\n      //  SystemType \r\n      if (Array.isArray(dataToSubmit.DeviceUsageCategory)) {\r\n      dataToSubmit.DeviceUsageCategory = dataToSubmit.DeviceUsageCategory.join(',');\r\n      }\r\n      if (Array.isArray(dataToSubmit.SystemType)) {\r\n        dataToSubmit.SystemType = dataToSubmit.SystemType.join(',');\r\n      }\r\n      //  explicitly  Id \r\n      delete dataToSubmit.Id;\r\n      dataToSubmit.salesRepID = userStore.userId;\r\n\r\n      await CRMService.createCaseTracking(dataToSubmit);\r\n      ElMessage.success('');\r\n      formRef.value.resetFields(); // \r\n      formData.value.FillDate = dayjs().format('YYYY-MM-DD'); // \r\n      emit('caseTrackingSubmitted'); // \r\n      \r\n      // \r\n      eventBus.emit('caseTrackingAdded', {\r\n        customerId: formData.value.customerId,\r\n        caseId: formData.value.Id,\r\n        caseName: formData.value.CaseName,\r\n        timestamp: new Date()\r\n      });\r\n      console.log(' caseTrackingAdded');\r\n    } catch (error) {\r\n      console.error(':', error);\r\n      ElMessage.error('');\r\n    }\r\n  });\r\n};\r\n\r\nconst deviceUsageCategoriesData = ref([]);\r\n\r\nconst fetchDeviceUsageCategories = async () => {\r\n  try {\r\n    const res = await CRMService.getDeviceUsageCategories();\r\n    deviceUsageCategoriesData.value = res.data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchDeviceUsageCategories();\r\n  formData.value.FillDate = dayjs().format('YYYY-MM-DD');\r\n});\r\n\r\nconst disabledDate = (time) => {\r\n  return time.getTime() > Date.now();\r\n};\r\n\r\nconst isRWDMode = ref(false); //  RWD \r\n\r\n//  RWD \r\nconst mediaQuery = window.matchMedia('(max-width: 768px)');\r\n\r\nconst handleMediaQueryChange = (event) => {\r\n  isRWDMode.value = event.matches;\r\n};\r\n\r\nonMounted(() => {\r\n  mediaQuery.addEventListener('change', handleMediaQueryChange);\r\n  // \r\n  handleMediaQueryChange(mediaQuery);\r\n});\r\n\r\nonUnmounted(() => {\r\n  mediaQuery.removeEventListener('change', handleMediaQueryChange);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.fill-case-tracking {\r\n  border: 1px solid #000;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n}\r\n</style>","import script from \"./Fill_CaseTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Fill_CaseTracking.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Fill_CaseTracking.vue?vue&type=style&index=0&id=6328ba72&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6328ba72\"]])\n\nexport default __exports__","<template>\r\n  <div \r\n    class=\"wrap\" \r\n    :style=\"{\r\n      width: isRWDMode ? '23rem' : 'auto',\r\n      margin: isRWDMode?  '0rem 2rem 0rem 1rem' : '0rem 2rem 0rem 3rem'\r\n    }\r\n  \">   \r\n\r\n    <div\r\n      ref=\"wrapper\"\r\n      class=\"controls-bar  w-full\"\r\n      :style=\"{\r\n        margin: isRWDMode ? '1rem 1rem 1rem 0rem' : '1rem 0rem 1rem 0rem',\r\n        padding: isRWDMode ? '1rem 1rem 1rem 1rem' : '1rem',\r\n        display: 'flex',\r\n        alignItems: isRWDMode ? 'center' : 'center',\r\n        border: '1px solid black',\r\n        flexDirection: isRWDMode ? 'column' : 'row',\r\n        gap: isRWDMode ? '10px' : '0'\r\n      }\"\r\n    >\r\n      <!-- Date range picker -->\r\n      <span :style=\"{ marginRight: isRWDMode ? '0' : '1rem' }\"></span>\r\n      <div class=\"block\">\r\n        <el-date-picker\r\n          v-model=\"fillDateRange\"\r\n          type=\"daterange\"\r\n          range-separator=\"~\"\r\n          start-placeholder=\"\"\r\n          end-placeholder=\"\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '14rem' }\"\r\n          :disabled-date=\"disabledDate\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Search block -->\r\n      <div\r\n        class=\"search-block\"\r\n        :style=\"{ \r\n          display: 'flex', \r\n          marginLeft: isRWDMode ? '0' : '2rem', \r\n          flexDirection: isRWDMode ? 'column' : 'row', \r\n          alignItems: isRWDMode ? 'center' : 'center', \r\n          gap: '8px' \r\n        }\"\r\n      >\r\n        <el-select v-model=\"selectedField\" placeholder=\"\" :style=\"{ width: isRWDMode ? '100%' : '9rem' }\" @change=\"onSelectedFieldChange\">\r\n          <el-option\r\n            v-for=\"item in searchFields\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n        <el-input\r\n          v-if=\"selectedField !== 'estimatedAmount' && selectedField !== 'deviceUsageCategory' && selectedField !== 'caseProgress' && selectedField !== 'systemType' && selectedField !== 'estimatedDeliveryDate'\"\r\n          v-model=\"searchTerm\"\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @keyup.enter=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n        />\r\n        <el-input\r\n          v-else-if=\"selectedField === 'estimatedAmount'\"\r\n          v-model=\"searchTerm\"\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @keyup.enter=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n          type=\"number\"\r\n        />\r\n        <el-select\r\n          v-else-if=\"selectedField === 'deviceUsageCategory'\"\r\n          v-model=\"searchTerm\"\r\n          multiple\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @change=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in deviceUsageCategoriesData\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-else-if=\"selectedField === 'caseProgress'\"\r\n          v-model=\"searchTerm\"\r\n          multiple\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @change=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in caseProgressOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-else-if=\"selectedField === 'systemType'\"\r\n          v-model=\"searchTerm\"\r\n          multiple\r\n          placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @change=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '200px' }\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in systemTypeOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n        <el-date-picker\r\n          v-else-if=\"selectedField === 'estimatedDeliveryDate'\"\r\n          v-model=\"searchTerm\"\r\n          type=\"daterange\"\r\n          range-separator=\"~\"\r\n          start-placeholder=\"\"\r\n          end-placeholder=\"\"\r\n          clearable\r\n          @clear=\"onSearch\"\r\n          @change=\"onSearch\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '14rem' }\"\r\n          value-format=\"YYYY-MM-DD\"\r\n        />\r\n        <el-button type=\"primary\" :style=\"{  display: 'flex', justifyContent: isRWDMode ? 'center' : 'flex-start' }\" @click=\"onSearch\"></el-button>\r\n      </div>\r\n      <div class=\"btn-totalEstimatedAmount ml-3\">\r\n          <el-button\r\n            type=\"info\"\r\n            :style=\"{  display: 'flex', justifyContent: isRWDMode ? 'center' : 'flex-start' }\"\r\n            @click=\"visible_totalEstimatedAmount = true\">\r\n            \r\n          </el-button>\r\n      </div>\r\n      <!-- Pagination block -->\r\n      <div\r\n        class=\"pagination-block\"\r\n        v-if=\"!isRWDMode\"\r\n        :style=\"\r\n          {\r\n            display: 'flex',\r\n            alignItems: isRWDMode ? 'flex-start' : 'center',\r\n            marginLeft: isRWDMode ? '0' : '2rem',\r\n            flexDirection: isRWDMode ? 'column' : 'row',\r\n            gap: isRWDMode ? '10px' : '0'\r\n          }\r\n        \"\r\n      >\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <el-select\r\n          v-model=\"pageSize\"\r\n          placeholder=\"\"\r\n          :style=\"{ width: isRWDMode ? '100%' : '4rem' }\"\r\n          size=\"small\"\r\n        >\r\n          <el-option\r\n            v-for=\"s in [5, 10, 15, 20, 25, 30]\"\r\n            :key=\"s\"\r\n            :label=\"s\"\r\n            :value=\"s\"\r\n          />\r\n        </el-select>\r\n        <el-text class=\"mx-1\" type=\"info\"></el-text>\r\n        <div :style=\"{ marginLeft: isRWDMode ? '0' : '1rem' }\">\r\n          <el-pagination\r\n            background\r\n            layout=\"prev, pager, next\"\r\n            :total=\"filteredCases.length\"\r\n            :page-size=\"pageSize\"\r\n            v-model:current-page=\"currentPage\"\r\n            @current-change=\"onPageChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <!-- Table -->\r\n    <el-table  v-if=\"!isRWDMode\" class = \"list-case-tracking\" :data=\"currentPageData\" style=\"width: 100%;\">\r\n      <!-- Action column -->\r\n      <el-table-column label=\"\" width=\"140\">\r\n        <template #default=\"{ row }\">\r\n          <div v-if=\"editingRowId !== row.id\">\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click=\"editRow(row)\"\r\n              :disabled=\"!canEditOrDelete(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n            <el-button \r\n              type=\"danger\" \r\n              size=\"small\" \r\n              @click=\"deleteRow(row)\"\r\n              :disabled=\"!canEditOrDelete(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n          <div v-else-if=\"!editingAmountMode\">\r\n            <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n            <el-button type=\"info\" size=\"small\" @click=\"closeEdit()\"></el-button>\r\n          </div>\r\n          <div v-else>\r\n            <el-button type=\"primary\" size=\"small\" disabled></el-button>\r\n            <el-button type=\"danger\" size=\"small\" disabled></el-button>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <!-- Id Date -->\r\n      <el-table-column prop=\"id\" label=\"id\" width=\"10\" v-if=\"false\">\r\n      </el-table-column>\r\n\r\n      <!-- Fill Date -->\r\n      <el-table-column prop=\"fillDate\" label=\"\" width=\"110\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatDate(row.fillDate) }}</span>\r\n          <el-date-picker v-else v-model=\"row.fillDate\" type=\"date\" placeholder=\"\" size=\"small\" value-format=\"YYYY-MM-DD\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n    <!-- SalesRepID -->\r\n    <el-table-column prop=\"salesRepID\" label=\"\" width=\"100\">\r\n      <template #default=\"{ row }\">\r\n        <EmployeeaIdToName :employee-id=\"row.salesRepID\" />\r\n      </template>\r\n    </el-table-column>\r\n\r\n      <!-- Case Name -->\r\n      <el-table-column prop=\"caseName\" label=\"\" width=\"150\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ row.caseName }}</span>\r\n          <el-input v-else v-model=\"row.caseName\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n      <!-- Coop Unit -->\r\n      <el-table-column prop=\"coopUnit\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ row.coopUnit }}</span>\r\n          <el-input v-else v-model=\"row.coopUnit\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n      <!-- Device Usage Category -->\r\n      <el-table-column prop=\"deviceUsageCategory\" label=\"\" width=\"200\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatDeviceUsageCategory(row.deviceUsageCategory) }}</span>\r\n          <el-select\r\n            v-else\r\n            v-model=\"row.deviceUsageCategory\"\r\n            multiple\r\n            placeholder=\"\"\r\n            size=\"small\"\r\n            style=\"width: 100%;\"\r\n            :disabled=\"editingAmountMode\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in deviceUsageCategoriesData\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n      <!-- System Type -->\r\n      <el-table-column prop=\"systemType\" label=\"\"  width=\"200\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatSystemType(row.systemType) }}</span>\r\n          <el-select\r\n            v-else\r\n            v-model=\"row.systemType\"\r\n            multiple\r\n            placeholder=\"\"\r\n            size=\"small\"\r\n            style=\"width: 100%;\"\r\n            :disabled=\"editingAmountMode\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in systemTypeOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n      <!-- Device List -->\r\n      <el-table-column prop=\"deviceList\" label=\"\" width=\"150\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ row.deviceList }}</span>\r\n          <el-input v-else v-model=\"row.deviceList\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n      <!-- Estimated Amount -->\r\n      <el-table-column prop=\"estimatedAmount\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatAmount(row.estimatedAmount) }}</span>\r\n          <el-input v-else v-model=\"row.estimatedAmount\" size=\"small\" style=\"width: 100%;\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <!-- Case Progress -->\r\n      <el-table-column prop=\"caseProgress\" label=\"\" width=\"140\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatCaseProgress(row.caseProgress) }}</span>\r\n          <el-select\r\n            v-else\r\n            v-model=\"row.caseProgress\"\r\n            \r\n            placeholder=\"\"\r\n            size=\"small\"\r\n            style=\"width: 100%;\"\r\n            :disabled=\"editingAmountMode\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in caseProgressOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n\r\n\r\n      <!-- Action column -->\r\n      <el-table-column label=\"\" width=\"140\">\r\n        <template #default=\"{ row }\">\r\n          <div v-if=\"editingRowId !== row.id\">\r\n            <el-button \r\n              type=\"warning\" \r\n              size=\"small\" \r\n              @click=\"editAmount(row)\"\r\n              :disabled=\"!canEditOrDelete(row)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n          <div v-else-if=\"editingAmountMode\">\r\n            <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n            <el-button type=\"info\" size=\"small\" @click=\"closeEdit()\"></el-button>\r\n          </div>\r\n          <div v-else>\r\n            <el-button type=\"warning\" size=\"small\" disabled></el-button>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <!-- fxRate Amount -->\r\n      <el-table-column prop=\"fxRate\" label=\"\" width=\"80\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || !editingAmountMode\">{{ row.fxRate }}</span>\r\n          <el-input v-else v-model=\"row.fxRate\" size=\"small\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <!-- OriginalAmount Amount -->\r\n      <el-table-column prop=\"originalAmount\" label=\"/()\" width=\"170\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || !editingAmountMode\">{{ formatAmount(row.originalAmount) }}</span>\r\n          <el-input v-else v-model=\"row.originalAmount\" size=\"small\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <!-- LocalAmount Amount -->\r\n      <el-table-column prop=\"LocalAmount\" label=\"/()\" width=\"170\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || !editingAmountMode\">{{ formatAmount(row.localAmount) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <!-- Estimated Delivery Date -->\r\n      <el-table-column prop=\"estimatedDeliveryDate\" label=\"\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"editingRowId !== row.id || editingAmountMode\">{{ formatDate(row.estimatedDeliveryDate) }}</span>\r\n          <el-date-picker v-else v-model=\"row.estimatedDeliveryDate\" type=\"date\" placeholder=\"\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n        </template>\r\n      </el-table-column>\r\n\r\n    </el-table>\r\n\r\n    <!-- RWD  -->\r\n    <div\r\n      class=\"table-wrapper\"\r\n      ref=\"rwdTableWrapper\"\r\n      v-infinite-scroll=\"loadMore\"\r\n      :infinite-scroll-disabled=\"loading || noMore\"\r\n      infinite-scroll-distance=\"50\"\r\n      style=\"height: 400px; overflow-y: auto;\"\r\n    >\r\n\r\n        <el-table\r\n          v-if=\"isRWDMode\"\r\n          class=\"RWD_List_Table\"\r\n          :style=\"{ width: isRWDMode ? 'auto' : '20rem' }\"\r\n          :data=\"currentPageData\"\r\n          stripe\r\n          border\r\n          ref=\"rwdTableRef\"\r\n          row-key=\"id\"\r\n          :expand-row-keys=\"expandedRowKeys\"\r\n        >\r\n          <el-table-column type=\"expand\">\r\n                  <template #default=\"{ row }\">\r\n                    <div style=\"padding: 10px;\">\r\n                      <div v-for=\"([key, value]) in filteredRowData(row)\" :key=\"key\" style=\"margin-bottom: 8px;\">\r\n                        <strong v-if=\"fieldLabels[key]\">{{ fieldLabels[key] }}:</strong>\r\n                        <span v-else><strong>{{ key }}:</strong></span>\r\n                        \r\n                        <span v-if=\"editingRowId !== row.id || (editingAmountMode && !['fxRate', 'originalAmount', 'localAmount'].includes(key))\">\r\n                          <span v-if=\"key === 'fillDate'\">{{ formatDate(value) }}</span>\r\n                          <span v-else-if=\"key === 'salesRepID'\"><EmployeeaIdToName :employee-id=\"value\" /></span>\r\n                          <span v-else-if=\"key === 'deviceUsageCategory'\">{{ formatDeviceUsageCategory(value) }}</span>\r\n                          <span v-else-if=\"key === 'systemType'\">{{ formatSystemType(value) }}</span>\r\n                          <span v-else-if=\"key === 'estimatedDeliveryDate'\">{{ formatDate(value) }}</span>\r\n                          <span v-else-if=\"key === 'caseProgress'\">{{ formatCaseProgress(value) }}</span>\r\n                          <span v-else-if=\"key === 'originalAmount'\">{{ formatAmount(value) }}</span>\r\n                          <span v-else-if=\"key === 'localAmount'\">{{ formatAmount(value) }}</span>\r\n                          <span v-else>{{ value }}</span>\r\n                        </span>\r\n                        <span v-else>\r\n                          <el-date-picker v-if=\"key === 'fillDate'\" v-model=\"row.fillDate\" type=\"date\" placeholder=\"\" size=\"small\" value-format=\"YYYY-MM-DD\" :disabled=\"editingAmountMode\" />\r\n                          <el-input v-else-if=\"key === 'caseName'\" v-model=\"row.caseName\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n                          <el-input v-else-if=\"key === 'coopUnit'\" v-model=\"row.coopUnit\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n                          <el-select\r\n                            v-else-if=\"key === 'deviceUsageCategory'\"\r\n                            v-model=\"row.deviceUsageCategory\"\r\n                            multiple\r\n                            placeholder=\"\"\r\n                            size=\"small\"\r\n                            style=\"width: 100%;\"\r\n                            :disabled=\"editingAmountMode\"\r\n                          >\r\n                            <el-option\r\n                              v-for=\"item in deviceUsageCategoriesData\"\r\n                              :key=\"item.id\"\r\n                              :label=\"item.name\"\r\n                              :value=\"item.id\"\r\n                            />\r\n                          </el-select>\r\n                          <el-select\r\n                            v-else-if=\"key === 'systemType'\"\r\n                            v-model=\"row.systemType\"\r\n                            multiple\r\n                            placeholder=\"\"\r\n                            size=\"small\"\r\n                            style=\"width: 100%;\"\r\n                            :disabled=\"editingAmountMode\"\r\n                          >\r\n                            <el-option\r\n                              v-for=\"item in systemTypeOptions\"\r\n                              :key=\"item.value\"\r\n                              :label=\"item.label\"\r\n                              :value=\"item.value\"\r\n                            />\r\n                          </el-select>\r\n                          <el-input v-else-if=\"key === 'deviceList'\" v-model=\"row.deviceList\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n                          <el-input v-else-if=\"key === 'estimatedAmount'\" v-model=\"row.estimatedAmount\" size=\"small\" style=\"width: 100%;\" :disabled=\"editingAmountMode\" type=\"number\" />\r\n                          <el-date-picker v-else-if=\"key === 'estimatedDeliveryDate'\" v-model=\"row.estimatedDeliveryDate\" type=\"date\" placeholder=\"\" size=\"small\" :disabled=\"editingAmountMode\" />\r\n                          <el-select\r\n                            v-else-if=\"key === 'caseProgress'\"\r\n                            v-model=\"row.caseProgress\"\r\n                            placeholder=\"\"\r\n                            size=\"small\"\r\n                            style=\"width: 100%;\"\r\n                            :disabled=\"editingAmountMode\"\r\n                          >\r\n                            <el-option\r\n                              v-for=\"item in caseProgressOptions\"\r\n                              :key=\"item.value\"\r\n                              :label=\"item.label\"\r\n                              :value=\"item.value\"\r\n                            />\r\n                          </el-select>\r\n                          <el-input v-else-if=\"key === 'fxRate'\" v-model=\"row.fxRate\" size=\"small\" />\r\n                          <el-input v-else-if=\"key === 'originalAmount'\" v-model=\"row.originalAmount\" size=\"small\" />\r\n                        </span>\r\n                      </div>\r\n    <div style=\"margin-top: 10px;display:flex;gap:8px;\">\r\n      <!--  &   -->\r\n      <template v-if=\"editingRowId !== row.id\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"editRow(row)\"></el-button>\r\n        <el-button type=\"danger\" size=\"small\" @click=\"deleteRow(row)\"></el-button>\r\n      </template>\r\n      <template v-else-if=\"editingRowId === row.id && !editingAmountMode\">\r\n        <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n        <el-button type=\"info\"    size=\"small\" @click=\"closeEdit()\"></el-button>\r\n      </template>\r\n\r\n      <!--   -->\r\n      <template v-if=\"editingRowId !== row.id\">\r\n        <el-button type=\"warning\" size=\"small\" @click=\"editAmount(row)\"></el-button>\r\n      </template>\r\n      <template v-else-if=\"editingRowId === row.id && editingAmountMode\">\r\n        <el-button type=\"success\" size=\"small\" @click=\"doneEdit(row)\"></el-button>\r\n        <el-button type=\"info\"    size=\"small\" @click=\"closeEdit()\"></el-button>\r\n      </template>\r\n    </div>\r\n                    </div>\r\n                  </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"id\" label=\"id\" width=\"10\" v-if=\"false\" />\r\n          <el-table-column prop=\"fillDate\" label=\"\" width=\"110\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatDate(row.fillDate) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"salesRepID\" label=\"\" width=\"100\">\r\n            <template #default=\"{ row }\">\r\n              <EmployeeaIdToName :employee-id=\"row.salesRepID\" />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"caseName\" label=\"\" width=\"220\" />\r\n          <el-table-column prop=\"coopUnit\" label=\"\" width=\"120\" />\r\n          <el-table-column prop=\"deviceUsageCategory\" label=\"\" width=\"130\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatDeviceUsageCategory(row.deviceUsageCategory) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"systemType\" label=\"\" width=\"130\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatSystemType(row.systemType) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"deviceList\" label=\"\" width=\"150\" />\r\n          <el-table-column prop=\"estimatedAmount\" label=\"\" width=\"120\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatAmount(row.estimatedAmount) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column prop=\"caseProgress\" label=\"\" width=\"140\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatCaseProgress(row.caseProgress) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"fxRate\" label=\"\" width=\"80\" />\r\n          <el-table-column prop=\"originalAmount\" label=\"()\" width=\"150\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatAmount(row.originalAmount) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"LocalAmount\" label=\"()\" width=\"150\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatAmount(row.localAmount) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"estimatedDeliveryDate\" label=\"\" width=\"120\">\r\n            <template #default=\"{ row }\">\r\n              <span>{{ formatDate(row.estimatedDeliveryDate) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!--  /  -->\r\n        <div v-if=\"loading\" class=\"load-more\"></div>\r\n        <div v-if=\"!loading && noMore\" class=\"load-more\"></div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n    <div class=\"card flex justify-center\">\r\n        <Dialog v-model:visible=\"visible_totalEstimatedAmount\" header=\"\" :style=\"{ width: '15rem' }\">\r\n          <div style=\"text-align: center;\">\r\n\r\n            <el-text class=\"mx-1\" style=\"font-size:1rem;\" type=\"primary\" tag=\"b\">{{formatAmount(totalEstimatedAmount)}}</el-text>\r\n          </div>\r\n          \r\n        </Dialog>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, onUnmounted, watch, nextTick } from 'vue';\r\nimport CRMService from '@/service/CRMService';\r\nimport { ElMessageBox, ElMessage } from 'element-plus';\r\nimport { caseProgressOptions } from '@/configs/caseProgressOptions.js';\r\nimport { systemTypeOptions } from '@/configs/systemTypeOptions.js';\r\nimport EmployeeaIdToName from \"@/components/Common/IdToName/Employee-IdToName.vue\";\r\nimport {useUserStore} from '@/stores/user.js'\r\nimport Dialog from 'primevue/dialog';\r\nconst userStore = useUserStore();\r\nconst expandedRowKeys = ref([]);\r\nconst visible_totalEstimatedAmount = ref(false);\r\n\r\nconst totalEstimatedAmount = computed(() => {\r\n  return filteredCases.value.reduce((sum, item) => {\r\n    const amount = Number(item.estimatedAmount);\r\n    return isNaN(amount) ? sum : sum + amount;\r\n  }, 0);\r\n});\r\n// Reactive variables\r\nconst cases = ref([]);\r\nconst fillDateRange = ref([]);\r\nconst selectedField = ref('');\r\nconst searchTerm = ref('');\r\nconst pageSize = ref(10);\r\nconst currentPage = ref(1);\r\nconst editingRowId = ref(null); // Track the currently edited row ID\r\nconst editingAmountMode = ref(null); // Track if in amount editing mode\r\nconst isRWDMode = ref(false); //  RWD \r\nconst isLoadingMore = ref(false); // lazy load \r\nconst loadedItemCount = ref(30); // \r\nconst wrapper = ref(null); //  wrapper ref\r\nconst rwdTableRef = ref(null); //  rwdTableRef\r\n\r\nconst fieldLabels = {\r\n  id: 'ID',\r\n  fillDate: '',\r\n  salesRepID: '',\r\n  caseName: '',\r\n  coopUnit: '',\r\n  deviceUsageCategory: '',\r\n  systemType: '',\r\n  deviceList: '',\r\n  estimatedAmount: '',\r\n  estimatedDeliveryDate: '',\r\n  caseProgress: '',\r\n  fxRate: '',\r\n  originalAmount: '()',\r\n  localAmount: '()',\r\n};\r\n\r\n// Search field options\r\nconst searchFields = [\r\n  { label: '', value: 'caseName' },\r\n  { label: '', value: 'coopUnit' },\r\n  { label: '', value: 'deviceUsageCategory' },\r\n  { label: '', value: 'systemType' },\r\n  { label: '', value: 'caseProgress' },\r\n  { label: '', value: 'estimatedAmount' },\r\n  { label: '', value: 'estimatedDeliveryDate' },\r\n];\r\n\r\n\r\n// Filtered cases\r\nconst filteredCases = computed(() => {\r\n  let filtered = cases.value;\r\n  if (fillDateRange.value && fillDateRange.value.length === 2) {\r\n    const [start, end] = fillDateRange.value;\r\n    filtered = filtered.filter(caseItem => {\r\n      const fillDate = new Date(caseItem.fillDate);\r\n      return fillDate >= start && fillDate <= end;\r\n    });\r\n  }\r\n  if (searchTerm.value) {\r\n    filtered = filtered.filter(caseItem => {\r\n      const value = caseItem[selectedField.value];\r\n      if (selectedField.value === 'estimatedAmount') {\r\n        // \r\n        return value && value.toString().toLowerCase().includes(searchTerm.value.toLowerCase());\r\n      } else if (selectedField.value === 'deviceUsageCategory') {\r\n        if (!searchTerm.value?.length) return true;\r\n\r\n        const itemCategories = Array.isArray(value)\r\n          ? value\r\n          : (typeof value === 'string' ? value.split(',') : []);\r\n\r\n        return searchTerm.value.some(cat =>\r\n          itemCategories.includes(cat)\r\n        );\r\n      } else if (selectedField.value === 'caseProgress') {\r\n        if (!searchTerm.value?.length) return true;\r\n\r\n        const itemProgresses = Array.isArray(value)\r\n          ? value\r\n          : (typeof value === 'string' ? value.split(',') : []);\r\n\r\n        return searchTerm.value.some(selectedProgress =>\r\n          itemProgresses.includes(selectedProgress)\r\n        );\r\n      } else if (selectedField.value === 'systemType') {\r\n        if (!searchTerm.value?.length) return true;\r\n\r\n        const itemSystemTypes = Array.isArray(value)\r\n          ? value\r\n          : (typeof value === 'string' ? value.split(',') : []);\r\n\r\n        return searchTerm.value.some(selectedType =>\r\n          itemSystemTypes.includes(selectedType)\r\n        );\r\n      } else if (selectedField.value === 'estimatedDeliveryDate') {\r\n        if (!searchTerm.value || searchTerm.value.length !== 2) return true;\r\n        const [startDate, endDate] = searchTerm.value;\r\n        const deliveryDate = new Date(value);\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n        return deliveryDate >= start && deliveryDate <= end;\r\n      } else {\r\n\r\n        const term = searchTerm.value.toLowerCase(); // \r\n        return value && value.toString().toLowerCase().includes(term);\r\n      }\r\n    });\r\n  }\r\n  return filtered;\r\n});\r\n\r\n// Current page data\r\nconst currentPageData = computed(() => {\r\n  if (isRWDMode.value) {\r\n    return filteredCases.value.slice(0, loadedItemCount.value); // RWD  loadedItemCount \r\n  } else {\r\n    const start = (currentPage.value - 1) * pageSize.value;\r\n    return filteredCases.value.slice(start, start + pageSize.value); //  RWD \r\n  }\r\n});\r\n\r\n// Load case data\r\nconst loadCases = async () => {\r\n  try {\r\n    const res = await CRMService.getAllCaseTracking();\r\n    cases.value = res.data;\r\n    console.log(res.data);\r\n  } catch (error) {\r\n    console.error('', error);\r\n  }\r\n};\r\n\r\ndefineExpose({\r\n  loadCases\r\n});\r\n\r\n// Search action\r\nconst onSearch = () => {\r\n  if (isRWDMode.value) {\r\n    loadedItemCount.value = 30; // RWD \r\n  } else {\r\n    currentPage.value = 1; //  RWD \r\n  }\r\n};\r\n\r\nconst onSelectedFieldChange = () => {\r\n  if (selectedField.value === 'deviceUsageCategory' || selectedField.value === 'systemType' || selectedField.value === 'caseProgress') {\r\n    searchTerm.value = []; // Clear search term to empty array for multi-select\r\n  } else if (selectedField.value === 'estimatedDeliveryDate') {\r\n    searchTerm.value = []; // Clear search term to empty array for daterange picker\r\n  } else {\r\n    searchTerm.value = ''; // Clear search term to empty string for other fields\r\n  }\r\n  onSearch(); // Trigger search with new field and empty term\r\n};\r\n\r\n// Page change\r\nconst onPageChange = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n// \r\nconst canEditOrDelete = (row) => {\r\n  return row.salesRepID === userStore.userId;\r\n};\r\n\r\n// Edit row\r\nconst editRow = (row) => {\r\n  // \r\n  if (!canEditOrDelete(row)) {\r\n    ElMessage.warning('');\r\n    return;\r\n  }\r\n  // RWD  expandedRowKeys\r\n  if (isRWDMode.value && !expandedRowKeys.value.includes(row.id)) {\r\n    expandedRowKeys.value.push(row.id);\r\n  }\r\n\r\n  const originalRow = cases.value.find(item => item.id === row.id);\r\n  if (originalRow) {\r\n    const editableRow = JSON.parse(JSON.stringify(originalRow));\r\n    if (typeof editableRow.deviceUsageCategory === 'string' && editableRow.deviceUsageCategory) {\r\n      editableRow.deviceUsageCategory = editableRow.deviceUsageCategory.split(',');\r\n    } else {\r\n      editableRow.deviceUsageCategory = [];\r\n    }\r\n    if (typeof editableRow.systemType === 'string' && editableRow.systemType) {\r\n      editableRow.systemType = editableRow.systemType.split(',');\r\n    } else {\r\n      editableRow.systemType = [];\r\n    }\r\n    if (typeof editableRow.caseProgress === 'string' && editableRow.caseProgress) {\r\n      editableRow.caseProgress = editableRow.caseProgress.split(',');\r\n    } else {\r\n      editableRow.caseProgress = [];\r\n    }\r\n\r\n    cases.value = cases.value.map(item => item.id === row.id ? editableRow : item);\r\n    editingRowId.value = row.id;\r\n    editingAmountMode.value = false; // \r\n\r\n    if (isRWDMode.value && rwdTableRef.value) {\r\n      rwdTableRef.value.toggleRowExpansion(row, true); // \r\n    }\r\n  }\r\n};\r\n\r\n// Edit amount\r\nconst editAmount = (row) => {\r\n  // \r\n  if (!canEditOrDelete(row)) {\r\n    ElMessage.warning('');\r\n    return;\r\n  }\r\n  const originalRow = cases.value.find(item => item.id === row.id);\r\n  if (originalRow) {\r\n    const editableRow = JSON.parse(JSON.stringify(originalRow));\r\n    cases.value = cases.value.map(item => item.id === row.id ? editableRow : item);\r\n    editingRowId.value = row.id;\r\n    editingAmountMode.value = true; // \r\n\r\n    if (isRWDMode.value && rwdTableRef.value) {\r\n      rwdTableRef.value.toggleRowExpansion(row, true); // \r\n    }\r\n  }\r\n};\r\n\r\n// Cancel edit\r\nconst closeEdit = (row) => {\r\n  editingRowId.value = null;\r\n  editingAmountMode.value = false;\r\n  if (isRWDMode.value && rwdTableRef.value && row) {\r\n    // RWDrow\r\n    rwdTableRef.value.toggleRowExpansion(row, true);\r\n  }\r\n};\r\n\r\n// Finish edit\r\nconst doneEdit = async (row) => {\r\n  try {\r\n    const dataToUpdate = { ...row };\r\n\r\n    if (!editingAmountMode.value) {\r\n      // \r\n      if (Array.isArray(dataToUpdate.deviceUsageCategory)) {\r\n        dataToUpdate.deviceUsageCategory = dataToUpdate.deviceUsageCategory.join(',');\r\n      }\r\n      if (Array.isArray(dataToUpdate.systemType)) {\r\n        dataToUpdate.systemType = dataToUpdate.systemType.join(',');\r\n      }\r\n      if (Array.isArray(dataToUpdate.caseProgress)) {\r\n        dataToUpdate.caseProgress = dataToUpdate.caseProgress.join(',');\r\n      }\r\n    } else {\r\n      // \r\n      const originalRow = cases.value.find(item => item.id === row.id);\r\n      dataToUpdate.FXRate = row.FXRate === null || row.FXRate === '' ? 0 : row.FXRate;\r\n      dataToUpdate.originalAmount = row.originalAmount === null || row.originalAmount === '' ? 0 : row.originalAmount;\r\n      dataToUpdate.localAmount = row.localAmount === null || row.localAmount === '' ? 0 : row.localAmount;\r\n      // \r\n      for (const key in originalRow) {\r\n        if (!['FXRate', 'originalAmount', 'localAmount', 'id', 'isShow'].includes(key)) {\r\n          dataToUpdate[key] = originalRow[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    delete dataToUpdate.id;\r\n    delete dataToUpdate.isShow;\r\n    \r\n    if (editingAmountMode.value) {\r\n      await CRMService.updateFXRateAndOriginalAmount(row.id, dataToUpdate);\r\n      ElMessage.success('');\r\n    } else {\r\n      await CRMService.updateCaseTracking(row.id, dataToUpdate);\r\n      ElMessage.success('');\r\n    }\r\n    editingRowId.value = null; // Exit edit mode\r\n    editingAmountMode.value = false; // Exit amount editing mode\r\n    await loadCases(); // Reload data to refresh table\r\n  } catch (err) {\r\n    console.error(err);\r\n    ElMessage.error('' + (err.response?.data || err.message));\r\n  }\r\n};\r\n\r\n// Delete row\r\nconst deleteRow = (row) => {\r\n  // \r\n  if (!canEditOrDelete(row)) {\r\n    ElMessage.warning('');\r\n    return;\r\n  }\r\n  \r\n  // console.log(row)\r\n  ElMessageBox.confirm(\r\n    ``,\r\n    '',\r\n    { type: 'warning' }\r\n  ).then(async () => {\r\n    try {\r\n      await CRMService.deleteCaseTracking(row.id);\r\n      ElMessage.success('');\r\n      cases.value = cases.value.filter(item => item.id !== row.id);\r\n    } catch (err) {\r\n      ElMessage.error('');\r\n    }\r\n  }).catch(() => {\r\n    /* Cancel does nothing */\r\n  });\r\n};\r\n\r\n// Format date\r\nconst formatDate = (date) => {\r\n  if (!date) return '';\r\n  return new Date(date).toLocaleDateString('zh-TW');\r\n};\r\n\r\n// Format amount\r\nconst formatAmount = (amount) => {\r\n  if (amount === null || amount === undefined || amount === '') {\r\n    return 0; //  0\r\n  }\r\n  // \r\n  const cleanAmount = String(amount).replace(/[,\\s]/g, '');\r\n  const numericAmount = Number(cleanAmount);\r\n  \r\n  // \r\n  if (isNaN(numericAmount)) {\r\n    return 0; //  0\r\n  }\r\n  \r\n  //  toLocaleString \r\n  return numericAmount.toLocaleString('en-US');\r\n};\r\n\r\n\r\nconst deviceUsageCategoriesData = ref([]);\r\n\r\n// Format device usage category\r\nconst formatDeviceUsageCategory = (categoryIds) => {\r\n  if (!categoryIds) return '';\r\n  \r\n  // 1.  categoryIds  string[]\r\n  let ids;\r\n  if (typeof categoryIds === 'string') {\r\n    ids = categoryIds.split(',');\r\n  } else if (Array.isArray(categoryIds)) {\r\n    ids = categoryIds;\r\n  } else {\r\n    // \r\n    return '';\r\n  }\r\n\r\n  // 2.  id  name\r\n  const names = ids.map(id => {\r\n    const category = deviceUsageCategoriesData.value.find(item => item.id === id);\r\n    return category ? category.name : id;\r\n  });\r\n\r\n  // 3.  join \r\n  return names.join(', ');\r\n};\r\n\r\n// Format case progress\r\nconst formatCaseProgress = (caseProgresses) => {\r\n  if (!caseProgresses) return '';\r\n  let progresses;\r\n  if (typeof caseProgresses === 'string') {\r\n    progresses = caseProgresses.split(',');\r\n  } else if (Array.isArray(caseProgresses)) {\r\n    progresses = caseProgresses;\r\n  } else {\r\n    return '';\r\n  }\r\n  const names = progresses.map(progress => {\r\n    const caseProgress = caseProgressOptions.find(item => item.value === progress);\r\n    return caseProgress ? caseProgress.label : progress;\r\n  });\r\n  return names.join(', ');\r\n};\r\n\r\n// Format system type\r\nconst formatSystemType = (systemTypes) => {\r\n  if (!systemTypes) return '';\r\n  let types;\r\n  if (typeof systemTypes === 'string') {\r\n    types = systemTypes.split(',');\r\n  } else if (Array.isArray(systemTypes)) {\r\n    types = systemTypes;\r\n  } else {\r\n    return '';\r\n  }\r\n  const names = types.map(type => {\r\n    const system = systemTypeOptions.find(item => item.value === type);\r\n    return system ? system.label : type;\r\n  });\r\n  return names.join(', ');\r\n};\r\n\r\nconst fetchDeviceUsageCategories = async () => {\r\n  try {\r\n    const res = await CRMService.getDeviceUsageCategories();\r\n    deviceUsageCategoriesData.value = res.data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n};\r\n\r\n\r\n// Load data on mount\r\nonMounted(() => {\r\n  loadCases();\r\n  fetchDeviceUsageCategories();\r\n  //  fillDateRange 1~\r\n  const today = new Date();\r\n  const oneMonthAgo = new Date();\r\n  oneMonthAgo.setMonth(today.getMonth() - 1);\r\n  const startOfMonthAgo = new Date(oneMonthAgo.getFullYear(), oneMonthAgo.getMonth(), oneMonthAgo.getDate(), 0, 0, 0);\r\n  const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 23, 59, 59);\r\n  fillDateRange.value = [startOfMonthAgo, endOfDay];\r\n});\r\n\r\nconst disabledDate = (time) => {\r\n  return time.getTime() > Date.now();\r\n};\r\n\r\n// \r\nconst handleScroll = () => {\r\n  const el = wrapper.value\r\n  if (!el || isLoadingMore.value) return\r\n  const { scrollTop, scrollHeight, clientHeight } = el\r\n  if (scrollTop + clientHeight >= scrollHeight - 50) {\r\n    loadMore()\r\n  }\r\n}\r\nconst filteredRowData = computed(() => (row) => {\r\n  return Object.entries(row).filter(([key]) => key !== 'id' && key !== 'isShow');\r\n});\r\n\r\n// \r\nconst loadMore = () => {\r\n  if (loadedItemCount.value < filteredCases.value.length) {\r\n    isLoadingMore.value = true;\r\n    setTimeout(() => { // \r\n      loadedItemCount.value += 30; // 30\r\n      isLoadingMore.value = false;\r\n    }, 500);\r\n  }\r\n};\r\n\r\n//  RWD \r\nconst mediaQuery = window.matchMedia('(max-width: 768px)');\r\n\r\nconst handleMediaQueryChange = (event) => {\r\n  isRWDMode.value = event.matches;\r\n};\r\n\r\nonMounted(() => {\r\n  mediaQuery.addEventListener('change', handleMediaQueryChange);\r\n  // \r\n  handleMediaQueryChange(mediaQuery);\r\n});\r\n\r\nonUnmounted(() => {\r\n  mediaQuery.removeEventListener('change', handleMediaQueryChange);\r\n});\r\n\r\nwatch(isRWDMode, async (rwd) => {\r\n  await nextTick()           //  DOM \r\n  if (rwd && wrapper.value) {\r\n    // \r\n    wrapper.value.addEventListener('scroll', handleScroll)\r\n  } else if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll)\r\n  }\r\n})\r\n\r\n// \r\nonUnmounted(() => {\r\n  if (wrapper.value) {\r\n    wrapper.value.removeEventListener('scroll', handleScroll)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.list-case-tracking {\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #000;\r\n  margin: 0.2rem 0rem 0rem 0rem;\r\n}\r\n\r\n.controls-bar {\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  margin: -2.8rem 0rem 0rem 0rem;\r\n  border: 1px solid black; /*  */\r\n}\r\n\r\n.wrap {\r\n  /* background: #fff; */\r\n  border-radius: 4px;\r\n\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .controls-bar {\r\n    width: 100%; /*  RWD  */\r\n    margin: 1rem auto; /*  */\r\n  }\r\n  .RWD_List_Table {\r\n    border: 1px solid black;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./List_CaseTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./List_CaseTracking.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./List_CaseTracking.vue?vue&type=style&index=0&id=00012db3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00012db3\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"ml-6\">\r\n        <Fill_CaseTracking @caseTrackingSubmitted=\"handleCaseTrackingSubmitted\"/>\r\n    </div>\r\n    <div class = \"ml-6\" style=\"padding-right: 1rem;\">\r\n        <List_CaseTracking ref=\"listCaseTrackingRef\"/>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport Fill_CaseTracking from './Fill_CaseTracking.vue';\r\nimport List_CaseTracking from './List_CaseTracking.vue';\r\n\r\nconst listCaseTrackingRef = ref(null);\r\n\r\nconst handleCaseTrackingSubmitted = () => {\r\n  if (listCaseTrackingRef.value) {\r\n    listCaseTrackingRef.value.loadCases();\r\n  }\r\n};\r\n\r\n</script>","import script from \"./CaseTracking.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CaseTracking.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <el-config-provider :locale=\"zhTw\">\r\n    <div class=\"personal-leave-container\">\r\n    <el-card class=\"box-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n          <el-button type=\"primary\" @click=\"refreshData\" :loading=\"loading\" size=\"small\">\r\n            <el-icon><Refresh /></el-icon>\r\n            \r\n          </el-button>\r\n        </div>\r\n      </template>\r\n\r\n      \r\n      <!--  -->\r\n      <div class=\"annual-leave-section mb-5\">\r\n        <el-card class=\"annual-leave-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>{{ currentYear }}  ()</span>\r\n              <el-button type=\"primary\" @click=\"refreshAnnualLeaveData\" :loading=\"annualLeaveLoading\" size=\"small\">\r\n                <el-icon><Refresh /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n\r\n          <!--  -->\r\n          <div class=\"desktop-annual-leave-cards\" v-loading=\"annualLeaveLoading\">\r\n            <div \r\n              v-for=\"item in annualLeaveData\" \r\n              :key=\"item.year\"\r\n              class=\"desktop-annual-leave-card\"\r\n            >\r\n              <!--  -->\r\n              <div class=\"desktop-card-header\">\r\n                <div class=\"year-info\">\r\n                  <h3 class=\"year-title\">{{ item.year }} </h3>\r\n                  <p class=\"hire-date-info\">{{ formatDate(item.hireDate) || '-' }}</p>\r\n                </div>\r\n                <div class=\"usage-overview\">\r\n                  <div class=\"usage-rate-display\">\r\n                    <span class=\"rate-label\"></span>\r\n                    <el-progress \r\n                      :percentage=\"item.usageRate\" \r\n                      :color=\"getProgressColor(item.usageRate)\"\r\n                      :stroke-width=\"12\"\r\n                      :width=\"80\"\r\n                      type=\"circle\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!--  -->\r\n              <div class=\"desktop-card-content\">\r\n                <div class=\"leave-days-section\">\r\n                  <div class=\"section-header\">\r\n                    <h4 class=\"section-title\"></h4>\r\n                    <el-button type=\"primary\" @click=\"refreshAnnualLeaveData\" :loading=\"annualLeaveLoading\" size=\"small\" class=\"refresh-btn\">\r\n                      <el-icon><Refresh /></el-icon>\r\n                      \r\n                    </el-button>\r\n                  </div>\r\n                  <div class=\"days-grid\">\r\n                    <div class=\"day-item special\" v-if=\"shouldShowCurrentYearDays(item)\">\r\n                      <div class=\"day-label\"></div>\r\n                      <div class=\"day-value current-year-days\">{{ item.currentYearDays || '-' }} </div>\r\n                      <div class=\"leave-period-info\" v-if=\"false\">\r\n                        : {{ getCurrentYearLeavePeriod(item) }}\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"day-item special\" v-if=\"shouldShowSixMonthsDays(item)\">\r\n                      <div class=\"day-label\"></div>\r\n                      <div class=\"day-value six-months-days\">{{ getSixMonthsDaysDisplay(item) }} </div>\r\n                      <div class=\"leave-period-info\" v-if=\"false\" >\r\n                        : {{ getSixMonthsLeavePeriod(item) }}\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"day-item total-hours-card\">\r\n                      <div class=\"day-label\"></div>\r\n                      <div class=\"day-value total-hours\">{{ item.totalHours }} </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!--  -->\r\n                <div class=\"usage-section\">\r\n                  <h4 class=\"section-title\"></h4>\r\n                  <div class=\"usage-grid\">\r\n                    <div class=\"usage-item used\">\r\n                      <div class=\"usage-icon\"></div>\r\n                      <div class=\"usage-info\">\r\n                        <div class=\"usage-label\"></div>\r\n                        <div class=\"usage-value used-days\">{{ item.usedDays }} </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"usage-item used\">\r\n                      <div class=\"usage-icon\"></div>\r\n                      <div class=\"usage-info\">\r\n                        <div class=\"usage-label\"></div>\r\n                        <div class=\"usage-value used-hours\">{{ item.usedHours }} </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"usage-item remaining\">\r\n                      <div class=\"usage-icon\"></div>\r\n                      <div class=\"usage-info\">\r\n                        <div class=\"usage-label\"></div>\r\n                        <div class=\"usage-value\" :class=\"getRemainingDaysClass(item.remainingDays)\">{{ item.remainingDays }} </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"usage-item remaining\">\r\n                      <div class=\"usage-icon\"></div>\r\n                      <div class=\"usage-info\">\r\n                        <div class=\"usage-label\"></div>\r\n                        <div class=\"usage-value\" :class=\"getRemainingHoursClass(item.remainingHours)\">{{ item.remainingHours }} </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <!--  -->\r\n            <div v-if=\"annualLeaveData.length === 0\" class=\"empty-state\">\r\n              <el-empty description=\"\" />\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"mobile-cards annual-leave-mobile-cards\" v-loading=\"annualLeaveLoading\">\r\n            <div \r\n              v-for=\"item in annualLeaveData\" \r\n              :key=\"item.year\"\r\n              class=\"annual-leave-mobile-card\"\r\n            >\r\n              <div class=\"mobile-card-header\">\r\n                <span class=\"year-badge\">{{ item.year }} </span>\r\n                <span class=\"hire-date-mobile\">{{ formatDate(item.hireDate) || '-' }}</span>\r\n              </div>\r\n              \r\n              <div class=\"mobile-card-content\">\r\n                <div class=\"mobile-card-row\" v-if=\"shouldShowCurrentYearDays(item)\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <div class=\"mobile-value-container\">\r\n                    <span class=\"mobile-value current-year-days-mobile\">{{ item.currentYearDays || '-' }} </span>\r\n                    <div class=\"mobile-leave-period\" v-if=\"getCurrentYearLeavePeriod(item)\">\r\n                      : {{ getCurrentYearLeavePeriod(item) }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\" v-if=\"shouldShowSixMonthsDays(item)\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <div class=\"mobile-value-container\">\r\n                    <span class=\"mobile-value six-months-days-mobile\">{{ getSixMonthsDaysDisplay(item) }} </span>\r\n                    <div class=\"mobile-leave-period\" v-if=\"getSixMonthsLeavePeriod(item)\">\r\n                      : {{ getSixMonthsLeavePeriod(item) }}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <span class=\"mobile-value total-hours-mobile\">{{ item.totalHours }} </span>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <span class=\"mobile-value used-days-mobile\">{{ item.usedDays }} </span>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <span class=\"mobile-value used-hours-mobile\">{{ item.usedHours }} </span>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <span class=\"mobile-value\" :class=\"getRemainingDaysClass(item.remainingDays)\">{{ item.remainingDays }} </span>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <span class=\"mobile-value\" :class=\"getRemainingHoursClass(item.remainingHours)\">{{ item.remainingHours }} </span>\r\n                </div>\r\n                \r\n                <div class=\"mobile-card-row\">\r\n                  <span class=\"mobile-label\"></span>\r\n                  <div class=\"mobile-progress\">\r\n                    <el-progress \r\n                      :percentage=\"item.usageRate\" \r\n                      :color=\"getProgressColor(item.usageRate)\"\r\n                      :stroke-width=\"6\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"annual-leave-reminder\" v-if=\"annualLeaveData.length > 0\">\r\n            <el-alert\r\n              v-if=\"getAnnualLeaveAlert().type\"\r\n              :title=\"getAnnualLeaveAlert().title\"\r\n              :description=\"getAnnualLeaveAlert().description\"\r\n              :type=\"getAnnualLeaveAlert().type\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"remaining-hours-section mb-5\" v-if=\"false\">\r\n        <el-card class=\"remaining-hours-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>{{ currentYear }} </span>\r\n              <el-button type=\"primary\" @click=\"refreshRemainingHours\" :loading=\"remainingHoursLoading\" size=\"small\">\r\n                <el-icon><Refresh /></el-icon>\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n\r\n          <!--  -->\r\n          <div class=\"remaining-hours-cards\" v-loading=\"remainingHoursLoading\" v-if=\"filteredLeaveTypes.length > 0\">\r\n            <div \r\n              v-for=\"leaveType in filteredLeaveTypes\" \r\n              :key=\"leaveType.LeaveTypeCode\"\r\n              class=\"remaining-hours-card-item\"\r\n            >\r\n              <div class=\"remaining-hours-icon\">\r\n                <el-icon><Stopwatch /></el-icon>\r\n              </div>\r\n              <div class=\"remaining-hours-info\">\r\n                <div class=\"remaining-hours-label\">{{ leaveType.LeaveTypeName }}</div>\r\n                <div class=\"remaining-hours-value\">{{ getRemainingHours(leaveType) }} </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div v-else-if=\"!remainingHoursLoading\" class=\"empty-state\">\r\n            <el-empty description=\"\" />\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"mobile-cards\" v-loading=\"remainingHoursLoading\">\r\n            <div \r\n              v-for=\"leaveType in filteredLeaveTypes\" \r\n              :key=\"leaveType.LeaveTypeCode\"\r\n              class=\"leave-type-card\"\r\n            >\r\n              <div class=\"leave-type-name\">{{ leaveType.LeaveTypeName }}</div>\r\n              <div class=\"leave-type-hours\">{{ getRemainingHours(leaveType) }} </div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!--  -->\r\n  \r\n      <div class=\"annual-leave-summary-section mb-5\" v-if=\"false\">\r\n        <el-card class=\"annual-leave-summary-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>{{ selectedYear }} </span>\r\n              <div class=\"year-selector\">\r\n                <el-select v-model=\"selectedYear\" @change=\"refreshAnnualLeaveSummary\" size=\"small\" style=\"width: 100px;\">\r\n                  <el-option\r\n                    v-for=\"year in availableYears\"\r\n                    :key=\"year\"\r\n                    :label=\"year\"\r\n                    :value=\"year\"\r\n                  />\r\n                </el-select>\r\n                <el-button type=\"primary\" @click=\"refreshAnnualLeaveSummary\" :loading=\"annualLeaveSummaryLoading\" size=\"small\">\r\n                  <el-icon><Refresh /></el-icon>\r\n                  \r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </template>\r\n\r\n          <!--  -->\r\n          <div class=\"annual-summary-cards\" v-loading=\"annualLeaveSummaryLoading\" v-if=\"Object.keys(annualLeaveSummaryData).length > 0\">\r\n            <div \r\n              v-for=\"(typeName, typeKey) in leaveTypeNames\" \r\n              :key=\"typeKey\"\r\n              class=\"annual-summary-card-item\"\r\n            >\r\n              <div class=\"annual-summary-icon\"></div>\r\n              <div class=\"annual-summary-info\">\r\n                <div class=\"annual-summary-label\">{{ typeName }}</div>\r\n                <div class=\"annual-summary-value\">{{ Math.round(annualLeaveSummaryData[typeKey] || 0) }} </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div v-else-if=\"!annualLeaveSummaryLoading\" class=\"empty-state\">\r\n            <el-empty description=\"\" />\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"mobile-cards\" v-loading=\"annualLeaveSummaryLoading\">\r\n            <div \r\n              v-for=\"(typeName, typeKey) in leaveTypeNames\" \r\n              :key=\"typeKey\"\r\n              class=\"leave-type-card\"\r\n            >\r\n              <div class=\"leave-type-name\">{{ typeName }}</div>\r\n              <div class=\"leave-type-hours\">{{ Math.round(annualLeaveSummaryData[typeKey] || 0) }} </div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"monthly-leave-summary-section mb-5\">\r\n        <el-card class=\"monthly-leave-summary-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>{{ formatMonthDisplay(selectedMonth) }} </span>\r\n              <div class=\"month-selector\">\r\n                <el-button type=\"primary\" @click=\"refreshMonthlySummary\" :loading=\"monthlySummaryLoading\" size=\"small\">\r\n                  <el-icon><Refresh /></el-icon>\r\n                  \r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </template>\r\n\r\n          <!--  -->\r\n          <div class=\"monthly-summary-cards\" v-loading=\"monthlySummaryLoading\" v-if=\"Object.keys(monthlySummaryData).length > 0\">\r\n            <div \r\n              v-for=\"(typeName, typeKey) in leaveTypeNames\" \r\n              :key=\"typeKey\"\r\n              class=\"monthly-summary-card-item\"\r\n            >\r\n              <div class=\"monthly-summary-icon\"></div>\r\n              <div class=\"monthly-summary-info\">\r\n                <div class=\"monthly-summary-label\">{{ typeName }}</div>\r\n                <div class=\"monthly-summary-value\">{{ (monthlySummaryData[typeKey] || 0).toFixed(1) }} </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div v-else-if=\"!monthlySummaryLoading\" class=\"empty-state\">\r\n            <el-empty description=\"\" />\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"mobile-cards\" v-loading=\"monthlySummaryLoading\">\r\n            <div \r\n              v-for=\"(typeName, typeKey) in leaveTypeNames\" \r\n              :key=\"typeKey\"\r\n              class=\"leave-type-card\"\r\n            >\r\n              <div class=\"leave-type-name\">{{ typeName }}</div>\r\n              <div class=\"leave-type-hours\">{{ (monthlySummaryData[typeKey] || 0).toFixed(1) }} </div>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"filter-section\">\r\n        <el-form :model=\"queryForm\" class=\"filter-form\">\r\n          <div class=\"filter-row\">\r\n            <div class=\"filter-item\">\r\n              <label class=\"filter-label\"></label>\r\n              <el-date-picker\r\n                v-model=\"selectedMonth\"\r\n                type=\"month\"\r\n                placeholder=\"\"\r\n                format=\"YYYYMM\"\r\n                value-format=\"YYYY-MM\"\r\n                @change=\"handleMonthChange\"\r\n                size=\"large\"\r\n                class=\"date-picker\"\r\n              />\r\n            </div>\r\n            \r\n            <div class=\"filter-item\">\r\n              <label class=\"filter-label\"></label>\r\n              <el-select \r\n                v-model=\"queryForm.leaveType\" \r\n                placeholder=\"\" \r\n                @change=\"handleLeaveTypeChange\"\r\n                size=\"default\"\r\n                class=\"leave-type-select\"\r\n              >\r\n                <el-option label=\"\" value=\"\" />\r\n                <el-option label=\"\" value=\"AnnualLeave\" />\r\n                <el-option label=\"\" value=\"SickLeave\" />\r\n                <el-option label=\"\" value=\"PersonalLeave\" />\r\n                <el-option label=\"\" value=\"MenstrualLeave\" />\r\n                <el-option label=\"\" value=\"OfficialLeave\" />\r\n                <el-option label=\"\" value=\"WorkInjuryLeave\" />\r\n                <el-option label=\"\" value=\"FamilyCareLeave\" />\r\n                <el-option label=\"\" value=\"MarriageLeave\" />\r\n                <el-option label=\"\" value=\"MaternityLeave\" />\r\n                <el-option label=\"\" value=\"PrenatalCheckupLeave\" />\r\n                <el-option label=\"\" value=\"PaternityLeave\" />\r\n                <el-option label=\"\" value=\"FuneralLeave\" />\r\n                <el-option label=\"\" value=\"JobSeekingLeave\" />\r\n              </el-select>\r\n            </div>\r\n            \r\n            <div class=\"filter-item\">\r\n              <el-button \r\n                type=\"primary\" \r\n                @click=\"queryLeaveRecords\" \r\n                :loading=\"loading\"\r\n                size=\"default\"\r\n                class=\"query-button\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <el-card class=\"leave-records-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n            <!--  -  -->\r\n            <el-button \r\n              v-if=\"leaveRecords.length > 0\" \r\n              type=\"success\" \r\n              @click=\"captureLeaveRecords\" \r\n              :loading=\"captureLoading\" \r\n              size=\"small\"\r\n            >\r\n              <el-icon><Camera /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <!--  -->\r\n        <div ref=\"leaveRecordsRef\" class=\"desktop-leave-records-list\" v-loading=\"loading\">\r\n        <div \r\n          v-for=\"record in leaveRecords\" \r\n          :key=\"record.leaveRequestID\"\r\n          class=\"desktop-leave-record-row\"\r\n          @click.stop=\"openWFDialog(record.leaveRequestID)\"\r\n          title=\"\"\r\n        >\r\n          <!--  -->\r\n          <div class=\"record-row-header\">\r\n            <div class=\"record-main-info\">\r\n              <div class=\"request-id-section\">\r\n                <el-link \r\n                  class=\"request-id-value request-id-link\" \r\n                  type=\"primary\" \r\n                  :underline=\"false\"\r\n                >\r\n                  {{ record.leaveRequestID }}\r\n                </el-link>\r\n              </div>\r\n              <div class=\"leave-type-section\">\r\n                <el-tag :type=\"getLeaveTypeTagType(record.leaveType)\" size=\"default\">\r\n                  {{ getLeaveTypeName(record.leaveType) }}\r\n                </el-tag>\r\n              </div>\r\n              <div class=\"date-range-section\">\r\n                <span class=\"date-range-text\">\r\n                  {{ formatDate(record.leaveStartDate) }} {{ formatTime(record.leaveStartTime) }} \r\n                   {{ formatDate(record.leaveEndDate) }} {{ formatTime(record.leaveEndTime) }}\r\n                </span>\r\n              </div>\r\n              <div class=\"hours-section\">\r\n                <span class=\"hours-text\">{{ formatLeaveHours(record.leaveTotalInUnitsOfHours, record.leaveTotalInUnitsOfMinutes) }}</span>\r\n              </div>\r\n              <div class=\"apply-date-section\">\r\n                <span class=\"apply-date-text\">{{ formatDate(record.applyDate) }}</span>\r\n              </div>\r\n              <!--  -->\r\n              <div class=\"agent-section\" v-if=\"record.agentEmployeeName\">\r\n                <span class=\"agent-label\"></span>\r\n                <span class=\"agent-value\">{{ record.agentEmployeeName }}</span>\r\n              </div>\r\n              <!--  -->\r\n              <div class=\"supervisor-section\" v-if=\"record.supervisorName\">\r\n                <span class=\"supervisor-label\"></span>\r\n                <span class=\"supervisor-value\">{{ record.supervisorName }}</span>\r\n              </div>\r\n              <!--  -->\r\n              <div class=\"reason-section\" v-if=\"record.reason\">\r\n                <span class=\"reason-label\"></span>\r\n                <span class=\"reason-value\">{{ record.reason }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <div v-if=\"leaveRecords.length === 0\" class=\"empty-state\">\r\n          <el-empty description=\"\" />\r\n        </div>\r\n      </div>\r\n\r\n        <!--  -->\r\n        <div class=\"mobile-cards leave-records-mobile-cards\" v-loading=\"loading\">\r\n        <div \r\n          v-for=\"record in leaveRecords\" \r\n          :key=\"record.leaveRequestID\"\r\n          class=\"leave-record-mobile-card\"\r\n        >\r\n          <div class=\"mobile-card-header\">\r\n            <el-link \r\n              class=\"request-id-badge request-id-link-mobile\" \r\n              type=\"primary\" \r\n              :underline=\"false\"\r\n              @click=\"openWFDialog(record.leaveRequestID)\"\r\n            >\r\n              {{ record.leaveRequestID }}\r\n            </el-link>\r\n            <el-tag :type=\"getLeaveTypeTagType(record.leaveType)\" size=\"small\">\r\n              {{ getLeaveTypeName(record.leaveType) }}\r\n            </el-tag>\r\n          </div>\r\n          \r\n          <div class=\"mobile-card-content\">\r\n            <div class=\"mobile-card-row\">\r\n              <span class=\"mobile-label\"></span>\r\n              <div class=\"mobile-value date-range-mobile\">\r\n                <div>{{ formatDate(record.leaveStartDate) }} {{ formatTime(record.leaveStartTime) }}</div>\r\n                <div class=\"end-date\"> {{ formatDate(record.leaveEndDate) }} {{ formatTime(record.leaveEndTime) }}</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\">\r\n              <span class=\"mobile-label\"></span>\r\n              <span class=\"mobile-value leave-hours-mobile\">{{ formatLeaveHours(record.leaveTotalInUnitsOfHours, record.leaveTotalInUnitsOfMinutes) }}</span>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\">\r\n              <span class=\"mobile-label\">{{ getCurrentMonthLabel() }}</span>\r\n              <div class=\"mobile-value monthly-hours-mobile\">\r\n                <span class=\"hours-value\">{{ record.monthlyAccumulatedHours || 0 }}</span>\r\n                <span class=\"hours-unit\"></span>\r\n                <span class=\"month-label\">{{ getMonthLabel() }}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\" v-if=\"record.agentEmployeeName\">\r\n              <span class=\"mobile-label\"></span>\r\n              <span class=\"mobile-value\">{{ record.agentEmployeeName }}</span>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\" v-if=\"record.supervisorName\">\r\n              <span class=\"mobile-label\"></span>\r\n              <span class=\"mobile-value\">{{ record.supervisorName }}</span>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\" v-if=\"record.reason\">\r\n              <span class=\"mobile-label\"></span>\r\n              <span class=\"mobile-value reason-mobile\">{{ record.reason }}</span>\r\n            </div>\r\n            \r\n            <div class=\"mobile-card-row\">\r\n              <span class=\"mobile-label\"></span>\r\n              <span class=\"mobile-value\">{{ formatDate(record.applyDate) }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </el-card>\r\n\r\n      <!--  -->\r\n      <div class=\"pagination-container\" v-if=\"total > 0\">\r\n        <el-pagination\r\n          v-model:current-page=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n\r\n\r\n      <!--  -->\r\n      <DetailRelatedWFDialog \r\n        :visible=\"isWFDialogVisible\"\r\n        :doc=\"selectedDoc\"\r\n        @close=\"closeWFDialog\"\r\n        :lock-scroll=\"true\"\r\n        :append-to-body=\"true\"\r\n        :center=\"true\"\r\n        class=\"centered-dialog\"\r\n      />\r\n\r\n    </el-card>\r\n  </div>\r\n  </el-config-provider>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { Refresh, Camera, Stopwatch } from '@element-plus/icons-vue';\r\nimport { useUserStore } from '../../stores/user.js';\r\nimport FinanceService from '../../service/FinanceService.js';\r\nimport ReferenceDataService from '../../service/ReferenceDataService.js';\r\nimport SpecialLeaveService from '../../service/SpecialLeaveService.js';\r\nimport DetailRelatedWFDialog from '../WorkFlow/WF/Detail_Related_WF_Dialog.vue';\r\n\r\nconst userStore = useUserStore();\r\nconst loading = ref(false);\r\nconst leaveRecords = ref([]);\r\nconst total = ref(0);\r\nconst currentPage = ref(1);\r\nconst pageSize = ref(20);\r\n\r\n// \r\nconst captureLoading = ref(false);\r\nconst leaveRecordsRef = ref(null);\r\n// \r\nconst currentDate = new Date();\r\nconst currentMonth = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}`;\r\nconst selectedMonth = ref(currentMonth);\r\n\r\n// \r\nconst annualLeaveLoading = ref(false);\r\nconst annualLeaveData = ref([]);\r\nconst currentYear = ref(new Date().getFullYear());\r\n\r\n// \r\nconst annualLeaveSummaryLoading = ref(false);\r\nconst annualLeaveSummaryData = ref({});\r\nconst selectedYear = ref(new Date().getFullYear());\r\n\r\n// \r\nconst selectedSummaryMonth = ref(currentMonth);\r\nconst monthlySummaryData = ref({});\r\nconst monthlySummaryLoading = ref(false);\r\n\r\n// \r\nconst remainingHoursLoading = ref(false);\r\nconst leaveTypeRules = ref([]);\r\nconst userLeaveRecords = ref([]);\r\n\r\n// \r\nconst isWFDialogVisible = ref(false);\r\nconst selectedDoc = ref(null);\r\n\r\n\r\n// \r\nconst availableYears = computed(() => {\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [];\r\n  for (let i = currentYear - 5; i <= currentYear + 1; i++) {\r\n    years.push(i);\r\n  }\r\n  return years;\r\n});\r\n\r\nconst queryForm = reactive({\r\n  startDate: '',\r\n  endDate: '',\r\n  leaveType: ''\r\n});\r\n\r\n// \r\nconst leaveTypeNames = {\r\n  'AnnualLeave': '',\r\n  'SickLeave': '',\r\n  'PersonalLeave': '',\r\n  'MenstrualLeave': '',\r\n  'OfficialLeave': '',\r\n  'WorkInjuryLeave': '',\r\n  'FamilyCareLeave': '',\r\n  'MarriageLeave': '',\r\n  'MaternityLeave': '',\r\n  'PrenatalCheckupLeave': '',\r\n  'PaternityLeave': '',\r\n  'FuneralLeave': '',\r\n  'JobSeekingLeave': ''\r\n};\r\n\r\n// \r\nconst leaveTypeTagTypes = {\r\n  'AnnualLeave': 'success',\r\n  'SickLeave': 'warning',\r\n  'PersonalLeave': 'info',\r\n  'MenstrualLeave': 'danger',\r\n  'OfficialLeave': 'primary',\r\n  'WorkInjuryLeave': 'warning',\r\n  'FamilyCareLeave': 'info',\r\n  'MarriageLeave': 'success',\r\n  'MaternityLeave': 'danger',\r\n  'PrenatalCheckupLeave': 'warning',\r\n  'PaternityLeave': 'primary',\r\n  'FuneralLeave': 'info',\r\n  'JobSeekingLeave': 'warning'\r\n};\r\n\r\n\r\n// \r\nconst captureLeaveRecords = async () => {\r\n  if (!leaveRecordsRef.value) {\r\n    ElMessage.error('');\r\n    return;\r\n  }\r\n\r\n  captureLoading.value = true;\r\n  \r\n  try {\r\n    //  html2canvas\r\n    const html2canvas = (await import('html2canvas')).default;\r\n    \r\n    // \r\n    const isMobile = window.innerWidth <= 768;\r\n    \r\n    // \r\n    const options = {\r\n      useCORS: true,\r\n      allowTaint: true,\r\n      scale: 2, // \r\n      backgroundColor: '#ffffff',\r\n      width: isMobile ? window.innerWidth - 32 : undefined, // \r\n      height: undefined,\r\n      scrollX: 0,\r\n      scrollY: 0\r\n    };\r\n\r\n    // \r\n    const canvas = await html2canvas(leaveRecordsRef.value, options);\r\n    \r\n    // \r\n    const now = new Date();\r\n    const timestamp = now.toISOString().slice(0, 19).replace(/[:-]/g, '');\r\n    const deviceType = isMobile ? 'Mobile' : 'Desktop';\r\n    const fileName = `_${deviceType}_${timestamp}`;\r\n\r\n    // JPG  PDF\r\n    const result = await ElMessageBox.confirm(\r\n      '',\r\n      '',\r\n      {\r\n        distinguishCancelAndClose: true,\r\n        confirmButtonText: 'JPG ',\r\n        cancelButtonText: 'PDF ',\r\n        type: 'info'\r\n      }\r\n    ).catch((action) => {\r\n      if (action === 'cancel') {\r\n        return 'pdf';\r\n      }\r\n      throw action;\r\n    });\r\n\r\n    if (result === 'confirm' || result === true) {\r\n      //  JPG\r\n      const link = document.createElement('a');\r\n      link.download = `${fileName}.jpg`;\r\n      link.href = canvas.toDataURL('image/jpeg', 0.9);\r\n      link.click();\r\n      ElMessage.success('JPG ');\r\n    } else if (result === 'pdf') {\r\n      //  PDF\r\n      const { jsPDF } = await import('jspdf');\r\n      \r\n      const imgData = canvas.toDataURL('image/jpeg', 0.9);\r\n      const imgWidth = canvas.width;\r\n      const imgHeight = canvas.height;\r\n      \r\n      //  PDF  (A4: 210 x 297 mm)\r\n      const pdfWidth = isMobile ? 210 : 297; // \r\n      const pdfHeight = isMobile ? 297 : 210;\r\n      const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);\r\n      const finalWidth = imgWidth * ratio;\r\n      const finalHeight = imgHeight * ratio;\r\n      \r\n      const pdf = new jsPDF({\r\n        orientation: isMobile ? 'portrait' : 'landscape',\r\n        unit: 'mm',\r\n        format: 'a4'\r\n      });\r\n      \r\n      // \r\n      const x = (pdfWidth - finalWidth) / 2;\r\n      const y = (pdfHeight - finalHeight) / 2;\r\n      \r\n      pdf.addImage(imgData, 'JPEG', x, y, finalWidth, finalHeight);\r\n      pdf.save(`${fileName}.pdf`);\r\n      ElMessage.success('PDF ');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error(':', error);\r\n    if (error !== 'cancel' && error !== 'close') {\r\n      ElMessage.error('');\r\n    }\r\n  } finally {\r\n    captureLoading.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst queryLeaveRecords = async () => {\r\n  if (!userStore.userId) {\r\n    ElMessage.error('');\r\n    return;\r\n  }\r\n  \r\n  loading.value = true;\r\n  try {\r\n    const params = {\r\n      userId: userStore.userId,\r\n      page: currentPage.value,\r\n      pageSize: pageSize.value,\r\n      startDate: queryForm.startDate,\r\n      endDate: queryForm.endDate,\r\n      leaveType: queryForm.leaveType\r\n    };\r\n    \r\n    const response = await FinanceService.getPersonalLeaveRecords(params);\r\n    // console.log(\":\",response.data);\r\n    const records = response.data.records || [];\r\n    \r\n    // \r\n    const recordsWithMonthlyHours = await calculateMonthlyAccumulatedHours(records);\r\n    \r\n    leaveRecords.value = recordsWithMonthlyHours;\r\n    // console.log(\"leaveRecords:\",leaveRecords);\r\n    total.value = response.data.total || 0;\r\n    \r\n    ElMessage.success(` ${total.value} `);\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message));\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst refreshData = () => {\r\n  currentPage.value = 1;\r\n  queryLeaveRecords();\r\n};\r\n\r\n// \r\nconst handleMonthChange = (month) => {\r\n  // console.log(':', month);\r\n  if (month) {\r\n    // \r\n    const year = month.split('-')[0];\r\n    const monthNum = month.split('-')[1];\r\n    queryForm.startDate = `${year}-${monthNum}-01`;\r\n    // \r\n    const lastDay = new Date(year, monthNum, 0).getDate();\r\n    queryForm.endDate = `${year}-${monthNum}-${lastDay.toString().padStart(2, '0')}`;\r\n    \r\n    // \r\n    selectedSummaryMonth.value = month;\r\n  } else {\r\n    queryForm.startDate = '';\r\n    queryForm.endDate = '';\r\n    selectedSummaryMonth.value = '';\r\n  }\r\n  \r\n  // \r\n  queryLeaveRecords();\r\n  calculateMonthlySummary();\r\n};\r\n\r\n// \r\nconst handleLeaveTypeChange = () => {\r\n  currentPage.value = 1;\r\n};\r\n\r\n// \r\nconst handleSizeChange = (newSize) => {\r\n  pageSize.value = newSize;\r\n  currentPage.value = 1;\r\n  queryLeaveRecords();\r\n};\r\n\r\nconst handleCurrentChange = (newPage) => {\r\n  currentPage.value = newPage;\r\n  queryLeaveRecords();\r\n};\r\n\r\n// \r\nconst getLeaveTypeName = (leaveType) => {\r\n  return leaveTypeNames[leaveType] || leaveType;\r\n};\r\n\r\nconst getLeaveTypeTagType = (leaveType) => {\r\n  return leaveTypeTagTypes[leaveType] || 'info';\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString('zh-TW');\r\n};\r\n\r\nconst formatTime = (timeString) => {\r\n  if (!timeString) return '';\r\n  return timeString.substring(0, 5); //  HH:MM \r\n};\r\n\r\nconst formatLeaveHours = (hours, minutes) => {\r\n  //  hours  minutes \r\n  const totalHours = hours || (minutes || 0) / 60;\r\n  // \r\n  return totalHours % 1 === 0 ? `${totalHours}` : `${totalHours.toFixed(1)}`;\r\n};\r\n\r\n// \r\nconst calculateMonthlyAccumulatedHours = async (records) => {\r\n  const recordsWithMonthlyHours = [];\r\n  \r\n  // \r\n  const currentDate = new Date();\r\n  const currentYear = currentDate.getFullYear();\r\n  const currentMonth = currentDate.getMonth() + 1; // getMonth()  0-11 +1\r\n  \r\n  // \r\n  const monthlyHoursCache = {};\r\n  \r\n  for (const record of records) {\r\n    try {\r\n      const leaveType = record.leaveType;\r\n      \r\n      // \r\n      if (!(leaveType in monthlyHoursCache)) {\r\n        // \r\n        const monthlyParams = {\r\n          userId: userStore.userId,\r\n          page: 1,\r\n          pageSize: 1000, // \r\n          startDate: `${currentYear}-${currentMonth.toString().padStart(2, '0')}-01`,\r\n          endDate: `${currentYear}-${currentMonth.toString().padStart(2, '0')}-31`,\r\n          leaveType: leaveType\r\n        };\r\n        \r\n        const monthlyResponse = await FinanceService.getPersonalLeaveRecords(monthlyParams);\r\n        const monthlyRecords = monthlyResponse.data.records || [];\r\n        \r\n        //  - \r\n        let monthlyHours = 0;\r\n        monthlyRecords.forEach(r => {\r\n          const hours = (r.leaveTotalInUnitsOfHours || 0);\r\n          const minutes = (r.leaveTotalInUnitsOfMinutes || 0);\r\n          monthlyHours += hours + (minutes / 60);\r\n        });\r\n        \r\n        monthlyHoursCache[leaveType] = parseFloat(monthlyHours.toFixed(1));\r\n      }\r\n      \r\n      recordsWithMonthlyHours.push({\r\n        ...record,\r\n        monthlyAccumulatedHours: monthlyHoursCache[leaveType]\r\n      });\r\n    } catch (error) {\r\n      console.error(':', error);\r\n      //  0\r\n      recordsWithMonthlyHours.push({\r\n        ...record,\r\n        monthlyAccumulatedHours: 0\r\n      });\r\n    }\r\n  }\r\n  \r\n  return recordsWithMonthlyHours;\r\n};\r\n\r\n// \r\nconst getMonthLabel = () => {\r\n  const currentDate = new Date();\r\n  const month = currentDate.getMonth() + 1;\r\n  return `${month}`;\r\n};\r\n\r\n// \r\nconst getCurrentMonthLabel = () => {\r\n  const currentDate = new Date();\r\n  const month = currentDate.getMonth() + 1;\r\n  return `${month}`;\r\n};\r\n\r\n// \r\nconst calculateAnnualLeaveSummary = async () => {\r\n  // console.log(' :', selectedYear.value);\r\n  annualLeaveSummaryLoading.value = true;\r\n  try {\r\n    //  summaryData \r\n    const summaryData = {};\r\n    \r\n    // console.log(` : ${selectedYear.value}-01-01  ${selectedYear.value}-12-31`);\r\n    \r\n    // \r\n    for (const [typeKey, typeName] of Object.entries(leaveTypeNames)) {\r\n      try {\r\n        // console.log(`\\n  ${typeName} (${typeKey})`);\r\n        \r\n        const params = {\r\n          userId: userStore.userId,\r\n          page: 1,\r\n          pageSize: 1000, // \r\n          startDate: `${selectedYear.value}-01-01`,\r\n          endDate: `${selectedYear.value}-12-31`,\r\n          leaveType: typeKey\r\n        };\r\n        // console.log(` API:`, JSON.stringify(params, null, 2));\r\n        \r\n        const response = await FinanceService.getPersonalLeaveRecords(params);\r\n        const records = response.data.records || [];\r\n        \r\n        // console.log(` ${typeName} API:`, {\r\n        //   recordCount: records.length,\r\n        //   records: records.map(r => ({\r\n        //     id: r.leaveRequestID,\r\n        //     type: r.leaveType,\r\n        //     date: r.leaveStartDate,\r\n        //     hours: r.leaveTotalInUnitsOfHours,\r\n        //     minutes: r.leaveTotalInUnitsOfMinutes\r\n        //   }))\r\n        // });\r\n        \r\n        // \r\n        const invalidRecords = records.filter(record => record.leaveType !== typeKey);\r\n        if (invalidRecords.length > 0) {\r\n          // console.error(` API`, {\r\n          //   expectedType: typeKey,\r\n          //   invalidRecords: invalidRecords.map(r => ({ id: r.leaveRequestID, type: r.leaveType }))\r\n          // });\r\n        }\r\n        \r\n        // \r\n        const validRecords = records.filter(record => record.leaveType === typeKey);\r\n        \r\n        //  -  totalHours\r\n        let totalHours = 0;\r\n        validRecords.forEach((record) => {\r\n          const hours = (record.leaveTotalInUnitsOfHours || 0);\r\n          const minutes = (record.leaveTotalInUnitsOfMinutes || 0);\r\n          const recordHours = hours + (minutes / 60);\r\n          totalHours += recordHours;\r\n          // console.log(`    ${index + 1}: ${record.leaveRequestID} = ${hours}${minutes} (${recordHours.toFixed(1)})`);\r\n        });\r\n        \r\n        // \r\n        summaryData[typeKey] = parseFloat(totalHours.toFixed(1));\r\n        // console.log(` ${typeName} : ${summaryData[typeKey]} `);\r\n        \r\n      } catch (error) {\r\n        console.error(`  ${typeName} :`, error);\r\n        summaryData[typeKey] = 0;\r\n      }\r\n    }\r\n    \r\n    // console.log(' :', JSON.stringify(summaryData, null, 2));\r\n    \r\n    //  annualLeaveSummaryData\r\n    annualLeaveSummaryData.value = JSON.parse(JSON.stringify(summaryData));\r\n    \r\n    // console.log('  annualLeaveSummaryData:', JSON.stringify(annualLeaveSummaryData.value, null, 2));\r\n    \r\n  } catch (error) {\r\n    console.error(' :', error);\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message));\r\n    annualLeaveSummaryData.value = {};\r\n  } finally {\r\n    annualLeaveSummaryLoading.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst refreshAnnualLeaveSummary = () => {\r\n  calculateAnnualLeaveSummary();\r\n};\r\n\r\n// \r\nconst calculateMonthlySummary = async () => {\r\n  //  selectedSummaryMonth\r\n  const targetMonth = selectedSummaryMonth.value || selectedMonth.value;\r\n  // console.log(' :', targetMonth);\r\n  monthlySummaryLoading.value = true;\r\n  try {\r\n    //  summaryData \r\n    const summaryData = {};\r\n    \r\n    if (!targetMonth) {\r\n      // console.log(' ');\r\n      monthlySummaryData.value = {};\r\n      return;\r\n    }\r\n    \r\n    // \r\n    const year = targetMonth.split('-')[0];\r\n    const monthNum = targetMonth.split('-')[1];\r\n    const startDate = `${year}-${monthNum}-01`;\r\n    const lastDay = new Date(year, monthNum, 0).getDate();\r\n    const endDate = `${year}-${monthNum}-${lastDay.toString().padStart(2, '0')}`;\r\n    \r\n    // console.log(` : ${startDate}  ${endDate}`);\r\n    \r\n    // \r\n    for (const [typeKey, typeName] of Object.entries(leaveTypeNames)) {\r\n      try {\r\n        // console.log(`\\n  ${typeName} (${typeKey})`);\r\n        \r\n        const params = {\r\n          userId: userStore.userId,\r\n          page: 1,\r\n          pageSize: 1000, // \r\n          startDate: startDate,\r\n          endDate: endDate,\r\n          leaveType: typeKey\r\n        };\r\n        // console.log(` API:`, JSON.stringify(params, null, 2));\r\n        \r\n        const response = await FinanceService.getPersonalLeaveRecords(params);\r\n        const records = response.data.records || [];\r\n        \r\n        // console.log(` ${typeName} API:`, {\r\n        //   recordCount: records.length,\r\n        //   records: records.map(r => ({\r\n        //     id: r.leaveRequestID,\r\n        //     type: r.leaveType,\r\n        //     date: r.leaveStartDate,\r\n        //     hours: r.leaveTotalInUnitsOfHours,\r\n        //     minutes: r.leaveTotalInUnitsOfMinutes\r\n        //   }))\r\n        // });\r\n        \r\n        // \r\n        const invalidRecords = records.filter(record => record.leaveType !== typeKey);\r\n        if (invalidRecords.length > 0) {\r\n          // console.error(` API`, {\r\n          //   expectedType: typeKey,\r\n          //   invalidRecords: invalidRecords.map(r => ({ id: r.leaveRequestID, type: r.leaveType }))\r\n          // });\r\n        }\r\n        \r\n        // \r\n        const validRecords = records.filter(record => record.leaveType === typeKey);\r\n        \r\n        //  -  totalHours\r\n        let totalHours = 0;\r\n        validRecords.forEach((record) => {\r\n          const hours = (record.leaveTotalInUnitsOfHours || 0);\r\n          // const minutes = (record.leaveTotalInUnitsOfMinutes || 0); //\r\n          const recordHours = hours\r\n          totalHours += recordHours;\r\n          // console.log(`    ${index + 1}: ${record.leaveRequestID} = ${hours}${minutes} (${recordHours.toFixed(1)})`);\r\n        });\r\n        \r\n        // Object.freeze\r\n        summaryData[typeKey] = parseFloat(totalHours.toFixed(1));\r\n        // console.log(` ${typeName} : ${summaryData[typeKey]} `);\r\n        \r\n      } catch (error) {\r\n        console.error(`  ${typeName} :`, error);\r\n        summaryData[typeKey] = 0;\r\n      }\r\n    }\r\n    \r\n    // console.log(' :', JSON.stringify(summaryData, null, 2));\r\n    \r\n    //  monthlySummaryData\r\n    monthlySummaryData.value = JSON.parse(JSON.stringify(summaryData));\r\n    \r\n    // console.log('  monthlySummaryData:', JSON.stringify(monthlySummaryData.value, null, 2));\r\n    \r\n  } catch (error) {\r\n    console.error(' :', error);\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message));\r\n    monthlySummaryData.value = {};\r\n  } finally {\r\n    monthlySummaryLoading.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst refreshMonthlySummary = () => {\r\n  // \r\n  selectedSummaryMonth.value = selectedMonth.value;\r\n  calculateMonthlySummary();\r\n};\r\n\r\n// \r\nconst formatMonthDisplay = (monthStr) => {\r\n  if (!monthStr) return '';\r\n  const [year, month] = monthStr.split('-');\r\n  return `${year}${month}`;\r\n};\r\n\r\n// \r\nconst calculateAnnualLeaveData = async () => {\r\n  annualLeaveLoading.value = true;\r\n  try {\r\n    //console.log('ID:', userStore.userId);\r\n    \r\n    // 1. \r\n    // console.log('...');\r\n    const employeeResponse = await ReferenceDataService.getEmployeeData();\r\n    // console.log(':', employeeResponse.data);\r\n    \r\n    const employees = employeeResponse.data;\r\n    const employeeData = employees.find(emp => emp.id === userStore.userId);\r\n    // console.log(':', employeeData);\r\n    \r\n    if (!employeeData) {\r\n      throw new Error(`ID ${userStore.userId} `);\r\n    }\r\n    \r\n    if (!employeeData.startDate) {\r\n      throw new Error(` ${userStore.userId} `);\r\n    }\r\n\r\n    // 2.  ()\r\n    const today = new Date();\r\n    // const currentDateString = today.toISOString().split('T')[0] + 'T00:00:00';\r\n    \r\n    // \r\n    const hireDateObj = new Date(employeeData.startDate);\r\n    \r\n    // \r\n    // \r\n    const hireYear = hireDateObj.getFullYear();\r\n    const currentYear = today.getFullYear();\r\n    \r\n    let targetYear;\r\n    if (hireYear === currentYear) {\r\n        // \r\n        targetYear = currentYear + 1;\r\n    } else {\r\n        // \r\n        targetYear = currentYear;\r\n    }\r\n    \r\n    const yearStartDate = new Date(targetYear, 0, 1).toISOString(); //  01-01\r\n    \r\n    // \r\n    const anniversaryDate = new Date(targetYear, hireDateObj.getMonth(), hireDateObj.getDate()).toISOString();\r\n    \r\n    // 11\r\n    const targetYearCalculationDate = new Date(targetYear, 0, 1, 0, 0, 0).toISOString();\r\n    \r\n    const specialLeaveRequest = {\r\n      hireDate: employeeData.startDate,\r\n      leaveSystemType: 2, // \r\n      calculationDate: targetYearCalculationDate, // 1/1\r\n      customYearStartDate: yearStartDate, // customYearStartDate\r\n      anniversaryDate: anniversaryDate // \r\n    };\r\n    // console.log(' ():', specialLeaveRequest);\r\n\r\n    //  API\r\n    // console.log(' API...');\r\n    const specialLeaveResponse = await SpecialLeaveService.calculateSpecialLeave(specialLeaveRequest);\r\n    // console.log(':', specialLeaveResponse.data);\r\n    \r\n    const totalLeaveDays = specialLeaveResponse.data.specialLeaveDays;\r\n    const totalLeaveHours = totalLeaveDays * 8; // 8\r\n    // console.log(`: ${totalLeaveDays}  = ${totalLeaveHours} `);\r\n\r\n    // 3. \r\n    const usedAnnualLeaveParams = {\r\n      userId: userStore.userId,\r\n      page: 1,\r\n      pageSize: 1000, // \r\n      startDate: `${currentYear}-01-01`,\r\n      endDate: `${currentYear}-12-31`,\r\n      leaveType: 'AnnualLeave'\r\n    };\r\n    // console.log(\"  FinanceService.getPersonalLeaveRecords(usedAnnualLeaveParams): \",usedAnnualLeaveParams);\r\n    const usedLeaveResponse = await FinanceService.getPersonalLeaveRecords(usedAnnualLeaveParams);\r\n    const usedRecords = usedLeaveResponse.data.records || [];\r\n    \r\n    // \r\n    const annualLeaveRecords = usedRecords.filter(record => record.leaveType === 'AnnualLeave');\r\n    const usedHours = annualLeaveRecords.reduce((total, record) => {\r\n      console.log(\"total:\",total,\"record\",record);\r\n      return total + (record.leaveTotalInUnitsOfMinutes || 0) / 60;\r\n    }, 0);\r\n\r\n    const remainingHours = Math.max(0, totalLeaveHours - usedHours);\r\n    const usageRate = totalLeaveHours > 0 ? Math.round((usedHours / totalLeaveHours) * 100) : 0;\r\n\r\n    // \r\n    const usedDays = (usedHours / 8).toFixed(1);\r\n    const remainingDays = (remainingHours / 8).toFixed(1);\r\n\r\n    // \r\n    const hireDateForDisplay = specialLeaveResponse.data.hireDate || '-';\r\n    // 4. API\r\n    // API\r\n    const currentYearDays = totalLeaveDays.toFixed(1);\r\n    \r\n    //  getSixMonthsDaysDisplay \r\n    \r\n    annualLeaveData.value = [{\r\n      year: currentYear.value,\r\n      hireDate: hireDateForDisplay,\r\n      currentYearDays: currentYearDays,\r\n      sixMonthsToAnniversaryDays: specialLeaveResponse.data.sixMonthsToAnniversaryDays,\r\n      totalHours: totalLeaveHours.toFixed(1),\r\n      usedDays: usedDays,\r\n      usedHours: usedHours.toFixed(1),\r\n      remainingDays: remainingDays,\r\n      remainingHours: remainingHours.toFixed(1),\r\n      usageRate: usageRate,\r\n      calculationFormula: `: ${specialLeaveResponse.data.calculationFormula}`,\r\n      sixMonthsCalculationFormula: specialLeaveResponse.data.sixMonthsCalculationFormula,\r\n      sixMonthsLeaveStartDate: specialLeaveResponse.data.sixMonthsLeaveStartDate,\r\n      sixMonthsLeaveEndDate: specialLeaveResponse.data.sixMonthsLeaveEndDate\r\n    }];\r\n\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error(': ' + (error.response?.data?.message || error.message));\r\n    annualLeaveData.value = [];\r\n  } finally {\r\n    annualLeaveLoading.value = false;\r\n  }\r\n};\r\n\r\n// \r\nconst refreshAnnualLeaveData = () => {\r\n  calculateAnnualLeaveData();\r\n};\r\n\r\n// \r\nconst openWFDialog = (documentID, documentType = 'LR') => {\r\n  selectedDoc.value = { \r\n    documentID: documentID, \r\n    documentTypeID: documentType \r\n  }; // LR: , OR: \r\n  isWFDialogVisible.value = true;\r\n};\r\n\r\n// \r\nconst closeWFDialog = () => {\r\n  isWFDialogVisible.value = false;\r\n  selectedDoc.value = null;\r\n};\r\n\r\n\r\n// \r\nconst getRemainingHoursClass = (remainingHours) => {\r\n  const hours = parseFloat(remainingHours);\r\n  if (hours <= 8) return 'remaining-hours-low';\r\n  if (hours <= 24) return 'remaining-hours-medium';\r\n  return 'remaining-hours-high';\r\n};\r\n\r\n// \r\nconst getRemainingDaysClass = (remainingDays) => {\r\n  const days = parseFloat(remainingDays);\r\n  if (days <= 1) return 'remaining-days-low';\r\n  if (days <= 3) return 'remaining-days-medium';\r\n  return 'remaining-days-high';\r\n};\r\n\r\n// \r\nconst getProgressColor = (percentage) => {\r\n  if (percentage >= 80) return '#f56c6c';\r\n  if (percentage >= 60) return '#e6a23c';\r\n  return '#67c23a';\r\n};\r\n\r\n// \r\nconst calculateEmployeeSeniority = (hireDate) => {\r\n  if (!hireDate) return { totalMonths: 0, years: 0, months: 0, days: 0 };\r\n  \r\n  const hireDateObj = new Date(hireDate);\r\n  const today = new Date();\r\n  \r\n  // \r\n  let totalMonths = (today.getFullYear() - hireDateObj.getFullYear()) * 12;\r\n  totalMonths += today.getMonth() - hireDateObj.getMonth();\r\n  \r\n  // \r\n  if (today.getDate() < hireDateObj.getDate()) {\r\n    totalMonths--;\r\n  }\r\n  \r\n  // \r\n  const years = Math.floor(totalMonths / 12);\r\n  const months = totalMonths % 12;\r\n  \r\n  // \r\n  let tempDate = new Date(hireDateObj);\r\n  tempDate.setFullYear(tempDate.getFullYear() + years);\r\n  tempDate.setMonth(tempDate.getMonth() + months);\r\n  \r\n  const diffTime = today.getTime() - tempDate.getTime();\r\n  const days = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n  \r\n  return { totalMonths, years, months, days };\r\n};\r\n\r\n// \r\nconst shouldShowCurrentYearDays = (item) => {\r\n  if (!item?.hireDate) return false;\r\n\r\n  const hire = new Date(item.hireDate);\r\n  const Y = new Date().getFullYear();\r\n  const yearStart = new Date(Y, 0, 1);                  //  1/1\r\n  const yearEnd   = new Date(Y, 11, 31, 23, 59, 59, 999); //  12/31\r\n\r\n  // ()\r\n  const monthsAtYearStart =\r\n    (yearStart.getFullYear() - hire.getFullYear()) * 12 +\r\n    (yearStart.getMonth() - hire.getMonth()) -\r\n    (yearStart.getDate() < hire.getDate() ? 1 : 0);\r\n\r\n  // A)   \r\n  if (monthsAtYearStart >= 12) return true;\r\n\r\n  // B)\r\n  const senNow = calculateEmployeeSeniority(item.hireDate); //  totalMonths\r\n\r\n  ////shouldShowSixMonthsDays \r\n  const lastYearEnd = new Date(Y - 1, 11, 31, 23, 59, 59, 999);\r\n  const monthsAtLYE = monthsDiffAt(item.hireDate, lastYearEnd);\r\n  const crossedSixThisYear = monthsAtLYE >0 && monthsAtLYE < 6 && senNow.totalMonths >= 6;\r\n  //console.log(\"crossedSixThisYear: \",crossedSixThisYear)\r\n  if (crossedSixThisYear) return true;\r\n  //// shouldShowSixMonthsDays \r\n\r\n  if  (senNow.years<1){\r\n    return false;\r\n  }\r\n\r\n  // C)    3 + (7 - ) \r\n  const sixMonthDate = new Date(hire);\r\n  sixMonthDate.setMonth(sixMonthDate.getMonth() + 6);\r\n\r\n  return sixMonthDate >= yearStart && sixMonthDate <= yearEnd;\r\n};\r\n\r\n// \r\nconst shouldShowSixMonthsDays = (item) => {\r\n  if (!item?.hireDate) return false;\r\n\r\n  const now = new Date();\r\n  const Y = now.getFullYear();\r\n  const lastYearEnd = new Date(Y - 1, 11, 31, 23, 59, 59, 999);\r\n\r\n  // \r\n  const senNow = calculateEmployeeSeniority(item.hireDate); //  totalMonths\r\n\r\n  \r\n  // \r\n  const monthsAtLYE = monthsDiffAt(item.hireDate, lastYearEnd);\r\n  \r\n  //console.log(\"calculateEmployeeSeniority :\",senNow);\r\n  //console.log(\"monthsAtLYE:\",monthsAtLYE);\r\n  const crossedSixThisYear = monthsAtLYE >0 && monthsAtLYE < 6 && senNow.totalMonths >= 6;\r\n  //console.log(\"crossedSixThisYear: \",crossedSixThisYear)\r\n  if (crossedSixThisYear) return false;\r\n  if(senNow.years>0) return false; // \r\n  return senNow.totalMonths < 12;\r\n};\r\n\r\nconst monthsDiffAt = (hire, asOf) => {\r\n  const h = new Date(hire); h.setHours(0,0,0,0);\r\n  const a = new Date(asOf); a.setHours(0,0,0,0);\r\n  let m =\r\n    (a.getFullYear() - h.getFullYear()) * 12 +\r\n    (a.getMonth() - h.getMonth());\r\n  if (a.getDate() < h.getDate()) m -= 1;\r\n  return Math.max(0, m);\r\n};\r\n\r\n\r\n// \r\nconst getSixMonthsDaysDisplay = (item) => {\r\n  if (!item.hireDate) return '0';\r\n  \r\n  const seniority = calculateEmployeeSeniority(item.hireDate);\r\n  \r\n  // 60\r\n  if (seniority.totalMonths < 6) {\r\n    return '0';\r\n  }\r\n  \r\n  // 61\r\n  if (item.sixMonthsToAnniversaryDays !== null && item.sixMonthsToAnniversaryDays !== undefined) {\r\n    return parseFloat(item.sixMonthsToAnniversaryDays).toFixed(1);\r\n  }\r\n  \r\n  return '0';\r\n};\r\n\r\n// \r\nconst getAnnualLeaveAlert = () => {\r\n  if (annualLeaveData.value.length === 0) return { type: null };\r\n  \r\n  const data = annualLeaveData.value[0];\r\n  const remainingHours = parseFloat(data.remainingHours);\r\n  const usageRate = data.usageRate;\r\n  \r\n  // \r\n  const now = new Date();\r\n  const yearEnd = new Date(currentYear.value, 11, 31);\r\n  const monthsToYearEnd = Math.max(0, Math.ceil((yearEnd - now) / (1000 * 60 * 60 * 24 * 30)));\r\n  \r\n  if (remainingHours <= 8) {\r\n    return {\r\n      type: 'error',\r\n      title: '',\r\n      description: ` ${remainingHours} `\r\n    };\r\n  } else if (monthsToYearEnd <= 2 && remainingHours > 24) {\r\n    return {\r\n      type: 'warning',\r\n      title: '',\r\n      description: ` ${monthsToYearEnd}  ${remainingHours} `\r\n    };\r\n  } else if (usageRate >= 80) {\r\n    return {\r\n      type: 'success',\r\n      title: '',\r\n      description: ` ${usageRate}% `\r\n    };\r\n  }\r\n  \r\n  return { type: null };\r\n};\r\n\r\n// \r\n//  MaxHoursPerYear  null \r\nconst filteredLeaveTypes = computed(() => {\r\n  if (!Array.isArray(leaveTypeRules.value)) {\r\n    return []\r\n  }\r\n  \r\n  return leaveTypeRules.value.filter(leaveType => \r\n    leaveType.LeaveTypeCode !== 'AnnualLeave' && \r\n    leaveType.MaxHoursPerYear !== null && \r\n    leaveType.MaxHoursPerYear > 0\r\n  )\r\n})\r\n\r\n// \r\nconst getRemainingHours = (leaveType) => {\r\n  const usedHours = getUserUsedHours(leaveType.LeaveTypeCode)\r\n  \r\n  // 0\r\n  if (usedHours === 0) {\r\n    return '0'\r\n  }\r\n  \r\n  const maxHours = leaveType.MaxHoursPerYear || 0\r\n  const remaining = maxHours - usedHours\r\n  // \r\n  return Math.round(Math.max(0, remaining)).toString()\r\n}\r\n\r\n// \r\nconst getUserUsedHours = (leaveTypeCode) => {\r\n  if (!Array.isArray(userLeaveRecords.value)) {\r\n    return 0\r\n  }\r\n  \r\n  const usedHours = userLeaveRecords.value\r\n    .filter(record => \r\n      record.LeaveType === leaveTypeCode && \r\n      new Date(record.ApplyDate).getFullYear() === currentYear.value\r\n    )\r\n    .reduce((total, record) => total + (record.LeaveTotalInUnitsOfHours || 0), 0)\r\n  \r\n  // 0\r\n  return usedHours || 0\r\n}\r\n\r\n//  yyyymmdd \r\nconst formatDateToChinese = (dateString) => {\r\n  if (!dateString) return '';\r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}${month}${day}`;\r\n};\r\n\r\n// \r\nconst getCurrentYearLeavePeriod = (item) => {\r\n  if (!item || !item.currentYearDays || item.currentYearDays === '-') {\r\n    return null;\r\n  }\r\n  \r\n  // \r\n  const nextYear = new Date().getFullYear() + 1;\r\n  const startDate = `${nextYear}-01-01`;\r\n  const endDate = `${nextYear}-12-31`;\r\n  \r\n  return `${formatDateToChinese(startDate)}${formatDateToChinese(endDate)}`;\r\n};\r\n\r\n// \r\nconst getSixMonthsLeavePeriod = (item) => {\r\n  if (!item || !item.sixMonthsToAnniversaryDays || item.sixMonthsToAnniversaryDays === '-') {\r\n    return null;\r\n  }\r\n  \r\n  // 6\r\n  if (item.hireDate) {\r\n    const hireDate = new Date(item.hireDate);\r\n    const hireYear = hireDate.getFullYear();\r\n    \r\n    // 6\r\n    const sixMonthsAfterHire = new Date(hireDate);\r\n    sixMonthsAfterHire.setMonth(sixMonthsAfterHire.getMonth() + 6);\r\n    \r\n    // \r\n    const endOfHireYear = `${hireYear}-12-31`;\r\n    \r\n    const startDate = sixMonthsAfterHire.toISOString().split('T')[0];\r\n    \r\n    return `${formatDateToChinese(startDate)}${formatDateToChinese(endOfHireYear)}`;\r\n  }\r\n  \r\n  return null; // \r\n};\r\n\r\n// \r\nconst fetchLeaveTypeRules = async () => {\r\n  try {\r\n    //  API \r\n    // const response = await FormService.getLeaveTypeRules()\r\n    // leaveTypeRules.value = response.data || []\r\n    \r\n    // \r\n    leaveTypeRules.value = [\r\n      { LeaveTypeCode: 'SickLeave', LeaveTypeName: '', MaxHoursPerYear: 240 },\r\n      { LeaveTypeCode: 'PersonalLeave', LeaveTypeName: '', MaxHoursPerYear: 112 },\r\n      { LeaveTypeCode: 'MenstrualLeave', LeaveTypeName: '', MaxHoursPerYear: 24 },\r\n      { LeaveTypeCode: 'FamilyCareLeave', LeaveTypeName: '', MaxHoursPerYear: 56 },\r\n      { LeaveTypeCode: 'FuneralLeave', LeaveTypeName: '', MaxHoursPerYear: 64 },\r\n      { LeaveTypeCode: 'MarriageLeave', LeaveTypeName: '', MaxHoursPerYear: 64 },\r\n      { LeaveTypeCode: 'MaternityLeave', LeaveTypeName: '', MaxHoursPerYear: 448 },\r\n      { LeaveTypeCode: 'PrenatalCheckupLeave', LeaveTypeName: '', MaxHoursPerYear: 56 },\r\n      { LeaveTypeCode: 'PaternityLeave', LeaveTypeName: '', MaxHoursPerYear: 56 }\r\n    ]\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    leaveTypeRules.value = []\r\n  }\r\n}\r\n\r\n// \r\nconst fetchUserLeaveRecords = async () => {\r\n  try {\r\n    //  API \r\n    // const response = await FormService.getUserLeaveRecords(userStore.userId, currentYear.value)\r\n    // userLeaveRecords.value = response.data || []\r\n    \r\n    // \r\n    userLeaveRecords.value = [\r\n      {\r\n        LeaveType: 'PersonalLeave',\r\n        ApplyDate: '2025-08-25T00:00:00',\r\n        LeaveTotalInUnitsOfHours: 8\r\n      },\r\n      {\r\n        LeaveType: 'PersonalLeave', \r\n        ApplyDate: '2025-08-25T00:00:00',\r\n        LeaveTotalInUnitsOfHours: 8\r\n      },\r\n      {\r\n        LeaveType: 'SickLeave',\r\n        ApplyDate: '2025-08-25T00:00:00', \r\n        LeaveTotalInUnitsOfHours: 8\r\n      }\r\n    ]\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    userLeaveRecords.value = []\r\n  }\r\n}\r\n\r\n// \r\nconst refreshRemainingHours = async () => {\r\n  remainingHoursLoading.value = true\r\n  try {\r\n    await Promise.all([\r\n      fetchLeaveTypeRules(),\r\n      fetchUserLeaveRecords()\r\n    ])\r\n  } finally {\r\n    remainingHoursLoading.value = false\r\n  }\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  // \r\n  handleMonthChange(selectedMonth.value);\r\n  \r\n  calculateAnnualLeaveData();\r\n  refreshRemainingHours();\r\n  calculateAnnualLeaveSummary();\r\n  calculateMonthlySummary();\r\n\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.personal-leave-container {\r\n  padding: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-items: center;\r\n  margin-bottom: 20px;\r\n  padding: 1rem;\r\n  background-color: #f8f9fa;\r\n  border-radius: 6px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n\r\n.stat-item {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #409eff;\r\n}\r\n\r\n.el-table {\r\n  font-size: 14px;\r\n}\r\n\r\n.el-table .el-table__cell {\r\n  padding: 8px 0;\r\n}\r\n\r\n/*  */\r\n.filter-section {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 16px 20px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.filter-form {\r\n  margin: 0;\r\n}\r\n\r\n.filter-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.filter-label {\r\n  font-size: 1rem;\r\n  color: #495057;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  margin: 0;\r\n}\r\n\r\n.date-picker {\r\n  width: 320px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.leave-type-select {\r\n  width: 160px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.query-button {\r\n  padding: 10px 20px;\r\n  font-size: 1rem;\r\n  height: 40px;\r\n  min-width: 80px;\r\n}\r\n\r\n/*  */\r\n.annual-leave-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.annual-leave-card {\r\n  background-color: #f0f9ff;\r\n  border: 1px solid #e1f5fe;\r\n}\r\n\r\n.annual-leave-card .card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: bold;\r\n  color: #1976d2;\r\n}\r\n\r\n.hire-date {\r\n  color: #6c757d;\r\n  font-weight: 500;\r\n}\r\n\r\n.six-months-days {\r\n  color: #4caf50;\r\n  font-weight: bold;\r\n  background-color: #e8f5e8;\r\n  padding: 2px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #4caf50;\r\n  display: inline-block;\r\n}\r\n\r\n.current-year-days {\r\n  color: #2196f3;\r\n  font-weight: bold;\r\n  background-color: #e3f2fd;\r\n  padding: 2px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #2196f3;\r\n  display: inline-block;\r\n}\r\n\r\n.total-days {\r\n  color: #2196f3;\r\n  font-weight: bold;\r\n}\r\n\r\n.total-hours {\r\n  color: #ff6f00;\r\n  font-weight: bold;\r\n  background-color: #fff3e0;\r\n  padding: 2px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ff9800;\r\n  display: inline-block;\r\n}\r\n\r\n.used-days {\r\n  color: #ff9800;\r\n  font-weight: bold;\r\n}\r\n\r\n.used-hours {\r\n  color: #ff9800;\r\n  font-weight: bold;\r\n}\r\n\r\n.remaining-hours-high {\r\n  color: #4caf50;\r\n  font-weight: bold;\r\n}\r\n\r\n.remaining-hours-medium {\r\n  color: #ff9800;\r\n  font-weight: bold;\r\n}\r\n\r\n.remaining-hours-low {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n.formula-text {\r\n  font-size: 12px;\r\n  color: #666;\r\n  cursor: help;\r\n}\r\n\r\n.annual-leave-reminder {\r\n  margin-top: 15px;\r\n}\r\n\r\n/*  */\r\n.el-progress {\r\n  width: 80px;\r\n}\r\n\r\n.el-progress__text {\r\n  font-size: 12px !important;\r\n}\r\n\r\n/*  */\r\n.annual-hours-cell {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 2px;\r\n}\r\n\r\n.current-year-hours {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 2px;\r\n}\r\n\r\n.hours-value {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #409eff;\r\n}\r\n\r\n.hours-unit {\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.year-label {\r\n  font-size: 11px;\r\n  color: #666;\r\n  background-color: #f0f0f0;\r\n  padding: 1px 6px;\r\n  border-radius: 10px;\r\n}\r\n\r\n/*  */\r\n.monthly-hours-cell {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 2px;\r\n}\r\n\r\n.current-month-hours {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 2px;\r\n}\r\n\r\n.month-label {\r\n  font-size: 11px;\r\n  color: #666;\r\n  background-color: #e8f5e8;\r\n  padding: 1px 6px;\r\n  border-radius: 10px;\r\n}\r\n\r\n/*  */\r\n.remaining-hours-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.remaining-hours-card {\r\n  background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);\r\n  border: none;\r\n  box-shadow: 0 8px 32px rgba(255, 236, 210, 0.3);\r\n}\r\n\r\n.remaining-hours-cards {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.remaining-hours-card-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16px;\r\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.remaining-hours-card-item:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.remaining-hours-icon {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 48px;\r\n  height: 48px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 12px;\r\n  margin-right: 16px;\r\n  color: white;\r\n  font-size: 20px;\r\n}\r\n\r\n.remaining-hours-info {\r\n  flex: 1;\r\n}\r\n\r\n.remaining-hours-label {\r\n  font-size: 14px;\r\n  color: #64748b;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.remaining-hours-value {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  color: #1e293b;\r\n}\r\n\r\n/*  */\r\n.annual-leave-summary-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.annual-leave-summary-card {\r\n  background-color: #f0f9f0;\r\n  border: 1px solid #c8e6c9;\r\n}\r\n\r\n.annual-leave-summary-card .card-header {\r\n  display: flex !important;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: bold;\r\n  color: #495057;\r\n}\r\n\r\n/*  el-card header  */\r\n.annual-leave-summary-card :deep(.el-card__header) {\r\n  display: block !important;\r\n  padding: 18px 20px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/*  */\r\n.annual-summary-cards {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 16px;\r\n  padding: 20px;\r\n}\r\n\r\n.annual-summary-card-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  background: #ffffff;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  border: 1px solid #e0e0e0;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.annual-summary-card-item:hover {\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.annual-summary-icon {\r\n  font-size: 24px;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f0f9f0;\r\n  border-radius: 50%;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.annual-summary-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.annual-summary-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.annual-summary-value {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #2e7d32;\r\n}\r\n\r\n/*  */\r\n.monthly-leave-summary-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.monthly-leave-summary-card {\r\n  background-color: #f0f8ff;\r\n  border: 1px solid #b3d9ff;\r\n}\r\n\r\n.monthly-leave-summary-card .card-header {\r\n  display: flex !important;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: bold;\r\n  color: #1976d2;\r\n}\r\n\r\n.monthly-leave-summary-card .month-selector {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n/*  */\r\n.monthly-summary-cards {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 16px;\r\n  padding: 20px;\r\n}\r\n\r\n.monthly-summary-card-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  background: #ffffff;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  border: 1px solid #e0e0e0;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.monthly-summary-card-item:hover {\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.monthly-summary-icon {\r\n  font-size: 24px;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f0f8ff;\r\n  border-radius: 50%;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.monthly-summary-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.monthly-summary-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.monthly-summary-value {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #1976d2;\r\n}\r\n\r\n/*  el-card header  */\r\n.monthly-leave-summary-card :deep(.el-card__header) {\r\n  display: block !important;\r\n  padding: 18px 20px;\r\n  border-bottom: 1px solid #b3d9ff;\r\n  box-sizing: border-box;\r\n  background-color: #e3f2fd;\r\n}\r\n\r\n.year-selector {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.leave-hours-value {\r\n  font-weight: bold;\r\n  color: #28a745;\r\n}\r\n\r\n/*  */\r\n.mobile-cards {\r\n  display: none;\r\n}\r\n\r\n.leave-type-card {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  margin-bottom: 8px;\r\n  background-color: #ffffff;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.leave-type-name {\r\n  font-weight: 500;\r\n  color: #495057;\r\n}\r\n\r\n.leave-type-hours {\r\n  font-weight: bold;\r\n  color: #28a745;\r\n  font-size: 16px;\r\n}\r\n\r\n/*  */\r\n.desktop-annual-leave-cards {\r\n  display: block;\r\n}\r\n\r\n/*  */\r\n.desktop-leave-records-list {\r\n  display: block;\r\n}\r\n\r\n.desktop-leave-record-row {\r\n  background-color: #ffffff;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  margin-bottom: 12px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  overflow: hidden;\r\n}\r\n\r\n.desktop-leave-record-row:hover {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.desktop-leave-record-row.expanded {\r\n  border-color: #409eff;\r\n  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);\r\n}\r\n\r\n.record-row-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16px 20px;\r\n  background-color: #fafafa;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.record-main-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.request-id-section {\r\n  flex-shrink: 0;\r\n  min-width: 100px;\r\n}\r\n\r\n.leave-type-section {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.date-range-section {\r\n  flex-shrink: 0;\r\n  min-width: 180px;\r\n}\r\n\r\n.date-range-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.hours-section {\r\n  flex-shrink: 0;\r\n  text-align: center;\r\n  min-width: 70px;\r\n}\r\n\r\n.hours-text {\r\n  font-weight: bold;\r\n  color: #409eff;\r\n  font-size: 16px;\r\n}\r\n\r\n.apply-date-section {\r\n  flex-shrink: 0;\r\n  text-align: center;\r\n  min-width: 80px;\r\n}\r\n\r\n/*  - inline */\r\n.agent-section {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  background: #f0f9ff;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #e1f5fe;\r\n  font-size: 12px;\r\n}\r\n\r\n.agent-label {\r\n  color: #606266;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n}\r\n\r\n.agent-value {\r\n  color: #303133;\r\n  font-weight: bold;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 60px;\r\n}\r\n\r\n.supervisor-section {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  background: #f0f9ff;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #e1f5fe;\r\n  font-size: 12px;\r\n}\r\n\r\n.supervisor-label {\r\n  color: #606266;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n}\r\n\r\n.supervisor-value {\r\n  color: #303133;\r\n  font-weight: bold;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 60px;\r\n}\r\n\r\n.reason-section {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  background: #fafafa;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  border: 1px solid #e4e7ed;\r\n  min-width: 0;\r\n}\r\n\r\n.reason-label {\r\n  color: #606266;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.reason-value {\r\n  color: #303133;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  flex: 1;\r\n}\r\n\r\n.apply-date-text {\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.expand-icon {\r\n  margin-left: 16px;\r\n  color: #999;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.expand-icon .rotated {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.record-row-content {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.expanded-content {\r\n  padding: 20px;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.expanded-content .stats-section {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.expanded-content .stats-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 8px 12px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 6px;\r\n}\r\n\r\n.expanded-content .stats-label {\r\n  font-weight: 500;\r\n  color: #666;\r\n}\r\n\r\n.expanded-content .stats-value {\r\n  font-weight: bold;\r\n  color: #409eff;\r\n}\r\n\r\n.expanded-content .month-badge {\r\n  background-color: #e3f2fd;\r\n  color: #1976d2;\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n}\r\n\r\n.expanded-content .people-section {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.expanded-content .people-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.expanded-content .people-label {\r\n  font-weight: 500;\r\n  color: #666;\r\n  min-width: 80px;\r\n}\r\n\r\n.expanded-content .people-value {\r\n  color: #333;\r\n}\r\n\r\n.expanded-content .reason-section {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.expanded-content .reason-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n}\r\n\r\n.expanded-content .reason-label {\r\n  font-weight: 500;\r\n  color: #666;\r\n  min-width: 80px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.expanded-content .reason-value {\r\n  color: #333;\r\n  line-height: 1.5;\r\n}\r\n\r\n.desktop-annual-leave-card {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 16px;\r\n  margin-bottom: 24px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  color: white;\r\n}\r\n\r\n.desktop-card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24px 32px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.year-info h3.year-title {\r\n  margin: 0 0 8px 0;\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: white;\r\n}\r\n\r\n.hire-date-info {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  opacity: 0.9;\r\n  color: white;\r\n}\r\n\r\n.usage-rate-display {\r\n  text-align: center;\r\n}\r\n\r\n.rate-label {\r\n  display: block;\r\n  font-size: 12px;\r\n  margin-bottom: 8px;\r\n  opacity: 0.9;\r\n  color: white;\r\n}\r\n\r\n.desktop-card-content {\r\n  background: white;\r\n  color: #333;\r\n  padding: 32px;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.section-title {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.refresh-btn {\r\n  margin-left: 10px;\r\n}\r\n\r\n.leave-days-section {\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.days-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 16px;\r\n}\r\n\r\n.day-item {\r\n  background: #f8f9fa;\r\n  border: 2px solid #e9ecef;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  text-align: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.day-item:hover {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.day-item.special {\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);\r\n  border-color: #2196f3;\r\n}\r\n\r\n.day-item.total-hours-card {\r\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\r\n  border-color: #ff9800;\r\n}\r\n\r\n.day-label {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n  font-weight: 500;\r\n}\r\n\r\n.day-value {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.day-value.six-months-days {\r\n  color: #4caf50;\r\n}\r\n\r\n.day-value.current-year-days {\r\n  color: #2196f3;\r\n}\r\n\r\n.day-value.total-days, .day-value.total-hours {\r\n  color: #2196f3;\r\n}\r\n\r\n.usage-section {\r\n  border-top: 1px solid #e9ecef;\r\n  padding-top: 24px;\r\n}\r\n\r\n.usage-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 16px;\r\n}\r\n\r\n.usage-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  background: #f8f9fa;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.usage-item:hover {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.usage-item.used {\r\n  background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);\r\n}\r\n\r\n.usage-item.remaining {\r\n  background: linear-gradient(135deg, #e8f5e8 0%, #e3f2fd 100%);\r\n}\r\n\r\n.usage-icon {\r\n  font-size: 24px;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border-radius: 50%;\r\n}\r\n\r\n.usage-info {\r\n  flex: 1;\r\n}\r\n\r\n.usage-label {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.usage-value {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.usage-value.used-days, .usage-value.used-hours {\r\n  color: #ff9800;\r\n}\r\n\r\n/*  */\r\n.desktop-leave-records-cards {\r\n  display: block;\r\n}\r\n\r\n.desktop-leave-record-card {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 16px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\r\n  overflow: hidden;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.desktop-leave-record-card:hover {\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.desktop-record-header {\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  padding: 20px 24px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.record-basic-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n}\r\n\r\n.request-id-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n\r\n.request-id-label {\r\n  font-size: 1.2rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.request-id-value {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.request-id-link {\r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.request-id-link:hover {\r\n  transform: scale(1.05);\r\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.request-id-link-mobile {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.request-id-link-mobile:hover {\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.apply-date-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  text-align: right;\r\n}\r\n\r\n.apply-date-label {\r\n  font-size: 12px;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.apply-date-value {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.desktop-record-content {\r\n  padding: 20px;\r\n}\r\n\r\n/*  */\r\n.content-row {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.content-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.time-section {\r\n  flex: 1;\r\n  padding: 16px;\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);\r\n  border-radius: 12px;\r\n}\r\n\r\n.time-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.leave-hours-display {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 4px;\r\n}\r\n\r\n.hours-label {\r\n  font-size: 1rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.hours-value-large {\r\n  font-size: 1.4rem;\r\n  font-weight: bold;\r\n  color: #e6a23c;\r\n}\r\n\r\n.date-range-display {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.start-date, .end-date {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  flex: 1;\r\n}\r\n\r\n.date-label {\r\n  font-size: 1rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.date-value {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.date-separator {\r\n  font-size: 1.4rem;\r\n  color: #666;\r\n  font-weight: bold;\r\n}\r\n\r\n.stats-section {\r\n  flex: 1;\r\n}\r\n\r\n.monthly-stats {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  background: #f8f9fa;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  height: 100%;\r\n}\r\n\r\n.stats-icon {\r\n  font-size: 1.8rem;\r\n  width: 48px;\r\n  height: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: white;\r\n  border-radius: 50%;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.stats-info {\r\n  flex: 1;\r\n}\r\n\r\n.stats-label {\r\n  font-size: 1.1rem;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.stats-value {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 4px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.stats-value .hours-value {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.stats-value .hours-unit {\r\n  font-size: 1rem;\r\n  color: #666;\r\n}\r\n\r\n.month-badge {\r\n  display: inline-block;\r\n  background: #e8f5e8;\r\n  color: #4caf50;\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.people-section, .reason-section {\r\n  flex: 1;\r\n}\r\n\r\n.people-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.people-item {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 12px 16px;\r\n  text-align: center;\r\n}\r\n\r\n.people-role {\r\n  font-size: 1rem;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.people-name {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.reason-content {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  line-height: 1.6;\r\n  color: #333;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 40px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n/*  */\r\n.annual-leave-mobile-cards {\r\n  display: none;\r\n}\r\n\r\n.annual-leave-mobile-card {\r\n  background-color: #ffffff;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 12px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.mobile-card-header {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  padding: 12px 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.year-badge {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n\r\n.hire-date-mobile {\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.mobile-card-content {\r\n  padding: 16px;\r\n}\r\n\r\n.mobile-card-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  padding: 8px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.mobile-card-row:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.mobile-label {\r\n  font-size: 13px;\r\n  color: #666;\r\n  font-weight: 500;\r\n  flex: 1;\r\n  margin-right: 12px;\r\n}\r\n\r\n.mobile-value {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  text-align: right;\r\n  flex: 0 0 auto;\r\n}\r\n\r\n.six-months-days-mobile {\r\n  color: #4caf50;\r\n  background-color: #e8f5e8;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  border: 1px solid #4caf50;\r\n}\r\n\r\n.current-year-days-mobile {\r\n  color: #2196f3;\r\n  background-color: #e3f2fd;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  border: 1px solid #2196f3;\r\n}\r\n\r\n.total-days-mobile {\r\n  color: #2196f3;\r\n  font-weight: bold;\r\n}\r\n\r\n.total-hours-mobile {\r\n  color: #ff6f00;\r\n  font-weight: bold;\r\n  background-color: #fff3e0;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ff9800;\r\n}\r\n\r\n.used-days-mobile, .used-hours-mobile {\r\n  color: #ff9800;\r\n  font-weight: bold;\r\n}\r\n\r\n.mobile-progress {\r\n  width: 120px;\r\n}\r\n\r\n/*  */\r\n.leave-records-mobile-cards {\r\n  display: none;\r\n}\r\n\r\n.leave-record-mobile-card {\r\n  background-color: #ffffff;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 12px;\r\n  margin-bottom: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.request-id-badge {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.date-range-mobile {\r\n  text-align: right;\r\n}\r\n\r\n.end-date {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 2px;\r\n}\r\n\r\n.leave-hours-mobile {\r\n  color: #e6a23c;\r\n  font-weight: bold;\r\n}\r\n\r\n.monthly-hours-mobile {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.reason-mobile {\r\n  max-width: 200px;\r\n  word-wrap: break-word;\r\n  text-align: right;\r\n  line-height: 1.4;\r\n}\r\n\r\n/* RWD  */\r\n@media (max-width: 768px) {\r\n  /*  */\r\n  .desktop-annual-leave-cards,\r\n  .desktop-leave-records-cards,\r\n  .desktop-leave-records-list {\r\n    display: none;\r\n  }\r\n  \r\n  /*  */\r\n  .annual-leave-summary-table,\r\n  .monthly-leave-summary-table {\r\n    display: none;\r\n  }\r\n  \r\n  /*  */\r\n  .mobile-cards {\r\n    display: block;\r\n  }\r\n  \r\n  .annual-leave-summary-card .card-header {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .year-selector {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .leave-type-card {\r\n    padding: 10px 12px;\r\n  }\r\n  \r\n  .leave-type-hours {\r\n    font-size: 14px;\r\n  }\r\n  \r\n  /*  */\r\n  .annual-leave-mobile-card {\r\n    margin-bottom: 12px;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .mobile-card-header {\r\n    padding: 10px 12px;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .year-badge {\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .hire-date-mobile {\r\n    font-size: 11px;\r\n  }\r\n  \r\n  .mobile-card-content {\r\n    padding: 12px;\r\n  }\r\n  \r\n  .mobile-card-row {\r\n    padding: 6px 0;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .mobile-label {\r\n    font-size: 12px;\r\n    margin-right: 0;\r\n  }\r\n  \r\n  .mobile-value {\r\n    font-size: 13px;\r\n    text-align: left;\r\n  }\r\n  \r\n  .mobile-progress {\r\n    width: 100%;\r\n  }\r\n  \r\n  /*  */\r\n  .leave-record-mobile-card {\r\n    margin-bottom: 12px;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .request-id-badge {\r\n    font-size: 11px;\r\n    padding: 3px 6px;\r\n  }\r\n  \r\n  .date-range-mobile {\r\n    text-align: left;\r\n  }\r\n  \r\n  .monthly-hours-mobile {\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .reason-mobile {\r\n    max-width: 100%;\r\n    text-align: left;\r\n  }\r\n  \r\n  /*  */\r\n  .filter-row {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 12px;\r\n  }\r\n  \r\n  .filter-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 4px;\r\n  }\r\n  \r\n  .date-picker {\r\n    width: 100%;\r\n  }\r\n  \r\n  .leave-type-select {\r\n    width: 100%;\r\n  }\r\n  \r\n  .query-button {\r\n    width: 100%;\r\n    margin-top: 8px;\r\n  }\r\n  \r\n  /*  */\r\n  .content-row {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n  }\r\n  \r\n  .time-section,\r\n  .stats-section,\r\n  .people-section,\r\n  .reason-section {\r\n    flex: none;\r\n  }\r\n  \r\n  .monthly-stats {\r\n    height: auto;\r\n  }\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog) {\r\n  position: fixed !important;\r\n  top: 50% !important;\r\n  left: 50% !important;\r\n  transform: translate(-50%, -50%) !important;\r\n  margin: 0 !important;\r\n  max-height: 90vh !important;\r\n  overflow-y: auto !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog__wrapper) {\r\n  position: fixed !important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  width: 100vw !important;\r\n  height: 100vh !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n  z-index: 2000 !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-overlay) {\r\n  position: fixed !important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  width: 100vw !important;\r\n  height: 100vh !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog__body) {\r\n  text-align: center !important;\r\n  padding: 20px !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog__header) {\r\n  text-align: center !important;\r\n  padding: 20px 20px 10px 20px !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog__footer) {\r\n  text-align: center !important;\r\n  padding: 10px 20px 20px 20px !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-form) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-form-item) {\r\n  text-align: center !important;\r\n  justify-content: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-form-item__label) {\r\n  text-align: center !important;\r\n  justify-content: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-form-item__content) {\r\n  text-align: center !important;\r\n  justify-content: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-text) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog p) {\r\n  text-align: center !important;\r\n  margin: 10px 0 !important;\r\n}\r\n\r\n:deep(.centered-dialog div) {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-button-group) {\r\n  display: flex !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-button) {\r\n  margin: 0 5px !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog *) {\r\n  box-sizing: border-box !important;\r\n}\r\n\r\n/*  Detail_Related_WF_Dialog  */\r\n:deep(.centered-dialog .responsive-text) {\r\n  text-align: center !important;\r\n  display: inline-block !important;\r\n}\r\n\r\n/*  Detail_Related_WF_Dialog  */\r\n:deep(.centered-dialog) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body > div) {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  Detail_Related_WF_Dialog  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body p) {\r\n  text-align: center !important;\r\n  margin: 10px auto !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-text) {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-form) {\r\n  text-align: center !important;\r\n  width: 100% !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-form .el-form-item) {\r\n  text-align: center !important;\r\n  display: flex !important;\r\n  flex-direction: column !important;\r\n  align-items: center !important;\r\n  margin: 15px auto !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-form .el-form-item .el-form-item__label) {\r\n  text-align: center !important;\r\n  width: 100% !important;\r\n  margin-bottom: 8px !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-form .el-form-item .el-form-item__content) {\r\n  text-align: center !important;\r\n  width: 100% !important;\r\n  display: flex !important;\r\n  justify-content: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body *) {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-input) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-select) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-textarea) {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .el-text) {\r\n  text-align: center !important;\r\n  display: block !important;\r\n  width: 100% !important;\r\n  margin: 10px auto !important;\r\n}\r\n\r\n/*  LR250717-001  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body span) {\r\n  text-align: center !important;\r\n  display: block !important;\r\n  width: 100% !important;\r\n  margin: 5px auto !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .status-text) {\r\n  text-align: center !important;\r\n  display: block !important;\r\n  width: 100% !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body .date-text) {\r\n  text-align: center !important;\r\n  display: block !important;\r\n  width: 100% !important;\r\n}\r\n\r\n/*  -  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body) {\r\n  text-align: center !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body > *) {\r\n  text-align: center !important;\r\n  margin-left: auto !important;\r\n  margin-right: auto !important;\r\n}\r\n\r\n/*  div */\r\n:deep(.centered-dialog .el-dialog .el-dialog__body > div) {\r\n  text-align: center !important;\r\n  width: 100% !important;\r\n  display: block !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__body > div > *) {\r\n  text-align: center !important;\r\n  display: block !important;\r\n  margin: 5px auto !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-dialog .el-dialog__footer) {\r\n  text-align: center !important;\r\n  display: flex !important;\r\n  justify-content: center !important;\r\n  align-items: center !important;\r\n  padding: 20px !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-dialog .el-dialog__footer .el-button) {\r\n  margin: 0 10px !important;\r\n}\r\n\r\n/*  -  */\r\n:deep(.centered-dialog) * {\r\n  text-align: center !important;\r\n}\r\n\r\n/*  */\r\n:deep(.centered-dialog .el-input__inner) {\r\n  text-align: left !important;\r\n}\r\n\r\n:deep(.centered-dialog .el-textarea__inner) {\r\n  text-align: left !important;\r\n}\r\n\r\n/*  -  */\r\n\r\n/*  */\r\n.usage-rate-display .el-progress-circle__text {\r\n  fill: #ffffff !important;  /*  */\r\n  font-weight: bold !important;\r\n  font-size: 14px !important;\r\n}\r\n\r\n/*  */\r\n/* \r\n.usage-rate-display .el-progress-circle__text {\r\n  fill: #e74c3c !important;  // \r\n}\r\n*/\r\n\r\n/* \r\n.usage-rate-display .el-progress-circle__text {\r\n  fill: #3498db !important;  // \r\n}\r\n*/\r\n\r\n/* \r\n.usage-rate-display .el-progress-circle__text {\r\n  fill: #27ae60 !important;  // \r\n}\r\n*/\r\n\r\n</style>","import script from \"./PersonalLeave.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalLeave.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalLeave.vue?vue&type=style&index=0&id=fcf474ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fcf474ba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"attendance-container mt-5\">\r\n    <div class=\"content-wrapper\">\r\n      <!--  -->\r\n      <div class=\"left-panel\">\r\n        <el-card class=\"panel-card attendance-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <el-icon class=\"header-icon\"><Calendar /></el-icon>\r\n              <span></span>\r\n            </div>\r\n          </template>\r\n          <div class=\"attendance-content\">\r\n            <AttendanceRecord :selectedUser=\"userStore\" :personalMode=\"true\" />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"right-panel\">\r\n        <el-card class=\"panel-card leave-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <el-icon class=\"header-icon\"><DocumentCopy /></el-icon>\r\n              <span></span>\r\n            </div>\r\n          </template>\r\n          <div class=\"leave-content\">\r\n            <PersonalLeave />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport AttendanceRecord from '../AttendanceRecord.vue'\r\nimport PersonalLeave from '../PersonalLeave.vue'\r\nimport { useUserStore } from '../../../stores/user.js'\r\nimport { Calendar, DocumentCopy } from '@element-plus/icons-vue'\r\n\r\nconst userStore = useUserStore();\r\n</script>\r\n\r\n<style scoped>\r\n.attendance-container {\r\n  padding: 16px;\r\n  width: 100%;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\r\n  min-height: 100vh;\r\n}\r\n\r\n.content-wrapper {\r\n  display: flex;\r\n  gap: 24px;\r\n  width: 100%;\r\n  min-height: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.left-panel {\r\n  /* 30%  min-width  0 */\r\n  flex: 0 1 30%;\r\n  min-width: 0;\r\n}\r\n\r\n.right-panel {\r\n  /* 70%  min-width  0 */\r\n  flex: 0 1 70%;\r\n  min-width: 0;\r\n}\r\n\r\n.panel-card {\r\n  height: 100%;\r\n  border-radius: 16px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  transition: all 0.3s ease;\r\n  overflow: hidden;\r\n}\r\n\r\n.panel-card:hover {\r\n  /* transform: translateY(-4px); */\r\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.attendance-card {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n}\r\n\r\n.leave-card {\r\n  background: linear-gradient(135deg, #8CE68D 0%, #6BCF7F 100%);\r\n  color: white;\r\n}\r\n\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  color: inherit;\r\n  padding: 0;\r\n}\r\n\r\n.header-icon {\r\n  font-size: 20px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.attendance-content,\r\n.leave-content {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin: -16px;\r\n  margin-top: 16px;\r\n  color: var(--text-primary, #1e293b);\r\n}\r\n\r\n/*  -  */\r\n@media (max-width: 1024px) {\r\n  .content-wrapper {\r\n    gap: 20px;\r\n  }\r\n  \r\n  .card-header {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n/*  -  */\r\n@media (max-width: 768px) {\r\n  .attendance-container {\r\n    padding: 12px;\r\n  }\r\n  \r\n  .content-wrapper {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n  }\r\n  \r\n  .left-panel,\r\n  .right-panel {\r\n    flex: none;\r\n  }\r\n  \r\n  .panel-card {\r\n    border-radius: 12px;\r\n  }\r\n  \r\n  .attendance-content,\r\n  .leave-content {\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n  }\r\n}\r\n\r\n/*  -  (500px) */\r\n@media (max-width: 500px) {\r\n  .attendance-container {\r\n    padding: 8px;\r\n    background: #f8fafc;\r\n  }\r\n  \r\n  .content-wrapper {\r\n    gap: 12px;\r\n  }\r\n  \r\n  .panel-card {\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .card-header {\r\n    font-size: 14px;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .header-icon {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .attendance-content,\r\n  .leave-content {\r\n    padding: 8px;\r\n    margin: -8px;\r\n    margin-top: 12px;\r\n    border-radius: 6px;\r\n  }\r\n}\r\n\r\n/*  */\r\n:deep(.personal-leave-container) {\r\n  padding: 0;\r\n}\r\n\r\n:deep(.personal-leave-container .box-card) {\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n:deep(.personal-leave-container .box-card .el-card__header) {\r\n  display: none;\r\n}\r\n\r\n/*  */\r\n:deep(.parent) {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n:deep(.div1) {\r\n  width: 100%;\r\n  max-width: 30rem;\r\n  margin: 0;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  :deep(.div1) {\r\n    max-width: 100%;\r\n  }\r\n  \r\n  :deep(.table-title) {\r\n    font-size: 1rem !important;\r\n  }\r\n  \r\n  :deep(.sub-title) {\r\n    font-size: 0.85rem !important;\r\n    flex-wrap: wrap;\r\n    gap: 4px;\r\n  }\r\n  \r\n  :deep(.highlight),\r\n  :deep(.attendance-date) {\r\n    font-size: 1.2rem !important;\r\n  }\r\n}\r\n\r\n@media (max-width: 500px) {\r\n  :deep(.div1) {\r\n    padding: 0 4px;\r\n  }\r\n  \r\n  :deep(.table-title) {\r\n    font-size: 0.9rem !important;\r\n    margin-bottom: -0.5rem !important;\r\n  }\r\n  \r\n  :deep(.sub-title) {\r\n    font-size: 0.75rem !important;\r\n    text-align: center;\r\n  }\r\n  \r\n  :deep(.highlight),\r\n  :deep(.attendance-date) {\r\n    font-size: 1rem !important;\r\n    display: block;\r\n    margin: 2px 0;\r\n  }\r\n  \r\n  :deep(.pi-chevron-left),\r\n  :deep(.pi-chevron-right) {\r\n    font-size: 0.8rem !important;\r\n    margin: 0 4px !important;\r\n  }\r\n  \r\n  /*  */\r\n  :deep(.p-datatable) {\r\n    font-size: 0.75rem;\r\n  }\r\n  \r\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\r\n    padding: 0.5rem 0.25rem;\r\n    font-size: 0.7rem;\r\n  }\r\n  \r\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\r\n    padding: 0.5rem 0.25rem;\r\n    font-size: 0.7rem;\r\n  }\r\n}\r\n\r\n/*  */\r\n@media (prefers-color-scheme: dark) {\r\n  .attendance-container {\r\n    background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);\r\n  }\r\n  \r\n  .attendance-content,\r\n  .leave-content {\r\n    background: rgba(26, 32, 44, 0.95);\r\n    color: #e2e8f0;\r\n  }\r\n}\r\n</style>","import script from \"./PersonalAttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalAttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalAttendanceRecord.vue?vue&type=style&index=0&id=a8cb05f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a8cb05f0\"]])\n\nexport default __exports__","<template>\r\n  <el-config-provider :locale=\"zhTw\">\r\n    <div class=\"daily-attendance-record mt-5\" style=\"margin-left:5rem\">\r\n      <div class=\"header-section\">\r\n        <el-button :icon=\"ArrowLeft\" circle @click=\"prevDay\" :disabled=\"!attendanceDate\" />\r\n        <el-date-picker\r\n          v-model=\"attendanceDate\"\r\n          type=\"date\"\r\n          placeholder=\"\"\r\n          value-format=\"YYYY-MM-DD\"\r\n          @change=\"fetchAttendanceRecords\"\r\n          style=\"font-size: 2rem;width:16rem;\"\r\n        ></el-date-picker>\r\n        <el-button :icon=\"ArrowRight\" circle @click=\"nextDay\" :disabled=\"!attendanceDate\" />\r\n      </div>\r\n      \r\n\r\n      <el-table :data=\"filteredRecords\" v-loading=\"loading\" style=\"width: 18.5rem\"  border>\r\n        <el-table-column prop=\"\" label=\"\" v-if=\"false\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"100\" height=\"40\"></el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" v-if=\"false\"></el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"\" label=\"\" width=\"100\"></el-table-column>\r\n      </el-table>\r\n\r\n    </div>\r\n  </el-config-provider>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport FinanceService from '../../../service/FinanceService.js';\r\nimport zhTw from 'element-plus/dist/locale/zh-tw.mjs';\r\nimport { ArrowLeft, ArrowRight } from '@element-plus/icons-vue';\r\n \r\n const attendanceDate = ref('');\r\n const attendanceRecords = ref([]);\r\n const loading = ref(false);\r\n \r\n const query = ref({\r\n   employeeId: '',\r\n   employeeName: '',\r\n   date: '',\r\n });\r\n \r\n const filteredRecords = computed(() => {\r\n   let records = attendanceRecords.value;\r\n \r\n   if (query.value.employeeId) {\r\n     records = records.filter(record => record[''] && record[''].includes(query.value.employeeId));\r\n   }\r\n   if (query.value.employeeName) {\r\n     records = records.filter(record => record[''] && record[''].includes(query.value.employeeName));\r\n   }\r\n   if (query.value.date) {\r\n     records = records.filter(record => record[''] && record[''].includes(query.value.date));\r\n   }\r\n   return records;\r\n });\r\n // \r\n const initDate = () => {\r\n   const today = new Date();\r\n   const year = today.getFullYear();\r\n   const month = String(today.getMonth() + 1).padStart(2, '0');\r\n   const day = String(today.getDate()).padStart(2, '0');\r\n   attendanceDate.value = `${year}-${month}-${day}`;\r\n };\r\n \r\n // \r\n const fetchAttendanceRecords = async () => {\r\n   loading.value = true;\r\n   try {\r\n     //  attendanceDate.value \r\n     const formattedDate = attendanceDate.value ? new Date(attendanceDate.value).toISOString().slice(0, 10) : '';\r\n     const { data } = await FinanceService.getAllAttendanceRecords(formattedDate);\r\n     attendanceRecords.value = data;\r\n   } catch (err) {\r\n     console.error(':', err);\r\n   } finally {\r\n     loading.value = false;\r\n   }\r\n };\r\n \r\n\r\n const formatDate = (date) => {\r\n   const year = date.getFullYear();\r\n   const month = String(date.getMonth() + 1).padStart(2, '0');\r\n   const day = String(date.getDate()).padStart(2, '0');\r\n   return `${year}-${month}-${day}`;\r\n };\r\n\r\n const prevDay = () => {\r\n   if (attendanceDate.value) {\r\n     const date = new Date(attendanceDate.value);\r\n     date.setDate(date.getDate() - 1);\r\n     attendanceDate.value = formatDate(date);\r\n     fetchAttendanceRecords();\r\n   }\r\n };\r\n\r\n const nextDay = () => {\r\n   if (attendanceDate.value) {\r\n     const date = new Date(attendanceDate.value);\r\n     date.setDate(date.getDate() + 1);\r\n     attendanceDate.value = formatDate(date);\r\n     fetchAttendanceRecords();\r\n   }\r\n };\r\n\r\n onMounted(() => {\r\n   initDate();\r\n   fetchAttendanceRecords();\r\n });\r\n</script>\r\n \r\n<style scoped>\r\n.daily-attendance-record {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center; /*  */\r\n  padding: 20px;\r\n}\r\n \r\n.header-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n}\r\n \r\n.header-section i {\r\n  cursor: pointer;\r\n  margin: 0 1rem;\r\n  font-size: 1.8rem;\r\n \r\n}\r\n \r\n.attendance-date {\r\n  color: #407539; /*  AttendanceRecord.vue  */\r\n}\r\n \r\n/*  el-table  */\r\n.el-table .el-table__cell {\r\n  font-size: 1rem;\r\n}\r\n \r\n:deep(.el-table__cell) {\r\n  font-size: 1.5rem !important; /*  1rem0.9rem */\r\n}\r\n</style>\r\n","import script from \"./DailyAttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DailyAttendanceRecord.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DailyAttendanceRecord.vue?vue&type=style&index=0&id=94d8beee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-94d8beee\"]])\n\nexport default __exports__","import script from \"./Layout_LeaveRequestForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Layout_LeaveRequestForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Layout_LeaveRequestForm.vue?vue&type=style&index=0&id=4a380a06&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4a380a06\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory  } from 'vue-router'\r\nimport VueCookies from 'vue-cookies'\r\nimport { ElMessage } from 'element-plus'; //  Element Plus \r\nimport { useAuthStore } from '../stores/auth.js'\r\n\r\n//  (EIP )\r\nimport HomePage from '@/components/Home/View/HomePage.vue'\r\nimport PersonalInformation from '@/components/Home/PersonalInformation.vue'\r\n\r\n// HomePage  ()\r\nimport DAEHistory from '@/components/Home/DAEHistory.vue'\r\nimport employeeRegistration from '@/components/Registration/employee-registration.vue'\r\nimport userManagement from '@/components/Registration/userManagement.vue'\r\nimport orgChart from '@/components/Chart/orgChart.vue'\r\nimport PrimeChart from '@/components/Chart/PrimeChart.vue'\r\n\r\nimport editDptFuncList_Form from '@/components/Home/editDptFuncList_Form.vue'\r\nimport SecurityMail from '@/components/Mail/SecurityMail.vue'\r\nimport BulletinBoard from '@/components/Home/BulletinBoard.vue'\r\nimport login_delay from '@/components/login_delay.vue'\r\nimport editDptFuncList from '@/components/Home/View/editDptFuncList.vue'\r\n\r\n\r\n\r\n////\r\n// MAC\r\nimport MacForm from '@/components/EventsAndStatistics/MACForm/MacForm.vue'\r\nimport ComputerInventory from '@/components/EventsAndStatistics/ComputerInventory/ComputerInventory.vue'\r\n\r\n////\r\nimport Dpt_System from '@/components/Administration/Dpt_System/Dpt_System.vue'\r\n\r\n// DAE\r\nimport AttendanceRecord from '@/components/AttendanceRecord/AttendanceRecord.vue'\r\n\r\n// \r\nimport EIP_Login from '@/components/EIP_Login.vue'\r\n\r\n//\r\nimport SalarySlip from '@/components/AttendanceRecord/SalarySlip/SalarySlip.vue'\r\nimport SalaryStructure from '@/components/AttendanceRecord/SalarySlip/SalaryStructure.vue'\r\nimport MealAllowanceSummary from '@/components/Finance/MealAllowanceSummary.vue'\r\nimport AnnualLeaveSummary from '@/components/Finance/AnnualLeaveSummary.vue'\r\nimport OvertimePageInfo from '@/components/Finance/OvertimePageInfo.vue'\r\nimport LeavePageInfo from '@/components/Finance/LeavePageInfo.vue'\r\n\r\n//\r\nimport sys_MacForm from '@/components/SystemManagement/sys_MacForm.vue'\r\nimport sys_ComputerInventory from '@/components/SystemManagement/sys_ComputerInventory.vue'\r\nimport sys_DAE_Data_Management from '@/components/SystemManagement/sys_DAE_Data_Management.vue'\r\nimport sys_WF_Management from '@/components/SystemManagement/sys_WF_Management.vue'\r\nimport FormTemplateManagement from '@/components/DynamicForm/FormTemplateManagement.vue'\r\nimport FormDesigner from '@/components/DynamicForm/FormDesigner.vue'\r\nimport DeviceHostManagement from '@/components/SystemManagement/DeviceHostManagement.vue'\r\n\r\n\r\n// \r\nimport PerformanceReport from '@/components/DomesticSalesRepresentative/PerformanceManagement/PerformanceReport.vue'\r\nimport PersonalGoals from '@/components/DomesticSalesRepresentative/PerformanceManagement/PersonalGoals.vue'\r\nimport PerformanceDashboard from '@/components/GeneralManager/PerformanceDashboard.vue'\r\n\r\n//(CRM Customer)\r\nimport CustomerInfo from '@/components/CustomerInfo/CustomerInfo/CustomerInfo.vue';\r\nimport CustomerTracking from '@/components/CustomerInfo/CustomerTracking/CustomerTracking.vue';\r\n\r\n//\r\nimport SalesQuery from '@/components/Sales/SalesQuery.vue';\r\n\r\n//\r\nimport ColdCallingReport from '@/components/DomesticSalesRepresentative/ColdCalling/ColdCallingReport.vue'\r\nimport CustomerReport from '@/components/DomesticSalesRepresentative/ColdCalling/CustomerReport.vue'\r\n\r\n//(CRM Case)\r\nimport CaseTracking from '@/components/CasePage/CaseTracking.vue';\r\n\r\n//#region \r\n\r\n\r\n//#endregion\r\n\r\n//\r\nimport CorrectionForm from '@/components/WorkFlow/HR/CardReissue/CorrectionForm.vue';\r\nimport PersonalAttendanceRecord from '@/components/AttendanceRecord/SalarySlip/PersonalAttendanceRecord.vue'\r\nimport DailyAttendanceRecord from '@/components/AttendanceRecord/SalarySlip/DailyAttendanceRecord.vue'\r\n\r\n//\r\nimport Layout_LeaveRequestForm from '@/components/WorkFlow/HR/LeaveRequestForm/Layout/Layout_LeaveRequestForm.vue'\r\nimport OvertimeRequestForm from '@/components/WorkFlow/HR/OvertimeRequestForm/OvertimeRequestForm.vue';\r\n\r\n//\r\nimport LeaveCancellationForm from '@/components/WorkFlow/HR/CancelLeave/LeaveCancellationForm.vue';\r\n\r\n//\r\nimport List_WF_Personal from '@/components/WorkFlow/WF/List_Related_WF_Form.vue'\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: EIP_Login,\r\n  },\r\n  {\r\n    path: '/board',\r\n    name: 'Board',\r\n    component: orgChart,\r\n    meta: { boardPermission: true }\r\n  },\r\n  {\r\n    path: '/home',\r\n    name: 'Home',\r\n    component: HomePage,\r\n    children: [\r\n      {\r\n        path: '/EventsAndStatistics',\r\n        name: 'EventsAndStatistics',\r\n        children: [\r\n          {\r\n            path: '/MacForm',\r\n            name: 'MacForm',\r\n            component: MacForm,\r\n          },\r\n          {\r\n            path: '/ComputerInventory',\r\n            name: 'ComputerInventory',\r\n            component: ComputerInventory,\r\n            meta: { noAuth: true }\r\n          },\r\n        ]\r\n      },\r\n      {\r\n        path: '/Finance',\r\n        name: 'Finance',\r\n        children: [\r\n          {\r\n            path: '/SalarySlip',\r\n            name: 'SalarySlip',\r\n            component: SalarySlip,\r\n            meta: { accountPermission: true }\r\n          },\r\n          {\r\n            path: '/PersonalAttendanceRecord',\r\n            name: 'PersonalAttendanceRecord',\r\n            component: PersonalAttendanceRecord,\r\n            meta: {  noAuth: false }\r\n          },\r\n          {\r\n            path: '/DailyAttendanceRecord',\r\n            name: 'DailyAttendanceRecord',\r\n            component: DailyAttendanceRecord,\r\n            meta: {  accountPermission: true }\r\n          },\r\n          {\r\n            path: '/PersonalInformation',\r\n            name: 'PersonalInformation',\r\n            component: PersonalInformation,\r\n            meta: {  noAuth: false }\r\n          },\r\n          {\r\n            path: '/SalaryStructure',\r\n            name: 'SalaryStructure',\r\n            component: SalaryStructure,\r\n            meta: {  accountPermission: true } // \r\n          },\r\n          {\r\n            path: '/MealAllowanceSummary',\r\n            name: 'MealAllowanceSummary',\r\n            component: MealAllowanceSummary,\r\n            meta: { accountPermission: true }\r\n          },\r\n          {\r\n            path: '/AnnualLeaveSummary',\r\n            name: 'AnnualLeaveSummary',\r\n            component: AnnualLeaveSummary,\r\n            meta: { accountPermission: true }\r\n          },\r\n          {\r\n            path: '/OvertimePageInfo',\r\n            name: 'OvertimePageInfo',\r\n            component: OvertimePageInfo,\r\n            meta: { accountPermission: true }\r\n          },\r\n          {\r\n            path: '/LeavePageInfo',\r\n            name: 'LeavePageInfo',\r\n            component: LeavePageInfo,\r\n            meta: { accountPermission: true }\r\n          },\r\n        ]\r\n      },\r\n      {\r\n        path: '/CustomerCastegory',\r\n        name: 'CustomerCastegory',\r\n        children: [\r\n          {\r\n            path: '/CustomerInfo',\r\n            name: 'CustomerInfo',\r\n            component: CustomerInfo,\r\n            meta: { salesPermission: true }\r\n          },\r\n          {\r\n            path: '/CustomerTracking',\r\n            name: 'CustomerTracking',\r\n            component: CustomerTracking,\r\n            meta: { salesPermission: true }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        path: '/SalesCategory',\r\n        name: 'SalesCategory',\r\n        children: [\r\n          {\r\n            path: '/SalesQuery',\r\n            name: 'SalesQuery',\r\n            component: SalesQuery,\r\n            meta: { salesPermission: true }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        path: '/CaseCastegory',\r\n        name: 'CaseCastegory',\r\n        children: [\r\n          {\r\n            path: '/CaseTracking',\r\n            name: 'CaseTracking',\r\n            component: CaseTracking,\r\n            meta: { sales_manufaction_research_Manager_Permission: true }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        path: '/PerformanceManagement',\r\n        name: 'PerformanceManagement',\r\n        children: [\r\n          {\r\n            path: '/PerformanceReport',\r\n            name: 'PerformanceReport',\r\n            component: PerformanceReport,\r\n            meta: { RO0006Permission: true }\r\n          },\r\n          {\r\n            path: '/PersonalGoals',\r\n            name: 'PersonalGoals',\r\n            component: PersonalGoals,\r\n            meta: { salesPermission: false }\r\n          },\r\n          {\r\n            path: '/PerformanceDashboard',\r\n            name: 'PerformanceDashboard',\r\n            component: PerformanceDashboard,\r\n            meta: { DAE_Hight_Level_Team_Permission: true }\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: '/ColdCallingManagement',\r\n        name: 'ColdCallingManagement',\r\n        children: [\r\n          {\r\n            path: '/CustomerReport',\r\n            name: 'CustomerReport',\r\n            component: CustomerReport,\r\n            meta: { salesPermission: true }\r\n          },\r\n          {\r\n            path: '/ColdCallingReport',\r\n            name: 'ColdCallingReport',\r\n            component: ColdCallingReport,\r\n            meta: { salesPermission: true }\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: '/Workflow',\r\n        name: 'Workflow',\r\n        children: [\r\n          {\r\n            path: '/CorrectionForm',\r\n            name: 'CorrectionForm',\r\n            component: CorrectionForm,\r\n          },\r\n          {\r\n            path: '/LeaveRequestForm',\r\n            name: 'LeaveRequestForm',\r\n            component: Layout_LeaveRequestForm,\r\n          },\r\n          {\r\n            path: '/AttendanceRecord',\r\n            name: 'AttendanceRecord',\r\n            component: AttendanceRecord,\r\n            meta: { isDev: true }\r\n          },\r\n          {\r\n            path: '/OvertimeRequestForm',\r\n            name: 'OvertimeRequestForm',\r\n            component: OvertimeRequestForm,\r\n          },\r\n          {\r\n            path: '/LeaveCancellationForm',\r\n            name: 'LeaveCancellationForm',\r\n            component: LeaveCancellationForm,\r\n          },\r\n          {\r\n            path: '/List_WF_Personal',\r\n            name: 'List_WF_Personal',\r\n            component: List_WF_Personal,\r\n          },\r\n          \r\n        ]\r\n      },\r\n      {\r\n        path: '/Administration',\r\n        name: 'Administration',\r\n        meta: { isDev: true },\r\n        children: [\r\n          {\r\n            path: '/Dpt_System',\r\n            name: 'Dpt_System',\r\n            component: Dpt_System,\r\n            meta: { isDev: true }\r\n          },\r\n        ]\r\n      },\r\n      {\r\n        path: '/DAEHistory',\r\n        name: 'DAEHistory',\r\n        component: DAEHistory,\r\n      },\r\n      {\r\n        path: '/PrimeChart',\r\n        name: 'PrimeChart',\r\n        component: PrimeChart,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/orgChart',\r\n        name: 'orgChart',\r\n        component: orgChart,\r\n      },\r\n      {\r\n        path: '/editDptFuncList_Form',\r\n        name: 'editDptFuncList_Form',\r\n        component: editDptFuncList_Form,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/userManagement',\r\n        name: 'userManagement',\r\n        component: userManagement,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/securityMail',\r\n        name: 'SecurityMail',\r\n        component: SecurityMail,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/bulletin',\r\n        name: 'BulletinBoard',\r\n        component: BulletinBoard,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/login_delay',\r\n        name: 'login_delay',\r\n        component: login_delay,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/employeeRegistration',\r\n        name: 'employeeRegistration',\r\n        component: employeeRegistration,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/editDptFuncList',\r\n        name: 'editDptFuncList',\r\n        component: editDptFuncList,\r\n        meta: { isDev: true }\r\n      },\r\n      {\r\n        path: '/SystemManagement',\r\n        name: 'SystemManagement',\r\n\r\n        children: [\r\n          {\r\n            path: '/sys_MacForm',\r\n            name: 'sys_MacForm',\r\n            component: sys_MacForm,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/sys_ComputerInventory',\r\n            name: 'sys_ComputerInventory',\r\n            component: sys_ComputerInventory,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/sys_DAE_Data_Management',\r\n            name: 'sys_DAE_Data_Management',\r\n            component: sys_DAE_Data_Management,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/sys_WF_Management',\r\n            name: 'sys_WF_Management',\r\n            component: sys_WF_Management,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/FormTemplateManagement',\r\n            name: 'FormTemplateManagement',\r\n            component: FormTemplateManagement,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/FormDesigner',\r\n            name: 'FormDesigner',\r\n            component: FormDesigner,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/FormDesigner/:id',\r\n            name: 'FormDesignerEdit',\r\n            component: FormDesigner,\r\n            meta: { misPermission: true }\r\n          },\r\n          {\r\n            path: '/DeviceHostManagement',\r\n            name: 'DeviceHostManagement',\r\n            component: DeviceHostManagement,\r\n            meta: { \r\n              requiresAuth: true,\r\n              permissions: ['IT']\r\n            }\r\n          },\r\n        ]\r\n      },\r\n    ]\r\n  },\r\n  //  ( Home )\r\n  {\r\n    path: '/form/fill/:id',\r\n    name: 'FormFill',\r\n    component: () => import('@/components/DynamicForm/FormFillPage.vue'),\r\n    meta: { requiresAuth: true }\r\n  },\r\n  //  /home\r\n  {\r\n    path: '/',\r\n    redirect: '/home'\r\n  }\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory (process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  //  isDev \r\n  if (to.meta.isDev) {\r\n    const authStore = useAuthStore();\r\n    const permissions = authStore.user.permissions || [];\r\n    // console.log(\"permissions:\",permissions);\r\n    if (!permissions.includes('dev')) {\r\n      ElMessage.warning('');\r\n      next(false); // \r\n      return;\r\n    } else {\r\n      next(); // \r\n    }\r\n  } else{\r\n    next();\r\n  }\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const authStore = useAuthStore();\r\n  const userId = VueCookies.get('userId');\r\n  // console.log('beforeEach userId:', userId);\r\n  // \r\n  if (to.meta.accountPermission) {\r\n    const permissions = authStore.user.permissions || [];\r\n    // console.log(\"permissions:\",permissions);\r\n    if (!permissions.includes('') && !permissions.includes('dev'))   {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n\r\n  // DAE_Hight_Level_Team_Permission\r\n  if(to.meta.DAE_Hight_Level_Team_Permission){\r\n    const permissions = authStore.user.permissions || [];\r\n    console.log(permissions)\r\n    if (!permissions.includes('DAE_Hight_Level_Team_Permission') && !permissions.includes('dev'))  {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n\r\n  if(to.meta.salesPermission){\r\n    const permissions = authStore.user.permissions || [];\r\n    console.log(\"permissions:\",permissions);\r\n    if (!permissions.includes('') && !permissions.includes('') && !permissions.includes('')  && !permissions.includes('dev')) {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n\r\n    if(to.meta.RO0006Permission){\r\n    const permissions = authStore.user.permissions || [];\r\n    \r\n    // console.log(\"permissions:\",permissions);\r\n    if (!permissions.includes('') && !permissions.includes('dev')) {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n  \r\n\r\n  if(to.meta.sales_manufaction_research_Manager_Permission){\r\n    const permissions = authStore.user.permissions || [];\r\n    // console.log(\"permissions:\",permissions);\r\n    if (!permissions.includes('') && !permissions.includes('dev') && !permissions.includes('')  && !permissions.includes(''))\r\n      {\r\n        ElMessage.info('!');\r\n        next(false); // \r\n        return;\r\n      }\r\n  }\r\n\r\n\r\n  // MIS\r\n  if (to.meta.boardPermission) {\r\n    const permissions = authStore.user.roles || [];\r\n    if (!permissions.includes('RO9999')) {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n\r\n\r\n  // MIS\r\n  if (to.meta.misPermission) {\r\n    const permissions = authStore.user.permissions || [];\r\n    if (!permissions.includes('sys') && !permissions.includes('sys_North')) {\r\n      ElMessage.info('!');\r\n      next(false); // \r\n      return;\r\n    }\r\n  }\r\n\r\n  //  noAuth\r\n  if (to.meta.noAuth) {\r\n    if (to.name !== 'Login' && !userId) {\r\n\r\n      next({ name: 'Login' });\r\n\r\n    } else {\r\n      next();\r\n    }\r\n    return;\r\n  }\r\n\r\n  // \r\n  if (to.name !== 'Login' && !userId) {\r\n    next({ name: 'Login' });\r\n  } else {\r\n    next();\r\n  }\r\n});\r\nexport default router","export default {\r\n  absenteeism:'',\r\n  attendanceRecords: '',\r\n  attendanceDate: \"\",\r\n  attendanceStatistics: '',\r\n  employeeName: '',\r\n  employeeNameSearch: '',\r\n  lateText: \" {delay} \",\r\n\r\n  Date:'',\r\n  employee:'',\r\n  Attendance:'Attendance',\r\n  ClockIn:'',\r\n  ClockOut:'',\r\n  minutes:'',\r\n  leaveTypes: {\r\n    annualUsed: '()',\r\n    annualRemaining: '()',\r\n    personal: '',\r\n    official: '',\r\n    menstrual: '',\r\n    family: '',\r\n    bereavement: '',\r\n    maternity: '',\r\n    parental: '',\r\n    marriage: '',\r\n    workInjury: '',\r\n    paternity: '',\r\n  },\r\n  overtime: '',\r\n  lateWithinThreeMinutes: '3',\r\n  lateBeyondThreeMinutes: '3',\r\n  totalMinutesLate: '',\r\n  records: '',\r\n  accumulatedMinutesAfterFourth: '4',\r\n  unit: {\r\n    hour: ''\r\n  },\r\n  holiday:{\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\",\r\n    \"\": \"\"\r\n  },\r\n}\r\n","export default {\r\n  absenteeism:'Absenteeism',\r\n  attendanceRecords: 'Attendance Records',\r\n  attendanceDate: \"Date\",\r\n  attendanceStatistics: 'Attendance Statistics',\r\n  employeeName:'Employee',\r\n  employeeNameSearch: 'search',\r\n  employee:'employee',\r\n  lateText: \"{delay} minutes late\",\r\n  Date:'Date',\r\n  ClockIn:'Clock In',\r\n  ClockOut:'Clock Out',\r\n  Attendance:'Attendance',\r\n  minutes:'minutes',\r\n  leaveTypes: {\r\n    annualUsed: 'Annual Leave (Used)',\r\n    annualRemaining: 'Annual Leave (Remaining)',\r\n    personal: 'Personal Leave',\r\n    official: 'Official Leave',\r\n    menstrual: 'Menstrual Leave',\r\n    family: 'Family Care Leave',\r\n    bereavement: 'Bereavement Leave',\r\n    maternity: 'Maternity Leave',\r\n    parental: 'Parental Leave',\r\n    marriage: 'Marriage Leave',\r\n    workInjury: 'Work Injury Leave',\r\n    paternity: 'Paternity Leave',\r\n  },\r\n  overtime: 'Overtime',\r\n  lateWithinThreeMinutes: 'Late within 3 minutes',\r\n  lateBeyondThreeMinutes: 'Late beyond 3 minutes',\r\n  totalMinutesLate: 'Total minutes late',\r\n  records: 'Records',\r\n  accumulatedMinutesAfterFourth: 'Accumulated minutes after the 4th record',\r\n  unit: {\r\n    hour: 'hours'\r\n  },\r\n\r\n  holiday:{\r\n    \"\": \"Founding Day\",\r\n    \"\": \"Little New Year's Eve\",\r\n    \"\": \"Lunar New Year's Eve\",\r\n    \"\": \"Chinese New Year\",\r\n    \"\": \"Make-up Workday\",\r\n    \"\": \"Peace Memorial Day\",\r\n    \"\": \"Compensatory Holiday\",\r\n    \"\": \"Children's Day and Tomb-Sweeping Day\",\r\n    \"\": \"Dragon Boat Festival\",\r\n    \"\": \"Mid-Autumn Festival\",\r\n    \"\": \"National Day\"\r\n  }\r\n}\r\n","let axiosInstance;\r\n// import { useAuthStore } from '../stores/auth.js';  \r\nimport { jwtDecode } from 'jwt-decode';\r\nimport VueCookies from 'vue-cookies';\r\n\r\nexport function setLoginAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst apiUser = () => axiosInstance;\r\nconst controllerPath = 'Authentication';\r\n\r\n\r\nexport default {\r\n\r\n\r\n    // axios    \r\n    login_JWT(userCredentials) {\r\n      return apiUser().post(`${controllerPath}/loginJWT`, userCredentials)\r\n        .then(response => {\r\n          // const authStore = useAuthStore();\r\n          //  JWT  LocalStorage  Pinia Store \r\n          localStorage.setItem('token', response.data.token);\r\n          // authStore.setToken('token',  response.data.token);\r\n          return response.data;\r\n        });\r\n    },\r\n\r\n    //token\r\n    refresh_JWT(user_id) {\r\n      return apiUser().get(`${controllerPath}/refreshJWT/${user_id}`) //  'refreshJWT' \r\n        .then(response => {\r\n          // const authStore = useAuthStore();\r\n          localStorage.setItem('token', response.data.token);\r\n          // authStore.setToken('token', response.data.token);\r\n          const decodedToken = jwtDecode(response.data.token);\r\n        \r\n  \r\n          //user CookiespendingFormID\r\n          const pendingFormIDArray = decodedToken.stringPendingFormID ? decodedToken.stringPendingFormID.split(',') : [];\r\n          const SV_pendingFormIDArray = decodedToken.string_SV_PendingFormID ? decodedToken.string_SV_PendingFormID.split(',') : [];\r\n          const GM_pendingFormIDArray = decodedToken.string_GM_PendingFormID ? decodedToken.string_GM_PendingFormID.split(',') : [];\r\n\r\n          console.log('\\npendingFormIDArray'+ pendingFormIDArray+ '\\nSV_pendingFormIDArray:', SV_pendingFormIDArray + '\\nGM_pendingFormIDArray:', GM_pendingFormIDArray);\r\n          VueCookies.set('pendingFormID', JSON.stringify(pendingFormIDArray), '1h', '/'); // 1\r\n          VueCookies.set('SV_pendingFormID', JSON.stringify(SV_pendingFormIDArray), '1h', '/'); // 1\r\n          VueCookies.set('GM_pendingFormID', JSON.stringify(GM_pendingFormIDArray), '1h', '/'); // 1\r\n\r\n          return response.data;\r\n        })\r\n        .catch(error => { \r\n          console.error('Error refreshing JWT:', error);\r\n          throw error; // \r\n        });\r\n    },\r\n\r\n    Login(useraccount) {\r\n       return apiUser().get(`/${controllerPath}/Login/` + useraccount);\r\n    },\r\n  };\r\n\r\n\r\n","let axiosInstance;\r\n\r\nexport function setFileAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst apiUser = () => axiosInstance;\r\nconst controllerPath = 'File';\r\n\r\n\r\nexport default {\r\n  //\r\n  uploadFiles(formData) {\r\n    const url = `${controllerPath}/uploadFiles`;\r\n\r\n    console.log('Request uploadFiles URL:', url);\r\n\r\n    return apiUser().post(`${controllerPath}/uploadFiles`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n  },\r\n\r\n  //\r\n  getFiles(formNo) {\r\n    const url = `${controllerPath}/getFiles/${formNo}`;\r\n    console.log('Request URL:', url);\r\n    return apiUser().get(`${controllerPath}/getFiles/${formNo}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  \r\n  //\r\n  getFilesDD(formNo) {\r\n    const url = `${controllerPath}/getFilesDD/${formNo}`;\r\n    console.log('Request URL:', url);\r\n    return apiUser().get(`${controllerPath}/getFilesDD/${formNo}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n    \r\n};\r\n","let axiosInstance;\r\n\r\nexport function setUpdateAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst apiUser = () => axiosInstance;\r\nconst controllerPath = 'Update';\r\n\r\n\r\nexport default {\r\n    GetDraftToReviseCheckboxOptions(formNo){\r\n        return apiUser().get(`${controllerPath}/GetDraftToReviseCheckboxOptions/${formNo}`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    GetToReviseCheckboxOptions(formNo){\r\n        return apiUser().get(`${controllerPath}/GetToReviseCheckboxOptions/${formNo}`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n\r\n    GetRevisedCheckboxOptions(formNo){\r\n        return apiUser().get(`${controllerPath}/GetRevisedCheckboxOptions/${formNo}`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    GetMaster_Revised_Status(){\r\n        return apiUser().get(`${controllerPath}/GetMaster_Revised_Status/`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    cancelRevised(formNo, revisedData, userId) {\r\n        // \r\n        const RevisedDto = {\r\n            RevisedData: revisedData,\r\n            UserId: userId,\r\n            CancelReason: ''\r\n        };\r\n        return apiUser().post(`${controllerPath}/cancelRevised/${formNo}`, RevisedDto, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n    },\r\n\r\n    addRevised(formNo, revisedData, userId, add_reason) {\r\n        // \r\n        const RevisedDto = {\r\n            RevisedData: revisedData,\r\n            UserId: userId,\r\n            AddReason: add_reason\r\n        };\r\n        return apiUser().post(`${controllerPath}/addRevised/${formNo}`, RevisedDto, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n    },\r\n    getRevisedHistory(formNo) {\r\n        return apiUser().get(`${controllerPath}/getRevisedHistory/${formNo}`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    cancelToRevise(formNo, toReviseData, userId, cancelReason) {\r\n        // \r\n        const ToReviseData = {\r\n            ToReviseData: toReviseData,\r\n            UserId: userId,\r\n            CancelReason: cancelReason\r\n        };\r\n        return apiUser().post(`${controllerPath}/cancelToRevise/${formNo}`, ToReviseData, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n    },\r\n    deleteToRevise(formNo, toReviseData, userId, deleteReason) {\r\n        // \r\n        const ToReviseData = {\r\n            ToReviseData: toReviseData,\r\n            UserId: userId,\r\n            DeleteReason: deleteReason\r\n        };\r\n        console.log(JSON.stringify(ToReviseData));\r\n        return apiUser().post(`${controllerPath}/deleteToRevise/${formNo}`, ToReviseData, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n    },\r\n    addToRevise(formNo, toReviseData, userId, add_reason) {\r\n        // \r\n        const ToReviseDto = {\r\n            ToReviseData: toReviseData,\r\n            UserId: userId,\r\n            AddReason: add_reason\r\n        };\r\n        return apiUser().post(`${controllerPath}/addToRevise/${formNo}`, ToReviseDto, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n    },\r\n    getToReviseHistory(formNo) {\r\n        return apiUser().get(`${controllerPath}/getToReviseHistory/${formNo}`, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    }\r\n}","import { createApp } from 'vue';\r\nimport { createPinia } from 'pinia';\r\nimport persistedstate from 'pinia-plugin-persistedstate';\r\nimport axios from 'axios';\r\n\r\nimport Vue3Dragscroll from 'vue3-dragscroll'\r\nimport App from './App.vue';\r\nimport PrimeVue from 'primevue/config';\r\nimport ElementPlus from 'element-plus';\r\n// \r\nimport Aura from '@primevue/themes/aura';\r\nimport 'tailwindcss/tailwind.css';\r\nimport 'primeicons/primeicons.css'; \r\nimport 'primeflex/primeflex.css'; \r\nimport 'element-plus/dist/index.css';\r\n\r\nimport  InfiniteScroll  from 'element-plus'\r\n\r\n\r\n//Quasar\r\nimport { Quasar, Loading } from 'quasar'\r\n// Quasar  ()\r\nimport 'quasar/dist/quasar.css'\r\n\r\nimport ConfirmationService from 'primevue/confirmationservice';\r\nimport BadgeDirective from 'primevue/badgedirective';\r\nimport router from './router';\r\nimport Toast from 'primevue/toast';\r\nimport ToastService from 'primevue/toastservice';\r\nimport VueCookies from 'vue-cookies';\r\nimport ConfirmDialog from 'primevue/confirmdialog';\r\n\r\n// import 'quill/dist/quill.core.css';\r\n// import 'quill/dist/quill.snow.css';\r\n// import 'quill/dist/quill.bubble.css';\r\nimport VueQuillEditor from 'vue-quill-editor';\r\n\r\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue';\r\nimport '@fontsource/roboto'; //  Roboto \r\n\r\n//  vue-i18n\r\n//  vue-i18n \r\nimport { createI18n } from 'vue-i18n';\r\nimport zhTW from './locales/zh-TW';\r\nimport enUS from './locales/en-US';\r\n\r\n//  i18n \r\nconst messages = {\r\n  'zh-TW': zhTW,\r\n  'en-US': enUS,\r\n};\r\n\r\n//  i18n  (zh-TW)\r\nconst i18n = createI18n({\r\n  legacy: false, //  Composition API legacy: false\r\n  locale: 'zh-TW',\r\n  fallbackLocale: 'en-US',\r\n  messages,\r\n  missingWarn: false,\r\n  fallbackWarn: false,\r\n});\r\n\r\n//  Axios \r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_URL,  //  baseURL\r\n});\r\n\r\n//  Vue \r\nconst app = createApp(App);\r\nconst pinia = createPinia();\r\n\r\n//  Axios  Vue  provide\r\napp.config.globalProperties.$axios = axiosInstance;\r\napp.provide('$axios', axiosInstance);\r\n\r\n// \r\nimport { setLoginAxios } from './service/LoginService';\r\nimport { setFileAxios } from './service/FileService';\r\nimport { setUpdateAxios } from './service/UpdateService';\r\nimport { setEIPAxios } from './service/EIPService';\r\nimport { setMailAxios } from './service/MailService';\r\nimport { setWorkflowAxios } from './service/WorkflowService';\r\nimport { setReferenceDataAxios } from './service/ReferenceDataService';\r\nimport { setEventsAndStatisticsAxios } from './service/EventsAndStatisticsService';\r\nimport { setFinanceAxios } from './service/FinanceService';\r\nimport { setExternalAxios } from './service/ExternalService';\r\nimport { setFormAxios } from './service/FormService';\r\nimport { setCRMAxios } from './service/CRMService';\r\nimport { setDynamicFormAxios } from './service/DynamicFormService';\r\nimport { setSpecialLeaveAxios } from './service/SpecialLeaveService';\r\nimport { setSalesAxios } from './service/SalesService';\r\n\r\n\r\nsetLoginAxios(axiosInstance);\r\nsetFileAxios(axiosInstance);\r\nsetUpdateAxios(axiosInstance);\r\nsetEIPAxios(axiosInstance);\r\nsetMailAxios(axiosInstance);\r\nsetWorkflowAxios(axiosInstance);\r\nsetEventsAndStatisticsAxios(axiosInstance);\r\nsetReferenceDataAxios(axiosInstance);\r\nsetFinanceAxios(axiosInstance);\r\nsetExternalAxios(axiosInstance);\r\nsetFormAxios(axiosInstance);\r\nsetCRMAxios(axiosInstance);\r\nsetDynamicFormAxios(axiosInstance);\r\nsetSpecialLeaveAxios(axiosInstance);\r\nsetSalesAxios(axiosInstance);\r\n\r\n/* 1.  jQuery  window () */\r\nimport $ from 'jquery';\r\nwindow.$ = window.jQuery = $;\r\n\r\n/* 2.  orgchart  JS  CSS */\r\nimport 'orgchart/dist/js/jquery.orgchart';\r\nimport 'orgchart/dist/css/jquery.orgchart.css';\r\n\r\n\r\n//  cron \r\nimport '@vue-js-cron/element-plus/dist/element-plus.css';\r\n// import CronElementPlusPlugin from '@vue-js-cron/element-plus';\r\n// app.use(CronElementPlusPlugin);\r\n\r\n//  Element Plus \r\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\r\n  app.component(key, component);\r\n}\r\n\r\n\r\n//CSS\r\nimport '@/css/tag/custom-tag.css';\r\n\r\n//  Pinia \r\npinia.use(persistedstate);\r\n\r\n// vue-dragscroll \r\napp.use(Vue3Dragscroll)\r\napp.use(InfiniteScroll)\r\n\r\n//  vue-i18n \r\napp.use(i18n);\r\napp.use(VueQuillEditor);\r\napp.use(Quasar, {\r\n  plugins: { Loading },\r\n})\r\napp.use(PrimeVue, {\r\n  theme: {\r\n    preset: Aura,\r\n    options: {\r\n      prefix: 'p',\r\n      darkModeSelector: 'light',\r\n      cssLayer: false\r\n    }\r\n  }\r\n});\r\napp.directive('focus', {\r\n  mounted(el) {\r\n    el.focus();\r\n  }\r\n});\r\n\r\n// eslint-disable-next-line vue/multi-word-component-names\r\napp.component('Toast', Toast);\r\napp.component('ConfirmDialog', ConfirmDialog);\r\n\r\n// \r\napp.directive('badge', BadgeDirective);\r\n\r\napp.use(VueCookies);\r\napp.use(pinia);\r\napp.use(ToastService);\r\napp.use(router);\r\n// app.use(PrimeVue);\r\n\r\n// \r\nimport zhTw from 'element-plus/es/locale/lang/zh-tw'\r\napp.use(ElementPlus, {\r\n  locale: zhTw\r\n});\r\napp.use(ConfirmationService);\r\n\r\n\r\n\r\napp.config.errorHandler = function (err, vm, info) {\r\n  const errorMessage = err.stack || err.message || err;\r\n  const componentName = vm.$options.name || vm.$options._componentTag || '';\r\n  const lifecycleInfo = info || 'N/A';\r\n  console.error(`: ${errorMessage}\\n: ${componentName}\\nVue : ${lifecycleInfo}`);\r\n  alert(`: ${errorMessage}\\n: ${componentName}\\n: ${lifecycleInfo}`);\r\n};\r\n\r\n\r\n// \r\napp.mount('#app');\r\n","// src/services/onlineHubService.js\r\nimport * as signalR from \"@microsoft/signalr\";\r\nimport VueCookies from 'vue-cookies';\r\n\r\nconst SIGNALR_URL = (process.env.VUE_APP_SIGNALR_URL || \"\")\r\n  .replace(/\\/+$/, \"\");\r\n\r\nlet connection = null;\r\n\r\nexport async function initOnlineHub() {\r\n  if (!SIGNALR_URL) {\r\n    console.error(\" .env.development  .env.production  VUE_APP_SIGNALR_URL\");\r\n    return;\r\n  }\r\n\r\n  connection = new signalR.HubConnectionBuilder()\r\n    .withUrl(SIGNALR_URL)        //  URL\r\n    .withAutomaticReconnect()\r\n    .build();\r\n\r\n  connection.on(\"UpdateOnlineCount\", () => {\r\n    // \r\n    //  UpdateOnlineUsers \r\n    //  UpdateOnlineUsers \r\n    // console.log(\":\", count, \"\");\r\n  });\r\n\r\n  // \r\n  connection.onreconnected(async () => {\r\n    // console.log(\"SignalR \");\r\n    await registerCurrentUser();\r\n  });\r\n\r\n  // \r\n  connection.on(\"UpdateOnlineUsers\", (users) => {\r\n    // \r\n    const registeredUsers = users.filter(user => {\r\n      return user.userId !== \"\" && \r\n            user.userName !== \"\" &&\r\n            user.userId !== \"\" &&\r\n            user.userName !== \"\";\r\n    });\r\n    \r\n    // console.log(\":\", registeredUsers);\r\n    // console.log(\":\", registeredUsers.length, \"\");\r\n    \r\n    // \r\n    const registeredCount = registeredUsers.length;\r\n    const el = document.getElementById(\"onlineCount\");\r\n    if (el) {\r\n      el.innerText = registeredCount;\r\n    }\r\n    \r\n    //  store\r\n    // \r\n    window.dispatchEvent(new CustomEvent('registeredUsersUpdated', { \r\n      detail: { users: registeredUsers, count: registeredCount } \r\n    }));\r\n  });\r\n\r\n  try {\r\n    await connection.start();\r\n    // console.log(\"SignalR :\", SIGNALR_URL);\r\n    \r\n    // \r\n    await registerCurrentUser();\r\n  } catch (err) {\r\n    console.error(\"SignalR :\", err);\r\n  }\r\n}\r\n\r\n//  SignalR Hub\r\nasync function registerCurrentUser() {\r\n  try {\r\n    //  cookies \r\n    const userId = VueCookies.get('userId') || '';\r\n    const userName = VueCookies.get('userName') || '';\r\n    const departmentId = VueCookies.get('departmentId') || '';\r\n    const departmentName = VueCookies.get('departmentName') || '';\r\n    const titleId = VueCookies.get('titleId') || '';\r\n    const titleName = VueCookies.get('titleName') || '';\r\n    const email = VueCookies.get('email') || '';\r\n    \r\n    //  localStorage \r\n    const authData = localStorage.getItem('auth');\r\n    let roles = [];\r\n    let permissions = [];\r\n    \r\n    if (authData) {\r\n      try {\r\n        const parsedAuth = JSON.parse(authData);\r\n        roles = parsedAuth.user?.roles || [];\r\n        permissions = parsedAuth.user?.permissions || [];\r\n      } catch (e) {\r\n        console.warn(' auth :', e);\r\n      }\r\n    }\r\n\r\n    if (userId && connection && connection.state === signalR.HubConnectionState.Connected) {\r\n      await connection.invoke(\"RegisterUser\", \r\n        userId, userName, departmentId, departmentName,\r\n        titleId, titleName, email, roles, permissions\r\n      );\r\n      // console.log(\":\", { userId, userName, departmentName, titleName });\r\n    } else {\r\n      console.warn(\"SignalR :\", { userId, connectionState: connection?.state });\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n}\r\n\r\n// \r\nexport async function registerUser() {\r\n  if (connection && connection.state === signalR.HubConnectionState.Connected) {\r\n    await registerCurrentUser();\r\n  } else {\r\n    console.warn(\"SignalR \");\r\n  }\r\n}\r\n\r\n\r\n/**  */\r\nexport function stopOnlineHub() {\r\n  return connection?.stop();\r\n}\r\n","// /src/axios/axiosInstance.js\r\nimport axios from 'axios';\r\nimport { useAuthStore } from '@/stores/auth'; // \r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_URL || 'http://localhost:5004/api/'\r\n});\r\n\r\naxiosInstance.interceptors.request.use((config) => {\r\n  const authStore = useAuthStore();\r\n  if (authStore.token) {\r\n    config.headers.Authorization = `Bearer ${authStore.token}`;\r\n  }\r\n  return config;\r\n}, (error) => {\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport default axiosInstance;\r\n","import axiosInstance from '@/router/axiosInstance'\r\n\r\n//  axios \r\nlet axios = axiosInstance\r\n\r\nexport function setDynamicFormAxios(instance) {\r\n  axios = instance\r\n}\r\n\r\nconst controllerPath = 'FormTemplate'\r\n\r\nconst DynamicFormService = {\r\n  // ====================  API ====================\r\n  \r\n  /**\r\n   * \r\n   * @returns {Promise}\r\n   */\r\n  getFormTemplates() {\r\n    return axios.get(`${controllerPath}/FormTemplates`)\r\n  },\r\n\r\n  /**\r\n   *  ID \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  getFormTemplate(id) {\r\n    return axios.get(`${controllerPath}/FormTemplate/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {Object} templateData - \r\n   * @returns {Promise}\r\n   */\r\n  createFormTemplate(templateData) {\r\n    return axios.post(`${controllerPath}/CreateFormTemplate`, templateData)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @param {Object} templateData - \r\n   * @returns {Promise}\r\n   */\r\n  updateFormTemplate(id, templateData) {\r\n    return axios.put(`${controllerPath}/UpdateFormTemplate/${id}`, templateData)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  deleteFormTemplate(id) {\r\n    return axios.delete(`${controllerPath}/DeleteFormTemplate/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} searchTerm - \r\n   * @returns {Promise}\r\n   */\r\n  searchFormTemplates(searchTerm) {\r\n    return axios.get(`${controllerPath}/SearchFormTemplates`, { \r\n      params: { searchTerm } \r\n    })\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  publishFormTemplate(id) {\r\n    return axios.patch(`${controllerPath}/PublishFormTemplate/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  closeFormTemplate(id) {\r\n    return axios.patch(`${controllerPath}/CloseFormTemplate/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  copyFormTemplate(id) {\r\n    return axios.post(`${controllerPath}/CopyFormTemplate/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  getFormAnalytics(id) {\r\n    return axios.get(`${controllerPath}/FormAnalytics/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  getFormFieldStats(id) {\r\n    return axios.get(`${controllerPath}/FormFieldStats/${id}`)\r\n  },\r\n\r\n  // ====================  API ====================\r\n\r\n  /**\r\n   * \r\n   * @param {Object} query - \r\n   * @returns {Promise}\r\n   */\r\n  getFormResponses(query = {}) {\r\n    return axios.get(`${controllerPath}/FormResponse`, { params: query })\r\n  },\r\n\r\n  /**\r\n   *  ID \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  getFormResponse(id) {\r\n    return axios.get(`${controllerPath}/FormResponse/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {Object} responseData - \r\n   * @returns {Promise}\r\n   */\r\n  submitFormResponse(responseData) {\r\n    return axios.post(`${controllerPath}/FormResponse`, responseData)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @param {string} status - \r\n   * @returns {Promise}\r\n   */\r\n  updateFormResponseStatus(id, status) {\r\n    return axios.patch(`${controllerPath}/FormResponse/${id}/status`, { status })\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} id -  ID\r\n   * @returns {Promise}\r\n   */\r\n  deleteFormResponse(id) {\r\n    return axios.delete(`${controllerPath}/FormResponse/${id}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formTemplateId -  ID\r\n   * @returns {Promise}\r\n   */\r\n  getFormStatistics(formTemplateId) {\r\n    return axios.get(`${controllerPath}/FormResponse/statistics/${formTemplateId}`)\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} formTemplateId -  ID\r\n   * @param {string} format -  (excel, csv)\r\n   * @returns {Promise}\r\n   */\r\n  exportFormResponses(formTemplateId, format = 'excel') {\r\n    return axios.get(`${controllerPath}/FormResponse/export/${formTemplateId}`, {\r\n      params: { format },\r\n      responseType: 'blob'\r\n    })\r\n  },\r\n\r\n  // ====================  API ====================\r\n\r\n  /**\r\n   * \r\n   * @param {FormData} formData - \r\n   * @returns {Promise}\r\n   */\r\n  uploadFile(formData) {\r\n    return axios.post(`${controllerPath}/File/upload`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string} fileId -  ID\r\n   * @returns {Promise}\r\n   */\r\n  downloadFile(fileId) {\r\n    return axios.get(`${controllerPath}/File/download/${fileId}`, {\r\n      responseType: 'blob'\r\n    })\r\n  },\r\n\r\n  // ====================  ====================\r\n\r\n  /**\r\n   * \r\n   * @param {Object} formData - \r\n   * @param {Array} fields - \r\n   * @returns {Object} \r\n   */\r\n  validateFormData(formData, fields) {\r\n    const errors = []\r\n    \r\n    fields.forEach(field => {\r\n      const value = formData[field.id]\r\n      \r\n      // \r\n      if (field.required && (!value || value.toString().trim() === '')) {\r\n        errors.push(`${field.label} `)\r\n        return\r\n      }\r\n      \r\n      // \r\n      if (value && field.validation) {\r\n        const validation = field.validation\r\n        const stringValue = value.toString()\r\n        \r\n        // \r\n        if (validation.minLength && stringValue.length < validation.minLength) {\r\n          errors.push(`${field.label}  ${validation.minLength} `)\r\n        }\r\n        \r\n        if (validation.maxLength && stringValue.length > validation.maxLength) {\r\n          errors.push(`${field.label}  ${validation.maxLength} `)\r\n        }\r\n        \r\n        // \r\n        if (field.type === 'number') {\r\n          const numValue = parseFloat(stringValue)\r\n          if (isNaN(numValue)) {\r\n            errors.push(`${field.label} `)\r\n          } else {\r\n            if (validation.min !== undefined && numValue < validation.min) {\r\n              errors.push(`${field.label}  ${validation.min}`)\r\n            }\r\n            if (validation.max !== undefined && numValue > validation.max) {\r\n              errors.push(`${field.label}  ${validation.max}`)\r\n            }\r\n          }\r\n        }\r\n        \r\n        // \r\n        if (validation.pattern) {\r\n          const regex = new RegExp(validation.pattern)\r\n          if (!regex.test(stringValue)) {\r\n            errors.push(validation.customMessage || `${field.label} `)\r\n          }\r\n        }\r\n      }\r\n    })\r\n    \r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    }\r\n  },\r\n\r\n  /**\r\n   * \r\n   * @param {string|Date} date - \r\n   * @returns {string} \r\n   */\r\n  formatDate(date) {\r\n    if (!date) return ''\r\n    return new Date(date).toLocaleString('zh-TW')\r\n  },\r\n\r\n  /**\r\n   *  ID\r\n   * @returns {string}  ID\r\n   */\r\n  generateId() {\r\n    return Date.now().toString(36) + Math.random().toString(36).substr(2)\r\n  }\r\n}\r\n\r\nexport default DynamicFormService","let axiosInstance;\r\nimport { useAuthStore } from '../stores/auth.js';\r\nimport { useUserStore } from '../stores/user.js';\r\nimport {jwtDecode} from 'jwt-decode'; \r\nimport VueCookies from 'vue-cookies';\r\nexport function setEIPAxios(instance) {\r\n  axiosInstance = instance;\r\n}\r\n\r\nconst getUserStore = () => {\r\n  return useUserStore();\r\n};\r\n\r\nconst api = () => axiosInstance;\r\nconst controllerPath = 'EIP'; //  controller  EIP\r\n\r\nexport default {\r\n  //  axios \r\n  login_JWT(userCredentials) {\r\n    \r\n    return api()\r\n      .post(`${controllerPath}/loginJWT`, userCredentials)\r\n      .then(response => {\r\n\r\n        //  JWT token  LocalStorage\r\n        localStorage.setItem('token', response.token);\r\n\r\n        // const authStore = useAuthStore();\r\n        //  JWT  LocalStorage  Pinia Store \r\n        const token = response.data.token;\r\n        localStorage.setItem('token', token);\r\n        // authStore.setToken('token', token);\r\n\r\n        //  JWT\r\n        const decodedToken = jwtDecode(token);\r\n\r\n        const expireTime = '24h';\r\n        VueCookies.set('userId', decodedToken.sub, expireTime, '/'); //  `sub`\r\n        VueCookies.set('userName', decodedToken.userName, expireTime, '/');\r\n        VueCookies.set('departmentId', decodedToken.departmentId, expireTime, '/');\r\n        VueCookies.set('departmentName', decodedToken.departmentName, expireTime, '/');\r\n        VueCookies.set('titleId', decodedToken.titleId, expireTime, '/');\r\n        VueCookies.set('titleName', decodedToken.titleName, expireTime, '/');\r\n        VueCookies.set('userTitle', decodedToken.titleName, expireTime, '/');\r\n        VueCookies.set('dpt_title_Id', decodedToken.dpt_title_Id, expireTime, '/');\r\n        VueCookies.set('email', decodedToken.email, expireTime, '/');\r\n        console.log(response.data);\r\n        console.log(\"decodedToken.userName: \"+decodedToken.userName);\r\n        return \"Login Success\";\r\n      })\r\n      .catch(error => {\r\n        console.error('Login JWT error:', error);\r\n        throw error;\r\n      });\r\n  },\r\n\r\n  //  token\r\n  refresh_JWT(user_id) {\r\n    return api()\r\n      .get(`${controllerPath}/refreshJWT/${user_id}`) //  API \r\n      .then(response => {\r\n        const authStore = useAuthStore();\r\n        const token = response.data.token;\r\n\r\n        //  LocalStorage  Pinia Store\r\n        localStorage.setItem('token', token);\r\n        authStore.setToken('token', token);\r\n        \r\n        const decodedToken = jwtDecode(token);\r\n        console.log('Decoded refreshed JWT:', decodedToken);\r\n\r\n\r\n\r\n        //  Cookies\r\n        VueCookies.set('userId', decodedToken.sub, '1h', '/'); //  `sub`\r\n        VueCookies.set('userName', decodedToken.userName, '1h', '/');\r\n        VueCookies.set('departmentId', decodedToken.departmentId, '1h', '/');\r\n        VueCookies.set('departmentName', decodedToken.departmentName, '1h', '/');\r\n        VueCookies.set('titleId', decodedToken.titleId, '1h', '/');\r\n        VueCookies.set('titleName', decodedToken.titleName, '1h', '/');\r\n        VueCookies.set('dpt_title_Id', decodedToken.dpt_title_Id, '1h', '/');\r\n        VueCookies.set('email', decodedToken.email, '1h', '/');\r\n        \r\n        const userStore = getUserStore();\r\n\r\n        //  Pinia  userStore \r\n        userStore.setUserInfo(\r\n          decodedToken.username,\r\n          decodedToken.departmentId,\r\n          decodedToken.departmentName,\r\n          decodedToken.sub,\r\n          decodedToken.dpt_title_Id\r\n        );\r\n\r\n        // console.log(\"EIPServiceuserStore:\"+userStore.userId);\r\n\r\n        return response.data;\r\n      })\r\n      .catch(error => {\r\n        console.error('Error refreshing JWT:', error);\r\n        throw error;\r\n      });\r\n  },\r\n\r\n  Login(useraccount) {\r\n    return api().get(`/${controllerPath}/Login/${useraccount}`);\r\n  },\r\n\r\n  login_EIP(userData) {\r\n    return api().post(`/${controllerPath}/loginEIP/`,userData);\r\n  },\r\n\r\n  autoLogin(userId) {\r\n    return api().post(`/${controllerPath}/autoLogin/${userId}`);\r\n  },\r\n  \r\n  //\r\n  firstLoginInputPassword(userData) {\r\n    return api().post(`/${controllerPath}/firstLoginInputPassword/`,userData);\r\n  },\r\n\r\n  //()\r\n  getDptsList() {\r\n    return api().get(`/${controllerPath}/getDptsList/`);\r\n  },\r\n\r\n  getTitlesList() {\r\n    return api().get(`/${controllerPath}/getTitlesList/`);\r\n  },\r\n  submitRegForm(regFormData) {\r\n    return api().post(`${controllerPath}/submitRegForm`, regFormData, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  getUsersList(){\r\n    return api().get(`${controllerPath}/getUsersList`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  updateUsers(usersData){\r\n    return api().patch(`${controllerPath}/updateUsers`, usersData, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  getIP(){\r\n    return api().get(`${controllerPath}/checkIP`,  {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  punch(userId, data) {\r\n    return api().post(`/${controllerPath}/punch/${userId}`, data, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  getEmployeeDataByID(EmpID){\r\n    return api().get(`${controllerPath}/getPersonalInformation/${EmpID}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  editEmployeeData(EmpID,EmpData){\r\n    return api().put(`${controllerPath}/updatePersonalInformation/${EmpID}`,EmpData, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  editPassword(EmpID,EmpData){\r\n    return api().put(`${controllerPath}/updatePersonalPassword/${EmpID}`,EmpData, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    });\r\n  },\r\n\r\n  // \r\n  getAuditEvents(params) {\r\n    return api().get(`${controllerPath}/events`, {\r\n      params: params,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  getOnlineUsers() {\r\n    return api().get(`${controllerPath}/getOnlineUsers`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  //  Presence API \r\n  getPresenceOnlineUsers() {\r\n    return api().get('/api/presence/online', {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  getPresenceHistory(params = {}) {\r\n    return api().get('/api/presence/history', {\r\n      params,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  disconnectPresence(connectionId) {\r\n    return api().post('/api/presence/disconnect', {\r\n      connectionId\r\n    }, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  uploadProfileImage(userId, file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('userId', userId);\r\n    \r\n    return api().post(`${controllerPath}/uploadProfileImage`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n  },\r\n\r\n  // \r\n  deleteProfileImage(userId) {\r\n    return api().delete(`${controllerPath}/deleteProfileImage/${userId}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n};\r\n\r\n","// src/service/PresenceService.js\r\nimport * as signalR from \"@microsoft/signalr\";\r\nimport VueCookies from 'vue-cookies';\r\n\r\nconst SIGNALR_URL = (process.env.VUE_APP_SIGNALR_URL || \"\")\r\n  .replace(/\\/+$/, \"\") + \"/hubs/presence\";\r\n\r\nlet connection = null;\r\nlet heartbeatInterval = null;\r\n\r\nexport async function initPresenceHub() {\r\n  if (!process.env.VUE_APP_SIGNALR_URL) {\r\n    console.error(\" .env.development  .env.production  VUE_APP_SIGNALR_URL\");\r\n    return;\r\n  }\r\n\r\n  connection = new signalR.HubConnectionBuilder()\r\n    .withUrl(SIGNALR_URL)\r\n    .withAutomaticReconnect()\r\n    .build();\r\n\r\n  // \r\n  connection.onreconnected(async () => {\r\n    console.log(\"PresenceHub \");\r\n    await registerCurrentUser();\r\n  });\r\n\r\n  try {\r\n    await connection.start();\r\n    console.log(\"PresenceHub :\", SIGNALR_URL);\r\n    \r\n    // \r\n    await registerCurrentUser();\r\n    \r\n    // \r\n    startHeartbeat();\r\n  } catch (err) {\r\n    console.error(\"PresenceHub :\", err);\r\n  }\r\n}\r\n\r\n//  PresenceHub\r\nasync function registerCurrentUser() {\r\n  try {\r\n    if (!connection || connection.state !== signalR.HubConnectionState.Connected) {\r\n      console.warn(\"PresenceHub \");\r\n      return;\r\n    }\r\n\r\n    //  cookies \r\n    const userId = VueCookies.get('userId') || '';\r\n    const userName = VueCookies.get('userName') || '';\r\n    const departmentId = VueCookies.get('departmentId') || '';\r\n    const departmentName = VueCookies.get('departmentName') || '';\r\n    const titleId = VueCookies.get('titleId') || '';\r\n    const titleName = VueCookies.get('titleName') || '';\r\n    const email = VueCookies.get('email') || '';\r\n    \r\n    //  localStorage \r\n    const authData = localStorage.getItem('auth');\r\n    let roles = [];\r\n    let permissions = [];\r\n    \r\n    if (authData) {\r\n      try {\r\n        const parsedAuth = JSON.parse(authData);\r\n        roles = parsedAuth.user?.roles || [];\r\n        permissions = parsedAuth.user?.permissions || [];\r\n      } catch (e) {\r\n        console.warn(' auth :', e);\r\n      }\r\n    }\r\n\r\n    if (userId) {\r\n      await connection.invoke(\"RegisterUserInfo\", \r\n        userId, userName, departmentId, departmentName,\r\n        titleId, titleName, email, roles, permissions\r\n      );\r\n      // console.log(\"PresenceHub :\", { userId, userName, departmentName, titleName });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"PresenceHub :\", error);\r\n  }\r\n}\r\n\r\n// \r\nfunction startHeartbeat() {\r\n  // \r\n  if (heartbeatInterval) {\r\n    clearInterval(heartbeatInterval);\r\n  }\r\n\r\n  //  30 \r\n  heartbeatInterval = setInterval(() => {\r\n    if (connection && connection.state === signalR.HubConnectionState.Connected) {\r\n      connection.invoke(\"Heartbeat\").catch((error) => {\r\n        console.error(\":\", error);\r\n      });\r\n    }\r\n  }, 30000);\r\n}\r\n\r\n// \r\nfunction stopHeartbeat() {\r\n  if (heartbeatInterval) {\r\n    clearInterval(heartbeatInterval);\r\n    heartbeatInterval = null;\r\n  }\r\n}\r\n\r\n// \r\nexport async function disconnectPresence() {\r\n  try {\r\n    stopHeartbeat();\r\n    \r\n    if (connection && connection.connectionId) {\r\n      // \r\n      await fetch(\"/api/presence/disconnect\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ connectionId: connection.connectionId })\r\n      });\r\n    }\r\n    \r\n    if (connection) {\r\n      await connection.stop();\r\n    }\r\n  } catch (error) {\r\n    console.error(\":\", error);\r\n  }\r\n}\r\n\r\n//  PresenceHub\r\nexport async function stopPresenceHub() {\r\n  await disconnectPresence();\r\n  connection = null;\r\n}\r\n\r\n// \r\nexport async function reregisterUser() {\r\n  if (connection && connection.state === signalR.HubConnectionState.Connected) {\r\n    await registerCurrentUser();\r\n  } else {\r\n    console.warn(\"PresenceHub \");\r\n  }\r\n}\r\n\r\n// \r\nwindow.addEventListener(\"beforeunload\", () => {\r\n  if (connection && connection.connectionId) {\r\n    const payload = JSON.stringify({ connectionId: connection.connectionId });\r\n    //  sendBeacon \r\n    navigator.sendBeacon(\"/api/presence/disconnect\", new Blob([payload], {\r\n      type: 'application/json'\r\n    }));\r\n  }\r\n});\r\n\r\n//  visibilitychange \r\ndocument.addEventListener(\"visibilitychange\", () => {\r\n  if (document.visibilityState === 'hidden' && connection && connection.connectionId) {\r\n    const payload = JSON.stringify({ connectionId: connection.connectionId });\r\n    navigator.sendBeacon(\"/api/presence/disconnect\", new Blob([payload], {\r\n      type: 'application/json'\r\n    }));\r\n  }\r\n});\r\n\r\n//  pagehide \r\nwindow.addEventListener(\"pagehide\", () => {\r\n  if (connection && connection.connectionId) {\r\n    const payload = JSON.stringify({ connectionId: connection.connectionId });\r\n    navigator.sendBeacon(\"/api/presence/disconnect\", new Blob([payload], {\r\n      type: 'application/json'\r\n    }));\r\n  }\r\n});","import { defineStore } from 'pinia';\r\nimport VueCookies from 'vue-cookies';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport EIPService from '../service/EIPService';\r\nimport { registerUser } from '../onlineHubService';\r\nimport { reregisterUser } from '../service/PresenceService';\r\n\r\nexport const useAuthStore = defineStore('auth', {\r\n  state: () => ({\r\n    token: null,\r\n    user: {\r\n      userId: null,\r\n      userName: null,\r\n      departmentId: null,\r\n      departmentName: null,\r\n      departmentIds: [],\r\n      departmentNames: [],\r\n      titleId: null,\r\n      titleName: null,\r\n      dpt_title_Id: null,\r\n      email: null,\r\n      roles: [],\r\n      permissions: [],\r\n      areaInfo: {},\r\n      managers: [],\r\n      subDepartments: []\r\n    },\r\n    isLogin: false,\r\n  }),\r\n  actions: {\r\n    setToken(token) {\r\n      this.token = token;\r\n      localStorage.setItem('token', token);\r\n    },\r\n    setUser(userData) {\r\n      this.user = userData;\r\n    },\r\n    decode(token) {\r\n      const decodedToken = jwtDecode(token);\r\n      // const expireTime = '7d';\r\n      const expireTime =null;\r\n\r\n      const managers = decodedToken.managers ? JSON.parse(decodedToken.managers) : [];\r\n      const subDepartments = decodedToken.subDepartments ? JSON.parse(decodedToken.subDepartments) : [];\r\n      const departmentIds = decodedToken.arr_departmentIds ? JSON.parse(decodedToken.arr_departmentIds) : [];\r\n      const departmentNames = decodedToken.arr_departmentNames ? JSON.parse(decodedToken.arr_departmentNames) : [];\r\n\r\n      VueCookies.set('userId', decodedToken.sub, expireTime, '/');\r\n      VueCookies.set('userName', decodedToken.userName, expireTime, '/');\r\n      VueCookies.set('departmentId', decodedToken.departmentId, expireTime, '/');\r\n      VueCookies.set('departmentName', decodedToken.departmentName, expireTime, '/');\r\n      VueCookies.set('departmentIds', JSON.stringify(departmentIds), expireTime, '/');\r\n      VueCookies.set('departmentNames', JSON.stringify(departmentNames), expireTime, '/');\r\n      VueCookies.set('titleId', decodedToken.titleId, expireTime, '/');\r\n      VueCookies.set('titleName', decodedToken.titleName, expireTime, '/');\r\n      VueCookies.set('dpt_title_Id', decodedToken.dpt_title_Id, expireTime, '/');\r\n      VueCookies.set('email', decodedToken.email, expireTime, '/');\r\n      VueCookies.set('roles', JSON.stringify(decodedToken.roles || []), expireTime, '/');\r\n      VueCookies.set('permissions', JSON.stringify(decodedToken.permissions || []), expireTime, '/');\r\n      VueCookies.set('areaInfo', JSON.stringify(decodedToken.areaInfo ? JSON.parse(decodedToken.areaInfo) : {}), expireTime, '/');\r\n      VueCookies.set('managers', JSON.stringify(managers), expireTime, '/');\r\n      VueCookies.set('subDepartments', JSON.stringify(subDepartments), expireTime, '/');\r\n\r\n      this.setUser({\r\n        userId: decodedToken.sub,\r\n        userName: decodedToken.userName,\r\n        departmentId: decodedToken.departmentId,\r\n        departmentName: decodedToken.departmentName,\r\n        departmentIds,\r\n        departmentNames,\r\n        titleId: decodedToken.titleId,\r\n        titleName: decodedToken.titleName,\r\n        dpt_title_Id: decodedToken.dpt_title_Id,\r\n        email: decodedToken.email,\r\n        roles: decodedToken.roles || [],\r\n        permissions: decodedToken.permissions || [],\r\n        areaInfo: decodedToken.areaInfo ? JSON.parse(decodedToken.areaInfo) : {},\r\n        managers,\r\n        subDepartments\r\n      });\r\n      this.isLogin = true;\r\n      // console.log('user:', this.user);\r\n      return decodedToken;\r\n    },\r\n    async login_EIP(userCredentials) {\r\n      const response = await EIPService.login_EIP(userCredentials);\r\n      if (response.data && response.data.token) {\r\n        this.setToken(response.data.token);\r\n        this.decode(response.data.token);\r\n        \r\n        //  SignalR Hub\r\n        setTimeout(async () => {\r\n          try {\r\n            await registerUser(); //  OnlineHub\r\n            await reregisterUser(); //  PresenceHub\r\n          } catch (error) {\r\n            console.error(' SignalR :', error);\r\n          }\r\n        }, 1000);\r\n      }\r\n      return response;\r\n    },\r\n    async autoLogin() {\r\n      const userId = VueCookies.get('userId');\r\n      if (!userId) return;\r\n      const response = await EIPService.autoLogin(userId);\r\n      if (response.data && response.data.token) {\r\n        this.setToken(response.data.token);\r\n        this.decode(response.data.token);\r\n        this.isLogin = true;\r\n        \r\n        //  SignalR Hub\r\n        setTimeout(async () => {\r\n          try {\r\n            await registerUser(); //  OnlineHub\r\n            await reregisterUser(); //  PresenceHub\r\n          } catch (error) {\r\n            console.error(' SignalR :', error);\r\n          }\r\n        }, 1000);\r\n      }\r\n    }\r\n  },\r\n  persist: {\r\n    enabled: true,\r\n    strategies: [\r\n      {\r\n        key: 'auth',\r\n        storage: localStorage,\r\n      },\r\n    ],\r\n  },\r\n});\r\n","// stores/user.js\r\nimport { defineStore } from 'pinia';\r\nimport VueCookies from 'vue-cookies';\r\n\r\nexport const useUserStore = defineStore('user', {\r\n  state: () => ({\r\n    userId: VueCookies.get('userId') || \"\",\r\n    userName: VueCookies.get('userName') || \"\",\r\n    userDeptId: VueCookies.get('departmentId') || \"\",\r\n    userDeptName: VueCookies.get('departmentName') || \"\",\r\n    dpt_title_Id: VueCookies.get('dpt_title_Id') || \"\",\r\n  }),\r\n  actions: {\r\n    setUserInfo(userName, userDeptId,userDeptName,userId,dpt_title_Id) {\r\n      this.userName = userName;\r\n      this.userDeptId = userDeptId;\r\n      this.userDeptName = userDeptName;\r\n      this.userId = userId;\r\n      this.dpt_title_Id = dpt_title_Id;\r\n    },\r\n    clearUserInfo() {\r\n      this.userName = \"\";\r\n      this.userDeptId = \"\"; \r\n      this.userDeptName = \"\";\r\n      this.userId = \"\";\r\n      this.dpt_title_Id=\"\";\r\n      VueCookies.remove('userId');\r\n      VueCookies.remove('userName');\r\n      VueCookies.remove('departmentId');\r\n      VueCookies.remove('departmentName');\r\n      VueCookies.remove('titleId');\r\n      VueCookies.remove('titleName');\r\n      VueCookies.remove('dpt_title_Id');\r\n      VueCookies.remove('email');\r\n\r\n    }, \r\n    checkCookies() {\r\n      // console.log(\"checkCookies:\");\r\n      // console.log(\"userName:\"+ this.userName);\r\n      // console.log(\"userDept:\"+this.userDept);\r\n      // console.log(\"userId:\"+this.userId);\r\n      // console.log(\"userTitle:\"+this.dpt_title_Id);\r\n      \r\n\r\n      if (!VueCookies.get('userId')) {\r\n        this.clearUserInfo();\r\n        return false;\r\n      }else{\r\n        return true;\r\n      }\r\n    }\r\n  },\r\n  persist: true\r\n});\r\n","<template>\r\n  <div class=\"form-fill-page\">\r\n    <!--  -->\r\n    <div v-if=\"loading\" class=\"loading-container\">\r\n      <el-skeleton :rows=\"8\" animated />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else-if=\"!formTemplate || isExpired\" class=\"error-container\">\r\n      <el-result\r\n        icon=\"warning\"\r\n        :title=\"!formTemplate ? '' : ''\"\r\n        :sub-title=\"!formTemplate ? '' : ''\"\r\n      >\r\n        <template #extra>\r\n          <el-button type=\"primary\" @click=\"$router.go(-1)\"></el-button>\r\n        </template>\r\n      </el-result>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else class=\"form-container\">\r\n      <!--  -->\r\n      <div class=\"form-header\">\r\n        <h1 class=\"form-title\">{{ formTemplate.title }}</h1>\r\n        <p v-if=\"formTemplate.description\" class=\"form-description\">\r\n          {{ formTemplate.description }}\r\n        </p>\r\n        \r\n        <!--  -->\r\n        <div class=\"form-info\">\r\n          <el-tag v-if=\"formTemplate.category\" type=\"info\" size=\"small\">\r\n            {{ getCategoryLabel(formTemplate.category) }}\r\n          </el-tag>\r\n          <span v-if=\"formTemplate.settings?.endDate\" class=\"deadline\">\r\n            : {{ formatDate(formTemplate.settings.endDate) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div v-if=\"formTemplate.settings?.showProgressBar\" class=\"progress-bar\">\r\n        <el-progress \r\n          :percentage=\"progressPercentage\" \r\n          :show-text=\"false\"\r\n          :stroke-width=\"6\"\r\n        />\r\n        <span class=\"progress-text\">{{ currentStep }}/{{ totalSteps }}</span>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <el-form\r\n        ref=\"formRef\"\r\n        :model=\"formData\"\r\n        :rules=\"formRules\"\r\n        label-position=\"top\"\r\n        class=\"dynamic-form\"\r\n        @submit.prevent=\"handleSubmit\"\r\n      >\r\n        <div class=\"form-fields\">\r\n          <div\r\n            v-for=\"field in visibleFields\"\r\n            :key=\"field.id\"\r\n            class=\"form-field\"\r\n            :class=\"{ 'field-error': fieldErrors[field.id] }\"\r\n            :style=\"{ width: field.width }\"\r\n          >\r\n            <!--  -->\r\n            <div class=\"field-label-wrapper\">\r\n              <label class=\"field-label\">\r\n                {{ field.label }}\r\n                <span v-if=\"field.required\" class=\"required-mark\">*</span>\r\n              </label>\r\n              <span v-if=\"field.helpText\" class=\"help-text\">\r\n                <el-tooltip :content=\"field.helpText\" placement=\"top\">\r\n                  <i class=\"pi pi-question-circle\"></i>\r\n                </el-tooltip>\r\n              </span>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <el-form-item :prop=\"`responses.${field.id}`\" class=\"field-item\">\r\n              <!--  -->\r\n              <el-input\r\n                v-if=\"field.type === 'text'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                :placeholder=\"field.placeholder\"\r\n                :maxlength=\"field.validation?.maxLength\"\r\n                show-word-limit\r\n                @blur=\"validateField(field)\"\r\n              />\r\n\r\n              <!--  -->\r\n              <el-input\r\n                v-else-if=\"field.type === 'textarea'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                type=\"textarea\"\r\n                :placeholder=\"field.placeholder\"\r\n                :rows=\"4\"\r\n                :maxlength=\"field.validation?.maxLength\"\r\n                show-word-limit\r\n                @blur=\"validateField(field)\"\r\n              />\r\n\r\n              <!--  -->\r\n              <el-select\r\n                v-else-if=\"field.type === 'select'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                :placeholder=\"field.placeholder || ''\"\r\n                style=\"width: 100%\"\r\n                @change=\"handleFieldChange(field)\"\r\n              >\r\n                <el-option\r\n                  v-for=\"option in field.options\"\r\n                  :key=\"option.value\"\r\n                  :label=\"option.label\"\r\n                  :value=\"option.value\"\r\n                />\r\n              </el-select>\r\n\r\n              <!--  -->\r\n              <el-radio-group\r\n                v-else-if=\"field.type === 'radio'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                @change=\"handleFieldChange(field)\"\r\n              >\r\n                <el-radio\r\n                  v-for=\"option in field.options\"\r\n                  :key=\"option.value\"\r\n                  :label=\"option.value\"\r\n                  class=\"radio-option\"\r\n                >\r\n                  {{ option.label }}\r\n                </el-radio>\r\n              </el-radio-group>\r\n\r\n              <!--  -->\r\n              <el-checkbox-group\r\n                v-else-if=\"field.type === 'checkbox'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                @change=\"handleFieldChange(field)\"\r\n              >\r\n                <el-checkbox\r\n                  v-for=\"option in field.options\"\r\n                  :key=\"option.value\"\r\n                  :label=\"option.value\"\r\n                  class=\"checkbox-option\"\r\n                >\r\n                  {{ option.label }}\r\n                </el-checkbox>\r\n              </el-checkbox-group>\r\n\r\n              <!--  -->\r\n              <el-date-picker\r\n                v-else-if=\"field.type === 'date'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                type=\"date\"\r\n                :placeholder=\"field.placeholder || ''\"\r\n                style=\"width: 100%\"\r\n                format=\"YYYY-MM-DD\"\r\n                value-format=\"YYYY-MM-DD\"\r\n                @change=\"handleFieldChange(field)\"\r\n              />\r\n\r\n              <!--  -->\r\n              <el-input-number\r\n                v-else-if=\"field.type === 'number'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                :placeholder=\"field.placeholder\"\r\n                :min=\"field.validation?.min\"\r\n                :max=\"field.validation?.max\"\r\n                style=\"width: 100%\"\r\n                @change=\"handleFieldChange(field)\"\r\n              />\r\n\r\n              <!--  -->\r\n              <el-input\r\n                v-else-if=\"field.type === 'email'\"\r\n                v-model=\"formData.responses[field.id]\"\r\n                :placeholder=\"field.placeholder || ''\"\r\n                @blur=\"validateField(field)\"\r\n              />\r\n\r\n              <!--  -->\r\n              <el-upload\r\n                v-else-if=\"field.type === 'file'\"\r\n                ref=\"uploadRef\"\r\n                :action=\"uploadUrl\"\r\n                :headers=\"uploadHeaders\"\r\n                :data=\"{ fieldId: field.id }\"\r\n                :on-success=\"(response) => handleFileSuccess(response, field)\"\r\n                :on-error=\"handleFileError\"\r\n                :before-upload=\"beforeFileUpload\"\r\n                :file-list=\"getFileList(field.id)\"\r\n                multiple\r\n                class=\"file-upload\"\r\n              >\r\n                <el-button type=\"primary\" :icon=\"Upload\">\r\n                  \r\n                </el-button>\r\n                <template #tip>\r\n                  <div class=\"upload-tip\">\r\n                     10MB\r\n                  </div>\r\n                </template>\r\n              </el-upload>\r\n\r\n              <!--  -->\r\n              <div v-if=\"fieldErrors[field.id]\" class=\"field-error-message\">\r\n                {{ fieldErrors[field.id] }}\r\n              </div>\r\n            </el-form-item>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"form-actions\">\r\n          <el-button @click=\"handleCancel\" size=\"large\">\r\n            \r\n          </el-button>\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"handleSubmit\"\r\n            :loading=\"submitting\"\r\n            size=\"large\"\r\n          >\r\n            {{ formTemplate.settings?.submitButtonText || '' }}\r\n          </el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"showSuccessDialog\"\r\n      title=\"\"\r\n      width=\"400px\"\r\n      :close-on-click-modal=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"success-content\">\r\n        <el-result\r\n          icon=\"success\"\r\n          :title=\"formTemplate?.settings?.successMessage || ''\"\r\n        />\r\n      </div>\r\n      <template #footer>\r\n        <el-button type=\"primary\" @click=\"handleSuccessConfirm\">\r\n          \r\n        </el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Upload } from '@element-plus/icons-vue'\r\nimport DynamicFormService from '@/service/DynamicFormService'\r\nimport { useAuthStore } from '@/stores/auth'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  templateId: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\n// Composables\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\n\r\n// \r\nconst loading = ref(true)\r\nconst submitting = ref(false)\r\nconst showSuccessDialog = ref(false)\r\nconst formTemplate = ref(null)\r\nconst formRef = ref(null)\r\nconst uploadRef = ref(null)\r\n\r\n// \r\nconst formData = reactive({\r\n  formTemplateId: '',\r\n  submittedBy: '',\r\n  responses: {},\r\n  attachments: []\r\n})\r\n\r\n// \r\nconst fieldErrors = ref({})\r\nconst formRules = ref({})\r\n\r\n// \r\nconst isExpired = computed(() => {\r\n  if (!formTemplate.value?.settings?.endDate) return false\r\n  return new Date() > new Date(formTemplate.value.settings.endDate)\r\n})\r\n\r\nconst visibleFields = computed(() => {\r\n  if (!formTemplate.value?.fields) return []\r\n  \r\n  return formTemplate.value.fields\r\n    .filter(field => isFieldVisible(field))\r\n    .sort((a, b) => (a.order || 0) - (b.order || 0))\r\n})\r\n\r\nconst totalSteps = computed(() => visibleFields.value.length)\r\nconst currentStep = computed(() => {\r\n  return Object.keys(formData.responses).filter(key => \r\n    formData.responses[key] !== null && \r\n    formData.responses[key] !== undefined && \r\n    formData.responses[key] !== ''\r\n  ).length\r\n})\r\n\r\nconst progressPercentage = computed(() => {\r\n  if (totalSteps.value === 0) return 0\r\n  return Math.round((currentStep.value / totalSteps.value) * 100)\r\n})\r\n\r\nconst uploadUrl = computed(() => {\r\n  return `${import.meta.env.VITE_API_BASE_URL}/api/FormResponse/upload`\r\n})\r\n\r\nconst uploadHeaders = computed(() => {\r\n  return {\r\n    'Authorization': `Bearer ${authStore.token}`\r\n  }\r\n})\r\n\r\n// \r\nconst loadFormTemplate = async () => {\r\n  try {\r\n    loading.value = true\r\n    \r\n    //  templateData prop\r\n    if (props.templateData) {\r\n      formTemplate.value = props.templateData\r\n    } else {\r\n      //  API \r\n      const templateId = props.templateId || route.params.id\r\n      const response = await DynamicFormService.getFormTemplate(templateId)\r\n      formTemplate.value = response.data\r\n    }\r\n    \r\n    // \r\n    initializeFormData()\r\n    \r\n    // \r\n    buildValidationRules()\r\n    \r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst initializeFormData = () => {\r\n  formData.formTemplateId = formTemplate.value.id\r\n  formData.submittedBy = authStore.user?.id || ''\r\n  \r\n  // \r\n  formTemplate.value.fields.forEach(field => {\r\n    if (field.defaultValue !== undefined) {\r\n      formData.responses[field.id] = field.defaultValue\r\n    } else {\r\n      // \r\n      switch (field.type) {\r\n        case 'checkbox':\r\n          formData.responses[field.id] = []\r\n          break\r\n        case 'number':\r\n          formData.responses[field.id] = null\r\n          break\r\n        default:\r\n          formData.responses[field.id] = ''\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst buildValidationRules = () => {\r\n  const rules = {}\r\n  \r\n  formTemplate.value.fields.forEach(field => {\r\n    const fieldRules = []\r\n    \r\n    // \r\n    if (field.required) {\r\n      fieldRules.push({\r\n        required: true,\r\n        message: `${field.label}`,\r\n        trigger: ['blur', 'change']\r\n      })\r\n    }\r\n    \r\n    // \r\n    if (field.validation?.minLength || field.validation?.maxLength) {\r\n      fieldRules.push({\r\n        min: field.validation.minLength || 0,\r\n        max: field.validation.maxLength || Infinity,\r\n        message: `${field.label} ${field.validation.minLength || 0}  ${field.validation.maxLength || ''} `,\r\n        trigger: 'blur'\r\n      })\r\n    }\r\n    \r\n    // \r\n    if (field.type === 'number' && (field.validation?.min !== undefined || field.validation?.max !== undefined)) {\r\n      fieldRules.push({\r\n        type: 'number',\r\n        min: field.validation.min,\r\n        max: field.validation.max,\r\n        message: `${field.label} ${field.validation.min || ''}  ${field.validation.max || ''} `,\r\n        trigger: 'change'\r\n      })\r\n    }\r\n    \r\n    // \r\n    if (field.type === 'email') {\r\n      fieldRules.push({\r\n        type: 'email',\r\n        message: '',\r\n        trigger: 'blur'\r\n      })\r\n    }\r\n    \r\n    // \r\n    if (field.validation?.pattern) {\r\n      fieldRules.push({\r\n        pattern: new RegExp(field.validation.pattern),\r\n        message: field.validation.customMessage || `${field.label}`,\r\n        trigger: 'blur'\r\n      })\r\n    }\r\n    \r\n    if (fieldRules.length > 0) {\r\n      rules[`responses.${field.id}`] = fieldRules\r\n    }\r\n  })\r\n  \r\n  formRules.value = rules\r\n}\r\n\r\nconst isFieldVisible = (field) => {\r\n  if (!field.conditional) return true\r\n  \r\n  const dependsOnField = formTemplate.value.fields.find(f => f.id === field.conditional.dependsOn)\r\n  if (!dependsOnField) return true\r\n  \r\n  const dependsOnValue = formData.responses[field.conditional.dependsOn]\r\n  const conditionValue = field.conditional.value\r\n  \r\n  switch (field.conditional.condition) {\r\n    case 'equals':\r\n      return dependsOnValue === conditionValue\r\n    case 'not_equals':\r\n      return dependsOnValue !== conditionValue\r\n    case 'contains':\r\n      return String(dependsOnValue).includes(conditionValue)\r\n    case 'not_empty':\r\n      return dependsOnValue !== null && dependsOnValue !== undefined && dependsOnValue !== ''\r\n    case 'empty':\r\n      return dependsOnValue === null || dependsOnValue === undefined || dependsOnValue === ''\r\n    default:\r\n      return true\r\n  }\r\n}\r\n\r\nconst validateField = (field) => {\r\n  const value = formData.responses[field.id]\r\n  let error = null\r\n  \r\n  // \r\n  if (field.required && (!value || (Array.isArray(value) && value.length === 0))) {\r\n    error = `${field.label}`\r\n  }\r\n  \r\n  // \r\n  if (value && field.validation?.minLength && String(value).length < field.validation.minLength) {\r\n    error = `${field.label} ${field.validation.minLength} `\r\n  }\r\n  \r\n  if (value && field.validation?.maxLength && String(value).length > field.validation.maxLength) {\r\n    error = `${field.label} ${field.validation.maxLength} `\r\n  }\r\n  \r\n  // \r\n  if (field.type === 'number' && value !== null && value !== undefined) {\r\n    if (field.validation?.min !== undefined && value < field.validation.min) {\r\n      error = `${field.label} ${field.validation.min}`\r\n    }\r\n    if (field.validation?.max !== undefined && value > field.validation.max) {\r\n      error = `${field.label} ${field.validation.max}`\r\n    }\r\n  }\r\n  \r\n  // \r\n  if (field.type === 'email' && value) {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n    if (!emailRegex.test(value)) {\r\n      error = ''\r\n    }\r\n  }\r\n  \r\n  // \r\n  if (field.validation?.pattern && value) {\r\n    const regex = new RegExp(field.validation.pattern)\r\n    if (!regex.test(value)) {\r\n      error = field.validation.customMessage || `${field.label}`\r\n    }\r\n  }\r\n  \r\n  if (error) {\r\n    fieldErrors.value[field.id] = error\r\n  } else {\r\n    delete fieldErrors.value[field.id]\r\n  }\r\n  \r\n  return !error\r\n}\r\n\r\nconst handleFieldChange = (field) => {\r\n  // \r\n  delete fieldErrors.value[field.id]\r\n  \r\n  // \r\n  //  visibleFields \r\n}\r\n\r\nconst getFileList = (fieldId) => {\r\n  return formData.attachments\r\n    .filter(attachment => attachment.fieldId === fieldId)\r\n    .map(attachment => ({\r\n      name: attachment.originalName,\r\n      url: attachment.filePath\r\n    }))\r\n}\r\n\r\nconst beforeFileUpload = (file) => {\r\n  const isValidSize = file.size / 1024 / 1024 < 10 // 10MB\r\n  if (!isValidSize) {\r\n    ElMessage.error(' 10MB')\r\n  }\r\n  return isValidSize\r\n}\r\n\r\nconst handleFileSuccess = (response, field) => {\r\n  if (response.success) {\r\n    formData.attachments.push({\r\n      fieldId: field.id,\r\n      fileName: response.data.fileName,\r\n      originalName: response.data.originalName,\r\n      filePath: response.data.filePath,\r\n      fileSize: response.data.fileSize,\r\n      mimeType: response.data.mimeType\r\n    })\r\n    ElMessage.success('')\r\n  } else {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst handleFileError = (error) => {\r\n  console.error(':', error)\r\n  ElMessage.error('')\r\n}\r\n\r\nconst handleSubmit = async () => {\r\n  try {\r\n    // \r\n    let hasErrors = false\r\n    visibleFields.value.forEach(field => {\r\n      if (!validateField(field)) {\r\n        hasErrors = true\r\n      }\r\n    })\r\n    \r\n    if (hasErrors) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    if (!formTemplate.value.settings?.allowMultipleSubmissions) {\r\n      // \r\n    }\r\n    \r\n    submitting.value = true\r\n    \r\n    // \r\n    const submitData = {\r\n      formTemplateId: formData.formTemplateId,\r\n      submittedBy: formData.submittedBy,\r\n      responses: formData.responses,\r\n      attachments: formData.attachments,\r\n      metadata: {\r\n        userAgent: navigator.userAgent,\r\n        timestamp: new Date().toISOString()\r\n      }\r\n    }\r\n    \r\n    await DynamicFormService.submitFormResponse(submitData)\r\n    \r\n    showSuccessDialog.value = true\r\n    \r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n\r\nconst handleCancel = async () => {\r\n  if (Object.keys(formData.responses).some(key => formData.responses[key])) {\r\n    try {\r\n      await ElMessageBox.confirm(\r\n        '',\r\n        '',\r\n        {\r\n          confirmButtonText: '',\r\n          cancelButtonText: '',\r\n          type: 'warning'\r\n        }\r\n      )\r\n      router.go(-1)\r\n    } catch {\r\n      // \r\n    }\r\n  } else {\r\n    router.go(-1)\r\n  }\r\n}\r\n\r\nconst handleSuccessConfirm = () => {\r\n  showSuccessDialog.value = false\r\n  \r\n  if (formTemplate.value.settings?.redirectUrl) {\r\n    window.location.href = formTemplate.value.settings.redirectUrl\r\n  } else {\r\n    router.push('/')\r\n  }\r\n}\r\n\r\nconst getCategoryLabel = (category) => {\r\n  const categoryMap = {\r\n    hr: '',\r\n    finance: '',\r\n    purchase: '',\r\n    other: ''\r\n  }\r\n  return categoryMap[category] || category\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleString('zh-TW')\r\n}\r\n\r\n// \r\nonMounted(() => {\r\n  loadFormTemplate()\r\n})\r\n\r\n// \r\nwatch(() => route.params.id, (newId) => {\r\n  if (newId) {\r\n    loadFormTemplate()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-fill-page {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background: #fff;\r\n  min-height: 100vh;\r\n}\r\n\r\n.loading-container {\r\n  padding: 40px;\r\n}\r\n\r\n.error-container {\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n\r\n.form-header {\r\n  margin-bottom: 30px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.form-title {\r\n  font-size: 28px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n  margin: 0 0 10px 0;\r\n}\r\n\r\n.form-description {\r\n  font-size: 16px;\r\n  color: #606266;\r\n  line-height: 1.6;\r\n  margin: 0 0 15px 0;\r\n}\r\n\r\n.form-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.deadline {\r\n  font-size: 14px;\r\n  color: #e6a23c;\r\n}\r\n\r\n.progress-bar {\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.progress-text {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  white-space: nowrap;\r\n}\r\n\r\n.dynamic-form {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.form-fields {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n}\r\n\r\n.form-field {\r\n  min-width: 300px;\r\n  flex: 1;\r\n}\r\n\r\n.field-label-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.field-label {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #303133;\r\n}\r\n\r\n.required-mark {\r\n  color: #f56c6c;\r\n}\r\n\r\n.help-text {\r\n  color: #909399;\r\n  cursor: help;\r\n}\r\n\r\n.field-item {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.radio-option,\r\n.checkbox-option {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.file-upload {\r\n  width: 100%;\r\n}\r\n\r\n.upload-tip {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 5px;\r\n}\r\n\r\n.field-error {\r\n  border-left: 3px solid #f56c6c;\r\n  padding-left: 15px;\r\n}\r\n\r\n.field-error-message {\r\n  color: #f56c6c;\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  padding-top: 30px;\r\n  border-top: 1px solid #ebeef5;\r\n}\r\n\r\n.success-content {\r\n  text-align: center;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .form-fill-page {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .form-title {\r\n    font-size: 24px;\r\n  }\r\n  \r\n  .form-fields {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .form-field {\r\n    width: 100%;\r\n    min-width: unset;\r\n  }\r\n  \r\n  .form-actions {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .progress-bar {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./FormFillPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormFillPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormFillPage.vue?vue&type=style&index=0&id=65f1f46c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-65f1f46c\"]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"my-vue3-project:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_vue3_project\"] = self[\"webpackChunkmy_vue3_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(83662); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["useThemeStore","defineStore","currentTheme","ref","savedTheme","localStorage","getItem","includes","value","prefersDark","window","matchMedia","matches","toggleTheme","setTheme","theme","applyTheme","root","document","documentElement","classList","add","remove","setAttribute","watch","newTheme","setItem","console","log","immediate","isDark","isLight","useVersionCheck","currentVersion","opts","interval","notified","timer","ctrl","async","check","force","visibilityState","abort","AbortController","res","fetch","cache","signal","ok","data","json","next","version","onFocus","onVisible","setInterval","addEventListener","clearInterval","removeEventListener","appVersion","process","stopVersionCheck","authStore","useAuthStore","themeStore","onMounted","userId","VueCookies","isLogin","autoLogin","error","onUnmounted","__exports__","createHomeMenuItems","label","icon","requiredRoles","items","command","router","push","name","params","sys","props","__props","emit","__emit","localVisible","computed","get","visible","set","val","userStore","useUserStore","password","userName","departmentId","departmentName","dpt_title_Id","login_failed","toast","useToast","refreshIntervalId","newUserId","getLoginCookie","cookieUserId","cookieUserName","cookieDeptId","cookieDeptName","cookieDptTitleId","setUserInfo","checkCookies","login_JWT","userCredentials","userPwd","loginMsg","EIPService","nextTick","userDeptName","severity","summary","detail","life","closeCallback","stopTokenRefresh","onBeforeUnmount","locale","useI18n","currentLocale","savedLocale","languageOptions","code","img","newLocale","loadGoogleMaps","key","google","maps","Promise","resolve","reject","script","createElement","src","onload","onerror","Error","head","appendChild","punchWithGeolocation","type","coords","payload","latitude","longitude","address","timestamp","Date","now","toISOString","timeZoneId","timeZoneName","dstOffset","rawOffset","ElMessage","success","err","message","GOOGLE_MAPS_API_KEY","loading","currentAction","currentTime","lastPunchInfo","updateTime","toLocaleTimeString","hour","minute","second","timeInterval","hasSysPermission","user","permissions","punchByGMA","googleMaps","geocoder","Geocoder","navigator","geolocation","getCurrentPosition","position","enableHighAccuracy","timeout","maximumAge","latlng","lat","lng","geocodeResponse","geocode","location","results","formatted_address","geocodeError","warn","timeString","toLocaleString","useRouter","isDarkMode","handleThemeChange","login_visible","popoverVisible","goLogin","editPersonalInformantion","goPersonAttendance","newVal","openLoginDialog","handleLogout","stopPresenceHub","stopOnlineHub","all","clearUserInfo","removeItem","handleLoginSuccess","itemRef","activeChildValue","hasChildren","item","length","isOpen","activeKey","currentKey","submenuPosition","openSubmenu","setSubmenuPosition","setTimeout","adjustSubmenuPosition","closeSubmenu","contains","activeElement","querySelector","rect","getBoundingClientRect","viewportWidth","innerWidth","viewportHeight","innerHeight","submenuWidth","Math","max","width","submenuHeight","min","headerElement","headerHeight","offsetHeight","scrollY","scrollTop","scrollX","scrollLeft","minTopPosition","level","left","top","bottom","right","zIndex","maxTop","submenuElements","querySelectorAll","submenuElement","submenuRect","needsUpdate","height","arrowIconComponent","ArrowDownBold","ArrowDown","ArrowRightBold","DArrowRight","onChildItemClick","childItem","handleItemClick","event","stopPropagation","target","currentTarget","newActiveKey","isMobile","menubar","scrollContainer","activeTopLevelValue","onItemClick","scrollBy","behavior","scrollRight","updateIsMobile","handleMouseMove","e","isInsideMenubar","isInsideTeleportMenu","closest","handleWheel","filterMenuByRoles","menuItems","userRoles","filter","some","r","map","copy","size","update","passive","onlineUsersDialogVisible","loadingOnlineUsers","onlineUsers","dialogWidth","showOnlineUsersDialog","fetchOnlineUsers","memoryResponse","dbResponse","getOnlineUsers","catch","users","getPresenceOnlineUsers","connections","allUsers","memoryUsers","ip","ipAddress","connectTime","connectedAt","titleName","email","roles","roleNames","onlineDuration","isRegistered","connectionId","source","dataType","dbUsers","conn","durationSeconds","floor","lastSeen","serverId","uniqueUsers","seenConnectionIds","Set","forEach","has","sort","a","b","onlineCountElement","getElementById","innerText","response","refreshOnlineUsers","formatTime","time","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","toString","HomePageItems","raw","goHome","onlineCount","handleRegisteredUsersUpdate","count","initOnlineHub","initPresenceHub","selectedURL","pageListOptions","selectedKey","PageListData","linkToURL","path","axiosInstance","setFinanceAxios","instance","api","controllerPath","getSalarySlips_Eid_Date","Eid","getLeaveRecord","getPersonalLeaveRecords","getPersonalOvertimeRecords","getMealAllowanceSummary","getMealAllowanceDetails","getAnnualLeaveSummary","getSalaryStructureWithEmpId","empId","postSalarySlip","loginUser","post","decryptAllSalarySlips","postSalaryStructures","encryptSalaryStructure","encryptSalarySlip","downloadInternalAttendanceMonthly","headers","responseType","downloadExternalAttendanceMonthly","downloadCompanySalaryMonthly","downloadEmployeeSalaryMonthly","checkHasSalaryData_Before_download","downloadInternalAttendanceMonthlyOP","downloadExternalAttendanceMonthlyOP","downloadCompanySalaryMonthlyOP","downloadEmployeeSalaryMonthlyOP","getAllAttendanceRecords","getAttendanceRecord","employId","getCompanyLaborRate","putCompanyLaborRate","put","getCustomerTrackingData","getTyphoonLeaveRecords","createTyphoonLeaveRecord","updateTyphoonLeaveRecord","id","deleteTyphoonLeaveRecord","delete","getCardCorrectionRecords","getOvertimePageInfo","getEmployeeOvertimeDetails","exportOvertimeData","getLeavePageInfo","getEmployeeLeaveDetails","setWorkflowAxios","workflowControllerPath","referenceDataControllerPath","getAllEnums","getEnum_NotificationTiming","getEnum_ApprovalStatus","getEnum_ApprovalAction","getEnum_StepTypeEnum","getApprovalSteps","docID","getApprovalRecord","SimulateProcess_CR","formData","getAllForms","getAllDocuments","getUserRelatedDocuments","getNewUserRelatedDocuments","getUserPendingDocuments","getUserApprovedDocuments","getUserVoidedDocuments","getInProgressDocuments","getCompletedDocuments","createForm","resubmitForm","resubmitWithAttachments","voidDocument","SaveAndApproval","submitApproval","submitRejection","resubmitDocument","resubmitDto","getFormById","formId","updateForm","deleteForm","ProcessDefinition","definition","getAllProcessDefinitions","getProcessDefinitionById","definitionId","updateProcessDefinition","definitionData","deleteProcessDefinition","addProcessStepDefinition","stepDefinition","getStepsByDefinition","getProcessStepDefinitionById","stepId","updateProcessStepDefinition","stepData","deleteProcessStepDefinition","startProcess","request","getPendingForms","approveForm","approveRequest","addSign","addSignRequest","reassignSign","reassignRequest","getFormProcess","getApprovalHistory","getTbl_users_profile","getDocumentPermissions","userID","getWorkflowForms","getDocumentTypes","getApprovalWorkflows","getApprovalSteps_ReferenceData","getParallelGroups","getCountersignGroups","getDocuments","getApprovalRecords","getStepInsertions","getNotificationLogs","getDocumentNotificationRecipients","getDocumentNotifications","getCountersignGroupMembers","getParallelGroupMembers","setReferenceDataAxios","getDAE_RelEIPUserRole_JOIN_WF_RolesData","getRelUserRole","getWF_RoleData","getAreaData","getEmployeeData","getEmployeeDataByEmpID","EmpID","getTitleData","getDepartmentData","getRoleData","getUserData","getPermissionData","getFormsData","getApprovalProcessAll","addUserWFRoleData","roleId","addEmployeeData","EmpData","addWF_RoleData","wfRoleData","addUser","userData","addPermission","permissionData","addRole","roleData","addTitleData","titleData","addDepartment","departmentData","addArea","areaData","updateUserRoleData","userRoleData","updateEmployeeData","empData","updateWF_RoleData","updateUser","updatePermission","updateRole","updateTitleData","updateDepartment","updateArea","deleteUserWFRoleData","deleteWF_RoleData","deleteEmployeeData","deleteUser","deletePermission","deleteRole","deleteTitleData","deleteDepartment","deleteArea","treeRef","internalValueArray","treeData","treeProps","children","disabled","groupBy","buildTree","eRes","dRes","tRes","ReferenceDataService","excludedIds","flatEmployees","emp_status","trim","flatDepartments","flatTitles","sortTree","nodes","sortId","n","pruneEmptyGroups","isGroup","lookup","d","roots","node","p_dpt_id","parent","dpt_id","returnType","groups","t","Object","values","arr","tree","keys","nameNode","descNode","description","emp","title_id","handleNodeClick","nodeComp","expanded","checked","setChecked","onCheckChange","checkedIds","getCheckedKeys","selectedEmps","filterNodes","toLowerCase","clearSelection","setCheckedKeys","modelValue","empArr","internalList","v","setFormAxios","deleteFormByDocID","docType","getDocDetail","getDocsByCR_Id","getDocTypes","deleteAllDocument","getDocumentFiles","getLeaveTypeRules","getUserLeaveRecords","useEmployeeStore","state","employees","actions","fetchEmployeeData","this","getEmployeeName","employee","find","getEmployeeArea","area_id","persist","employeeName","employeeStore","fetchEmployeeName","result","employeeId","useDeptStore","departments","fetchDepartmentData","getDepartmentName","dept","deptName","fetchDeptName","deptId","useTitleStore","titles","fetchTitleData","getTitleName","title","getTitleDescription","fetchTitleName","titleId","fetchTitleDescription","updateTitle","mode","approvalProcessData","currentStepID","stepTypeEnum","stepTypeMap","reduce","getDocWorkflowDetail","WorkflowService","dataArray","Array","isArray","sorted","aOrder","viewOrder","stepOrder","bOrder","getStepTypeDescription","stepType","Number","getCardBackgroundColor","step","hasVirtualNodeInFlow","isVirtualNode","stepID","getTitleColor","undefined","fetchWF_Enum","groupedSteps","grouped","processedSteps","hasVirtualNode","isSameStep","sameStepOrderAt","sameSteps","s","mergedStep","stepTypeDescription","userDeptID","userTitleID","userStepStatus","stepStatus","status","userStepTypeDescription","comment","action","singleStep","initiatorStep","roleID","virtualNode","workflowID","workflowName","documentID","documentTypeName","formatDate","dateString","docId","documentConfigs","CR","component","fields","prop","LR","OR","condition","LC","useAreaStore","areas","regions","fetchAreaData","getAreaName","area","getAreaRegion","region","getAreaDistrict","district","useRoleStore","fetchRoleData","getRoleName","role","areaStore","deptStore","titleStore","roleStore","areaName","fetchAreaName","areaId","applyFormRef","dptManagerId","dptManagerName","employeeData","employeeArea","employeeTitle","notificationTiming","correctionTime","useWindowSize","formStyle","maxWidth","margin","isDisabled","WF_canEdit","applyForm","applyDate","correctionDate","startHour","startMinute","employeeDpt","supervisor","reason","applierId","applierName","inserPersonList","notificationList","correctionType","rules","required","trigger","validator","rule","callback","selected","yesterday","setHours","setDate","getTime","test","formatLocalDate","y","m","startTime","formRef","validate","valid","fieldLabels","department","firstKey","firstErr","split","supervisorId","supervisorName","confirmContent","ElMessageBox","confirm","confirmButtonText","cancelButtonText","dangerouslyUseHTMLString","then","requestBodyToSubmit","FormData","append","JSON","stringify","insertIds","notification","NotificationTiming","NotifierIds","createFormResponse","FormService","resetFields","info","resetForm","querySearchEmployee","queryString","onEmployeeSelect","handleEmployeeSelect","getSupervisor","getEmployeeAreaAndTitle","emp_dept","managerId","manager_id","parentId","parentDept","parentManager","useIdToName","filtered","getResubmitData","hh","mm","formattedTime","WF_Form_Data","applyAt","__expose","editAgentEmployeeName","originalAgentEmployeeName","originalAgentEmployeeId","cameraInputRef","galleryInputRef","marginValue","leaveType","applicantDept","userDeptId","applicantName","leaveDateTimeRange","leaveHours","agentEmployeeId","agentEmployeeName","attachments","insertSignerList","isEditingLeaveHours","manualLeaveMinutes","actualLeaveMinutes","exemptLeaveTypes","isAttachmentRequired","validateAgent","defaultTime","leaveHoursInMinutes","startDateTime","endDateTime","totalEffectiveMinutes","workPeriods","start","end","currentDay","endDay","dayOfWeek","getDay","period","periodStart","periodEnd","effectiveStart","effectiveEnd","formattedLeaveHours","totalMinutes","leaveMinutes","enableLeaveHoursEdit","disableLeaveHoursEdit","round","submitLeaveForm","roundTo","applicantId","leaveStartDate","leaveEndDate","leaveStartTime","hour12","leaveEndTime","file","leaveTypeMap","insertSignerIds","person","dialogImageUrl","dialogVisible","handleFileChange","fileList","allowedTypes","isAllowedType","warning","newFileList","f","uid","validateField","handleFileRemove","handlePicturePreview","url","mime","ext","pop","isImage","startsWith","isPdf","base64","bytes","atob","len","Uint8Array","i","charCodeAt","blob","Blob","blobUrl","URL","createObjectURL","open","revokeObjectURL","handleHiddenFileInputChange","files","newFile","elFile","random","updatedFileList","userDept","applierDptId","isNaN","attachment","dataUri","fileName","formattedDate","isScanningQrCode","qrCodeScanner","activeName","leaveTypeInfo","SickLeave","regulation","salary","legal","PersonalLeave","MenstrualLeave","OfficialLeave","WorkInjuryLeave","FamilyCareLeave","MarriageLeave","MaternityLeave","PrenatalCheckupLeave","PaternityLeave","FuneralLeave","JobSeekingLeave","decimals","p","EPSILON","newLeaveType","showMobileUploadOptions","alert","showCancelButton","showClose","closeOnClickModal","click","center","startQrCodeScanner","qrCodeRegionId","Html5QrcodeScanner","fps","qrbox","render","decodedText","decodedResult","stopQrCodeScanner","errorMessage","clear","overtimeFormRef","forceRerenderKey","isWFMode","isActualOvertimeDisabled","canAmend","padding","actualStartTime","actualEndTime","createOvertimePersonnel","today","endTime","personnelId","personnelName","overtimeDateTimeRange","overtimeContent","mealAllowance","isEditingOvertimeHours","manualOvertimeMinutes","actualOvertimeDate","actualOvertimeDateTimeRange","actualOvertimeHours","actualOvertimeMinutes","actualOvertimeContent","actualMealAllowance","isEditingActualOvertimeHours","manualActualOvertimeMinutes","overtimeForm","isPreOvertime","overtimePersonnel","applicantTitleId","toDate","replace","pad2","toLocalISODate","toLocalYYYYMMDD_HHmm","toHHmm","isReadOnlyMode","personnelRules","acc","_","index","baseRules","actualOvertime","actualOvertimeTimeRange","calculateOvertimeMinutes","personnel","range","total","toDateString","lunchStart","lunchEnd","overlapMs","overlapMin","formattedOvertimeHours","calculateActualOvertimeMinutes","formattedActualOvertimeHours","formatDateTimeRange","dateTimeRange","startDate","endDate","formatDateTime","formatAmount","amount","numAmount","enableOvertimeHoursEdit","disableOvertimeHoursEdit","onOvertimeDateTimeRangeChange","onActualOvertimeDateTimeRangeChange","deep","newDate","newStartTime","newEndTime","addOvertimePersonnel","removeOvertimePersonnel","splice","enableActualOvertimeHoursEdit","disableActualOvertimeHoursEdit","copyExpectedToActualData","newActualRange","submitOvertimeForm","remark","parts","parseInt","fieldName","labelMap","overtimeDate","overtimeTimeRange","formattedRange","dt","overtimeHours","overtimeMinutes","actualOvertimeStartTime","actualOvertimeEndTime","SaveAndApprovalForm","isValid","approverID","applierDeptName","initializeFormDataForWFMode","documentId","overtimePersonnelData","parse","dateStr","formatted","applierDptName","applierAreaName","userAreaId","areaInfo","completedDocuments","isDialogVisible","selectedDocumentObject","pendingDocumentSelection","currentUserAreaId","currentUserTitleId","selectedDocument","getCurrentUserInfo","currentUser","documentIds","documentTypeID","substring","createdDate","onDocumentSelect","selectedDoc","doc","onDialogClose","submitForm","isSubmitting","canApprove","canReject","canInsertSigner","canNotify","canVoid","canResubmit","isLoading","canEdit","dynamicFormRef","showNode","dialogBody","formComponents","CorrectionForm","LeaveRequestForm","OvertimeRequestForm","LeaveCancellationForm","dynamicFormComponent","componentName","remountNode","currentFields","isShowApprovalGroup","workflowSteps","isShowActualField","currentStepIndex","findIndex","amendableSteps","canAmendByApplicant","lastAmendableStepIndex","formModel","signerList","currentStepName","config","isNotifyDialogVisible","isInsertSignerDialogVisible","handleClose","removeSigner","removeNotifier","buildSubmitDto","notifierIds","handleApprove","dto","handleSaveAndApproval","handleReject","rejectDto","DocumentID","RejecterID","Comment","handleVoid","handleResubmit","formDataWithAttachments","requestBodyToResubmit","formDataWithoutAttachments","File","entries","fetchDetail","detailRes","filesRes","permRes","perms","workflowRes","mapDataToFormModel","holidays","workdays","TaiwanCalendarYear","attendanceRecords","attendanceDate","dataReady","mergedAttendanceRecords","records","overtimeRecords","overtimeRecord","actualDate","monthDay","dayNames","dayName","existingRecord","record","dateA","match","dateB","localeCompare","lateRecords","row","delay","getDelay","isOvertimeRecord","isOvertime","isWeekend","getLeaveTypeForDate","hasTyphoonLeave","getTyphoonLeaveForDate","lateRecordsOver","lateTotal","sum","lateExtraTotal","slice","maxAllowedAttendanceDate","setMonth","canShowNextMonth","getData","personalMode","monthNumber","FinanceService","fetchLeaveRecords","fetchOvertimeRecords","getTyphoonLeave","fetchCardCorrectionRecords","getPreviousMonth","yearStr","monthStr","targetDate","editMode","getTaiwanCalendar","getNextMonth","isHoliday","_isOvertimeOnly","hasActualOvertimeForDate","targetMonthDay","monthDayMatch","actualMonthDay","getHolidayDescription","holidayItem","isAbsent","datePart","dayStr","rowDate","checkInMinutes","startThreshold","endThreshold","earlyStandard","getStatus","getStatusText","leaveRecords","typhoonLeaveRecords","cardCorrectionRecords","isTyphoonLeaveDialogVisible","selectedUser","namE_FIRST","emploY_ID","totalLate","getLeaveRecordsForDate","fullDateMatch","shortDateMatch","matchedRecords","startDateStr","endDateStr","leaveTypeName","getLeaveTypeName","leaveRequestID","leaveTypeNames","lastDay","page","pageSize","typhoonDate","leaveDate","getCardCorrectionForDate","newStatusDate","newStatus","parseNewStatusDate","getCardCorrectionRecordsForDate","matchingRecords","timeA","timeB","getCorrectionDisplayText","newStatusString","dateMatch","newTotal","openLeaveDetailByRecord","leaveRecord","openOvertimeDetail","getOvertimeDocumentIdForDate","getOvertimeRecordForDate","overtimeRequestId","firstRecord","openCardCorrectionDetail","specificDocumentId","getCardCorrectionDocumentIdForDate","recordsForDate","fallbackDocId","openTyphoonLeaveDetail","formatTyphoonLeaveDate","dateTimeString","refreshList","messages","text","details","handleMessageClick","msg","setEventsAndStatisticsAxios","getMacAddress","getMacAddressWithEmpId","GetMacAddressesWithListDpt","subDepartments","URLSearchParams","dpt","GetMacAddressesWithDpt","dptId","postMacAddress","updateMacAddress","deleteMacAddress","updateMacFormRegistration","nanoId","patch","updateMacFormDisposal","getComputerInventorys","getComputerInventoryWithDptNameAndEmpName","dptName","empName","getComputerInventoryWithDptFilter","getComputerInventoryWithListDpt","paramsSerializer","usp","getComputerInventoryWithDpt","postComputerInventory","deleteComputerInventory","updateComputerInventory","updateComputerInventoryDisposal","resolvedSize","internalValue","multiMode","sortNodes","searchTerm","flatData","emitter","mitt","searchOptions","searchField","searchKeyword","searchedTableData","kw","field","filteredTableData","cell","tableData","selectedDepartment","validateRow","deviceName","macRegex","cable_MacAddress","wireless_MacAddress","convertEmptyStringsToNull","obj","createAt","timeZone","updateAt","updateBy","handleDepartmentSelect","EventsAndStatisticsService","isDisposed","registeredAt","disposedAt","getAllMacAddress","managers","getMacAddressesWithListDpt","handleRegisteredChange","updatedRow","handleDisposedChange","handleEdit","isEditing","updatedData","processedData","tableIndex","handleDelete","deleteIndex","dateValue","on","formSize","macFormRef","anyCableFilled","cableMacFields","anyWirelessFilled","wirelessMacFields","macForm","reactive","NanoId","DepartmentId","UserId","DeviceName","Cable_MacAddress","Wireless_MacAddress","isObsoleted","createBy","checked_Cable_MacAddress","checked_Wireless_MacAddress","newFields","join","toUpperCase","newWireless","newCable","formatInput","handleKeydown","preventDefault","previousElementSibling","focus","formEl","nanoid","emits","close","menu","toggle","idx","isShowMarquee","handleCloseMarquee","drawerVisible","marqueeDialogVisible","MacFormVisible","marqueeMessage","handleMarqueeMessage","aspectRatio","isSideVisible","bodyStyle","transition","display","flexDirection","gap","marginLeft","intervalId","fileInput","form","en_name","ext_group","ext_num","new_password","confirm_new_password","profile_image","profileImageUrl","uploadingImage","newPasswordRules","isEditingPassword","regex","confirmNewPasswordRules","loaded","saving","showPassword","originalForm","originalPasswordForm","loadData","getEmployeeDataByID","assign","updateProfileImageUrl","onSubmit","dataToSave","old_password","editEmployeeData","onPasswordSubmit","newPassword","editPassword","startEditing","toggleEditMode","toggleEditPasswordMode","cancelEditPasswordMode","triggerFileUpload","handleFileSelect","uploadProfileImage","deleteProfileImage","handleAvatarError","viewBox","style","class","_createElementBlock","_hoisted_1","_cache","_createElementVNode","href","_imports_0","preserveAspectRatio","groupName","inject","submitting","accountTail","isTouched_Account","isTouched_Name","accountHead","dptsList","titlesList","selectedDptId","selectedTitleId","selectedAreaId","regMail_tailSection","extGroup","extNum","userNameInvalid","accountInvalid","userInput","pattern","submit_AccountValid","getDptsList","dptsIndex","chName","enName","getTitlesList","shortEnName","validField","missingLabels","isMailValidText","watchEffect","submit","regFormData","regName","regAccount","regEmail","regSelectedDpt","regSelectedTitle","regExtGroup","regExtNum","regAreaId","submitRegForm","editingRows","statuses","getUsersList","getStatusLabel","onRowEditSave","newData","updateUsers","updatedUser","orgData","person2","title2","globalId","flattenData","pid","output","currentId","child","OrgChart","ula","ana","field_0","field_1","img_0","nodeMenuButton","template","nodeBinding","field_2","enableSearch","nodeMouseClick","none","chartData","setChartData","chartOptions","setChartOptions","labels","datasets","backgroundColor","borderColor","borderWidth","documentStyle","getComputedStyle","textColor","getPropertyValue","textColorSecondary","surfaceBorder","plugins","legend","color","scales","x","ticks","grid","beginAtZero","indexAxis","maintainAspectRatio","font","weight","drawBorder","tooltips","intersect","stacked","fill","tension","body","hoverBackgroundColor","cutout","yAxisID","y1","drawOnChartArea","borderDash","usePointStyle","pointBackgroundColor","pointBorderColor","pointHoverBackgroundColor","pointHoverBorderColor","products","mockData","URL_Side","route","setMailAxios","uploadFiles","getSecurityMailData","updateSecurityMailDataWithId","securityMailData","addSecurityMailData","deleteSecurityMailDataWithId","mailId","getLastSendId","updateSortId","bulkData","sendTestMailToLoginUser","get_Job_SecurityMail_Trigger_AlarmTime","updateSecurityMailCron","securityMailCronData","toggleSecurityMailIsScheduled","securityMailId","restartService","getSendGroup_SendUser","restartService_usePowerShell","getSendGroupId_WithMailId","addSendGroup_SendUser","addData","updateSendGroup_SendUser","updateData","deleteSendGroup_SendUser","deleteData","updateGroupsOfMail","setDefaultSecurityMailCron","blocked_CheckBox","addMode","addGroupSuccess","updateGroupSuccess","addGroupError","updateGroupError","addGroupValidWarn","updateGroupValidWarn","addGroupSelectNullWarn","updateGroupSelectNullWarn","addGroupInputNullWarn","updateGroupInputNullWarn","updateGroupSelectGroupWarn","updateGroupAllContrast","deleteGroupSuccess","deleteGroupSelectGroupWarn","deleteGroupAllContrast","op2","addGroupName","updateGroupName","openDeleteGroupPopover","selectedGroup","groupNamePattern","isInvalid","deleteSelectedGroup","selectedGroupData","groupsData","group","sendGroupId","MailService","initData","closeDeleteGroupPopover","getGroupData","checkSelectedGroup","handleGroupChange","submitAddGroupName","allSelectedUserIds","deptKey","selectedUsers","concat","newAddData","SendUserId","SendGroupName","submitEditGroupName","newUpdateData","SendGroupId","hide","rawData","groupedData","cur","departmentEnName","departmentChName","g","sendGroupName","sendUserId","newGroupId","foundGroup","userIds","uId","handleTransferChange","settedGroupsData","settedGroups","handleAddClick","sendGroupData","newMailId","subject","done","tab","handleSwitchTab","newTab","useConfirm","updating","selectedCity","Mails","SetDefaultSecurityMailCron","settingDefault","blocked","SecurityMail_Trigger_Cron","currentMailId","currentMailSubject","openElDialog","CronExpression","cronstrue","saveCronEdit","TriggerName","editDialogVisible","dialogHeader","securityMails","selectedMail","sortedMails","dragMails","openDialog","mail","header","deleteMail","require","rejectProps","outlined","acceptProps","accept","saveMailEdits","addMailData","mailData","processedBody","attributes","isScheduled","fullBody","getPreviewImage","parser","DOMParser","parseFromString","imgElement","hasImage","preview","lastSendId","isLastSendMail","onDragEnd","onReorder","newOrderArray","isNextSendMail","lastSendMail","startIndex","indexOf","checkIndex","candidate","ref1","ref2","ref3","ref4","ref5","startTour","currentStep","onStepChange","stepIndex","buttonElement","$el","newValue","oldValue","handleButtonClick","toggleIsScheduled","login_delay","DDD","sendNotification","Notification","permission","requestPermission","logout","translationMap","MyFavorites","SystemManagement","EventsAndStatistics","ResearchAndDevelopment","Electronics","ProdTech","Warehouse","MultiDepartment","Administration","Sales","Purchasing","ProductionControl","PlantOperations","QualityAssurance","urlSide","Layout","pageListMenu","translatedLabel","subItem","login_user","login_dpt","login_id","login_title","selectedMenuKey","userAccount","userTitle","checkCookieChange","getComputerInventory","handleDisposalChange","disposalDate","disposedBy","getAllComputerInventory","getComputerInventoryWithEmp","computerFormRef","computerForm","computerAsset","screenSize","screenAsset","oS","oS_Version","office_Version","office_Asset","otherSoftware","otherDescription","filledBy","forms","editingRowId","editedRow","loadForms","resp","workflowService","handleEditForm","saveEdit","serialId","formName","cancelEdit","handleDeleteForm","definitions","createDef","createdAt","editingRowIndex","loadDefinitions","openCreateDialog","submitDefinition","Name","Description","CreatedAt","Status","Version","deleteDefinition","defId","findNodeById","found","joinRolesToTree","departmentNode","roleNode","sort_id","isRole","fetchRolesData","rolesData","selectedDefinitionId","stepList","processDefinitionId","stepName","actionType","nextStepIfApproved","nextStepIfRejected","isEditMode","loadAllDefinitions","loadSteps","openEditDialog","useraccount","userpassword","loginStatus","logining","newUserPassword","confirmNewUserPassword","passwordFormatError","passwordMismatch","shake","loginPasswordError","loginEmployeeDataError","loginInternalUserError","shakeLogin","login_EIP","errorMsg","handleConfirmNewPassword","confirmPassword","forbiddenStrings","passwordLower","containsForbidden","forbidden","sequentialNumbers","containsSequential","seq","firstLoginInputPassword","SalaryDataManager","constructor","Map","pendingRequests","debounceTimers","cacheExpireTime","getSalaryData","forceRefresh","cacheKey","clearTimeout","clearCache","_isCacheValid","requestPromise","_fetchAndProcessData","_setCacheData","salaryRes","leaveRes","CompanyInsurance","_processRawData","salaryData","leaveData","blockArr","_parseBlockData","block","blocks","_extractBlocks","insuranceCompany","_extractInsuranceCompany","enhancedBlockD","blockD","salaryHeadInfo","_parseSalaryHeadInfo","processedLeaveRecords","yearlyTotalHours","toFixed","hasValidSalaryStructure","_clearBlockDInsuranceFields","blockA","blockB","blockAnnualLeave","isInitial","blockData","ch_name","salaryHeadInfoStr","empDpt","empTitleGrade","insuranceLevel","empTitleName","empTitleLevel","cacheItem","cancelAllRequests","blockDObj","insuranceIds","hasCleared","clearedItems","companyInsurance","companyInsuranceField","companyInsuranceData","insuranceData","pensionCompany","content","laborCompany","calculatedLaborCompany","healthCompany","extractCompanyInsuranceData","companyInsuranceJson","defaultInsuranceData","","","getCacheStats","cacheSize","salaryDataManager","headerCellStyle","lineHeight","category","total_A","computedA","hourlyRow","parseFloat","hourlyAmount","emitBlockAAggregate","totalA","blockAAggregate","tableRowStyle","manualOvertimeI","manualOvertimeII","manualOvertimeIII","manualHolidayOvertime","computedHolidayOvertime","ceil","holidayOvertime","editedHoursCategories","fixedCategories","computedB","sumValue","overtimeI","overtimeII","overtimeIII","computedC","computedE","totalD","computedOvertimeI","computedOvertimeII","computedOvertimeIII","cellClassName","oldVal","getVal","idStr","aggregated","isMinute","total_B","total_C","total_E","initialBlockCTable","insurance","laborPersonal","healthPersonal","healthFamily","formatHours","num","displayWelfare","getCurrentInstance","welfareRow","displayPersonalLeave","personalLeaveRow","displayTyphoonLeave","typhoonLeaveRow","displayAbsenteeism","absenteeismRow","computedLateDeduction","lateDeduction","handleWelfareInput","lateRow","manualWelfare","manualPersonalLeave","manualTyphoonLeave","personalLeaveAmount","handlePersonalLeaveInput","typhoonLeaveAmount","handleTyphoonLeaveInput","fixedHoursCategories","hasUserInput","familyRow","healthRow","familyCount","healthFee","computedD","newHours","hasBackendData","flush","newEditMode","oldEditMode","savedUserInputs","total_D","rowAmount","finalAmount","rowData","defaultTableData","initializeTableData","updatedStructure","annualLeave","rowStyle","col1","col2","col3","col4","col5","col6","publicLaborPension","publicLaborInsurance","publicHealthInsurance","setExternalAxios","GetAllInsuranceRates","updateCounter","insuranceOptions","fillHeaderTableData","responseData","headInfo","getValue","newUser","salaryHeadInfoRef","countMap","counts","mappedInsuranceOptions","laborMap","newItem","laborLevel","healthLevel","combinedLevel","ExternalService","handleInsuranceUpdate","updateParentSalaryHeadInfo","updatedHeadInfo","search","selectedUserId","tabsWrapper","previousUserId","filteredUsers","onTabClick","u","baseList","isReservedAR03","mappedAll","ga","gb","areaFiltered","mapped","showReportDialog","Loading_download_Internal_Attendance_Monthly","Loading_download_External_Attendance_Monthly","Loading_download_Company_Salary_Monthly","Loading_download_Employee_Salary_Monthly","Loading_download_OP_Internal_Attendance_Monthly","Loading_download_External_Attendance_MonthlyOP","Loading_download_Company_Salary_MonthlyOP","Loading_download_Employee_Salary_MonthlyOP","download_Internal_Attendance_Monthly","contentDisposition","decodeURIComponent","filenameMatch","link","removeChild","download_External_Attendance_Monthly","download","download_Company_Salary_Monthly","download_Employee_Salary_Monthly","download_OP_Internal_Attendance_Monthly","download_External_Attendance_MonthlyOP","download_Company_Salary_MonthlyOP","download_Employee_Salary_MonthlyOP","blockAData","blockBData","blockDData","blockAnnualLeaveData","AnnualLeaveData","totalAValue","totalDValue","A_aggregate","B_aggregate","D_aggregate","publicContribution","showPersonalLeaveDialog","personalLeaveRecords","personalOvertimeRecord","backupData","showTyphoonLeaveDialog","typhoonLeaveSubmitting","typhoonLeaveFormRef","typhoonLeaveForm","typhoonLeaveRules","toggleEdit","backupAllData","restoreAllData","submitSalarySlip","substituteStructureForIntoSalary","salaryStructure","structureArr","structure","companyIds","publicInsurance","salaryStructureData","blockItem","matchingItem","mapping","handleUserSelected","loadingInstance","ElLoading","service","lock","background","initialHeadInfo","dpt_name","title_grade","title_name","title_level","loadSalaryData","clearSalaryData","checkForCalculationErrors","hasValidData","autoCalculateAllBlocks","autoFillTyphoonLeave","autoFillLeaveRecords","openDetail","documentType","calculateWeekendOvertimeHours","totalWeekendHours","weekendOvertimeRecords","actualHours","actualMinutes","totalHours","dayType","overtimeCalculation","calculateOvertimePayment","updateBlockBOvertimeHours","hours_1_33","hours_1_67","hours_2_67","remainingHours","typhoonLeaveResponse","totalTyphoonHours","Hours","typhoonLeaveItem","foundAnnualLeave","leaveEnName","leaveChName","yearlyTotalMinutes","targetFieldId","targetItem","parsedHours","isFinite","annualUsedItem","annualLeaveHours","finalHours","overtime1_3","overtime2_3","overtime5_3","newEid","oldEid","oldDate","refreshCurrentData","errorItems","itemName","duration","salaryHeadInfoObj","aggregatedBlocks","initialBlock","salarySlip","emp_id","Create_At","Create_By","Update_Time","Update_By","elapsed","MIN_DELAY","handleUpdateSalaryATotal","handleUpdateBlockAAggregate","handleUpdateSalaryDAggregate","handleUpdateSalaryB","updateDeductionD","handleUpdateInsuranceValues","handleAttendanceDate","handleLateTotal","updateAnnualLeaveData","handleSalaryHeadInfoUpdate","handleTyphoonDialogClose","confirmTyphoonLeave","submitData","createdBy","$q","useQuasar","companyLaborRateTableData","InfoTableData","blankInfoRows","originalLaborCompany","handleSalarySlipWithEmpId","populateSalaryData","structureArray","insuranceLevelRow","laborCompanyRow","healthL","daeRate","dae","OPRate","op","rateToUse","z","final","fetchSalaryStructureData","empID","show","spinner","QSpinnerGears","eID","remain","laborRate_editMode","laborRate_toggleEdit","saveData","original","calculated","Id","empNameRow","detailLoading","selectedMonth","mealAllowanceData","detailDialogVisible","selectedEmployee","detailRecords","totalMealAllowance","totalAmount","initializeCurrentMonth","formatCurrency","Intl","NumberFormat","currency","minimumFractionDigits","format","fetchMealAllowanceData","viewDetails","closeDetailDialog","setSpecialLeaveAxios","calculateSpecialLeave","calculateSpecialLeaveBatch","calculateSpecialLeaveByEmployee","leaveSystemType","customYearStartDate","anniversaryDate","getLeaveSystemTypes","getLeaveDaysTable","refYearStart","dayjs","startOf","handleRefDateChange","fetchAnnualLeaveData","annualLeaveData","leaveDetailRecords","selectedArea","totalAnnualLeaveHours","usedLeaveHours","unusedLeaveHours","formatMinutes","calculateUnusedLeaveMinutes","handleAreaChange","SpecialLeaveService","exporting","selectedYear","overtimeData","employeeDetails","workflowDialogVisible","selectedDocumentID","availableYears","currentYear","years","availableMonths","fetchOvertimeData","overtimeHours2Plus","overtimeHours2To4","overtimeHours4Plus","filteredData","hasOvertimeHours","overtimeHours0To2","hasOvertimeRecords","overtimeRecordsCount","hasMealAllowance","mealAllowanceTotal","showEmployeeDetails","exportExcel","exportData","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","colWidths","wch","queryConditions","areaText","monthLabel","currentDate","conditionText","printTable","printContent","generatePrintContent","printWindow","write","print","toLocaleDateString","html","totalHours0To2","totalHours2Plus","totalRecords","column","cellValue","formatTimeRange","formatTotalHours","openWorkflowDialog","getOvertimeDocumentID","closeWorkflowDialog","documentNumber","recordId","possibleIds","documentDialogVisible","fetchLeaveData","leaveDetails","documents","annualLeaveDocuments","sickLeave","sickLeaveDocuments","personalLeave","personalLeaveDocuments","menstrualLeave","menstrualLeaveDocuments","officialLeave","officialLeaveDocuments","workInjuryLeave","workInjuryLeaveDocuments","familyCareLeave","familyCareLeaveDocuments","marriageLeave","marriageLeaveDocuments","maternityLeave","maternityLeaveDocuments","prenatalCheckupLeave","prenatalCheckupLeaveDocuments","paternityLeave","paternityLeaveDocuments","funeralLeave","funeralLeaveDocuments","jobSeekingLeave","jobSeekingLeaveDocuments","openDocumentDetail","closeDocumentDialog","totalLeaveHours","query","filteredUserRes","q","currentPage","password_hash","openAddDialog","saveUser","userRes","empRes","editForm","editFormRef","birthday","sex","filteredEmpRes","submitEdit","getRowClass","currentPermission","module","isActive","updatedAt","updatedBy","parentPermissionId","savePermission","titleRes","grade","filteredTitleRes","roleQuery","rolePage","currentRole","created_at","saveRole","roleRes","searchRoles","filteredRoles","handleRoleSizeChange","handleRolePageChange","departmentQuery","departmentPage","currentDepartment","dpt_en_name","saveDepartment","deptRes","searchDepartments","filteredDepartments","handleDepartmentSizeChange","handleDepartmentPageChange","areaQuery","areaPage","currentArea","nation","saveArea","areaRes","searchAreas","filteredAreas","handleAreaSizeChange","handleAreaPageChange","wfRoleRes","sortBy","sortOrder","isProxy","filteredWFRoleRes","aValue","bValue","handleSortChange","order","roleName","filteredUserRoles","fetchWF_RoleData","fetchUserData","newRoleId","selectedRole","sortColumn","auditEvents","searchParams","from","to","fetchAuditEvents","getAuditEvents","dateTime","getActionTagType","actionId","trimmedActionId","setDefaultTimeRange","fetchData","StepTypeEnum","ApprovalAction","getApprovalActionDescription","activeTab","activeWorkflowTab","tableStyle","alignItems","minWidth","docs","docTypes","selectedStatus","sysMode","selectedRegion","getCurrentMonth","selectedDocType","allDocuments","sortField","secondarySortField","secondarySortOrder","availableRegions","tableColumnWidth","statusOptions","sys_statusOptions","computedStatusOptions","displayedDocs","filteredDocs","docDate","docYear","docMonth","docYearMonth","term","typeName","docTypeMap","creatorName","currentStatusName","primaryResult","compareValues","_row","_column","Y","M","D","apm","h12","h","borderRadius","departmentNameCache","employeeNameCache","getDepartmentNameCached","getEmployeeNameCached","apiMap","Related","Pending","Approved","Voided","All","InProgress","Completed","fetchDocs","currentOptions","o","applyRegionFilter","applicantDepartmentId","creator","creatorID","fetchDocTypes","docTypeMatch","onStatusChange","onMonthChange","onDocTypeChange","onRegionChange","tableRowClassName","rowIndex","onPageChange","onPageSizeChange","onSearchFieldChange","onSearchInput","onSearchClear","refreshCurrentStatus","getDefaultSelectValue","selectedOption","options","opt","defaultValue","getDefaultRadioValue","getDefaultCheckboxValue","selectedOptions","getValidationText","validation","minLength","maxLength","isEdit","fieldData","placeholder","customMessage","helpText","conditional","dependsOn","enableConditional","needsOptions","initFieldData","handleTypeChange","addOption","removeOption","handleConditionalToggle","enabled","getDefaultValueComponent","getDefaultValuePlaceholder","handleSave","templateData","drag","tags","settings","allowMultipleSubmissions","requireLogin","showProgressBar","submitButtonText","successMessage","redirectUrl","notificationEmails","maxSubmissions","inputVisible","inputValue","inputRef","showFieldEditor","editingField","editingFieldIndex","fieldTypeLabels","getFieldTypeLabel","initFormData","addField","newField","DynamicFormService","generateId","editField","removeField","handleFieldSaved","removeTag","tag","showInput","input","handleInputConfirm","updateFormTemplate","createFormTemplate","fieldCount","requiredFieldCount","sortedFields","getCategoryLabel","getStatusType","types","getFieldTypeColor","colors","hasOptions","hasValidation","goToDesigner","goToFillPage","responses","loadResponses","getFormResponses","exportResponses","exportFormResponses","analytics","totalResponses","completedResponses","averageCompletionTime","lastSubmission","completionRate","averageTime","lastSubmissionDate","requiredFieldsCount","viewResponses","loadAnalytics","formTemplates","selectedCategory","totalCount","showCreateDialog","showPreviewDialog","showResponseDialog","showAnalyticsDialog","selectedTemplate","categoryLabels","goToFormDesigner","loadFormTemplates","getFormTemplates","handleSearch","searchFormTemplates","handleFilter","handleSizeChange","newSize","handleCurrentChange","newPage","viewTemplate","editTemplate","showAnalytics","handleViewResponses","deleteTemplate","deleteFormTemplate","publishTemplate","publishFormTemplate","closeTemplate","closeFormTemplate","copyTemplate","copyFormTemplate","handleTemplateSaved","formFields","selectedFieldId","previewMode","showJsonDialog","showTemplateDialog","showSaveForm","templates","currentTemplate","loadingTemplates","templateForm","basicComponents","selectionComponents","selectedField","formJson","generateFieldId","substr","createFieldFromComponent","baseField","handleDragStart","dataTransfer","effectAllowed","setData","handleDrop","componentData","jsonData","textData","triggerRef","selectField","updateModelValue","handleDragOver","dropEffect","handleDragEnter","handleDragLeave","handleDragEnd","fieldId","updateField","updates","fieldIndex","updateSelectedField","handleFieldSave","updatedField","duplicateField","deleteField","deletedField","clearAll","saveTemplate","updateExistingTemplate","copyJson","clipboard","writeText","refreshTemplates","statusText","loadTemplate","getFormTemplate","convertedFields","saveNewTemplate","exportTemplate","exportTime","handleTemplateDialogClose","getStatusTagType","useRoute","templateFormRef","showPreview","formTemplate","templateRules","previewTemplate","handleFieldsSave","validateTemplate","isBasicValid","invalidFields","previewForm","handleBeforeLeave","hasChanges","onBeforeRouteLeave","canLeave","uploadRef","dns","port","domain","account","appName","manual","formRules","deviceData","handleConfirm","SystemManagementService","devices","getAll","getById","create","hosts","hostData","backup","currentDevice","selectedDevices","filteredDevices","keyword","device","totalDevices","getCategoryTagType","typeMap","togglePasswordVisibility","handleAdd","fetchDevices","handleRefresh","handleSelectionChange","selection","handleDownloadManual","handleDialogConfirm","handleDialogCancel","testing","hostName","backupHost","backupLocation","originalFolder","backupFolder","autoBackup","backupFrequency","backupTime","openFolderDialog","samplePaths","paths","selectedPath","handleTestConnection","currentHost","selectedHosts","filteredHosts","host","totalHosts","getHostStatusType","copyToClipboard","fetchHosts","backingUp","handleBackup","deviceManagementRef","hostManagementRef","handleTabChange","tabName","setCRMAxios","createCustomerTracking","getCustomerTracking","getColdCallingReport","getCustomerReport","addCustomerReport","updateCustomerTracking","deleteCustomerTracking","getSalespersonBusinessArea","getComCustomer","getCustomerClass","customerId","getCustomerClassByAmount","getOrderSummaries","CustomerID","updateOrderProductCategory","OrderNumber","ProductCategory","getAllCustomerTracking","getCustomerTrackingById","createCustomerForm","getCustomerForms","getCustomerReport_CustomerReadModels","getCustomerFormsByUserID","getAllCustomerForms","updateCustomer","deleteCustomer","getSalesEmployeeData","getCaseTrackings","getCaseTracking","getCaseTrackingByUserID","getAllCaseTracking","createCaseTracking","updateCaseTracking","deleteCaseTracking","updateFXRateAndOriginalAmount","getDeviceUsageCategories","getPerformanceReport","getPerformanceReportByYear","getComBillAccounts","createPerformanceReport","updatePerformanceReport","updatePerformanceReportAnnual","annualAmount","deletePerformanceReport","getPerformanceDashboard","selectedView","selectedDataType","quarterlyData","yearlyData","showAllBusinessAreaOption","selectedBusinessArea","businessAreaOptions","allTableData","allQuarterlyData","allYearlyData","salesRepPersonList","regionTableData","regionQuarterlyData","regionYearlyData","formatNumberWithCommas","calculateAchievementRate","actual","rate","getAchievementRateStyle","numericRate","getComparisonStyle","comparison","numericComparison","fontWeight","calculateComparison","current","lastYear","currentValue","lastYearValue","sign","calculateAchievementRateYearly","yearTarget","yearActual","yearAchievementRate","fetchPerformanceReport","CRMService","personalGoals","personalGoal","personalPerformances","lastYearRes","lastYearPerformances","uniqueBusinessAreas","salesRepBusinessAreaName","goal","salesRepID","salesRepName","perfEntry","monthlyAmounts","monthlyAmount","lastYearPerfEntry","lastYearMonthlyAmounts","monthKeys","monthKey","sortedProcessedData","personA","personB","calculateSummaryData","newRow","quarterTarget","quarterActual","quarterLastYearActual","quarterRate","yearLastYearActual","yearComparison","yearRate","calculateRegionData","applyDataFilter","regionGroups","regionName","regionMonthlyData","regionRow","monthlyTotal","monthlyLastYearTotal","salesRep","calculateRegionSummaryData","editRow","doneEdit","monthNames","SalesRepID","SalesRepName","closeEdit","handleBusinessAreaChange","handleDataTypeChange","filteredSalesRepIDs","filteredQuarterlyData","filteredYearlyData","applyUserPermissions","userAreaMapping","allowedArea","areaExists","newYear","isRadioDisabled","debounceTimer","handleViewChange","renderChart","comparisonChart","comparisonChartRef","countDefined","renderSeq","calculateYearOverYearComparison","lastYearActual","currentYearActual","getComparisonClass","monthlyTableData","quarterlyTableData","yearlyTableData","generateMonthlyTableData","achievementRate","yearOverYearComparison","generateQuarterlyTableData","quarter","generateYearlyTableData","currentYearValue","fetchComBillAccounts","personalPerformance","quarterAmounts","quarterAmount","yearlyAmount","lastYearQuarterAmounts","lastYearYearlyAmount","hasPersonalGoal","hasMonthly","hasQuarter","hasYearly","hasLYMonthly","hasLYQuarter","hasLYYearly","qKey","mk","monthly_len","monthly_target_defined","monthly_actual_defined","monthly_lastYearActual_defined","quarterly_len","yearly_len","getChartTitle","viewTitles","destroyChart","destroy","createComparisonChart","hasRef","currentData","ctx","getContext","lastYearSeries","currentYearSeries","lastYearSum","currentYearSum","sample_lastYear","sample_current","Chart","responsive","performanceChart","performanceChartRef","isTableExpanded","isChartExpanded","toggleCollapse","section","performanceData","createPerformanceChart","monthName","prevYear","currYear","maximumFractionDigits","getGrowthRate","prev","curr","getGrowthRateText","growthRate","getGrowthRateClass","getTotalPrevYear","getTotalCurrYear","getTotalGrowthRate","totalPrev","totalCurr","totalGrowth","getTotalGrowthClass","cumulativeChart","cumulativeChartRef","monthOptions","cumulativeData","createCumulativeChart","getCumulativeTotalPrevYear","getCumulativeTotalCurrYear","getCumulativeTotalGrowthRate","getCumulativeTotalGrowthClass","annualSection","cumulativeSection","initializeYears","updateCumulativeData","handleYearChange","handleMonthChange","newMonth","forceRenderAllCharts","forceRenderCharts","regionOptions","customerTypes","customerName","shortName","fullCompanyName","companyAddress","companyRegion","otherCompanyRegion","contactName","customerType","phoneExtension","faxNum","mobilePhone","taxId","customerSource","otherCustomerSource","responsibleArea","responsibleAreaDisplay","SalespersonBusinessArea","foundArea","salespersonID","businessArea","phoneRegex","plainForm","toRaw","CreatorID","comCustomerData","getComCustomerData","getListCountyData","axios","xmlDoc","getElementsByTagName","nameElem","textContent","querySearchCompany","cb","list","fullName","onCompanySelect","linkMan","mobileTel","fetchgetSalespersonBusinessArea","isLoadingMore","productCategories","allOrderSummaries","isLoadingOrderSummaries","isRWDMode","loadOrderSummaries","isEditingProductCategory","filteredOrderSummaries","marketCategory","projectName","currentPageData","loadedItemCount","onSearch","updateProductCategory","newCategory","","getFormattedDateRange","wrapper","handleScroll","scrollHeight","clientHeight","loadMore","orderSummaryFieldLabels","filteredOrderSummaryData","excludedKeys","mediaQuery","handleMediaQueryChange","customers","customerClassDate","actionLabel","edit","orderSummary","searchFields","inputPlaceholder","loadCustomers","customerClassByAmountData","isLoadingCustomerClassByAmount","editableFields","canEditOrDelete","dialogAction","dialogRow","isInputCustomerClassDate","orderSummaryDialogVisible","dialogFields","customerClassPopoverVisible","customerClassCustomerId","customerClassData","isLoadingCustomerClass","activePopoverId","generatePopoverId","toggleCustomerClassPopover","popoverId","loadCustomerClassData","dateRange","formattedStart","formattedEnd","formatToYMDInt","confirmAction","filteredCustomers","oneMonthAgo","startOfMonthAgo","endOfDay","off","filteredRowData","dd","useSalesEmployeeData","salesEmployees","fetchSalesEmployeeData","customerTrackingForm","fillDate","salesperson","customerSourceOther","customerTypeOther","contactPerson","contactPhone","formToSubmit","clearValidate","disabledDate","customerTrackingData","loadCustomerTracking","filteredCustomerTracking","deleteRow","handleCaseTrackingAdded","eventBus","listCustomerTrackingRef","handleFormSubmitted","setSalesAxios","querySales","queryData","pagination","getCustomers","getProjects","queryFormRef","queryForm","billNo","queryRules","salesData","queryLoading","queryExecuted","paginationInfo","totalPages","hasNextPage","hasPreviousPage","handleQuery","resetPage","SalesService","prototype","hasOwnProperty","call","dataLength","Data","TotalCount","TotalPages","HasNextPage","HasPreviousPage","handleReset","handleExport","","","","","","","","","","","","dateNumber","formatNumber","number","handlePrint","totalTaxAmount","formElement","fetchColdCallingReport","Boolean","applyBusinessAreaFilter","sevenDaysAgo","customerReadModels","customerReportForm","CustomerName","ContactDate","ContactDescription","createdByUserId","createdByUserName","querySearch","createFilter","customer","handleSelect","contactDateRange","groupedAndSortedCustomers","contactDate","rwdTableRef","expandedRowKeys","selectedUserRecords","customerID","contactDescription","onSelectedFieldChange","originalRow","editableRow","editing","toggleRowExpansion","saveRow","dataToUpdate","updateCustomerReport","deleteCustomerReport","el","handleRowClick","userRecords","c","rwd","caseProgressOptions","systemTypeOptions","FillDate","CaseName","CoopUnit","DeviceUsageCategory","SystemType","DeviceList","EstimatedAmount","EstimatedDeliveryDate","CaseProgress","dataToSubmit","caseId","caseName","deviceUsageCategoriesData","fetchDeviceUsageCategories","visible_totalEstimatedAmount","totalEstimatedAmount","filteredCases","estimatedAmount","cases","fillDateRange","editingAmountMode","coopUnit","deviceUsageCategory","systemType","deviceList","estimatedDeliveryDate","caseProgress","fxRate","originalAmount","localAmount","caseItem","itemCategories","cat","itemProgresses","selectedProgress","itemSystemTypes","selectedType","deliveryDate","loadCases","editAmount","FXRate","isShow","cleanAmount","numericAmount","formatDeviceUsageCategory","categoryIds","ids","names","formatCaseProgress","caseProgresses","progresses","progress","formatSystemType","systemTypes","system","listCaseTrackingRef","handleCaseTrackingSubmitted","captureLoading","leaveRecordsRef","currentMonth","annualLeaveLoading","annualLeaveSummaryLoading","annualLeaveSummaryData","selectedSummaryMonth","monthlySummaryData","monthlySummaryLoading","remainingHoursLoading","leaveTypeRules","userLeaveRecords","isWFDialogVisible","leaveTypeTagTypes","captureLeaveRecords","html2canvas","default","useCORS","allowTaint","scale","canvas","deviceType","distinguishCancelAndClose","toDataURL","jsPDF","imgData","imgWidth","imgHeight","pdfWidth","pdfHeight","ratio","finalWidth","finalHeight","pdf","orientation","unit","addImage","save","queryLeaveRecords","recordsWithMonthlyHours","calculateMonthlyAccumulatedHours","refreshData","monthNum","calculateMonthlySummary","handleLeaveTypeChange","getLeaveTypeTagType","formatLeaveHours","monthlyHoursCache","monthlyParams","monthlyResponse","monthlyRecords","monthlyHours","leaveTotalInUnitsOfHours","leaveTotalInUnitsOfMinutes","monthlyAccumulatedHours","getMonthLabel","getCurrentMonthLabel","calculateAnnualLeaveSummary","summaryData","typeKey","invalidRecords","validRecords","recordHours","targetMonth","refreshMonthlySummary","formatMonthDisplay","calculateAnnualLeaveData","employeeResponse","hireDateObj","hireYear","targetYear","yearStartDate","targetYearCalculationDate","specialLeaveRequest","hireDate","calculationDate","specialLeaveResponse","totalLeaveDays","specialLeaveDays","usedAnnualLeaveParams","usedLeaveResponse","usedRecords","annualLeaveRecords","usedHours","usageRate","usedDays","remainingDays","hireDateForDisplay","currentYearDays","sixMonthsToAnniversaryDays","calculationFormula","sixMonthsCalculationFormula","sixMonthsLeaveStartDate","sixMonthsLeaveEndDate","refreshAnnualLeaveData","openWFDialog","closeWFDialog","getRemainingHoursClass","getRemainingDaysClass","days","getProgressColor","percentage","calculateEmployeeSeniority","totalMonths","months","tempDate","setFullYear","diffTime","shouldShowCurrentYearDays","hire","yearStart","yearEnd","monthsAtYearStart","senNow","lastYearEnd","monthsAtLYE","monthsDiffAt","crossedSixThisYear","sixMonthDate","shouldShowSixMonthsDays","asOf","getSixMonthsDaysDisplay","seniority","getAnnualLeaveAlert","monthsToYearEnd","formatDateToChinese","LeaveTypeCode","MaxHoursPerYear","getCurrentYearLeavePeriod","nextYear","getSixMonthsLeavePeriod","sixMonthsAfterHire","endOfHireYear","fetchLeaveTypeRules","LeaveTypeName","fetchUserLeaveRecords","LeaveType","ApplyDate","LeaveTotalInUnitsOfHours","refreshRemainingHours","filteredRecords","initDate","fetchAttendanceRecords","prevDay","nextDay","routes","EIP_Login","orgChart","meta","boardPermission","HomePage","MacForm","ComputerInventory","noAuth","SalarySlip","accountPermission","PersonalAttendanceRecord","DailyAttendanceRecord","PersonalInformation","SalaryStructure","MealAllowanceSummary","AnnualLeaveSummary","OvertimePageInfo","LeavePageInfo","CustomerInfo","salesPermission","CustomerTracking","SalesQuery","CaseTracking","sales_manufaction_research_Manager_Permission","PerformanceReport","RO0006Permission","PersonalGoals","PerformanceDashboard","DAE_Hight_Level_Team_Permission","CustomerReport","ColdCallingReport","Layout_LeaveRequestForm","AttendanceRecord","isDev","List_WF_Personal","Dpt_System","DAEHistory","PrimeChart","editDptFuncList_Form","userManagement","SecurityMail","BulletinBoard","employeeRegistration","editDptFuncList","sys_MacForm","misPermission","sys_ComputerInventory","sys_DAE_Data_Management","sys_WF_Management","FormTemplateManagement","FormDesigner","DeviceHostManagement","requiresAuth","redirect","createRouter","history","createWebHashHistory","beforeEach","absenteeism","attendanceStatistics","employeeNameSearch","lateText","Attendance","ClockIn","ClockOut","leaveTypes","annualUsed","annualRemaining","personal","official","menstrual","family","bereavement","maternity","parental","marriage","workInjury","paternity","overtime","lateWithinThreeMinutes","lateBeyondThreeMinutes","totalMinutesLate","accumulatedMinutesAfterFourth","holiday","setLoginAxios","setFileAxios","setUpdateAxios","zhTW","enUS","i18n","createI18n","legacy","fallbackLocale","missingWarn","fallbackWarn","baseURL","app","createApp","App","pinia","createPinia","globalProperties","$axios","provide","setEIPAxios","setDynamicFormAxios","$","jQuery","ElementPlusIconsVue","use","persistedstate","Vue3Dragscroll","InfiniteScroll","VueQuillEditor","Quasar","Loading","PrimeVue","preset","Aura","prefix","darkModeSelector","cssLayer","directive","mounted","Toast","ConfirmDialog","BadgeDirective","ToastService","ElementPlus","zhTw","ConfirmationService","errorHandler","vm","stack","$options","_componentTag","lifecycleInfo","mount","SIGNALR_URL","connection","signalR","withUrl","withAutomaticReconnect","build","onreconnected","registerCurrentUser","registeredUsers","registeredCount","dispatchEvent","CustomEvent","authData","parsedAuth","Connected","invoke","connectionState","registerUser","stop","interceptors","token","Authorization","getFormAnalytics","getFormFieldStats","getFormResponse","submitFormResponse","updateFormResponseStatus","deleteFormResponse","getFormStatistics","formTemplateId","uploadFile","downloadFile","fileId","validateFormData","errors","stringValue","numValue","RegExp","getUserStore","decodedToken","jwtDecode","expireTime","sub","refresh_JWT","user_id","setToken","username","Login","usersData","getIP","punch","getPresenceHistory","disconnectPresence","heartbeatInterval","startHeartbeat","stopHeartbeat","method","reregisterUser","sendBeacon","departmentIds","departmentNames","setUser","decode","arr_departmentIds","arr_departmentNames","strategies","storage","showSuccessDialog","submittedBy","fieldErrors","isExpired","visibleFields","isFieldVisible","totalSteps","progressPercentage","uploadUrl","import","uploadHeaders","loadFormTemplate","templateId","initializeFormData","buildValidationRules","fieldRules","Infinity","dependsOnField","dependsOnValue","conditionValue","emailRegex","handleFieldChange","getFileList","originalName","filePath","beforeFileUpload","isValidSize","handleFileSuccess","fileSize","mimeType","handleFileError","handleSubmit","hasErrors","metadata","userAgent","handleCancel","go","handleSuccessConfirm","categoryMap","hr","finance","purchase","other","newId","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","__proto__","ns","def","getOwnPropertyNames","defineProperty","enumerable","chunkId","promises","miniCssF","globalThis","Function","inProgress","dataWebpackPrefix","l","needAttach","scripts","getAttribute","charset","nc","onScriptComplete","doneFns","parentNode","bind","Symbol","toStringTag","installedChunks","installedChunkData","promise","loadingEnded","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}